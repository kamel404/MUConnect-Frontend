import{u as r,j as e,F as n,S as k,L as B,K as f,d as o,m as w,B as t,a7 as _,O as L,A as T,a2 as U,n as E,a8 as P,V as m,H as h,I as j,a6 as W}from"./chakra-BFMGxYLr.js";import{q as z,p as D,n as G,C as M,d as N,h as V,O as H}from"./index-Dge-MEAl.js";import{u as R,j as $,a as b}from"./react-6s1XWRBU.js";import{M as O,a as X}from"./userService-BaPlotyr.js";const q="https://via.placeholder.com/150";W(t);const Z=()=>{const C=R(),{userId:p}=$(),[A,u]=b.useState(!0),[s,y]=b.useState(null),v=r("white","gray.700"),c=r("gray.800","white"),l=r("gray.500","gray.400");r("gray.50","gray.900"),r("gray.200","gray.700"),b.useEffect(()=>{(async()=>{var d,x;u(!0);try{const a=await X(p||"me"),I={id:a.id,name:`${a.first_name||""} ${a.last_name||""}`.trim()||a.username,username:a.username,email:a.email,bio:a.bio,major:((d=a.major)==null?void 0:d.name)||"N/A",faculty:((x=a.faculty)==null?void 0:x.name)||"N/A",roles:(a.roles||[]).map(g=>typeof g=="string"?g:g.name),verified:a.is_admin||a.is_moderator,avatar:a.avatar?`${H}/storage/avatars/${a.avatar}`:q,joinDate:a.created_at};y(I)}catch(a){console.error("Failed to load visitor profile",a),y(null)}finally{u(!1)}})()},[p]);const S=()=>C(-1);if(A)return e.jsx(n,{height:"100vh",width:"100%",align:"center",justify:"center",children:e.jsx(k,{size:"xl",thickness:"4px",color:"blue.500"})});if(!s)return e.jsxs(B,{maxW:"container.xl",py:8,textAlign:"center",children:[e.jsx(f,{children:"User Not Found"}),e.jsx(o,{children:"The user profile you are looking for does not exist."}),e.jsx(w,{icon:e.jsx(z,{}),onClick:S,"aria-label":"Go back",mt:4})]});const F=({icon:i,title:d,value:x})=>e.jsxs(h,{spacing:4,p:4,bg:r("gray.50","gray.800"),borderRadius:"lg",w:"full",children:[e.jsx(t,{as:i,color:"blue.500",boxSize:6}),e.jsxs(m,{align:"start",spacing:0,children:[e.jsx(o,{fontSize:"sm",color:l,children:d}),e.jsx(o,{fontWeight:"medium",color:c,children:x})]})]});return e.jsx(n,{minH:"100vh",p:4,bg:r("gray.50","gray.800"),justify:"center",children:e.jsx(t,{w:{base:"full",md:"90%",lg:"80%"},children:e.jsxs(_,{bg:v,p:0,overflow:"hidden",children:[e.jsxs(t,{position:"relative",h:"180px",mb:"60px",children:[e.jsx(L,{src:O,alt:"Cover Photo",objectFit:"cover",w:"full",h:"full"}),e.jsx(n,{position:"absolute",top:4,left:4,right:4,justify:"space-between",zIndex:1,children:e.jsx(w,{icon:e.jsx(z,{}),"aria-label":"Go back",onClick:S,bg:r("white","gray.800"),color:c,_hover:{bg:r("gray.100","gray.700")},boxShadow:"md",title:"Go back"})}),e.jsx(T,{size:"xl",src:s.avatar,name:s.name,position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},boxShadow:"lg",border:"4px solid",borderColor:r("white","gray.800")})]}),e.jsxs(t,{px:{base:4,md:6},children:[e.jsxs(n,{justify:{base:"center",md:"flex-start"},align:"center",mb:6,mt:{base:5,md:0},children:[e.jsxs(f,{size:{base:"lg",md:"xl"},color:c,textAlign:{base:"center",md:"left"},children:[s.name,s.verified&&e.jsx(U,{size:"24px",bg:"blue.500",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",ml:2,verticalAlign:"middle",children:e.jsx(D,{size:"16px"})})]}),e.jsxs(o,{color:l,fontSize:"md",ml:3,children:["@",s.username]})]}),e.jsx(n,{mb:4,flexWrap:"wrap",gap:2,justify:{base:"center",md:"flex-start"},children:s.roles.map(i=>e.jsx(E,{colorScheme:i==="moderator"?"purple":i==="admin"?"red":"blue",textTransform:"capitalize",children:i},i))}),s.email&&e.jsx(F,{icon:G,title:"Email",value:s.email})]}),e.jsxs(t,{p:6,borderTop:"1px solid",borderColor:r("gray.100","gray.700"),children:[e.jsx(f,{size:"md",mb:4,children:"About"}),e.jsx(o,{color:c,children:s.bio||"No bio available."})]}),e.jsxs(P,{columns:{base:1,md:3},spacing:{base:3,md:6},p:6,bg:v,borderTop:"1px solid",borderColor:r("gray.100","gray.700"),children:[e.jsxs(m,{spacing:1,alignItems:"flex-start",children:[e.jsxs(h,{children:[e.jsx(j,{as:M,color:"blue.500"}),e.jsx(o,{fontSize:"sm",color:l,children:"Major"})]}),e.jsx(o,{fontWeight:"bold",fontSize:"md",children:s.major})]}),e.jsxs(m,{spacing:1,alignItems:"flex-start",children:[e.jsxs(h,{children:[e.jsx(j,{as:N,color:"blue.500"}),e.jsx(o,{fontSize:"sm",color:l,children:"Faculty"})]}),e.jsx(o,{fontWeight:"bold",fontSize:"md",children:s.faculty})]}),e.jsxs(m,{spacing:1,alignItems:"flex-start",children:[e.jsxs(h,{children:[e.jsx(j,{as:V,color:"blue.500"}),e.jsx(o,{fontSize:"sm",color:l,children:"Joined"})]}),e.jsx(o,{fontWeight:"bold",fontSize:"md",children:new Date(s.joinDate).toLocaleDateString()})]})]})]})})})};export{Z as default};
