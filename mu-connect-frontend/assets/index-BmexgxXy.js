const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-BwU4tXPw.js","assets/react-DDk2FCmG.js","assets/chakra-m0cgOFZ7.js","assets/index-BJNqqCsF.js"])))=>i.map(i=>d[i]);
import{j as e,V as ot,H as ft,T as $,B as de,C as Ai,G as fr,F as ke,I as Ir,a as ht,k as dp,S as br,b as Te,A as Fr,c as Er,d as Ft,u as Hr,e as vn,f as qr,g as mt,h as xt,i as Br,L as jc,l as Dg,P as Is,m as Ns,n as zi,o as Sc,D as an,p as ui,q as hi,r as Wn,s as ae,t as lr,v as rr,w as dt,x as Zn,y as _i,z as ll,E as Yr,M as wn,J as Wr,K as jn,N as rn,O as cn,Q as Ur,R as ri,U as Ql,W as dn,X as Ut,Y as un,Z as hn,_ as fn,$ as Zt,a0 as Ws,a1 as Us,a2 as Sn,a3 as fo,a4 as kn,a5 as Ar,a6 as In,a7 as zr,a8 as Cc,a9 as Mg,aa as Bg,ab as Fh,ac as Bo,ad as qg,ae as qo,af as Wg,ag as po,ah as Qn,ai as Ts,aj as da,ak as Bc,al as qc,am as Ug,an as Zl,ao as ec,ap as Hd,aq as Hg,ar as Zo,as as Ih,at as $g,au as up,av as Lr,aw as Yo,ax as Cu,ay as Gg,az as Vg,aA as Yg,aB as Jg,aC as _c,aD as tc,aE as Xg,aF as Kg,aG as Qg,aH as Zg,aI as em,aJ as tm,aK as rm,aL as nm,aM as im,aN as sm,aO as hp,aP as om,aQ as am,aR as $d,aS as Gd,aT as lm,aU as cm,aV as dm,aW as um,aX as hm}from"./chakra-m0cgOFZ7.js";import{e as fm,b as us,u as Jr,a as z,N as kc,L as Ii,f as cl,h as Wc,c as rc,r as go,i as pm,g as gm,O as fp,j as mm,k as Mr,B as xm}from"./react-DDk2FCmG.js";import{C as bm,a as ym,L as vm,B as wm,p as jm,b as Sm,c as Cm,A as _m,D as km,d as nc}from"./charts-BQajcoWg.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var ic={},zh;function Am(){if(zh)return ic;zh=1;var t=fm();return ic.createRoot=t.createRoot,ic.hydrateRoot=t.hydrateRoot,ic}var Lm=Am(),pp={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Dh=us.createContext&&us.createContext(pp),Pm=["attr","size","title"];function Nm(t,r){if(t==null)return{};var n=Om(t,r),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)i=s[o],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Om(t,r){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(r.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Ac(){return Ac=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ac.apply(this,arguments)}function Mh(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function Lc(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Mh(Object(n),!0).forEach(function(i){Rm(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mh(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Rm(t,r,n){return r=Em(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Em(t){var r=Tm(t,"string");return typeof r=="symbol"?r:r+""}function Tm(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function gp(t){return t&&t.map((r,n)=>us.createElement(r.tag,Lc({key:n},r.attr),gp(r.child)))}function St(t){return r=>us.createElement(Fm,Ac({attr:Lc({},t.attr)},r),gp(t.child))}function Fm(t){var r=n=>{var{attr:i,size:o,title:s}=t,a=Nm(t,Pm),c=o||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),us.createElement("svg",Ac({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:u,style:Lc(Lc({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&us.createElement("title",null,s),t.children)};return Dh!==void 0?us.createElement(Dh.Consumer,null,n=>r(n)):r(pp)}function Im(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function Ju(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function Hn(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function ea(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function zm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(t)}function ta(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function ra(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function zs(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(t)}function Uc(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(t)}function Ki(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Dm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(t)}function zn(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function Di(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function hs(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function Ds(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function ua(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function Mm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function fs(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function Bm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"7.5 4.21 12 6.81 16.5 4.21"},child:[]},{tag:"polyline",attr:{points:"7.5 19.79 7.5 14.6 3 12"},child:[]},{tag:"polyline",attr:{points:"21 12 16.5 14.6 16.5 19.79"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function Ci(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function qm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function Wm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function la(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function Um(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(t)}function Hm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function $m(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function Gm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"},child:[]}]})(t)}function Un(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function Vm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"},child:[]},{tag:"polyline",attr:{points:"13 2 13 9 20 9"},child:[]}]})(t)}function Hc(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function _u(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"},child:[]},{tag:"line",attr:{x1:"4",y1:"22",x2:"4",y2:"15"},child:[]}]})(t)}function mp(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Ym(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function Jm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function rl(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(t)}function Xm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 16 12 14 15 10 15 8 12 2 12"},child:[]},{tag:"path",attr:{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"},child:[]}]})(t)}function Km(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"},child:[]},{tag:"path",attr:{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"},child:[]},{tag:"line",attr:{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"},child:[]}]})(t)}function xp(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function ku(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function Bh(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"},child:[]},{tag:"polyline",attr:{points:"10 17 15 12 10 7"},child:[]},{tag:"line",attr:{x1:"15",y1:"12",x2:"3",y2:"12"},child:[]}]})(t)}function Pc(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function Xu(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function Ko(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function Qm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function Zm(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(t)}function Au(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function e1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(t)}function bp(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(t)}function nl(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(t)}function t1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"},child:[]}]})(t)}function r1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(t)}function pi(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function n1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 6 2 18 2 18 9"},child:[]},{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"},child:[]},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8"},child:[]}]})(t)}function i1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function ha(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function yp(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function s1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function fa(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"},child:[]}]})(t)}function o1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(t)}function Ku(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(t)}function a1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(t)}function Lu(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},child:[]}]})(t)}function dl(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function $c(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]}]})(t)}function Nc(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function l1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"},child:[]}]})(t)}function c1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(t)}function d1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(t)}function qh(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function na(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function ni(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function Qu(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(t)}function co(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const Vd=({title:t,items:r})=>e.jsxs(ot,{align:["center","start"],spacing:3,children:[e.jsx(ft,{size:"sm",mb:2,children:t}),r.map(n=>e.jsx($,{fontSize:"sm",_hover:{color:"blue.300"},children:n},n))]}),ki="/assets/maaref-logo-CWYUoBqw.png",u1=()=>e.jsx(de,{bg:"blue.900",color:"white",py:[8,12],children:e.jsxs(Ai,{maxW:"container.lg",children:[e.jsxs(fr,{templateColumns:{base:"1fr",md:"repeat(4, 1fr)"},gap:[8,8],pb:[4,8],textAlign:["center","left"],children:[e.jsxs(ot,{align:["center","start"],spacing:4,children:[e.jsxs(ke,{align:"center",gap:2,direction:["column","row"],children:[e.jsx(Ir,{src:ki,boxSize:"40px"}),e.jsx(ft,{size:"md",children:"MU Connect"})]}),e.jsx($,{opacity:.9,fontSize:"sm",children:"Connecting every learner at Maaraf University"}),e.jsxs(ke,{gap:4,mt:4,children:[e.jsx(ht,{as:l1,boxSize:5}),e.jsx(ht,{as:Gm,boxSize:5}),e.jsx(ht,{as:Km,boxSize:5})]})]}),e.jsx(Vd,{title:"Product",items:["Overview","Features","Pricing","Roadmap"]}),e.jsx(Vd,{title:"Support",items:["Help Center","Contact Us","Status","Feedback"]}),e.jsx(Vd,{title:"Legal",items:["Terms","Privacy","Cookies","Accessibility"]})]}),e.jsx($,{textAlign:"center",pt:[4,8],borderTop:"1px",borderColor:"blue.700",opacity:.8,fontSize:"sm",children:"© 2025 MU Connect"})]})});dp`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
  100% { transform: translateY(0px); }
`;const h1=()=>{const t=Jr();return e.jsx(Ai,{maxW:"container.xl",centerContent:!0,py:[12,20],children:e.jsxs(br,{direction:{base:"column",md:"row"},spacing:[8,10],align:"center",children:[e.jsxs(ot,{align:["center","start"],spacing:6,maxW:"2xl",textAlign:["center","left"],children:[e.jsxs(ft,{color:"blue.900",size:["2xl","3xl"],lineHeight:"1.1",fontWeight:"extrabold",px:[2,0],children:["Empower Your Learning Journey with"," ",e.jsx(de,{as:"span",bgGradient:"linear(to-r, blue.500, teal.500)",bgClip:"text",children:"MU Connect"})]}),e.jsx($,{fontSize:["md","xl"],color:"gray.600",lineHeight:"1.7",children:"Centralize your courses, collaborate with peers, and stay on top of every deadline — all at Maaraf University."}),e.jsxs(ke,{gap:4,align:"center",direction:["column","row"],w:"full",justify:["center","start"],children:[e.jsx(Te,{size:["md","lg"],colorScheme:"blue",px:[6,10],rightIcon:e.jsx(ua,{}),w:["full","auto"],onClick:()=>t("/register"),children:"Sign Up"}),e.jsx(Te,{size:["md","lg"],variant:"outline",colorScheme:"blue",px:[6,10],w:["full","auto"],onClick:()=>t("/login"),children:"Login"})]})]}),e.jsx(Ir,{src:ki,boxSize:{base:"250px",sm:"300px",md:"600px"},alt:"Collaboration illustration"})]})})};function f1(t){return St({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"},child:[]}]})(t)}const Wo=({icon:t,title:r,description:n,color:i="blue"})=>e.jsxs(ot,{bg:"white",p:[4,8],borderRadius:"2xl",boxShadow:"xl",align:"start",spacing:4,transition:"all 0.3s",_hover:{transform:"translateY(-8px)"},position:"relative",overflow:"hidden",textAlign:["center","left"],children:[e.jsx(de,{position:"absolute",top:"-20px",right:"-20px",w:"100px",h:"100px",bg:`${i}.100`,borderRadius:"full"}),e.jsx(ht,{as:t,boxSize:[6,8],color:`${i}.600`,mx:["auto","0"]}),e.jsx(ft,{size:["md","lg"],color:"blue.900",textAlign:["center","left"],children:r}),e.jsx($,{color:"gray.600",lineHeight:"1.7",fontSize:["sm","md"],children:n})]}),p1=()=>e.jsx(de,{py:[12,20],bg:"white",children:e.jsxs(Ai,{maxW:"container.lg",children:[e.jsxs(ot,{spacing:3,mb:[8,12],children:[e.jsx($,{color:"blue.500",fontWeight:"bold",fontSize:["sm","md"],children:"CORE FEATURES"}),e.jsx(ft,{textAlign:"center",size:["xl","2xl"],color:"blue.900",maxW:"2xl",children:"Everything You Need for Academic Success"})]}),e.jsxs(fr,{templateColumns:{base:"1fr",md:"repeat(3, 1fr)"},gap:[4,8],children:[e.jsx(Wo,{icon:ni,title:"Peer Collaboration",description:"Group discussions, file sharing, and real-time whiteboard sessions",color:"blue"}),e.jsx(Wo,{icon:zs,title:"Course Resources",description:"Organized lecture notes, past exams, and curated study guides",color:"teal"}),e.jsx(Wo,{icon:ra,title:"Section Requests",description:"Post your desired section swap and get matched with classmates instantly",color:"purple"}),e.jsx(Wo,{icon:f1,title:"Grade Calculator",description:"Estimate required scores and track your progress",color:"orange"}),e.jsx(Wo,{icon:zn,title:"Events & Deadlines",description:"Stay updated with courses and campus activities",color:"green"}),e.jsx(Wo,{icon:r1,title:"Degree Planner",description:"Visualize requirements and plan your academic journey",color:"red"})]})]})}),Wh=({name:t,role:r,text:n,avatar:i,rating:o})=>e.jsxs(ot,{bg:"white",p:[4,8],borderRadius:"2xl",align:"start",spacing:4,boxShadow:"xl",textAlign:["center","left"],children:[e.jsx(ke,{gap:1,justify:["center","start"],children:[...Array(o)].map((s,a)=>e.jsx(ht,{as:Ku,color:"yellow.400",boxSize:5},a))}),e.jsxs($,{color:"gray.600",fontSize:["md","lg"],lineHeight:"1.7",children:['"',n,'"']}),e.jsxs(ke,{align:"center",gap:4,direction:["column","row"],w:"full",children:[e.jsx(Fr,{src:i,size:["md","lg"]}),e.jsxs(de,{textAlign:["center","left"],children:[e.jsx($,{fontWeight:"bold",color:"blue.900",children:t}),e.jsx($,{color:"gray.500",fontSize:"sm",children:r})]})]})]}),g1=()=>e.jsx(de,{bg:"blue.50",py:[12,20],children:e.jsxs(Ai,{maxW:"container.lg",children:[e.jsxs(ot,{spacing:3,mb:[8,12],children:[e.jsx($,{color:"blue.500",fontWeight:"bold",fontSize:["sm","md"],children:"SUCCESS STORIES"}),e.jsx(ft,{textAlign:"center",size:["xl","2xl"],color:"blue.900",children:"Stories from Our Community"})]}),e.jsxs(fr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)"},gap:[4,8],children:[e.jsx(Wh,{name:"Ali Ghoul",role:"Mechanical Engineer",text:"I once get the same questions from in my exam that I found on the platform and it helped me a lot.",avatar:ki,rating:5}),e.jsx(Wh,{name:"Mahdi Alayan",role:"Computer Science",text:"I submitted a section change request and multiple seniors shared curated resources within the hour.",avatar:ki,rating:5})]})]})}),m1=()=>e.jsx(de,{py:[12,20],bg:"white",children:e.jsx(Ai,{maxW:"container.md",textAlign:"center",children:e.jsxs(de,{bg:"blue.50",borderRadius:["xl","3xl"],p:[6,12],boxShadow:"lg",children:[e.jsx($,{color:"blue.500",fontWeight:"bold",mb:4,fontSize:["sm","md"],children:"START LEARNING TODAY"}),e.jsx(ft,{size:["xl","2xl"],color:"blue.900",mb:[4,6],children:"Join Our Academic Community"}),e.jsx($,{fontSize:["md","xl"],color:"gray.600",mb:[4,8],children:"Sign in with your MU email and explore unlimited resources"}),e.jsx(ke,{justify:"center",children:e.jsxs(Er,{maxW:["100%","400px"],flexDirection:["column","row"],gap:4,children:[e.jsx(Ft,{placeholder:"you@stu.maaraf.edu",size:["md","lg"],borderRadius:"xl",mb:[2,0]}),e.jsx(Te,{colorScheme:"blue",size:["md","lg"],borderRadius:"xl",px:[6,8],w:["full","auto"],children:"Join Free"})]})})]})})});function vp(t,r){return function(){return t.apply(r,arguments)}}const{toString:x1}=Object.prototype,{getPrototypeOf:Zu}=Object,{iterator:Gc,toStringTag:wp}=Symbol,Vc=(t=>r=>{const n=x1.call(r);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Mi=t=>(t=t.toLowerCase(),r=>Vc(r)===t),Yc=t=>r=>typeof r===t,{isArray:pa}=Array,il=Yc("undefined");function b1(t){return t!==null&&!il(t)&&t.constructor!==null&&!il(t.constructor)&&ei(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const jp=Mi("ArrayBuffer");function y1(t){let r;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&jp(t.buffer),r}const v1=Yc("string"),ei=Yc("function"),Sp=Yc("number"),Jc=t=>t!==null&&typeof t=="object",w1=t=>t===!0||t===!1,fc=t=>{if(Vc(t)!=="object")return!1;const r=Zu(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(wp in t)&&!(Gc in t)},j1=Mi("Date"),S1=Mi("File"),C1=Mi("Blob"),_1=Mi("FileList"),k1=t=>Jc(t)&&ei(t.pipe),A1=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||ei(t.append)&&((r=Vc(t))==="formdata"||r==="object"&&ei(t.toString)&&t.toString()==="[object FormData]"))},L1=Mi("URLSearchParams"),[P1,N1,O1,R1]=["ReadableStream","Request","Response","Headers"].map(Mi),E1=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ul(t,r,{allOwnKeys:n=!1}={}){if(t===null||typeof t=="undefined")return;let i,o;if(typeof t!="object"&&(t=[t]),pa(t))for(i=0,o=t.length;i<o;i++)r.call(null,t[i],i,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let c;for(i=0;i<a;i++)c=s[i],r.call(null,t[c],c,t)}}function Cp(t,r){r=r.toLowerCase();const n=Object.keys(t);let i=n.length,o;for(;i-- >0;)if(o=n[i],r===o.toLowerCase())return o;return null}const oo=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,_p=t=>!il(t)&&t!==oo;function Pu(){const{caseless:t}=_p(this)&&this||{},r={},n=(i,o)=>{const s=t&&Cp(r,o)||o;fc(r[s])&&fc(i)?r[s]=Pu(r[s],i):fc(i)?r[s]=Pu({},i):pa(i)?r[s]=i.slice():r[s]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&ul(arguments[i],n);return r}const T1=(t,r,n,{allOwnKeys:i}={})=>(ul(r,(o,s)=>{n&&ei(o)?t[s]=vp(o,n):t[s]=o},{allOwnKeys:i}),t),F1=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),I1=(t,r,n,i)=>{t.prototype=Object.create(r.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),n&&Object.assign(t.prototype,n)},z1=(t,r,n,i)=>{let o,s,a;const c={};if(r=r||{},t==null)return r;do{for(o=Object.getOwnPropertyNames(t),s=o.length;s-- >0;)a=o[s],(!i||i(a,t,r))&&!c[a]&&(r[a]=t[a],c[a]=!0);t=n!==!1&&Zu(t)}while(t&&(!n||n(t,r))&&t!==Object.prototype);return r},D1=(t,r,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=r.length;const i=t.indexOf(r,n);return i!==-1&&i===n},M1=t=>{if(!t)return null;if(pa(t))return t;let r=t.length;if(!Sp(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=t[r];return n},B1=(t=>r=>t&&r instanceof t)(typeof Uint8Array!="undefined"&&Zu(Uint8Array)),q1=(t,r)=>{const i=(t&&t[Gc]).call(t);let o;for(;(o=i.next())&&!o.done;){const s=o.value;r.call(t,s[0],s[1])}},W1=(t,r)=>{let n;const i=[];for(;(n=t.exec(r))!==null;)i.push(n);return i},U1=Mi("HTMLFormElement"),H1=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),Uh=(({hasOwnProperty:t})=>(r,n)=>t.call(r,n))(Object.prototype),$1=Mi("RegExp"),kp=(t,r)=>{const n=Object.getOwnPropertyDescriptors(t),i={};ul(n,(o,s)=>{let a;(a=r(o,s,t))!==!1&&(i[s]=a||o)}),Object.defineProperties(t,i)},G1=t=>{kp(t,(r,n)=>{if(ei(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(ei(i)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},V1=(t,r)=>{const n={},i=o=>{o.forEach(s=>{n[s]=!0})};return pa(t)?i(t):i(String(t).split(r)),n},Y1=()=>{},J1=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function X1(t){return!!(t&&ei(t.append)&&t[wp]==="FormData"&&t[Gc])}const K1=t=>{const r=new Array(10),n=(i,o)=>{if(Jc(i)){if(r.indexOf(i)>=0)return;if(!("toJSON"in i)){r[o]=i;const s=pa(i)?[]:{};return ul(i,(a,c)=>{const u=n(a,o+1);!il(u)&&(s[c]=u)}),r[o]=void 0,s}}return i};return n(t,0)},Q1=Mi("AsyncFunction"),Z1=t=>t&&(Jc(t)||ei(t))&&ei(t.then)&&ei(t.catch),Ap=((t,r)=>t?setImmediate:r?((n,i)=>(oo.addEventListener("message",({source:o,data:s})=>{o===oo&&s===n&&i.length&&i.shift()()},!1),o=>{i.push(o),oo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ei(oo.postMessage)),e2=typeof queueMicrotask!="undefined"?queueMicrotask.bind(oo):typeof process!="undefined"&&process.nextTick||Ap,t2=t=>t!=null&&ei(t[Gc]),Ue={isArray:pa,isArrayBuffer:jp,isBuffer:b1,isFormData:A1,isArrayBufferView:y1,isString:v1,isNumber:Sp,isBoolean:w1,isObject:Jc,isPlainObject:fc,isReadableStream:P1,isRequest:N1,isResponse:O1,isHeaders:R1,isUndefined:il,isDate:j1,isFile:S1,isBlob:C1,isRegExp:$1,isFunction:ei,isStream:k1,isURLSearchParams:L1,isTypedArray:B1,isFileList:_1,forEach:ul,merge:Pu,extend:T1,trim:E1,stripBOM:F1,inherits:I1,toFlatObject:z1,kindOf:Vc,kindOfTest:Mi,endsWith:D1,toArray:M1,forEachEntry:q1,matchAll:W1,isHTMLForm:U1,hasOwnProperty:Uh,hasOwnProp:Uh,reduceDescriptors:kp,freezeMethods:G1,toObjectSet:V1,toCamelCase:H1,noop:Y1,toFiniteNumber:J1,findKey:Cp,global:oo,isContextDefined:_p,isSpecCompliantForm:X1,toJSONObject:K1,isAsyncFn:Q1,isThenable:Z1,setImmediate:Ap,asap:e2,isIterable:t2};function Qt(t,r,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}Ue.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ue.toJSONObject(this.config),code:this.code,status:this.status}}});const Lp=Qt.prototype,Pp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Pp[t]={value:t}});Object.defineProperties(Qt,Pp);Object.defineProperty(Lp,"isAxiosError",{value:!0});Qt.from=(t,r,n,i,o,s)=>{const a=Object.create(Lp);return Ue.toFlatObject(t,a,function(u){return u!==Error.prototype},c=>c!=="isAxiosError"),Qt.call(a,t.message,r,n,i,o),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const r2=null;function Nu(t){return Ue.isPlainObject(t)||Ue.isArray(t)}function Np(t){return Ue.endsWith(t,"[]")?t.slice(0,-2):t}function Hh(t,r,n){return t?t.concat(r).map(function(o,s){return o=Np(o),!n&&s?"["+o+"]":o}).join(n?".":""):r}function n2(t){return Ue.isArray(t)&&!t.some(Nu)}const i2=Ue.toFlatObject(Ue,{},null,function(r){return/^is[A-Z]/.test(r)});function Xc(t,r,n){if(!Ue.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,n=Ue.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,O){return!Ue.isUndefined(O[S])});const i=n.metaTokens,o=n.visitor||p,s=n.dots,a=n.indexes,u=(n.Blob||typeof Blob!="undefined"&&Blob)&&Ue.isSpecCompliantForm(r);if(!Ue.isFunction(o))throw new TypeError("visitor must be a function");function h(_){if(_===null)return"";if(Ue.isDate(_))return _.toISOString();if(Ue.isBoolean(_))return _.toString();if(!u&&Ue.isBlob(_))throw new Qt("Blob is not supported. Use a Buffer instead.");return Ue.isArrayBuffer(_)||Ue.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,S,O){let k=_;if(_&&!O&&typeof _=="object"){if(Ue.endsWith(S,"{}"))S=i?S:S.slice(0,-2),_=JSON.stringify(_);else if(Ue.isArray(_)&&n2(_)||(Ue.isFileList(_)||Ue.endsWith(S,"[]"))&&(k=Ue.toArray(_)))return S=Np(S),k.forEach(function(J,re){!(Ue.isUndefined(J)||J===null)&&r.append(a===!0?Hh([S],re,s):a===null?S:S+"[]",h(J))}),!1}return Nu(_)?!0:(r.append(Hh(O,S,s),h(_)),!1)}const x=[],b=Object.assign(i2,{defaultVisitor:p,convertValue:h,isVisitable:Nu});function g(_,S){if(!Ue.isUndefined(_)){if(x.indexOf(_)!==-1)throw Error("Circular reference detected in "+S.join("."));x.push(_),Ue.forEach(_,function(k,M){(!(Ue.isUndefined(k)||k===null)&&o.call(r,k,Ue.isString(M)?M.trim():M,S,b))===!0&&g(k,S?S.concat(M):[M])}),x.pop()}}if(!Ue.isObject(t))throw new TypeError("data must be an object");return g(t),r}function $h(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return r[i]})}function eh(t,r){this._pairs=[],t&&Xc(t,this,r)}const Op=eh.prototype;Op.append=function(r,n){this._pairs.push([r,n])};Op.toString=function(r){const n=r?function(i){return r.call(this,i,$h)}:$h;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function s2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Rp(t,r,n){if(!r)return t;const i=n&&n.encode||s2;Ue.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let s;if(o?s=o(r,n):s=Ue.isURLSearchParams(r)?r.toString():new eh(r,n).toString(i),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Gh{constructor(){this.handlers=[]}use(r,n,i){return this.handlers.push({fulfilled:r,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Ue.forEach(this.handlers,function(i){i!==null&&r(i)})}}const Ep={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},o2=typeof URLSearchParams!="undefined"?URLSearchParams:eh,a2=typeof FormData!="undefined"?FormData:null,l2=typeof Blob!="undefined"?Blob:null,c2={isBrowser:!0,classes:{URLSearchParams:o2,FormData:a2,Blob:l2},protocols:["http","https","file","blob","url","data"]},th=typeof window!="undefined"&&typeof document!="undefined",Ou=typeof navigator=="object"&&navigator||void 0,d2=th&&(!Ou||["ReactNative","NativeScript","NS"].indexOf(Ou.product)<0),u2=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",h2=th&&window.location.href||"http://localhost",f2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:th,hasStandardBrowserEnv:d2,hasStandardBrowserWebWorkerEnv:u2,navigator:Ou,origin:h2},Symbol.toStringTag,{value:"Module"})),Tn={...f2,...c2};function p2(t,r){return Xc(t,new Tn.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,s){return Tn.isNode&&Ue.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},r))}function g2(t){return Ue.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function m2(t){const r={},n=Object.keys(t);let i;const o=n.length;let s;for(i=0;i<o;i++)s=n[i],r[s]=t[s];return r}function Tp(t){function r(n,i,o,s){let a=n[s++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),u=s>=n.length;return a=!a&&Ue.isArray(o)?o.length:a,u?(Ue.hasOwnProp(o,a)?o[a]=[o[a],i]:o[a]=i,!c):((!o[a]||!Ue.isObject(o[a]))&&(o[a]=[]),r(n,i,o[a],s)&&Ue.isArray(o[a])&&(o[a]=m2(o[a])),!c)}if(Ue.isFormData(t)&&Ue.isFunction(t.entries)){const n={};return Ue.forEachEntry(t,(i,o)=>{r(g2(i),o,n,0)}),n}return null}function x2(t,r,n){if(Ue.isString(t))try{return(r||JSON.parse)(t),Ue.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const hl={transitional:Ep,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,s=Ue.isObject(r);if(s&&Ue.isHTMLForm(r)&&(r=new FormData(r)),Ue.isFormData(r))return o?JSON.stringify(Tp(r)):r;if(Ue.isArrayBuffer(r)||Ue.isBuffer(r)||Ue.isStream(r)||Ue.isFile(r)||Ue.isBlob(r)||Ue.isReadableStream(r))return r;if(Ue.isArrayBufferView(r))return r.buffer;if(Ue.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return p2(r,this.formSerializer).toString();if((c=Ue.isFileList(r))||i.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Xc(c?{"files[]":r}:r,u&&new u,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),x2(r)):r}],transformResponse:[function(r){const n=this.transitional||hl.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Ue.isResponse(r)||Ue.isReadableStream(r))return r;if(r&&Ue.isString(r)&&(i&&!this.responseType||o)){const a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(c){if(a)throw c.name==="SyntaxError"?Qt.from(c,Qt.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tn.classes.FormData,Blob:Tn.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ue.forEach(["delete","get","head","post","put","patch"],t=>{hl.headers[t]={}});const b2=Ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),y2=t=>{const r={};let n,i,o;return t&&t.split(`
`).forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),i=a.substring(o+1).trim(),!(!n||r[n]&&b2[n])&&(n==="set-cookie"?r[n]?r[n].push(i):r[n]=[i]:r[n]=r[n]?r[n]+", "+i:i)}),r},Vh=Symbol("internals");function $a(t){return t&&String(t).trim().toLowerCase()}function pc(t){return t===!1||t==null?t:Ue.isArray(t)?t.map(pc):String(t)}function v2(t){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)r[i[1]]=i[2];return r}const w2=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Yd(t,r,n,i,o){if(Ue.isFunction(i))return i.call(this,r,n);if(o&&(r=n),!!Ue.isString(r)){if(Ue.isString(i))return r.indexOf(i)!==-1;if(Ue.isRegExp(i))return i.test(r)}}function j2(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,i)=>n.toUpperCase()+i)}function S2(t,r){const n=Ue.toCamelCase(" "+r);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(o,s,a){return this[i].call(this,r,o,s,a)},configurable:!0})})}let ti=class{constructor(r){r&&this.set(r)}set(r,n,i){const o=this;function s(c,u,h){const p=$a(u);if(!p)throw new Error("header name must be a non-empty string");const x=Ue.findKey(o,p);(!x||o[x]===void 0||h===!0||h===void 0&&o[x]!==!1)&&(o[x||u]=pc(c))}const a=(c,u)=>Ue.forEach(c,(h,p)=>s(h,p,u));if(Ue.isPlainObject(r)||r instanceof this.constructor)a(r,n);else if(Ue.isString(r)&&(r=r.trim())&&!w2(r))a(y2(r),n);else if(Ue.isObject(r)&&Ue.isIterable(r)){let c={},u,h;for(const p of r){if(!Ue.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[h=p[0]]=(u=c[h])?Ue.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}a(c,n)}else r!=null&&s(n,r,i);return this}get(r,n){if(r=$a(r),r){const i=Ue.findKey(this,r);if(i){const o=this[i];if(!n)return o;if(n===!0)return v2(o);if(Ue.isFunction(n))return n.call(this,o,i);if(Ue.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=$a(r),r){const i=Ue.findKey(this,r);return!!(i&&this[i]!==void 0&&(!n||Yd(this,this[i],i,n)))}return!1}delete(r,n){const i=this;let o=!1;function s(a){if(a=$a(a),a){const c=Ue.findKey(i,a);c&&(!n||Yd(i,i[c],c,n))&&(delete i[c],o=!0)}}return Ue.isArray(r)?r.forEach(s):s(r),o}clear(r){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const s=n[i];(!r||Yd(this,this[s],s,r,!0))&&(delete this[s],o=!0)}return o}normalize(r){const n=this,i={};return Ue.forEach(this,(o,s)=>{const a=Ue.findKey(i,s);if(a){n[a]=pc(o),delete n[s];return}const c=r?j2(s):String(s).trim();c!==s&&delete n[s],n[c]=pc(o),i[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return Ue.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=r&&Ue.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const i=new this(r);return n.forEach(o=>i.set(o)),i}static accessor(r){const i=(this[Vh]=this[Vh]={accessors:{}}).accessors,o=this.prototype;function s(a){const c=$a(a);i[c]||(S2(o,a),i[c]=!0)}return Ue.isArray(r)?r.forEach(s):s(r),this}};ti.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ue.reduceDescriptors(ti.prototype,({value:t},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(i){this[n]=i}}});Ue.freezeMethods(ti);function Jd(t,r){const n=this||hl,i=r||n,o=ti.from(i.headers);let s=i.data;return Ue.forEach(t,function(c){s=c.call(n,s,o.normalize(),r?r.status:void 0)}),o.normalize(),s}function Fp(t){return!!(t&&t.__CANCEL__)}function ga(t,r,n){Qt.call(this,t==null?"canceled":t,Qt.ERR_CANCELED,r,n),this.name="CanceledError"}Ue.inherits(ga,Qt,{__CANCEL__:!0});function Ip(t,r,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):r(new Qt("Request failed with status code "+n.status,[Qt.ERR_BAD_REQUEST,Qt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function C2(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function _2(t,r){t=t||10;const n=new Array(t),i=new Array(t);let o=0,s=0,a;return r=r!==void 0?r:1e3,function(u){const h=Date.now(),p=i[s];a||(a=h),n[o]=u,i[o]=h;let x=s,b=0;for(;x!==o;)b+=n[x++],x=x%t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),h-a<r)return;const g=p&&h-p;return g?Math.round(b*1e3/g):void 0}}function k2(t,r){let n=0,i=1e3/r,o,s;const a=(h,p=Date.now())=>{n=p,o=null,s&&(clearTimeout(s),s=null),t.apply(null,h)};return[(...h)=>{const p=Date.now(),x=p-n;x>=i?a(h,p):(o=h,s||(s=setTimeout(()=>{s=null,a(o)},i-x)))},()=>o&&a(o)]}const Oc=(t,r,n=3)=>{let i=0;const o=_2(50,250);return k2(s=>{const a=s.loaded,c=s.lengthComputable?s.total:void 0,u=a-i,h=o(u),p=a<=c;i=a;const x={loaded:a,total:c,progress:c?a/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&p?(c-a)/h:void 0,event:s,lengthComputable:c!=null,[r?"download":"upload"]:!0};t(x)},n)},Yh=(t,r)=>{const n=t!=null;return[i=>r[0]({lengthComputable:n,total:t,loaded:i}),r[1]]},Jh=t=>(...r)=>Ue.asap(()=>t(...r)),A2=Tn.hasStandardBrowserEnv?((t,r)=>n=>(n=new URL(n,Tn.origin),t.protocol===n.protocol&&t.host===n.host&&(r||t.port===n.port)))(new URL(Tn.origin),Tn.navigator&&/(msie|trident)/i.test(Tn.navigator.userAgent)):()=>!0,L2=Tn.hasStandardBrowserEnv?{write(t,r,n,i,o,s){const a=[t+"="+encodeURIComponent(r)];Ue.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Ue.isString(i)&&a.push("path="+i),Ue.isString(o)&&a.push("domain="+o),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function P2(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function N2(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function zp(t,r,n){let i=!P2(r);return t&&(i||n==!1)?N2(t,r):r}const Xh=t=>t instanceof ti?{...t}:t;function uo(t,r){r=r||{};const n={};function i(h,p,x,b){return Ue.isPlainObject(h)&&Ue.isPlainObject(p)?Ue.merge.call({caseless:b},h,p):Ue.isPlainObject(p)?Ue.merge({},p):Ue.isArray(p)?p.slice():p}function o(h,p,x,b){if(Ue.isUndefined(p)){if(!Ue.isUndefined(h))return i(void 0,h,x,b)}else return i(h,p,x,b)}function s(h,p){if(!Ue.isUndefined(p))return i(void 0,p)}function a(h,p){if(Ue.isUndefined(p)){if(!Ue.isUndefined(h))return i(void 0,h)}else return i(void 0,p)}function c(h,p,x){if(x in r)return i(h,p);if(x in t)return i(void 0,h)}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(h,p,x)=>o(Xh(h),Xh(p),x,!0)};return Ue.forEach(Object.keys(Object.assign({},t,r)),function(p){const x=u[p]||o,b=x(t[p],r[p],p);Ue.isUndefined(b)&&x!==c||(n[p]=b)}),n}const Dp=t=>{const r=uo({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:c}=r;r.headers=a=ti.from(a),r.url=Rp(zp(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let u;if(Ue.isFormData(n)){if(Tn.hasStandardBrowserEnv||Tn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[h,...p]=u?u.split(";").map(x=>x.trim()).filter(Boolean):[];a.setContentType([h||"multipart/form-data",...p].join("; "))}}if(Tn.hasStandardBrowserEnv&&(i&&Ue.isFunction(i)&&(i=i(r)),i||i!==!1&&A2(r.url))){const h=o&&s&&L2.read(s);h&&a.set(o,h)}return r},O2=typeof XMLHttpRequest!="undefined",R2=O2&&function(t){return new Promise(function(n,i){const o=Dp(t);let s=o.data;const a=ti.from(o.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=o,p,x,b,g,_;function S(){g&&g(),_&&_(),o.cancelToken&&o.cancelToken.unsubscribe(p),o.signal&&o.signal.removeEventListener("abort",p)}let O=new XMLHttpRequest;O.open(o.method.toUpperCase(),o.url,!0),O.timeout=o.timeout;function k(){if(!O)return;const J=ti.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),N={data:!c||c==="text"||c==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:J,config:t,request:O};Ip(function(B){n(B),S()},function(B){i(B),S()},N),O=null}"onloadend"in O?O.onloadend=k:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(k)},O.onabort=function(){O&&(i(new Qt("Request aborted",Qt.ECONNABORTED,t,O)),O=null)},O.onerror=function(){i(new Qt("Network Error",Qt.ERR_NETWORK,t,O)),O=null},O.ontimeout=function(){let re=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const N=o.transitional||Ep;o.timeoutErrorMessage&&(re=o.timeoutErrorMessage),i(new Qt(re,N.clarifyTimeoutError?Qt.ETIMEDOUT:Qt.ECONNABORTED,t,O)),O=null},s===void 0&&a.setContentType(null),"setRequestHeader"in O&&Ue.forEach(a.toJSON(),function(re,N){O.setRequestHeader(N,re)}),Ue.isUndefined(o.withCredentials)||(O.withCredentials=!!o.withCredentials),c&&c!=="json"&&(O.responseType=o.responseType),h&&([b,_]=Oc(h,!0),O.addEventListener("progress",b)),u&&O.upload&&([x,g]=Oc(u),O.upload.addEventListener("progress",x),O.upload.addEventListener("loadend",g)),(o.cancelToken||o.signal)&&(p=J=>{O&&(i(!J||J.type?new ga(null,t,O):J),O.abort(),O=null)},o.cancelToken&&o.cancelToken.subscribe(p),o.signal&&(o.signal.aborted?p():o.signal.addEventListener("abort",p)));const M=C2(o.url);if(M&&Tn.protocols.indexOf(M)===-1){i(new Qt("Unsupported protocol "+M+":",Qt.ERR_BAD_REQUEST,t));return}O.send(s||null)})},E2=(t,r)=>{const{length:n}=t=t?t.filter(Boolean):[];if(r||n){let i=new AbortController,o;const s=function(h){if(!o){o=!0,c();const p=h instanceof Error?h:this.reason;i.abort(p instanceof Qt?p:new ga(p instanceof Error?p.message:p))}};let a=r&&setTimeout(()=>{a=null,s(new Qt(`timeout ${r} of ms exceeded`,Qt.ETIMEDOUT))},r);const c=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),t=null)};t.forEach(h=>h.addEventListener("abort",s));const{signal:u}=i;return u.unsubscribe=()=>Ue.asap(c),u}},T2=function*(t,r){let n=t.byteLength;if(n<r){yield t;return}let i=0,o;for(;i<n;)o=i+r,yield t.slice(i,o),i=o},F2=async function*(t,r){for await(const n of I2(t))yield*T2(n,r)},I2=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:n,value:i}=await r.read();if(n)break;yield i}}finally{await r.cancel()}},Kh=(t,r,n,i)=>{const o=F2(t,r);let s=0,a,c=u=>{a||(a=!0,i&&i(u))};return new ReadableStream({async pull(u){try{const{done:h,value:p}=await o.next();if(h){c(),u.close();return}let x=p.byteLength;if(n){let b=s+=x;n(b)}u.enqueue(new Uint8Array(p))}catch(h){throw c(h),h}},cancel(u){return c(u),o.return()}},{highWaterMark:2})},Kc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Mp=Kc&&typeof ReadableStream=="function",z2=Kc&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Bp=(t,...r)=>{try{return!!t(...r)}catch{return!1}},D2=Mp&&Bp(()=>{let t=!1;const r=new Request(Tn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),Qh=64*1024,Ru=Mp&&Bp(()=>Ue.isReadableStream(new Response("").body)),Rc={stream:Ru&&(t=>t.body)};Kc&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Rc[r]&&(Rc[r]=Ue.isFunction(t[r])?n=>n[r]():(n,i)=>{throw new Qt(`Response type '${r}' is not supported`,Qt.ERR_NOT_SUPPORT,i)})})})(new Response);const M2=async t=>{if(t==null)return 0;if(Ue.isBlob(t))return t.size;if(Ue.isSpecCompliantForm(t))return(await new Request(Tn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ue.isArrayBufferView(t)||Ue.isArrayBuffer(t))return t.byteLength;if(Ue.isURLSearchParams(t)&&(t=t+""),Ue.isString(t))return(await z2(t)).byteLength},B2=async(t,r)=>{const n=Ue.toFiniteNumber(t.getContentLength());return n==null?M2(r):n},q2=Kc&&(async t=>{let{url:r,method:n,data:i,signal:o,cancelToken:s,timeout:a,onDownloadProgress:c,onUploadProgress:u,responseType:h,headers:p,withCredentials:x="same-origin",fetchOptions:b}=Dp(t);h=h?(h+"").toLowerCase():"text";let g=E2([o,s&&s.toAbortSignal()],a),_;const S=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let O;try{if(u&&D2&&n!=="get"&&n!=="head"&&(O=await B2(p,i))!==0){let N=new Request(r,{method:"POST",body:i,duplex:"half"}),D;if(Ue.isFormData(i)&&(D=N.headers.get("content-type"))&&p.setContentType(D),N.body){const[B,U]=Yh(O,Oc(Jh(u)));i=Kh(N.body,Qh,B,U)}}Ue.isString(x)||(x=x?"include":"omit");const k="credentials"in Request.prototype;_=new Request(r,{...b,signal:g,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:i,duplex:"half",credentials:k?x:void 0});let M=await fetch(_,b);const J=Ru&&(h==="stream"||h==="response");if(Ru&&(c||J&&S)){const N={};["status","statusText","headers"].forEach(R=>{N[R]=M[R]});const D=Ue.toFiniteNumber(M.headers.get("content-length")),[B,U]=c&&Yh(D,Oc(Jh(c),!0))||[];M=new Response(Kh(M.body,Qh,B,()=>{U&&U(),S&&S()}),N)}h=h||"text";let re=await Rc[Ue.findKey(Rc,h)||"text"](M,t);return!J&&S&&S(),await new Promise((N,D)=>{Ip(N,D,{data:re,headers:ti.from(M.headers),status:M.status,statusText:M.statusText,config:t,request:_})})}catch(k){throw S&&S(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Qt("Network Error",Qt.ERR_NETWORK,t,_),{cause:k.cause||k}):Qt.from(k,k&&k.code,t,_)}}),Eu={http:r2,xhr:R2,fetch:q2};Ue.forEach(Eu,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const Zh=t=>`- ${t}`,W2=t=>Ue.isFunction(t)||t===null||t===!1,qp={getAdapter:t=>{t=Ue.isArray(t)?t:[t];const{length:r}=t;let n,i;const o={};for(let s=0;s<r;s++){n=t[s];let a;if(i=n,!W2(n)&&(i=Eu[(a=String(n)).toLowerCase()],i===void 0))throw new Qt(`Unknown adapter '${a}'`);if(i)break;o[a||"#"+s]=i}if(!i){const s=Object.entries(o).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=r?s.length>1?`since :
`+s.map(Zh).join(`
`):" "+Zh(s[0]):"as no adapter specified";throw new Qt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:Eu};function Xd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ga(null,t)}function ef(t){return Xd(t),t.headers=ti.from(t.headers),t.data=Jd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),qp.getAdapter(t.adapter||hl.adapter)(t).then(function(i){return Xd(t),i.data=Jd.call(t,t.transformResponse,i),i.headers=ti.from(i.headers),i},function(i){return Fp(i)||(Xd(t),i&&i.response&&(i.response.data=Jd.call(t,t.transformResponse,i.response),i.response.headers=ti.from(i.response.headers))),Promise.reject(i)})}const Wp="1.10.0",Qc={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Qc[t]=function(i){return typeof i===t||"a"+(r<1?"n ":" ")+t}});const tf={};Qc.transitional=function(r,n,i){function o(s,a){return"[Axios v"+Wp+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,c)=>{if(r===!1)throw new Qt(o(a," has been removed"+(n?" in "+n:"")),Qt.ERR_DEPRECATED);return n&&!tf[a]&&(tf[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(s,a,c):!0}};Qc.spelling=function(r){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${r}`),!0)};function U2(t,r,n){if(typeof t!="object")throw new Qt("options must be an object",Qt.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const s=i[o],a=r[s];if(a){const c=t[s],u=c===void 0||a(c,s,t);if(u!==!0)throw new Qt("option "+s+" must be "+u,Qt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Qt("Unknown option "+s,Qt.ERR_BAD_OPTION)}}const gc={assertOptions:U2,validators:Qc},Vi=gc.validators;let ao=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Gh,response:new Gh}}async request(r,n){try{return await this._request(r,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=uo(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:s}=n;i!==void 0&&gc.assertOptions(i,{silentJSONParsing:Vi.transitional(Vi.boolean),forcedJSONParsing:Vi.transitional(Vi.boolean),clarifyTimeoutError:Vi.transitional(Vi.boolean)},!1),o!=null&&(Ue.isFunction(o)?n.paramsSerializer={serialize:o}:gc.assertOptions(o,{encode:Vi.function,serialize:Vi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),gc.assertOptions(n,{baseUrl:Vi.spelling("baseURL"),withXsrfToken:Vi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&Ue.merge(s.common,s[n.method]);s&&Ue.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=ti.concat(a,s);const c=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(u=u&&S.synchronous,c.unshift(S.fulfilled,S.rejected))});const h=[];this.interceptors.response.forEach(function(S){h.push(S.fulfilled,S.rejected)});let p,x=0,b;if(!u){const _=[ef.bind(this),void 0];for(_.unshift.apply(_,c),_.push.apply(_,h),b=_.length,p=Promise.resolve(n);x<b;)p=p.then(_[x++],_[x++]);return p}b=c.length;let g=n;for(x=0;x<b;){const _=c[x++],S=c[x++];try{g=_(g)}catch(O){S.call(this,O);break}}try{p=ef.call(this,g)}catch(_){return Promise.reject(_)}for(x=0,b=h.length;x<b;)p=p.then(h[x++],h[x++]);return p}getUri(r){r=uo(this.defaults,r);const n=zp(r.baseURL,r.url,r.allowAbsoluteUrls);return Rp(n,r.params,r.paramsSerializer)}};Ue.forEach(["delete","get","head","options"],function(r){ao.prototype[r]=function(n,i){return this.request(uo(i||{},{method:r,url:n,data:(i||{}).data}))}});Ue.forEach(["post","put","patch"],function(r){function n(i){return function(s,a,c){return this.request(uo(c||{},{method:r,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}ao.prototype[r]=n(),ao.prototype[r+"Form"]=n(!0)});let H2=class Up{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(o=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](o);i._listeners=null}),this.promise.then=o=>{let s;const a=new Promise(c=>{i.subscribe(c),s=c}).then(o);return a.cancel=function(){i.unsubscribe(s)},a},r(function(s,a,c){i.reason||(i.reason=new ga(s,a,c),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=i=>{r.abort(i)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new Up(function(o){r=o}),cancel:r}}};function $2(t){return function(n){return t.apply(null,n)}}function G2(t){return Ue.isObject(t)&&t.isAxiosError===!0}const Tu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Tu).forEach(([t,r])=>{Tu[r]=t});function Hp(t){const r=new ao(t),n=vp(ao.prototype.request,r);return Ue.extend(n,ao.prototype,r,{allOwnKeys:!0}),Ue.extend(n,r,null,{allOwnKeys:!0}),n.create=function(o){return Hp(uo(t,o))},n}const Pr=Hp(hl);Pr.Axios=ao;Pr.CanceledError=ga;Pr.CancelToken=H2;Pr.isCancel=Fp;Pr.VERSION=Wp;Pr.toFormData=Xc;Pr.AxiosError=Qt;Pr.Cancel=Pr.CanceledError;Pr.all=function(r){return Promise.all(r)};Pr.spread=$2;Pr.isAxiosError=G2;Pr.mergeConfig=uo;Pr.AxiosHeaders=ti;Pr.formToJSON=t=>Tp(Ue.isHTMLForm(t)?new FormData(t):t);Pr.getAdapter=qp.getAdapter;Pr.HttpStatusCode=Tu;Pr.default=Pr;const{Axios:Jv,AxiosError:Xv,CanceledError:Kv,isCancel:Qv,CancelToken:Zv,VERSION:ew,all:tw,Cancel:rw,isAxiosError:nw,spread:iw,toFormData:sw,AxiosHeaders:ow,HttpStatusCode:aw,formToJSON:lw,getAdapter:cw,mergeConfig:dw}=Pr,Kd="https://mu-connect.me/api",V2="https://mu-connect.me",Hs=Kd==null?void 0:Kd.replace(/\/$/,""),ps=V2.replace(/\/$/,"");Hs||console.warn("[env] VITE_API_BASE_URL is not defined. API calls will fail until it is set.");const gt=Pr.create({baseURL:Hs,timeout:15e3,withCredentials:!1});gt.interceptors.request.use(t=>{try{const r=localStorage.getItem("authToken");r&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${r}`)}catch{}return t});gt.interceptors.response.use(t=>t,t=>{var n,i,o,s,a,c;const r={message:((i=(n=t.response)==null?void 0:n.data)==null?void 0:i.message)||t.message||"Request failed",status:(o=t.response)==null?void 0:o.status,data:(s=t.response)==null?void 0:s.data,url:(a=t.config)==null?void 0:a.url,method:(c=t.config)==null?void 0:c.method};return Promise.reject(r)});const $p=t=>{t&&localStorage.setItem("authToken",t)},Y2=async t=>{var r,n,i,o;try{const s=await gt.post("/auth/google/complete-registration",t);return s.data.token&&(localStorage.setItem("authToken",s.data.token),(r=s.data.user)!=null&&r.faculty&&(localStorage.setItem("userFaculty",s.data.user.faculty.name),localStorage.setItem("faculty_id",s.data.user.faculty.id)),(n=s.data.user)!=null&&n.major&&(localStorage.setItem("userMajor",s.data.user.major.name),localStorage.setItem("major_id",s.data.user.major.id)),(i=s.data.user)!=null&&i.roles&&s.data.user.roles[0]&&localStorage.setItem("role",s.data.user.roles[0])),s.data}catch(s){throw((o=s.response)==null?void 0:o.data)||{message:"Registration completion failed"}}},J2=()=>localStorage.getItem("googleTempToken"),X2=t=>{localStorage.setItem("googleTempToken",t)},bn={NETWORK:"network",VALIDATION:"validation",AUTHENTICATION:"authentication",AUTHORIZATION:"authorization",NOT_FOUND:"not_found",SERVER:"server",UNKNOWN:"unknown"},rf={[bn.NETWORK]:"Unable to connect to the server. Please check your internet connection and try again.",[bn.VALIDATION]:"Please check your input and try again.",[bn.AUTHENTICATION]:"Your session has expired. Please log in again.",[bn.AUTHORIZATION]:"You don't have permission to perform this action.",[bn.NOT_FOUND]:"The requested resource was not found.",[bn.SERVER]:"Something went wrong on our end. Please try again later.",[bn.UNKNOWN]:"An unexpected error occurred. Please try again later."},K2=t=>{var r;if(!t.status&&(t.code==="NETWORK_ERROR"||(r=t.message)!=null&&r.includes("Network Error")))return bn.NETWORK;switch(t.status){case 400:return bn.VALIDATION;case 401:return bn.AUTHENTICATION;case 403:return bn.AUTHORIZATION;case 404:return bn.NOT_FOUND;case 422:return bn.VALIDATION;case 500:case 502:case 503:case 504:return bn.SERVER;default:return bn.UNKNOWN}},Q2=(t,r=null)=>{var s,a;const n=K2(t);let i="Error",o=r||rf[n];if(n===bn.VALIDATION&&((s=t.data)!=null&&s.errors)){const c=Object.values(t.data.errors).flat();c.length>0&&(o=c[0],i="Validation Error")}else(a=t.data)!=null&&a.message&&Z2(t.data.message)?o=t.data.message:n===bn.SERVER&&(o=rf[bn.SERVER],i="Server Error");return{title:i,description:o,type:n}},Z2=t=>!t||typeof t!="string"?!1:![/database/i,/sql/i,/connection/i,/internal server/i,/stack trace/i,/exception/i,/error at line/i,/query failed/i,/undefined method/i,/class not found/i].some(n=>n.test(t)),cs=(t,r=null)=>{const n=Q2(t,r);return{title:n.title,description:n.description,status:"error",duration:5e3,isClosable:!0}},Qd=(t,r=null,n=3e3)=>({title:t,description:r,status:"success",duration:n,isClosable:!0}),ds=(t,r)=>{console.error(`[${t}]`,{message:r.message,status:r.status,url:r.url,method:r.method})},Gp=Hs,Zc=()=>localStorage.getItem("authToken");Pr.interceptors.request.use(t=>{const r=Zc();return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const rh=async t=>{var r;try{const n=await gt.post("/register",t);return n.data.token&&$p(n.data.token),t.faculty&&localStorage.setItem("userFaculty",t.faculty),t.major&&localStorage.setItem("userMajor",t.major),n.data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Registration failed"}}},Vp=async t=>{var r;try{const n=await gt.post("/login",t);return n.data.token&&$p(n.data.token),n.data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Login failed"}}},ed=async()=>{try{Zc()&&await gt.post("/logout")}catch{}localStorage.clear(),sessionStorage.clear(),window.location.reload()},io=async()=>{if(!Zc()){const r=sessionStorage.getItem("currentUser");return r?(console.log("Using cached user data from Google authentication"),JSON.parse(r)):null}try{const r=await gt.get("/users/me");return r.data&&!r.data.id&&r.data.user_id&&(r.data.id=r.data.user_id),r.data&&r.data.avatar&&!r.data.avatar.startsWith("http")?r.data.avatar_url=`${ps}/storage/avatars/${r.data.avatar}`:r.data&&r.data.avatar&&(r.data.avatar_url=r.data.avatar),r.data.faculty&&r.data.faculty.name&&(localStorage.setItem("userFaculty",r.data.faculty.name),localStorage.setItem("faculty_id",r.data.faculty.id)),r.data.major&&r.data.major.name&&(localStorage.setItem("userMajor",r.data.major.name),localStorage.setItem("major_id",r.data.major.id)),r.data.roles&&r.data.roles.length>0?localStorage.setItem("role",r.data.roles[0]):r.data.role_names&&r.data.role_names.length>0&&localStorage.setItem("role",r.data.role_names[0]),r.data&&r.data.id&&localStorage.setItem("user_id",r.data.id),sessionStorage.setItem("currentUser",JSON.stringify(r.data)),r.data}catch(r){console.error("Error fetching current user:",r);const n=sessionStorage.getItem("currentUser");return n?JSON.parse(n):null}},Yp=()=>{try{const t=sessionStorage.getItem("currentUser");if(t){const n=JSON.parse(t);return n.id||(n.id=localStorage.getItem("user_id")||null),!n.role&&localStorage.getItem("role")&&(n.role=localStorage.getItem("role")),n}const r=localStorage.getItem("user_id");return r?{id:r,first_name:localStorage.getItem("first_name")||"User",last_name:localStorage.getItem("last_name")||"",role:localStorage.getItem("role")}:null}catch(t){return console.error("Error getting cached user:",t),null}},Jp=async()=>{var t;try{return(await Pr.get(`${Gp}/registration/faculties`,{withCredentials:!0})).data}catch(r){throw((t=r.response)==null?void 0:t.data)||{message:"Failed to load faculties"}}},Xp=async t=>{var r;try{return(await Pr.get(`${Gp}/registration/faculties/${t}/majors`,{withCredentials:!0})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to load majors"}}},nf=Object.freeze(Object.defineProperty({__proto__:null,getCurrentUser:io,getCurrentUserSync:Yp,getFaculties:Jp,getMajors:Xp,getToken:Zc,login:Vp,logout:ed,register:rh},Symbol.toStringTag,{value:"Module"})),Kp=z.createContext(),e5=({children:t})=>{const[r,n]=z.useState(null),[i,o]=z.useState(!0),[s,a]=z.useState(null);z.useEffect(()=>{io().then(n).catch(()=>n(null)).finally(()=>o(!1))},[]);const c=z.useCallback(async b=>{o(!0),a(null);try{await Vp(b);const g=await io();return n(g),a(null),g}catch(g){throw a(g.message||"Login failed"),n(null),g}finally{o(!1)}},[]),u=z.useCallback(async()=>{o(!0);try{await ed(),n(null)}finally{o(!1)}},[]),h=z.useCallback(async b=>{o(!0),a(null);try{await rh(b);const g=await io();return n(g),a(null),g}catch(g){throw a(g.message||"Registration failed"),n(null),g}finally{o(!1)}},[]),p=z.useCallback(async b=>{o(!0),a(null);try{await Y2(b);const g=await io();return n(g),a(null),g}catch(g){throw a(g.message||"Google registration failed"),n(null),g}finally{o(!1)}},[]),x=z.useCallback(async b=>{o(!0);try{if(!localStorage.getItem("authToken")){const _="google_auth_"+Math.random().toString(36).substring(2,15);localStorage.setItem("authToken",_)}return n(b),sessionStorage.setItem("currentUser",JSON.stringify(b)),await io(),b}catch(g){throw console.error("Google auth error:",g),a(g.message||"Failed to process Google authentication"),n(null),g}finally{o(!1)}},[]);return e.jsx(Kp.Provider,{value:{user:r,loading:i,authError:s,login:c,logout:u,register:h,completeGoogleSignUp:p,handleGoogleAuthSuccess:x},children:t})},gi=()=>{const t=z.useContext(Kp);return t||(console.warn("useAuth must be used within an AuthProvider. Falling back to default context."),{user:null,loading:!1,authError:null,login:async()=>{},logout:async()=>{},register:async()=>{},completeGoogleSignUp:async()=>{},handleGoogleAuthSuccess:async()=>{}})},t5=()=>{const[t,r]=z.useState({login:"",password:""}),[n,i]=z.useState({}),o=Hr();Jr();const{user:s,loading:a,login:c}=gi(),u=x=>{r({...t,[x.target.name]:x.target.value}),i({...n,[x.target.name]:""})},h=()=>{const x={};return t.login||(x.login="Username/Email is required"),t.password||(x.password="Password is required"),i(x),Object.keys(x).length===0},p=async x=>{if(x.preventDefault(),!!h())try{await c(t),o({title:"Login successful",status:"success",duration:3e3})}catch(b){ds("handleSubmit",b),o(cs(b,"Login failed"))}};return a?e.jsx(vn,{minH:"100vh",children:e.jsx(qr,{size:"xl",color:"blue.500"})}):s?e.jsx(kc,{to:"/dashboard",replace:!0}):e.jsx(ke,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",align:"center",justify:"center",children:e.jsx(Ai,{maxW:"container.md",px:[4,8],children:e.jsxs(de,{bg:"white",p:[6,12],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:"linear(to-r, blue.500, teal.400)",borderRadius:"2xl",zIndex:-1},children:[e.jsxs(ke,{align:"center",mb:8,gap:3,justify:"center",children:[e.jsx(Ir,{src:ki,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(ft,{size:"xl",bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"MU Connect"})]}),e.jsxs(br,{spacing:8,children:[e.jsx(de,{textAlign:"center",children:e.jsx(ft,{size:"2xl",mb:2,bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"Welcome Back!"})}),e.jsx("form",{onSubmit:p,children:e.jsxs(br,{spacing:6,children:[e.jsxs(mt,{isRequired:!0,isInvalid:!!n.login,children:[e.jsx(xt,{color:"gray.600",children:"Username/Email"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:na,color:"blue.500","aria-label":"Username icon"})}),e.jsx(Ft,{name:"login",placeholder:"id@mu.edu.lb",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800",value:t.login,onChange:u})]}),n.login&&e.jsx($,{color:"red.500",fontSize:"sm",mt:1,children:n.login})]}),e.jsxs(mt,{isRequired:!0,isInvalid:!!n.password,children:[e.jsx(xt,{color:"gray.600",children:"Password"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:ku,color:"blue.500","aria-label":"Password icon"})}),e.jsx(Ft,{type:"password",placeholder:"••••••••",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800",name:"password",value:t.password,onChange:u})]}),n.password&&e.jsx($,{color:"red.500",fontSize:"sm",mt:1,children:n.password})]}),e.jsx(ke,{justify:"space-between",align:"center",children:e.jsx(jc,{as:Ii,to:"/forgot-password",color:"blue.500",fontSize:"sm",_hover:{textDecoration:"underline"},children:"Forgot Password?"})}),e.jsx(Te,{type:"submit",colorScheme:"blue",size:"lg",height:"60px",fontSize:"lg",rightIcon:e.jsx(ht,{as:ea,"aria-label":"Sign in"}),isLoading:a,bgGradient:"linear(to-r, blue.500, teal.400)",_hover:{bgGradient:"linear(to-r, blue.600, teal.500)"},_active:{transform:"scale(0.98)"},w:"full",children:"Sign In"})]})}),e.jsxs($,{textAlign:"center",color:"gray.600",children:["New to MU Connect?"," ",e.jsx(jc,{as:Ii,to:"/register",color:"blue.500",fontWeight:"600",_hover:{textDecoration:"underline"},children:"Create account"})]})]})]})})})},r5="modulepreload",n5=function(t){return"/"+t},sf={},ho=function(r,n,i){let o=Promise.resolve();if(n&&n.length>0){let a=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=a(n.map(h=>{if(h=n5(h),h in sf)return;sf[h]=!0;const p=h.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${x}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":r5,p||(b.as="script"),b.crossOrigin="",b.href=h,u&&b.setAttribute("nonce",u),document.head.appendChild(b),p)return new Promise((g,_)=>{b.addEventListener("load",g),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return o.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return r().catch(s)})},i5=()=>{var Q,ie;const[t,r]=z.useState(0),[n,i]=z.useState({first_name:"",last_name:"",username:"",email:"",password:"",password_confirmation:"",faculty_id:"",major_id:""}),[o,s]=z.useState([]),[a,c]=z.useState([]),[u,h]=z.useState(!0),[p,x]=z.useState(!1),[b,g]=z.useState(""),[_,S]=z.useState(""),[O,k]=z.useState({}),[M,J]=z.useState(!1),[re,N]=z.useState(0),D=Hr(),B=Jr(),U="linear(to-br, blue.50 0%, white 50%, blue.50 100%)",R="white",P="linear(to-r, blue.500, teal.400)",w="linear(to-r, blue.600, teal.500)",A="gray.700",T="gray.200",E=[{id:"welcome",title:"Welcome"},{id:"name",title:"Your Name"},{id:"username",title:"Create Username"},{id:"email",title:"Your Email"},{id:"password",title:"Set Password"},{id:"faculty",title:"Your Faculty"},{id:"major",title:"Your Major"},{id:"complete",title:"Complete"}],ee=ce=>{const{name:le,value:xe}=ce.target;i(we=>({...we,[le]:xe})),le==="username"&&O.username&&k(we=>({...we,username:void 0}))},Z=ce=>{const le=ce.target.value;i(xe=>({...xe,faculty_id:le,major_id:""}))},y=ce=>{const le=ce.target.value;i(xe=>({...xe,major_id:le}))},se=(ce=t)=>{const le={};switch(ce){case 1:n.first_name.trim()||(le.first_name="First name is required."),n.last_name.trim()||(le.last_name="Last name is required.");break;case 2:n.username.trim()||(le.username="Username is required.");break;case 3:n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.email.endsWith("@mu.edu.lb")||(le.email="Email must be a university email (@mu.edu.lb)."):le.email="Invalid email address format.":le.email="Email is required.";break;case 4:n.password?n.password.length<6&&(le.password="Password must be at least 6 characters."):le.password="Password is required.",n.password_confirmation?n.password!==n.password_confirmation&&(le.password_confirmation="Passwords do not match."):le.password_confirmation="Please confirm your password.";break;case 5:n.faculty_id||(le.faculty_id="Faculty is required.");break;case 6:n.major_id||(le.major_id="Major is required.");break}return k(le),Object.keys(le).length===0},W=()=>se(t),v=()=>{if(t===2&&O.username){D({title:O.username,status:"error",duration:3e3});return}W()?t<E.length-1&&r(t+1):D({title:"Please correct the errors",status:"error",duration:2500})},Y=ce=>{ce.key==="Enter"&&W()&&t<7&&(ce.preventDefault(),v())},C=()=>{t>0&&r(t-1)},q=async ce=>{ce&&ce.preventDefault();for(let xe=1;xe<=6;xe++)if(!se(xe)){D({title:"Incomplete Information",description:"Please fill out all required fields correctly.",status:"error",duration:3e3}),r(xe);return}J(!0),N(0);const le=setInterval(()=>{N(xe=>Math.min(xe+Math.random()*15,90))},400);try{const xe={first_name:n.first_name,last_name:n.last_name,username:n.username,email:n.email,password:n.password,password_confirmation:n.password_confirmation,faculty_id:n.faculty_id,major_id:n.major_id};await rh(xe),clearInterval(le),N(100),D({title:"Registration successful!",description:"Welcome to Maaref. We're glad to have you.",status:"success",duration:3e3,isClosable:!0}),setTimeout(()=>{B("/dashboard")},500)}catch(xe){if(clearInterval(le),J(!1),xe&&typeof xe=="object"&&xe.errors){k(De=>({...De,...xe.errors}));const we={first_name:1,last_name:1,username:2,email:3,password:4,password_confirmation:4,faculty_id:5,major_id:6},ze=Object.keys(xe.errors).reduce((De,$e)=>Math.min(De,we[$e]||8),8);r(ze),D({title:"Please correct the highlighted error(s).",status:"error",duration:3e3})}else D({title:xe.message||"An unexpected error occurred.",description:"Please try again later.",status:"error",duration:4e3})}};z.useEffect(()=>{h(!0),ho(async()=>{const{getFaculties:ce}=await Promise.resolve().then(()=>nf);return{getFaculties:ce}},void 0).then(({getFaculties:ce})=>{ce().then(le=>{s(le),h(!1),g("")}).catch(le=>{s([]),h(!1),g("Failed to load faculties. Please try again later."),D({title:"Failed to load faculties",description:(le==null?void 0:le.message)||"Please check your connection and try again.",status:"error",duration:5e3})})})},[]),z.useEffect(()=>{n.faculty_id?(x(!0),c([]),ho(async()=>{const{getMajors:ce}=await Promise.resolve().then(()=>nf);return{getMajors:ce}},void 0).then(({getMajors:ce})=>{ce(n.faculty_id).then(le=>{c(le),x(!1),S("")}).catch(le=>{c([]),x(!1),S("Failed to load majors. Please try again later."),D({title:"Failed to load majors",description:(le==null?void 0:le.message)||"Please check your connection and try again.",status:"error",duration:5e3})})})):c([]),i(ce=>({...ce,major_id:""}))},[n.faculty_id]);const{user:L,loading:G}=gi();return G?e.jsx(vn,{minH:"100vh",children:e.jsx(qr,{size:"xl",color:"blue.500"})}):L?e.jsx(kc,{to:"/dashboard",replace:!0}):e.jsx(ke,{minH:"100vh",bgGradient:U,align:"center",justify:"center",children:M?e.jsx(de,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1000",bg:U,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:e.jsx(Dg,{initialScale:.9,in:M,children:e.jsxs(ot,{spacing:8,maxW:"500px",textAlign:"center",p:4,children:[e.jsx(Ir,{src:ki,boxSize:"80px",alt:"Maaref Logo"}),e.jsx(ft,{fontSize:"3xl",bgGradient:"linear(to-r, blue.500, teal.400)",bgClip:"text",letterSpacing:"tight",children:"Setting up your personalized experience"}),e.jsxs(de,{w:"full",children:[e.jsx($,{mb:2,fontWeight:"medium",color:A,children:re<30?"Analyzing your academic profile...":re<60?"Finding relevant resources...":re<90?"Preparing your personalized feed...":"Almost done!"}),e.jsx(Is,{value:re,colorScheme:"blue",h:"10px",rounded:"full",mb:3,hasStripe:!0,isAnimated:!0})]}),e.jsxs($,{color:"gray.500",fontSize:"md",children:["Customizing your campus experience based on your major.",e.jsx("br",{}),"This will only take a moment..."]})]})})}):e.jsx(Ai,{maxW:"container.md",py:8,children:e.jsxs(de,{bg:R,p:[6,8],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:P,borderRadius:"2xl",zIndex:-1},children:[e.jsxs(ke,{align:"center",mb:6,gap:3,justify:"center",children:[e.jsx(Ir,{src:ki,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(ft,{size:"xl",bgGradient:P,bgClip:"text",children:"MU Connect"})]}),t>0&&t<E.length-1&&e.jsxs(de,{mb:6,children:[e.jsx(Is,{value:t/(E.length-2)*100,size:"sm",colorScheme:"blue",borderRadius:"full"}),e.jsxs(ke,{justify:"space-between",mt:2,children:[e.jsxs($,{fontSize:"sm",color:"gray.500",children:["Step ",t," of ",E.length-2]}),e.jsx($,{fontSize:"sm",color:"gray.500",children:E[t].title})]})]}),e.jsxs(de,{minH:"320px",display:"flex",flexDirection:"column",justifyContent:"center",children:[t===0&&e.jsx(Ns,{in:t===0,offsetY:"20px",children:e.jsxs(ot,{spacing:6,textAlign:"center",py:4,children:[e.jsx(ft,{bgGradient:P,bgClip:"text",size:"xl",children:"Welcome to MU Connect"}),e.jsx($,{fontSize:"lg",color:A,children:"Let's set up your personalized academic experience."}),e.jsx($,{color:"gray.500",children:"We'll ask you a few questions to customize your campus experience and show you resources relevant to your academic interests."}),e.jsx(Te,{colorScheme:"blue",size:"lg",rightIcon:e.jsx(ea,{}),onClick:v,bgGradient:P,_hover:{bgGradient:w},mt:4,children:"Get Started"})]})}),t===1&&e.jsx(Ns,{in:t===1,offsetY:"20px",children:e.jsxs(ot,{spacing:8,py:4,children:[e.jsx(ft,{fontSize:"2xl",color:A,textAlign:"center",children:"What's your name?"}),e.jsxs(fr,{templateColumns:["1fr","1fr 1fr"],gap:6,width:"100%",children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{color:"gray.600",children:"First Name"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:na,color:"blue.500"})}),e.jsx(Ft,{name:"first_name",placeholder:"John",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.first_name,onChange:ee,onKeyDown:Y})]})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{color:"gray.600",children:"Last Name"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:na,color:"blue.500"})}),e.jsx(Ft,{name:"last_name",placeholder:"Doe",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.last_name,onChange:ee,onKeyDown:Y})]})]})]})]})}),t===2&&e.jsx(Ns,{in:t===2,offsetY:"20px",children:e.jsxs(ot,{spacing:8,py:4,children:[e.jsx(ft,{fontSize:"2xl",color:A,textAlign:"center",children:"Create a username"}),e.jsxs(mt,{isRequired:!0,width:"100%",children:[e.jsx(xt,{color:"gray.600",children:"Username"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:na,color:"blue.500"})}),e.jsx(Ft,{name:"username",placeholder:"@johndoe",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.username,onChange:ee,onKeyDown:Y,_placeholder:{color:"gray.400"}})]}),e.jsx($,{fontSize:"sm",color:"gray.500",mt:2,children:"This will be your unique identifier on MU Connect"})]})]})}),t===3&&e.jsx(Ns,{in:t===3,offsetY:"20px",children:e.jsxs(ot,{spacing:8,py:4,children:[e.jsx(ft,{fontSize:"2xl",color:A,textAlign:"center",children:"What's your email address?"}),e.jsxs(mt,{isRequired:!0,width:"100%",isInvalid:!!O.email,children:[e.jsx(xt,{color:"gray.600",children:"Email"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:Xu,color:"blue.500"})}),e.jsx(Ft,{type:"email",name:"email",placeholder:"id@mu.edu.lb",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.email,onChange:ee,onKeyDown:Y,_placeholder:{color:"gray.400"}})]}),O.email&&e.jsx($,{color:"red.500",fontSize:"sm",mt:1,children:O.email}),e.jsx($,{fontSize:"sm",color:"gray.500",mt:2,children:"We'll use this to verify your account"})]})]})}),t===4&&e.jsx(Ns,{in:t===4,offsetY:"20px",children:e.jsxs(ot,{spacing:8,py:4,children:[e.jsx(ft,{fontSize:"2xl",color:A,textAlign:"center",children:"Create a secure password"}),e.jsxs(fr,{templateColumns:["1fr","1fr 1fr"],gap:6,width:"100%",children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{color:"gray.600",children:"Password"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:ku,color:"blue.500"})}),e.jsx(Ft,{type:"password",name:"password",placeholder:"••••••••",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.password,onChange:ee,onKeyDown:Y,_placeholder:{color:"gray.400"}})]})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{color:"gray.600",children:"Confirm Password"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:ku,color:"blue.500"})}),e.jsx(Ft,{type:"password",name:"password_confirmation",placeholder:"••••••••",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.password_confirmation,onChange:ee,onKeyDown:Y,_placeholder:{color:"gray.400"}})]})]})]})]})}),t===5&&e.jsx(Ns,{in:t===5,offsetY:"20px",children:e.jsxs(ot,{spacing:8,py:4,children:[e.jsx(ft,{fontSize:"2xl",color:A,textAlign:"center",children:"What faculty are you in?"}),e.jsxs(mt,{isRequired:!0,width:"100%",isInvalid:!!O.faculty_id,children:[e.jsx(xt,{color:"gray.600",children:"Select your faculty"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:zs,color:"blue.500"})}),e.jsx(zi,{name:"faculty_id",placeholder:u?"Loading...":"Choose a faculty",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.faculty_id,onChange:Z,pl:10,isDisabled:u,_placeholder:{color:"gray.400"},children:o.map(ce=>e.jsx("option",{value:ce.id,children:ce.name},ce.id))})]}),b&&e.jsx($,{color:"red.500",fontSize:"sm",mt:1,children:b}),O.faculty_id&&e.jsx($,{color:"red.500",fontSize:"sm",mt:1,children:O.faculty_id}),e.jsx($,{fontSize:"sm",color:"gray.500",mt:2,children:"This helps us show you relevant resources"})]})]})}),t===6&&e.jsx(Ns,{in:t===6,offsetY:"20px",children:e.jsxs(ot,{spacing:8,py:4,children:[e.jsx(ft,{fontSize:"2xl",color:A,textAlign:"center",children:"What's your major?"}),e.jsxs(mt,{isRequired:!0,width:"100%",isInvalid:!!O.major_id,children:[e.jsx(xt,{color:"gray.600",children:"Select your major"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:Ki,color:"blue.500"})}),e.jsx(zi,{name:"major_id",placeholder:p?"Loading...":n.faculty_id?"Choose a major":"Choose a faculty first",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.major_id,onChange:y,pl:10,isDisabled:!n.faculty_id||p,_placeholder:{color:"gray.400"},children:a.map(ce=>e.jsx("option",{value:ce.id,children:ce.name},ce.id))})]}),_&&e.jsx($,{color:"red.500",fontSize:"sm",mt:1,children:_}),O.major_id&&e.jsx($,{color:"red.500",fontSize:"sm",mt:1,children:O.major_id}),e.jsx($,{fontSize:"sm",color:"gray.500",mt:2,children:"We'll personalize your experience based on your major"})]})]})}),t===7&&e.jsx(Ns,{in:t===7,offsetY:"20px",children:e.jsxs(ot,{spacing:8,py:6,textAlign:"center",children:[e.jsx(Sc,{size:"80px",bg:"green.100",color:"green.500",children:e.jsx(ht,{as:Di,boxSize:"40px"})}),e.jsx(ft,{fontSize:"2xl",color:A,children:"Ready to create your account"}),e.jsx(de,{borderWidth:"1px",borderColor:T,borderRadius:"lg",p:6,w:"full",bg:"white",boxShadow:"lg",children:e.jsxs(fr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)"},gap:6,w:"100%",children:[e.jsxs(ot,{spacing:1,align:"start",children:[e.jsx($,{fontSize:"sm",color:"gray.500",children:"First Name"}),e.jsx($,{fontWeight:"bold",fontSize:"lg",children:n.first_name})]}),e.jsxs(ot,{spacing:1,align:"start",children:[e.jsx($,{fontSize:"sm",color:"gray.500",children:"Last Name"}),e.jsx($,{fontWeight:"bold",fontSize:"lg",children:n.last_name})]}),e.jsxs(ot,{spacing:1,align:"start",children:[e.jsx($,{fontSize:"sm",color:"gray.500",children:"Username"}),e.jsx($,{fontWeight:"bold",fontSize:"lg",children:n.username})]}),e.jsxs(ot,{spacing:1,align:"start",children:[e.jsx($,{fontSize:"sm",color:"gray.500",children:"Email"}),e.jsx($,{fontWeight:"bold",fontSize:"lg",children:n.email})]}),e.jsxs(ot,{spacing:1,align:"start",children:[e.jsx($,{fontSize:"sm",color:"gray.500",children:"Faculty"}),e.jsx($,{fontWeight:"bold",fontSize:"lg",children:((Q=o.find(ce=>ce.id===parseInt(n.faculty_id)))==null?void 0:Q.name)||"N/A"})]}),e.jsxs(ot,{spacing:1,align:"start",children:[e.jsx($,{fontSize:"sm",color:"gray.500",children:"Major"}),e.jsx($,{fontWeight:"bold",fontSize:"lg",children:((ie=a.find(ce=>ce.id===parseInt(n.major_id)))==null?void 0:ie.name)||"N/A"})]})]})}),e.jsxs(br,{spacing:4,children:[e.jsx(Te,{w:"full",colorScheme:"blue",bgGradient:P,_hover:{bgGradient:w},rightIcon:e.jsx(ea,{}),onClick:q,isLoading:M,loadingText:"Personalizing your feed...",children:"Confirm & Create Account"}),e.jsx(Te,{variant:"outline",colorScheme:"blue",size:"md",leftIcon:e.jsx(Hn,{}),onClick:C,children:"Go Back"})]})]})})]}),t>0&&t<7&&e.jsxs(ke,{justify:"space-between",mt:6,children:[e.jsx(Te,{leftIcon:e.jsx(Hn,{}),onClick:C,variant:"outline",colorScheme:"blue",color:"blue.600",children:"Back"}),e.jsx(Te,{rightIcon:e.jsx(ea,{}),onClick:v,colorScheme:"blue",bgGradient:P,_hover:{bgGradient:w},children:"Next"})]}),t!==7&&e.jsxs(de,{mt:8,textAlign:"center",children:[e.jsxs(ke,{align:"center",gap:4,justify:"center",mb:2,children:[e.jsx(an,{flex:"1",maxW:"100px"}),e.jsx($,{color:"gray.500",fontSize:"sm",fontWeight:"medium",children:"OR"}),e.jsx(an,{flex:"1",maxW:"100px"})]}),e.jsxs($,{color:"gray.500",fontWeight:"medium",children:["Already part of MU Connect?"," ",e.jsx(jc,{as:Ii,to:"/login",color:"blue.500",fontWeight:"600",_hover:{textDecoration:"underline"},children:"Sign in here"})]})]})]})})})},s5=()=>{const[t,r]=z.useState("processing"),n=Jr(),i=cl(),o=Hr(),{handleGoogleAuthSuccess:s}=gi();return z.useEffect(()=>{(async()=>{const c=new URLSearchParams(i.search);if(c.get("error")){o({title:"Authentication Error",description:c.get("error")||"Failed to authenticate with Google",status:"error",duration:5e3,isClosable:!0}),r("error"),setTimeout(()=>n("/login"),2e3);return}try{const u=c.get("data");console.log("Raw data from URL:",u);const h=JSON.parse(u||"{}");if(console.log("Parsed response data:",h),h.is_new_user)r("new-user"),X2(h.temp_token),setTimeout(()=>{n("/complete-google-registration",{state:{email:h.email,name:h.name,temp_token:h.temp_token}})},1e3);else if(r("success"),console.log("Processing existing user login:",h),h.user){console.log("Token from response:",h.token);const p=h.token;p?(console.log("Sanctum token received from backend"),localStorage.setItem("authToken",p)):(console.error("No Sanctum token found in response - authentication may fail"),console.log("Response structure:",Object.keys(h))),h.user.faculty&&(localStorage.setItem("userFaculty",h.user.faculty.name),localStorage.setItem("faculty_id",h.user.faculty.id)),h.user.major&&(localStorage.setItem("userMajor",h.user.major.name),localStorage.setItem("major_id",h.user.major.id)),h.user.role_names&&h.user.role_names.length>0?localStorage.setItem("role",h.user.role_names[0]):h.user.roles&&h.user.roles.length>0&&localStorage.setItem("role",h.user.roles[0]);try{console.log("Updating auth context with user data"),await s(h.user),o({title:"Login Successful",description:h.message||"You have been logged in with Google",status:"success",duration:3e3,isClosable:!0}),console.log("Authentication successful, redirecting to dashboard"),setTimeout(()=>{const x=localStorage.getItem("authToken");console.log("Before redirect - Auth token exists:",!!x),n("/dashboard")},1500)}catch(x){console.error("Error updating auth context:",x),o({title:"Authentication Error",description:"Error setting up your user profile",status:"error",duration:5e3}),setTimeout(()=>n("/login"),2e3)}}else throw new Error("User data not found in response")}catch(u){console.error("Error processing Google callback:",u),r("error"),o({title:"Authentication Error",description:"Failed to process Google authentication",status:"error",duration:5e3,isClosable:!0}),setTimeout(()=>n("/login"),2e3)}})()},[i.search,n,o,s]),e.jsx(vn,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",children:e.jsxs(ot,{spacing:6,children:[e.jsx(Ir,{src:ki,boxSize:"80px",alt:"Maaref Logo"}),e.jsxs(ft,{size:"xl",bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:[t==="processing"&&"Processing Authentication",t==="success"&&"Authentication Successful",t==="new-user"&&"Almost There!",t==="error"&&"Authentication Error"]}),e.jsxs(de,{children:[t==="processing"&&e.jsx(qr,{size:"xl",color:"blue.500"}),t==="success"&&e.jsx($,{children:"You will be redirected to the dashboard momentarily..."}),t==="new-user"&&e.jsx($,{children:"Redirecting to complete your registration..."}),t==="error"&&e.jsx($,{children:"Redirecting back to login page..."})]})]})})},o5=()=>{const[t,r]=z.useState({username:"",faculty_id:"",major_id:"",temp_token:"",email:"",name:""}),[n,i]=z.useState({}),[o,s]=z.useState([]),[a,c]=z.useState([]),[u,h]=z.useState(!0),[p,x]=z.useState(!1),[b,g]=z.useState(!1),[_,S]=z.useState(!1),[O,k]=z.useState(!1),[M,J]=z.useState(null),[re,N]=z.useState(null),D=Hr(),B=Jr(),U=cl(),{completeGoogleSignUp:R,user:P}=gi();z.useEffect(()=>{var ee;if((ee=U.state)!=null&&ee.temp_token)r(Z=>({...Z,temp_token:U.state.temp_token,email:U.state.email||"",name:U.state.name||""}));else{const Z=J2();if(!Z){D({title:"Session expired",description:"Your registration session has expired or is invalid. Please start over.",status:"error",duration:5e3}),S(!0),setTimeout(()=>B("/login"),2e3);return}r(y=>({...y,temp_token:Z}))}const T=1800*1e3,E=setInterval(()=>{const Z=Math.max(0,T-(Date.now()-new Date().getTime()));if(Z<=0){clearInterval(E),S(!0),D({title:"Session expired",description:"Your registration token has expired. Please start over.",status:"warning",duration:5e3}),B("/login");return}N(Math.floor(Z/1e3/60))},6e4);return()=>clearInterval(E)},[U.state,B,D]),z.useEffect(()=>{h(!0),Jp().then(T=>{s(T),h(!1)}).catch(()=>{h(!1),D({title:"Failed to load faculties",description:"Please try refreshing the page.",status:"error",duration:5e3})})},[D]),z.useEffect(()=>{t.faculty_id?(x(!0),Xp(t.faculty_id).then(T=>{c(T),x(!1)}).catch(()=>{x(!1),D({title:"Failed to load majors",description:"Please try selecting a different faculty.",status:"error",duration:5e3})})):c([])},[t.faculty_id,D]),z.useEffect(()=>{P&&B("/dashboard",{replace:!0})},[P,B]);const w=T=>{const{name:E,value:ee}=T.target;r(Z=>({...Z,[E]:ee})),n[E]&&i(Z=>({...Z,[E]:void 0}))},A=async T=>{var E,ee,Z,y;T.preventDefault(),k(!0),J(null);try{if(!t.username)throw new Error("Username is required");if(!t.faculty_id)throw new Error("Faculty selection is required");if(!t.major_id)throw new Error("Major selection is required");const se=((E=U.state)==null?void 0:E.temp_token)||localStorage.getItem("googleTempToken");if(!se)throw new Error("Registration token not found. Please try signing in with Google again.");const W=await R({temp_token:se,username:t.username,faculty_id:parseInt(t.faculty_id),major_id:parseInt(t.major_id)});console.log("Registration completed, response:",W),W&&W.token?(console.log("Sanctum token received from backend after registration"),localStorage.setItem("authToken",W.token)):console.warn("No Sanctum token found in registration response"),D({title:"Registration Complete!",description:"Your account has been created successfully.",status:"success",duration:5e3,isClosable:!0}),localStorage.removeItem("googleTempToken"),localStorage.removeItem("googleTokenExpiry"),B("/dashboard")}catch(se){console.error("Registration error:",se);const W=((Z=(ee=se.response)==null?void 0:ee.data)==null?void 0:Z.message)||se.message||"Failed to complete registration. Please try again.";J(W),(W.includes("expired")||W.includes("invalid")||((y=se.response)==null?void 0:y.status)===400)&&S(!0)}finally{k(!1)}};return _?e.jsx(vn,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",children:e.jsxs(ot,{spacing:6,children:[e.jsx(Ir,{src:ki,boxSize:"80px",alt:"Maaref Logo"}),e.jsx(ft,{size:"xl",color:"red.500",children:"Session Expired"}),e.jsx($,{children:"Redirecting to login page..."}),e.jsx(qr,{size:"md",color:"blue.500"})]})}):e.jsx(ke,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",align:"center",justify:"center",children:e.jsx(Ai,{maxW:"container.md",px:[4,8],children:e.jsxs(de,{bg:"white",p:[6,12],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:"linear(to-r, blue.500, teal.400)",borderRadius:"2xl",zIndex:-1},children:[e.jsxs(ke,{align:"center",mb:8,gap:3,justify:"center",children:[e.jsx(Ir,{src:ki,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(ft,{size:"xl",bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"Complete Your Registration"})]}),re!==null&&e.jsxs(ui,{status:"info",mb:6,borderRadius:"md",children:[e.jsx(hi,{}),"Please complete your registration within ",re," minutes."]}),e.jsx("form",{onSubmit:A,children:e.jsxs(br,{spacing:6,children:[e.jsxs(mt,{isReadOnly:!0,children:[e.jsx(xt,{color:"gray.600",children:"Email"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:Xu,color:"blue.500","aria-label":"Email icon"})}),e.jsx(Ft,{name:"email",value:t.email,placeholder:"your.email@mu.edu.lb",size:"lg",bg:"gray.50",focusBorderColor:"blue.500",color:"gray.600"})]})]}),e.jsxs(mt,{isRequired:!0,isInvalid:!!n.username,children:[e.jsx(xt,{color:"gray.600",children:"Username"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:na,color:"blue.500","aria-label":"Username icon"})}),e.jsx(Ft,{name:"username",value:t.username,onChange:w,placeholder:"Choose a unique username",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800"})]}),n.username&&e.jsx(Wn,{children:n.username})]}),e.jsxs(mt,{isRequired:!0,isInvalid:!!n.faculty_id,children:[e.jsx(xt,{color:"gray.600",children:"Faculty"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:zs,color:"blue.500","aria-label":"Faculty icon"})}),e.jsx(zi,{name:"faculty_id",value:t.faculty_id,onChange:w,placeholder:u?"Loading faculties...":"Select your faculty",size:"lg",focusBorderColor:"blue.500",color:"gray.800",isDisabled:u,children:o.map(T=>e.jsx("option",{value:T.id,children:T.name},T.id))})]}),n.faculty_id&&e.jsx(Wn,{children:n.faculty_id})]}),e.jsxs(mt,{isRequired:!0,isInvalid:!!n.major_id,children:[e.jsx(xt,{color:"gray.600",children:"Major"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:Ki,color:"blue.500","aria-label":"Major icon"})}),e.jsx(zi,{name:"major_id",value:t.major_id,onChange:w,placeholder:t.faculty_id?p?"Loading majors...":"Select your major":"Select a faculty first",size:"lg",focusBorderColor:"blue.500",color:"gray.800",isDisabled:!t.faculty_id||p,children:a.map(T=>e.jsx("option",{value:T.id,children:T.name},T.id))})]}),n.major_id&&e.jsx(Wn,{children:n.major_id})]}),M&&e.jsxs(ui,{status:"error",borderRadius:"md",children:[e.jsx(hi,{}),M]}),e.jsx(Te,{type:"submit",colorScheme:"blue",size:"lg",height:"60px",fontSize:"lg",rightIcon:e.jsx(ht,{as:ea,"aria-label":"Complete"}),isLoading:O,loadingText:"Submitting",bgGradient:"linear(to-r, blue.500, teal.400)",_hover:{bgGradient:"linear(to-r, blue.600, teal.500)"},_active:{transform:"scale(0.98)"},children:"Complete Registration"})]})})]})})})},a5=()=>{var M,J,re;const t=ae("white","gray.800"),r=ae("gray.800","whiteAlpha.900"),n=ae("gray.600","gray.400"),i=ae("gray.200","gray.700"),o=ae("blue.600","blue.400"),s=ae("yellow.400","yellow.500"),[a,c]=z.useState(null),[u,h]=z.useState(!0),[p,x]=z.useState(null);z.useEffect(()=>{(async()=>{try{const D=await gt.get("/overview");c(D.data)}catch(D){x(D.message||"Failed to fetch dashboard data."),console.error(D)}finally{h(!1)}})()},[]);const b=()=>{const N=new Date().getHours();return N<12?"Good morning":N<18?"Good afternoon":"Good evening"};if(u)return e.jsx(ke,{justify:"center",align:"center",minH:"50vh",children:e.jsx(qr,{size:"xl"})});if(p)return e.jsxs(ui,{status:"error",borderRadius:"md",children:[e.jsx(hi,{}),e.jsx($,{children:"There was an error fetching your dashboard data. Please try again later."})]});if(!a)return null;const{user:g,overview:_,general:S}=a,O={events:{count:_.events.registered,label:"Registered Events",link:"/events",icon:zn},clubs:{count:_.clubs.joined,label:"Joined Clubs",link:"/clubs",icon:_u},resources:{count:S.latest_resources.length,label:"Latest Resources",link:"/resources",icon:zs},studyGroups:{count:_.study_groups.total,label:"Study Groups",link:"/study-groups",icon:ni}},k=[{title:"Resources",description:"Access study materials, guides, and educational resources.",icon:zs,link:"/resources",stat:`${_.resources.saved} saved`,preview:S.latest_resources.length>0?`Latest: ${((M=S.latest_resources[0])==null?void 0:M.title)||"Untitled"}`:"No new resources"},{title:"Events",description:"See upcoming campus events and register.",icon:zn,link:"/events",stat:`${_.events.upcoming} upcoming`,preview:S.upcoming_events.length>0?`Next: ${((J=S.upcoming_events[0])==null?void 0:J.title)||"Untitled"}`:"No upcoming events"},{title:"Clubs",description:"Discover, join, and interact with campus clubs.",icon:_u,link:"/clubs",stat:`${_.clubs.joined} joined`,preview:"Check out the latest club activities and news."},{title:"Study Groups",description:"Collaborate with peers and excel in your courses.",icon:ni,link:"/study-groups",stat:`${_.study_groups.leading} led by you`,preview:"Find or create a study group for your classes."}];return e.jsxs(de,{children:[S.voting_status==="open"&&e.jsx(lr.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(ui,{status:"info",borderRadius:"xl",mb:6,p:4,variant:"subtle",children:[e.jsx(hi,{as:zm}),e.jsxs(de,{flex:"1",children:[e.jsx($,{fontWeight:"bold",children:"Student Elections are now open!"}),e.jsx($,{fontSize:"sm",children:"Your voice matters. Cast your vote for student representatives now."})]}),e.jsx(Te,{as:Ii,to:"/clubs",colorScheme:"blue",size:"sm",children:"Vote Now"})]})}),e.jsx(lr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(rr,{mb:6,p:6,borderRadius:"xl",borderWidth:"1px",borderColor:i,bg:t,boxShadow:"md",children:e.jsx(ke,{direction:{base:"column",md:"row"},alignItems:"center",justifyContent:"space-between",children:e.jsxs(dt,{spacing:4,mb:{base:4,md:0},children:[e.jsx(Fr,{size:"lg",src:g.avatar,name:`${g.first_name||""} ${g.last_name||""}`.trim()||"User"}),e.jsxs(ot,{align:"start",spacing:1,children:[e.jsxs(ft,{size:"md",color:r,children:[b(),", ",g.first_name,"!"]}),e.jsx($,{fontSize:"sm",color:n,children:((re=g.major)==null?void 0:re.name)||"Major not specified"})]})]})})})}),e.jsxs(de,{mb:6,children:[e.jsx(ft,{size:"md",mb:4,color:o,children:"My Overview"}),e.jsx(Zn,{columns:{base:2,md:4},spacing:4,children:Object.values(O).map(N=>e.jsx(lr.div,{whileHover:{y:-3,scale:1.03},transition:{duration:.15},children:e.jsx(rr,{bg:t,borderRadius:"lg",borderWidth:"1px",borderColor:i,p:4,variant:"outline",as:Ii,to:N.link,_hover:{textDecoration:"none",shadow:"md",bg:`${s}10`},children:e.jsx(_i,{label:N.label,placement:"top",hasArrow:!0,children:e.jsxs(dt,{spacing:3,align:"center",children:[e.jsx(ht,{as:N.icon,boxSize:6,color:s}),e.jsxs(ot,{align:"start",spacing:0,children:[e.jsx($,{fontSize:"xl",fontWeight:"bold",color:r,children:N.count}),e.jsx($,{fontSize:"xs",color:n,whiteSpace:"nowrap",children:N.label})]})]})})})},N.label))})]}),e.jsxs(de,{mb:6,children:[e.jsx(ft,{size:"md",mb:4,color:o,children:"Explore Sections"}),e.jsx(Zn,{columns:{base:1,md:2},spacing:6,children:k.map(N=>e.jsx(Ii,{to:N.link,style:{textDecoration:"none"},children:e.jsx(lr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:{scale:1.02,y:-4},children:e.jsx(rr,{bg:t,borderColor:i,borderWidth:"1px",borderRadius:"xl",boxShadow:"sm",p:6,_hover:{bg:`${s}10`},transition:"all 0.2s ease",h:"100%",children:e.jsxs(ke,{direction:"column",h:"100%",children:[e.jsxs(ke,{align:"center",mb:3,gap:3,children:[e.jsx(de,{fontSize:"2xl",as:N.icon,color:s}),e.jsx(ft,{size:"md",color:o,children:N.title})]}),e.jsx($,{color:n,mb:4,flexGrow:1,children:N.description}),e.jsx($,{fontWeight:"bold",color:s,mb:2,children:N.stat}),e.jsxs(dt,{mt:"auto",pt:3,borderTopWidth:"1px",borderColor:i,spacing:2,children:[e.jsx($,{fontSize:"xs",color:n,noOfLines:1,children:N.preview}),e.jsx(ht,{as:ea,boxSize:4,color:n,ml:"auto"})]})]})})})},N.title))})]})]})},Qp=ps,sc=async(t={})=>{const r=await gt.get("/events",{params:t});return r.data&&Array.isArray(r.data.data)&&(r.data.data=r.data.data.map(n=>({...n,media:n.image_path?`${Qp}/api/storage/${n.image_path.replace(/^events[\\\/]/,"events/")}`:void 0}))),r.data},l5=async t=>(await gt.post(`/events/${t}/register`)).data,c5=async t=>(await gt.post(`/events/${t}/unregister`)).data,d5=async(t={})=>{const r=await gt.get("/events/my-events",{params:t});return r.data&&Array.isArray(r.data.data)&&(r.data.data=r.data.data.map(n=>({...n,media:n.image_path?`${Qp}/api/storage/${n.image_path.replace(/^events[\\\/]/,"events/")}`:void 0}))),r.data},u5=async t=>{var r;try{let n=t,i={};if(!(t instanceof FormData)){const s=new FormData;Object.entries(t||{}).forEach(([a,c])=>{c!=null&&(Array.isArray(c)?c.forEach(u=>s.append(`${a}[]`,u)):s.append(a,c))}),n=s}return i["Content-Type"]="multipart/form-data",(await gt.post("/events",n,{headers:i})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to create event"}}},h5=async(t,r)=>{var n;try{let i=r,o={};if(!(r instanceof FormData)){const a=new FormData;return Object.entries(r||{}).forEach(([u,h])=>{h!=null&&(Array.isArray(h)?h.forEach(p=>a.append(`${u}[]`,p)):a.append(u,h))}),a.append("_method","PUT"),i=a,o["Content-Type"]="multipart/form-data",(await gt.post(`/events/${t}`,i,{headers:o})).data}return o["Content-Type"]="multipart/form-data",(await gt.put(`/events/${t}`,i,{headers:o})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to update event"}}},f5=async t=>(await gt.delete(`/events/${t}`)).data,Zp=async t=>(await gt.post(`/events/${t}/toggleSave`)).data,p5=lr(rr),g5=()=>{const t=localStorage.getItem("role"),r=t==="admin"||t==="moderator",n=Jr(),i=Hr(),o=ae("gray.50","gray.900"),s=ae("white","gray.800"),a=ae("gray.800","white"),c=ae("gray.500","gray.400"),u=ae("purple.500","purple.300"),h=ae("gray.200","gray.700"),p=ll({base:!0,md:!1}),{isOpen:x,onOpen:b,onClose:g}=Yr(),[_,S]=z.useState(null),{isOpen:O,onOpen:k,onClose:M}=Yr(),[J,re]=z.useState(!1),[N,D]=z.useState(null),[B,U]=z.useState(""),[R,P]=z.useState("All"),[w,A]=z.useState([]),[T,E]=z.useState(!1),[ee,Z]=z.useState(!1),[y,se]=z.useState(!1),[W,v]=z.useState([]),[Y,C]=z.useState([]),[q,L]=z.useState(!0),[G,Q]=z.useState(null),[ie,ce]=z.useState(1),[le,xe]=z.useState(1);z.useEffect(()=>{(async()=>{try{const Ae=((await d5()).data||[]).map(Me=>Me.id);A(Ae)}catch{}})()},[]),z.useEffect(()=>{(async()=>{L(!0),Q(null);try{const ye={page:ie};B&&(ye.search=B),R&&R!=="All"&&(R==="Today"?ye.time_filter="today":R==="This Week"?ye.time_filter="this_week":R==="This Month"&&(ye.time_filter="this_month"));const Ae=await sc(ye),Me=(Ae.data||[]).map(_e=>({id:_e.id,title:_e.title,date:_e.event_datetime,location:_e.location,organizer:_e.organizer,description:_e.description,attendees:_e.attendees_count||0,media:_e.media,mediaType:_e.media?_e.media.endsWith(".mp4")?"video":"image":void 0,speakers:_e.speaker_names?_e.speaker_names.split(",").map(Fe=>({name:Fe.trim(),title:""})):[]}));C(Me),ce(Ae.current_page||1),xe(Ae.last_page||1)}catch(ye){Q(ye.message||"Failed to fetch events")}finally{L(!1)}})()},[ie,B,R]);const we=Y,ze=async Se=>{if(w.includes(Se)){Z(!0);try{await c5(Se),A(ye=>ye.filter(Ae=>Ae!==Se)),i({title:"Registration canceled",description:"You've been removed from the event",status:"info",duration:3e3,isClosable:!0})}catch(ye){i({title:"Failed to unregister",description:ye.message||"Could not unregister from event.",status:"error",duration:3e3,isClosable:!0})}finally{Z(!1),g()}}else{E(!0);try{await l5(Se),A(ye=>[...ye,Se]),i({title:"Registration successful!",description:"You're now registered for this event",status:"success",duration:3e3,isClosable:!0})}catch(ye){i({title:"Failed to register",description:ye.message||"Could not register for event.",status:"error",duration:3e3,isClosable:!0})}finally{E(!1),g()}}},De=async Se=>{try{await Zp(Se),v(ye=>{const Ae=ye.includes(Se),Me=Ae?ye.filter(_e=>_e!==Se):[...ye,Se];return i({title:Ae?"Event unsaved":"Event saved",description:Ae?"Removed from your bookmarks":"Added to your bookmarks",status:"success",duration:2e3,isClosable:!0}),Me})}catch(ye){i({title:"Failed to toggle save",description:(ye==null?void 0:ye.message)||"Could not update bookmark.",status:"error",duration:2e3,isClosable:!0})}},$e=async Se=>{se(!0);try{await u5(Se);const Ae=((await sc()).data||[]).map(Me=>({id:Me.id,title:Me.title,date:Me.event_datetime,location:Me.location,organizer:Me.organizer,description:Me.description,attendees:Me.attendees_count||0,maxAttendees:Me.max_attendees||0,media:Me.media,mediaType:Me.image_path?Me.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:Me.speaker_names?Me.speaker_names.split(",").map(_e=>({name:_e.trim(),title:""})):[]}));C(Ae),i({title:"Event created!",description:"Your event has been successfully created",status:"success",duration:3e3,isClosable:!0})}catch(ye){i({title:"Failed to create event",description:ye.message||"Could not create event.",status:"error",duration:3e3,isClosable:!0})}finally{se(!1)}},ve=Se=>{D(Se),re(!0)},te=()=>{re(!1),D(null)},Ce=async(Se,ye)=>{try{await h5(Se,ye);const Me=((await sc()).data||[]).map(_e=>({id:_e.id,title:_e.title,date:_e.event_datetime,location:_e.location,organizer:_e.organizer,description:_e.description,attendees:_e.attendees_count||0,maxAttendees:_e.max_attendees||0,media:_e.media,mediaType:_e.image_path?_e.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:_e.speaker_names?_e.speaker_names.split(",").map(Fe=>({name:Fe.trim(),title:""})):[]}));C(Me),i({title:"Event updated!",description:"The event has been updated.",status:"success",duration:2e3,isClosable:!0}),te()}catch(Ae){i({title:"Failed to update event",description:(Ae==null?void 0:Ae.message)||"Could not update event.",status:"error",duration:2e3,isClosable:!0})}},Be=async Se=>{try{await f5(Se);const Ae=((await sc()).data||[]).map(Me=>({id:Me.id,title:Me.title,date:Me.event_datetime,location:Me.location,organizer:Me.organizer,description:Me.description,attendees:Me.attendees_count||0,maxAttendees:Me.max_attendees||0,media:Me.media,mediaType:Me.image_path?Me.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:Me.speaker_names?Me.speaker_names.split(",").map(_e=>({name:_e.trim(),title:""})):[]}));C(Ae),i({title:"Event deleted!",description:"The event has been removed.",status:"success",duration:2e3,isClosable:!0})}catch(ye){i({title:"Failed to delete event",description:(ye==null?void 0:ye.message)||"Could not delete event.",status:"error",duration:2e3,isClosable:!0})}},Ne=Se=>{S(Se),b()},ue=()=>{n(-1)},Je=({event:Se})=>e.jsx(p5,{onClick:()=>Ne(Se),cursor:"pointer",bg:s,position:"relative",whileHover:{y:-5},transition:{duration:.2},boxShadow:"md",borderRadius:"xl",overflow:"hidden",borderWidth:"1px",borderColor:h,children:e.jsx(In,{p:0,children:e.jsxs(br,{spacing:0,children:[e.jsxs(de,{position:"relative",height:"180px",overflow:"hidden",children:[e.jsx(Ir,{src:Se.media,alt:Se.title,objectFit:"cover",width:"100%",height:"100%",filter:"brightness(0.9)"}),e.jsxs(de,{position:"absolute",top:3,left:3,bg:"rgba(0,0,0,0.7)",py:1,px:2,borderRadius:"md",color:"white",textAlign:"center",children:[e.jsx($,{fontSize:"xs",fontWeight:"bold",children:new Date(Se.date).toLocaleDateString("en-US",{month:"short"}).toUpperCase()}),e.jsx($,{fontSize:"xl",fontWeight:"bold",children:new Date(Se.date).getDate()})]}),e.jsx(Ut,{"aria-label":W.includes(Se.id)?"Unsave event":"Bookmark event",icon:e.jsx(Ki,{fill:W.includes(Se.id)?"currentColor":"none"}),position:"absolute",top:3,right:12,colorScheme:"purple",variant:"ghost",size:"lg",borderRadius:"full",onClick:ye=>{ye.stopPropagation(),De(Se.id)}}),e.jsxs(un,{placement:"bottom-end",children:[e.jsx(hn,{as:Ut,"aria-label":"Event options",icon:e.jsx(nl,{}),position:"absolute",top:3,right:3,size:"lg",variant:"ghost",borderRadius:"full",zIndex:1,onClick:ye=>ye.stopPropagation()}),e.jsxs(fn,{minW:"140px",zIndex:2,children:[e.jsx(Zt,{icon:e.jsx(fa,{}),onClick:ye=>{ye.stopPropagation();const Ae=`${window.location.origin}/events/${Se.id}`;navigator.clipboard.writeText(Ae),i({title:"Link copied!",description:"Event link copied to clipboard.",status:"info",duration:2e3,isClosable:!0})},children:"Share"}),(localStorage.getItem("role")==="admin"||localStorage.getItem("role")==="moderator")&&e.jsxs(e.Fragment,{children:[e.jsx(Zt,{icon:e.jsx(la,{}),onClick:ye=>{ye.stopPropagation(),ve(Se)},children:"Edit"}),e.jsx(Zt,{icon:e.jsx(dl,{}),color:"red.500",onClick:async ye=>{ye.stopPropagation(),await Be(Se.id)},children:"Delete"})]})]})]})]}),e.jsxs(br,{p:4,spacing:3,children:[e.jsx(ft,{size:"md",color:a,noOfLines:1,children:Se.title}),e.jsxs(ke,{direction:"column",gap:2,children:[e.jsxs(ke,{align:"center",gap:2,children:[e.jsx(ht,{as:Ko,color:u,boxSize:4}),e.jsx($,{fontSize:"sm",color:c,noOfLines:1,children:Se.location})]}),e.jsxs(ke,{align:"center",gap:2,children:[e.jsx(ht,{as:zn,color:u,boxSize:4}),e.jsx($,{fontSize:"sm",color:c,children:new Date(Se.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]}),w.includes(Se.id)&&e.jsx(zr,{colorScheme:"green",alignSelf:"flex-start",px:2,py:1,borderRadius:"full",children:e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ht,{as:Di}),e.jsx($,{children:"Registered"})]})})]})]})})},Se.id),Ke=z.memo(({isOpen:Se,onClose:ye,event:Ae,onEventUpdate:Me})=>{var tt,rt;const[_e,Fe]=z.useState({title:(Ae==null?void 0:Ae.title)||"",date:Ae?(tt=Ae.date)==null?void 0:tt.split("T")[0]:"",time:Ae&&Ae.date?new Date(Ae.date).toISOString().slice(11,16):"",location:(Ae==null?void 0:Ae.location)||"",organizer:(Ae==null?void 0:Ae.organizer)||"",description:(Ae==null?void 0:Ae.description)||"",speakerNames:((rt=Ae==null?void 0:Ae.speakers)==null?void 0:rt.map(bt=>bt.name).join(", "))||"",mediaUrl:(Ae==null?void 0:Ae.media)||"",imageFile:null}),[Ee,it]=z.useState((Ae==null?void 0:Ae.media)||null),Ve=z.useRef(null),[at,Lt]=z.useState({}),Ct=ae("white","gray.800"),be=ae("gray.800","white"),st=ae("gray.500","gray.400");z.useEffect(()=>{var bt,yt;Ae&&(Fe({title:Ae.title||"",date:((bt=Ae.date)==null?void 0:bt.split("T")[0])||"",time:Ae.date?new Date(Ae.date).toISOString().slice(11,16):"",location:Ae.location||"",organizer:Ae.organizer||"",description:Ae.description||"",speakerNames:((yt=Ae.speakers)==null?void 0:yt.map(qe=>qe.name).join(", "))||"",mediaUrl:Ae.media||"",imageFile:null}),it(Ae.media||null))},[Ae]);const Ie=bt=>{const{name:yt,value:qe}=bt.target;Fe(pt=>({...pt,[yt]:qe})),at[yt]&&Lt(pt=>({...pt,[yt]:null}))},et=bt=>{const yt=bt.target.files[0];if(!yt)return;Fe(pt=>({...pt,imageFile:yt}));const qe=new FileReader;qe.onload=()=>it(qe.result),qe.readAsDataURL(yt)},Tt=()=>Ve.current.click(),Le=()=>{Lt({}),ye()},We=()=>{const bt={};if(_e.title.trim()||(bt.title="Title is required"),_e.date||(bt.date="Date is required"),_e.time||(bt.time="Time is required"),_e.location.trim()||(bt.location="Location is required"),_e.organizer.trim()||(bt.organizer="Organizer is required"),_e.description.trim()||(bt.description="Description is required"),Object.keys(bt).length>0){Lt(bt);return}const yt={title:_e.title,event_datetime:`${_e.date} ${_e.time}:00`,location:_e.location,organizer:_e.organizer,description:_e.description,speaker_names:_e.speakerNames,image_path:_e.imageFile};Me(Ae.id,yt)};return e.jsxs(wn,{isOpen:Se,onClose:Le,size:"xl",children:[e.jsx(Wr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(jn,{bg:Ct,borderRadius:"xl",children:[e.jsx(rn,{color:be,children:"Edit Event"}),e.jsx(cn,{}),e.jsx(Ur,{pb:6,children:e.jsxs(fr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:6,children:[e.jsxs(mt,{isRequired:!0,isInvalid:at.title,children:[e.jsx(xt,{children:"Event Title"}),e.jsx(Ft,{name:"title",value:_e.title,onChange:Ie,placeholder:"Enter event title"}),at.title&&e.jsx(Wn,{children:at.title})]}),e.jsxs(mt,{isRequired:!0,isInvalid:at.date,children:[e.jsx(xt,{children:"Date"}),e.jsx(Ft,{name:"date",type:"date",value:_e.date,onChange:Ie}),at.date&&e.jsx(Wn,{children:at.date})]}),e.jsxs(mt,{isRequired:!0,isInvalid:at.time,children:[e.jsx(xt,{children:"Time"}),e.jsx(Ft,{name:"time",type:"time",value:_e.time,onChange:Ie}),at.time&&e.jsx(Wn,{children:at.time})]}),e.jsxs(mt,{isRequired:!0,isInvalid:at.location,children:[e.jsx(xt,{children:"Location"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:Ko,color:st})}),e.jsx(Ft,{name:"location",value:_e.location,onChange:Ie,placeholder:"Event location"})]}),at.location&&e.jsx(Wn,{children:at.location})]}),e.jsxs(mt,{isRequired:!0,isInvalid:at.organizer,children:[e.jsx(xt,{children:"Organizer"}),e.jsx(Ft,{name:"organizer",value:_e.organizer,onChange:Ie,placeholder:"Organizing department or group"}),at.organizer&&e.jsx(Wn,{children:at.organizer})]}),e.jsxs(mt,{gridColumn:{md:"span 2"},isRequired:!0,isInvalid:at.description,children:[e.jsx(xt,{children:"Description"}),e.jsx(ri,{name:"description",value:_e.description,onChange:Ie,placeholder:"Provide details about your event",rows:5}),at.description&&e.jsx(Wn,{children:at.description})]}),e.jsxs(mt,{gridColumn:{md:"span 2"},children:[e.jsx(xt,{children:"Speaker Names"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:qh,color:st})}),e.jsx(Ft,{name:"speakerNames",value:_e.speakerNames,onChange:Ie,placeholder:"Names separated by commas"})]}),e.jsx(Ql,{children:"If applicable, add featured speakers"})]}),e.jsxs(mt,{gridColumn:{md:"span 2"},children:[e.jsx(xt,{children:"Event Image"}),e.jsxs(de,{position:"relative",children:[Ee?e.jsxs(de,{position:"relative",onClick:Tt,cursor:"pointer",borderRadius:"md",overflow:"hidden",mb:3,children:[e.jsx(Ir,{src:Ee,alt:"Event preview",height:"200px",width:"100%",objectFit:"cover"}),e.jsx(de,{position:"absolute",top:0,left:0,right:0,bottom:0,bg:"blackAlpha.400",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx($,{color:"white",fontWeight:"bold",children:"Change Image"})})]}):e.jsx(Te,{leftIcon:e.jsx(rl,{}),onClick:Tt,width:"100%",height:"200px",variant:"outline",mb:3,py:10,children:e.jsxs(ot,{spacing:2,children:[e.jsx($,{children:"Click to upload event image"}),e.jsx($,{fontSize:"xs",color:st,children:"JPEG, PNG or GIF, recommended size 1200×630px"})]})}),e.jsx(Ft,{type:"file",accept:"image/*",display:"none",ref:Ve,onChange:et})]}),e.jsx(Ql,{children:"A default image will be used if not provided"})]})]})}),e.jsxs(dn,{children:[e.jsx(Te,{variant:"outline",mr:3,onClick:Le,children:"Cancel"}),e.jsx(Te,{colorScheme:"purple",onClick:We,leftIcon:e.jsx(la,{}),children:"Update Event"})]})]})]})}),ut=z.memo(({isOpen:Se,onClose:ye,onEventCreate:Ae})=>{const[Me,_e]=z.useState({title:"",date:"",time:"",location:"",organizer:"",description:"",speakerNames:"",mediaUrl:""}),[Fe,Ee]=z.useState(null),it=z.useRef(null),[Ve,at]=z.useState({}),Lt=ae("white","gray.800"),Ct=ae("gray.800","white"),be=ae("gray.500","gray.400"),{user:st}=gi(),Ie=rt=>{const{name:bt,value:yt}=rt.target;_e(qe=>({...qe,[bt]:yt})),Ve[bt]&&at(qe=>({...qe,[bt]:null}))},et=rt=>{const bt=rt.target.files[0];if(!bt)return;_e(qe=>({...qe,imageFile:bt}));const yt=new FileReader;yt.onload=()=>{Ee(yt.result),_e(qe=>({...qe,mediaUrl:yt.result}))},yt.readAsDataURL(bt)},Tt=()=>{it.current.click()},Le=()=>{_e({title:"",date:"",time:"",location:"",organizer:"",description:"",speakerNames:"",mediaUrl:""}),Ee(null),at({})},We=()=>{Le(),ye()},tt=()=>{const rt={};if(Me.title.trim()||(rt.title="Title is required"),Me.date||(rt.date="Date is required"),Me.time||(rt.time="Time is required"),Me.location.trim()||(rt.location="Location is required"),Me.organizer.trim()||(rt.organizer="Organizer is required"),Me.description.trim()||(rt.description="Description is required"),Object.keys(rt).length>0){at(rt);return}const bt={user_id:st==null?void 0:st.id,title:Me.title,event_datetime:`${Me.date} ${Me.time}:00`,location:Me.location,organizer:Me.organizer,description:Me.description,speaker_names:Me.speakerNames,image_path:Me.imageFile};Ae(bt),Le(),ye()};return e.jsxs(wn,{isOpen:Se,onClose:We,size:"xl",children:[e.jsx(Wr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(jn,{bg:Lt,borderRadius:"xl",children:[e.jsx(rn,{color:Ct,children:"Create New Event"}),e.jsx(cn,{}),e.jsx(Ur,{pb:6,children:e.jsxs(fr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:6,children:[e.jsxs(mt,{isRequired:!0,isInvalid:Ve.title,children:[e.jsx(xt,{children:"Event Title"}),e.jsx(Ft,{name:"title",value:Me.title,onChange:Ie,placeholder:"Enter event title"}),Ve.title&&e.jsx(Wn,{children:Ve.title})]}),e.jsxs(mt,{isRequired:!0,isInvalid:Ve.date,children:[e.jsx(xt,{children:"Date"}),e.jsx(Ft,{name:"date",type:"date",value:Me.date,onChange:Ie}),Ve.date&&e.jsx(Wn,{children:Ve.date})]}),e.jsxs(mt,{isRequired:!0,isInvalid:Ve.time,children:[e.jsx(xt,{children:"Time"}),e.jsx(Ft,{name:"time",type:"time",value:Me.time,onChange:Ie}),Ve.time&&e.jsx(Wn,{children:Ve.time})]}),e.jsxs(mt,{isRequired:!0,isInvalid:Ve.location,children:[e.jsx(xt,{children:"Location"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:Ko,color:be})}),e.jsx(Ft,{name:"location",value:Me.location,onChange:Ie,placeholder:"Event location"})]}),Ve.location&&e.jsx(Wn,{children:Ve.location})]}),e.jsxs(mt,{isRequired:!0,isInvalid:Ve.organizer,children:[e.jsx(xt,{children:"Organizer"}),e.jsx(Ft,{name:"organizer",value:Me.organizer,onChange:Ie,placeholder:"Organizing department or group"}),Ve.organizer&&e.jsx(Wn,{children:Ve.organizer})]}),e.jsxs(mt,{gridColumn:{md:"span 2"},isRequired:!0,isInvalid:Ve.description,children:[e.jsx(xt,{children:"Description"}),e.jsx(ri,{name:"description",value:Me.description,onChange:Ie,placeholder:"Provide details about your event",rows:5}),Ve.description&&e.jsx(Wn,{children:Ve.description})]}),e.jsxs(mt,{gridColumn:{md:"span 2"},children:[e.jsx(xt,{children:"Speaker Names"}),e.jsxs(Er,{children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:qh,color:be})}),e.jsx(Ft,{name:"speakerNames",value:Me.speakerNames,onChange:Ie,placeholder:"Names separated by commas"})]}),e.jsx(Ql,{children:"If applicable, add featured speakers"})]}),e.jsxs(mt,{gridColumn:{md:"span 2"},children:[e.jsx(xt,{children:"Event Image"}),e.jsxs(de,{position:"relative",children:[Fe?e.jsxs(de,{position:"relative",onClick:Tt,cursor:"pointer",borderRadius:"md",overflow:"hidden",mb:3,children:[e.jsx(Ir,{src:Fe,alt:"Event preview",height:"200px",width:"100%",objectFit:"cover"}),e.jsx(de,{position:"absolute",top:0,left:0,right:0,bottom:0,bg:"blackAlpha.400",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx($,{color:"white",fontWeight:"bold",children:"Change Image"})})]}):e.jsx(Te,{leftIcon:e.jsx(rl,{}),onClick:Tt,width:"100%",height:"200px",variant:"outline",mb:3,py:10,children:e.jsxs(ot,{spacing:2,children:[e.jsx($,{children:"Click to upload event image"}),e.jsx($,{fontSize:"xs",color:be,children:"JPEG, PNG or GIF, recommended size 1200×630px"})]})}),e.jsx(Ft,{type:"file",accept:"image/*",display:"none",ref:it,onChange:et})]}),e.jsx(Ql,{children:"A default image will be used if not provided"})]})]})}),e.jsxs(dn,{children:[e.jsx(Te,{variant:"outline",mr:3,onClick:We,children:"Cancel"}),e.jsx(Te,{colorScheme:"purple",onClick:tt,leftIcon:e.jsx(pi,{}),children:"Create Event"})]})]})]})}),Ye=()=>{if(!_)return null;const Se=new Date(_.date),ye=Se<new Date,Ae=w.includes(_.id);return e.jsxs(wn,{isOpen:x,onClose:g,size:"xl",children:[e.jsx(Wr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(jn,{bg:s,borderRadius:"xl",children:[e.jsx(rn,{color:a,children:_.title}),e.jsx(cn,{}),e.jsxs(Ur,{pb:6,children:[e.jsx(de,{position:"relative",mb:6,children:e.jsx(Ir,{src:_.media,alt:_.title,w:"100%",h:"250px",objectFit:"cover",borderRadius:"lg"})}),e.jsxs(fr,{templateColumns:{base:"1fr",md:"2fr 1fr"},gap:6,children:[e.jsxs(de,{children:[e.jsx(ft,{size:"md",mb:3,color:a,children:"About This Event"}),e.jsx($,{color:a,mb:4,children:_.description}),_.speakers&&_.speakers.length>0&&e.jsxs(de,{mt:5,children:[e.jsx(ft,{size:"sm",mb:3,color:a,children:"Featured Speakers"}),e.jsx(ot,{align:"start",spacing:3,children:_.speakers.map((Me,_e)=>e.jsxs(dt,{spacing:3,children:[e.jsx(Fr,{size:"sm",name:Me.name}),e.jsx(de,{children:e.jsx($,{fontWeight:"bold",fontSize:"sm",children:Me.name})})]},_e))})]})]}),e.jsx(de,{children:e.jsxs(ot,{align:"start",spacing:4,p:4,bg:ae("gray.50","gray.700"),borderRadius:"lg",children:[e.jsx(ft,{size:"sm",color:a,children:"Event Details"}),e.jsxs(dt,{children:[e.jsx(ht,{as:zn,color:u}),e.jsxs(ot,{align:"start",spacing:0,children:[e.jsx($,{fontSize:"sm",fontWeight:"bold",children:"Date & Time"}),e.jsx($,{fontSize:"sm",children:Se.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx($,{fontSize:"sm",children:Se.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]}),e.jsxs(dt,{children:[e.jsx(ht,{as:Ko,color:u}),e.jsxs(ot,{align:"start",spacing:0,children:[e.jsx($,{fontSize:"sm",fontWeight:"bold",children:"Location"}),e.jsx($,{fontSize:"sm",children:_.location})]})]}),e.jsxs(dt,{children:[e.jsx(ht,{as:fs,color:u}),e.jsxs(ot,{align:"start",spacing:0,children:[e.jsx($,{fontSize:"sm",fontWeight:"bold",children:"Organizer"}),e.jsx($,{fontSize:"sm",children:_.organizer})]})]})]})})]})]}),e.jsxs(dn,{children:[e.jsx(Te,{variant:"outline",mr:3,onClick:g,children:"Close"}),ye?e.jsx($,{color:c,children:"Event Finished"}):e.jsx(Te,{colorScheme:Ae?"red":"purple",onClick:()=>ze(_.id),isLoading:T,children:Ae?"Cancel Registration":"Register Now"})]})]})]})};return e.jsxs(de,{minH:"100vh",bg:o,py:6,px:{base:4,md:6},children:[e.jsxs(Ai,{maxW:"1200px",children:[e.jsxs(ke,{mb:8,align:"center",justify:"space-between",children:[e.jsxs(ke,{align:"center",children:[e.jsx(Ut,{icon:e.jsx(Ds,{}),onClick:ue,"aria-label":"Go back",variant:"ghost",color:a,size:"lg",mr:3,_hover:{bg:ae("gray.100","gray.700")}}),e.jsxs(ot,{align:"start",spacing:1,children:[e.jsx(ft,{size:"lg",color:a,children:"Campus Events"}),e.jsx($,{fontSize:"sm",color:c,children:"Discover and register for upcoming events"})]})]}),r&&e.jsx(Te,{onClick:k,colorScheme:"purple",leftIcon:e.jsx(pi,{}),size:p?"sm":"md",display:{base:"none",md:"flex"},children:"Create Event"})]}),e.jsx(de,{bg:s,p:5,borderRadius:"xl",boxShadow:"sm",mb:8,borderWidth:"1px",borderColor:h,children:e.jsxs(ke,{direction:{base:"column",md:"row"},gap:4,justify:"space-between",align:{base:"stretch",md:"center"},children:[e.jsxs(Er,{maxW:{base:"100%",md:"400px"},children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:ha,color:c})}),e.jsx(Ft,{placeholder:"Search for events...",value:B,onChange:Se=>U(Se.target.value),focusBorderColor:u})]}),e.jsx(dt,{spacing:3,children:e.jsxs(un,{children:[e.jsx(hn,{as:Te,rightIcon:e.jsx(hs,{}),variant:"outline",size:"md",children:e.jsxs(ke,{align:"center",children:[e.jsx(ht,{as:zn,mr:2}),e.jsx($,{children:R})]})}),e.jsxs(fn,{children:[e.jsx(Zt,{onClick:()=>P("All"),fontWeight:R==="All"?"bold":"normal",children:"All"}),e.jsx(Zt,{onClick:()=>P("Today"),fontWeight:R==="Today"?"bold":"normal",children:"Today"}),e.jsx(Zt,{onClick:()=>P("This Week"),fontWeight:R==="This Week"?"bold":"normal",children:"This Week"}),e.jsx(Zt,{onClick:()=>P("This Month"),fontWeight:R==="This Month"?"bold":"normal",children:"This Month"})]})]})})]})}),e.jsxs(Ws,{variant:"soft-rounded",colorScheme:"purple",children:[e.jsxs(Us,{mb:6,children:[e.jsxs(Sn,{_selected:{bg:`${u}20`,color:u,fontWeight:"semibold"},children:["All Events (",we.length,")"]}),e.jsxs(Sn,{_selected:{bg:`${u}20`,color:u,fontWeight:"semibold"},children:["My Events (",w.length,")"]})]}),e.jsxs(fo,{children:[e.jsx(kn,{p:0,children:q?e.jsx(fr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:[...Array(6)].map((Se,ye)=>e.jsx(Ar,{height:"300px",borderRadius:"xl"},ye))}):we.length>0?e.jsxs(e.Fragment,{children:[e.jsx(fr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:we.map(Se=>e.jsx(Je,{event:Se},Se.id))}),e.jsxs(ke,{justify:"center",mt:8,gap:2,align:"center",children:[e.jsx(Te,{onClick:()=>ce(Se=>Math.max(1,Se-1)),disabled:ie===1,variant:"outline",children:"Previous"}),e.jsxs($,{px:3,fontWeight:"medium",children:["Page ",ie," of ",le]}),e.jsx(Te,{onClick:()=>ce(Se=>Math.min(le,Se+1)),disabled:ie===le,variant:"outline",children:"Next"})]})]}):e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:h,borderRadius:"lg",children:e.jsx($,{color:c,children:"No Events Found!"})})}),e.jsx(kn,{p:0,children:w.length>0?e.jsx(fr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:Y.filter(Se=>w.includes(Se.id)).map(Se=>e.jsx(Je,{event:Se},Se.id))}):e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:h,borderRadius:"lg",children:e.jsx($,{color:c,children:"You haven't registered for any events yet"})})})]})]})]}),e.jsx(Ut,{position:"fixed",bottom:"24px",right:"24px","aria-label":"Create event",icon:e.jsx(pi,{}),colorScheme:"purple",isRound:!0,boxShadow:"lg",size:"lg",onClick:k,display:{base:"flex",md:"none"},zIndex:2}),e.jsx(Ye,{}),J&&e.jsx(Ke,{isOpen:J,onClose:te,event:N,onEventUpdate:Ce}),e.jsx(ut,{isOpen:O,onClose:M,onEventCreate:$e})]})},e0="/assets/mu-connect-COOGwVPu.png",Fu=Hs,m5=async()=>{try{return(await Pr.get(`${Fu}/my-profile`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}})).data}catch(t){throw console.error("Error fetching user profile:",t),t}},x5=async(t,r)=>{try{const n=r.avatarFile instanceof File;let i;if(n){const o=new FormData;o.append("avatar",r.avatarFile),o.append("_method","PUT"),Object.keys(r).forEach(s=>{s!=="avatarFile"&&s!=="avatar"&&r[s]!==void 0&&o.append(s,r[s])}),i=await Pr.post(`${Fu}/user/${t}`,o,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"multipart/form-data"}})}else i=await Pr.put(`${Fu}/user/${t}`,r,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});return i.data}catch(n){throw console.error("Error updating user profile:",n),n}},b5=async(t="")=>{try{const r=t?`/users?search=${encodeURIComponent(t)}`:"/users";return(await gt.get(r)).data}catch(r){throw console.error("Error fetching users:",r),r}},y5=async t=>{try{return(await gt.patch(`/users/${t}/toggle-active`,{})).data}catch(r){throw console.error("Error toggling user active status:",r),r}},v5=async(t="me")=>{try{return(await gt.get(`/users/${t}`)).data}catch(r){throw console.error("Error fetching visitor profile:",r),r}},w5=async(t,r)=>{try{return(await gt.put(`/users/${t}/roles`,{role:r})).data}catch(n){throw console.error("Error updating user role:",n),n}},t0=6048e5,j5=864e5,of=Symbol.for("constructDateFrom");function Ms(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&of in t?t[of](r):t instanceof Date?new t.constructor(r):new Date(r)}function Bi(t,r){return Ms(r||t,t)}let S5={};function td(){return S5}function sl(t,r){var c,u,h,p,x,b,g,_;const n=td(),i=(_=(g=(p=(h=r==null?void 0:r.weekStartsOn)!=null?h:(u=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)!=null?p:n.weekStartsOn)!=null?g:(b=(x=n.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)!=null?_:0,o=Bi(t,r==null?void 0:r.in),s=o.getDay(),a=(s<i?7:0)+s-i;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Ec(t,r){return sl(t,{...r,weekStartsOn:1})}function r0(t,r){const n=Bi(t,r==null?void 0:r.in),i=n.getFullYear(),o=Ms(n,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);const s=Ec(o),a=Ms(n,0);a.setFullYear(i,0,4),a.setHours(0,0,0,0);const c=Ec(a);return n.getTime()>=s.getTime()?i+1:n.getTime()>=c.getTime()?i:i-1}function af(t){const r=Bi(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function C5(t,...r){const n=Ms.bind(null,r.find(i=>typeof i=="object"));return r.map(n)}function lf(t,r){const n=Bi(t,r==null?void 0:r.in);return n.setHours(0,0,0,0),n}function _5(t,r,n){const[i,o]=C5(n==null?void 0:n.in,t,r),s=lf(i),a=lf(o),c=+s-af(s),u=+a-af(a);return Math.round((c-u)/j5)}function k5(t,r){const n=r0(t,r),i=Ms(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Ec(i)}function A5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function L5(t){return!(!A5(t)&&typeof t!="number"||isNaN(+Bi(t)))}function P5(t,r){const n=Bi(t,r==null?void 0:r.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const N5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},O5=(t,r,n)=>{let i;const o=N5[t];return typeof o=="string"?i=o:r===1?i=o.one:i=o.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Zd(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const R5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},E5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},T5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},F5={date:Zd({formats:R5,defaultWidth:"full"}),time:Zd({formats:E5,defaultWidth:"full"}),dateTime:Zd({formats:T5,defaultWidth:"full"})},I5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},z5=(t,r,n,i)=>I5[t];function Ga(t){return(r,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let o;if(i==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):a;o=t.formattingValues[c]||t.formattingValues[a]}else{const a=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[c]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(r):r;return o[s]}}const D5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},M5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},B5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},q5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},W5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},U5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},H5=(t,r)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},$5={ordinalNumber:H5,era:Ga({values:D5,defaultWidth:"wide"}),quarter:Ga({values:M5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ga({values:B5,defaultWidth:"wide"}),day:Ga({values:q5,defaultWidth:"wide"}),dayPeriod:Ga({values:W5,defaultWidth:"wide",formattingValues:U5,defaultFormattingWidth:"wide"})};function Va(t){return(r,n={})=>{const i=n.width,o=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],s=r.match(o);if(!s)return null;const a=s[0],c=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?V5(c,x=>x.test(a)):G5(c,x=>x.test(a));let h;h=t.valueCallback?t.valueCallback(u):u,h=n.valueCallback?n.valueCallback(h):h;const p=r.slice(a.length);return{value:h,rest:p}}}function G5(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function V5(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function Y5(t){return(r,n={})=>{const i=r.match(t.matchPattern);if(!i)return null;const o=i[0],s=r.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const c=r.slice(o.length);return{value:a,rest:c}}}const J5=/^(\d+)(th|st|nd|rd)?/i,X5=/\d+/i,K5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Q5={any:[/^b/i,/^(a|c)/i]},Z5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ex={any:[/1/i,/2/i,/3/i,/4/i]},tx={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},rx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nx={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ix={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ox={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ax={ordinalNumber:Y5({matchPattern:J5,parsePattern:X5,valueCallback:t=>parseInt(t,10)}),era:Va({matchPatterns:K5,defaultMatchWidth:"wide",parsePatterns:Q5,defaultParseWidth:"any"}),quarter:Va({matchPatterns:Z5,defaultMatchWidth:"wide",parsePatterns:ex,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Va({matchPatterns:tx,defaultMatchWidth:"wide",parsePatterns:rx,defaultParseWidth:"any"}),day:Va({matchPatterns:nx,defaultMatchWidth:"wide",parsePatterns:ix,defaultParseWidth:"any"}),dayPeriod:Va({matchPatterns:sx,defaultMatchWidth:"any",parsePatterns:ox,defaultParseWidth:"any"})},lx={code:"en-US",formatDistance:O5,formatLong:F5,formatRelative:z5,localize:$5,match:ax,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cx(t,r){const n=Bi(t,r==null?void 0:r.in);return _5(n,P5(n))+1}function dx(t,r){const n=Bi(t,r==null?void 0:r.in),i=+Ec(n)-+k5(n);return Math.round(i/t0)+1}function n0(t,r){var p,x,b,g,_,S,O,k;const n=Bi(t,r==null?void 0:r.in),i=n.getFullYear(),o=td(),s=(k=(O=(g=(b=r==null?void 0:r.firstWeekContainsDate)!=null?b:(x=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)!=null?g:o.firstWeekContainsDate)!=null?O:(S=(_=o.locale)==null?void 0:_.options)==null?void 0:S.firstWeekContainsDate)!=null?k:1,a=Ms((r==null?void 0:r.in)||t,0);a.setFullYear(i+1,0,s),a.setHours(0,0,0,0);const c=sl(a,r),u=Ms((r==null?void 0:r.in)||t,0);u.setFullYear(i,0,s),u.setHours(0,0,0,0);const h=sl(u,r);return+n>=+c?i+1:+n>=+h?i:i-1}function ux(t,r){var c,u,h,p,x,b,g,_;const n=td(),i=(_=(g=(p=(h=r==null?void 0:r.firstWeekContainsDate)!=null?h:(u=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)!=null?p:n.firstWeekContainsDate)!=null?g:(b=(x=n.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)!=null?_:1,o=n0(t,r),s=Ms((r==null?void 0:r.in)||t,0);return s.setFullYear(o,0,i),s.setHours(0,0,0,0),sl(s,r)}function hx(t,r){const n=Bi(t,r==null?void 0:r.in),i=+sl(n,r)-+ux(n,r);return Math.round(i/t0)+1}function xr(t,r){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(r,"0");return n+i}const Os={y(t,r){const n=t.getFullYear(),i=n>0?n:1-n;return xr(r==="yy"?i%100:i,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):xr(n+1,2)},d(t,r){return xr(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return xr(t.getHours()%12||12,r.length)},H(t,r){return xr(t.getHours(),r.length)},m(t,r){return xr(t.getMinutes(),r.length)},s(t,r){return xr(t.getSeconds(),r.length)},S(t,r){const n=r.length,i=t.getMilliseconds(),o=Math.trunc(i*Math.pow(10,n-3));return xr(o,r.length)}},Uo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cf={G:function(t,r,n){const i=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const i=t.getFullYear(),o=i>0?i:1-i;return n.ordinalNumber(o,{unit:"year"})}return Os.y(t,r)},Y:function(t,r,n,i){const o=n0(t,i),s=o>0?o:1-o;if(r==="YY"){const a=s%100;return xr(a,2)}return r==="Yo"?n.ordinalNumber(s,{unit:"year"}):xr(s,r.length)},R:function(t,r){const n=r0(t);return xr(n,r.length)},u:function(t,r){const n=t.getFullYear();return xr(n,r.length)},Q:function(t,r,n){const i=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(i);case"QQ":return xr(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,r,n){const i=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(i);case"qq":return xr(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,r,n){const i=t.getMonth();switch(r){case"M":case"MM":return Os.M(t,r);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,r,n){const i=t.getMonth();switch(r){case"L":return String(i+1);case"LL":return xr(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,r,n,i){const o=hx(t,i);return r==="wo"?n.ordinalNumber(o,{unit:"week"}):xr(o,r.length)},I:function(t,r,n){const i=dx(t);return r==="Io"?n.ordinalNumber(i,{unit:"week"}):xr(i,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Os.d(t,r)},D:function(t,r,n){const i=cx(t);return r==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):xr(i,r.length)},E:function(t,r,n){const i=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,r,n,i){const o=t.getDay(),s=(o-i.weekStartsOn+8)%7||7;switch(r){case"e":return String(s);case"ee":return xr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,r,n,i){const o=t.getDay(),s=(o-i.weekStartsOn+8)%7||7;switch(r){case"c":return String(s);case"cc":return xr(s,r.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,r,n){const i=t.getDay(),o=i===0?7:i;switch(r){case"i":return String(o);case"ii":return xr(o,r.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,r,n){const o=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,r,n){const i=t.getHours();let o;switch(i===12?o=Uo.noon:i===0?o=Uo.midnight:o=i/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,r,n){const i=t.getHours();let o;switch(i>=17?o=Uo.evening:i>=12?o=Uo.afternoon:i>=4?o=Uo.morning:o=Uo.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Os.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Os.H(t,r)},K:function(t,r,n){const i=t.getHours()%12;return r==="Ko"?n.ordinalNumber(i,{unit:"hour"}):xr(i,r.length)},k:function(t,r,n){let i=t.getHours();return i===0&&(i=24),r==="ko"?n.ordinalNumber(i,{unit:"hour"}):xr(i,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Os.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Os.s(t,r)},S:function(t,r){return Os.S(t,r)},X:function(t,r,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(r){case"X":return uf(i);case"XXXX":case"XX":return ro(i);case"XXXXX":case"XXX":default:return ro(i,":")}},x:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"x":return uf(i);case"xxxx":case"xx":return ro(i);case"xxxxx":case"xxx":default:return ro(i,":")}},O:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+df(i,":");case"OOOO":default:return"GMT"+ro(i,":")}},z:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+df(i,":");case"zzzz":default:return"GMT"+ro(i,":")}},t:function(t,r,n){const i=Math.trunc(+t/1e3);return xr(i,r.length)},T:function(t,r,n){return xr(+t,r.length)}};function df(t,r=""){const n=t>0?"-":"+",i=Math.abs(t),o=Math.trunc(i/60),s=i%60;return s===0?n+String(o):n+String(o)+r+xr(s,2)}function uf(t,r){return t%60===0?(t>0?"-":"+")+xr(Math.abs(t)/60,2):ro(t,r)}function ro(t,r=""){const n=t>0?"-":"+",i=Math.abs(t),o=xr(Math.trunc(i/60),2),s=xr(i%60,2);return n+o+r+s}const hf=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},i0=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},fx=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],o=n[2];if(!o)return hf(t,r);let s;switch(i){case"P":s=r.dateTime({width:"short"});break;case"PP":s=r.dateTime({width:"medium"});break;case"PPP":s=r.dateTime({width:"long"});break;case"PPPP":default:s=r.dateTime({width:"full"});break}return s.replace("{{date}}",hf(i,r)).replace("{{time}}",i0(o,r))},px={p:i0,P:fx},gx=/^D+$/,mx=/^Y+$/,xx=["D","DD","YY","YYYY"];function bx(t){return gx.test(t)}function yx(t){return mx.test(t)}function vx(t,r,n){const i=wx(t,r,n);if(console.warn(i),xx.includes(t))throw new RangeError(i)}function wx(t,r,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jx=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Sx=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cx=/^'([^]*?)'?$/,_x=/''/g,kx=/[a-zA-Z]/;function Ax(t,r,n){var p,x,b,g,_,S,O,k,M;const i=td(),o=(p=i.locale)!=null?p:lx,s=(_=(g=i.firstWeekContainsDate)!=null?g:(b=(x=i.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)!=null?_:1,a=(M=(k=i.weekStartsOn)!=null?k:(O=(S=i.locale)==null?void 0:S.options)==null?void 0:O.weekStartsOn)!=null?M:0,c=Bi(t,n==null?void 0:n.in);if(!L5(c))throw new RangeError("Invalid time value");let u=r.match(Sx).map(J=>{const re=J[0];if(re==="p"||re==="P"){const N=px[re];return N(J,o.formatLong)}return J}).join("").match(jx).map(J=>{if(J==="''")return{isToken:!1,value:"'"};const re=J[0];if(re==="'")return{isToken:!1,value:Lx(J)};if(cf[re])return{isToken:!0,value:J};if(re.match(kx))throw new RangeError("Format string contains an unescaped latin alphabet character `"+re+"`");return{isToken:!1,value:J}});o.localize.preprocessor&&(u=o.localize.preprocessor(c,u));const h={firstWeekContainsDate:s,weekStartsOn:a,locale:o};return u.map(J=>{if(!J.isToken)return J.value;const re=J.value;(yx(re)||bx(re))&&vx(re,r,String(t));const N=cf[re[0]];return N(c,re,o.localize,h)}).join("")}function Lx(t){const r=t.match(Cx);return r?r[1].replace(_x,"'"):t}bm.register(ym,vm,wm,jm,Sm,Cm,_m);const Px=()=>{var _e,Fe,Ee,it,Ve,at,Lt,Ct;const t=Jr(),r=Hr(),[n,i]=z.useState(!1),[o,s]=z.useState(!0),[a,c]=z.useState(null),[u,h]=z.useState(null),[p,x]=z.useState(null),[b,g]=z.useState(!1),[_,S]=z.useState(""),[O,k]=z.useState([]),[M,J]=z.useState(!1),[re,N]=z.useState(""),D=localStorage.getItem("role"),[B,U]=z.useState("overview"),{isOpen:R,onOpen:P,onClose:w}=Yr(),[A,T]=z.useState(null),[E,ee]=z.useState("");z.useEffect(()=>{q()},[r]);const Z=ae("white","gray.700"),y=ae("gray.800","white"),se=ae("gray.500","gray.400"),W=be=>{const{name:st,value:Ie}=be.target;c(et=>({...et,[st]:Ie}))},v=be=>{const st=be.target.files[0];if(st){const Ie=new FileReader;Ie.onloadend=()=>{c(et=>({...et,avatar:Ie.result,avatarFile:st}))},Ie.readAsDataURL(st)}},Y=async()=>{try{const be={username:a.username,first_name:a.first_name,last_name:a.last_name,email:a.email,bio:a.bio};_&&(be.password=_),a.avatarFile&&(be.avatarFile=a.avatarFile),await x5(a.id,be),await q(),r({title:"Profile updated",description:"Your profile has been updated successfully.",status:"success",duration:5e3,isClosable:!0}),S(""),i(!1)}catch(be){ds("handleSave",be),r(cs(be,"There was an error updating your profile"))}},C=()=>{n&&!window.confirm("Are you sure you want to leave? Your changes will be lost.")||(n?(i(!1),S(""),q()):t(-1))},q=async()=>{try{s(!0);const be=await m5();c(be.user),x(be.analytics),s(!1)}catch(be){ds("fetchProfileData",be),r(cs(be,"There was an error loading your profile data")),s(!1)}},L=async(be="")=>{var st;try{J(!0);const Ie=await b5(be),et=Ie.data?Ie.data:((st=Ie.data)==null?void 0:st.data)||Ie.users||Ie;k(et),J(!1)}catch(Ie){ds("fetchUsers",Ie),r(cs(Ie,"There was an error loading the users list")),J(!1)}},G=()=>{N(""),L("")},Q=async be=>{try{const st=await y5(be);k(Ie=>Ie.map(et=>et.id===be?{...et,is_active:st.is_active}:et)),r({title:"Updated",description:`User is now ${st.is_active?"active":"inactive"}.`,status:"success",duration:4e3,isClosable:!0})}catch{r({title:"Error",description:"Failed to update user status.",status:"error",duration:4e3,isClosable:!0})}},ie=be=>{T(be),ee(be.primary_role),P()},ce=async()=>{if(!(!A||!E))try{await w5(A.id,E),k(be=>be.map(st=>st.id===A.id?{...st,primary_role:E}:st)),r({title:"Role Updated",description:`${A.username}'s role has been updated to ${E}.`,status:"success",duration:4e3,isClosable:!0}),w()}catch{r({title:"Error",description:"Failed to update user role.",status:"error",duration:4e3,isClosable:!0})}},le=be=>be?be.avatar&&be.avatar.startsWith("data:")?be.avatar:be.avatar_url||null:null,xe=be=>be?`${be.first_name||""} ${be.last_name||""}`.trim():"",we=[{key:"resources_shared",label:"Resources Shared",icon:Un,value:((_e=p==null?void 0:p.resources)==null?void 0:_e.shared)||0},{key:"study_groups_total",label:"Study Groups",icon:ni,value:((Fe=p==null?void 0:p.study_groups)==null?void 0:Fe.total)||0},{key:"events_registered",label:"Events Registered",icon:zn,value:((Ee=p==null?void 0:p.events)==null?void 0:Ee.registered)||0},{key:"events_upcoming",label:"Upcoming Events",icon:fs,value:((it=p==null?void 0:p.events)==null?void 0:it.upcoming)||0}],ze={labels:["Comments Made","Upvotes Given","Upvotes Received"],datasets:[{label:"Contributions",data:[(p==null?void 0:p.contributions.comments_made)||0,(p==null?void 0:p.contributions.upvotes_given)||0,(p==null?void 0:p.contributions.upvotes_received)||0],backgroundColor:["#3498db","#2ecc71","#e74c3c"],borderWidth:1}]},De={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(be){return`${be.label}: ${be.raw}`}}}}},$e={labels:(p==null?void 0:p.charts.top_posting_users.map(be=>be.username))||[],datasets:[{label:"Resources Shared",data:(p==null?void 0:p.charts.top_posting_users.map(be=>be.resources_count))||[],backgroundColor:"#3498db",borderColor:"#2980b9",borderWidth:1}]},ve={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Resources Shared"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Posting Users",font:{size:18}}}},te={labels:(p==null?void 0:p.charts.top_commenting_users.map(be=>be.username))||[],datasets:[{label:"Comments Made",data:(p==null?void 0:p.charts.top_commenting_users.map(be=>be.comments_count))||[],backgroundColor:"#2ecc71",borderColor:"#27ae60",borderWidth:1}]},Ce={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Comments Made"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Commenting Users",font:{size:18}}}},Be={labels:(p==null?void 0:p.charts.top_upvoting_users.map(be=>be.username))||[],datasets:[{label:"Upvotes Given",data:(p==null?void 0:p.charts.top_upvoting_users.map(be=>be.upvotes_given))||[],backgroundColor:"#e74c3c",borderColor:"#c0392b",borderWidth:1}]},Ne={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Upvotes Given"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Upvoting Users",font:{size:18}}}},ue={labels:((Ve=p==null?void 0:p.charts.top_courses)==null?void 0:Ve.map(be=>be.code))||[],datasets:[{label:"Resources Posted",data:((at=p==null?void 0:p.charts.top_courses)==null?void 0:at.map(be=>be.resources_count))||[],backgroundColor:"#f39c12",borderColor:"#d35400",borderWidth:1}]},Je={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Resources Posted"}},y:{title:{display:!0,text:"Course"}}},plugins:{title:{display:!0,text:"Top Courses",font:{size:18}}}},Ke=(be=[],st,Ie)=>{var tt;if(!a)return"";const et=((tt=be[0])==null?void 0:tt[st])||0,Tt=be.find(rt=>rt.username===a.username),Le=Tt?Tt[st]:0,We=et-Le;return We>0?`You're ${We} ${Ie} away from the top spot!`:Le===et&&et!==0?`You're the top ${Ie.toLowerCase()}!`:""},ut=Ke(p==null?void 0:p.charts.top_posting_users,"resources_count","resources"),Ye=Ke(p==null?void 0:p.charts.top_commenting_users,"comments_count","comments"),Se=Ke(p==null?void 0:p.charts.top_upvoting_users,"upvotes_given","upvotes"),Ae=(be=>{const st=[];return be>=5&&st.push({name:"Helpful",color:"bg-green-100 text-green-800"}),be>=10&&st.push({name:"Insightful",color:"bg-blue-100 text-blue-800"}),be>=20&&st.push({name:"Expert",color:"bg-purple-100 text-purple-800"}),st})((p==null?void 0:p.contributions.upvotes_received)||0),Me=be=>{U(be),be==="users"&&(L(re),L())};return o?e.jsx(ke,{height:"100vh",width:"100%",align:"center",justify:"center",children:e.jsx(qr,{size:"xl"})}):e.jsx(ke,{minH:"100vh",p:4,bg:ae("gray.50","gray.800"),justify:"center",children:e.jsx(de,{w:{base:"full",md:"90%",lg:"80%"},children:e.jsxs(rr,{bg:Z,p:0,overflow:"hidden",children:[e.jsxs(de,{position:"relative",h:"180px",mb:"60px",children:[e.jsx(Ir,{src:e0,alt:"Cover Photo",objectFit:"cover",w:"full",h:"full"}),e.jsxs(ke,{position:"absolute",top:4,left:4,right:4,justify:"space-between",zIndex:1,children:[e.jsx(Ut,{icon:e.jsx(Hn,{}),"aria-label":"Go back",onClick:C,bg:ae("white","gray.800"),color:y,_hover:{bg:ae("gray.100","gray.700")},boxShadow:"md",title:"Go back"}),e.jsxs(ke,{gap:2,flexWrap:"wrap",children:[n?e.jsxs(e.Fragment,{children:[e.jsx(Te,{leftIcon:e.jsx(i1,{}),colorScheme:"blue",onClick:Y,boxShadow:"md",children:"Save Changes"}),e.jsx(Te,{variant:"outline",colorScheme:"red",leftIcon:e.jsx(co,{}),onClick:()=>{u&&c(u),i(!1),S("")},children:"Cancel"})]}):e.jsx(Te,{leftIcon:e.jsx(la,{}),colorScheme:"blue",onClick:()=>{h(a),i(!0)},boxShadow:"md",children:"Edit Profile"}),e.jsx(Te,{leftIcon:e.jsx(Pc,{}),variant:"solid",bg:ae("white","gray.800"),color:y,_hover:{bg:ae("gray.100","gray.700")},boxShadow:"md",onClick:()=>{ed(),t("/login")},children:"Logout"})]})]}),n?e.jsx(de,{position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},cursor:"pointer",children:e.jsxs("label",{htmlFor:"avatar-upload",style:{cursor:"pointer"},children:[e.jsx(Fr,{size:"xl",src:le(a),name:xe(a),boxShadow:"lg",border:"4px solid",borderColor:ae("white","gray.800"),_hover:{opacity:.8,boxShadow:"xl"}}),e.jsx(de,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"rgba(0,0,0,0.3)",color:"white",borderRadius:"full",p:2,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(c1,{})}),e.jsx("input",{type:"file",id:"avatar-upload",name:"avatar",accept:"image/jpeg,image/png,image/gif",style:{display:"none"},onChange:v})]})}):e.jsx(Fr,{size:"xl",src:le(a),name:xe(a),position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},boxShadow:"lg",border:"4px solid",borderColor:ae("white","gray.800")})]}),e.jsx(de,{px:{base:4,md:6},children:e.jsxs(ke,{justify:{base:"center",md:"flex-start"},align:"center",mb:6,mt:{base:5,md:0},children:[e.jsx(ft,{size:{base:"lg",md:"xl"},color:y,textAlign:{base:"center",md:"left"},children:!n&&xe(a)}),e.jsx(zr,{ml:3,fontSize:"0.8em",colorScheme:(a==null?void 0:a.primary_role)==="moderator"?"purple":(a==null?void 0:a.primary_role)==="admin"?"red":"blue",textTransform:"capitalize",children:(a==null?void 0:a.primary_role)||"Student"})]})}),e.jsxs(de,{mx:{base:2,md:6},mt:{base:0,md:6},children:[e.jsxs(dt,{spacing:0,mb:8,borderBottom:"1px solid",borderColor:"gray.200",justify:"center",children:[e.jsx(Te,{variant:B==="overview"?"solid":"ghost",borderRadius:0,borderBottom:B==="overview"?"2px solid":"none",borderColor:"blue.500",color:B==="overview"?"blue.500":"gray.500",onClick:()=>Me("overview"),px:6,py:4,fontWeight:"medium",textTransform:"capitalize",children:"Overview"}),e.jsx(Te,{variant:B==="activity"?"solid":"ghost",borderRadius:0,borderBottom:B==="activity"?"2px solid":"none",borderColor:"blue.500",color:B==="activity"?"blue.500":"gray.500",onClick:()=>Me("activity"),px:6,py:4,fontWeight:"medium",textTransform:"capitalize",children:"Activity"}),D==="admin"&&e.jsx(Te,{variant:B==="analytics"?"solid":"ghost",borderRadius:0,borderBottom:B==="analytics"?"2px solid":"none",borderColor:"blue.500",color:B==="analytics"?"blue.500":"gray.500",onClick:()=>Me("analytics"),px:6,py:4,fontWeight:"medium",textTransform:"capitalize",children:"Analytics"}),D==="admin"&&e.jsx(Te,{variant:B==="users"?"solid":"ghost",borderRadius:0,borderBottom:B==="users"?"2px solid":"none",borderColor:"blue.500",color:B==="users"?"blue.500":"gray.500",onClick:()=>Me("users"),px:6,py:4,fontWeight:"medium",textTransform:"capitalize",children:"Users"})]}),B==="overview"&&e.jsxs(ot,{spacing:8,align:"stretch",children:[e.jsxs(rr,{p:6,shadow:"md",bg:Z,children:[e.jsx(ft,{size:"md",mb:4,color:y,children:"Personal Information"}),n?e.jsxs(br,{spacing:4,children:[e.jsxs(mt,{children:[e.jsx(xt,{children:"First Name"}),e.jsx(Ft,{name:"first_name",value:(a==null?void 0:a.first_name)||"",onChange:W})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Last Name"}),e.jsx(Ft,{name:"last_name",value:(a==null?void 0:a.last_name)||"",onChange:W})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Email"}),e.jsx(Ft,{name:"email",value:(a==null?void 0:a.email)||"",onChange:W})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Username"}),e.jsx(Ft,{name:"username",value:(a==null?void 0:a.username)||"",onChange:W})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Bio"}),e.jsx(ri,{name:"bio",value:(a==null?void 0:a.bio)||"",onChange:W,rows:3})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Password (leave blank to keep current)"}),e.jsxs(Er,{children:[e.jsx(Ft,{type:b?"text":"password",value:_,onChange:be=>S(be.target.value),placeholder:"Enter new password"}),e.jsx(Cc,{children:e.jsx(Ut,{h:"1.75rem",size:"sm",onClick:()=>g(!b),icon:b?e.jsx(Hm,{}):e.jsx($m,{}),"aria-label":b?"Hide password":"Show password"})})]})]})]}):e.jsxs(fr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(de,{children:[e.jsx($,{fontWeight:"bold",color:se,children:"First Name"}),e.jsx($,{color:y,children:(a==null?void 0:a.first_name)||"-"})]}),e.jsxs(de,{children:[e.jsx($,{fontWeight:"bold",color:se,children:"Last Name"}),e.jsx($,{color:y,children:(a==null?void 0:a.last_name)||"-"})]}),e.jsxs(de,{children:[e.jsx($,{fontWeight:"bold",color:se,children:"Email"}),e.jsx($,{color:y,children:(a==null?void 0:a.email)||"-"})]}),e.jsxs(de,{children:[e.jsx($,{fontWeight:"bold",color:se,children:"Username"}),e.jsx($,{color:y,children:(a==null?void 0:a.username)||"-"})]}),e.jsxs(de,{gridColumn:{md:"span 2"},children:[e.jsx($,{fontWeight:"bold",color:se,children:"Bio"}),e.jsx($,{color:y,children:(a==null?void 0:a.bio)||"No bio provided."})]})]})]}),e.jsxs(rr,{p:6,shadow:"md",bg:Z,children:[e.jsx(ft,{size:"md",mb:4,color:y,children:"Academic Information"}),e.jsxs(fr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(de,{children:[e.jsx($,{fontWeight:"bold",color:se,children:"Faculty"}),e.jsx($,{color:y,children:((Lt=a==null?void 0:a.faculty)==null?void 0:Lt.name)||"Not specified"})]}),e.jsxs(de,{children:[e.jsx($,{fontWeight:"bold",color:se,children:"Major"}),e.jsx($,{color:y,children:((Ct=a==null?void 0:a.major)==null?void 0:Ct.name)||"Not specified"})]})]})]}),e.jsx(Zn,{columns:{base:1,sm:2,lg:4},spacing:4,children:we.map(be=>e.jsx(rr,{p:4,shadow:"sm",bg:Z,borderLeft:"4px solid",borderColor:"blue.500",children:e.jsxs(ke,{align:"center",children:[e.jsx(ht,{as:be.icon,boxSize:6,color:"blue.500",mr:3}),e.jsxs(de,{children:[e.jsx($,{fontSize:"sm",color:se,children:be.label}),e.jsx($,{fontSize:"2xl",fontWeight:"bold",color:y,children:be.value})]})]})},be.key))}),e.jsxs(rr,{p:6,shadow:"md",bg:Z,children:[e.jsx(ft,{size:"md",mb:4,color:y,children:"Contribution Mix"}),e.jsx(de,{h:"300px",w:"100%",maxW:"500px",mx:"auto",children:e.jsx(km,{data:ze,options:De})})]}),Ae.length>0&&e.jsxs(rr,{p:6,shadow:"md",bg:Z,children:[e.jsx(ft,{size:"md",mb:4,color:y,children:"Achievements"}),e.jsx(ke,{flexWrap:"wrap",gap:2,children:Ae.map((be,st)=>e.jsx(zr,{px:3,py:1,borderRadius:"full",fontSize:"sm",fontWeight:"medium",colorScheme:be.color.split("-")[1],children:be.name},st))})]}),e.jsxs(rr,{p:6,shadow:"md",bgGradient:ae("linear(to-r, blue.50, indigo.50)","linear(to-r, blue.900, indigo.900)"),children:[e.jsx(ft,{size:"md",mb:4,color:y,children:"Community Standing"}),e.jsxs(ot,{align:"start",spacing:2,children:[ut&&e.jsx($,{color:ae("blue.700","blue.200"),fontWeight:"medium",children:ut}),Ye&&e.jsx($,{color:ae("blue.700","blue.200"),fontWeight:"medium",children:Ye}),Se&&e.jsx($,{color:ae("blue.700","blue.200"),fontWeight:"medium",children:Se})]})]})]}),B==="users"&&D==="admin"&&e.jsx(ot,{spacing:8,align:"stretch",children:e.jsxs(rr,{p:6,shadow:"md",bg:Z,children:[e.jsx(ft,{size:"md",mb:4,color:y,children:"User Management"}),e.jsxs(Er,{mb:4,maxW:"400px",children:[e.jsx(Ft,{placeholder:"Search users...",value:re,onChange:be=>N(be.target.value),bg:ae("white","gray.700")}),e.jsxs(Cc,{width:"7rem",display:"flex",justifyContent:"flex-end",alignItems:"center",children:[re&&e.jsx(Ut,{"aria-label":"Clear",icon:e.jsx(co,{}),size:"sm",mr:2,onClick:G}),e.jsx(Te,{h:"100%",size:"sm",onClick:()=>L(re),children:"Search"})]})]}),M?e.jsx(ke,{justify:"center",children:e.jsx(qr,{})}):e.jsxs(Mg,{variant:"simple",children:[e.jsx(Bg,{children:e.jsxs(Fh,{children:[e.jsx(Bo,{children:"Username"}),e.jsx(Bo,{children:"Name"}),e.jsx(Bo,{children:"Email"}),e.jsx(Bo,{children:"Role"}),e.jsx(Bo,{children:"Status"}),e.jsx(Bo,{children:"Action"})]})}),e.jsx(qg,{children:O.map(be=>e.jsxs(Fh,{children:[e.jsx(qo,{children:be.username}),e.jsx(qo,{children:`${be.first_name} ${be.last_name}`}),e.jsx(qo,{children:be.email}),e.jsx(qo,{textTransform:"capitalize",children:be.primary_role}),e.jsx(qo,{children:be.is_active?"Active":"Inactive"}),e.jsx(qo,{children:e.jsxs(un,{children:[e.jsx(hn,{as:Ut,icon:e.jsx(nl,{}),variant:"ghost",size:"sm","aria-label":"Options"}),e.jsxs(fn,{children:[e.jsx(Zt,{icon:e.jsx(d1,{}),onClick:()=>ie(be),children:"Update Role"}),e.jsx(Wg,{}),e.jsx(Zt,{color:be.is_active?"red.500":"green.500",onClick:()=>Q(be.id),children:be.is_active?"Deactivate User":"Activate User"})]})]})})]},be.id))})]})]})}),B==="activity"&&e.jsx(ot,{spacing:8,align:"stretch",children:e.jsxs(rr,{p:6,shadow:"md",bg:Z,children:[e.jsx(ft,{size:"md",mb:4,color:y,children:"Recent Activity"}),e.jsxs(de,{position:"relative",children:[e.jsx(de,{position:"absolute",left:"50%",transform:"translateX(-50%)",h:"100%",w:"2px",bg:"gray.200"}),p!=null&&p.activity&&p.activity.length>0?p.activity.map((be,st)=>{const Ie=st%2===0,et=be.type==="event_registration"?zn:be.type==="study_group_join"?ni:Im,Tt=be.type==="event_registration"?"blue":be.type==="study_group_join"?"green":"purple";return e.jsxs(ke,{mb:8,justify:"space-between",align:"center",w:"100%",direction:Ie?"row-reverse":"row",children:[e.jsx(de,{w:"45%",textAlign:"center",p:3,borderRadius:"lg",children:e.jsx($,{fontWeight:"medium",color:y,children:Ax(new Date(be.date),"MMM d, yyyy HH:mm")})}),e.jsx(de,{position:"absolute",left:"50%",transform:"translateX(-50%)",w:10,h:10,borderRadius:"full",zIndex:10,bg:`${Tt}.100`,color:`${Tt}.600`,display:"flex",alignItems:"center",justifyContent:"center",shadow:"lg",border:"4px solid white",children:e.jsx(ht,{as:et})}),e.jsxs(de,{w:"45%",bg:Z,p:3,borderRadius:"lg",shadow:"sm",border:"1px solid",borderColor:"gray.100",children:[e.jsx($,{fontWeight:"medium",color:y,textTransform:"capitalize",children:be.type==="event_registration"?"Event Registration":be.type==="study_group_join"?"Joined Study Group":"Task Completed"}),e.jsx($,{fontSize:"sm",color:se,children:be.type==="event_registration"?"Registered for an event":be.type==="study_group_join"?`Joined: ${be.data.group_name}`:"Completed a task"})]})]},st)}):e.jsx($,{color:se,textAlign:"center",py:4,children:"No recent activity to display."})]})]})}),B==="analytics"&&D==="admin"&&e.jsx(ot,{spacing:8,align:"stretch",children:e.jsx(Zn,{columns:{base:1,md:2},spacing:6,children:e.jsxs(rr,{p:6,shadow:"md",bg:Z,gridColumn:{lg:D==="admin"?"span 4":"span 3"},children:[e.jsx(ft,{size:"md",mb:4,color:y,children:"Community Leaderboards"}),e.jsx($,{color:se,mb:4,children:"Track your standing in the community based on your contributions."}),e.jsxs(Zn,{columns:{base:1,md:2},spacing:6,children:[e.jsxs(rr,{p:4,shadow:"sm",bg:Z,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ft,{size:"sm",mb:2,color:y,children:"Top Posters"}),e.jsx(de,{h:"400px",w:"100%",children:e.jsx(nc,{data:$e,options:ve})})]}),e.jsxs(rr,{p:4,shadow:"sm",bg:Z,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ft,{size:"sm",mb:2,color:y,children:"Top Commenters"}),e.jsx(de,{h:"400px",w:"100%",children:e.jsx(nc,{data:te,options:Ce})})]}),e.jsxs(rr,{p:4,shadow:"sm",bg:Z,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ft,{size:"sm",mb:2,color:y,children:"Top Upvoters"}),e.jsx(de,{h:"400px",w:"100%",children:e.jsx(nc,{data:Be,options:Ne})})]}),D==="admin"&&e.jsxs(rr,{p:4,shadow:"sm",bg:Z,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ft,{size:"sm",mb:2,color:y,children:"Top Courses"}),e.jsx(de,{h:"400px",w:"100%",children:e.jsx(nc,{data:ue,options:Je})})]})]})]})})}),e.jsxs(wn,{isOpen:R,onClose:w,children:[e.jsx(Wr,{}),e.jsxs(jn,{children:[e.jsx(rn,{children:"Update User Role"}),e.jsx(cn,{}),e.jsx(Ur,{children:A&&e.jsxs(e.Fragment,{children:[e.jsxs($,{mb:4,children:["Update role for ",e.jsx("strong",{children:A.username})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Select Role"}),e.jsxs(zi,{value:E,onChange:be=>ee(be.target.value),children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]})}),e.jsxs(dn,{children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:w,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",onClick:ce,children:"Update Role"})]})]})]})]})]})})})},Nx="https://via.placeholder.com/150";lr(de);const Ox=()=>{const t=Jr(),{userId:r}=Wc(),[n,i]=z.useState(!0),[o,s]=z.useState(null),a=ae("white","gray.700"),c=ae("gray.800","white"),u=ae("gray.500","gray.400");ae("gray.50","gray.900"),ae("gray.200","gray.700"),z.useEffect(()=>{(async()=>{var b,g;i(!0);try{const _=await v5(r||"me"),S={id:_.id,name:`${_.first_name||""} ${_.last_name||""}`.trim()||_.username,username:_.username,email:_.email,bio:_.bio,major:((b=_.major)==null?void 0:b.name)||"N/A",faculty:((g=_.faculty)==null?void 0:g.name)||"N/A",roles:(_.roles||[]).map(O=>typeof O=="string"?O:O.name),verified:_.is_admin||_.is_moderator,avatar:_.avatar?`${ps}/storage/avatars/${_.avatar}`:Nx,joinDate:_.created_at};s(S)}catch(_){console.error("Failed to load visitor profile",_),s(null)}finally{i(!1)}})()},[r]);const h=()=>t(-1);if(n)return e.jsx(ke,{height:"100vh",width:"100%",align:"center",justify:"center",children:e.jsx(qr,{size:"xl",thickness:"4px",color:"blue.500"})});if(!o)return e.jsxs(Ai,{maxW:"container.xl",py:8,textAlign:"center",children:[e.jsx(ft,{children:"User Not Found"}),e.jsx($,{children:"The user profile you are looking for does not exist."}),e.jsx(Ut,{icon:e.jsx(Hn,{}),onClick:h,"aria-label":"Go back",mt:4})]});const p=({icon:x,title:b,value:g})=>e.jsxs(dt,{spacing:4,p:4,bg:ae("gray.50","gray.800"),borderRadius:"lg",w:"full",children:[e.jsx(de,{as:x,color:"blue.500",boxSize:6}),e.jsxs(ot,{align:"start",spacing:0,children:[e.jsx($,{fontSize:"sm",color:u,children:b}),e.jsx($,{fontWeight:"medium",color:c,children:g})]})]});return e.jsx(ke,{minH:"100vh",p:4,bg:ae("gray.50","gray.800"),justify:"center",children:e.jsx(de,{w:{base:"full",md:"90%",lg:"80%"},children:e.jsxs(rr,{bg:a,p:0,overflow:"hidden",children:[e.jsxs(de,{position:"relative",h:"180px",mb:"60px",children:[e.jsx(Ir,{src:e0,alt:"Cover Photo",objectFit:"cover",w:"full",h:"full"}),e.jsx(ke,{position:"absolute",top:4,left:4,right:4,justify:"space-between",zIndex:1,children:e.jsx(Ut,{icon:e.jsx(Hn,{}),"aria-label":"Go back",onClick:h,bg:ae("white","gray.800"),color:c,_hover:{bg:ae("gray.100","gray.700")},boxShadow:"md",title:"Go back"})}),e.jsx(Fr,{size:"xl",src:o.avatar,name:o.name,position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},boxShadow:"lg",border:"4px solid",borderColor:ae("white","gray.800")})]}),e.jsxs(de,{px:{base:4,md:6},children:[e.jsxs(ke,{justify:{base:"center",md:"flex-start"},align:"center",mb:6,mt:{base:5,md:0},children:[e.jsxs(ft,{size:{base:"lg",md:"xl"},color:c,textAlign:{base:"center",md:"left"},children:[o.name,o.verified&&e.jsx(Sc,{size:"24px",bg:"blue.500",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",ml:2,verticalAlign:"middle",children:e.jsx(Di,{size:"16px"})})]}),e.jsxs($,{color:u,fontSize:"md",ml:3,children:["@",o.username]})]}),e.jsx(ke,{mb:4,flexWrap:"wrap",gap:2,justify:{base:"center",md:"flex-start"},children:o.roles.map(x=>e.jsx(zr,{colorScheme:x==="moderator"?"purple":x==="admin"?"red":"blue",textTransform:"capitalize",children:x},x))}),o.email&&e.jsx(p,{icon:Xu,title:"Email",value:o.email})]}),e.jsxs(de,{p:6,borderTop:"1px solid",borderColor:ae("gray.100","gray.700"),children:[e.jsx(ft,{size:"md",mb:4,children:"About"}),e.jsx($,{color:c,children:o.bio||"No bio available."})]}),e.jsxs(Zn,{columns:{base:1,md:3},spacing:{base:3,md:6},p:6,bg:a,borderTop:"1px solid",borderColor:ae("gray.100","gray.700"),children:[e.jsxs(ot,{spacing:1,alignItems:"flex-start",children:[e.jsxs(dt,{children:[e.jsx(ht,{as:Dm,color:"blue.500"}),e.jsx($,{fontSize:"sm",color:u,children:"Major"})]}),e.jsx($,{fontWeight:"bold",fontSize:"md",children:o.major})]}),e.jsxs(ot,{spacing:1,alignItems:"flex-start",children:[e.jsxs(dt,{children:[e.jsx(ht,{as:zs,color:"blue.500"}),e.jsx($,{fontSize:"sm",color:u,children:"Faculty"})]}),e.jsx($,{fontWeight:"bold",fontSize:"md",children:o.faculty})]}),e.jsxs(ot,{spacing:1,alignItems:"flex-start",children:[e.jsxs(dt,{children:[e.jsx(ht,{as:zn,color:"blue.500"}),e.jsx($,{fontSize:"sm",color:u,children:"Joined"})]}),e.jsx($,{fontWeight:"bold",fontSize:"md",children:new Date(o.joinDate).toLocaleDateString()})]})]})]})})})},ff={whatsapp:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32px" height="32px"><path fill="#fff" d="M4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98c-0.001,0,0,0,0,0h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303z"/><path fill="#fff" d="M4.868,43.803c-0.132,0-0.26-0.052-0.355-0.148c-0.125-0.127-0.174-0.312-0.127-0.483l2.639-9.636c-1.636-2.906-2.499-6.206-2.497-9.556C4.532,13.238,13.273,4.5,24.014,4.5c5.21,0.002,10.105,2.031,13.784,5.713c3.679,3.683,5.704,8.577,5.702,13.781c-0.004,10.741-8.746,19.48-19.486,19.48c-3.189-0.001-6.344-0.788-9.144-2.277l-9.875,2.589C4.953,43.798,4.911,43.803,4.868,43.803z"/><path fill="#cfd8dc" d="M24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,4C24.014,4,24.014,4,24.014,4C12.998,4,4.032,12.962,4.027,23.979c-0.001,3.367,0.849,6.685,2.461,9.622l-2.585,9.439c-0.094,0.345,0.002,0.713,0.254,0.967c0.19,0.192,0.447,0.297,0.711,0.297c0.085,0,0.17-0.011,0.254-0.033l9.687-2.54c2.828,1.468,5.998,2.243,9.197,2.244c11.024,0,19.99-8.963,19.995-19.98c0.002-5.339-2.075-10.359-5.848-14.135C34.378,6.083,29.357,4.002,24.014,4L24.014,4z"/><path fill="#40c351" d="M35.176,12.832c-2.98-2.982-6.941-4.625-11.157-4.626c-8.704,0-15.783,7.076-15.787,15.774c-0.001,2.981,0.833,5.883,2.413,8.396l0.376,0.597l-1.595,5.821l5.973-1.566l0.577,0.342c2.422,1.438,5.2,2.198,8.032,2.199h0.006c8.698,0,15.777-7.077,15.78-15.776C39.795,19.778,38.156,15.814,35.176,12.832z"/><path fill="#fff" fill-rule="evenodd" d="M19.268,16.045c-0.355-0.79-0.729-0.806-1.068-0.82c-0.277-0.012-0.593-0.011-0.909-0.011c-0.316,0-0.83,0.119-1.265,0.594c-0.435,0.475-1.661,1.622-1.661,3.956c0,2.334,1.7,4.59,1.937,4.906c0.237,0.316,3.282,5.259,8.104,7.161c4.007,1.58,4.823,1.266,5.693,1.187c0.87-0.079,2.807-1.147,3.202-2.255c0.395-1.108,0.395-2.057,0.277-2.255c-0.119-0.198-0.435-0.316-0.909-0.554s-2.807-1.385-3.242-1.543c-0.435-0.158-0.751-0.237-1.068,0.238c-0.316,0.474-1.225,1.543-1.502,1.859c-0.277,0.317-0.554,0.357-1.028,0.119c-0.474-0.238-2.002-0.738-3.815-2.354c-1.41-1.257-2.362-2.81-2.639-3.285c-0.277-0.474-0.03-0.731,0.208-0.968c0.213-0.213,0.474-0.554,0.712-0.831c0.237-0.277,0.316-0.475,0.474-0.791c0.158-0.317,0.079-0.594-0.04-0.831C20.612,19.329,19.69,16.983,19.268,16.045z" clip-rule="evenodd"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32px" height="32px"><path fill="#90CAF9" d="M40 45H16c-1.1 0-2-.9-2-2V13c0-1.1.9-2 2-2h24c1.1 0 2 .9 2 2v30c0 1.1-.9 2-2 2z"/><path fill="#E1F5FE" d="M38 17H18v24h20V17z"/><path fill="#1976D2" d="M25 13h-9V5c0-1.1.9-2 2-2h24c1.1 0 2 .9 2 2v30c0 1.1-.9 2-2 2h-8v-9c0-2.2-1.8-4-4-4h-5v-5c0-2.2-1.8-4-4-4z"/><path fill="#E1F5FE" d="M34 9H20v4h14V9zm0 7H20v14h14V16z"/></svg>'},ma=()=>localStorage.getItem("authToken"),s0=async(t={})=>{var r;try{const n={...t};if(!n.faculty_id||!n.major_id){const o=JSON.parse(localStorage.getItem("user")||"{}");n.faculty_id||(n.faculty_id=o.faculty_id||localStorage.getItem("faculty_id")),n.major_id||(n.major_id=o.major_id||localStorage.getItem("major_id"))}const i=await gt.get("/resources",{params:n});if(Array.isArray(i.data))return i.data;if(i.data&&Array.isArray(i.data.data)){const o=i.data.data;return o.pagination=i.data.pagination||null,o}return[]}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch resources"}}},mc=async t=>{var r;try{const n=await gt.get(`/resources/${t}`);return console.log("Resource fetched successfully:",n.data),n.data}catch(n){throw console.error("Error fetching resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch resource"}}},o0=async({title:t,description:r,attachments:n,course_id:i,major_id:o,faculty_id:s,type:a,poll:c})=>{var u;try{const h=new FormData;if(t&&h.append("title",t),r&&h.append("description",r),i&&h.append("course_id",i),o&&h.append("major_id",o),s&&h.append("faculty_id",s),a&&h.append("type",a),n&&n.length)for(let x=0;x<n.length;x++)h.append("attachments[]",n[x]);c&&c.question&&c.options&&c.options.length>0&&(h.append("poll[question]",c.question),c.options.forEach(x=>{const b=typeof x=="string"?x.trim():"";b&&h.append("poll[options][]",b)}),console.log("Poll data added to FormData for creation:",c));const p=await gt.post("/resources",h,{headers:{"Content-Type":"multipart/form-data"}});return p.data.resource||p.data}catch(h){throw((u=h.response)==null?void 0:u.data)||{message:"Failed to create resource"}}},a0=async(t,{title:r,description:n,newAttachments:i,removeAttachmentIds:o})=>{var s,a;try{console.log("Updating resource with ID:",t);const c=new FormData;if(c.append("_method","PUT"),r!==void 0&&(console.log("Setting title:",r),c.append("title",r)),n!==void 0&&(console.log("Setting description:",n),c.append("description",n)),i&&i.length){console.log(`Adding ${i.length} new attachment(s)`);for(let h=0;h<i.length;h++)c.append("attachments[]",i[h]),console.log(`Added attachment: ${i[h].name}`)}if(o){const h=Array.isArray(o)?o:[o];h.length&&(console.log(`Removing ${h.length} attachment(s)`),h.forEach(p=>{p&&(console.log(`Marking attachment for removal: ${p}`),c.append("remove_attachments[]",p.toString()))}))}const u=await gt.post(`/resources/${t}`,c);return console.log("Resource updated successfully:",u.data),u.data.resource||u.data}catch(c){throw console.error("Error updating resource:",c),console.error("Error details:",((s=c.response)==null?void 0:s.data)||"Unknown error"),((a=c.response)==null?void 0:a.data)||{message:"Failed to update resource"}}},nh=async t=>{try{return(await gt.post(`/resources/${t}/toggle-upvote`,{},{headers:{Authorization:`Bearer ${ma()}`}})).data}catch(r){throw console.error("Error toggling upvote:",r),r}},l0=async(t,r)=>{try{return(await gt.post(`/resources/${t}/comments`,{body:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${ma()}`}})).data}catch(n){throw console.error("Error adding comment:",n),n}},c0=async(t,r)=>{try{return(await gt.put(`/comments/${t}`,{body:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${ma()}`}})).data}catch(n){throw console.error("Error updating comment:",n),n}},d0=async t=>{try{return(await gt.delete(`/comments/${t}`,{headers:{Authorization:`Bearer ${ma()}`}})).data}catch(r){throw console.error("Error deleting comment:",r),r}},ih=async t=>{var r;try{return(await gt.post(`/poll-options/${t}/vote`,{},{headers:{Authorization:`Bearer ${ma()}`}})).data}catch(n){throw console.error("Error voting poll option:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to record vote"}}},u0=async t=>{try{return(await gt.post(`/comments/${t}/toggle-upvote`,{},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${ma()}`}})).data}catch(r){throw console.error("Error toggling comment upvote:",r),r}},h0=async t=>{var r;try{return(await gt.delete(`/resources/${t}`)).data}catch(n){throw console.error("Error deleting resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to delete resource"}}},rd=async t=>{var r;try{return(await gt.post(`/resources/${t}/toggleSave`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to save resource"}}},f0=async(t={})=>{var r;try{return(await gt.get("/saved-items",{params:t})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch saved items"}}},p0=async t=>{var r;try{return(await gt.get("/top-contributors",{params:{limit:t}})).data}catch(n){throw console.error("Error fetching top contributors:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch top contributors"}}},g0=async(t,r=null)=>{var n;try{const i={};return r&&(i.attachment_id=r),(await gt.get(`/resources/${t}/generate-quiz`,{params:i})).data}catch(i){throw console.error("Error initiating quiz generation:",i),((n=i.response)==null?void 0:n.data)||{message:"Failed to initiate quiz generation"}}},m0=async(t,r=null)=>{var n;try{const i={};return r&&(i.attachment_id=r),(await gt.get(`/resources/${t}/generate-summary`,{params:i})).data}catch(i){throw console.error("Error initiating summary generation:",i),((n=i.response)==null?void 0:n.data)||{message:"Failed to initiate summary generation"}}},Iu=async t=>{var r;try{return(await gt.get(`/ai/job/${t}/status`)).data}catch(n){throw console.error("Error polling AI job status:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to check generation status"}}},x0=async(t={})=>{var r;try{return(await gt.get("/admin/resources/pending",{params:t})).data}catch(n){throw console.error("Error fetching pending resources:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch pending resources"}}},b0=async t=>{var r;try{return(await gt.post(`/admin/resources/${t}/approve`)).data}catch(n){throw console.error("Error approving resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to approve resource"}}},y0=async(t,r)=>{var n;try{const i=r?{reason:r.trim()}:{};return(await gt.post(`/admin/resources/${t}/reject`,i)).data}catch(i){throw console.error("Error rejecting resource:",i),((n=i.response)==null?void 0:n.data)||{message:"Failed to reject resource"}}},Rx=Object.freeze(Object.defineProperty({__proto__:null,addComment:l0,approveResource:b0,createResource:o0,deleteComment:d0,deleteResource:h0,generateQuiz:g0,generateSummary:m0,getAllResources:s0,getPendingResources:x0,getResourceById:mc,getSavedItems:f0,getTopContributors:p0,pollAIJobStatus:Iu,rejectResource:y0,toggleCommentUpvote:u0,toggleSaveResource:rd,toggleUpvote:nh,updateComment:c0,updateResource:a0,votePollOption:ih},Symbol.toStringTag,{value:"Module"}));var eu={},tu={},Ya={},ru={},pf;function Ex(){return pf||(pf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};t.default=r}(ru)),ru}var nu,gf;function Tx(){if(gf)return nu;gf=1;var t="Expected a function",r=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,c=parseInt,u=typeof rc=="object"&&rc&&rc.Object===Object&&rc,h=typeof self=="object"&&self&&self.Object===Object&&self,p=u||h||Function("return this")(),x=Object.prototype,b=x.toString,g=Math.max,_=Math.min,S=function(){return p.Date.now()};function O(N,D,B){var U,R,P,w,A,T,E=0,ee=!1,Z=!1,y=!0;if(typeof N!="function")throw new TypeError(t);D=re(D)||0,k(B)&&(ee=!!B.leading,Z="maxWait"in B,P=Z?g(re(B.maxWait)||0,D):P,y="trailing"in B?!!B.trailing:y);function se(ie){var ce=U,le=R;return U=R=void 0,E=ie,w=N.apply(le,ce),w}function W(ie){return E=ie,A=setTimeout(C,D),ee?se(ie):w}function v(ie){var ce=ie-T,le=ie-E,xe=D-ce;return Z?_(xe,P-le):xe}function Y(ie){var ce=ie-T,le=ie-E;return T===void 0||ce>=D||ce<0||Z&&le>=P}function C(){var ie=S();if(Y(ie))return q(ie);A=setTimeout(C,v(ie))}function q(ie){return A=void 0,y&&U?se(ie):(U=R=void 0,w)}function L(){A!==void 0&&clearTimeout(A),E=0,U=T=R=A=void 0}function G(){return A===void 0?w:q(S())}function Q(){var ie=S(),ce=Y(ie);if(U=arguments,R=this,T=ie,ce){if(A===void 0)return W(T);if(Z)return A=setTimeout(C,D),se(T)}return A===void 0&&(A=setTimeout(C,D)),w}return Q.cancel=L,Q.flush=G,Q}function k(N){var D=typeof N;return!!N&&(D=="object"||D=="function")}function M(N){return!!N&&typeof N=="object"}function J(N){return typeof N=="symbol"||M(N)&&b.call(N)==n}function re(N){if(typeof N=="number")return N;if(J(N))return r;if(k(N)){var D=typeof N.valueOf=="function"?N.valueOf():N;N=k(D)?D+"":D}if(typeof N!="string")return N===0?N:+N;N=N.replace(i,"");var B=s.test(N);return B||a.test(N)?c(N.slice(2),B?2:8):o.test(N)?r:+N}return nu=O,nu}var iu={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var mf;function nd(){return mf||(mf=1,function(t){(function(){var r={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(s=o(s,i(c)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var c in s)r.call(s,c)&&s[c]&&(a=o(a,c));return a}function o(s,a){return a?s?s+" "+a:s+a:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(iu)),iu.exports}var _t={},su={},xf;function v0(){return xf||(xf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(go());function n(o){return o&&o.__esModule?o:{default:o}}var i={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(s){return r.default.createElement("ul",{style:{display:"block"}},s)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(s){return r.default.createElement("button",null,s+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null,unslick:!1};t.default=i}(su)),su}var bf;function fl(){if(bf)return _t;bf=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.checkSpecKeys=_t.checkNavigable=_t.changeSlide=_t.canUseDOM=_t.canGoNext=void 0,_t.clamp=h,_t.extractObject=void 0,_t.filterSettings=se,_t.validSettings=_t.swipeStart=_t.swipeMove=_t.swipeEnd=_t.slidesOnRight=_t.slidesOnLeft=_t.slideHandler=_t.siblingDirection=_t.safePreventDefault=_t.lazyStartIndex=_t.lazySlidesOnRight=_t.lazySlidesOnLeft=_t.lazyEndIndex=_t.keyHandler=_t.initializedState=_t.getWidth=_t.getTrackLeft=_t.getTrackCSS=_t.getTrackAnimateCSS=_t.getTotalSlides=_t.getSwipeDirection=_t.getSlideCount=_t.getRequiredLazySlides=_t.getPreClones=_t.getPostClones=_t.getOnDemandLazySlides=_t.getNavigableIndexes=_t.getHeight=void 0;var t=n(go()),r=n(v0());function n(W){return W&&W.__esModule?W:{default:W}}function i(W){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},i(W)}function o(W,v){var Y=Object.keys(W);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(W);v&&(C=C.filter(function(q){return Object.getOwnPropertyDescriptor(W,q).enumerable})),Y.push.apply(Y,C)}return Y}function s(W){for(var v=1;v<arguments.length;v++){var Y=arguments[v]!=null?arguments[v]:{};v%2?o(Object(Y),!0).forEach(function(C){a(W,C,Y[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Y)):o(Object(Y)).forEach(function(C){Object.defineProperty(W,C,Object.getOwnPropertyDescriptor(Y,C))})}return W}function a(W,v,Y){return v=c(v),v in W?Object.defineProperty(W,v,{value:Y,enumerable:!0,configurable:!0,writable:!0}):W[v]=Y,W}function c(W){var v=u(W,"string");return i(v)=="symbol"?v:String(v)}function u(W,v){if(i(W)!="object"||!W)return W;var Y=W[Symbol.toPrimitive];if(Y!==void 0){var C=Y.call(W,v);if(i(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(W)}function h(W,v,Y){return Math.max(v,Math.min(W,Y))}var p=_t.safePreventDefault=function(v){var Y=["onTouchStart","onTouchMove","onWheel"];Y.includes(v._reactName)||v.preventDefault()},x=_t.getOnDemandLazySlides=function(v){for(var Y=[],C=b(v),q=g(v),L=C;L<q;L++)v.lazyLoadedList.indexOf(L)<0&&Y.push(L);return Y};_t.getRequiredLazySlides=function(v){for(var Y=[],C=b(v),q=g(v),L=C;L<q;L++)Y.push(L);return Y};var b=_t.lazyStartIndex=function(v){return v.currentSlide-_(v)},g=_t.lazyEndIndex=function(v){return v.currentSlide+S(v)},_=_t.lazySlidesOnLeft=function(v){return v.centerMode?Math.floor(v.slidesToShow/2)+(parseInt(v.centerPadding)>0?1:0):0},S=_t.lazySlidesOnRight=function(v){return v.centerMode?Math.floor((v.slidesToShow-1)/2)+1+(parseInt(v.centerPadding)>0?1:0):v.slidesToShow},O=_t.getWidth=function(v){return v&&v.offsetWidth||0},k=_t.getHeight=function(v){return v&&v.offsetHeight||0},M=_t.getSwipeDirection=function(v){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C,q,L,G;return C=v.startX-v.curX,q=v.startY-v.curY,L=Math.atan2(q,C),G=Math.round(L*180/Math.PI),G<0&&(G=360-Math.abs(G)),G<=45&&G>=0||G<=360&&G>=315?"left":G>=135&&G<=225?"right":Y===!0?G>=35&&G<=135?"up":"down":"vertical"},J=_t.canGoNext=function(v){var Y=!0;return v.infinite||(v.centerMode&&v.currentSlide>=v.slideCount-1||v.slideCount<=v.slidesToShow||v.currentSlide>=v.slideCount-v.slidesToShow)&&(Y=!1),Y};_t.extractObject=function(v,Y){var C={};return Y.forEach(function(q){return C[q]=v[q]}),C},_t.initializedState=function(v){var Y=t.default.Children.count(v.children),C=v.listRef,q=Math.ceil(O(C)),L=v.trackRef&&v.trackRef.node,G=Math.ceil(O(L)),Q;if(v.vertical)Q=q;else{var ie=v.centerMode&&parseInt(v.centerPadding)*2;typeof v.centerPadding=="string"&&v.centerPadding.slice(-1)==="%"&&(ie*=q/100),Q=Math.ceil((q-ie)/v.slidesToShow)}var ce=C&&k(C.querySelector('[data-index="0"]')),le=ce*v.slidesToShow,xe=v.currentSlide===void 0?v.initialSlide:v.currentSlide;v.rtl&&v.currentSlide===void 0&&(xe=Y-1-v.initialSlide);var we=v.lazyLoadedList||[],ze=x(s(s({},v),{},{currentSlide:xe,lazyLoadedList:we}));we=we.concat(ze);var De={slideCount:Y,slideWidth:Q,listWidth:q,trackWidth:G,currentSlide:xe,slideHeight:ce,listHeight:le,lazyLoadedList:we};return v.autoplaying===null&&v.autoplay&&(De.autoplaying="playing"),De},_t.slideHandler=function(v){var Y=v.waitForAnimate,C=v.animating,q=v.fade,L=v.infinite,G=v.index,Q=v.slideCount,ie=v.lazyLoad,ce=v.currentSlide,le=v.centerMode,xe=v.slidesToScroll,we=v.slidesToShow,ze=v.useCSS,De=v.lazyLoadedList;if(Y&&C)return{};var $e=G,ve,te,Ce,Be={},Ne={},ue=L?G:h(G,0,Q-1);if(q){if(!L&&(G<0||G>=Q))return{};G<0?$e=G+Q:G>=Q&&($e=G-Q),ie&&De.indexOf($e)<0&&(De=De.concat($e)),Be={animating:!0,currentSlide:$e,lazyLoadedList:De,targetSlide:$e},Ne={animating:!1,targetSlide:$e}}else ve=$e,$e<0?(ve=$e+Q,L?Q%xe!==0&&(ve=Q-Q%xe):ve=0):!J(v)&&$e>ce?$e=ve=ce:le&&$e>=Q?($e=L?Q:Q-1,ve=L?0:Q-1):$e>=Q&&(ve=$e-Q,L?Q%xe!==0&&(ve=0):ve=Q-we),!L&&$e+we>=Q&&(ve=Q-we),te=P(s(s({},v),{},{slideIndex:$e})),Ce=P(s(s({},v),{},{slideIndex:ve})),L||(te===Ce&&($e=ve),te=Ce),ie&&(De=De.concat(x(s(s({},v),{},{currentSlide:$e})))),ze?(Be={animating:!0,currentSlide:ve,trackStyle:R(s(s({},v),{},{left:te})),lazyLoadedList:De,targetSlide:ue},Ne={animating:!1,currentSlide:ve,trackStyle:U(s(s({},v),{},{left:Ce})),swipeLeft:null,targetSlide:ue}):Be={currentSlide:ve,trackStyle:U(s(s({},v),{},{left:Ce})),lazyLoadedList:De,targetSlide:ue};return{state:Be,nextState:Ne}},_t.changeSlide=function(v,Y){var C,q,L,G,Q,ie=v.slidesToScroll,ce=v.slidesToShow,le=v.slideCount,xe=v.currentSlide,we=v.targetSlide,ze=v.lazyLoad,De=v.infinite;if(G=le%ie!==0,C=G?0:(le-xe)%ie,Y.message==="previous")L=C===0?ie:ce-C,Q=xe-L,ze&&!De&&(q=xe-L,Q=q===-1?le-1:q),De||(Q=we-ie);else if(Y.message==="next")L=C===0?ie:C,Q=xe+L,ze&&!De&&(Q=(xe+ie)%le+C),De||(Q=we+ie);else if(Y.message==="dots")Q=Y.index*Y.slidesToScroll;else if(Y.message==="children"){if(Q=Y.index,De){var $e=E(s(s({},v),{},{targetSlide:Q}));Q>Y.currentSlide&&$e==="left"?Q=Q-le:Q<Y.currentSlide&&$e==="right"&&(Q=Q+le)}}else Y.message==="index"&&(Q=Number(Y.index));return Q},_t.keyHandler=function(v,Y,C){return v.target.tagName.match("TEXTAREA|INPUT|SELECT")||!Y?"":v.keyCode===37?C?"next":"previous":v.keyCode===39?C?"previous":"next":""},_t.swipeStart=function(v,Y,C){return v.target.tagName==="IMG"&&p(v),!Y||!C&&v.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:v.touches?v.touches[0].pageX:v.clientX,startY:v.touches?v.touches[0].pageY:v.clientY,curX:v.touches?v.touches[0].pageX:v.clientX,curY:v.touches?v.touches[0].pageY:v.clientY}}},_t.swipeMove=function(v,Y){var C=Y.scrolling,q=Y.animating,L=Y.vertical,G=Y.swipeToSlide,Q=Y.verticalSwiping,ie=Y.rtl,ce=Y.currentSlide,le=Y.edgeFriction,xe=Y.edgeDragged,we=Y.onEdge,ze=Y.swiped,De=Y.swiping,$e=Y.slideCount,ve=Y.slidesToScroll,te=Y.infinite,Ce=Y.touchObject,Be=Y.swipeEvent,Ne=Y.listHeight,ue=Y.listWidth;if(!C){if(q)return p(v);L&&G&&Q&&p(v);var Je,Ke={},ut=P(Y);Ce.curX=v.touches?v.touches[0].pageX:v.clientX,Ce.curY=v.touches?v.touches[0].pageY:v.clientY,Ce.swipeLength=Math.round(Math.sqrt(Math.pow(Ce.curX-Ce.startX,2)));var Ye=Math.round(Math.sqrt(Math.pow(Ce.curY-Ce.startY,2)));if(!Q&&!De&&Ye>10)return{scrolling:!0};Q&&(Ce.swipeLength=Ye);var Se=(ie?-1:1)*(Ce.curX>Ce.startX?1:-1);Q&&(Se=Ce.curY>Ce.startY?1:-1);var ye=Math.ceil($e/ve),Ae=M(Y.touchObject,Q),Me=Ce.swipeLength;return te||(ce===0&&(Ae==="right"||Ae==="down")||ce+1>=ye&&(Ae==="left"||Ae==="up")||!J(Y)&&(Ae==="left"||Ae==="up"))&&(Me=Ce.swipeLength*le,xe===!1&&we&&(we(Ae),Ke.edgeDragged=!0)),!ze&&Be&&(Be(Ae),Ke.swiped=!0),L?Je=ut+Me*(Ne/ue)*Se:ie?Je=ut-Me*Se:Je=ut+Me*Se,Q&&(Je=ut+Me*Se),Ke=s(s({},Ke),{},{touchObject:Ce,swipeLeft:Je,trackStyle:U(s(s({},Y),{},{left:Je}))}),Math.abs(Ce.curX-Ce.startX)<Math.abs(Ce.curY-Ce.startY)*.8||Ce.swipeLength>10&&(Ke.swiping=!0,p(v)),Ke}},_t.swipeEnd=function(v,Y){var C=Y.dragging,q=Y.swipe,L=Y.touchObject,G=Y.listWidth,Q=Y.touchThreshold,ie=Y.verticalSwiping,ce=Y.listHeight,le=Y.swipeToSlide,xe=Y.scrolling,we=Y.onSwipe,ze=Y.targetSlide,De=Y.currentSlide,$e=Y.infinite;if(!C)return q&&p(v),{};var ve=ie?ce/Q:G/Q,te=M(L,ie),Ce={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(xe||!L.swipeLength)return Ce;if(L.swipeLength>ve){p(v),we&&we(te);var Be,Ne,ue=$e?De:ze;switch(te){case"left":case"up":Ne=ue+D(Y),Be=le?N(Y,Ne):Ne,Ce.currentDirection=0;break;case"right":case"down":Ne=ue-D(Y),Be=le?N(Y,Ne):Ne,Ce.currentDirection=1;break;default:Be=ue}Ce.triggerSlideHandler=Be}else{var Je=P(Y);Ce.trackStyle=R(s(s({},Y),{},{left:Je}))}return Ce};var re=_t.getNavigableIndexes=function(v){for(var Y=v.infinite?v.slideCount*2:v.slideCount,C=v.infinite?v.slidesToShow*-1:0,q=v.infinite?v.slidesToShow*-1:0,L=[];C<Y;)L.push(C),C=q+v.slidesToScroll,q+=Math.min(v.slidesToScroll,v.slidesToShow);return L},N=_t.checkNavigable=function(v,Y){var C=re(v),q=0;if(Y>C[C.length-1])Y=C[C.length-1];else for(var L in C){if(Y<C[L]){Y=q;break}q=C[L]}return Y},D=_t.getSlideCount=function(v){var Y=v.centerMode?v.slideWidth*Math.floor(v.slidesToShow/2):0;if(v.swipeToSlide){var C,q=v.listRef,L=q.querySelectorAll&&q.querySelectorAll(".slick-slide")||[];if(Array.from(L).every(function(ie){if(v.vertical){if(ie.offsetTop+k(ie)/2>v.swipeLeft*-1)return C=ie,!1}else if(ie.offsetLeft-Y+O(ie)/2>v.swipeLeft*-1)return C=ie,!1;return!0}),!C)return 0;var G=v.rtl===!0?v.slideCount-v.currentSlide:v.currentSlide,Q=Math.abs(C.dataset.index-G)||1;return Q}else return v.slidesToScroll},B=_t.checkSpecKeys=function(v,Y){return Y.reduce(function(C,q){return C&&v.hasOwnProperty(q)},!0)?null:console.error("Keys Missing:",v)},U=_t.getTrackCSS=function(v){B(v,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var Y,C,q=v.slideCount+2*v.slidesToShow;v.vertical?C=q*v.slideHeight:Y=T(v)*v.slideWidth;var L={opacity:1,transition:"",WebkitTransition:""};if(v.useTransform){var G=v.vertical?"translate3d(0px, "+v.left+"px, 0px)":"translate3d("+v.left+"px, 0px, 0px)",Q=v.vertical?"translate3d(0px, "+v.left+"px, 0px)":"translate3d("+v.left+"px, 0px, 0px)",ie=v.vertical?"translateY("+v.left+"px)":"translateX("+v.left+"px)";L=s(s({},L),{},{WebkitTransform:G,transform:Q,msTransform:ie})}else v.vertical?L.top=v.left:L.left=v.left;return v.fade&&(L={opacity:1}),Y&&(L.width=Y),C&&(L.height=C),window&&!window.addEventListener&&window.attachEvent&&(v.vertical?L.marginTop=v.left+"px":L.marginLeft=v.left+"px"),L},R=_t.getTrackAnimateCSS=function(v){B(v,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var Y=U(v);return v.useTransform?(Y.WebkitTransition="-webkit-transform "+v.speed+"ms "+v.cssEase,Y.transition="transform "+v.speed+"ms "+v.cssEase):v.vertical?Y.transition="top "+v.speed+"ms "+v.cssEase:Y.transition="left "+v.speed+"ms "+v.cssEase,Y},P=_t.getTrackLeft=function(v){if(v.unslick)return 0;B(v,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var Y=v.slideIndex,C=v.trackRef,q=v.infinite,L=v.centerMode,G=v.slideCount,Q=v.slidesToShow,ie=v.slidesToScroll,ce=v.slideWidth,le=v.listWidth,xe=v.variableWidth,we=v.slideHeight,ze=v.fade,De=v.vertical,$e=0,ve,te,Ce=0;if(ze||v.slideCount===1)return 0;var Be=0;if(q?(Be=-w(v),G%ie!==0&&Y+ie>G&&(Be=-(Y>G?Q-(Y-G):G%ie)),L&&(Be+=parseInt(Q/2))):(G%ie!==0&&Y+ie>G&&(Be=Q-G%ie),L&&(Be=parseInt(Q/2))),$e=Be*ce,Ce=Be*we,De?ve=Y*we*-1+Ce:ve=Y*ce*-1+$e,xe===!0){var Ne,ue=C&&C.node;if(Ne=Y+w(v),te=ue&&ue.childNodes[Ne],ve=te?te.offsetLeft*-1:0,L===!0){Ne=q?Y+w(v):Y,te=ue&&ue.children[Ne],ve=0;for(var Je=0;Je<Ne;Je++)ve-=ue&&ue.children[Je]&&ue.children[Je].offsetWidth;ve-=parseInt(v.centerPadding),ve+=te&&(le-te.offsetWidth)/2}}return ve},w=_t.getPreClones=function(v){return v.unslick||!v.infinite?0:v.variableWidth?v.slideCount:v.slidesToShow+(v.centerMode?1:0)},A=_t.getPostClones=function(v){return v.unslick||!v.infinite?0:v.slideCount},T=_t.getTotalSlides=function(v){return v.slideCount===1?1:w(v)+v.slideCount+A(v)},E=_t.siblingDirection=function(v){return v.targetSlide>v.currentSlide?v.targetSlide>v.currentSlide+ee(v)?"left":"right":v.targetSlide<v.currentSlide-Z(v)?"right":"left"},ee=_t.slidesOnRight=function(v){var Y=v.slidesToShow,C=v.centerMode,q=v.rtl,L=v.centerPadding;if(C){var G=(Y-1)/2+1;return parseInt(L)>0&&(G+=1),q&&Y%2===0&&(G+=1),G}return q?0:Y-1},Z=_t.slidesOnLeft=function(v){var Y=v.slidesToShow,C=v.centerMode,q=v.rtl,L=v.centerPadding;if(C){var G=(Y-1)/2+1;return parseInt(L)>0&&(G+=1),!q&&Y%2===0&&(G+=1),G}return q?Y-1:0};_t.canUseDOM=function(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)};var y=_t.validSettings=Object.keys(r.default);function se(W){return y.reduce(function(v,Y){return W.hasOwnProperty(Y)&&(v[Y]=W[Y]),v},{})}return _t}var Ja={},yf;function Fx(){if(yf)return Ja;yf=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.Track=void 0;var t=i(go()),r=i(nd()),n=fl();function i(R){return R&&R.__esModule?R:{default:R}}function o(R){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},o(R)}function s(){return s=Object.assign?Object.assign.bind():function(R){for(var P=1;P<arguments.length;P++){var w=arguments[P];for(var A in w)Object.prototype.hasOwnProperty.call(w,A)&&(R[A]=w[A])}return R},s.apply(this,arguments)}function a(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function c(R,P){for(var w=0;w<P.length;w++){var A=P[w];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,J(A.key),A)}}function u(R,P,w){return P&&c(R.prototype,P),Object.defineProperty(R,"prototype",{writable:!1}),R}function h(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),P&&p(R,P)}function p(R,P){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,T){return A.__proto__=T,A},p(R,P)}function x(R){var P=_();return function(){var A=S(R),T;if(P){var E=S(this).constructor;T=Reflect.construct(A,arguments,E)}else T=A.apply(this,arguments);return b(this,T)}}function b(R,P){if(P&&(o(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(R)}function g(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function _(){try{var R=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_=function(){return!!R})()}function S(R){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},S(R)}function O(R,P){var w=Object.keys(R);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(R);P&&(A=A.filter(function(T){return Object.getOwnPropertyDescriptor(R,T).enumerable})),w.push.apply(w,A)}return w}function k(R){for(var P=1;P<arguments.length;P++){var w=arguments[P]!=null?arguments[P]:{};P%2?O(Object(w),!0).forEach(function(A){M(R,A,w[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(w)):O(Object(w)).forEach(function(A){Object.defineProperty(R,A,Object.getOwnPropertyDescriptor(w,A))})}return R}function M(R,P,w){return P=J(P),P in R?Object.defineProperty(R,P,{value:w,enumerable:!0,configurable:!0,writable:!0}):R[P]=w,R}function J(R){var P=re(R,"string");return o(P)=="symbol"?P:String(P)}function re(R,P){if(o(R)!="object"||!R)return R;var w=R[Symbol.toPrimitive];if(w!==void 0){var A=w.call(R,P);if(o(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(R)}var N=function(P){var w,A,T,E,ee;P.rtl?ee=P.slideCount-1-P.index:ee=P.index,T=ee<0||ee>=P.slideCount,P.centerMode?(E=Math.floor(P.slidesToShow/2),A=(ee-P.currentSlide)%P.slideCount===0,ee>P.currentSlide-E-1&&ee<=P.currentSlide+E&&(w=!0)):w=P.currentSlide<=ee&&ee<P.currentSlide+P.slidesToShow;var Z;P.targetSlide<0?Z=P.targetSlide+P.slideCount:P.targetSlide>=P.slideCount?Z=P.targetSlide-P.slideCount:Z=P.targetSlide;var y=ee===Z;return{"slick-slide":!0,"slick-active":w,"slick-center":A,"slick-cloned":T,"slick-current":y}},D=function(P){var w={};return(P.variableWidth===void 0||P.variableWidth===!1)&&(w.width=P.slideWidth),P.fade&&(w.position="relative",P.vertical?w.top=-P.index*parseInt(P.slideHeight):w.left=-P.index*parseInt(P.slideWidth),w.opacity=P.currentSlide===P.index?1:0,w.zIndex=P.currentSlide===P.index?999:998,P.useCSS&&(w.transition="opacity "+P.speed+"ms "+P.cssEase+", visibility "+P.speed+"ms "+P.cssEase)),w},B=function(P,w){return P.key||w},U=function(P){var w,A=[],T=[],E=[],ee=t.default.Children.count(P.children),Z=(0,n.lazyStartIndex)(P),y=(0,n.lazyEndIndex)(P);return t.default.Children.forEach(P.children,function(se,W){var v,Y={message:"children",index:W,slidesToScroll:P.slidesToScroll,currentSlide:P.currentSlide};!P.lazyLoad||P.lazyLoad&&P.lazyLoadedList.indexOf(W)>=0?v=se:v=t.default.createElement("div",null);var C=D(k(k({},P),{},{index:W})),q=v.props.className||"",L=N(k(k({},P),{},{index:W}));if(A.push(t.default.cloneElement(v,{key:"original"+B(v,W),"data-index":W,className:(0,r.default)(L,q),tabIndex:"-1","aria-hidden":!L["slick-active"],style:k(k({outline:"none"},v.props.style||{}),C),onClick:function(ie){v.props&&v.props.onClick&&v.props.onClick(ie),P.focusOnSelect&&P.focusOnSelect(Y)}})),P.infinite&&P.fade===!1){var G=ee-W;G<=(0,n.getPreClones)(P)&&(w=-G,w>=Z&&(v=se),L=N(k(k({},P),{},{index:w})),T.push(t.default.cloneElement(v,{key:"precloned"+B(v,w),"data-index":w,tabIndex:"-1",className:(0,r.default)(L,q),"aria-hidden":!L["slick-active"],style:k(k({},v.props.style||{}),C),onClick:function(ie){v.props&&v.props.onClick&&v.props.onClick(ie),P.focusOnSelect&&P.focusOnSelect(Y)}}))),w=ee+W,w<y&&(v=se),L=N(k(k({},P),{},{index:w})),E.push(t.default.cloneElement(v,{key:"postcloned"+B(v,w),"data-index":w,tabIndex:"-1",className:(0,r.default)(L,q),"aria-hidden":!L["slick-active"],style:k(k({},v.props.style||{}),C),onClick:function(ie){v.props&&v.props.onClick&&v.props.onClick(ie),P.focusOnSelect&&P.focusOnSelect(Y)}}))}}),P.rtl?T.concat(A,E).reverse():T.concat(A,E)};return Ja.Track=function(R){h(w,R);var P=x(w);function w(){var A;a(this,w);for(var T=arguments.length,E=new Array(T),ee=0;ee<T;ee++)E[ee]=arguments[ee];return A=P.call.apply(P,[this].concat(E)),M(g(A),"node",null),M(g(A),"handleRef",function(Z){A.node=Z}),A}return u(w,[{key:"render",value:function(){var T=U(this.props),E=this.props,ee=E.onMouseEnter,Z=E.onMouseOver,y=E.onMouseLeave,se={onMouseEnter:ee,onMouseOver:Z,onMouseLeave:y};return t.default.createElement("div",s({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},se),T)}}]),w}(t.default.PureComponent),Ja}var Xa={},vf;function Ix(){if(vf)return Xa;vf=1;function t(N){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},t(N)}Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.Dots=void 0;var r=o(go()),n=o(nd()),i=fl();function o(N){return N&&N.__esModule?N:{default:N}}function s(N,D){var B=Object.keys(N);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(N);D&&(U=U.filter(function(R){return Object.getOwnPropertyDescriptor(N,R).enumerable})),B.push.apply(B,U)}return B}function a(N){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?s(Object(B),!0).forEach(function(U){c(N,U,B[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(B)):s(Object(B)).forEach(function(U){Object.defineProperty(N,U,Object.getOwnPropertyDescriptor(B,U))})}return N}function c(N,D,B){return D=x(D),D in N?Object.defineProperty(N,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):N[D]=B,N}function u(N,D){if(!(N instanceof D))throw new TypeError("Cannot call a class as a function")}function h(N,D){for(var B=0;B<D.length;B++){var U=D[B];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(N,x(U.key),U)}}function p(N,D,B){return D&&h(N.prototype,D),Object.defineProperty(N,"prototype",{writable:!1}),N}function x(N){var D=b(N,"string");return t(D)=="symbol"?D:String(D)}function b(N,D){if(t(N)!="object"||!N)return N;var B=N[Symbol.toPrimitive];if(B!==void 0){var U=B.call(N,D);if(t(U)!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(N)}function g(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(D&&D.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),D&&_(N,D)}function _(N,D){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,R){return U.__proto__=R,U},_(N,D)}function S(N){var D=M();return function(){var U=J(N),R;if(D){var P=J(this).constructor;R=Reflect.construct(U,arguments,P)}else R=U.apply(this,arguments);return O(this,R)}}function O(N,D){if(D&&(t(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(N)}function k(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function M(){try{var N=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M=function(){return!!N})()}function J(N){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)},J(N)}var re=function(D){var B;return D.infinite?B=Math.ceil(D.slideCount/D.slidesToScroll):B=Math.ceil((D.slideCount-D.slidesToShow)/D.slidesToScroll)+1,B};return Xa.Dots=function(N){g(B,N);var D=S(B);function B(){return u(this,B),D.apply(this,arguments)}return p(B,[{key:"clickHandler",value:function(R,P){P.preventDefault(),this.props.clickHandler(R)}},{key:"render",value:function(){for(var R=this.props,P=R.onMouseEnter,w=R.onMouseOver,A=R.onMouseLeave,T=R.infinite,E=R.slidesToScroll,ee=R.slidesToShow,Z=R.slideCount,y=R.currentSlide,se=re({slideCount:Z,slidesToScroll:E,slidesToShow:ee,infinite:T}),W={onMouseEnter:P,onMouseOver:w,onMouseLeave:A},v=[],Y=0;Y<se;Y++){var C=(Y+1)*E-1,q=T?C:(0,i.clamp)(C,0,Z-1),L=q-(E-1),G=T?L:(0,i.clamp)(L,0,Z-1),Q=(0,n.default)({"slick-active":T?y>=G&&y<=q:y===G}),ie={message:"dots",index:Y,slidesToScroll:E,currentSlide:y},ce=this.clickHandler.bind(this,ie);v=v.concat(r.default.createElement("li",{key:Y,className:Q},r.default.cloneElement(this.props.customPaging(Y),{onClick:ce})))}return r.default.cloneElement(this.props.appendDots(v),a({className:this.props.dotsClass},W))}}]),B}(r.default.PureComponent),Xa}var to={},wf;function zx(){if(wf)return to;wf=1;function t(N){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},t(N)}Object.defineProperty(to,"__esModule",{value:!0}),to.PrevArrow=to.NextArrow=void 0;var r=o(go()),n=o(nd()),i=fl();function o(N){return N&&N.__esModule?N:{default:N}}function s(){return s=Object.assign?Object.assign.bind():function(N){for(var D=1;D<arguments.length;D++){var B=arguments[D];for(var U in B)Object.prototype.hasOwnProperty.call(B,U)&&(N[U]=B[U])}return N},s.apply(this,arguments)}function a(N,D){var B=Object.keys(N);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(N);D&&(U=U.filter(function(R){return Object.getOwnPropertyDescriptor(N,R).enumerable})),B.push.apply(B,U)}return B}function c(N){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?a(Object(B),!0).forEach(function(U){u(N,U,B[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(B)):a(Object(B)).forEach(function(U){Object.defineProperty(N,U,Object.getOwnPropertyDescriptor(B,U))})}return N}function u(N,D,B){return D=b(D),D in N?Object.defineProperty(N,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):N[D]=B,N}function h(N,D){if(!(N instanceof D))throw new TypeError("Cannot call a class as a function")}function p(N,D){for(var B=0;B<D.length;B++){var U=D[B];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(N,b(U.key),U)}}function x(N,D,B){return D&&p(N.prototype,D),Object.defineProperty(N,"prototype",{writable:!1}),N}function b(N){var D=g(N,"string");return t(D)=="symbol"?D:String(D)}function g(N,D){if(t(N)!="object"||!N)return N;var B=N[Symbol.toPrimitive];if(B!==void 0){var U=B.call(N,D);if(t(U)!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(N)}function _(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(D&&D.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),D&&S(N,D)}function S(N,D){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,R){return U.__proto__=R,U},S(N,D)}function O(N){var D=J();return function(){var U=re(N),R;if(D){var P=re(this).constructor;R=Reflect.construct(U,arguments,P)}else R=U.apply(this,arguments);return k(this,R)}}function k(N,D){if(D&&(t(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(N)}function M(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function J(){try{var N=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J=function(){return!!N})()}function re(N){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)},re(N)}return to.PrevArrow=function(N){_(B,N);var D=O(B);function B(){return h(this,B),D.apply(this,arguments)}return x(B,[{key:"clickHandler",value:function(R,P){P&&P.preventDefault(),this.props.clickHandler(R,P)}},{key:"render",value:function(){var R={"slick-arrow":!0,"slick-prev":!0},P=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(R["slick-disabled"]=!0,P=null);var w={key:"0","data-role":"none",className:(0,n.default)(R),style:{display:"block"},onClick:P},A={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},T;return this.props.prevArrow?T=r.default.cloneElement(this.props.prevArrow,c(c({},w),A)):T=r.default.createElement("button",s({key:"0",type:"button"},w)," ","Previous"),T}}]),B}(r.default.PureComponent),to.NextArrow=function(N){_(B,N);var D=O(B);function B(){return h(this,B),D.apply(this,arguments)}return x(B,[{key:"clickHandler",value:function(R,P){P&&P.preventDefault(),this.props.clickHandler(R,P)}},{key:"render",value:function(){var R={"slick-arrow":!0,"slick-next":!0},P=this.clickHandler.bind(this,{message:"next"});(0,i.canGoNext)(this.props)||(R["slick-disabled"]=!0,P=null);var w={key:"1","data-role":"none",className:(0,n.default)(R),style:{display:"block"},onClick:P},A={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},T;return this.props.nextArrow?T=r.default.cloneElement(this.props.nextArrow,c(c({},w),A)):T=r.default.createElement("button",s({key:"1",type:"button"},w)," ","Next"),T}}]),B}(r.default.PureComponent),to}var w0=function(){if(typeof Map!="undefined")return Map;function t(r,n){var i=-1;return r.some(function(o,s){return o[0]===n?(i=s,!0):!1}),i}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(n){var i=t(this.__entries__,n),o=this.__entries__[i];return o&&o[1]},r.prototype.set=function(n,i){var o=t(this.__entries__,n);~o?this.__entries__[o][1]=i:this.__entries__.push([n,i])},r.prototype.delete=function(n){var i=this.__entries__,o=t(i,n);~o&&i.splice(o,1)},r.prototype.has=function(n){return!!~t(this.__entries__,n)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var o=0,s=this.__entries__;o<s.length;o++){var a=s[o];n.call(i,a[1],a[0])}},r}()}(),zu=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Tc=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Dx=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Tc):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),Mx=2;function Bx(t,r){var n=!1,i=!1,o=0;function s(){n&&(n=!1,t()),i&&c()}function a(){Dx(s)}function c(){var u=Date.now();if(n){if(u-o<Mx)return;i=!0}else n=!0,i=!1,setTimeout(a,r);o=u}return c}var qx=20,Wx=["top","right","bottom","left","width","height","size","weight"],Ux=typeof MutationObserver!="undefined",Hx=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Bx(this.refresh.bind(this),qx)}return t.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},t.prototype.removeObserver=function(r){var n=this.observers_,i=n.indexOf(r);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},t.prototype.updateObservers_=function(){var r=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return r.forEach(function(n){return n.broadcastActive()}),r.length>0},t.prototype.connect_=function(){!zu||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Ux?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!zu||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(r){var n=r.propertyName,i=n===void 0?"":n,o=Wx.some(function(s){return!!~i.indexOf(s)});o&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),j0=function(t,r){for(var n=0,i=Object.keys(r);n<i.length;n++){var o=i[n];Object.defineProperty(t,o,{value:r[o],enumerable:!1,writable:!1,configurable:!0})}return t},ca=function(t){var r=t&&t.ownerDocument&&t.ownerDocument.defaultView;return r||Tc},S0=id(0,0,0,0);function Fc(t){return parseFloat(t)||0}function jf(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return r.reduce(function(i,o){var s=t["border-"+o+"-width"];return i+Fc(s)},0)}function $x(t){for(var r=["top","right","bottom","left"],n={},i=0,o=r;i<o.length;i++){var s=o[i],a=t["padding-"+s];n[s]=Fc(a)}return n}function Gx(t){var r=t.getBBox();return id(0,0,r.width,r.height)}function Vx(t){var r=t.clientWidth,n=t.clientHeight;if(!r&&!n)return S0;var i=ca(t).getComputedStyle(t),o=$x(i),s=o.left+o.right,a=o.top+o.bottom,c=Fc(i.width),u=Fc(i.height);if(i.boxSizing==="border-box"&&(Math.round(c+s)!==r&&(c-=jf(i,"left","right")+s),Math.round(u+a)!==n&&(u-=jf(i,"top","bottom")+a)),!Jx(t)){var h=Math.round(c+s)-r,p=Math.round(u+a)-n;Math.abs(h)!==1&&(c-=h),Math.abs(p)!==1&&(u-=p)}return id(o.left,o.top,c,u)}var Yx=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof ca(t).SVGGraphicsElement}:function(t){return t instanceof ca(t).SVGElement&&typeof t.getBBox=="function"}}();function Jx(t){return t===ca(t).document.documentElement}function Xx(t){return zu?Yx(t)?Gx(t):Vx(t):S0}function Kx(t){var r=t.x,n=t.y,i=t.width,o=t.height,s=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return j0(a,{x:r,y:n,width:i,height:o,top:n,right:r+i,bottom:o+n,left:r}),a}function id(t,r,n,i){return{x:t,y:r,width:n,height:i}}var Qx=function(){function t(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=id(0,0,0,0),this.target=r}return t.prototype.isActive=function(){var r=Xx(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},t}(),Zx=function(){function t(r,n){var i=Kx(n);j0(this,{target:r,contentRect:i})}return t}(),eb=function(){function t(r,n,i){if(this.activeObservations_=[],this.observations_=new w0,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(r instanceof ca(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(r)||(n.set(r,new Qx(r)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(r instanceof ca(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(r)&&(n.delete(r),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&r.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new Zx(i.target,i.broadcastRect())});this.callback_.call(r,n,r),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),C0=typeof WeakMap!="undefined"?new WeakMap:new w0,_0=function(){function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Hx.getInstance(),i=new eb(r,n,this);C0.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){_0.prototype[t]=function(){var r;return(r=C0.get(this))[t].apply(r,arguments)}});var tb=function(){return typeof Tc.ResizeObserver!="undefined"?Tc.ResizeObserver:_0}();const rb=Object.freeze(Object.defineProperty({__proto__:null,default:tb},Symbol.toStringTag,{value:"Module"})),nb=pm(rb);var Sf;function ib(){if(Sf)return Ya;Sf=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.InnerSlider=void 0;var t=h(go()),r=h(Ex()),n=h(Tx()),i=h(nd()),o=fl(),s=Fx(),a=Ix(),c=zx(),u=h(nb);function h(T){return T&&T.__esModule?T:{default:T}}function p(T){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},p(T)}function x(){return x=Object.assign?Object.assign.bind():function(T){for(var E=1;E<arguments.length;E++){var ee=arguments[E];for(var Z in ee)Object.prototype.hasOwnProperty.call(ee,Z)&&(T[Z]=ee[Z])}return T},x.apply(this,arguments)}function b(T,E){if(T==null)return{};var ee=g(T,E),Z,y;if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols(T);for(y=0;y<se.length;y++)Z=se[y],!(E.indexOf(Z)>=0)&&Object.prototype.propertyIsEnumerable.call(T,Z)&&(ee[Z]=T[Z])}return ee}function g(T,E){if(T==null)return{};var ee={},Z=Object.keys(T),y,se;for(se=0;se<Z.length;se++)y=Z[se],!(E.indexOf(y)>=0)&&(ee[y]=T[y]);return ee}function _(T,E){var ee=Object.keys(T);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(T);E&&(Z=Z.filter(function(y){return Object.getOwnPropertyDescriptor(T,y).enumerable})),ee.push.apply(ee,Z)}return ee}function S(T){for(var E=1;E<arguments.length;E++){var ee=arguments[E]!=null?arguments[E]:{};E%2?_(Object(ee),!0).forEach(function(Z){P(T,Z,ee[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(ee)):_(Object(ee)).forEach(function(Z){Object.defineProperty(T,Z,Object.getOwnPropertyDescriptor(ee,Z))})}return T}function O(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function k(T,E){for(var ee=0;ee<E.length;ee++){var Z=E[ee];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(T,w(Z.key),Z)}}function M(T,E,ee){return E&&k(T.prototype,E),Object.defineProperty(T,"prototype",{writable:!1}),T}function J(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),E&&re(T,E)}function re(T,E){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Z,y){return Z.__proto__=y,Z},re(T,E)}function N(T){var E=U();return function(){var Z=R(T),y;if(E){var se=R(this).constructor;y=Reflect.construct(Z,arguments,se)}else y=Z.apply(this,arguments);return D(this,y)}}function D(T,E){if(E&&(p(E)==="object"||typeof E=="function"))return E;if(E!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(T)}function B(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function U(){try{var T=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U=function(){return!!T})()}function R(T){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},R(T)}function P(T,E,ee){return E=w(E),E in T?Object.defineProperty(T,E,{value:ee,enumerable:!0,configurable:!0,writable:!0}):T[E]=ee,T}function w(T){var E=A(T,"string");return p(E)=="symbol"?E:String(E)}function A(T,E){if(p(T)!="object"||!T)return T;var ee=T[Symbol.toPrimitive];if(ee!==void 0){var Z=ee.call(T,E);if(p(Z)!="object")return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(T)}return Ya.InnerSlider=function(T){J(ee,T);var E=N(ee);function ee(Z){var y;O(this,ee),y=E.call(this,Z),P(B(y),"listRefHandler",function(W){return y.list=W}),P(B(y),"trackRefHandler",function(W){return y.track=W}),P(B(y),"adaptHeight",function(){if(y.props.adaptiveHeight&&y.list){var W=y.list.querySelector('[data-index="'.concat(y.state.currentSlide,'"]'));y.list.style.height=(0,o.getHeight)(W)+"px"}}),P(B(y),"componentDidMount",function(){if(y.props.onInit&&y.props.onInit(),y.props.lazyLoad){var W=(0,o.getOnDemandLazySlides)(S(S({},y.props),y.state));W.length>0&&(y.setState(function(Y){return{lazyLoadedList:Y.lazyLoadedList.concat(W)}}),y.props.onLazyLoad&&y.props.onLazyLoad(W))}var v=S({listRef:y.list,trackRef:y.track},y.props);y.updateState(v,!0,function(){y.adaptHeight(),y.props.autoplay&&y.autoPlay("update")}),y.props.lazyLoad==="progressive"&&(y.lazyLoadTimer=setInterval(y.progressiveLazyLoad,1e3)),y.ro=new u.default(function(){y.state.animating?(y.onWindowResized(!1),y.callbackTimers.push(setTimeout(function(){return y.onWindowResized()},y.props.speed))):y.onWindowResized()}),y.ro.observe(y.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(Y){Y.onfocus=y.props.pauseOnFocus?y.onSlideFocus:null,Y.onblur=y.props.pauseOnFocus?y.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",y.onWindowResized):window.attachEvent("onresize",y.onWindowResized)}),P(B(y),"componentWillUnmount",function(){y.animationEndCallback&&clearTimeout(y.animationEndCallback),y.lazyLoadTimer&&clearInterval(y.lazyLoadTimer),y.callbackTimers.length&&(y.callbackTimers.forEach(function(W){return clearTimeout(W)}),y.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",y.onWindowResized):window.detachEvent("onresize",y.onWindowResized),y.autoplayTimer&&clearInterval(y.autoplayTimer),y.ro.disconnect()}),P(B(y),"componentDidUpdate",function(W){if(y.checkImagesLoad(),y.props.onReInit&&y.props.onReInit(),y.props.lazyLoad){var v=(0,o.getOnDemandLazySlides)(S(S({},y.props),y.state));v.length>0&&(y.setState(function(q){return{lazyLoadedList:q.lazyLoadedList.concat(v)}}),y.props.onLazyLoad&&y.props.onLazyLoad(v))}y.adaptHeight();var Y=S(S({listRef:y.list,trackRef:y.track},y.props),y.state),C=y.didPropsChange(W);C&&y.updateState(Y,C,function(){y.state.currentSlide>=t.default.Children.count(y.props.children)&&y.changeSlide({message:"index",index:t.default.Children.count(y.props.children)-y.props.slidesToShow,currentSlide:y.state.currentSlide}),y.props.autoplay?y.autoPlay("update"):y.pause("paused")})}),P(B(y),"onWindowResized",function(W){y.debouncedResize&&y.debouncedResize.cancel(),y.debouncedResize=(0,n.default)(function(){return y.resizeWindow(W)},50),y.debouncedResize()}),P(B(y),"resizeWindow",function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=!!(y.track&&y.track.node);if(v){var Y=S(S({listRef:y.list,trackRef:y.track},y.props),y.state);y.updateState(Y,W,function(){y.props.autoplay?y.autoPlay("update"):y.pause("paused")}),y.setState({animating:!1}),clearTimeout(y.animationEndCallback),delete y.animationEndCallback}}),P(B(y),"updateState",function(W,v,Y){var C=(0,o.initializedState)(W);W=S(S(S({},W),C),{},{slideIndex:C.currentSlide});var q=(0,o.getTrackLeft)(W);W=S(S({},W),{},{left:q});var L=(0,o.getTrackCSS)(W);(v||t.default.Children.count(y.props.children)!==t.default.Children.count(W.children))&&(C.trackStyle=L),y.setState(C,Y)}),P(B(y),"ssrInit",function(){if(y.props.variableWidth){var W=0,v=0,Y=[],C=(0,o.getPreClones)(S(S(S({},y.props),y.state),{},{slideCount:y.props.children.length})),q=(0,o.getPostClones)(S(S(S({},y.props),y.state),{},{slideCount:y.props.children.length}));y.props.children.forEach(function(te){Y.push(te.props.style.width),W+=te.props.style.width});for(var L=0;L<C;L++)v+=Y[Y.length-1-L],W+=Y[Y.length-1-L];for(var G=0;G<q;G++)W+=Y[G];for(var Q=0;Q<y.state.currentSlide;Q++)v+=Y[Q];var ie={width:W+"px",left:-v+"px"};if(y.props.centerMode){var ce="".concat(Y[y.state.currentSlide],"px");ie.left="calc(".concat(ie.left," + (100% - ").concat(ce,") / 2 ) ")}return{trackStyle:ie}}var le=t.default.Children.count(y.props.children),xe=S(S(S({},y.props),y.state),{},{slideCount:le}),we=(0,o.getPreClones)(xe)+(0,o.getPostClones)(xe)+le,ze=100/y.props.slidesToShow*we,De=100/we,$e=-De*((0,o.getPreClones)(xe)+y.state.currentSlide)*ze/100;y.props.centerMode&&($e+=(100-De*ze/100)/2);var ve={width:ze+"%",left:$e+"%"};return{slideWidth:De+"%",trackStyle:ve}}),P(B(y),"checkImagesLoad",function(){var W=y.list&&y.list.querySelectorAll&&y.list.querySelectorAll(".slick-slide img")||[],v=W.length,Y=0;Array.prototype.forEach.call(W,function(C){var q=function(){return++Y&&Y>=v&&y.onWindowResized()};if(!C.onclick)C.onclick=function(){return C.parentNode.focus()};else{var L=C.onclick;C.onclick=function(G){L(G),C.parentNode.focus()}}C.onload||(y.props.lazyLoad?C.onload=function(){y.adaptHeight(),y.callbackTimers.push(setTimeout(y.onWindowResized,y.props.speed))}:(C.onload=q,C.onerror=function(){q(),y.props.onLazyLoadError&&y.props.onLazyLoadError()}))})}),P(B(y),"progressiveLazyLoad",function(){for(var W=[],v=S(S({},y.props),y.state),Y=y.state.currentSlide;Y<y.state.slideCount+(0,o.getPostClones)(v);Y++)if(y.state.lazyLoadedList.indexOf(Y)<0){W.push(Y);break}for(var C=y.state.currentSlide-1;C>=-(0,o.getPreClones)(v);C--)if(y.state.lazyLoadedList.indexOf(C)<0){W.push(C);break}W.length>0?(y.setState(function(q){return{lazyLoadedList:q.lazyLoadedList.concat(W)}}),y.props.onLazyLoad&&y.props.onLazyLoad(W)):y.lazyLoadTimer&&(clearInterval(y.lazyLoadTimer),delete y.lazyLoadTimer)}),P(B(y),"slideHandler",function(W){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Y=y.props,C=Y.asNavFor,q=Y.beforeChange,L=Y.onLazyLoad,G=Y.speed,Q=Y.afterChange,ie=y.state.currentSlide,ce=(0,o.slideHandler)(S(S(S({index:W},y.props),y.state),{},{trackRef:y.track,useCSS:y.props.useCSS&&!v})),le=ce.state,xe=ce.nextState;if(le){q&&q(ie,le.currentSlide);var we=le.lazyLoadedList.filter(function(ze){return y.state.lazyLoadedList.indexOf(ze)<0});L&&we.length>0&&L(we),!y.props.waitForAnimate&&y.animationEndCallback&&(clearTimeout(y.animationEndCallback),Q&&Q(ie),delete y.animationEndCallback),y.setState(le,function(){C&&y.asNavForIndex!==W&&(y.asNavForIndex=W,C.innerSlider.slideHandler(W)),xe&&(y.animationEndCallback=setTimeout(function(){var ze=xe.animating,De=b(xe,["animating"]);y.setState(De,function(){y.callbackTimers.push(setTimeout(function(){return y.setState({animating:ze})},10)),Q&&Q(le.currentSlide),delete y.animationEndCallback})},G))})}}),P(B(y),"changeSlide",function(W){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Y=S(S({},y.props),y.state),C=(0,o.changeSlide)(Y,W);if(!(C!==0&&!C)&&(v===!0?y.slideHandler(C,v):y.slideHandler(C),y.props.autoplay&&y.autoPlay("update"),y.props.focusOnSelect)){var q=y.list.querySelectorAll(".slick-current");q[0]&&q[0].focus()}}),P(B(y),"clickHandler",function(W){y.clickable===!1&&(W.stopPropagation(),W.preventDefault()),y.clickable=!0}),P(B(y),"keyHandler",function(W){var v=(0,o.keyHandler)(W,y.props.accessibility,y.props.rtl);v!==""&&y.changeSlide({message:v})}),P(B(y),"selectHandler",function(W){y.changeSlide(W)}),P(B(y),"disableBodyScroll",function(){var W=function(Y){Y=Y||window.event,Y.preventDefault&&Y.preventDefault(),Y.returnValue=!1};window.ontouchmove=W}),P(B(y),"enableBodyScroll",function(){window.ontouchmove=null}),P(B(y),"swipeStart",function(W){y.props.verticalSwiping&&y.disableBodyScroll();var v=(0,o.swipeStart)(W,y.props.swipe,y.props.draggable);v!==""&&y.setState(v)}),P(B(y),"swipeMove",function(W){var v=(0,o.swipeMove)(W,S(S(S({},y.props),y.state),{},{trackRef:y.track,listRef:y.list,slideIndex:y.state.currentSlide}));v&&(v.swiping&&(y.clickable=!1),y.setState(v))}),P(B(y),"swipeEnd",function(W){var v=(0,o.swipeEnd)(W,S(S(S({},y.props),y.state),{},{trackRef:y.track,listRef:y.list,slideIndex:y.state.currentSlide}));if(v){var Y=v.triggerSlideHandler;delete v.triggerSlideHandler,y.setState(v),Y!==void 0&&(y.slideHandler(Y),y.props.verticalSwiping&&y.enableBodyScroll())}}),P(B(y),"touchEnd",function(W){y.swipeEnd(W),y.clickable=!0}),P(B(y),"slickPrev",function(){y.callbackTimers.push(setTimeout(function(){return y.changeSlide({message:"previous"})},0))}),P(B(y),"slickNext",function(){y.callbackTimers.push(setTimeout(function(){return y.changeSlide({message:"next"})},0))}),P(B(y),"slickGoTo",function(W){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(W=Number(W),isNaN(W))return"";y.callbackTimers.push(setTimeout(function(){return y.changeSlide({message:"index",index:W,currentSlide:y.state.currentSlide},v)},0))}),P(B(y),"play",function(){var W;if(y.props.rtl)W=y.state.currentSlide-y.props.slidesToScroll;else if((0,o.canGoNext)(S(S({},y.props),y.state)))W=y.state.currentSlide+y.props.slidesToScroll;else return!1;y.slideHandler(W)}),P(B(y),"autoPlay",function(W){y.autoplayTimer&&clearInterval(y.autoplayTimer);var v=y.state.autoplaying;if(W==="update"){if(v==="hovered"||v==="focused"||v==="paused")return}else if(W==="leave"){if(v==="paused"||v==="focused")return}else if(W==="blur"&&(v==="paused"||v==="hovered"))return;y.autoplayTimer=setInterval(y.play,y.props.autoplaySpeed+50),y.setState({autoplaying:"playing"})}),P(B(y),"pause",function(W){y.autoplayTimer&&(clearInterval(y.autoplayTimer),y.autoplayTimer=null);var v=y.state.autoplaying;W==="paused"?y.setState({autoplaying:"paused"}):W==="focused"?(v==="hovered"||v==="playing")&&y.setState({autoplaying:"focused"}):v==="playing"&&y.setState({autoplaying:"hovered"})}),P(B(y),"onDotsOver",function(){return y.props.autoplay&&y.pause("hovered")}),P(B(y),"onDotsLeave",function(){return y.props.autoplay&&y.state.autoplaying==="hovered"&&y.autoPlay("leave")}),P(B(y),"onTrackOver",function(){return y.props.autoplay&&y.pause("hovered")}),P(B(y),"onTrackLeave",function(){return y.props.autoplay&&y.state.autoplaying==="hovered"&&y.autoPlay("leave")}),P(B(y),"onSlideFocus",function(){return y.props.autoplay&&y.pause("focused")}),P(B(y),"onSlideBlur",function(){return y.props.autoplay&&y.state.autoplaying==="focused"&&y.autoPlay("blur")}),P(B(y),"render",function(){var W=(0,i.default)("slick-slider",y.props.className,{"slick-vertical":y.props.vertical,"slick-initialized":!0}),v=S(S({},y.props),y.state),Y=(0,o.extractObject)(v,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),C=y.props.pauseOnHover;Y=S(S({},Y),{},{onMouseEnter:C?y.onTrackOver:null,onMouseLeave:C?y.onTrackLeave:null,onMouseOver:C?y.onTrackOver:null,focusOnSelect:y.props.focusOnSelect&&y.clickable?y.selectHandler:null});var q;if(y.props.dots===!0&&y.state.slideCount>=y.props.slidesToShow){var L=(0,o.extractObject)(v,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),G=y.props.pauseOnDotsHover;L=S(S({},L),{},{clickHandler:y.changeSlide,onMouseEnter:G?y.onDotsLeave:null,onMouseOver:G?y.onDotsOver:null,onMouseLeave:G?y.onDotsLeave:null}),q=t.default.createElement(a.Dots,L)}var Q,ie,ce=(0,o.extractObject)(v,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);ce.clickHandler=y.changeSlide,y.props.arrows&&(Q=t.default.createElement(c.PrevArrow,ce),ie=t.default.createElement(c.NextArrow,ce));var le=null;y.props.vertical&&(le={height:y.state.listHeight});var xe=null;y.props.vertical===!1?y.props.centerMode===!0&&(xe={padding:"0px "+y.props.centerPadding}):y.props.centerMode===!0&&(xe={padding:y.props.centerPadding+" 0px"});var we=S(S({},le),xe),ze=y.props.touchMove,De={className:"slick-list",style:we,onClick:y.clickHandler,onMouseDown:ze?y.swipeStart:null,onMouseMove:y.state.dragging&&ze?y.swipeMove:null,onMouseUp:ze?y.swipeEnd:null,onMouseLeave:y.state.dragging&&ze?y.swipeEnd:null,onTouchStart:ze?y.swipeStart:null,onTouchMove:y.state.dragging&&ze?y.swipeMove:null,onTouchEnd:ze?y.touchEnd:null,onTouchCancel:y.state.dragging&&ze?y.swipeEnd:null,onKeyDown:y.props.accessibility?y.keyHandler:null},$e={className:W,dir:"ltr",style:y.props.style};return y.props.unslick&&(De={className:"slick-list"},$e={className:W}),t.default.createElement("div",$e,y.props.unslick?"":Q,t.default.createElement("div",x({ref:y.listRefHandler},De),t.default.createElement(s.Track,x({ref:y.trackRefHandler},Y),y.props.children)),y.props.unslick?"":ie,y.props.unslick?"":q)}),y.list=null,y.track=null,y.state=S(S({},r.default),{},{currentSlide:y.props.initialSlide,targetSlide:y.props.initialSlide?y.props.initialSlide:0,slideCount:t.default.Children.count(y.props.children)}),y.callbackTimers=[],y.clickable=!0,y.debouncedResize=null;var se=y.ssrInit();return y.state=S(S({},y.state),se),y}return M(ee,[{key:"didPropsChange",value:function(y){for(var se=!1,W=0,v=Object.keys(this.props);W<v.length;W++){var Y=v[W];if(!y.hasOwnProperty(Y)){se=!0;break}if(!(p(y[Y])==="object"||typeof y[Y]=="function"||isNaN(y[Y]))&&y[Y]!==this.props[Y]){se=!0;break}}return se||t.default.Children.count(this.props.children)!==t.default.Children.count(y.children)}}]),ee}(t.default.Component),Ya}var ou,Cf;function sb(){if(Cf)return ou;Cf=1;var t=function(r){return r.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()}).toLowerCase()};return ou=t,ou}var au,_f;function ob(){if(_f)return au;_f=1;var t=sb(),r=function(o){var s=/[height|width]$/;return s.test(o)},n=function(o){var s="",a=Object.keys(o);return a.forEach(function(c,u){var h=o[c];c=t(c),r(c)&&typeof h=="number"&&(h=h+"px"),h===!0?s+=c:h===!1?s+="not "+c:s+="("+c+": "+h+")",u<a.length-1&&(s+=" and ")}),s},i=function(o){var s="";return typeof o=="string"?o:o instanceof Array?(o.forEach(function(a,c){s+=n(a),c<o.length-1&&(s+=", ")}),s):n(o)};return au=i,au}var lu,kf;function ab(){if(kf)return lu;kf=1;function t(r){this.options=r,!r.deferSetup&&this.setup()}return t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(r){return this.options===r||this.options.match===r}},lu=t,lu}var cu,Af;function k0(){if(Af)return cu;Af=1;function t(i,o){var s=0,a=i.length,c;for(s;s<a&&(c=o(i[s],s),c!==!1);s++);}function r(i){return Object.prototype.toString.apply(i)==="[object Array]"}function n(i){return typeof i=="function"}return cu={isFunction:n,isArray:r,each:t},cu}var du,Lf;function lb(){if(Lf)return du;Lf=1;var t=ab(),r=k0().each;function n(i,o){this.query=i,this.isUnconditional=o,this.handlers=[],this.mql=window.matchMedia(i);var s=this;this.listener=function(a){s.mql=a.currentTarget||a,s.assess()},this.mql.addListener(this.listener)}return n.prototype={constuctor:n,addHandler:function(i){var o=new t(i);this.handlers.push(o),this.matches()&&o.on()},removeHandler:function(i){var o=this.handlers;r(o,function(s,a){if(s.equals(i))return s.destroy(),!o.splice(a,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){r(this.handlers,function(i){i.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var i=this.matches()?"on":"off";r(this.handlers,function(o){o[i]()})}},du=n,du}var uu,Pf;function cb(){if(Pf)return uu;Pf=1;var t=lb(),r=k0(),n=r.each,i=r.isFunction,o=r.isArray;function s(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return s.prototype={constructor:s,register:function(a,c,u){var h=this.queries,p=u&&this.browserIsIncapable;return h[a]||(h[a]=new t(a,p)),i(c)&&(c={match:c}),o(c)||(c=[c]),n(c,function(x){i(x)&&(x={match:x}),h[a].addHandler(x)}),this},unregister:function(a,c){var u=this.queries[a];return u&&(c?u.removeHandler(c):(u.clear(),delete this.queries[a])),this}},uu=s,uu}var hu,Nf;function db(){if(Nf)return hu;Nf=1;var t=cb();return hu=new t,hu}var Of;function ub(){return Of||(Of=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(go()),n=ib(),i=a(ob()),o=a(v0()),s=fl();function a(R){return R&&R.__esModule?R:{default:R}}function c(R){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},c(R)}function u(){return u=Object.assign?Object.assign.bind():function(R){for(var P=1;P<arguments.length;P++){var w=arguments[P];for(var A in w)Object.prototype.hasOwnProperty.call(w,A)&&(R[A]=w[A])}return R},u.apply(this,arguments)}function h(R,P){var w=Object.keys(R);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(R);P&&(A=A.filter(function(T){return Object.getOwnPropertyDescriptor(R,T).enumerable})),w.push.apply(w,A)}return w}function p(R){for(var P=1;P<arguments.length;P++){var w=arguments[P]!=null?arguments[P]:{};P%2?h(Object(w),!0).forEach(function(A){N(R,A,w[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(w)):h(Object(w)).forEach(function(A){Object.defineProperty(R,A,Object.getOwnPropertyDescriptor(w,A))})}return R}function x(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function b(R,P){for(var w=0;w<P.length;w++){var A=P[w];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,D(A.key),A)}}function g(R,P,w){return P&&b(R.prototype,P),Object.defineProperty(R,"prototype",{writable:!1}),R}function _(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),P&&S(R,P)}function S(R,P){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,T){return A.__proto__=T,A},S(R,P)}function O(R){var P=J();return function(){var A=re(R),T;if(P){var E=re(this).constructor;T=Reflect.construct(A,arguments,E)}else T=A.apply(this,arguments);return k(this,T)}}function k(R,P){if(P&&(c(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(R)}function M(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function J(){try{var R=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J=function(){return!!R})()}function re(R){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},re(R)}function N(R,P,w){return P=D(P),P in R?Object.defineProperty(R,P,{value:w,enumerable:!0,configurable:!0,writable:!0}):R[P]=w,R}function D(R){var P=B(R,"string");return c(P)=="symbol"?P:String(P)}function B(R,P){if(c(R)!="object"||!R)return R;var w=R[Symbol.toPrimitive];if(w!==void 0){var A=w.call(R,P);if(c(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(R)}var U=(0,s.canUseDOM)()&&db();t.default=function(R){_(w,R);var P=O(w);function w(A){var T;return x(this,w),T=P.call(this,A),N(M(T),"innerSliderRefHandler",function(E){return T.innerSlider=E}),N(M(T),"slickPrev",function(){return T.innerSlider.slickPrev()}),N(M(T),"slickNext",function(){return T.innerSlider.slickNext()}),N(M(T),"slickGoTo",function(E){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return T.innerSlider.slickGoTo(E,ee)}),N(M(T),"slickPause",function(){return T.innerSlider.pause("paused")}),N(M(T),"slickPlay",function(){return T.innerSlider.autoPlay("play")}),T.state={breakpoint:null},T._responsiveMediaHandlers=[],T}return g(w,[{key:"media",value:function(T,E){U.register(T,E),this._responsiveMediaHandlers.push({query:T,handler:E})}},{key:"componentDidMount",value:function(){var T=this;if(this.props.responsive){var E=this.props.responsive.map(function(Z){return Z.breakpoint});E.sort(function(Z,y){return Z-y}),E.forEach(function(Z,y){var se;y===0?se=(0,i.default)({minWidth:0,maxWidth:Z}):se=(0,i.default)({minWidth:E[y-1]+1,maxWidth:Z}),(0,s.canUseDOM)()&&T.media(se,function(){T.setState({breakpoint:Z})})});var ee=(0,i.default)({minWidth:E.slice(-1)[0]});(0,s.canUseDOM)()&&this.media(ee,function(){T.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(T){U.unregister(T.query,T.handler)})}},{key:"render",value:function(){var T=this,E,ee;this.state.breakpoint?(ee=this.props.responsive.filter(function(G){return G.breakpoint===T.state.breakpoint}),E=ee[0].settings==="unslick"?"unslick":p(p(p({},o.default),this.props),ee[0].settings)):E=p(p({},o.default),this.props),E.centerMode&&(E.slidesToScroll>1,E.slidesToScroll=1),E.fade&&(E.slidesToShow>1,E.slidesToScroll>1,E.slidesToShow=1,E.slidesToScroll=1);var Z=r.default.Children.toArray(this.props.children);Z=Z.filter(function(G){return typeof G=="string"?!!G.trim():!!G}),E.variableWidth&&(E.rows>1||E.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),E.variableWidth=!1);for(var y=[],se=null,W=0;W<Z.length;W+=E.rows*E.slidesPerRow){for(var v=[],Y=W;Y<W+E.rows*E.slidesPerRow;Y+=E.slidesPerRow){for(var C=[],q=Y;q<Y+E.slidesPerRow&&(E.variableWidth&&Z[q].props.style&&(se=Z[q].props.style.width),!(q>=Z.length));q+=1)C.push(r.default.cloneElement(Z[q],{key:100*W+10*Y+q,tabIndex:-1,style:{width:"".concat(100/E.slidesPerRow,"%"),display:"inline-block"}}));v.push(r.default.createElement("div",{key:10*W+Y},C))}E.variableWidth?y.push(r.default.createElement("div",{key:W,style:{width:se}},v)):y.push(r.default.createElement("div",{key:W},v))}if(E==="unslick"){var L="regular slider "+(this.props.className||"");return r.default.createElement("div",{className:L},Z)}else y.length<=E.slidesToShow&&!E.infinite&&(E.unslick=!0);return r.default.createElement(n.InnerSlider,u({style:this.props.style,ref:this.innerSliderRefHandler},(0,s.filterSettings)(E)),y)}}]),w}(r.default.Component)}(tu)),tu}var Rf;function hb(){return Rf||(Rf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(ub());function n(i){return i&&i.__esModule?i:{default:i}}t.default=r.default}(eu)),eu}var fb=hb();const A0=gm(fb),Ef=lr(rr);lr(de);lr(ke);lr($);lr(Ir);lr(zr);lr(Fr);const pb=t=>{const r=[],n=[],i=[],o=[];if(t.attachments&&Array.isArray(t.attachments)&&t.attachments.forEach(s=>{const a=s.url?`${ps}${s.url}`:`${Hs}/storage/${s.file_path}`;switch(s.file_type){case"image":n.push({id:s.id,url:a,mediaType:"image",original_name:s.original_name||"Image"});break;case"video":r.push({id:s.id,url:a,mediaType:"video",original_name:s.original_name||"Video"});break;default:i.push({id:s.id,url:a,name:s.original_name||"Document",size:s.size||0,mediaType:"document",mime_type:s.mime_type})}}),t.videos&&Array.isArray(t.videos)?r.push(...t.videos.map(s=>({...s,mediaType:"video"}))):t.media&&t.mediaType==="video"&&r.push({id:"main-video",url:t.media,mediaType:"video"}),t.images&&Array.isArray(t.images))n.push(...t.images.map(s=>({...s,mediaType:"image"})));else if(t.imageUrl||t.media&&t.mediaType!=="video"){const s=t.imageUrl||t.media;s&&!n.some(a=>a.url===s)&&n.push({id:"main-image",url:s,mediaType:"image"})}if(t.documents&&Array.isArray(t.documents)?i.push(...t.documents.map(s=>({...s,mediaType:"document"}))):t.file&&i.push({id:"main-doc",url:t.file,name:t.original_name||"Document",size:t.fileSize||0,mediaType:"document"}),t.polls){const s=Array.isArray(t.polls)?t.polls:[t.polls];o.push(...s.map(a=>({id:a.id,question:a.question,options:(a.options||[]).map(c=>{var u,h,p,x;return{id:c.id,text:(h=(u=c.option_text)!=null?u:c.text)!=null?h:"",votes:(x=(p=c.vote_count)!=null?p:c.votes)!=null?x:0}}),mediaType:"poll"})))}else t.hasPoll&&o.push({id:"main-poll",question:t.pollQuestion||"Poll",options:(t.pollOptions||[]).map((s,a)=>{var c,u,h,p,x;return{id:(c=s.id)!=null?c:a,text:(h=(u=s.option_text)!=null?u:s.text)!=null?h:String(s),votes:(x=(p=s.vote_count)!=null?p:s.votes)!=null?x:0}}),mediaType:"poll"});return{videos:r,images:n,documents:i,polls:o,all:[...r,...n,...i,...o]}},Tf=async(t,r,n)=>{try{console.log("Download request for:",{url:t,fileName:r,fileType:n});const i=t.split("/"),o=i[i.length-1];let s=n;s||(t.includes("/images/")||t.includes("image")?s="images":t.includes("/videos/")||t.includes("video")?s="videos":s="documents");const a=`${Hs}/resources/download/${s}/${o}`,c=localStorage.getItem("authToken"),u={};c&&(u.Authorization=`Bearer ${c}`),console.log("Making download request to:",a);const h=await fetch(a,{headers:u});if(!h.ok){const g=await h.json().catch(()=>({message:"Download failed"}));throw new Error(g.message||`Download failed with status: ${h.status}`)}const p=await h.blob(),x=window.URL.createObjectURL(p),b=document.createElement("a");b.href=x,b.download=r||o||"download",b.style.display="none",document.body.appendChild(b),b.click(),setTimeout(()=>{document.body.removeChild(b),window.URL.revokeObjectURL(x)},100)}catch(i){console.error("Download failed:",i)}},gb=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(de,{className:r,style:{...n,left:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},mb=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(de,{className:r,style:{...n,right:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},Ic=z.memo(({resource:t,onCardClick:r,onBookmark:n,onUpvote:i,onEdit:o,onDelete:s,currentUser:a,cardBg:c,textColor:u,mutedText:h,borderColor:p})=>{var De,$e,ve,te;if(!t)return e.jsx(Ef,{p:5,borderWidth:"1px",borderRadius:"lg",borderColor:p,bg:c,textAlign:"center",h:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx($,{color:h,children:"This saved resource is no longer available."})});const x=Hr(),[b,g]=z.useState(0),[_,S]=z.useState(!1),[O,k]=z.useState(t.is_upvoted||!1),[M,J]=z.useState(t.upvote_count||0),[re,N]=z.useState(!1),[D,B]=z.useState({}),[U,R]=z.useState({}),[P,w]=z.useState(!1),[A,T]=z.useState([]),E=Ce=>{var Be;return{id:Ce.id,question:Ce.question,options:(Ce.options||[]).map(Ne=>{var ue,Je,Ke,ut,Ye;return{id:Ne.id,text:(Je=(ue=Ne.option_text)!=null?ue:Ne.text)!=null?Je:"",votes:(ut=(Ke=Ne.vote_count)!=null?Ke:Ne.votes)!=null?ut:0,is_selected:(Ye=Ne.is_selected)!=null?Ye:!1}}),user_option_id:(Be=Ce.user_option_id)!=null?Be:null}};z.useEffect(()=>{if(!t)return;let Ce=[];Array.isArray(t.polls)?Ce=t.polls.map(E):t.polls&&(Ce=[E(t.polls)]),T(Ce);const Be={},Ne={};Ce.forEach(ue=>{var Ke;const Je=ue.user_option_id||((Ke=ue.options.find(ut=>ut.is_selected))==null?void 0:Ke.id);Je&&(Be[ue.id]=Je,Ne[ue.id]=!0)}),B(Be),R(Ne)},[t]);const[ee,Z]=z.useState(!1),y=Jr();z.useEffect(()=>{const Ce=Yp(),Be=Ce&&t.user&&Ce.id&&String(Ce.id)===String(t.user.id),Ne=Ce&&["admin","moderator"].includes(Ce.primary_role||Ce.role);Z(Be||Ne)},[t]);const[se,W]=z.useState(null),v=z.useRef(),[Y,C]=z.useState(!1);Yr();const q=async()=>{var Ce,Be;if(t.id){N(!0);try{await h0(t.id),w(!1),x({title:"Resource deleted",description:"The resource has been successfully deleted.",status:"success",duration:3e3,isClosable:!0}),s&&s(t.id)}catch(Ne){console.error("Error deleting resource:",Ne),x({title:"Delete failed",description:((Be=(Ce=Ne.response)==null?void 0:Ce.data)==null?void 0:Be.message)||"Failed to delete the resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}finally{N(!1)}}},{videos:L,images:G,documents:Q,polls:ie,all:ce}=z.useMemo(()=>pb(t),[t]),le={dots:!0,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:L.length+G.length>1,prevArrow:L.length+G.length>1?e.jsx(gb,{}):null,nextArrow:L.length+G.length>1?e.jsx(mb,{}):null},xe=L.length+G.length+Q.length+ie.length,we=Ce=>!Ce||isNaN(Ce)?"":Ce<1024?Ce+" B":Ce<1048576?(Ce/1024).toFixed(1)+" KB":(Ce/1048576).toFixed(1)+" MB",ze=Ce=>{if(!Ce)return"Just now";const Be=new Date,Ne=new Date(Ce);if(isNaN(Ne.getTime()))return"Just now";const ue=Math.floor((Be-Ne)/1e3),Je=Math.floor(ue/60),Ke=Math.floor(Je/60),ut=Math.floor(Ke/24),Ye=Ne.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(ue<60)return"Just now";if(Je<60)return`${Je} ${Je===1?"minute":"minutes"} ago`;if(Ke<24)return`${Ke} ${Ke===1?"hour":"hours"} ago`;if(ut===1)return`Yesterday at ${Ye}`;if(ut<7)return`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][Ne.getDay()]} at ${Ye}`;const Se=Be.getFullYear(),ye=Ne.getFullYear();return Se===ye?`${["January","February","March","April","May","June","July","August","September","October","November","December"][Ne.getMonth()]} ${Ne.getDate()} at ${Ye}`:`${Ne.toLocaleDateString([],{month:"long",day:"numeric",year:"numeric"})} at ${Ye}`};return e.jsxs(Ef,{bg:ae("white","gray.800"),borderRadius:"2xl",borderWidth:"1px",borderColor:ae("rgba(226, 232, 240, 0.8)","gray.700"),overflow:"hidden",width:"100%",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.05)",_hover:{boxShadow:"0px 8px 24px rgba(0, 0, 0, 0.08)",transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx(po,{p:4,pb:0,children:e.jsxs(ke,{align:"center",justify:"space-between",children:[e.jsxs(ke,{align:"center",gap:3,children:[e.jsx(Fr,{size:"md",src:(De=t.user)==null?void 0:De.avatar_url,name:t.user?`${t.user.first_name} ${t.user.last_name}`:"Anonymous",cursor:"pointer",onClick:Ce=>{Ce.stopPropagation(),t.user&&t.user.id&&y(`/user/${t.user.id}`)}}),e.jsxs(de,{children:[e.jsxs(ke,{align:"center",gap:2,mb:1,children:[e.jsx($,{fontWeight:"bold",fontSize:"md",cursor:"pointer",onClick:Ce=>{Ce.stopPropagation(),t.user&&t.user.id&&y(`/user/${t.user.id}`)},children:t.user?t.user.id===a.id?"You":`${t.user.first_name} ${t.user.last_name}`:"Anonymous"}),((($e=t.user)==null?void 0:$e.primary_role)==="admin"||((ve=t.user)==null?void 0:ve.primary_role)==="moderator")&&e.jsx(Sc,{size:"16px",bg:"blue.500",color:"white",children:e.jsx(Di,{size:"10px"})})]}),e.jsxs(ke,{align:"center",gap:2,fontSize:"sm",color:h,children:[e.jsx($,{children:ze(t.created_at||t.dateAdded)}),((te=t.course)==null?void 0:te.code)&&e.jsx(Qn,{size:"sm",colorScheme:"blue",variant:"subtle",borderRadius:"full",children:t.course.code})]})]})]}),ee&&e.jsxs(un,{placement:"bottom-end",onClick:Ce=>Ce.stopPropagation(),children:[e.jsx(hn,{as:Ut,icon:e.jsx(bp,{}),variant:"ghost",size:"sm",borderRadius:"full"}),e.jsxs(fn,{shadow:"lg",borderRadius:"xl",children:[e.jsx(Zt,{icon:e.jsx(Wm,{}),onClick:Ce=>{if(Ce.stopPropagation(),console.log("Editing resource with attachments:",t.attachments),W({title:t.title,description:t.description,attachments:t.attachments||[]}),o){const Be={...t,attachments:t.attachments||[]};o(Be)}},children:"Edit resource"}),e.jsx(Zt,{icon:e.jsx($c,{}),onClick:Ce=>{Ce.stopPropagation(),w(!0)},children:"Delete resource"})]})]})]})}),e.jsxs(In,{p:4,pt:3,children:[e.jsxs(de,{mb:3,lineHeight:"1.5",children:[e.jsx(ft,{as:"h3",fontSize:"lg",fontWeight:"semibold",mb:2,color:ae("blue.700","blue.300"),cursor:"pointer",onClick:()=>r(t.id),_hover:{textDecoration:"underline"},children:t.title}),e.jsx($,{fontSize:"md",cursor:"pointer",onClick:()=>r(t.id),children:t.description})]}),xe>0&&e.jsxs(de,{mb:4,borderRadius:"xl",overflow:"hidden",children:[(L.length>0||G.length>0)&&e.jsx(de,{mb:3,children:e.jsx(A0,{...le,style:{position:"relative",zIndex:0},children:[...L,...G].map((Ce,Be)=>e.jsxs(de,{position:"relative",children:[Ce.mediaType==="video"?e.jsx(Ts,{ratio:16/9,children:e.jsx("video",{src:Ce.url,controls:!0,style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx(Ts,{ratio:16/9,children:e.jsx(Ir,{src:Ce.url,alt:Ce.original_name||`Image ${Be+1}`,objectFit:"cover"})}),e.jsx(Ut,{icon:e.jsx(Ci,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"whiteAlpha.900"},onClick:Ne=>{Ne.stopPropagation();const ue=Ce.name||(Ce.mediaType==="video"?`Video-${t.id}-${Be}`:`Image-${t.id}-${Be}`);Tf(Ce.url,ue),x({title:`Downloading ${Ce.mediaType}`,description:`${ue} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":`Download ${Ce.mediaType}`})]},Ce.id||Be))})}),Q.length>0&&e.jsxs(ot,{spacing:2,mb:3,align:"stretch",children:[Q.slice(0,2).map((Ce,Be)=>e.jsxs(ke,{p:3,bg:ae("gray.50","gray.700"),borderRadius:"lg",align:"center",cursor:"pointer",_hover:{bg:ae("gray.100","gray.600")},children:[e.jsx(Sc,{size:"40px",bg:"blue.100",color:"blue.600",mr:3,children:e.jsx(Un,{size:20})}),e.jsxs(de,{flex:"1",children:[e.jsx($,{fontWeight:"medium",fontSize:"sm",children:Ce.name||`Document ${Be+1}`}),e.jsx($,{fontSize:"xs",color:h,children:we(Ce.size)})]}),e.jsx(Ut,{icon:e.jsx(Ci,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:Ne=>{Ne.stopPropagation();const ue=Ce.name||`Document-${Be+1}`;Tf(Ce.url,ue,"documents"),x({title:"Downloading file",description:`${ue} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":"Download file"})]},Ce.id||`doc-${Be}`)),Q.length>2&&e.jsxs($,{fontSize:"sm",color:h,textAlign:"center",children:["+",Q.length-2," more"]})]}),A.length>0&&e.jsx(de,{children:A.slice(0,1).map((Ce,Be)=>{var ut,Ye;const Ne=Ce.id||`poll-${Be}`,ue=((ut=Ce.options)==null?void 0:ut.reduce((Se,ye)=>Se+(ye.votes||0),0))||0;U[Ne];const Je=D[Ne],Ke=async Se=>{try{const{message:ye,poll:Ae}=await ih(Se),Me={id:Ae.id,question:Ae.question,options:(Ae.options||[]).map(_e=>{var Fe,Ee,it,Ve;return{id:_e.id,text:(Ee=(Fe=_e.option_text)!=null?Fe:_e.text)!=null?Ee:"",votes:(Ve=(it=_e.vote_count)!=null?it:_e.votes)!=null?Ve:0}})};T(_e=>_e.map(Fe=>Fe.id===Me.id?Me:Fe)),ye.startsWith("Vote removed")?(B(_e=>({..._e,[Ae.id]:null})),R(_e=>({..._e,[Ae.id]:!1}))):(B(_e=>({..._e,[Ae.id]:Se})),R(_e=>({..._e,[Ae.id]:!0}))),x({title:ye,status:"success",duration:2e3,isClosable:!0})}catch(ye){console.error("Vote error",ye),x({title:"Failed to record vote",description:ye.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}};return e.jsxs(de,{bg:ae("gray.50","gray.700"),p:4,borderRadius:"xl",onClick:Se=>Se.stopPropagation(),children:[e.jsx($,{fontWeight:"semibold",mb:3,children:Ce.question}),e.jsx(ot,{spacing:2,align:"stretch",children:(Ye=Ce.options)==null?void 0:Ye.map((Se,ye)=>{const Ae=Se.id||`option-${ye}`,Me=Je===Ae,_e=Se.votes||0,Fe=ue>0?Math.round(_e/ue*100):0;return e.jsxs(de,{position:"relative",p:3,borderRadius:"lg",cursor:"pointer",onClick:()=>Ke(Ae),bg:ae("white","gray.800"),border:"2px solid",borderColor:Me?"blue.400":"transparent",_hover:{borderColor:Me?"blue.500":ae("gray.200","gray.600")},children:[e.jsx(de,{position:"absolute",left:0,top:0,bottom:0,width:`${Fe}%`,bg:Me?"blue.100":ae("gray.100","gray.700"),opacity:.3,borderRadius:"lg"}),e.jsxs(ke,{justify:"space-between",align:"center",position:"relative",children:[e.jsx($,{children:Se.text}),e.jsxs($,{fontWeight:"bold",color:Me?"blue.500":h,children:[Fe,"%"]})]})]},Ae)})}),e.jsxs($,{fontSize:"sm",color:h,mt:2,textAlign:"center",children:[ue," ",ue===1?"vote":"votes"]})]},Ne)})})]})]}),e.jsx(da,{p:4,pt:0,children:e.jsxs(ot,{width:"100%",spacing:2,align:"stretch",children:[e.jsxs(ke,{justify:"space-between",align:"center",width:"100%",children:[e.jsxs(dt,{spacing:4,children:[e.jsxs(dt,{spacing:1.5,align:"center",children:[e.jsx(ht,{as:Nc,boxSize:5,color:t.is_upvoted?"red.500":"inherit",fill:t.is_upvoted?"currentColor":"none",cursor:"pointer",onClick:Ce=>{Ce.stopPropagation(),i(t.id)}}),e.jsx($,{fontSize:"sm",fontWeight:"medium",children:t.upvote_count||0})]}),e.jsxs(dt,{spacing:1.5,align:"center",children:[e.jsx(ht,{as:Au,boxSize:5}),e.jsx($,{fontSize:"sm",fontWeight:"medium",children:t.comment_count||0})]}),e.jsxs(un,{placement:"top",isLazy:!0,children:[e.jsx(hn,{as:Ut,icon:e.jsx(fa,{}),variant:"ghost",size:"sm",p:0,minW:"auto","aria-label":"Share options",onClick:Ce=>Ce.stopPropagation()}),e.jsxs(fn,{shadow:"lg",borderRadius:"xl",p:4,children:[e.jsx($,{fontWeight:"semibold",mb:3,children:"Share this post"}),e.jsxs(Zn,{columns:2,spacing:3,children:[e.jsxs(ot,{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/resources/${t.id}`),x({title:"Link copied!",status:"success",duration:2e3})},cursor:"pointer",p:2,borderRadius:"lg",_hover:{bg:ae("gray.100","gray.700")},children:[e.jsx(de,{dangerouslySetInnerHTML:{__html:ff.copy}}),e.jsx($,{fontSize:"xs",children:"Copy Link"})]}),e.jsxs(ot,{onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(`Check out: ${t.title} ${window.location.origin}/resources/${t.id}`)}`,"_blank"),cursor:"pointer",p:2,borderRadius:"lg",_hover:{bg:ae("gray.100","gray.700")},children:[e.jsx(de,{dangerouslySetInnerHTML:{__html:ff.whatsapp}}),e.jsx($,{fontSize:"xs",children:"WhatsApp"})]})]})]})]})]}),e.jsx(Ut,{icon:e.jsx(Ki,{fill:t.is_saved?"currentColor":"none"}),variant:"ghost",size:"lg",p:0,minW:"auto",color:t.is_saved?"blue.500":h,onClick:Ce=>{Ce.stopPropagation(),n(t.id,t.title)},"aria-label":"Bookmark"})]}),e.jsx(Bc,{isOpen:P,leastDestructiveRef:v,onClose:()=>w(!1),children:e.jsx(Wr,{children:e.jsxs(qc,{children:[e.jsx(rn,{fontSize:"lg",fontWeight:"bold",children:"Delete Resource"}),e.jsx(Ur,{children:"Are you sure you want to delete this resource? This action cannot be undone."}),e.jsxs(dn,{children:[e.jsx(Te,{ref:v,onClick:()=>w(!1),children:"Cancel"}),e.jsx(Te,{colorScheme:"red",onClick:q,ml:3,isLoading:re,loadingText:"Deleting",children:"Delete"})]})]})})}),t.viewCount&&e.jsxs($,{fontSize:"sm",color:h,children:[t.viewCount," views"]})]})})]})}),xb=({resources:t,onBookmark:r,onUpvote:n,currentUser:i,onShare:o,onAddComment:s,onFollow:a,onCardClick:c,onEdit:u,onDelete:h,cardBg:p,textColor:x,mutedText:b,borderColor:g,isLoading:_,feedType:S})=>{if(_)return e.jsx(ot,{spacing:6,align:"stretch",w:"full",children:[1,2,3].map(J=>e.jsxs(de,{as:lr.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{delay:J*.1}},bg:ae("rgba(255, 255, 255, 0.7)","rgba(45, 55, 72, 0.7)"),backdropFilter:"blur(10px)",borderRadius:"24px",borderWidth:"1px",borderColor:ae("brand.navy","rgba(74, 85, 104, 0.3)"),p:6,w:"full",overflow:"hidden",boxShadow:"0 10px 30px -15px rgba(0, 0, 0, 0.1)",children:[e.jsxs(dt,{mb:4,children:[e.jsx(Ar,{height:"40px",width:"40px",borderRadius:"full"}),e.jsxs(ot,{align:"start",spacing:2,flex:1,children:[e.jsx(Ar,{height:"10px",width:"120px"}),e.jsx(Ar,{height:"8px",width:"80px"})]})]}),e.jsx(Ar,{height:"16px",width:"70%",mb:4}),e.jsx(Ar,{height:"12px",width:"90%",mb:2}),e.jsx(Ar,{height:"12px",width:"60%",mb:4}),e.jsx(Ar,{height:"200px",width:"100%",borderRadius:"xl",mb:4}),e.jsxs(dt,{spacing:4,justify:"space-between",children:[e.jsxs(dt,{children:[e.jsx(Ar,{height:"30px",width:"30px",borderRadius:"full"}),e.jsx(Ar,{height:"30px",width:"30px",borderRadius:"full"}),e.jsx(Ar,{height:"30px",width:"30px",borderRadius:"full"})]}),e.jsx(Ar,{height:"10px",width:"60px"})]})]},J))});const O={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1,duration:.5}}},k={hidden:{opacity:0,y:20,scale:.98},show:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:260,damping:20,duration:.5}}},M=S==="grid"?e.jsx(de,{w:"full",position:"relative",as:lr.div,variants:O,initial:"hidden",animate:"show",children:e.jsx(Zn,{columns:{base:1,sm:2,lg:3},spacing:"20px",children:t&&t.map((J,re)=>e.jsx(de,{as:lr.div,variants:k,gridRow:re%5===0?"span 2":"span 1",gridColumn:re%7===0?"span 2":"span 1",zIndex:100-re,transformOrigin:"center",children:e.jsx(Ic,{resource:J,onBookmark:r,onUpvote:n,currentUser:i,onCardClick:c,onEdit:u,onDelete:h,onShare:o,onAddComment:s,onFollow:a,cardBg:p,textColor:x,mutedText:b,borderColor:g})},J.id))})}):e.jsx(ot,{spacing:8,align:"stretch",w:"full",as:lr.div,variants:O,initial:"hidden",animate:"show",children:t&&t.map((J,re)=>e.jsx(de,{as:lr.div,variants:k,transformOrigin:"center",children:e.jsx(Ic,{resource:J,onBookmark:r,onUpvote:n,currentUser:i,onCardClick:c,onEdit:u,onDelete:h,onAddComment:s,onFollow:a,cardBg:p,textColor:x,mutedText:b,borderColor:g})},J.id))});return e.jsx(de,{w:"full",children:_?e.jsx(de,{}):t&&t.length>0?M:e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:ae("rgba(226, 232, 240, 0.8)","rgba(74, 85, 104, 0.3)"),borderRadius:"2xl",bg:ae("rgba(255, 255, 255, 0.6)","rgba(45, 55, 72, 0.6)"),backdropFilter:"blur(8px)",boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.05)",as:lr.div,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(ot,{spacing:4,children:[e.jsx(de,{p:4,borderRadius:"full",bg:ae("gray.50","gray.700"),boxShadow:"inner",children:e.jsx(ha,{size:30,color:ae("#A0AEC0","#718096")})}),e.jsx($,{color:b,fontSize:"lg",children:"No resources found matching your filters"}),e.jsx($,{color:b,fontSize:"sm",children:"Try adjusting your search or filters"})]})})})},bb=({searchQuery:t,facultyFilter:r,setFacultyFilter:n,courseFilter:i,setCourseFilter:o,majorFilter:s,setMajorFilter:a,faculties:c,majors:u,courses:h,coursePagination:p,onCoursePageChange:x,isLoadingFilters:b,onClearFilters:g,mutedText:_})=>{ae("blue.50","blue.900"),ae("blue.100","blue.800"),ae("gray.100","gray.700");const S=t!==""||r!=="All"||i!=="All"||s!=="All",O=J=>{var re;return((re=c.find(N=>N.id===J))==null?void 0:re.name)||"Faculty"},k=J=>{var re;return((re=u.find(N=>N.id===J))==null?void 0:re.name)||"Major"},M=J=>{var re;return((re=h.find(N=>N.id===J))==null?void 0:re.title)||"Course"};return e.jsxs(ke,{direction:"column",w:"full",gap:3,children:[e.jsxs(ke,{justify:"space-between",align:"center",w:"full",mb:2,children:[e.jsxs(dt,{children:[e.jsx(ht,{as:Hc}),e.jsx($,{fontWeight:"medium",children:"Filters"}),b&&e.jsx(qr,{size:"sm",ml:2}),S&&!b&&e.jsx(zr,{ml:1,colorScheme:"blue",borderRadius:"full",px:2,children:(t?1:0)+(r!=="All"?1:0)+(i!=="All"?1:0)+(s!=="All"?1:0)})]}),S&&e.jsx(Te,{size:"xs",variant:"ghost",colorScheme:"blue",onClick:g,children:"Clear All"})]}),e.jsxs(ke,{direction:{base:"column",md:"row"},gap:3,mb:2,children:[e.jsxs(un,{children:[e.jsx(hn,{as:Te,rightIcon:e.jsx(hs,{}),w:"full",isDisabled:b,children:r==="All"?"Faculty":O(r)}),e.jsxs(fn,{children:[e.jsx(Zt,{onClick:()=>n("All"),children:"All Faculties"}),c&&c.map(J=>e.jsx(Zt,{onClick:()=>n(J.id),children:J.name},J.id))]})]}),e.jsxs(un,{children:[e.jsx(hn,{as:Te,rightIcon:e.jsx(hs,{}),w:"full",isDisabled:b||r==="All",children:s==="All"?"Major":k(s)}),e.jsxs(fn,{children:[e.jsx(Zt,{onClick:()=>a("All"),children:"All Majors"}),u&&u.map(J=>e.jsx(Zt,{onClick:()=>a(J.id),children:J.name},J.id))]})]}),e.jsxs(un,{children:[e.jsx(hn,{as:Te,rightIcon:e.jsx(hs,{}),w:"full",isDisabled:b||s==="All",children:i==="All"?"Course":M(i)}),e.jsxs(fn,{children:[e.jsx(Zt,{onClick:()=>o("All"),children:"All Courses"}),h&&h.map(J=>e.jsx(Zt,{onClick:()=>o(J.id),children:J.title},J.id)),p&&p.last_page>1&&e.jsx(de,{px:3,py:2,children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"sm",onClick:()=>x(p.current_page-1),isDisabled:p.current_page===1,children:"Prev"}),e.jsxs($,{fontSize:"sm",children:["Page ",p.current_page," of ",p.last_page]}),e.jsx(Te,{size:"sm",onClick:()=>x(p.current_page+1),isDisabled:p.current_page===p.last_page,children:"Next"})]})})]})]})]}),S&&e.jsx(de,{mt:3,children:e.jsxs(Ug,{spacing:2,children:[r!=="All"&&e.jsx(Zl,{children:e.jsxs(Qn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"green",children:[e.jsx(ec,{children:e.jsxs(dt,{spacing:1,children:[e.jsx($,{fontSize:"xs",children:"Faculty:"}),e.jsx($,{fontSize:"sm",fontWeight:"medium",children:O(r)})]})}),e.jsx(Hd,{onClick:()=>n("All")})]})}),s!=="All"&&e.jsx(Zl,{children:e.jsxs(Qn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"purple",children:[e.jsx(ec,{children:e.jsxs(dt,{spacing:1,children:[e.jsx($,{fontSize:"xs",children:"Major:"}),e.jsx($,{fontSize:"sm",fontWeight:"medium",children:k(s)})]})}),e.jsx(Hd,{onClick:()=>a("All")})]})}),i!=="All"&&e.jsx(Zl,{children:e.jsxs(Qn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"orange",children:[e.jsx(ec,{children:e.jsxs(dt,{spacing:1,children:[e.jsx($,{fontSize:"xs",children:"Course:"}),e.jsx($,{fontSize:"sm",fontWeight:"medium",children:M(i)})]})}),e.jsx(Hd,{onClick:()=>o("All")})]})}),t&&e.jsx(Zl,{children:e.jsx(Qn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"purple",children:e.jsx(ec,{children:e.jsxs(dt,{spacing:1,children:[e.jsx($,{fontSize:"xs",children:"Search:"}),e.jsxs($,{fontSize:"sm",fontWeight:"medium",children:['"',t,'"']})]})})})})]})})]})},yb=({limit:t})=>{const[r,n]=z.useState([]),[i,o]=z.useState(!0),[s,a]=z.useState(null);Jr();const c=ae("white","gray.800"),u=ae("brand.navy","gray.700"),h=ae("brand.navy","blue.300"),p=ae("gray.700","gray.300"),x=ae("linear-gradient(to bottom, white, blue.50)","linear-gradient(to bottom, gray.800, gray.900)");return z.useEffect(()=>{(async()=>{o(!0);try{const _=(await p0(t)).data||[];n(_)}catch(g){console.error("Error fetching top contributors:",g),a("Failed to load top contributors")}finally{o(!1)}})()},[t]),s?e.jsxs(de,{p:4,bg:c,borderRadius:"md",boxShadow:"sm",border:"1px",borderColor:u,children:[e.jsx(ft,{size:"sm",mb:3,color:"red.500",children:"Error"}),e.jsx($,{fontSize:"sm",children:s})]}):e.jsxs(de,{p:4,bg:x,borderRadius:"lg",boxShadow:"md",border:"1px",borderColor:u,position:"sticky",top:"20px",children:[e.jsx(ft,{size:"md",mb:4,color:h,textAlign:"center",children:"Top Contributors"}),i?e.jsx(ot,{spacing:4,align:"stretch",children:[...Array(t)].map((b,g)=>e.jsxs(dt,{spacing:3,children:[e.jsx(Hg,{size:"10"}),e.jsx(de,{flex:"1",children:e.jsx(Zo,{noOfLines:2,spacing:"2"})})]},g))}):e.jsx(ot,{spacing:3,align:"stretch",children:r.length===0?e.jsx($,{fontSize:"sm",textAlign:"center",color:p,children:"No contributors found"}):r.map((b,g)=>e.jsxs(de,{p:3,borderRadius:"md",bg:g===0?"yellow.100":g===1?"gray.100":g===2?"orange.100":"transparent",_dark:{bg:g===0?"yellow.900":g===1?"gray.700":g===2?"orange.900":"transparent"},_hover:{transform:"translateY(-2px)",transition:"transform 0.2s"},children:[e.jsxs(dt,{spacing:3,children:[e.jsx(Fr,{size:"sm",name:`${b.first_name} ${b.last_name}`,src:b.avatar_url,border:g<3?"2px solid":"none",borderColor:g===0?"yellow.500":g===1?"gray.400":g===2?"orange.500":"transparent"}),e.jsxs(ot,{spacing:1,align:"start",flex:"1",children:[e.jsxs(dt,{children:[e.jsxs($,{fontWeight:"medium",fontSize:"sm",children:[b.first_name," ",b.last_name]}),g<3&&e.jsxs(zr,{colorScheme:g===0?"yellow":g===1?"gray":"orange",variant:"solid",fontSize:"xs",children:["#",g+1]})]}),e.jsx($,{fontSize:"xs",color:"gray.500",_dark:{color:"gray.400"},children:b.major_name?` ${b.major_name}`:""})]})]}),e.jsxs(dt,{mt:2,spacing:4,fontSize:"xs",color:"gray.500",children:[e.jsx(_i,{label:"Resources created",children:e.jsxs(ke,{align:"center",children:[e.jsx(Un,{style:{marginRight:"4px"}}),e.jsx($,{children:b.resources_count})]})}),e.jsx(_i,{label:"Total upvotes received",children:e.jsxs(ke,{align:"center",children:[e.jsx(Lu,{style:{marginRight:"4px"}}),e.jsx($,{children:b.user_upvote_count+b.resource_upvote_count})]})}),e.jsxs(zr,{colorScheme:"blue",variant:"outline",ml:"auto",children:["Score: ",b.contribution_score]})]})]},b.id))})]})},ol=async(t={})=>(await gt.get("/courses",{params:t})).data,vb=({handleImageUpload:t,handleVideoUpload:r,handleDocumentUpload:n,handlePollAdd:i})=>{const o=z.useRef(null),s=z.useRef(null),a=z.useRef(null),c=ae("gray.200","gray.600"),u=ae("gray.50","gray.700");ae("blue.500","blue.200");const h=[{type:"images",icon:rl,label:"Photo",ref:o,accept:"image/*",handler:t},{type:"videos",icon:Qu,label:"Video",ref:s,accept:"video/*",handler:r},{type:"documents",icon:Un,label:"Document",ref:a,accept:".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx",handler:n},{type:"poll",icon:ta,label:"Poll",handler:i}];return e.jsxs(e.Fragment,{children:[e.jsx(an,{my:4,borderColor:c}),e.jsx(dt,{spacing:2,justify:"space-between",children:e.jsx(ke,{children:h.map(p=>e.jsx(us.Fragment,{children:p.ref?e.jsxs(e.Fragment,{children:[e.jsx(Te,{size:"sm",leftIcon:e.jsx(ht,{as:p.icon}),variant:"ghost",colorScheme:"blue",onClick:()=>{var x;return(x=p.ref.current)==null?void 0:x.click()},_hover:{bg:u},px:3,children:p.label}),e.jsx("input",{type:"file",multiple:!0,hidden:!0,ref:p.ref,accept:p.accept,onChange:p.handler})]}):e.jsx(Te,{size:"sm",leftIcon:e.jsx(ht,{as:p.icon}),variant:"ghost",colorScheme:"blue",onClick:p.handler,_hover:{bg:u},px:3,children:p.label})},p.type))})})]})},Ho=t=>{const r=t.images||[],n=t.videos||[],i=t.documents||[],o=t.polls||[];return[...r.map(a=>({...a,mediaType:"image"})),...n.map(a=>({...a,mediaType:"video"})),...i.map(a=>({...a,mediaType:"document"})),...o.map(a=>({...a,mediaType:"poll"}))].sort((a,c)=>{if(!a.id||!c.id)return 0;let u=0,h=0;try{typeof a.id=="string"&&a.id.includes("-")&&(u=parseInt(a.id.split("-")[1])||0),typeof c.id=="string"&&c.id.includes("-")&&(h=parseInt(c.id.split("-")[1])||0)}catch(p){console.error("Error parsing attachment ID:",p)}return h-u})},Ff=t=>t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB",wb=({attachments:t,removeAttachment:r})=>{const n=ae("gray.200","gray.600"),i=ae("gray.50","gray.700"),o=us.useMemo(()=>{var a;return[t.images.length>0,t.videos.length>0,t.documents.length>0,((a=t.polls)==null?void 0:a.length)>0].filter(Boolean).length>1},[t]);return t.images.length===0&&t.videos.length===0&&t.documents.length===0&&(!t.polls||t.polls.length===0)?null:e.jsxs(de,{borderWidth:"1px",borderRadius:"lg",p:3,borderColor:n,bg:i,children:[e.jsxs(ke,{justify:"space-between",align:"center",mb:2,children:[e.jsx($,{fontSize:"sm",fontWeight:"medium",children:"Attachments:"}),o&&e.jsx(zr,{colorScheme:"purple",px:2,py:1,borderRadius:"full",fontSize:"xs",children:"Mixed Content"})]}),o&&e.jsxs(ke,{mb:3,gap:3,justify:"flex-start",children:[t.images.length>0&&e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ht,{as:rl,color:"green.500"}),e.jsxs($,{fontSize:"xs",children:[t.images.length," image",t.images.length!==1?"s":""]})]}),t.videos.length>0&&e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ht,{as:Qu,color:"red.500"}),e.jsxs($,{fontSize:"xs",children:[t.videos.length," video",t.videos.length!==1?"s":""]})]}),t.documents.length>0&&e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ht,{as:Un,color:"blue.500"}),e.jsxs($,{fontSize:"xs",children:[t.documents.length," document",t.documents.length!==1?"s":""]})]}),t.polls&&t.polls.length>0&&e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ht,{as:ta,color:"teal.500"}),e.jsxs($,{fontSize:"xs",children:[t.polls.length," poll",t.polls.length!==1?"s":""]})]})]}),Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length>0&&e.jsx(de,{children:Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length===1?e.jsxs(de,{position:"relative",borderRadius:"md",overflow:"hidden",children:[(()=>{const s=Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls})[0];if(s.mediaType==="poll")return e.jsxs(de,{p:4,bg:"blackAlpha.50",borderRadius:"md",children:[e.jsx(ke,{justifyContent:"space-between",alignItems:"flex-start",mb:3,children:e.jsxs(ke,{alignItems:"center",gap:2,children:[e.jsx(ht,{as:ta,color:"teal.500"}),e.jsx($,{fontWeight:"semibold",children:s.question})]})}),e.jsx(ot,{spacing:3,align:"stretch",children:s.options.map((a,c)=>e.jsxs(de,{borderRadius:"md",borderWidth:"1px",p:2,children:[e.jsx($,{fontSize:"sm",mb:1,children:a.text}),e.jsx(Is,{value:0,size:"sm",colorScheme:"teal",borderRadius:"full"})]},a.id))})]});if(s.mediaType==="video")return e.jsx(Ts,{ratio:16/9,children:e.jsx(de,{as:"video",src:s.url,controls:!0,borderRadius:"md"})});if(s.mediaType==="image")return e.jsx(Ts,{ratio:4/3,children:e.jsx(Ir,{src:s.url,alt:s.name,borderRadius:"md",objectFit:"cover"})});if(s.mediaType==="document")return e.jsx(ke,{p:4,borderRadius:"md",bg:"blackAlpha.50",align:"center",justify:"space-between",height:"100px",children:e.jsxs(ke,{align:"center",children:[e.jsx(ht,{as:Un,boxSize:10,mr:3,color:"blue.500"}),e.jsxs(de,{children:[e.jsx($,{fontSize:"md",fontWeight:"medium",noOfLines:1,children:s.name}),e.jsx($,{fontSize:"sm",color:"gray.500",children:Ff(s.size)})]})]})})})(),e.jsx(Ih,{position:"absolute",top:1,right:1,size:"sm",bg:"blackAlpha.700",color:"white",onClick:()=>{const s=Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls})[0],a=s.mediaType==="image"?"images":s.mediaType==="video"?"videos":s.mediaType==="poll"?"polls":"documents";r(a,s.id)},_hover:{bg:"blackAlpha.800"}})]}):e.jsx(Zn,{columns:Math.min(Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length,3),spacing:2,children:Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).map(s=>e.jsxs(de,{position:"relative",borderRadius:"md",overflow:"hidden",children:[s.mediaType==="poll"?e.jsxs(de,{p:3,bg:"blackAlpha.50",borderRadius:"md",height:"100%",children:[e.jsx(ke,{justifyContent:"space-between",alignItems:"flex-start",mb:2,children:e.jsxs(ke,{alignItems:"center",gap:1,children:[e.jsx(ht,{as:ta,color:"teal.500",boxSize:4}),e.jsx($,{fontWeight:"semibold",fontSize:"sm",noOfLines:1,children:s.question})]})}),e.jsxs($,{fontSize:"xs",color:"gray.500",children:[s.options.length," options"]})]}):s.mediaType==="video"?e.jsx(Ts,{ratio:1,children:e.jsx(de,{as:"video",src:s.url,controls:!0,borderRadius:"md"})}):s.mediaType==="image"?e.jsx(Ts,{ratio:1,children:e.jsx(Ir,{src:s.url,alt:s.name,borderRadius:"md",objectFit:"cover"})}):e.jsx(Ts,{ratio:1,children:e.jsxs(ke,{direction:"column",p:3,bg:"blackAlpha.50",align:"center",justify:"center",borderRadius:"md",height:"100%",width:"100%",children:[e.jsx(ht,{as:Un,boxSize:10,mb:2,color:"blue.500"}),e.jsx($,{fontSize:"sm",fontWeight:"medium",noOfLines:1,textAlign:"center",children:s.name}),e.jsx($,{fontSize:"xs",color:"gray.500",children:Ff(s.size)})]})}),e.jsx(Ih,{position:"absolute",top:1,right:1,size:"sm",bg:"blackAlpha.700",color:"white",onClick:()=>{const a=s.mediaType==="image"?"images":s.mediaType==="video"?"videos":"documents";r(a,s.id)},_hover:{bg:"blackAlpha.800"}})]},s.id))})})]})},fu=t=>new Promise((r,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>r(i.result),i.onerror=o=>n(o)}),jb=({isOpen:t,onClose:r,addNewPost:n,updateResource:i,editResource:o,user:s})=>{var Me,_e;const{user:a}=gi(),c=s||a,u=ae("blue.500","blue.200"),h=ae("gray.200","gray.600");ae("gray.50","gray.700");const p=ae("blue.500","blue.200"),x=Hr(),[b,g]=z.useState(""),[_,S]=z.useState(""),[O,k]=z.useState(""),[M,J]=z.useState(!1),[re,N]=z.useState(""),[D,B]=z.useState(""),[U,R]=z.useState(""),[P,w]=z.useState(""),[A,T]=z.useState(!1),[E,ee]=z.useState([]),[Z,y]=z.useState(!1),[se,W]=z.useState(1),[v,Y]=z.useState(1),[C,q]=z.useState(!1),[L,G]=z.useState(""),[Q,ie]=z.useState(["",""]),[ce,le]=z.useState(!1),[xe,we]=z.useState({images:[],videos:[],documents:[],polls:[]}),[ze,De]=z.useState([]),[$e,ve]=z.useState([]),te=z.useMemo(()=>[xe.images.length>0,xe.videos.length>0,xe.documents.length>0,xe.polls.length>0].filter(Boolean).length>1,[xe]);z.useRef(null),z.useEffect(()=>{if(o&&t){if(J(!0),g(o.title||""),S(o.description||""),o.attachments&&Array.isArray(o.attachments)){const Fe={images:[],videos:[],documents:[],polls:[]};o.attachments.forEach(Ee=>{const it=Ee.url?`${ps}${Ee.url}`:`${Hs}/storage/${Ee.file_path}`,Ve={id:Ee.id,url:it,name:Ee.original_name||"File",preview:it};switch(Ee.file_type){case"image":Fe.images.push(Ve);break;case"video":Fe.videos.push(Ve);break;case"document":Fe.documents.push(Ve);break}}),we(Fe)}}else J(!1),g(""),S(""),k(""),N(""),B(""),R(""),w(""),we({images:[],videos:[],documents:[],polls:[]}),De([])},[o,t]),z.useRef(null),z.useRef(null),z.useEffect(()=>{t&&(async(Ee=1)=>{var it,Ve;y(!0);try{const at=localStorage.getItem("major_id"),Lt=localStorage.getItem("faculty_id"),Ct={...at?{major_id:at}:Lt?{faculty_id:Lt}:{},page:Ee,per_page:10},be=await ol(Ct);ee(be.data||[]),W(be.current_page||1),Y(be.last_page||1)}catch(at){x({title:"Failed to fetch courses",description:((Ve=(it=at.response)==null?void 0:it.data)==null?void 0:Ve.message)||at.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})}finally{y(!1)}})(1)},[t]);const Ce=async Fe=>{var Ee,it;if(!(Fe<1||Fe>v)){y(!0);try{const Ve=localStorage.getItem("major_id"),at=localStorage.getItem("faculty_id"),Lt={...Ve?{major_id:Ve}:at?{faculty_id:at}:{},page:Fe,per_page:10},Ct=await ol(Lt);ee(Ct.data||[]),W(Ct.current_page||Fe),Y(Ct.last_page||1)}catch(Ve){x({title:"Failed to fetch courses",description:((it=(Ee=Ve.response)==null?void 0:Ee.data)==null?void 0:it.message)||Ve.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})}finally{y(!1)}}},Be=()=>{g(""),S(""),k(""),N(""),B(""),R(""),w(""),G(""),ie(["",""]),le(!1),we({images:[],videos:[],documents:[],polls:[]}),De([])},Ne=async()=>{var Fe,Ee,it,Ve,at,Lt;if(!b.trim()){x({title:"Title required",description:"Please add a title for your post",status:"error",duration:3e3,isClosable:!0});return}T(!0);try{const Ct={};if(Ct.content=_,Ct.title=b,Ct.type=O||"Default",!O&&te?Ct.type="Mixed Content":xe.images.length>0&&!O&&!te||xe.videos.length>0&&!O&&!te?Ct.type="Media":xe.documents.length>0&&!O&&!te?Ct.type="Course Material":xe.polls.length>0&&!O&&!te&&(Ct.type="Poll"),M&&o)try{console.log("Updating resource with ID:",o.id);const be=new FormData;if(b.trim()&&be.append("title",b.trim()),_.trim()&&be.append("description",_.trim()),ze&&ze.length>0?(console.log(`Adding ${ze.length} new attachment(s)`),console.log("Attachment files to add:",ze),ze.forEach(st=>{be.append("attachments[]",st),console.log("Added file to form data:",st.name)})):console.log("No new attachment files to add"),$e&&$e.length>0&&(console.log(`Removing ${$e.length} attachment(s):`,$e),$e.forEach(st=>{be.append("remove_attachments[]",st)})),console.log("Resource ID for update:",o.id),!o.id)throw new Error("Cannot update resource: Missing resource ID");if(typeof i=="function"){const st={id:o.id,title:b.trim(),description:_.trim(),newAttachments:ze,removeAttachmentIds:$e};console.log("[CreatePostModal.jsx] Calling props.updateResource with:",JSON.stringify(st,(Ie,et)=>et instanceof File?et.name:et,2)),await i(st)}else console.log(`Updating resource ${o.id} with:`,{title:b.trim(),description:_.trim(),newAttachments:ze,removeAttachmentIds:$e}),console.log(`Attachment files count: ${ze.length}`),console.log(`Attachments to remove count: ${$e.length}`),await a0(o.id,{title:b.trim(),description:_.trim(),newAttachments:ze,removeAttachmentIds:$e});x({title:"Resource updated",description:"Your resource has been successfully updated with attachment changes",status:"success",duration:3e3,isClosable:!0}),r()}catch(be){console.error("Error updating resource with attachments:",be),x({title:"Update failed",description:((Ee=(Fe=be.response)==null?void 0:Fe.data)==null?void 0:Ee.message)||"Failed to update the resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}else{const be=localStorage.getItem("major_id")||s&&(s.major_id||((it=s.major)==null?void 0:it.id)),st=localStorage.getItem("faculty_id")||s&&(s.faculty_id||((Ve=s.faculty)==null?void 0:Ve.id));if(!be||!st){x({title:"Missing profile information",description:"Your major or faculty information is missing. Please re-login or complete your profile before posting.",status:"error",duration:4e3,isClosable:!0}),T(!1);return}const Ie=new FormData;if(Ie.append("title",b.trim()),Ie.append("description",_.trim()),Ie.append("type",Ct.type),Ie.append("major_id",be),Ie.append("faculty_id",st),re&&Ie.append("course_id",re),O==="event"?(Ie.append("event_date",D),Ie.append("location",U)):O==="study_group"&&Ie.append("study_date",P),ce&&(Ie.append("poll[question]",L),Q.forEach(et=>{et.trim()&&Ie.append("poll[options][]",et.trim())})),ze.forEach(et=>{Ie.append("attachments[]",et)}),typeof n=="function"){const et=localStorage.getItem("major_id"),Tt=localStorage.getItem("faculty_id"),Le={title:Ct.title,type:Ct.type,attachments:ze,course_id:re,major_id:et,faculty_id:Tt};ce&&(Le.poll={question:L,options:Q.filter(We=>We.trim()!=="")}),await n(Ct.content,Le.type,Le)}else await n(Ie);Be(),r()}}catch(Ct){console.error("Error with resource:",Ct),x({title:"Error",description:((Lt=(at=Ct.response)==null?void 0:at.data)==null?void 0:Lt.message)||"Failed to process resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}finally{T(!1)}},ue=async Fe=>{const Ee=Array.from(Fe.target.files);if(Ee.length!==0)try{x({title:"Uploading images...",status:"info",duration:2e3,isClosable:!0});const it=[],Ve=[];for(const at of Ee){if(!at.type.startsWith("image/")){x({title:"Invalid file type",description:`${at.name} is not an image file.`,status:"error",duration:3e3,isClosable:!0});continue}if(Ve.push(at),at.size>5*1024*1024){x({title:"File too large",description:`${at.name} exceeds the 5MB limit.`,status:"error",duration:3e3,isClosable:!0});continue}const Lt=Date.now(),Ct=Math.random().toString(36).substring(2,9),be=`img-${Lt}-${Ct}`,st=await fu(at);it.push({id:be,name:at.name,type:at.type,size:at.size,url:st})}De(at=>[...at,...Ve]),we(at=>{const Lt=at.videos.length>0||at.documents.length>0;return Lt&&!O?k("Mixed Content"):!Lt&&!O&&k("Media"),{...at,images:[...at.images,...it]}}),it.length>0&&x({title:"Images uploaded successfully",status:"success",duration:3e3,isClosable:!0})}catch(it){x({title:"Error uploading images",description:it.message,status:"error",duration:3e3,isClosable:!0})}},Je=async Fe=>{const Ee=Array.from(Fe.target.files);if(Ee.length!==0)try{T(!0);const it=Ee.filter(be=>be.type.startsWith("video/")||be.name.match(/\.(mp4|mov|avi|wmv|flv|webm|mkv)$/i));it.length!==Ee.length&&x({title:"Invalid file type",description:"Only video files are allowed for video upload",status:"warning",duration:3e3,isClosable:!0});const Ve=20*1024*1024,at=it.filter(be=>be.size<=Ve);at.length!==it.length&&x({title:"File too large",description:"Some videos exceed the 20MB size limit and will be skipped",status:"warning",duration:3e3,isClosable:!0});const Ct=(await Promise.all(at.map(async be=>{try{const st=await fu(be);return{id:`video-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:be.name,url:st,size:be.size,type:"video",mimeType:be.type||"video/mp4"}}catch(st){return console.error(`Error processing video ${be.name}:`,st),null}}))).filter(be=>be!==null);Ct.length>0?(we(be=>{const st=be.images.length>0||be.documents.length>0;return O!=="Media"&&!st?k("Media"):st&&!O&&k("Mixed Content"),{...be,videos:[...be.videos,...Ct].slice(0,2)}}),De(be=>[...be,...at]),x({title:"Videos uploaded",description:`Successfully added ${Ct.length} videos`,status:"success",duration:3e3,isClosable:!0})):x({title:"Upload failed",description:"Failed to process any videos. Please try different files.",status:"error",duration:3e3,isClosable:!0}),Fe.target.value=null}catch(it){console.error("Error processing videos:",it),x({title:"Error uploading videos",description:"Please try again with different videos",status:"error",duration:3e3,isClosable:!0})}finally{T(!1)}},Ke=async Fe=>{const Ee=Array.from(Fe.target.files);if(Ee.length!==0)try{T(!0);const it=Ee.filter(be=>be.name.match(/\.(pdf|doc|docx|xls|xlsx|ppt|pptx|txt)$/i));it.length!==Ee.length&&x({title:"Invalid file type",description:"Only document file types (PDF, Word, Excel, PowerPoint, etc.) are allowed",status:"warning",duration:3e3,isClosable:!0});const Ve=10*1024*1024,at=it.filter(be=>be.size<=Ve);at.length!==it.length&&x({title:"File too large",description:"Some documents exceed the 10MB size limit and will be skipped",status:"warning",duration:3e3,isClosable:!0});const Ct=(await Promise.all(at.map(async be=>{try{const st=await fu(be),Ie=be.name.split(".").pop().toLowerCase();let et=be.type||"application/octet-stream";return(!be.type||be.type==="application/octet-stream")&&(Ie==="pdf"?et="application/pdf":["doc","docx"].includes(Ie)?et="application/msword":["xls","xlsx"].includes(Ie)?et="application/vnd.ms-excel":["ppt","pptx"].includes(Ie)?et="application/vnd.ms-powerpoint":Ie==="txt"&&(et="text/plain")),{id:`doc-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:be.name,url:st,size:be.size,type:"document",mimeType:et}}catch(st){return console.error(`Error processing document ${be.name}:`,st),null}}))).filter(be=>be!==null);Ct.length>0?(we(be=>{const st=be.images.length>0||be.videos.length>0;return O!=="Course Material"&&!st?k("Course Material"):st&&!O&&k("Mixed Content"),{...be,documents:[...be.documents,...Ct].slice(0,4)}}),De(be=>[...be,...at]),x({title:"Documents uploaded",description:`Successfully added ${Ct.length} documents`,status:"success",duration:3e3,isClosable:!0})):x({title:"Upload failed",description:"Failed to process any documents. Please try different files.",status:"error",duration:3e3,isClosable:!0}),Fe.target.value=null}catch(it){console.error("Error processing documents:",it),x({title:"Error uploading documents",description:"Please try again with different documents",status:"error",duration:3e3,isClosable:!0})}finally{T(!1)}},ut=(Fe,Ee)=>{const it=xe[Fe].find(Ve=>Ve.id===Ee);we(Ve=>{const at={...Ve};return at[Fe]=Ve[Fe].filter(Lt=>Lt.id!==Ee),at}),M&&it&&!isNaN(parseInt(it.id))&&(console.log(`Adding attachment ${it.id} to removal list`),ve(Ve=>[...Ve,it.id])),it&&De(Ve=>Ve.filter(at=>at.name!==it.name))},Ye=()=>{q(!0)},Se=()=>{Q.length<6?ie([...Q,""]):x({title:"Maximum poll options reached",description:"You can add up to 6 options",status:"warning",duration:2e3,isClosable:!0})},ye=Fe=>{if(Q.length>1){const Ee=[...Q];Ee.splice(Fe,1),ie(Ee)}else x({title:"Minimum poll options required",description:"You need at least 1 option for a poll",status:"warning",duration:2e3,isClosable:!0})},Ae=()=>{if(!L.trim()){x({title:"Poll question is required",status:"error",duration:2e3,isClosable:!0});return}const Fe=Q.filter(Ve=>Ve.trim()!=="");if(Fe.length<1){x({title:"At least 1 poll option is required",status:"error",duration:2e3,isClosable:!0});return}const Ee=`poll-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,it={id:Ee,question:L,options:Fe.map((Ve,at)=>({id:`option-${at}-${Ee}`,text:Ve,votes:0})),createdAt:new Date().toISOString(),voters:[]};we(Ve=>{const at=Ve.images.length>0||Ve.videos.length>0||Ve.documents.length>0;return at&&!O?k("Mixed Content"):!at&&!O&&k("Poll"),{...Ve,polls:[it]}}),le(!0),q(!1),x({title:"Poll added successfully",status:"success",duration:2e3,isClosable:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs(wn,{isOpen:t,onClose:r,size:"lg",children:[e.jsx(Wr,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),e.jsxs(jn,{borderRadius:"2xl",mx:4,overflow:"hidden",children:[e.jsx(rn,{bg:ae("gray.50","gray.800"),borderBottomWidth:"1px",borderColor:h,pb:4,pt:3,children:e.jsxs(ke,{align:"center",gap:3,children:[e.jsx(Fr,{src:(c==null?void 0:c.avatar_url)||(c==null?void 0:c.avatar)||"https://i.pravatar.cc/150?img=12",size:"md",name:`${(c==null?void 0:c.first_name)||""} ${(c==null?void 0:c.last_name)||""}`.trim()||"You",border:"2px solid",borderColor:u}),e.jsxs(ot,{align:"start",spacing:0,children:[e.jsx($,{fontWeight:"bold",lineHeight:"short",color:p,children:`${(c==null?void 0:c.first_name)||""} ${(c==null?void 0:c.last_name)||""}`.trim()||"You"}),e.jsx(dt,{spacing:1,mt:1,children:e.jsx($,{fontSize:"xs",color:ae("gray.500","gray.400"),children:"Visible to everyone"})})]})]})}),e.jsx(cn,{size:"lg",mt:1}),e.jsx(Ur,{pt:5,pb:2,children:e.jsxs(ot,{spacing:5,align:"stretch",children:[e.jsxs(mt,{children:[e.jsx(xt,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,color:ae("gray.700","gray.300"),children:"Title"}),e.jsx(Ft,{placeholder:"Enter a title for your post...",value:b,onChange:Fe=>g(Fe.target.value),size:"md",borderRadius:"md",borderWidth:"2px",bg:ae("white","gray.700"),p:3,_placeholder:{color:ae("gray.400","gray.400")},_focus:{borderColor:u,boxShadow:`0 0 0 1px ${u}`}})]}),e.jsxs(mt,{children:[e.jsx(xt,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,color:ae("gray.700","gray.300"),children:"Content"}),e.jsx(ri,{placeholder:"Share your knowledge, resources, or ask a question...",value:_,onChange:Fe=>S(Fe.target.value),size:"md",borderRadius:"md",borderWidth:"2px",bg:ae("white","gray.700"),minHeight:"140px",p:3,_placeholder:{color:ae("gray.400","gray.400")},_focus:{borderColor:u,boxShadow:`0 0 0 1px ${u}`}}),e.jsx(ke,{justify:"flex-end",mt:1.5,children:e.jsxs($,{fontSize:"xs",color:_.length>480?"orange.500":"gray.500",children:[_.length,"/500 characters"]})})]}),e.jsxs(mt,{children:[e.jsx(xt,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,children:"Course"}),e.jsxs(un,{children:[e.jsx(hn,{as:Te,rightIcon:e.jsx(hs,{}),w:"100%",variant:"outline",textAlign:"left",fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:re&&E.length>0?`${(Me=E.find(Fe=>Fe.id===Number(re)))==null?void 0:Me.code} - ${(_e=E.find(Fe=>Fe.id===Number(re)))==null?void 0:_e.title}`:"Select course"}),e.jsxs(fn,{maxH:"320px",overflowY:"auto",children:[Z?e.jsx(ke,{justify:"center",align:"center",h:"100px",children:e.jsx(qr,{})}):E.map(Fe=>{var Ee;return e.jsx(Zt,{onClick:()=>N(Fe.id),children:e.jsxs(de,{children:[e.jsxs($,{fontWeight:"medium",children:[Fe.code," - ",Fe.title]}),e.jsx($,{fontSize:"sm",color:"gray.500",children:(Ee=Fe.major)==null?void 0:Ee.name})]})},Fe.id)}),v>1&&e.jsx(de,{borderTop:"1px solid",borderColor:h,mt:2,pt:2,px:2,children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"xs",variant:"outline",onClick:Fe=>{Fe.stopPropagation(),Ce(se-1)},isDisabled:se<=1||Z,children:"Prev"}),e.jsxs($,{fontSize:"xs",color:"gray.500",children:["Page ",se," of ",v]}),e.jsx(Te,{size:"xs",variant:"outline",onClick:Fe=>{Fe.stopPropagation(),Ce(se+1)},isDisabled:se>=v||Z,children:"Next"})]})})]})]})]}),e.jsx(wb,{attachments:xe,removeAttachment:ut}),e.jsx(vb,{handleImageUpload:ue,handleVideoUpload:Je,handleDocumentUpload:Ke,handlePollAdd:Ye})]})}),e.jsx(dn,{justifyContent:"end",px:4,py:3,borderTopWidth:"1px",borderColor:h,children:e.jsx(Te,{colorScheme:"blue",leftIcon:e.jsx(yp,{}),isLoading:A,onClick:Ne,children:"Post"})})]})]}),e.jsxs(wn,{isOpen:C,onClose:()=>q(!1),size:"md",children:[e.jsx(Wr,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),e.jsxs(jn,{borderRadius:"xl",children:[e.jsx(rn,{children:"Create Poll"}),e.jsx(cn,{}),e.jsx(Ur,{pb:6,children:e.jsxs(ot,{spacing:4,align:"stretch",children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Poll Question"}),e.jsx(Ft,{placeholder:"Enter your question",value:L,onChange:Fe=>G(Fe.target.value),autoFocus:!0})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Poll Options"}),e.jsx(ot,{spacing:2,align:"stretch",children:Q.map((Fe,Ee)=>e.jsxs(ke,{alignItems:"center",children:[e.jsx(Ft,{placeholder:`Option ${Ee+1}`,value:Fe,onChange:it=>{const Ve=[...Q];Ve[Ee]=it.target.value,ie(Ve)},mr:2}),Q.length>2&&e.jsx(Te,{size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>ye(Ee),children:e.jsx(ht,{as:dl})})]},Ee))})]}),e.jsx(Te,{leftIcon:e.jsx(ht,{as:pi}),variant:"outline",colorScheme:"blue",size:"sm",onClick:Se,isDisabled:Q.length>=6,children:"Add Option"})]})}),e.jsxs(dn,{children:[e.jsx(Te,{colorScheme:"blue",mr:3,leftIcon:e.jsx(ht,{as:ta}),onClick:Ae,children:"Create Poll"}),e.jsx(Te,{onClick:()=>{G(""),ie(["",""]),q(!1)},children:"Cancel"})]})]})]})]})},Sb=async()=>{try{return(await gt.get("/registration/faculties")).data}catch(t){return console.error("Error fetching faculties:",t),[]}},Cb=async t=>{if(!t)return[];try{return(await gt.get(`/registration/faculties/${t}/majors`)).data}catch(r){return console.error("Error fetching majors:",r),[]}},_b=async(t,r=1)=>{if(!t)return{data:[],current_page:1,last_page:1};try{return(await gt.get("/courses",{params:{major_id:t,page:r}})).data}catch(n){return console.error("Error fetching courses:",n),{data:[],current_page:1,last_page:1}}},kb=()=>{const t=ae("rgba(255, 255, 255, 0.8)","rgba(45, 55, 72, 0.8)"),r=ae("gray.800","white"),n=ae("gray.500","gray.400"),i=ae("blue.500","blue.200"),o=ae("brand.navy","rgba(74, 85, 104, 0.3)");ae("gray.50","gray.800"),ae("blue.50","blue.900");const s=ae("linear-gradient(135deg, #f0f4f8 0%, #eff6ff 50%, #f0f4f8 100%)","linear-gradient(135deg, #1a202c 0%, #2d3748 50%, #1a202c 100%)"),a=Hr(),c=Jr();Yr();const{isOpen:u,onOpen:h,onClose:p}=Yr(),x=()=>{ve(null),p()},[b,g]=z.useState("feed"),[_,S]=z.useState(!0),[O,k]=z.useState("All"),[M,J]=z.useState("All"),[re,N]=z.useState("All"),[D,B]=z.useState(""),[U,R]=z.useState(!1),[P,w]=z.useState([]),[A,T]=z.useState([]),[E,ee]=z.useState({data:[],current_page:1,last_page:1}),[Z,y]=z.useState(1),[se,W]=z.useState(!1),{user:v}=gi(),[Y,C]=z.useState([]),[q,L]=z.useState(1),[G,Q]=z.useState(1),[ie,ce]=z.useState(!1),[le,xe]=z.useState(0),[we,ze]=z.useState(!0),De=z.useRef(null),[$e,ve]=z.useState(null);z.useEffect(()=>{(async()=>{W(!0);const Se=await Sb();w(Se);const ye=JSON.parse(localStorage.getItem("user"));ye!=null&&ye.faculty_id&&k(ye.faculty_id),W(!1)})()},[]),z.useEffect(()=>{if(!O||O==="All"){T([]),N("All");return}(async()=>{W(!0);const Se=await Cb(O);T(Se);const ye=JSON.parse(localStorage.getItem("user"));ye!=null&&ye.major_id&&parseInt(ye.faculty_id)===parseInt(O)?N(ye.major_id):N("All"),W(!1)})()},[O]),z.useEffect(()=>{if(!re||re==="All"){ee({data:[],current_page:1,last_page:1}),J("All"),y(1);return}(async Se=>{W(!0);const ye=await _b(re,Se);ee(ye),W(!1)})(Z)},[re,Z]);const te=z.useCallback(async(Ye=1,Se=!1)=>{var ye,Ae;Ye===1?S(!0):ce(!0);try{const Me={page:Ye,per_page:10,faculty_id:O!=="All"?O:void 0,major_id:re!=="All"?re:void 0,course_id:M!=="All"?M:void 0,search:D||void 0};Object.keys(Me).forEach(it=>Me[it]===void 0&&delete Me[it]);const _e=await s0(Me,!0),Fe=Array.isArray(_e)?_e:_e.data||[],Ee=_e.pagination||{};Se&&Ye>1?C(it=>[...it,...Fe]):C(Fe),L(Ee.current_page||Ye),Q(Ee.last_page||1),ze(Ee.current_page<Ee.last_page)}catch(Me){console.error("Error loading resource data:",Me),a({title:"Error loading resources",description:((Ae=(ye=Me.response)==null?void 0:ye.data)==null?void 0:Ae.message)||"There was a problem loading the API resource data.",status:"error",duration:3e3,isClosable:!0})}finally{S(!1),ce(!1)}},[O,re,M,D,a]);z.useEffect(()=>{te(1,!1),L(1),ze(!0)},[te]),z.useEffect(()=>{const Ye=new IntersectionObserver(ye=>{const[Ae]=ye;Ae.isIntersecting&&we&&!ie&&!_&&te(q+1,!0)},{threshold:1}),Se=De.current;return Se&&Ye.observe(Se),()=>{Se&&Ye.unobserve(Se)}},[q,we,ie,_,te]);const Ce=z.useCallback(Ye=>{c(`/resources/${Ye}`)},[c]),Be=z.useCallback((Ye,Se)=>{const ye=Y.findIndex(Fe=>Fe.id===Ye);if(ye===-1)return;const Ae=Y[ye],Me=Ae.is_saved,_e=[...Y];_e[ye]={...Ae,is_saved:!Me},C(_e),rd(Ye).then(Fe=>{a(Qd(`${Me?"Removed from":"Added to"} bookmarks: ${Se}`,null,2e3));const Ee=typeof(Fe==null?void 0:Fe.is_saved)=="boolean"?Fe.is_saved:!Me,it=[...Y];it[ye]={...it[ye],is_saved:Ee},C(it)}).catch(Fe=>{ds("handleBookmark",Fe);const Ee=[...Y];Ee[ye]={...Ae,is_saved:Me},C(Ee),a(cs(Fe,`Failed to ${Me?"remove from":"add to"} bookmarks`))})},[Y,a]),Ne=z.useCallback(Ye=>{const Se=Y.findIndex(_e=>_e.id===Ye);if(Se===-1)return;const ye=Y[Se],Ae={...ye,is_upvoted:!ye.is_upvoted,upvote_count:ye.upvote_count+(ye.is_upvoted?-1:1)},Me=[...Y];Me[Se]=Ae,C(Me),nh(Ye).then(_e=>{const Fe=Y.findIndex(it=>it.id===Ye);if(Fe===-1)return;const Ee=[...Y];Ee[Fe]={...Ee[Fe],is_upvoted:_e.upvoted,upvote_count:_e.upvote_count},C(Ee)}).catch(_e=>{ds("toggleUpvote",_e);const Fe=Y.findIndex(Ve=>Ve.id===Ye);if(Fe===-1)return;const Ee={...Y[Fe],is_upvoted:ye.is_upvoted,upvote_count:ye.upvote_count},it=[...Y];it[Fe]=Ee,C(it),a(cs(_e,"Failed to update upvote"))})},[Y,a]);z.useCallback(async(Ye,Se)=>{try{const ye=await addComment(Ye,Se),Ae=Y.findIndex(_e=>_e.id===Ye);if(Ae===-1)return;const Me=[...Y];return Me[Ae]={...Me[Ae],comment_count:ye.comment_count},C(Me),a(Qd("Comment added",null,2e3)),ye.comment}catch(ye){ds("handleAddComment",ye),a(cs(ye,"Failed to add comment"))}},[Y,a]);const ue=z.useCallback((Ye,Se)=>{console.log(`Resource ${Ye} shared via ${Se||"general"}`),(!Se||Se==="general")&&a({title:`Shared resource #${Ye}`,status:"info",duration:1500,isClosable:!0})},[a]),Je=(Ye,Se,ye)=>{S(!0);const Ae=ye.title||"New Resource",Me=Ye,_e=ye.attachments||[];_e.length>0&&console.log(`Uploading ${_e.length} attachments with resource`);const Fe={title:Ae,description:Me,attachments:_e,course_id:ye.course_id,major_id:ye.major_id,faculty_id:ye.faculty_id,type:Se};ye.poll&&ye.poll.question&&ye.poll.options&&(Fe.poll={question:ye.poll.question,options:ye.poll.options},console.log("Adding poll data to createResource payload:",Fe.poll)),o0(Fe).then(Ee=>{a({title:"Resource submitted successfully",description:"Your resource has been submitted and is pending approval. You will be notified once it is reviewed.",status:"success",duration:5e3,isClosable:!0})}).catch(Ee=>{var it,Ve;console.error("Error creating resource:",Ee),a({title:"Failed to create resource",description:Ee.message||((Ve=(it=Ee.response)==null?void 0:it.data)==null?void 0:Ve.message)||"Please try again later",status:"error",duration:3e3,isClosable:!0})}).finally(()=>{S(!1)})},Ke=z.useCallback(Ye=>{ve({id:Ye.id,title:Ye.title,description:Ye.description,attachments:Ye.attachments||[]}),h()},[h]),ut=z.useCallback(async Ye=>{try{C(Se=>Se.filter(ye=>ye.id!==Ye))}catch(Se){ds("handleDelete",Se),a(cs(Se,"There was a problem updating the UI after deletion"))}},[a]);return e.jsxs(de,{position:"relative",bg:s,minH:"calc(100vh - 60px)",py:5,px:{base:4,md:6,lg:8},overflow:"hidden",children:[e.jsx(de,{position:"absolute",top:"5%",right:"5%",width:"300px",height:"300px",borderRadius:"full",bg:"brand.navy",opacity:"0.05",filter:"blur(70px)",zIndex:0}),e.jsx(de,{position:"absolute",bottom:"10%",left:"5%",width:"250px",height:"250px",borderRadius:"full",bg:"brand.gold",opacity:"0.08",filter:"blur(60px)",zIndex:0}),_&&le<100&&e.jsx(de,{position:"fixed",top:"0",left:"0",right:"0",zIndex:"1000",children:e.jsx(Is,{size:"xs",value:le,colorScheme:"blue",isAnimated:!0})}),e.jsxs(ke,{maxW:"1400px",mx:"auto",gap:{base:2,md:4,lg:6},px:{base:2,md:4},children:[e.jsx(jb,{isOpen:u,onClose:x,user:v,addNewPost:Je,editResource:$e,updateResource:async Ye=>{var Se,ye;try{const{updateResource:Ae}=await ho(async()=>{const{updateResource:_e}=await Promise.resolve().then(()=>Rx);return{updateResource:_e}},void 0);console.log("Updating resource with full data:",Ye),console.log("Attachments data received:",{newAttachments:Ye.newAttachments||[],attachmentFiles:Ye.attachmentFiles||[],removeAttachmentIds:Ye.removeAttachmentIds||[],attachmentsToRemove:Ye.attachmentsToRemove||[]});const Me=await Ae(Ye.id,{title:Ye.title,description:Ye.description,newAttachments:Ye.attachmentFiles||Ye.newAttachments||[],removeAttachmentIds:Ye.attachmentsToRemove||Ye.removeAttachmentIds||[]});return C(_e=>_e.map(Fe=>Fe.id===Ye.id?{...Fe,...Me}:Fe)),a(Qd("Resource updated",((Se=Ye.attachmentsToRemove)==null?void 0:Se.length)>0||((ye=Ye.newAttachments)==null?void 0:ye.length)>0?"Resource and attachments updated successfully":"Resource updated successfully",3e3)),Me}catch(Ae){throw ds("updateResource",Ae),a(cs(Ae,"Failed to update the resource")),Ae}}}),e.jsx(de,{flex:"1",maxW:{base:"100%",lg:"calc(100% - 340px)"},order:{base:1,lg:1},children:e.jsxs(ot,{spacing:6,align:"stretch",children:[e.jsxs(dt,{spacing:4,children:[e.jsx(Ut,{icon:e.jsx(Hn,{}),"aria-label":"Go back",onClick:()=>c(-1),variant:"ghost",borderRadius:"full"}),e.jsx(ft,{size:"xl",color:r,fontWeight:"700",children:"Resources Feed"})]}),e.jsxs(de,{position:"sticky",top:"0",zIndex:"10",py:4,backdropFilter:"blur(10px)",mb:4,children:[e.jsxs(ke,{align:"center",gap:4,maxW:"1000px",mx:"auto",children:[e.jsxs(Er,{size:"lg",flex:"1",children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ha,{color:"gray.400"})}),e.jsx(Ft,{placeholder:"Search resources...",bg:ae("white","gray.700"),borderRadius:"full",boxShadow:"0px 3px 10px rgba(0, 0, 0, 0.05)",value:D,onChange:Ye=>B(Ye.target.value),borderColor:ae("rgba(226, 232, 240, 0.8)","gray.600"),_focus:{boxShadow:"0px 4px 12px rgba(66, 153, 225, 0.15)",borderColor:ae("blue.300","blue.400")},_hover:{borderColor:ae("blue.200","blue.500")}}),D&&e.jsx(Cc,{children:e.jsx(Ut,{size:"sm",variant:"ghost",icon:e.jsx(Hn,{}),onClick:()=>B(""),"aria-label":"Clear search",borderRadius:"full"})})]}),e.jsx(Te,{leftIcon:e.jsx(Hc,{}),onClick:()=>R(!U),bg:U?"blue.500":ae("white","gray.700"),color:U?"white":r,borderRadius:"full",boxShadow:"0px 3px 10px rgba(0, 0, 0, 0.05)",borderColor:ae("rgba(226, 232, 240, 0.8)","gray.600"),border:"1px solid",_hover:{bg:U?"blue.600":ae("gray.50","gray.600"),transform:"translateY(-2px)",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.08)"},transition:"all 0.2s ease-in-out",children:e.jsx($,{as:"span",children:"Filter"})})]}),U&&e.jsx(de,{mt:4,bg:t,p:4,borderRadius:"lg",boxShadow:"md",children:e.jsx(bb,{searchQuery:D,facultyFilter:O,setFacultyFilter:k,courseFilter:M,setCourseFilter:J,majorFilter:re,setMajorFilter:N,faculties:P,majors:A,courses:E.data,coursePagination:E,onCoursePageChange:y,isLoadingFilters:se,showFilters:U,onToggleFilters:()=>R(!U),onClearFilters:()=>{k("All"),J("All"),N("All")}})})]}),e.jsx(de,{bg:t,borderRadius:"xl",boxShadow:"sm",p:3,mb:6,border:"1px solid",borderColor:o,_hover:{boxShadow:"md",transform:"translateY(-1px)"},transition:"all 0.2s ease",children:e.jsxs(dt,{spacing:3,children:[e.jsx(Fr,{size:"md",name:v?`${v.first_name} ${v.last_name}`:"User",src:(v==null?void 0:v.avatar_url)||(v==null?void 0:v.avatar),cursor:"pointer",border:"2px solid",borderColor:ae("blue.200","blue.700")}),e.jsx(de,{flex:"1",bg:ae("gray.50","gray.700"),borderRadius:"full",px:4,py:2.5,cursor:"pointer",onClick:h,_hover:{bg:ae("gray.100","gray.600")},transition:"all 0.2s",border:"1px solid",borderColor:ae("gray.200","gray.600"),children:e.jsx($,{color:n,fontSize:"sm",children:"What's on your mind?"})})]})}),e.jsxs(de,{w:"full",maxW:{base:"100%",md:"650px",lg:"100%"},mx:"auto",position:"relative",children:[e.jsx(xb,{resources:Y,cardBg:t,textColor:r,mutedText:n,borderColor:o,isLoading:_,feedType:b,currentUser:v,onCardClick:Ce,onBookmark:Be,onUpvote:Ne,onShare:ue,onEdit:Ke,onDelete:ut}),we&&e.jsx(de,{ref:De,py:6,textAlign:"center",children:ie?e.jsx(qr,{size:"md",color:i,thickness:"3px",speed:"0.65s"}):e.jsx($,{fontSize:"sm",color:n,children:"Scroll for more"})}),!we&&Y.length>10&&e.jsx(de,{py:6,textAlign:"center",children:e.jsx($,{fontSize:"sm",color:n,children:"No more resources to load."})})]})]})}),e.jsx(de,{display:{base:"none",lg:"block"},order:{base:2,lg:2},width:"320px",flexShrink:"0",children:e.jsx(de,{position:"sticky",top:"20px",width:"320px",maxHeight:"calc(100vh - 40px)",overflowY:"auto",paddingRight:"2",css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{background:ae("rgba(0,0,0,0.1)","rgba(255,255,255,0.1)"),borderRadius:"24px"}},children:e.jsx(yb,{limit:5})})})]})]})},If=async(t=1,r="")=>{var n;try{return(await gt.get("/clubs",{params:{page:t,query:r||void 0},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to fetch clubs"}}},Ab=async t=>{var r;try{return(await gt.post("/clubs",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to create club"}}},Lb=async(t,r)=>{var n;try{return(await gt.post(`/clubs/${t}/events`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to create club event"}}},Pb=async t=>{var r;try{return(await gt.post(`/clubs/${t}/join`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to join club"}}},Nb=async t=>{var r;try{return(await gt.post(`/clubs/${t}/leave`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to leave club"}}},oc=async(t=1)=>{var r;try{return(await gt.get(`/my-clubs?page=${t}`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch your clubs"}}},Ob=async(t,r)=>{var n;try{return(await gt.post(`/clubs/${t}/candidates`,{name:r})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to add candidate"}}},Rb=async t=>{var r;try{return(await gt.get(`/clubs/${t}/candidates`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to get candidates"}}},Eb=async(t,r)=>{var n;try{return(await gt.post(`/clubs/${t}/vote`,r)).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to cast vote"}}},L0=async t=>{var r;try{return(await gt.get(`/clubs/${t}/results`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to get vote results"}}},Tb=async t=>{var r;try{return(await gt.get(`/clubs/${t}/vote-status`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to get vote status"}}},Fb=async()=>{var t;try{return((t=(await gt.get("/voting-status")).data)==null?void 0:t.voting_status)||"closed"}catch(r){return console.error("Error getting voting status:",r),"closed"}},Ib=async t=>{var r;try{return(await gt.post("/voting-status",{voting_status:t})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to update voting system status"}}},zb=async(t,r)=>{var n;try{const i={};let o=`/clubs/${t}`;return r instanceof FormData&&(o+="?_method=PUT",i.headers={"Content-Type":"multipart/form-data"}),(await gt.post(o,r,i)).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to update club"}}},Db=async t=>{var r;try{return(await gt.delete(`/clubs/${t}`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to delete club"}}},Mb=({isOpen:t,onClose:r,onClubCreated:n})=>{const[i,o]=z.useState(""),[s,a]=z.useState(""),[c,u]=z.useState(null),[h,p]=z.useState(!1),x=Hr(),b=_=>{u(_.target.files[0])},g=async _=>{_.preventDefault(),p(!0);const S=new FormData;S.append("name",i),S.append("description",s),c&&S.append("logo",c);try{await Ab(S),x({title:"Club created.",description:"The new club has been successfully created.",status:"success",duration:5e3,isClosable:!0}),n(),r()}catch(O){x({title:"Creation failed.",description:O.message||"Could not create the club.",status:"error",duration:5e3,isClosable:!0})}finally{p(!1)}};return e.jsxs(wn,{isOpen:t,onClose:r,children:[e.jsx(Wr,{}),e.jsxs(jn,{as:"form",onSubmit:g,children:[e.jsx(rn,{children:"Create a New Club"}),e.jsx(cn,{}),e.jsx(Ur,{children:e.jsxs(ot,{spacing:4,children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Club Name"}),e.jsx(Ft,{value:i,onChange:_=>o(_.target.value),placeholder:"Enter club name"})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Description"}),e.jsx(ri,{value:s,onChange:_=>a(_.target.value),placeholder:"Tell us about the club"})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Club Logo"}),e.jsx(Ft,{type:"file",onChange:b,accept:"image/*"})]})]})}),e.jsxs(dn,{children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:r,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",type:"submit",isLoading:h,children:"Create Club"})]})]})]})},Bb=({isOpen:t,onClose:r,club:n,onEventCreated:i})=>{const[o,s]=z.useState(""),[a,c]=z.useState(""),[u,h]=z.useState(""),[p,x]=z.useState(""),[b,g]=z.useState(""),[_,S]=z.useState(null),[O,k]=z.useState(!1),M=Hr(),J=N=>{S(N.target.files[0])},re=async N=>{if(N.preventDefault(),!n)return;k(!0);const D=new FormData;D.append("title",o),D.append("event_datetime",a),D.append("location",u),D.append("description",p),D.append("speaker_names",b),_&&D.append("image_path",_);try{await Lb(n.id,D),M({title:"Event created.",description:`The event for ${n.name} has been successfully created.`,status:"success",duration:5e3,isClosable:!0}),i(),r()}catch(B){M({title:"Creation failed.",description:B.message||"Could not create the event.",status:"error",duration:5e3,isClosable:!0})}finally{k(!1)}};return e.jsxs(wn,{isOpen:t,onClose:r,children:[e.jsx(Wr,{}),e.jsxs(jn,{as:"form",onSubmit:re,children:[e.jsxs(rn,{children:["Create Event for ",n==null?void 0:n.name]}),e.jsx(cn,{}),e.jsx(Ur,{children:e.jsxs(ot,{spacing:4,children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Event Title"}),e.jsx(Ft,{value:o,onChange:N=>s(N.target.value),placeholder:"Enter event title"})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Date and Time"}),e.jsx(Ft,{type:"datetime-local",value:a,onChange:N=>c(N.target.value)})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Location"}),e.jsx(Ft,{value:u,onChange:N=>h(N.target.value),placeholder:"Enter event location"})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Description"}),e.jsx(ri,{value:p,onChange:N=>x(N.target.value),placeholder:"Event details"})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Speaker Names"}),e.jsx(Ft,{value:b,onChange:N=>g(N.target.value),placeholder:"e.g., John Doe, Jane Smith"})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Event Image"}),e.jsx(Ft,{type:"file",onChange:J,accept:"image/*"})]})]})}),e.jsxs(dn,{children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:r,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",type:"submit",isLoading:O,children:"Create Event"})]})]})]})},qb=({isOpen:t,onClose:r,club:n,onClubUpdated:i})=>{const[o,s]=z.useState(""),[a,c]=z.useState(""),[u,h]=z.useState(null),[p,x]=z.useState(!1),b=Hr();z.useEffect(()=>{n&&(s(n.name||""),c(n.description||""),h(null))},[n,t]);const g=S=>{h(S.target.files[0])},_=async S=>{if(S.preventDefault(),!n)return;x(!0);const O=new FormData;O.append("name",o),O.append("description",a),u&&O.append("logo",u);try{await zb(n.id,O),b({title:"Club updated",description:"The club has been successfully updated.",status:"success",duration:5e3,isClosable:!0}),i(),r()}catch(k){b({title:"Update failed",description:k.message||"Could not update the club.",status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}};return e.jsxs(wn,{isOpen:t,onClose:r,size:"lg",isCentered:!0,children:[e.jsx(Wr,{}),e.jsxs(jn,{as:"form",onSubmit:_,children:[e.jsx(rn,{children:"Edit Club"}),e.jsx(cn,{}),e.jsx(Ur,{children:e.jsxs(ot,{spacing:4,align:"stretch",children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Club Name"}),e.jsx(Ft,{value:o,onChange:S=>s(S.target.value)})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Description"}),e.jsx(ri,{value:a,onChange:S=>c(S.target.value)})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Club Logo (optional)"}),e.jsx(Ft,{type:"file",onChange:g,accept:"image/*"})]})]})}),e.jsxs(dn,{children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:r,isDisabled:p,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",type:"submit",isLoading:p,children:"Save Changes"})]})]})]})},Wb=({isOpen:t,onClose:r,club:n,isMember:i})=>{const o=localStorage.getItem("role")||"",s=o==="admin"||o==="moderator",a=Hr(),[c,u]=z.useState(0),[h,p]=z.useState([]),[x,b]=z.useState([]),[g,_]=z.useState(!1),[S,O]=z.useState(null),[k,M]=z.useState([]),[J,re]=z.useState(""),[N,D]=z.useState(!1),[B,U]=z.useState(0),[R,P]=z.useState([]),w=z.useCallback(async()=>{if(n!=null&&n.id){_(!0),O(null);try{const ee=[Rb(n.id),L0(n.id)];i&&ee.push(Tb(n.id));const[Z,y,se]=await Promise.all(ee);p(Z||[]),b(y||[]),i&&se&&(D((se.votes_cast||0)>0),U(se.votes_cast||0),P(se.voted_for_candidates||[]))}catch(ee){O(ee.message||"Failed to fetch voting data.")}finally{_(!1)}}},[n==null?void 0:n.id,i]);z.useEffect(()=>{t&&w()},[t,w]);const A=async()=>{if(!J.trim()){a({title:"Error",description:"Candidate name cannot be empty.",status:"error"});return}try{await Ob(n.id,J),a({title:"Success",description:"Candidate added successfully.",status:"success"}),re(""),w()}catch(ee){a({title:"Error",description:ee.message,status:"error"})}},T=async()=>{var ee;if(k.length===0){a({title:"Error",description:"Please select at least one candidate.",status:"error"});return}if(k.length>6){a({title:"Error",description:"You cannot vote for more than 6 candidates.",status:"error"});return}try{const Z=k.map(y=>parseInt(y,10));await Eb(n.id,{candidate_ids:Z}),a({title:"Success",description:"Your vote has been cast successfully!",status:"success"}),D(!0),w(),u(1)}catch(Z){a({title:"Error",description:Z.message||"Failed to cast vote. You may have already voted.",status:"error"}),(ee=Z.message)!=null&&ee.includes("already voted")&&D(!0)}},E=x.reduce((ee,Z)=>ee+Z.votes_count,0);return e.jsxs(wn,{isOpen:t,onClose:r,size:"xl",children:[e.jsx(Wr,{}),e.jsxs(jn,{children:[e.jsxs(rn,{children:["Club Election: ",n==null?void 0:n.name]}),e.jsx(cn,{}),e.jsx(Ur,{pb:6,children:e.jsxs(Ws,{index:c,onChange:u,children:[e.jsxs(Us,{children:[e.jsx(Sn,{children:"Vote"}),s&&e.jsx(Sn,{children:"Results"})]}),e.jsxs(fo,{children:[e.jsx(kn,{children:g?e.jsx(qr,{}):S?e.jsxs(ui,{status:"error",children:[e.jsx(hi,{}),S]}):e.jsxs(ot,{spacing:6,align:"stretch",children:[(o==="admin"||o==="moderator")&&e.jsxs(de,{children:[e.jsx(ft,{size:"sm",mb:2,children:"Add Candidate"}),e.jsxs(dt,{children:[e.jsx(Ft,{placeholder:"Candidate Name",value:J,onChange:ee=>re(ee.target.value)}),e.jsx(Te,{onClick:A,colorScheme:"blue",children:"Add"})]})]}),e.jsxs(de,{children:[e.jsx(ft,{size:"sm",mb:3,children:"Candidates"}),i?N?e.jsxs(ui,{status:"info",flexDirection:"column",alignItems:"flex-start",children:[e.jsx(hi,{}),e.jsxs(de,{children:["You have already voted in this election.",e.jsx("br",{}),e.jsx("b",{children:"Votes cast:"})," ",B,e.jsx("br",{}),e.jsx("b",{children:"Your votes:"})," ",h.filter(ee=>R.includes(ee.id)).map(ee=>ee.name).join(", ")||"N/A"]})]}):h.length>0?e.jsxs(de,{children:[e.jsxs(ui,{status:"info",mb:4,borderRadius:"md",children:[e.jsx(hi,{}),"You can vote for up to 6 candidates."]}),e.jsx($g,{onChange:M,value:k,children:e.jsx(ot,{align:"stretch",spacing:3,children:h.map(ee=>e.jsx(up,{value:String(ee.id),isDisabled:k.length>=6&&!k.includes(String(ee.id)),children:ee.name},ee.id))})})]}):e.jsx($,{children:"No candidates have been added yet."}):e.jsxs(ui,{status:"warning",children:[e.jsx(hi,{}),"You must be a member of this club to vote."]})]})]})}),s&&e.jsx(kn,{children:g?e.jsx(qr,{}):S?e.jsxs(ui,{status:"error",children:[e.jsx(hi,{}),S]}):e.jsxs(ot,{spacing:4,align:"stretch",children:[e.jsx(ft,{size:"md",children:"Live Results"}),e.jsxs($,{children:["Total Votes: ",E]}),x.length>0?x.sort((ee,Z)=>Z.votes_count-ee.votes_count).map(ee=>e.jsxs(de,{children:[e.jsxs(ke,{justify:"space-between",mb:1,children:[e.jsx($,{fontWeight:"bold",children:ee.name}),e.jsxs($,{children:[ee.votes_count," (",E>0?(ee.votes_count/E*100).toFixed(1):0,"%)"]})]}),e.jsx(Is,{value:E>0?ee.votes_count/E*100:0,size:"lg",colorScheme:"blue"})]},ee.id)):e.jsx($,{children:"No votes have been cast yet."})]})})]})]})}),e.jsxs(dn,{children:[c===0&&i&&!N&&h.length>0&&e.jsx(Te,{colorScheme:"green",mr:3,onClick:T,isDisabled:k.length===0||k.length>6,children:"Submit Vote"}),e.jsx(Te,{onClick:r,children:"Close"})]})]})]})};var Fn=Uint8Array,fi=Uint16Array,sh=Int32Array,sd=new Fn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),od=new Fn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Du=new Fn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),P0=function(t,r){for(var n=new fi(31),i=0;i<31;++i)n[i]=r+=1<<t[i-1];for(var o=new sh(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)o[s]=s-n[i]<<5|i;return{b:n,r:o}},N0=P0(sd,2),O0=N0.b,Mu=N0.r;O0[28]=258,Mu[258]=28;var R0=P0(od,0),Ub=R0.b,zf=R0.r,Bu=new fi(32768);for(var Tr=0;Tr<32768;++Tr){var Rs=(Tr&43690)>>1|(Tr&21845)<<1;Rs=(Rs&52428)>>2|(Rs&13107)<<2,Rs=(Rs&61680)>>4|(Rs&3855)<<4,Bu[Tr]=((Rs&65280)>>8|(Rs&255)<<8)>>1}var Xi=function(t,r,n){for(var i=t.length,o=0,s=new fi(r);o<i;++o)t[o]&&++s[t[o]-1];var a=new fi(r);for(o=1;o<r;++o)a[o]=a[o-1]+s[o-1]<<1;var c;if(n){c=new fi(1<<r);var u=15-r;for(o=0;o<i;++o)if(t[o])for(var h=o<<4|t[o],p=r-t[o],x=a[t[o]-1]++<<p,b=x|(1<<p)-1;x<=b;++x)c[Bu[x]>>u]=h}else for(c=new fi(i),o=0;o<i;++o)t[o]&&(c[o]=Bu[a[t[o]-1]++]>>15-t[o]);return c},Bs=new Fn(288);for(var Tr=0;Tr<144;++Tr)Bs[Tr]=8;for(var Tr=144;Tr<256;++Tr)Bs[Tr]=9;for(var Tr=256;Tr<280;++Tr)Bs[Tr]=7;for(var Tr=280;Tr<288;++Tr)Bs[Tr]=8;var al=new Fn(32);for(var Tr=0;Tr<32;++Tr)al[Tr]=5;var Hb=Xi(Bs,9,0),$b=Xi(Bs,9,1),Gb=Xi(al,5,0),Vb=Xi(al,5,1),pu=function(t){for(var r=t[0],n=1;n<t.length;++n)t[n]>r&&(r=t[n]);return r},Ei=function(t,r,n){var i=r/8|0;return(t[i]|t[i+1]<<8)>>(r&7)&n},gu=function(t,r){var n=r/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(r&7)},oh=function(t){return(t+7)/8|0},E0=function(t,r,n){return(n==null||n>t.length)&&(n=t.length),new Fn(t.subarray(r,n))},Yb=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fi=function(t,r,n){var i=new Error(r||Yb[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,Fi),!n)throw i;return i},Jb=function(t,r,n,i){var o=t.length,s=0;if(!o||r.f&&!r.l)return n||new Fn(0);var a=!n,c=a||r.i!=2,u=r.i;a&&(n=new Fn(o*3));var h=function(we){var ze=n.length;if(we>ze){var De=new Fn(Math.max(ze*2,we));De.set(n),n=De}},p=r.f||0,x=r.p||0,b=r.b||0,g=r.l,_=r.d,S=r.m,O=r.n,k=o*8;do{if(!g){p=Ei(t,x,1);var M=Ei(t,x+1,3);if(x+=3,M)if(M==1)g=$b,_=Vb,S=9,O=5;else if(M==2){var D=Ei(t,x,31)+257,B=Ei(t,x+10,15)+4,U=D+Ei(t,x+5,31)+1;x+=14;for(var R=new Fn(U),P=new Fn(19),w=0;w<B;++w)P[Du[w]]=Ei(t,x+w*3,7);x+=B*3;for(var A=pu(P),T=(1<<A)-1,E=Xi(P,A,1),w=0;w<U;){var ee=E[Ei(t,x,T)];x+=ee&15;var J=ee>>4;if(J<16)R[w++]=J;else{var Z=0,y=0;for(J==16?(y=3+Ei(t,x,3),x+=2,Z=R[w-1]):J==17?(y=3+Ei(t,x,7),x+=3):J==18&&(y=11+Ei(t,x,127),x+=7);y--;)R[w++]=Z}}var se=R.subarray(0,D),W=R.subarray(D);S=pu(se),O=pu(W),g=Xi(se,S,1),_=Xi(W,O,1)}else Fi(1);else{var J=oh(x)+4,re=t[J-4]|t[J-3]<<8,N=J+re;if(N>o){u&&Fi(0);break}c&&h(b+re),n.set(t.subarray(J,N),b),r.b=b+=re,r.p=x=N*8,r.f=p;continue}if(x>k){u&&Fi(0);break}}c&&h(b+131072);for(var v=(1<<S)-1,Y=(1<<O)-1,C=x;;C=x){var Z=g[gu(t,x)&v],q=Z>>4;if(x+=Z&15,x>k){u&&Fi(0);break}if(Z||Fi(2),q<256)n[b++]=q;else if(q==256){C=x,g=null;break}else{var L=q-254;if(q>264){var w=q-257,G=sd[w];L=Ei(t,x,(1<<G)-1)+O0[w],x+=G}var Q=_[gu(t,x)&Y],ie=Q>>4;Q||Fi(3),x+=Q&15;var W=Ub[ie];if(ie>3){var G=od[ie];W+=gu(t,x)&(1<<G)-1,x+=G}if(x>k){u&&Fi(0);break}c&&h(b+131072);var ce=b+L;if(b<W){var le=s-W,xe=Math.min(W,ce);for(le+b<0&&Fi(3);b<xe;++b)n[b]=i[le+b]}for(;b<ce;++b)n[b]=n[b-W]}}r.l=g,r.p=C,r.b=b,r.f=p,g&&(p=1,r.m=S,r.d=_,r.n=O)}while(!p);return b!=n.length&&a?E0(n,0,b):n.subarray(0,b)},ls=function(t,r,n){n<<=r&7;var i=r/8|0;t[i]|=n,t[i+1]|=n>>8},Ka=function(t,r,n){n<<=r&7;var i=r/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},mu=function(t,r){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var o=n.length,s=n.slice();if(!o)return{t:F0,l:0};if(o==1){var a=new Fn(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(N,D){return N.f-D.f}),n.push({s:-1,f:25001});var c=n[0],u=n[1],h=0,p=1,x=2;for(n[0]={s:-1,f:c.f+u.f,l:c,r:u};p!=o-1;)c=n[n[h].f<n[x].f?h++:x++],u=n[h!=p&&n[h].f<n[x].f?h++:x++],n[p++]={s:-1,f:c.f+u.f,l:c,r:u};for(var b=s[0].s,i=1;i<o;++i)s[i].s>b&&(b=s[i].s);var g=new fi(b+1),_=qu(n[p-1],g,0);if(_>r){var i=0,S=0,O=_-r,k=1<<O;for(s.sort(function(D,B){return g[B.s]-g[D.s]||D.f-B.f});i<o;++i){var M=s[i].s;if(g[M]>r)S+=k-(1<<_-g[M]),g[M]=r;else break}for(S>>=O;S>0;){var J=s[i].s;g[J]<r?S-=1<<r-g[J]++-1:++i}for(;i>=0&&S;--i){var re=s[i].s;g[re]==r&&(--g[re],++S)}_=r}return{t:new Fn(g),l:_}},qu=function(t,r,n){return t.s==-1?Math.max(qu(t.l,r,n+1),qu(t.r,r,n+1)):r[t.s]=n},Df=function(t){for(var r=t.length;r&&!t[--r];);for(var n=new fi(++r),i=0,o=t[0],s=1,a=function(u){n[i++]=u},c=1;c<=r;++c)if(t[c]==o&&c!=r)++s;else{if(!o&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(o),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(o);s=1,o=t[c]}return{c:n.subarray(0,i),n:r}},Qa=function(t,r){for(var n=0,i=0;i<r.length;++i)n+=t[i]*r[i];return n},T0=function(t,r,n){var i=n.length,o=oh(r+2);t[o]=i&255,t[o+1]=i>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var s=0;s<i;++s)t[o+s+4]=n[s];return(o+4+i)*8},Mf=function(t,r,n,i,o,s,a,c,u,h,p){ls(r,p++,n),++o[256];for(var x=mu(o,15),b=x.t,g=x.l,_=mu(s,15),S=_.t,O=_.l,k=Df(b),M=k.c,J=k.n,re=Df(S),N=re.c,D=re.n,B=new fi(19),U=0;U<M.length;++U)++B[M[U]&31];for(var U=0;U<N.length;++U)++B[N[U]&31];for(var R=mu(B,7),P=R.t,w=R.l,A=19;A>4&&!P[Du[A-1]];--A);var T=h+5<<3,E=Qa(o,Bs)+Qa(s,al)+a,ee=Qa(o,b)+Qa(s,S)+a+14+3*A+Qa(B,P)+2*B[16]+3*B[17]+7*B[18];if(u>=0&&T<=E&&T<=ee)return T0(r,p,t.subarray(u,u+h));var Z,y,se,W;if(ls(r,p,1+(ee<E)),p+=2,ee<E){Z=Xi(b,g,0),y=b,se=Xi(S,O,0),W=S;var v=Xi(P,w,0);ls(r,p,J-257),ls(r,p+5,D-1),ls(r,p+10,A-4),p+=14;for(var U=0;U<A;++U)ls(r,p+3*U,P[Du[U]]);p+=3*A;for(var Y=[M,N],C=0;C<2;++C)for(var q=Y[C],U=0;U<q.length;++U){var L=q[U]&31;ls(r,p,v[L]),p+=P[L],L>15&&(ls(r,p,q[U]>>5&127),p+=q[U]>>12)}}else Z=Hb,y=Bs,se=Gb,W=al;for(var U=0;U<c;++U){var G=i[U];if(G>255){var L=G>>18&31;Ka(r,p,Z[L+257]),p+=y[L+257],L>7&&(ls(r,p,G>>23&31),p+=sd[L]);var Q=G&31;Ka(r,p,se[Q]),p+=W[Q],Q>3&&(Ka(r,p,G>>5&8191),p+=od[Q])}else Ka(r,p,Z[G]),p+=y[G]}return Ka(r,p,Z[256]),p+y[256]},Xb=new sh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F0=new Fn(0),Kb=function(t,r,n,i,o,s){var a=s.z||t.length,c=new Fn(i+a+5*(1+Math.ceil(a/7e3))+o),u=c.subarray(i,c.length-o),h=s.l,p=(s.r||0)&7;if(r){p&&(u[0]=s.r>>3);for(var x=Xb[r-1],b=x>>13,g=x&8191,_=(1<<n)-1,S=s.p||new fi(32768),O=s.h||new fi(_+1),k=Math.ceil(n/3),M=2*k,J=function($e){return(t[$e]^t[$e+1]<<k^t[$e+2]<<M)&_},re=new sh(25e3),N=new fi(288),D=new fi(32),B=0,U=0,R=s.i||0,P=0,w=s.w||0,A=0;R+2<a;++R){var T=J(R),E=R&32767,ee=O[T];if(S[E]=ee,O[T]=E,w<=R){var Z=a-R;if((B>7e3||P>24576)&&(Z>423||!h)){p=Mf(t,u,0,re,N,D,U,P,A,R-A,p),P=B=U=0,A=R;for(var y=0;y<286;++y)N[y]=0;for(var y=0;y<30;++y)D[y]=0}var se=2,W=0,v=g,Y=E-ee&32767;if(Z>2&&T==J(R-Y))for(var C=Math.min(b,Z)-1,q=Math.min(32767,R),L=Math.min(258,Z);Y<=q&&--v&&E!=ee;){if(t[R+se]==t[R+se-Y]){for(var G=0;G<L&&t[R+G]==t[R+G-Y];++G);if(G>se){if(se=G,W=Y,G>C)break;for(var Q=Math.min(Y,G-2),ie=0,y=0;y<Q;++y){var ce=R-Y+y&32767,le=S[ce],xe=ce-le&32767;xe>ie&&(ie=xe,ee=ce)}}}E=ee,ee=S[E],Y+=E-ee&32767}if(W){re[P++]=268435456|Mu[se]<<18|zf[W];var we=Mu[se]&31,ze=zf[W]&31;U+=sd[we]+od[ze],++N[257+we],++D[ze],w=R+se,++B}else re[P++]=t[R],++N[t[R]]}}for(R=Math.max(R,w);R<a;++R)re[P++]=t[R],++N[t[R]];p=Mf(t,u,h,re,N,D,U,P,A,R-A,p),h||(s.r=p&7|u[p/8|0]<<3,p-=7,s.h=O,s.p=S,s.i=R,s.w=w)}else{for(var R=s.w||0;R<a+h;R+=65535){var De=R+65535;De>=a&&(u[p/8|0]=h,De=a),p=T0(u,p+1,t.subarray(R,De))}s.i=a}return E0(c,0,i+oh(p)+o)},I0=function(){var t=1,r=0;return{p:function(n){for(var i=t,o=r,s=n.length|0,a=0;a!=s;){for(var c=Math.min(a+2655,s);a<c;++a)o+=i+=n[a];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}t=i,r=o},d:function(){return t%=65521,r%=65521,(t&255)<<24|(t&65280)<<8|(r&255)<<8|r>>8}}},Qb=function(t,r,n,i,o){if(!o&&(o={l:1},r.dictionary)){var s=r.dictionary.subarray(-32768),a=new Fn(s.length+t.length);a.set(s),a.set(t,s.length),t=a,o.w=s.length}return Kb(t,r.level==null?6:r.level,r.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+r.mem,n,i,o)},z0=function(t,r,n){for(;n;++r)t[r]=n,n>>>=8},Zb=function(t,r){var n=r.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(r.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,r.dictionary){var o=I0();o.p(r.dictionary),z0(t,2,o.d())}},ey=function(t,r){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Fi(6,"invalid zlib data"),(t[1]>>5&1)==1&&Fi(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Wu(t,r){r||(r={});var n=I0();n.p(t);var i=Qb(t,r,r.dictionary?6:2,4);return Zb(i,r),z0(i,i.length-4,n.d()),i}function ty(t,r){return Jb(t.subarray(ey(t),-4),{i:2},r,r)}var ry=typeof TextDecoder!="undefined"&&new TextDecoder,ny=0;try{ry.decode(F0,{stream:!0}),ny=1}catch{}var $t=function(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this}();function xu(){$t.console&&typeof $t.console.log=="function"&&$t.console.log.apply($t.console,arguments)}var kr={log:xu,warn:function(t){$t.console&&(typeof $t.console.warn=="function"?$t.console.warn.apply($t.console,arguments):xu.call(null,arguments))},error:function(t){$t.console&&(typeof $t.console.error=="function"?$t.console.error.apply($t.console,arguments):xu(t))}};function bu(t,r,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){no(i.response,r,n)},i.onerror=function(){kr.error("could not download file")},i.send()}function Bf(t){var r=new XMLHttpRequest;r.open("HEAD",t,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function ac(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var tl,Uu,no=$t.saveAs||((typeof window=="undefined"?"undefined":Lr(window))!=="object"||window!==$t?function(){}:typeof HTMLAnchorElement!="undefined"&&"download"in HTMLAnchorElement.prototype?function(t,r,n){var i=$t.URL||$t.webkitURL,o=document.createElement("a");r=r||t.name||"download",o.download=r,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?Bf(o.href)?bu(t,r,n):ac(o,o.target="_blank"):ac(o)):(o.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){ac(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,n){if(r=r||t.name||"download",typeof t=="string")if(Bf(t))bu(t,r,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){ac(i)})}else navigator.msSaveOrOpenBlob(function(o,s){return s===void 0?s={autoBom:!1}:Lr(s)!=="object"&&(kr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,n),r)}:function(t,r,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return bu(t,r,n);var o=t.type==="application/octet-stream",s=/constructor/i.test($t.HTMLElement)||$t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||o&&s)&&(typeof FileReader=="undefined"?"undefined":Lr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=p:location=p,i=null},c.readAsDataURL(t)}else{var u=$t.URL||$t.webkitURL,h=u.createObjectURL(t);i?i.location=h:location.href=h,i=null,setTimeout(function(){u.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function D0(t){var r;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],i=0;i<n.length;i++){var o=n[i].re,s=n[i].process,a=o.exec(t);a&&(r=s(a),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),h=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),"#"+c+u+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function yu(t,r){var n=t[0],i=t[1],o=t[2],s=t[3];n=Nn(n,i,o,s,r[0],7,-680876936),s=Nn(s,n,i,o,r[1],12,-389564586),o=Nn(o,s,n,i,r[2],17,606105819),i=Nn(i,o,s,n,r[3],22,-1044525330),n=Nn(n,i,o,s,r[4],7,-176418897),s=Nn(s,n,i,o,r[5],12,1200080426),o=Nn(o,s,n,i,r[6],17,-1473231341),i=Nn(i,o,s,n,r[7],22,-45705983),n=Nn(n,i,o,s,r[8],7,1770035416),s=Nn(s,n,i,o,r[9],12,-1958414417),o=Nn(o,s,n,i,r[10],17,-42063),i=Nn(i,o,s,n,r[11],22,-1990404162),n=Nn(n,i,o,s,r[12],7,1804603682),s=Nn(s,n,i,o,r[13],12,-40341101),o=Nn(o,s,n,i,r[14],17,-1502002290),n=On(n,i=Nn(i,o,s,n,r[15],22,1236535329),o,s,r[1],5,-165796510),s=On(s,n,i,o,r[6],9,-1069501632),o=On(o,s,n,i,r[11],14,643717713),i=On(i,o,s,n,r[0],20,-373897302),n=On(n,i,o,s,r[5],5,-701558691),s=On(s,n,i,o,r[10],9,38016083),o=On(o,s,n,i,r[15],14,-660478335),i=On(i,o,s,n,r[4],20,-405537848),n=On(n,i,o,s,r[9],5,568446438),s=On(s,n,i,o,r[14],9,-1019803690),o=On(o,s,n,i,r[3],14,-187363961),i=On(i,o,s,n,r[8],20,1163531501),n=On(n,i,o,s,r[13],5,-1444681467),s=On(s,n,i,o,r[2],9,-51403784),o=On(o,s,n,i,r[7],14,1735328473),n=Rn(n,i=On(i,o,s,n,r[12],20,-1926607734),o,s,r[5],4,-378558),s=Rn(s,n,i,o,r[8],11,-2022574463),o=Rn(o,s,n,i,r[11],16,1839030562),i=Rn(i,o,s,n,r[14],23,-35309556),n=Rn(n,i,o,s,r[1],4,-1530992060),s=Rn(s,n,i,o,r[4],11,1272893353),o=Rn(o,s,n,i,r[7],16,-155497632),i=Rn(i,o,s,n,r[10],23,-1094730640),n=Rn(n,i,o,s,r[13],4,681279174),s=Rn(s,n,i,o,r[0],11,-358537222),o=Rn(o,s,n,i,r[3],16,-722521979),i=Rn(i,o,s,n,r[6],23,76029189),n=Rn(n,i,o,s,r[9],4,-640364487),s=Rn(s,n,i,o,r[12],11,-421815835),o=Rn(o,s,n,i,r[15],16,530742520),n=En(n,i=Rn(i,o,s,n,r[2],23,-995338651),o,s,r[0],6,-198630844),s=En(s,n,i,o,r[7],10,1126891415),o=En(o,s,n,i,r[14],15,-1416354905),i=En(i,o,s,n,r[5],21,-57434055),n=En(n,i,o,s,r[12],6,1700485571),s=En(s,n,i,o,r[3],10,-1894986606),o=En(o,s,n,i,r[10],15,-1051523),i=En(i,o,s,n,r[1],21,-2054922799),n=En(n,i,o,s,r[8],6,1873313359),s=En(s,n,i,o,r[15],10,-30611744),o=En(o,s,n,i,r[6],15,-1560198380),i=En(i,o,s,n,r[13],21,1309151649),n=En(n,i,o,s,r[4],6,-145523070),s=En(s,n,i,o,r[11],10,-1120210379),o=En(o,s,n,i,r[2],15,718787259),i=En(i,o,s,n,r[9],21,-343485551),t[0]=Fs(n,t[0]),t[1]=Fs(i,t[1]),t[2]=Fs(o,t[2]),t[3]=Fs(s,t[3])}function ad(t,r,n,i,o,s){return r=Fs(Fs(r,t),Fs(i,s)),Fs(r<<o|r>>>32-o,n)}function Nn(t,r,n,i,o,s,a){return ad(r&n|~r&i,t,r,o,s,a)}function On(t,r,n,i,o,s,a){return ad(r&i|n&~i,t,r,o,s,a)}function Rn(t,r,n,i,o,s,a){return ad(r^n^i,t,r,o,s,a)}function En(t,r,n,i,o,s,a){return ad(n^(r|~i),t,r,o,s,a)}function M0(t){var r,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=t.length;r+=64)yu(i,iy(t.substring(r-64,r)));t=t.substring(r-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)o[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(yu(i,o),r=0;r<16;r++)o[r]=0;return o[14]=8*n,yu(i,o),i}function iy(t){var r,n=[];for(r=0;r<64;r+=4)n[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return n}tl=$t.atob.bind($t),Uu=$t.btoa.bind($t);var qf="0123456789abcdef".split("");function sy(t){for(var r="",n=0;n<4;n++)r+=qf[t>>8*n+4&15]+qf[t>>8*n&15];return r}function oy(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Hu(t){return M0(t).map(oy).join("")}var ay=function(t){for(var r=0;r<t.length;r++)t[r]=sy(t[r]);return t.join("")}(M0("hello"))!="5d41402abc4b2a76b9719d911017c592";function Fs(t,r){if(ay){var n=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(n>>16)<<16|65535&n}return t+r&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $u(t,r){var n,i,o,s;if(t!==n){for(var a=(o=t,s=1+(256/t.length>>0),new Array(s+1).join(o)),c=[],u=0;u<256;u++)c[u]=u;var h=0;for(u=0;u<256;u++){var p=c[u];h=(h+p+a.charCodeAt(u))%256,c[u]=c[h],c[h]=p}n=t,i=c}else c=i;var x=r.length,b=0,g=0,_="";for(u=0;u<x;u++)g=(g+(p=c[b=(b+1)%256]))%256,c[b]=c[g],c[g]=p,a=c[(c[b]+c[g])%256],_+=String.fromCharCode(r.charCodeAt(u)^a);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Wf={print:4,modify:8,copy:16,"annot-forms":32};function Jo(t,r,n,i){this.v=1,this.r=2;var o=192;t.forEach(function(c){if(Wf.perm!==void 0)throw new Error("Invalid permission: "+c);o+=Wf[c]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(r+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^o)),this.encryptionKey=Hu(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=$u(this.encryptionKey,this.padding)}function Xo(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var r="",n=t.length,i=0;i<n;i++){var o=t.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?r+="#"+("0"+o.toString(16)).slice(-2):r+=t[i]}return r}function Uf(t){if(Lr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(n,i,o){if(o=o||!1,typeof n!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(n)||(r[n]={});var s=Math.random().toString(35);return r[n][s]=[i,!!o],s},this.unsubscribe=function(n){for(var i in r)if(r[i][n])return delete r[i][n],Object.keys(r[i]).length===0&&delete r[i],!0;return!1},this.publish=function(n){if(r.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var s in r[n]){var a=r[n][s];try{a[0].apply(t,i)}catch(c){$t.console&&kr.error("jsPDF PubSub Error",c.message,c)}a[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function zc(t){if(!(this instanceof zc))return new zc(t);var r="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&r.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function B0(t,r){this.gState=t,this.matrix=r,this.id="",this.objectNumber=-1}function so(t,r,n,i,o){if(!(this instanceof so))return new so(t,r,n,i,o);this.type=t==="axial"?2:3,this.coords=r,this.colors=n,B0.call(this,i,o)}function Qo(t,r,n,i,o){if(!(this instanceof Qo))return new Qo(t,r,n,i,o);this.boundingBox=t,this.xStep=r,this.yStep=n,this.stream="",this.cloneIndex=0,B0.call(this,i,o)}function Wt(t){var r,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],s=arguments[3],a=[],c=1,u=16,h="S",p=null;Lr(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,o=t.format||o,s=t.compress||t.compressPdf||s,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(r=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),h=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),i=i||"mm",n=(""+(n||"P")).toLowerCase();var x=t.putOnlyUsedFonts||!1,b={},g={internal:{},__private__:{}};g.__private__.PubSub=Uf;var _="1.3",S=g.__private__.getPdfVersion=function(){return _};g.__private__.setPdfVersion=function(f){_=f};var O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return O};var k=g.__private__.getPageFormat=function(f){return O[f]};o=o||"a4";var M={COMPAT:"compat",ADVANCED:"advanced"},J=M.COMPAT;function re(){this.saveGraphicsState(),te(new lt(Ee,0,0,-Ee,0,bs()*Ee).toString()+" cm"),this.setFontSize(this.getFontSize()/Ee),h="n",J=M.ADVANCED}function N(){this.restoreGraphicsState(),h="S",J=M.COMPAT}var D=g.__private__.combineFontStyleAndFontWeight=function(f,I){if(f=="bold"&&I=="normal"||f=="bold"&&I==400||f=="normal"&&I=="italic"||f=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(f=I==400||I==="normal"?f==="italic"?"italic":"normal":I!=700&&I!=="bold"||f!=="normal"?(I==700?"bold":I)+""+f:"bold"),f};g.advancedAPI=function(f){var I=J===M.COMPAT;return I&&re.call(this),typeof f!="function"||(f(this),I&&N.call(this)),this},g.compatAPI=function(f){var I=J===M.ADVANCED;return I&&N.call(this),typeof f!="function"||(f(this),I&&re.call(this)),this},g.isAdvancedAPI=function(){return J===M.ADVANCED};var B,U=function(f){if(J!==M.ADVANCED)throw new Error(f+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=g.roundToPrecision=g.__private__.roundToPrecision=function(f,I){var oe=r||I;if(isNaN(f)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return f.toFixed(oe).replace(/0+$/,"")};B=g.hpf=g.__private__.hpf=typeof u=="number"?function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.hpf");return R(f,u)}:u==="smart"?function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.hpf");return R(f,f>-1&&f<1?16:5)}:function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.hpf");return R(f,16)};var P=g.f2=g.__private__.f2=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.f2");return R(f,2)},w=g.__private__.f3=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.f3");return R(f,3)},A=g.scale=g.__private__.scale=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.scale");return J===M.COMPAT?f*Ee:J===M.ADVANCED?f:void 0},T=function(f){return J===M.COMPAT?bs()-f:J===M.ADVANCED?f:void 0},E=function(f){return A(T(f))};g.__private__.setPrecision=g.setPrecision=function(f){typeof parseInt(f,10)=="number"&&(r=parseInt(f,10))};var ee,Z="00000000000000000000000000000000",y=g.__private__.getFileId=function(){return Z},se=g.__private__.setFileId=function(f){return Z=f!==void 0&&/^[a-fA-F0-9]{32}$/.test(f)?f.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Ln=new Jo(p.userPermissions,p.userPassword,p.ownerPassword,Z)),Z};g.setFileId=function(f){return se(f),this},g.getFileId=function(){return y()};var W=g.__private__.convertDateToPDFDate=function(f){var I=f.getTimezoneOffset(),oe=I<0?"+":"-",fe=Math.floor(Math.abs(I/60)),Pe=Math.abs(I%60),Ge=[oe,L(fe),"'",L(Pe),"'"].join("");return["D:",f.getFullYear(),L(f.getMonth()+1),L(f.getDate()),L(f.getHours()),L(f.getMinutes()),L(f.getSeconds()),Ge].join("")},v=g.__private__.convertPDFDateToDate=function(f){var I=parseInt(f.substr(2,4),10),oe=parseInt(f.substr(6,2),10)-1,fe=parseInt(f.substr(8,2),10),Pe=parseInt(f.substr(10,2),10),Ge=parseInt(f.substr(12,2),10),ct=parseInt(f.substr(14,2),10);return new Date(I,oe,fe,Pe,Ge,ct,0)},Y=g.__private__.setCreationDate=function(f){var I;if(f===void 0&&(f=new Date),f instanceof Date)I=W(f);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(f))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=f}return ee=I},C=g.__private__.getCreationDate=function(f){var I=ee;return f==="jsDate"&&(I=v(ee)),I};g.setCreationDate=function(f){return Y(f),this},g.getCreationDate=function(f){return C(f)};var q,L=g.__private__.padd2=function(f){return("0"+parseInt(f)).slice(-2)},G=g.__private__.padd2Hex=function(f){return("00"+(f=f.toString())).substr(f.length)},Q=0,ie=[],ce=[],le=0,xe=[],we=[],ze=!1,De=ce,$e=function(){Q=0,le=0,ce=[],ie=[],xe=[],Dn=jr(),An=jr()};g.__private__.setCustomOutputDestination=function(f){ze=!0,De=f};var ve=function(f){ze||(De=f)};g.__private__.resetCustomOutputDestination=function(){ze=!1,De=ce};var te=g.__private__.out=function(f){return f=f.toString(),le+=f.length+1,De.push(f),De},Ce=g.__private__.write=function(f){return te(arguments.length===1?f.toString():Array.prototype.join.call(arguments," "))},Be=g.__private__.getArrayBuffer=function(f){for(var I=f.length,oe=new ArrayBuffer(I),fe=new Uint8Array(oe);I--;)fe[I]=f.charCodeAt(I);return oe},Ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Ne};var ue=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(f){return ue=J===M.ADVANCED?f/Ee:f,this};var Je,Ke=g.__private__.getFontSize=g.getFontSize=function(){return J===M.COMPAT?ue:ue*Ee},ut=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(f){return ut=f,this},g.__private__.getR2L=g.getR2L=function(){return ut};var Ye,Se=g.__private__.setZoomMode=function(f){var I=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(f))Je=f;else if(isNaN(f)){if(I.indexOf(f)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+f+'" is not recognized.');Je=f}else Je=parseInt(f,10)};g.__private__.getZoomMode=function(){return Je};var ye,Ae=g.__private__.setPageMode=function(f){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(f)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+f+'" is not recognized.');Ye=f};g.__private__.getPageMode=function(){return Ye};var Me=g.__private__.setLayoutMode=function(f){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(f)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+f+'" is not recognized.');ye=f};g.__private__.getLayoutMode=function(){return ye},g.__private__.setDisplayMode=g.setDisplayMode=function(f,I,oe){return Se(f),Me(I),Ae(oe),this};var _e={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(f){if(Object.keys(_e).indexOf(f)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _e[f]},g.__private__.getDocumentProperties=function(){return _e},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(f){for(var I in _e)_e.hasOwnProperty(I)&&f[I]&&(_e[I]=f[I]);return this},g.__private__.setDocumentProperty=function(f,I){if(Object.keys(_e).indexOf(f)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _e[f]=I};var Fe,Ee,it,Ve,at,Lt={},Ct={},be=[],st={},Ie={},et={},Tt={},Le=null,We=0,tt=[],rt=new Uf(g),bt=t.hotfixes||[],yt={},qe={},pt=[],lt=function f(I,oe,fe,Pe,Ge,ct){if(!(this instanceof f))return new f(I,oe,fe,Pe,Ge,ct);isNaN(I)&&(I=1),isNaN(oe)&&(oe=0),isNaN(fe)&&(fe=0),isNaN(Pe)&&(Pe=1),isNaN(Ge)&&(Ge=0),isNaN(ct)&&(ct=0),this._matrix=[I,oe,fe,Pe,Ge,ct]};Object.defineProperty(lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(f){this._matrix[0]=f}}),Object.defineProperty(lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(f){this._matrix[1]=f}}),Object.defineProperty(lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(f){this._matrix[2]=f}}),Object.defineProperty(lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(f){this._matrix[3]=f}}),Object.defineProperty(lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(f){this._matrix[4]=f}}),Object.defineProperty(lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(f){this._matrix[5]=f}}),Object.defineProperty(lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(f){this._matrix[0]=f}}),Object.defineProperty(lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(f){this._matrix[1]=f}}),Object.defineProperty(lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(f){this._matrix[2]=f}}),Object.defineProperty(lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(f){this._matrix[3]=f}}),Object.defineProperty(lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(f){this._matrix[4]=f}}),Object.defineProperty(lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(f){this._matrix[5]=f}}),Object.defineProperty(lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),lt.prototype.join=function(f){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(B).join(f)},lt.prototype.multiply=function(f){var I=f.sx*this.sx+f.shy*this.shx,oe=f.sx*this.shy+f.shy*this.sy,fe=f.shx*this.sx+f.sy*this.shx,Pe=f.shx*this.shy+f.sy*this.sy,Ge=f.tx*this.sx+f.ty*this.shx+this.tx,ct=f.tx*this.shy+f.ty*this.sy+this.ty;return new lt(I,oe,fe,Pe,Ge,ct)},lt.prototype.decompose=function(){var f=this.sx,I=this.shy,oe=this.shx,fe=this.sy,Pe=this.tx,Ge=this.ty,ct=Math.sqrt(f*f+I*I),At=(f/=ct)*oe+(I/=ct)*fe;oe-=f*At,fe-=I*At;var Bt=Math.sqrt(oe*oe+fe*fe);return At/=Bt,f*(fe/=Bt)<I*(oe/=Bt)&&(f=-f,I=-I,At=-At,ct=-ct),{scale:new lt(ct,0,0,Bt,0,0),translate:new lt(1,0,0,1,Pe,Ge),rotate:new lt(f,I,-I,f,0,0),skew:new lt(1,0,At,1,0,0)}},lt.prototype.toString=function(f){return this.join(" ")},lt.prototype.inversed=function(){var f=this.sx,I=this.shy,oe=this.shx,fe=this.sy,Pe=this.tx,Ge=this.ty,ct=1/(f*fe-I*oe),At=fe*ct,Bt=-I*ct,Xt=-oe*ct,Yt=f*ct;return new lt(At,Bt,Xt,Yt,-At*Pe-Xt*Ge,-Bt*Pe-Yt*Ge)},lt.prototype.applyToPoint=function(f){var I=f.x*this.sx+f.y*this.shx+this.tx,oe=f.x*this.shy+f.y*this.sy+this.ty;return new Co(I,oe)},lt.prototype.applyToRectangle=function(f){var I=this.applyToPoint(f),oe=this.applyToPoint(new Co(f.x+f.w,f.y+f.h));return new _a(I.x,I.y,oe.x-I.x,oe.y-I.y)},lt.prototype.clone=function(){var f=this.sx,I=this.shy,oe=this.shx,fe=this.sy,Pe=this.tx,Ge=this.ty;return new lt(f,I,oe,fe,Pe,Ge)},g.Matrix=lt;var zt=g.matrixMult=function(f,I){return I.multiply(f)},Rt=new lt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Rt;var Pt=function(f,I){if(!Ie[f]){var oe=(I instanceof so?"Sh":"P")+(Object.keys(st).length+1).toString(10);I.id=oe,Ie[f]=oe,st[oe]=I,rt.publish("addPattern",I)}};g.ShadingPattern=so,g.TilingPattern=Qo,g.addShadingPattern=function(f,I){return U("addShadingPattern()"),Pt(f,I),this},g.beginTilingPattern=function(f){U("beginTilingPattern()"),kl(f.boundingBox[0],f.boundingBox[1],f.boundingBox[2]-f.boundingBox[0],f.boundingBox[3]-f.boundingBox[1],f.matrix)},g.endTilingPattern=function(f,I){U("endTilingPattern()"),I.stream=we[q].join(`
`),Pt(f,I),rt.publish("endTilingPattern",I),pt.pop().restore()};var hr=g.__private__.newObject=function(){var f=jr();return pn(f,!0),f},jr=g.__private__.newObjectDeferred=function(){return Q++,ie[Q]=function(){return le},Q},pn=function(f,I){return I=typeof I=="boolean"&&I,ie[f]=le,I&&te(f+" 0 obj"),f},Sr=g.__private__.newAdditionalObject=function(){var f={objId:jr(),content:""};return xe.push(f),f},Dn=jr(),An=jr(),$n=g.__private__.decodeColorString=function(f){var I=f.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length===5&&(I[4]==="k"||I[4]==="K")&&(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var oe=parseFloat(I[0]);I=[oe,oe,oe,"r"]}for(var fe="#",Pe=0;Pe<3;Pe++)fe+=("0"+Math.floor(255*parseFloat(I[Pe])).toString(16)).slice(-2);return fe},Gn=g.__private__.encodeColorString=function(f){var I;typeof f=="string"&&(f={ch1:f});var oe=f.ch1,fe=f.ch2,Pe=f.ch3,Ge=f.ch4,ct=f.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var At=new D0(oe);if(At.ok)oe=At.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var Bt=parseInt(oe.substr(1),16);oe=Bt>>16&255,fe=Bt>>8&255,Pe=255&Bt}if(fe===void 0||Ge===void 0&&oe===fe&&fe===Pe)if(typeof oe=="string")I=oe+" "+ct[0];else switch(f.precision){case 2:I=P(oe/255)+" "+ct[0];break;case 3:default:I=w(oe/255)+" "+ct[0]}else if(Ge===void 0||Lr(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return I=["1.","1.","1.",ct[1]].join(" ");if(typeof oe=="string")I=[oe,fe,Pe,ct[1]].join(" ");else switch(f.precision){case 2:I=[P(oe/255),P(fe/255),P(Pe/255),ct[1]].join(" ");break;default:case 3:I=[w(oe/255),w(fe/255),w(Pe/255),ct[1]].join(" ")}}else if(typeof oe=="string")I=[oe,fe,Pe,Ge,ct[2]].join(" ");else switch(f.precision){case 2:I=[P(oe),P(fe),P(Pe),P(Ge),ct[2]].join(" ");break;case 3:default:I=[w(oe),w(fe),w(Pe),w(Ge),ct[2]].join(" ")}return I},si=g.__private__.getFilters=function(){return a},he=g.__private__.putStream=function(f){var I=(f=f||{}).data||"",oe=f.filters||si(),fe=f.alreadyAppliedFilters||[],Pe=f.addLength1||!1,Ge=I.length,ct=f.objectId,At=function(Pn){return Pn};if(p!==null&&ct===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(At=Ln.encryptor(ct,0));var Bt={};oe===!0&&(oe=["FlateEncode"]);var Xt=f.additionalKeyValues||[],Yt=(Bt=Wt.API.processDataByFilters!==void 0?Wt.API.processDataByFilters(I,oe):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(Bt.data.length!==0&&(Xt.push({key:"Length",value:Bt.data.length}),Pe===!0&&Xt.push({key:"Length1",value:Ge})),Yt.length!=0)if(Yt.split("/").length-1==1)Xt.push({key:"Filter",value:Yt});else{Xt.push({key:"Filter",value:"["+Yt+"]"});for(var or=0;or<Xt.length;or+=1)if(Xt[or].key==="DecodeParms"){for(var Dr=[],$r=0;$r<Bt.reverseChain.split("/").length-1;$r+=1)Dr.push("null");Dr.push(Xt[or].value),Xt[or].value="["+Dr.join(" ")+"]"}}te("<<");for(var nn=0;nn<Xt.length;nn++)te("/"+Xt[nn].key+" "+Xt[nn].value);te(">>"),Bt.data.length!==0&&(te("stream"),te(At(Bt.data)),te("endstream"))},kt=g.__private__.putPage=function(f){var I=f.number,oe=f.data,fe=f.objId,Pe=f.contentsObjId;pn(fe,!0),te("<</Type /Page"),te("/Parent "+f.rootDictionaryObjId+" 0 R"),te("/Resources "+f.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(B(f.mediaBox.bottomLeftX))+" "+parseFloat(B(f.mediaBox.bottomLeftY))+" "+B(f.mediaBox.topRightX)+" "+B(f.mediaBox.topRightY)+"]"),f.cropBox!==null&&te("/CropBox ["+B(f.cropBox.bottomLeftX)+" "+B(f.cropBox.bottomLeftY)+" "+B(f.cropBox.topRightX)+" "+B(f.cropBox.topRightY)+"]"),f.bleedBox!==null&&te("/BleedBox ["+B(f.bleedBox.bottomLeftX)+" "+B(f.bleedBox.bottomLeftY)+" "+B(f.bleedBox.topRightX)+" "+B(f.bleedBox.topRightY)+"]"),f.trimBox!==null&&te("/TrimBox ["+B(f.trimBox.bottomLeftX)+" "+B(f.trimBox.bottomLeftY)+" "+B(f.trimBox.topRightX)+" "+B(f.trimBox.topRightY)+"]"),f.artBox!==null&&te("/ArtBox ["+B(f.artBox.bottomLeftX)+" "+B(f.artBox.bottomLeftY)+" "+B(f.artBox.topRightX)+" "+B(f.artBox.topRightY)+"]"),typeof f.userUnit=="number"&&f.userUnit!==1&&te("/UserUnit "+f.userUnit),rt.publish("putPage",{objId:fe,pageContext:tt[I],pageNumber:I,page:oe}),te("/Contents "+Pe+" 0 R"),te(">>"),te("endobj");var Ge=oe.join(`
`);return J===M.ADVANCED&&(Ge+=`
Q`),pn(Pe,!0),he({data:Ge,filters:si(),objectId:Pe}),te("endobj"),fe},Et=g.__private__.putPages=function(){var f,I,oe=[];for(f=1;f<=We;f++)tt[f].objId=jr(),tt[f].contentsObjId=jr();for(f=1;f<=We;f++)oe.push(kt({number:f,data:we[f],objId:tt[f].objId,contentsObjId:tt[f].contentsObjId,mediaBox:tt[f].mediaBox,cropBox:tt[f].cropBox,bleedBox:tt[f].bleedBox,trimBox:tt[f].trimBox,artBox:tt[f].artBox,userUnit:tt[f].userUnit,rootDictionaryObjId:Dn,resourceDictionaryObjId:An}));pn(Dn,!0),te("<</Type /Pages");var fe="/Kids [";for(I=0;I<We;I++)fe+=oe[I]+" 0 R ";te(fe+"]"),te("/Count "+We),te(">>"),te("endobj"),rt.publish("postPutPages")},It=function(f){rt.publish("putFont",{font:f,out:te,newObject:hr,putStream:he}),f.isAlreadyPutted!==!0&&(f.objectNumber=hr(),te("<<"),te("/Type /Font"),te("/BaseFont /"+Xo(f.postScriptName)),te("/Subtype /Type1"),typeof f.encoding=="string"&&te("/Encoding /"+f.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},pr=function(){for(var f in Lt)Lt.hasOwnProperty(f)&&(x===!1||x===!0&&b.hasOwnProperty(f))&&It(Lt[f])},er=function(f){f.objectNumber=hr();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[B(f.x),B(f.y),B(f.x+f.width),B(f.y+f.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+f.matrix.toString()+"]"});var oe=f.pages[1].join(`
`);he({data:oe,additionalKeyValues:I,objectId:f.objectNumber}),te("endobj")},tr=function(){for(var f in yt)yt.hasOwnProperty(f)&&er(yt[f])},Ht=function(f,I){var oe,fe=[],Pe=1/(I-1);for(oe=0;oe<1;oe+=Pe)fe.push(oe);if(fe.push(1),f[0].offset!=0){var Ge={offset:0,color:f[0].color};f.unshift(Ge)}if(f[f.length-1].offset!=1){var ct={offset:1,color:f[f.length-1].color};f.push(ct)}for(var At="",Bt=0,Xt=0;Xt<fe.length;Xt++){for(oe=fe[Xt];oe>f[Bt+1].offset;)Bt++;var Yt=f[Bt].offset,or=(oe-Yt)/(f[Bt+1].offset-Yt),Dr=f[Bt].color,$r=f[Bt+1].color;At+=G(Math.round((1-or)*Dr[0]+or*$r[0]).toString(16))+G(Math.round((1-or)*Dr[1]+or*$r[1]).toString(16))+G(Math.round((1-or)*Dr[2]+or*$r[2]).toString(16))}return At.trim()},yr=function(f,I){I||(I=21);var oe=hr(),fe=Ht(f.colors,I),Pe=[];Pe.push({key:"FunctionType",value:"0"}),Pe.push({key:"Domain",value:"[0.0 1.0]"}),Pe.push({key:"Size",value:"["+I+"]"}),Pe.push({key:"BitsPerSample",value:"8"}),Pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he({data:fe,additionalKeyValues:Pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),te("endobj"),f.objectNumber=hr(),te("<< /ShadingType "+f.type),te("/ColorSpace /DeviceRGB");var Ge="/Coords ["+B(parseFloat(f.coords[0]))+" "+B(parseFloat(f.coords[1]))+" ";f.type===2?Ge+=B(parseFloat(f.coords[2]))+" "+B(parseFloat(f.coords[3])):Ge+=B(parseFloat(f.coords[2]))+" "+B(parseFloat(f.coords[3]))+" "+B(parseFloat(f.coords[4]))+" "+B(parseFloat(f.coords[5])),te(Ge+="]"),f.matrix&&te("/Matrix ["+f.matrix.toString()+"]"),te("/Function "+oe+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},Nr=function(f,I){var oe=jr(),fe=hr();I.push({resourcesOid:oe,objectOid:fe}),f.objectNumber=fe;var Pe=[];Pe.push({key:"Type",value:"/Pattern"}),Pe.push({key:"PatternType",value:"1"}),Pe.push({key:"PaintType",value:"1"}),Pe.push({key:"TilingType",value:"1"}),Pe.push({key:"BBox",value:"["+f.boundingBox.map(B).join(" ")+"]"}),Pe.push({key:"XStep",value:B(f.xStep)}),Pe.push({key:"YStep",value:B(f.yStep)}),Pe.push({key:"Resources",value:oe+" 0 R"}),f.matrix&&Pe.push({key:"Matrix",value:"["+f.matrix.toString()+"]"}),he({data:f.stream,additionalKeyValues:Pe,objectId:f.objectNumber}),te("endobj")},nr=function(f){var I;for(I in st)st.hasOwnProperty(I)&&(st[I]instanceof so?yr(st[I]):st[I]instanceof Qo&&Nr(st[I],f))},Mt=function(f){for(var I in f.objectNumber=hr(),te("<<"),f)switch(I){case"opacity":te("/ca "+P(f[I]));break;case"stroke-opacity":te("/CA "+P(f[I]))}te(">>"),te("endobj")},Dt=function(){var f;for(f in et)et.hasOwnProperty(f)&&Mt(et[f])},sr=function(){for(var f in te("/XObject <<"),yt)yt.hasOwnProperty(f)&&yt[f].objectNumber>=0&&te("/"+f+" "+yt[f].objectNumber+" 0 R");rt.publish("putXobjectDict"),te(">>")},Xr=function(){Ln.oid=hr(),te("<<"),te("/Filter /Standard"),te("/V "+Ln.v),te("/R "+Ln.r),te("/U <"+Ln.toHexString(Ln.U)+">"),te("/O <"+Ln.toHexString(Ln.O)+">"),te("/P "+Ln.P),te(">>"),te("endobj")},jt=function(){for(var f in te("/Font <<"),Lt)Lt.hasOwnProperty(f)&&(x===!1||x===!0&&b.hasOwnProperty(f))&&te("/"+f+" "+Lt[f].objectNumber+" 0 R");te(">>")},vr=function(){if(Object.keys(st).length>0){for(var f in te("/Shading <<"),st)st.hasOwnProperty(f)&&st[f]instanceof so&&st[f].objectNumber>=0&&te("/"+f+" "+st[f].objectNumber+" 0 R");rt.publish("putShadingPatternDict"),te(">>")}},Cr=function(f){if(Object.keys(st).length>0){for(var I in te("/Pattern <<"),st)st.hasOwnProperty(I)&&st[I]instanceof g.TilingPattern&&st[I].objectNumber>=0&&st[I].objectNumber<f&&te("/"+I+" "+st[I].objectNumber+" 0 R");rt.publish("putTilingPatternDict"),te(">>")}},cr=function(){if(Object.keys(et).length>0){var f;for(f in te("/ExtGState <<"),et)et.hasOwnProperty(f)&&et[f].objectNumber>=0&&te("/"+f+" "+et[f].objectNumber+" 0 R");rt.publish("putGStateDict"),te(">>")}},Gt=function(f){pn(f.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),jt(),vr(),Cr(f.objectOid),cr(),sr(),te(">>"),te("endobj")},dr=function(){var f=[];pr(),Dt(),tr(),nr(f),rt.publish("putResources"),f.forEach(Gt),Gt({resourcesOid:An,objectOid:Number.MAX_SAFE_INTEGER}),rt.publish("postPutResources")},oi=function(){rt.publish("putAdditionalObjects");for(var f=0;f<xe.length;f++){var I=xe[f];pn(I.objId,!0),te(I.content),te("endobj")}rt.publish("postPutAdditionalObjects")},mi=function(f){Ct[f.fontName]=Ct[f.fontName]||{},Ct[f.fontName][f.fontStyle]=f.id},gs=function(f,I,oe,fe,Pe){var Ge={id:"F"+(Object.keys(Lt).length+1).toString(10),postScriptName:f,fontName:I,fontStyle:oe,encoding:fe,isStandardFont:Pe||!1,metadata:{}};return rt.publish("addFont",{font:Ge,instance:this}),Lt[Ge.id]=Ge,mi(Ge),Ge.id},xo=function(f){for(var I=0,oe=Ne.length;I<oe;I++){var fe=gs.call(this,f[I][0],f[I][1],f[I][2],Ne[I][3],!0);x===!1&&(b[fe]=!0);var Pe=f[I][0].split("-");mi({id:fe,fontName:Pe[0],fontStyle:Pe[1]||""})}rt.publish("addFonts",{fonts:Lt,dictionary:Ct})},Li=function(f){return f.foo=function(){try{return f.apply(this,arguments)}catch(fe){var I=fe.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var oe="Error in function "+I.split(`
`)[0].split("<")[0]+": "+fe.message;if(!$t.console)throw new Error(oe);$t.console.error(oe,fe),$t.alert&&alert(oe)}},f.foo.bar=f,f.foo},bo=function(f,I){var oe,fe,Pe,Ge,ct,At,Bt,Xt,Yt;if(Pe=(I=I||{}).sourceEncoding||"Unicode",ct=I.outputEncoding,(I.autoencode||ct)&&Lt[Fe].metadata&&Lt[Fe].metadata[Pe]&&Lt[Fe].metadata[Pe].encoding&&(Ge=Lt[Fe].metadata[Pe].encoding,!ct&&Lt[Fe].encoding&&(ct=Lt[Fe].encoding),!ct&&Ge.codePages&&(ct=Ge.codePages[0]),typeof ct=="string"&&(ct=Ge[ct]),ct)){for(Bt=!1,At=[],oe=0,fe=f.length;oe<fe;oe++)(Xt=ct[f.charCodeAt(oe)])?At.push(String.fromCharCode(Xt)):At.push(f[oe]),At[oe].charCodeAt(0)>>8&&(Bt=!0);f=At.join("")}for(oe=f.length;Bt===void 0&&oe!==0;)f.charCodeAt(oe-1)>>8&&(Bt=!0),oe--;if(!Bt)return f;for(At=I.noBOM?[]:[254,255],oe=0,fe=f.length;oe<fe;oe++){if((Yt=(Xt=f.charCodeAt(oe))>>8)>>8)throw new Error("Character at position "+oe+" of string '"+f+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");At.push(Yt),At.push(Xt-(Yt<<8))}return String.fromCharCode.apply(void 0,At)},Vn=g.__private__.pdfEscape=g.pdfEscape=function(f,I){return bo(f,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xa=g.__private__.beginPage=function(f){we[++We]=[],tt[We]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(f[0]),topRightY:Number(f[1])}},gl(We),ve(we[q])},pl=function(f,I){var oe,fe,Pe;switch(n=I||n,typeof f=="string"&&(oe=k(f.toLowerCase()),Array.isArray(oe)&&(fe=oe[0],Pe=oe[1])),Array.isArray(f)&&(fe=f[0]*Ee,Pe=f[1]*Ee),isNaN(fe)&&(fe=o[0],Pe=o[1]),(fe>14400||Pe>14400)&&(kr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),Pe=Math.min(14400,Pe)),o=[fe,Pe],n.substr(0,1)){case"l":Pe>fe&&(o=[Pe,fe]);break;case"p":fe>Pe&&(o=[Pe,fe])}xa(o),wl(wa),te(Pi),Sa!==0&&te(Sa+" J"),Ca!==0&&te(Ca+" j"),rt.publish("addPage",{pageNumber:We})},cd=function(f){f>0&&f<=We&&(we.splice(f,1),tt.splice(f,1),We--,q>We&&(q=We),this.setPage(q))},gl=function(f){f>0&&f<=We&&(q=f)},dd=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return we.length-1},ml=function(f,I,oe){var fe,Pe=void 0;return oe=oe||{},f=f!==void 0?f:Lt[Fe].fontName,I=I!==void 0?I:Lt[Fe].fontStyle,fe=f.toLowerCase(),Ct[fe]!==void 0&&Ct[fe][I]!==void 0?Pe=Ct[fe][I]:Ct[f]!==void 0&&Ct[f][I]!==void 0?Pe=Ct[f][I]:oe.disableWarning===!1&&kr.warn("Unable to look up font label for font '"+f+"', '"+I+"'. Refer to getFontList() for available fonts."),Pe||oe.noFallback||(Pe=Ct.times[I])==null&&(Pe=Ct.times.normal),Pe},ud=g.__private__.putInfo=function(){var f=hr(),I=function(fe){return fe};for(var oe in p!==null&&(I=Ln.encryptor(f,0)),te("<<"),te("/Producer ("+Vn(I("jsPDF "+Wt.version))+")"),_e)_e.hasOwnProperty(oe)&&_e[oe]&&te("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+Vn(I(_e[oe]))+")");te("/CreationDate ("+Vn(I(ee))+")"),te(">>"),te("endobj")},ba=g.__private__.putCatalog=function(f){var I=(f=f||{}).rootDictionaryObjId||Dn;switch(hr(),te("<<"),te("/Type /Catalog"),te("/Pages "+I+" 0 R"),Je||(Je="fullwidth"),Je){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+Je;oe.substr(oe.length-1)==="%"&&(Je=parseInt(Je)/100),typeof Je=="number"&&te("/OpenAction [3 0 R /XYZ null null "+P(Je)+"]")}switch(ye||(ye="continuous"),ye){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}Ye&&te("/PageMode /"+Ye),rt.publish("putCatalog"),te(">>"),te("endobj")},hd=g.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(Q+1)),te("/Root "+Q+" 0 R"),te("/Info "+(Q-1)+" 0 R"),p!==null&&te("/Encrypt "+Ln.oid+" 0 R"),te("/ID [ <"+Z+"> <"+Z+"> ]"),te(">>")},fd=g.__private__.putHeader=function(){te("%PDF-"+_),te("%ºß¬à")},pd=g.__private__.putXRef=function(){var f="0000000000";te("xref"),te("0 "+(Q+1)),te("0000000000 65535 f ");for(var I=1;I<=Q;I++)typeof ie[I]=="function"?te((f+ie[I]()).slice(-10)+" 00000 n "):ie[I]!==void 0?te((f+ie[I]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},Zi=g.__private__.buildDocument=function(){$e(),ve(ce),rt.publish("buildDocument"),fd(),Et(),oi(),dr(),p!==null&&Xr(),ud(),ba();var f=le;return pd(),hd(),te("startxref"),te(""+f),te("%%EOF"),ve(we[q]),ce.join(`
`)},yo=g.__private__.getBlob=function(f){return new Blob([Be(f)],{type:"application/pdf"})},vo=g.output=g.__private__.output=Li(function(f,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",f){case void 0:return Zi();case"save":g.save(I.filename);break;case"arraybuffer":return Be(Zi());case"blob":return yo(Zi());case"bloburi":case"bloburl":if($t.URL!==void 0&&typeof $t.URL.createObjectURL=="function")return $t.URL&&$t.URL.createObjectURL(yo(Zi()))||void 0;kr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",fe=Zi();try{oe=Uu(fe)}catch{oe=Uu(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+I.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call($t)==="[object Window]"){var Pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(Pe=I.pdfObjectUrl,Ge="");var ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pe+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",At=$t.open();return At!==null&&At.document.write(ct),At}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call($t)==="[object Window]"){var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Xt=$t.open();if(Xt!==null){Xt.document.write(Bt);var Yt=this;Xt.document.documentElement.querySelector("#pdfViewer").onload=function(){Xt.document.title=I.filename,Xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Yt.output("bloburl"))}}return Xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call($t)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var or='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',Dr=$t.open();if(Dr!==null&&(Dr.document.write(or),Dr.document.title=I.filename),Dr||typeof safari=="undefined")return Dr;break;case"datauri":case"dataurl":return $t.document.location.href=this.output("datauristring",I);default:return null}}),xl=function(f){return Array.isArray(bt)===!0&&bt.indexOf(f)>-1};switch(i){case"pt":Ee=1;break;case"mm":Ee=72/25.4;break;case"cm":Ee=72/2.54;break;case"in":Ee=72;break;case"px":Ee=xl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ee=12;break;case"ex":Ee=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Ee=i}var Ln=null;Y(),se();var gd=function(f){return p!==null?Ln.encryptor(f,0):function(I){return I}},bl=g.__private__.getPageInfo=g.getPageInfo=function(f){if(isNaN(f)||f%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:tt[f].objId,pageNumber:f,pageContext:tt[f]}},Vt=g.__private__.getPageInfoByObjId=function(f){if(isNaN(f)||f%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in tt)if(tt[I].objId===f)break;return bl(I)},md=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:tt[q].objId,pageNumber:q,pageContext:tt[q]}};g.addPage=function(){return pl.apply(this,arguments),this},g.setPage=function(){return gl.apply(this,arguments),ve.call(this,we[q]),this},g.insertPage=function(f){return this.addPage(),this.movePage(q,f),this},g.movePage=function(f,I){var oe,fe;if(f>I){oe=we[f],fe=tt[f];for(var Pe=f;Pe>I;Pe--)we[Pe]=we[Pe-1],tt[Pe]=tt[Pe-1];we[I]=oe,tt[I]=fe,this.setPage(I)}else if(f<I){oe=we[f],fe=tt[f];for(var Ge=f;Ge<I;Ge++)we[Ge]=we[Ge+1],tt[Ge]=tt[Ge+1];we[I]=oe,tt[I]=fe,this.setPage(I)}return this},g.deletePage=function(){return cd.apply(this,arguments),this},g.__private__.text=g.text=function(f,I,oe,fe,Pe){var Ge,ct,At,Bt,Xt,Yt,or,Dr,$r,nn=(fe=fe||{}).scope||this;if(typeof f=="number"&&typeof I=="number"&&(typeof oe=="string"||Array.isArray(oe))){var Pn=oe;oe=I,I=f,f=Pn}if(arguments[3]instanceof lt?(U("The transform parameter of text() with a Matrix value"),$r=Pe):(At=arguments[4],Bt=arguments[5],Lr(or=arguments[3])==="object"&&or!==null||(typeof At=="string"&&(Bt=At,At=null),typeof or=="string"&&(Bt=or,or=null),typeof or=="number"&&(At=or,or=null),fe={flags:or,angle:At,align:Bt})),isNaN(I)||isNaN(oe)||f==null)throw new Error("Invalid arguments passed to jsPDF.text");if(f.length===0)return nn;var gn="",Ni=!1,ai=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:Gs,$i=nn.internal.scaleFactor;function Al(Or){return Or=Or.split("	").join(Array(fe.TabLen||9).join(" ")),Vn(Or,or)}function Pa(Or){for(var Rr,Qr=Or.concat(),ln=[],is=Qr.length;is--;)typeof(Rr=Qr.shift())=="string"?ln.push(Rr):Array.isArray(Or)&&(Rr.length===1||Rr[1]===void 0&&Rr[2]===void 0)?ln.push(Rr[0]):ln.push([Rr[0],Rr[1],Rr[2]]);return ln}function Na(Or,Rr){var Qr;if(typeof Or=="string")Qr=Rr(Or)[0];else if(Array.isArray(Or)){for(var ln,is,Da=Or.concat(),Fo=[],Rl=Da.length;Rl--;)typeof(ln=Da.shift())=="string"?Fo.push(Rr(ln)[0]):Array.isArray(ln)&&typeof ln[0]=="string"&&(is=Rr(ln[0],ln[1],ln[2]),Fo.push([is[0],is[1],is[2]]));Qr=Fo}return Qr}var ko=!1,Oa=!0;if(typeof f=="string")ko=!0;else if(Array.isArray(f)){var Ra=f.concat();ct=[];for(var Ao,Cn=Ra.length;Cn--;)(typeof(Ao=Ra.shift())!="string"||Array.isArray(Ao)&&typeof Ao[0]!="string")&&(Oa=!1);ko=Oa}if(ko===!1)throw new Error('Type of text must be string or Array. "'+f+'" is not recognized.');typeof f=="string"&&(f=f.match(/[\r?\n]/)?f.split(/\r\n|\r|\n/g):[f]);var Lo=ue/nn.internal.scaleFactor,Po=Lo*(ai-1);switch(fe.baseline){case"bottom":oe-=Po;break;case"top":oe+=Lo-Po;break;case"hanging":oe+=Lo-2*Po;break;case"middle":oe+=Lo/2-Po}if((Yt=fe.maxWidth||0)>0&&(typeof f=="string"?f=nn.splitTextToSize(f,Yt):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(Or,Rr){return Or.concat(nn.splitTextToSize(Rr,Yt))},[]))),Ge={text:f,x:I,y:oe,options:fe,mutex:{pdfEscape:Vn,activeFontKey:Fe,fonts:Lt,activeFontSize:ue}},rt.publish("preProcessText",Ge),f=Ge.text,At=(fe=Ge.options).angle,!($r instanceof lt)&&At&&typeof At=="number"){At*=Math.PI/180,fe.rotationDirection===0&&(At=-At),J===M.ADVANCED&&(At=-At);var No=Math.cos(At),Ea=Math.sin(At);$r=new lt(No,Ea,-Ea,No,0,0)}else At&&At instanceof lt&&($r=At);J!==M.ADVANCED||$r||($r=Rt),(Xt=fe.charSpace||So)!==void 0&&(gn+=B(A(Xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Dr=fe.horizontalScale)!==void 0&&(gn+=B(100*Dr)+` Tz
`),fe.lang;var Yn=-1,kd=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,Ta=nn.internal.getCurrentPageInfo().pageContext;switch(kd){case 0:case!1:case"fill":Yn=0;break;case 1:case!0:case"stroke":Yn=1;break;case 2:case"fillThenStroke":Yn=2;break;case 3:case"invisible":Yn=3;break;case 4:case"fillAndAddForClipping":Yn=4;break;case 5:case"strokeAndAddPathForClipping":Yn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yn=6;break;case 7:case"addToPathForClipping":Yn=7}var Ll=Ta.usedRenderingMode!==void 0?Ta.usedRenderingMode:-1;Yn!==-1?gn+=Yn+` Tr
`:Ll!==-1&&(gn+=`0 Tr
`),Yn!==-1&&(Ta.usedRenderingMode=Yn),Bt=fe.align||"left";var xi,Oo=ue*ai,Pl=nn.internal.pageSize.getWidth(),Nl=Lt[Fe];Xt=fe.charSpace||So,Yt=fe.maxWidth||0,or=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var ys=[],Js=function(Or){return nn.getStringUnitWidth(Or,{font:Nl,charSpace:Xt,fontSize:ue,doKerning:!1})*ue/$i};if(Object.prototype.toString.call(f)==="[object Array]"){var Jn;ct=Pa(f),Bt!=="left"&&(xi=ct.map(Js));var Mn,vs=0;if(Bt==="right"){I-=xi[0],f=[],Cn=ct.length;for(var ts=0;ts<Cn;ts++)ts===0?(Mn=Hi(I),Jn=es(oe)):(Mn=A(vs-xi[ts]),Jn=-Oo),f.push([ct[ts],Mn,Jn]),vs=xi[ts]}else if(Bt==="center"){I-=xi[0]/2,f=[],Cn=ct.length;for(var rs=0;rs<Cn;rs++)rs===0?(Mn=Hi(I),Jn=es(oe)):(Mn=A((vs-xi[rs])/2),Jn=-Oo),f.push([ct[rs],Mn,Jn]),vs=xi[rs]}else if(Bt==="left"){f=[],Cn=ct.length;for(var Ro=0;Ro<Cn;Ro++)f.push(ct[Ro])}else if(Bt==="justify"&&Nl.encoding==="Identity-H"){f=[],Cn=ct.length,Yt=Yt!==0?Yt:Pl;for(var ns=0,Kr=0;Kr<Cn;Kr++)if(Jn=Kr===0?es(oe):-Oo,Mn=Kr===0?Hi(I):ns,Kr<Cn-1){var Fa=A((Yt-xi[Kr])/(ct[Kr].split(" ").length-1)),Bn=ct[Kr].split(" ");f.push([Bn[0]+" ",Mn,Jn]),ns=0;for(var bi=1;bi<Bn.length;bi++){var Eo=(Js(Bn[bi-1]+" "+Bn[bi])-Js(Bn[bi]))*$i+Fa;bi==Bn.length-1?f.push([Bn[bi],Eo,0]):f.push([Bn[bi]+" ",Eo,0]),ns-=Eo}}else f.push([ct[Kr],Mn,Jn]);f.push(["",ns,0])}else{if(Bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(f=[],Cn=ct.length,Yt=Yt!==0?Yt:Pl,Kr=0;Kr<Cn;Kr++)Jn=Kr===0?es(oe):-Oo,Mn=Kr===0?Hi(I):0,Kr<Cn-1?ys.push(B(A((Yt-xi[Kr])/(ct[Kr].split(" ").length-1)))):ys.push(0),f.push([ct[Kr],Mn,Jn])}}var Ol=typeof fe.R2L=="boolean"?fe.R2L:ut;Ol===!0&&(f=Na(f,function(Or,Rr,Qr){return[Or.split("").reverse().join(""),Rr,Qr]})),Ge={text:f,x:I,y:oe,options:fe,mutex:{pdfEscape:Vn,activeFontKey:Fe,fonts:Lt,activeFontSize:ue}},rt.publish("postProcessText",Ge),f=Ge.text,Ni=Ge.mutex.isHex||!1;var Ia=Lt[Fe].encoding;Ia!=="WinAnsiEncoding"&&Ia!=="StandardEncoding"||(f=Na(f,function(Or,Rr,Qr){return[Al(Or),Rr,Qr]})),ct=Pa(f),f=[];for(var Xs,Ks,ws,Qs=0,To=1,Zs=Array.isArray(ct[0])?To:Qs,js="",za=function(Or,Rr,Qr){var ln="";return Qr instanceof lt?(Qr=typeof fe.angle=="number"?zt(Qr,new lt(1,0,0,1,Or,Rr)):zt(new lt(1,0,0,1,Or,Rr),Qr),J===M.ADVANCED&&(Qr=zt(new lt(1,0,0,-1,0,0),Qr)),ln=Qr.join(" ")+` Tm
`):ln=B(Or)+" "+B(Rr)+` Td
`,ln},yi=0;yi<ct.length;yi++){switch(js="",Zs){case To:ws=(Ni?"<":"(")+ct[yi][0]+(Ni?">":")"),Xs=parseFloat(ct[yi][1]),Ks=parseFloat(ct[yi][2]);break;case Qs:ws=(Ni?"<":"(")+ct[yi]+(Ni?">":")"),Xs=Hi(I),Ks=es(oe)}ys!==void 0&&ys[yi]!==void 0&&(js=ys[yi]+` Tw
`),yi===0?f.push(js+za(Xs,Ks,$r)+ws):Zs===Qs?f.push(js+ws):Zs===To&&f.push(js+za(Xs,Ks,$r)+ws)}f=Zs===Qs?f.join(` Tj
T* `):f.join(` Tj
`),f+=` Tj
`;var vi=`BT
/`;return vi+=Fe+" "+ue+` Tf
`,vi+=B(ue*ai)+` TL
`,vi+=Vs+`
`,vi+=gn,vi+=f,te(vi+="ET"),b[Fe]=!0,nn};var xd=g.__private__.clip=g.clip=function(f){return te(f==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return xd("evenodd")},g.__private__.discardPath=g.discardPath=function(){return te("n"),this};var Ui=g.__private__.isValidStyle=function(f){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(f)!==-1&&(I=!0),I};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(f){return Ui(f)&&(h=f),this};var yl=g.__private__.getStyle=g.getStyle=function(f){var I=h;switch(f){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=f}return I},vl=g.close=function(){return te("h"),this};g.stroke=function(){return te("S"),this},g.fill=function(f){return wo("f",f),this},g.fillEvenOdd=function(f){return wo("f*",f),this},g.fillStroke=function(f){return wo("B",f),this},g.fillStrokeEvenOdd=function(f){return wo("B*",f),this};var wo=function(f,I){Lr(I)==="object"?yd(I,f):te(f)},ya=function(f){f===null||J===M.ADVANCED&&f===void 0||(f=yl(f),te(f))};function bd(f,I,oe,fe,Pe){var Ge=new Qo(I||this.boundingBox,oe||this.xStep,fe||this.yStep,this.gState,Pe||this.matrix);Ge.stream=this.stream;var ct=f+"$$"+this.cloneIndex+++"$$";return Pt(ct,Ge),Ge}var yd=function(f,I){var oe=Ie[f.key],fe=st[oe];if(fe instanceof so)te("q"),te(vd(I)),fe.gState&&g.setGState(fe.gState),te(f.matrix.toString()+" cm"),te("/"+oe+" sh"),te("Q");else if(fe instanceof Qo){var Pe=new lt(1,0,0,-1,0,bs());f.matrix&&(Pe=Pe.multiply(f.matrix||Rt),oe=bd.call(fe,f.key,f.boundingBox,f.xStep,f.yStep,Pe).id),te("q"),te("/Pattern cs"),te("/"+oe+" scn"),fe.gState&&g.setGState(fe.gState),te(I),te("Q")}},vd=function(f){switch(f){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},va=g.moveTo=function(f,I){return te(B(A(f))+" "+B(E(I))+" m"),this},$s=g.lineTo=function(f,I){return te(B(A(f))+" "+B(E(I))+" l"),this},ms=g.curveTo=function(f,I,oe,fe,Pe,Ge){return te([B(A(f)),B(E(I)),B(A(oe)),B(E(fe)),B(A(Pe)),B(E(Ge)),"c"].join(" ")),this};g.__private__.line=g.line=function(f,I,oe,fe,Pe){if(isNaN(f)||isNaN(I)||isNaN(oe)||isNaN(fe)||!Ui(Pe))throw new Error("Invalid arguments passed to jsPDF.line");return J===M.COMPAT?this.lines([[oe-f,fe-I]],f,I,[1,1],Pe||"S"):this.lines([[oe-f,fe-I]],f,I,[1,1]).stroke()},g.__private__.lines=g.lines=function(f,I,oe,fe,Pe,Ge){var ct,At,Bt,Xt,Yt,or,Dr,$r,nn,Pn,gn,Ni;if(typeof f=="number"&&(Ni=oe,oe=I,I=f,f=Ni),fe=fe||[1,1],Ge=Ge||!1,isNaN(I)||isNaN(oe)||!Array.isArray(f)||!Array.isArray(fe)||!Ui(Pe)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(va(I,oe),ct=fe[0],At=fe[1],Xt=f.length,Pn=I,gn=oe,Bt=0;Bt<Xt;Bt++)(Yt=f[Bt]).length===2?(Pn=Yt[0]*ct+Pn,gn=Yt[1]*At+gn,$s(Pn,gn)):(or=Yt[0]*ct+Pn,Dr=Yt[1]*At+gn,$r=Yt[2]*ct+Pn,nn=Yt[3]*At+gn,Pn=Yt[4]*ct+Pn,gn=Yt[5]*At+gn,ms(or,Dr,$r,nn,Pn,gn));return Ge&&vl(),ya(Pe),this},g.path=function(f){for(var I=0;I<f.length;I++){var oe=f[I],fe=oe.c;switch(oe.op){case"m":va(fe[0],fe[1]);break;case"l":$s(fe[0],fe[1]);break;case"c":ms.apply(this,fe);break;case"h":vl()}}return this},g.__private__.rect=g.rect=function(f,I,oe,fe,Pe){if(isNaN(f)||isNaN(I)||isNaN(oe)||isNaN(fe)||!Ui(Pe))throw new Error("Invalid arguments passed to jsPDF.rect");return J===M.COMPAT&&(fe=-fe),te([B(A(f)),B(E(I)),B(A(oe)),B(A(fe)),"re"].join(" ")),ya(Pe),this},g.__private__.triangle=g.triangle=function(f,I,oe,fe,Pe,Ge,ct){if(isNaN(f)||isNaN(I)||isNaN(oe)||isNaN(fe)||isNaN(Pe)||isNaN(Ge)||!Ui(ct))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-f,fe-I],[Pe-oe,Ge-fe],[f-Pe,I-Ge]],f,I,[1,1],ct,!0),this},g.__private__.roundedRect=g.roundedRect=function(f,I,oe,fe,Pe,Ge,ct){if(isNaN(f)||isNaN(I)||isNaN(oe)||isNaN(fe)||isNaN(Pe)||isNaN(Ge)||!Ui(ct))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var At=4/3*(Math.SQRT2-1);return Pe=Math.min(Pe,.5*oe),Ge=Math.min(Ge,.5*fe),this.lines([[oe-2*Pe,0],[Pe*At,0,Pe,Ge-Ge*At,Pe,Ge],[0,fe-2*Ge],[0,Ge*At,-Pe*At,Ge,-Pe,Ge],[2*Pe-oe,0],[-Pe*At,0,-Pe,-Ge*At,-Pe,-Ge],[0,2*Ge-fe],[0,-Ge*At,Pe*At,-Ge,Pe,-Ge]],f+Pe,I,[1,1],ct,!0),this},g.__private__.ellipse=g.ellipse=function(f,I,oe,fe,Pe){if(isNaN(f)||isNaN(I)||isNaN(oe)||isNaN(fe)||!Ui(Pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*oe,ct=4/3*(Math.SQRT2-1)*fe;return va(f+oe,I),ms(f+oe,I-ct,f+Ge,I-fe,f,I-fe),ms(f-Ge,I-fe,f-oe,I-ct,f-oe,I),ms(f-oe,I+ct,f-Ge,I+fe,f,I+fe),ms(f+Ge,I+fe,f+oe,I+ct,f+oe,I),ya(Pe),this},g.__private__.circle=g.circle=function(f,I,oe,fe){if(isNaN(f)||isNaN(I)||isNaN(oe)||!Ui(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(f,I,oe,oe,fe)},g.setFont=function(f,I,oe){return oe&&(I=D(I,oe)),Fe=ml(f,I,{disableWarning:!1}),this};var wd=g.__private__.getFont=g.getFont=function(){return Lt[ml.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var f,I,oe={};for(f in Ct)if(Ct.hasOwnProperty(f))for(I in oe[f]=[],Ct[f])Ct[f].hasOwnProperty(I)&&oe[f].push(I);return oe},g.addFont=function(f,I,oe,fe,Pe){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?Pe=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(oe=D(oe,fe)),Pe=Pe||"Identity-H",gs.call(this,f,I,oe,Pe)};var Gs,wa=t.lineWidth||.200025,jo=g.__private__.getLineWidth=g.getLineWidth=function(){return wa},wl=g.__private__.setLineWidth=g.setLineWidth=function(f){return wa=f,te(B(A(f))+" w"),this};g.__private__.setLineDash=Wt.API.setLineDash=Wt.API.setLineDashPattern=function(f,I){if(f=f||[],I=I||0,isNaN(I)||!Array.isArray(f))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return f=f.map(function(oe){return B(A(oe))}).join(" "),I=B(A(I)),te("["+f+"] "+I+" d"),this};var jl=g.__private__.getLineHeight=g.getLineHeight=function(){return ue*Gs};g.__private__.getLineHeight=g.getLineHeight=function(){return ue*Gs};var Sl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(f){return typeof(f=f||1.15)=="number"&&(Gs=f),this},Cl=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Gs};Sl(t.lineHeight);var Hi=g.__private__.getHorizontalCoordinate=function(f){return A(f)},es=g.__private__.getVerticalCoordinate=function(f){return J===M.ADVANCED?f:tt[q].mediaBox.topRightY-tt[q].mediaBox.bottomLeftY-A(f)},jd=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(f){return B(Hi(f))},xs=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(f){return B(es(f))},Pi=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return $n(Pi)},g.__private__.setStrokeColor=g.setDrawColor=function(f,I,oe,fe){return Pi=Gn({ch1:f,ch2:I,ch3:oe,ch4:fe,pdfColorType:"draw",precision:2}),te(Pi),this};var ja=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return $n(ja)},g.__private__.setFillColor=g.setFillColor=function(f,I,oe,fe){return ja=Gn({ch1:f,ch2:I,ch3:oe,ch4:fe,pdfColorType:"fill",precision:2}),te(ja),this};var Vs=t.textColor||"0 g",Sd=g.__private__.getTextColor=g.getTextColor=function(){return $n(Vs)};g.__private__.setTextColor=g.setTextColor=function(f,I,oe,fe){return Vs=Gn({ch1:f,ch2:I,ch3:oe,ch4:fe,pdfColorType:"text",precision:3}),this};var So=t.charSpace,Cd=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(So||0)};g.__private__.setCharSpace=g.setCharSpace=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return So=f,this};var Sa=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(f){var I=g.CapJoinStyles[f];if(I===void 0)throw new Error("Line cap style of '"+f+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sa=I,te(I+" J"),this};var Ca=0;g.__private__.setLineJoin=g.setLineJoin=function(f){var I=g.CapJoinStyles[f];if(I===void 0)throw new Error("Line join style of '"+f+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ca=I,te(I+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(f){if(f=f||0,isNaN(f))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(B(A(f))+" M"),this},g.GState=zc,g.setGState=function(f){(f=typeof f=="string"?et[Tt[f]]:_l(null,f)).equals(Le)||(te("/"+f.id+" gs"),Le=f)};var _l=function(f,I){if(!f||!Tt[f]){var oe=!1;for(var fe in et)if(et.hasOwnProperty(fe)&&et[fe].equals(I)){oe=!0;break}if(oe)I=et[fe];else{var Pe="GS"+(Object.keys(et).length+1).toString(10);et[Pe]=I,I.id=Pe}return f&&(Tt[f]=I.id),rt.publish("addGState",I),I}};g.addGState=function(f,I){return _l(f,I),this},g.saveGraphicsState=function(){return te("q"),be.push({key:Fe,size:ue,color:Vs}),this},g.restoreGraphicsState=function(){te("Q");var f=be.pop();return Fe=f.key,ue=f.size,Vs=f.color,Le=null,this},g.setCurrentTransformationMatrix=function(f){return te(f.toString()+" cm"),this},g.comment=function(f){return te("#"+f),this};var Co=function(f,I){var oe=f||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(Ge){isNaN(Ge)||(oe=parseFloat(Ge))}});var fe=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(Ge){isNaN(Ge)||(fe=parseFloat(Ge))}});var Pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pe},set:function(Ge){Pe=Ge.toString()}}),this},_a=function(f,I,oe,fe){Co.call(this,f,I),this.type="rect";var Pe=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pe},set:function(ct){isNaN(ct)||(Pe=parseFloat(ct))}});var Ge=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(ct){isNaN(ct)||(Ge=parseFloat(ct))}}),this},ka=function(){this.page=We,this.currentPage=q,this.pages=we.slice(0),this.pagesContext=tt.slice(0),this.x=it,this.y=Ve,this.matrix=at,this.width=Ys(q),this.height=bs(q),this.outputDestination=De,this.id="",this.objectNumber=-1};ka.prototype.restore=function(){We=this.page,q=this.currentPage,tt=this.pagesContext,we=this.pages,it=this.x,Ve=this.y,at=this.matrix,Aa(q,this.width),La(q,this.height),De=this.outputDestination};var kl=function(f,I,oe,fe,Pe){pt.push(new ka),We=q=0,we=[],it=f,Ve=I,at=Pe,xa([oe,fe])},_d=function(f){if(qe[f])pt.pop().restore();else{var I=new ka,oe="Xo"+(Object.keys(yt).length+1).toString(10);I.id=oe,qe[f]=oe,yt[oe]=I,rt.publish("addFormObject",I),pt.pop().restore()}};for(var _o in g.beginFormObject=function(f,I,oe,fe,Pe){return kl(f,I,oe,fe,Pe),this},g.endFormObject=function(f){return _d(f),this},g.doFormObject=function(f,I){var oe=yt[qe[f]];return te("q"),te(I.toString()+" cm"),te("/"+oe.id+" Do"),te("Q"),this},g.getFormObject=function(f){var I=yt[qe[f]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},g.save=function(f,I){return f=f||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(no(yo(Zi()),f),typeof no.unload=="function"&&$t.setTimeout&&setTimeout(no.unload,911),this):new Promise(function(oe,fe){try{var Pe=no(yo(Zi()),f);typeof no.unload=="function"&&$t.setTimeout&&setTimeout(no.unload,911),oe(Pe)}catch(Ge){fe(Ge.message)}})},Wt.API)Wt.API.hasOwnProperty(_o)&&(_o==="events"&&Wt.API.events.length?function(f,I){var oe,fe,Pe;for(Pe=I.length-1;Pe!==-1;Pe--)oe=I[Pe][0],fe=I[Pe][1],f.subscribe.apply(f,[oe].concat(typeof fe=="function"?[fe]:fe))}(rt,Wt.API.events):g[_o]=Wt.API[_o]);var Ys=g.getPageWidth=function(f){return(tt[f=f||q].mediaBox.topRightX-tt[f].mediaBox.bottomLeftX)/Ee},Aa=g.setPageWidth=function(f,I){tt[f].mediaBox.topRightX=I*Ee+tt[f].mediaBox.bottomLeftX},bs=g.getPageHeight=function(f){return(tt[f=f||q].mediaBox.topRightY-tt[f].mediaBox.bottomLeftY)/Ee},La=g.setPageHeight=function(f,I){tt[f].mediaBox.topRightY=I*Ee+tt[f].mediaBox.bottomLeftY};return g.internal={pdfEscape:Vn,getStyle:yl,getFont:wd,getFontSize:Ke,getCharSpace:Cd,getTextColor:Sd,getLineHeight:jl,getLineHeightFactor:Cl,getLineWidth:jo,write:Ce,getHorizontalCoordinate:Hi,getVerticalCoordinate:es,getCoordinateString:jd,getVerticalCoordinateString:xs,collections:{},newObject:hr,newAdditionalObject:Sr,newObjectDeferred:jr,newObjectDeferredBegin:pn,getFilters:si,putStream:he,events:rt,scaleFactor:Ee,pageSize:{getWidth:function(){return Ys(q)},setWidth:function(f){Aa(q,f)},getHeight:function(){return bs(q)},setHeight:function(f){La(q,f)}},encryptionOptions:p,encryption:Ln,getEncryptor:gd,output:vo,getNumberOfPages:dd,pages:we,out:te,f2:P,f3:w,getPageInfo:bl,getPageInfoByObjId:Vt,getCurrentPageInfo:md,getPDFVersion:S,Point:Co,Rectangle:_a,Matrix:lt,hasHotfix:xl},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Ys(q)},set:function(f){Aa(q,f)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return bs(q)},set:function(f){La(q,f)},enumerable:!0,configurable:!0}),xo.call(g,Ne),Fe="F1",pl(o,n),rt.publish("initialized"),g}Jo.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Jo.prototype.toHexString=function(t){return t.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Jo.prototype.hexToBytes=function(t){for(var r=[],n=0;n<t.length;n+=2)r.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return r.join("")},Jo.prototype.processOwnerPassword=function(t,r){return $u(Hu(r).substr(0,5),t)},Jo.prototype.encryptor=function(t,r){var n=Hu(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&r,r>>8&255)).substr(0,10);return function(i){return $u(n,i)}},zc.prototype.equals=function(t){var r,n="id,objectNumber,equals";if(!t||Lr(t)!==Lr(this))return!1;var i=0;for(r in this)if(!(n.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!t.hasOwnProperty(r)||this[r]!==t[r])return!1;i++}for(r in t)t.hasOwnProperty(r)&&n.indexOf(r)<0&&i--;return i===0},Wt.API={events:[]},Wt.version="3.0.1";var Vr=Wt.API,ah=1,mo=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$o=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jt=function(t){return t.toFixed(2)},Es=function(t){return t.toFixed(5)};Vr.__acroform__={};var ii=function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t},Hf=function(t){return t*ah},Yi=function(t){var r=new W0,n=Ot.internal.getHeight(t)||0,i=Ot.internal.getWidth(t)||0;return r.BBox=[0,0,Number(Jt(i)),Number(Jt(n))],r},ly=Vr.__acroform__.setBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<r},cy=Vr.__acroform__.clearBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<r)},dy=Vr.__acroform__.getBit=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<r)==0?0:1},Zr=Vr.__acroform__.getBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return dy(t,r-1)},en=Vr.__acroform__.setBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ly(t,r-1)},tn=Vr.__acroform__.clearBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cy(t,r-1)},uy=Vr.__acroform__.calculateCoordinates=function(t,r){var n=r.internal.getHorizontalCoordinate,i=r.internal.getVerticalCoordinate,o=t[0],s=t[1],a=t[2],c=t[3],u={};return u.lowerLeft_X=n(o)||0,u.lowerLeft_Y=i(s+c)||0,u.upperRight_X=n(o+a)||0,u.upperRight_Y=i(s)||0,[Number(Jt(u.lowerLeft_X)),Number(Jt(u.lowerLeft_Y)),Number(Jt(u.upperRight_X)),Number(Jt(u.upperRight_Y))]},hy=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var r=[],n=t._V||t.DV,i=Gu(t,n),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(t.scope.__private__.encodeColorString(t.color)),r.push("/"+o+" "+Jt(i.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC");var s=Yi(t);return s.scope=t.scope,s.stream=r.join(`
`),s}},Gu=function(t,r){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},o=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");o=t.multiline?o.map(function(w){return w.split(`
`)}):o.map(function(w){return[w]});var s=n,a=Ot.internal.getHeight(t)||0;a=a<0?-a:a;var c=Ot.internal.getWidth(t)||0;c=c<0?-c:c;var u=function(w,A,T){if(w+1<o.length){var E=A+" "+o[w+1][0];return lc(E,t,T).width<=c-4}return!1};s++;e:for(;s>0;){r="",s--;var h,p,x=lc("3",t,s).height,b=t.multiline?a-s:(a-x)/2,g=b+=2,_=0,S=0,O=0;if(s<=0){r=`(...) Tj
`,r+="% Width of Text: "+lc(r,t,s=12).width+", FieldWidth:"+c+`
`;break}for(var k="",M=0,J=0;J<o.length;J++)if(o.hasOwnProperty(J)){var re=!1;if(o[J].length!==1&&O!==o[J].length-1){if((x+2)*(M+2)+2>a)continue e;k+=o[J][O],re=!0,S=J,J--}else{k=(k+=o[J][O]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var N=parseInt(J),D=u(N,k,s),B=J>=o.length-1;if(D&&!B){k+=" ",O=0;continue}if(D||B){if(B)S=N;else if(t.multiline&&(x+2)*(M+2)+2>a)continue e}else{if(!t.multiline||(x+2)*(M+2)+2>a)continue e;S=N}}for(var U="",R=_;R<=S;R++){var P=o[R];if(t.multiline){if(R===S){U+=P[O]+" ",O=(O+1)%P.length;continue}if(R===_){U+=P[P.length-1]+" ";continue}}U+=P[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,p=lc(U,t,s).width,t.textAlign){case"right":h=c-p-2;break;case"center":h=(c-p)/2;break;case"left":default:h=2}r+=Jt(h)+" "+Jt(g)+` Td
`,r+="("+mo(U)+`) Tj
`,r+=-Jt(h)+` 0 Td
`,g=-(s+2),p=0,_=re?S:S+1,M++,k=""}break}return i.text=r,i.fontSize=s,i},lc=function(t,r,n){var i=r.scope.internal.getFont(r.fontName,r.fontStyle),o=r.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:r.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},fy={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},py=function(t,r){var n={type:"reference",object:t};r.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&r.internal.getPageInfo(t.page).pageContext.annotations.push(n)},gy=function(t,r){for(var n in t)if(t.hasOwnProperty(n)){var i=n,o=t[n];r.internal.newObjectDeferredBegin(o.objId,!0),Lr(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[i]}},my=function(t,r){if(r.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(qi.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(fy)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ah=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new U0,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s.objId=void 0,s.hasAnnotation&&py(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,o){var s=!i;for(var a in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(a)){var c=i[a],u=[],h=c.Rect;if(c.Rect&&(c.Rect=uy(c.Rect,o)),o.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Ot.createDefaultAppearanceStream(c),Lr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=h,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=hy(c);u.push({key:"AP",value:"<</N "+p+">>"}),o.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var x="";for(var b in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(b)){var g=c.appearanceStreamContent[b];if(x+="/"+b+" ",x+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var _=g[a];typeof _=="function"&&(_=_.call(o,c)),x+="/"+a+" "+_+" ",o.internal.acroformPlugin.xForms.indexOf(_)>=0||o.internal.acroformPlugin.xForms.push(_)}}else typeof(_=g)=="function"&&(_=_.call(o,c)),x+="/"+a+" "+_,o.internal.acroformPlugin.xForms.indexOf(_)>=0||o.internal.acroformPlugin.xForms.push(_);x+=">>"}u.push({key:"AP",value:`<<
`+x+">>"})}o.internal.putStream({additionalKeyValues:u,objectId:c.objId}),o.internal.out("endobj")}s&&gy(o.internal.acroformPlugin.xForms,o)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},q0=Vr.__acroform__.arrayToPdfArray=function(t,r,n){var i=function(a){return a};if(Array.isArray(t)){for(var o="[",s=0;s<t.length;s++)switch(s!==0&&(o+=" "),Lr(t[s])){case"boolean":case"number":case"object":o+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(r!==void 0&&n&&(i=n.internal.getEncryptor(r)),o+="("+mo(i(t[s].toString()))+")"):o+=t[s].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},vu=function(t,r,n){var i=function(o){return o};return r!==void 0&&n&&(i=n.internal.getEncryptor(r)),(t=t||"").toString(),t="("+mo(i(t))+")"},Ji=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ji.prototype.toString=function(){return this.objId+" 0 R"},Ji.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ji.prototype.getKeyValueListForStream=function(){var t=[],r=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in r)if(Object.getOwnPropertyDescriptor(this,r[n]).configurable===!1){var i=r[n],o=this[i];o&&(Array.isArray(o)?t.push({key:i,value:q0(o,this.objId,this.scope)}):o instanceof Ji?(o.scope=this.scope,t.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:i,value:o}))}return t};var W0=function(){Ji.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};ii(W0,Ji);var U0=function(){Ji.call(this);var t,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+mo(n(t))+")"}},set:function(n){t=n}})};ii(U0,Ji);var qi=function t(){Ji.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');r=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Zr(r,3)},set:function(k){k?this.F=en(r,3):this.F=tn(r,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');n=k}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(k){i=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(k){i[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(k){i[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(k){i[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(k){i[3]=k}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Dc)return;s="FieldObject"+t.FieldNum++}var k=function(M){return M};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+mo(k(s))+")"},set:function(k){s=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(k){s=k}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(k){c=k}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(k){u=k}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/ah:h},set:function(k){h=k}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(k){p=k}});var x="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!x||this instanceof Dc||this instanceof lo))return vu(x,this.objId,this.scope)},set:function(k){k=k.toString(),x=k}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof yn?b:vu(b,this.objId,this.scope)},set:function(k){k=k.toString(),b=this instanceof yn?k:k.substr(0,1)==="("?$o(k.substr(1,k.length-2)):$o(k)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof yn?$o(b.substr(1,b.length-1)):b},set:function(k){k=k.toString(),b=this instanceof yn?"/"+k:k}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof yn?g:vu(g,this.objId,this.scope)},set:function(k){k=k.toString(),g=this instanceof yn?k:k.substr(0,1)==="("?$o(k.substr(1,k.length-2)):$o(k)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof yn?$o(g.substr(1,g.length-1)):g},set:function(k){k=k.toString(),g=this instanceof yn?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(k){k=!!k,S=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(k){_=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,1)},set:function(k){k?this.Ff=en(this.Ff,1):this.Ff=tn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,2)},set:function(k){k?this.Ff=en(this.Ff,2):this.Ff=tn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,3)},set:function(k){k?this.Ff=en(this.Ff,3):this.Ff=tn(this.Ff,3)}});var O=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(O!==null)return O},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');O=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(O){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:O=2;break;case"center":case 1:O=1;break;case"left":case 0:default:O=0}}})};ii(qi,Ji);var ia=function(){qi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return q0(r,this.objId,this.scope)},set:function(n){var i,o;o=[],typeof(i=n)=="string"&&(o=function(s,a,c){c||(c=1);for(var u,h=[];u=a.exec(s);)h.push(u[c]);return h}(i,/\((.*?)\)/g)),r=o}}),this.getOptions=function(){return r},this.setOptions=function(n){r=n,this.sort&&r.sort()},this.addOption=function(n){n=(n=n||"").toString(),r.push(n),this.sort&&r.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();r.indexOf(n)!==-1&&(r.splice(r.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,18)},set:function(n){n?this.Ff=en(this.Ff,18):this.Ff=tn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=en(this.Ff,19):this.Ff=tn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,20)},set:function(n){n?(this.Ff=en(this.Ff,20),r.sort()):this.Ff=tn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,22)},set:function(n){n?this.Ff=en(this.Ff,22):this.Ff=tn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,23)},set:function(n){n?this.Ff=en(this.Ff,23):this.Ff=tn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,27)},set:function(n){n?this.Ff=en(this.Ff,27):this.Ff=tn(this.Ff,27)}}),this.hasAppearanceStream=!1};ii(ia,qi);var sa=function(){ia.call(this),this.fontName="helvetica",this.combo=!1};ii(sa,ia);var oa=function(){sa.call(this),this.combo=!0};ii(oa,sa);var xc=function(){oa.call(this),this.edit=!0};ii(xc,oa);var yn=function(){qi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,15)},set:function(n){n?this.Ff=en(this.Ff,15):this.Ff=tn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,16)},set:function(n){n?this.Ff=en(this.Ff,16):this.Ff=tn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,17)},set:function(n){n?this.Ff=en(this.Ff,17):this.Ff=tn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,26)},set:function(n){n?this.Ff=en(this.Ff,26):this.Ff=tn(this.Ff,26)}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+mo(n(r[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){Lr(n)==="object"&&(r=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(n){typeof n=="string"&&(r.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};ii(yn,qi);var bc=function(){yn.call(this),this.pushButton=!0};ii(bc,yn);var aa=function(){yn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r!==void 0?r:[]}})};ii(aa,yn);var Dc=function(){var t,r;qi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(o){r=o}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(c){return c};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),i)a.push("/"+s+" ("+mo(o(i[s]))+")");return a.push(">>"),a.join(`
`)},set:function(o){Lr(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ot.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ii(Dc,qi),aa.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var n=this.Kids[r];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},aa.prototype.createOption=function(t){var r=new Dc;return r.Parent=this,r.optionName=t,this.Kids.push(r),xy.call(this.scope,r),r};var yc=function(){yn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ot.CheckBox.createAppearanceStream()};ii(yc,yn);var lo=function(){qi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,13)},set:function(r){r?this.Ff=en(this.Ff,13):this.Ff=tn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,21)},set:function(r){r?this.Ff=en(this.Ff,21):this.Ff=tn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,23)},set:function(r){r?this.Ff=en(this.Ff,23):this.Ff=tn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,24)},set:function(r){r?this.Ff=en(this.Ff,24):this.Ff=tn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,25)},set:function(r){r?this.Ff=en(this.Ff,25):this.Ff=tn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,26)},set:function(r){r?this.Ff=en(this.Ff,26):this.Ff=tn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){Number.isInteger(r)&&(t=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ii(lo,qi);var vc=function(){lo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Zr(this.Ff,14)},set:function(t){t?this.Ff=en(this.Ff,14):this.Ff=tn(this.Ff,14)}}),this.password=!0};ii(vc,lo);var Ot={CheckBox:{createAppearanceStream:function(){return{N:{On:Ot.CheckBox.YesNormal},D:{On:Ot.CheckBox.YesPushDown,Off:Ot.CheckBox.OffPushDown}}},YesPushDown:function(t){var r=Yi(t);r.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),s=Gu(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Jt(Ot.internal.getWidth(t))+" "+Jt(Ot.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+Jt(s.fontSize)+" Tf "+o),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),r.stream=n.join(`
`),r},YesNormal:function(t){var r=Yi(t);r.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=[],s=Ot.internal.getHeight(t),a=Ot.internal.getWidth(t),c=Gu(t,t.caption);return o.push("1 g"),o.push("0 0 "+Jt(a)+" "+Jt(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Jt(a-1)+" "+Jt(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Jt(c.fontSize)+" Tf "+i),o.push(c.text),o.push("ET"),o.push("Q"),r.stream=o.join(`
`),r},OffPushDown:function(t){var r=Yi(t);r.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Jt(Ot.internal.getWidth(t))+" "+Jt(Ot.internal.getHeight(t))+" re"),n.push("f"),r.stream=n.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(t){var r={D:{Off:Ot.RadioButton.Circle.OffPushDown},N:{}};return r.N[t]=Ot.RadioButton.Circle.YesNormal,r.D[t]=Ot.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(t){var r=Yi(t);r.scope=t.scope;var n=[],i=Ot.internal.getWidth(t)<=Ot.internal.getHeight(t)?Ot.internal.getWidth(t)/4:Ot.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Ot.internal.Bezier_C,s=Number((i*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Es(Ot.internal.getWidth(t)/2)+" "+Es(Ot.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r},YesPushDown:function(t){var r=Yi(t);r.scope=t.scope;var n=[],i=Ot.internal.getWidth(t)<=Ot.internal.getHeight(t)?Ot.internal.getWidth(t)/4:Ot.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),s=Number((o*Ot.internal.Bezier_C).toFixed(5)),a=Number((i*Ot.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Es(Ot.internal.getWidth(t)/2)+" "+Es(Ot.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),n.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),n.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),n.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Es(Ot.internal.getWidth(t)/2)+" "+Es(Ot.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r},OffPushDown:function(t){var r=Yi(t);r.scope=t.scope;var n=[],i=Ot.internal.getWidth(t)<=Ot.internal.getHeight(t)?Ot.internal.getWidth(t)/4:Ot.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),s=Number((o*Ot.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Es(Ot.internal.getWidth(t)/2)+" "+Es(Ot.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),n.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),n.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),n.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r}},Cross:{createAppearanceStream:function(t){var r={D:{Off:Ot.RadioButton.Cross.OffPushDown},N:{}};return r.N[t]=Ot.RadioButton.Cross.YesNormal,r.D[t]=Ot.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(t){var r=Yi(t);r.scope=t.scope;var n=[],i=Ot.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Jt(Ot.internal.getWidth(t)-2)+" "+Jt(Ot.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Jt(i.x1.x)+" "+Jt(i.x1.y)+" m"),n.push(Jt(i.x2.x)+" "+Jt(i.x2.y)+" l"),n.push(Jt(i.x4.x)+" "+Jt(i.x4.y)+" m"),n.push(Jt(i.x3.x)+" "+Jt(i.x3.y)+" l"),n.push("s"),n.push("Q"),r.stream=n.join(`
`),r},YesPushDown:function(t){var r=Yi(t);r.scope=t.scope;var n=Ot.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+Jt(Ot.internal.getWidth(t))+" "+Jt(Ot.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Jt(Ot.internal.getWidth(t)-2)+" "+Jt(Ot.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(Jt(n.x1.x)+" "+Jt(n.x1.y)+" m"),i.push(Jt(n.x2.x)+" "+Jt(n.x2.y)+" l"),i.push(Jt(n.x4.x)+" "+Jt(n.x4.y)+" m"),i.push(Jt(n.x3.x)+" "+Jt(n.x3.y)+" l"),i.push("s"),i.push("Q"),r.stream=i.join(`
`),r},OffPushDown:function(t){var r=Yi(t);r.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Jt(Ot.internal.getWidth(t))+" "+Jt(Ot.internal.getHeight(t))+" re"),n.push("f"),r.stream=n.join(`
`),r}}},createDefaultAppearanceStream:function(t){var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+r+" "+t.fontSize+" Tf "+n}};Ot.internal={Bezier_C:.551915024494,calculateCross:function(t){var r=Ot.internal.getWidth(t),n=Ot.internal.getHeight(t),i=Math.min(r,n);return{x1:{x:(r-i)/2,y:(n-i)/2+i},x2:{x:(r-i)/2+i,y:(n-i)/2},x3:{x:(r-i)/2,y:(n-i)/2},x4:{x:(r-i)/2+i,y:(n-i)/2+i}}}},Ot.internal.getWidth=function(t){var r=0;return Lr(t)==="object"&&(r=Hf(t.Rect[2])),r},Ot.internal.getHeight=function(t){var r=0;return Lr(t)==="object"&&(r=Hf(t.Rect[3])),r};var xy=Vr.addField=function(t){if(my(this,t),!(t instanceof qi))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=t).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Vr.AcroFormChoiceField=ia,Vr.AcroFormListBox=sa,Vr.AcroFormComboBox=oa,Vr.AcroFormEditBox=xc,Vr.AcroFormButton=yn,Vr.AcroFormPushButton=bc,Vr.AcroFormRadioButton=aa,Vr.AcroFormCheckBox=yc,Vr.AcroFormTextField=lo,Vr.AcroFormPasswordField=vc,Vr.AcroFormAppearance=Ot,Vr.AcroForm={ChoiceField:ia,ListBox:sa,ComboBox:oa,EditBox:xc,Button:yn,PushButton:bc,RadioButton:aa,CheckBox:yc,TextField:lo,PasswordField:vc,Appearance:Ot},Wt.AcroForm={ChoiceField:ia,ListBox:sa,ComboBox:oa,EditBox:xc,Button:yn,PushButton:bc,RadioButton:aa,CheckBox:yc,TextField:lo,PasswordField:vc,Appearance:Ot};Wt.AcroForm;function H0(t){return t.reduce(function(r,n,i){return r[n]=i,r},{})}(function(t){t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(w,A){var T,E,ee,Z,y,se=r;if((A=A||r)==="RGBA"||w.data!==void 0&&w.data instanceof Uint8ClampedArray&&"height"in w&&"width"in w)return"RGBA";if(D(w))for(y in n)for(ee=n[y],T=0;T<ee.length;T+=1){for(Z=!0,E=0;E<ee[T].length;E+=1)if(ee[T][E]!==void 0&&ee[T][E]!==w[E]){Z=!1;break}if(Z===!0){se=y;break}}else for(y in n)for(ee=n[y],T=0;T<ee.length;T+=1){for(Z=!0,E=0;E<ee[T].length;E+=1)if(ee[T][E]!==void 0&&ee[T][E]!==w.charCodeAt(E)){Z=!1;break}if(Z===!0){se=y;break}}return se===r&&A!==r&&(se=A),se},o=function w(A){for(var T=this.internal.write,E=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:A.width}),Z.push({key:"Height",value:A.height}),A.colorSpace===O.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===O.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var y="",se=0,W=A.transparency.length;se<W;se++)y+=A.transparency[se]+" "+A.transparency[se]+" ";Z.push({key:"Mask",value:"["+y+"]"})}A.sMask!==void 0&&Z.push({key:"SMask",value:A.objectId+1+" 0 R"});var v=A.filter!==void 0?["/"+A.filter]:void 0;if(E({data:A.data,additionalKeyValues:Z,alreadyAppliedFilters:v,objectId:A.objectId}),T("endobj"),"sMask"in A&&A.sMask!==void 0){var Y="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,C={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:Y,data:A.sMask};"filter"in A&&(C.filter=A.filter),w.call(this,C)}if(A.colorSpace===O.INDEXED){var q=this.internal.newObject();E({data:U(new Uint8Array(A.palette)),objectId:q}),T("endobj")}},s=function(){var w=this.internal.collections.addImage_images;for(var A in w)o.call(this,w[A])},a=function(){var w,A=this.internal.collections.addImage_images,T=this.internal.write;for(var E in A)T("/I"+(w=A[E]).index,w.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var w=this.internal.collections.addImage_images;return c.call(this),w},h=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(w){return typeof t["process"+w.toUpperCase()]=="function"},x=function(w){return Lr(w)==="object"&&w.nodeType===1},b=function(w,A){if(w.nodeName==="IMG"&&w.hasAttribute("src")){var T=""+w.getAttribute("src");if(T.indexOf("data:image/")===0)return tl(unescape(T).split("base64,").pop());var E=t.loadFile(T,!0);if(E!==void 0)return E}if(w.nodeName==="CANVAS"){if(w.width===0||w.height===0)throw new Error("Given canvas must have data. Canvas width: "+w.width+", height: "+w.height);var ee;switch(A){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return tl(w.toDataURL(ee,1).split("base64,").pop())}},g=function(w){var A=this.internal.collections.addImage_images;if(A){for(var T in A)if(w===A[T].alias)return A[T]}},_=function(w,A,T){return w||A||(w=-96,A=-96),w<0&&(w=-1*T.width*72/w/this.internal.scaleFactor),A<0&&(A=-1*T.height*72/A/this.internal.scaleFactor),w===0&&(w=A*T.width/T.height),A===0&&(A=w*T.height/T.width),[w,A]},S=function(w,A,T,E,ee,Z){var y=_.call(this,T,E,ee),se=this.internal.getCoordinateString,W=this.internal.getVerticalCoordinateString,v=u.call(this);if(T=y[0],E=y[1],v[ee.index]=ee,Z){Z*=Math.PI/180;var Y=Math.cos(Z),C=Math.sin(Z),q=function(G){return G.toFixed(4)},L=[q(Y),q(C),q(-1*C),q(Y),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,se(w),W(A+E),"cm"].join(" ")),this.internal.write(L.join(" ")),this.internal.write([se(T),"0","0",se(E),"0","0","cm"].join(" "))):this.internal.write([se(T),"0","0",se(E),se(w),W(A+E),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},O=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},M=t.__addimage__.sHashCode=function(w){var A,T,E=0;if(typeof w=="string")for(T=w.length,A=0;A<T;A++)E=(E<<5)-E+w.charCodeAt(A),E|=0;else if(D(w))for(T=w.byteLength/2,A=0;A<T;A++)E=(E<<5)-E+w[A],E|=0;return E},J=t.__addimage__.validateStringAsBase64=function(w){(w=w||"").toString().trim();var A=!0;return w.length===0&&(A=!1),w.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(w.substr(0,w.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(w.substr(-2))===!1&&(A=!1),A},re=t.__addimage__.extractImageFromDataUrl=function(w){if(w==null||!(w=w.trim()).startsWith("data:"))return null;var A=w.indexOf(",");return A<0?null:w.substring(0,A).trim().endsWith("base64")?w.substring(A+1):null},N=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"};t.__addimage__.isArrayBuffer=function(w){return N()&&w instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(w){return N()&&typeof Uint32Array!="undefined"&&(w instanceof Int8Array||w instanceof Uint8Array||typeof Uint8ClampedArray!="undefined"&&w instanceof Uint8ClampedArray||w instanceof Int16Array||w instanceof Uint16Array||w instanceof Int32Array||w instanceof Uint32Array||w instanceof Float32Array||w instanceof Float64Array)},B=t.__addimage__.binaryStringToUint8Array=function(w){for(var A=w.length,T=new Uint8Array(A),E=0;E<A;E++)T[E]=w.charCodeAt(E);return T},U=t.__addimage__.arrayBufferToBinaryString=function(w){for(var A="",T=D(w)?w:new Uint8Array(w),E=0;E<T.length;E+=8192)A+=String.fromCharCode.apply(null,T.subarray(E,E+8192));return A};t.addImage=function(){var w,A,T,E,ee,Z,y,se,W;if(typeof arguments[1]=="number"?(A=r,T=arguments[1],E=arguments[2],ee=arguments[3],Z=arguments[4],y=arguments[5],se=arguments[6],W=arguments[7]):(A=arguments[1],T=arguments[2],E=arguments[3],ee=arguments[4],Z=arguments[5],y=arguments[6],se=arguments[7],W=arguments[8]),Lr(w=arguments[0])==="object"&&!x(w)&&"imageData"in w){var v=w;w=v.imageData,A=v.format||A||r,T=v.x||T||0,E=v.y||E||0,ee=v.w||v.width||ee,Z=v.h||v.height||Z,y=v.alias||y,se=v.compression||se,W=v.rotation||v.angle||W}var Y=this.internal.getFilters();if(se===void 0&&Y.indexOf("FlateEncode")!==-1&&(se="SLOW"),isNaN(T)||isNaN(E))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var C=R.call(this,w,A,y,se);return S.call(this,T,E,ee,Z,C,W),this};var R=function(w,A,T,E){var ee,Z,y;if(typeof w=="string"&&i(w)===r){w=unescape(w);var se=P(w,!1);(se!==""||(se=t.loadFile(w,!0))!==void 0)&&(w=se)}if(x(w)&&(w=b(w,A)),A=i(w,A),!p(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((y=T)==null||y.length===0)&&(T=function(W){return typeof W=="string"||D(W)?M(W):D(W.data)?M(W.data):null}(w)),(ee=g.call(this,T))||(N()&&(w instanceof Uint8Array||A==="RGBA"||(Z=w,w=B(w))),ee=this["process"+A.toUpperCase()](w,h.call(this),T,function(W){return W&&typeof W=="string"&&(W=W.toUpperCase()),W in t.image_compression?W:k.NONE}(E),Z)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},P=t.__addimage__.convertBase64ToBinaryString=function(w,A){A=typeof A!="boolean"||A;var T,E="";if(typeof w=="string"){var ee;T=(ee=re(w))!==null&&ee!==void 0?ee:w;try{E=tl(T)}catch(Z){if(A)throw J(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return E};t.getImageProperties=function(w){var A,T,E="";if(x(w)&&(w=b(w)),typeof w=="string"&&i(w)===r&&((E=P(w,!1))===""&&(E=t.loadFile(w)||""),w=E),T=i(w),!p(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(!N()||w instanceof Uint8Array||(w=B(w)),!(A=this["process"+T.toUpperCase()](w)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=T,A}})(Wt.API),function(t){var r=function(n){if(n!==void 0&&n!="")return!0};Wt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,o,s,a=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,p=!1,x=0;x<h.length&&!p;x++)switch((i=h[x]).type){case"link":(r(i.options.url)||r(i.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var b=0;b<h.length;b++){i=h[b];var g=this.internal.pdfEscape,_=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),O=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(S.objId),M=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+a(i.bounds.x)+" "+c(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y)+"] ")+"/Contents ("+g(k(i.contents))+")",s+=" /Popup "+O.objId+" 0 R",s+=" /P "+u.objId+" 0 R",s+=" /T ("+g(k(M))+") >>",S.content=s;var J=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+a(i.bounds.x+30)+" "+c(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+c(i.bounds.y)+"] ")+" /Parent "+J,i.open&&(s+=" /Open true"),s+=" >>",O.content=s,this.internal.write(S.objId,"0 R",O.objId,"0 R");break;case"freetext":o="/Rect ["+a(i.bounds.x)+" "+c(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y+i.bounds.h)+"] ";var re=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+g(_(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+re+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var N=this.annotations._nameMap[i.options.name];i.options.pageNumber=N.page,i.options.top=N.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+g(_(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var D=c(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+D+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,o,s,a){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(n),y:h(i),w:u(n+o),h:h(i+s)},options:a,type:"link"})},t.textWithLink=function(n,i,o,s){var a,c,u=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){c=s.maxWidth;var p=this.splitTextToSize(n,c).length;a=Math.ceil(h*p)}else c=u,a=h;return this.text(n,i,o,s),o+=.2*h,s.align==="center"&&(i-=u/2),s.align==="right"&&(i-=u),this.link(i,o-h,c,a,s),u},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(Wt.API),function(t){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(S){return r[S.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},c=t.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&s(S)&&r[S.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&o.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&s(S)&&r[S.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&s(S)&&r[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&s(S)&&r[S.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&s(S)&&r[S.charCodeAt(0)].length==4},x=t.__arabicParser__.resolveLigatures=function(S){var O=0,k=n,M="",J=0;for(O=0;O<S.length;O+=1)k[S.charCodeAt(O)]!==void 0?(J++,typeof(k=k[S.charCodeAt(O)])=="number"&&(M+=String.fromCharCode(k),k=n,J=0),O===S.length-1&&(k=n,M+=S.charAt(O-(J-1)),O-=J-1,J=0)):(k=n,M+=S.charAt(O-J),O-=J,J=0);return M};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&i[S.charCodeAt(0)]!==void 0};var b=t.__arabicParser__.getCorrectForm=function(S,O,k){return a(S)?s(S)===!1?-1:!h(S)||!a(O)&&!a(k)||!a(k)&&c(O)||c(S)&&!a(O)||c(S)&&u(O)||c(S)&&c(O)?0:p(S)&&a(O)&&!c(O)&&a(k)&&h(k)?3:c(S)||!a(k)?1:2:-1},g=function(S){var O=0,k=0,M=0,J="",re="",N="",D=(S=S||"").split("\\s+"),B=[];for(O=0;O<D.length;O+=1){for(B.push(""),k=0;k<D[O].length;k+=1)J=D[O][k],re=D[O][k-1],N=D[O][k+1],a(J)?(M=b(J,re,N),B[O]+=M!==-1?String.fromCharCode(r[J.charCodeAt(0)][M]):J):B[O]+=J;B[O]=x(B[O])}return B.join(" ")},_=t.__arabicParser__.processArabic=t.processArabic=function(){var S,O=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(O)){var M=0;for(k=[],M=0;M<O.length;M+=1)Array.isArray(O[M])?k.push([g(O[M][0]),O[M][1],O[M][2]]):k.push([g(O[M])]);S=k}else S=g(O);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",_])}(Wt.API),Wt.API.autoPrint=function(t){var r;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})}return this},function(t){var r=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(c){o=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(c){s=c}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(c){a=c}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(n,i){var o;if((n=n||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])}(Wt.API),function(t){var r={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(S){u=S}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(S){h=S}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var x=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return x},set:function(S){x=S}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(S){b=S}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(S){g=S}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(S){_=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return i.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,h){i.call(this);var p=(h=h||{}).fontSize||this.getFontSize(),x=h.font||this.getFont(),b=h.scaleFactor||this.internal.scaleFactor,g=0,_=0,S=0,O=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var k=h.maxWidth;k>0?typeof u=="string"?u=this.splitTextToSize(u,k):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(J,re){return J.concat(O.splitTextToSize(re,k))},[])):u=Array.isArray(u)?u:[u];for(var M=0;M<u.length;M++)g<(S=this.getStringUnitWidth(u[M],{font:x})*p)&&(g=S);return g!==0&&(_=u.length),{w:g/=b,h:Math.max((_*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/b,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var u=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new s(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var u;u=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var h=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,x=this.internal.__cell__.margins||r,b=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===u.lineNumber?(u.x=(h.x||0)+(h.width||0),u.y=h.y||0):h.y+h.height+u.height+x.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=x.top,g&&b&&(this.printHeaderRow(u.lineNumber,!0),u.y+=b[0].height)):u.y=h.y+h.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,n===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-p,u.y+p,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+p,{align:"center",baseline:"top",maxWidth:u.width-p-p}):this.text(u.text,u.x+p,u.y+p,{align:"left",baseline:"top",maxWidth:u.width-p-p})),this.internal.__cell__.lastCell=u,this};t.table=function(u,h,p,x,b){if(i.call(this),!p)throw new Error("No data for PDF table.");var g,_,S,O,k=[],M=[],J=[],re={},N={},D=[],B=[],U=(b=b||{}).autoSize||!1,R=b.printHeaders!==!1,P=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,w=b.margins||Object.assign({width:this.getPageWidth()},r),A=typeof b.padding=="number"?b.padding:3,T=b.headerBackgroundColor||"#c8c8c8",E=b.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=w,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=E,this.setFontSize(P),x==null)M=k=Object.keys(p[0]),J=k.map(function(){return"left"});else if(Array.isArray(x)&&Lr(x[0])==="object")for(k=x.map(function(v){return v.name}),M=x.map(function(v){return v.prompt||v.name||""}),J=x.map(function(v){return v.align||"left"}),g=0;g<x.length;g+=1)N[x[g].name]=x[g].width*(19.049976/25.4);else Array.isArray(x)&&typeof x[0]=="string"&&(M=k=x,J=k.map(function(){return"left"}));if(U||Array.isArray(x)&&typeof x[0]=="string")for(g=0;g<k.length;g+=1){for(re[O=k[g]]=p.map(function(v){return v[O]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(M[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=re[O],this.setFont(void 0,"normal"),S=0;S<_.length;S+=1)D.push(this.getTextDimensions(_[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[O]=Math.max.apply(null,D)+A+A,D=[]}if(R){var ee={};for(g=0;g<k.length;g+=1)ee[k[g]]={},ee[k[g]].text=M[g],ee[k[g]].align=J[g];var Z=c.call(this,ee,N);B=k.map(function(v){return new s(u,h,N[v],Z,ee[v].text,void 0,ee[v].align)}),this.setTableHeaderRow(B),this.printHeaderRow(1,!1)}var y=x.reduce(function(v,Y){return v[Y.name]=Y.align,v},{});for(g=0;g<p.length;g+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:g,data:p[g]},this);var se=c.call(this,p[g],N);for(S=0;S<k.length;S+=1){var W=p[g][k[S]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:g,col:S,data:W},this),a.call(this,new s(u,h,N[k[S]],se,W,g+2,y[k[S]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=h,this};var c=function(u,h){var p=this.internal.__cell__.padding,x=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(u).map(function(g){var _=u[g];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,h[g]-p-p)},this).map(function(g){return this.getLineHeightFactor()*g.length*x/b+p+p},this).reduce(function(g,_){return Math.max(g,_)},0)};t.setTableHeaderRow=function(u){i.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,h){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var x=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(x[0],x[1],x[2],x[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){p=this.internal.__cell__.tableHeaderRow[g].clone(),h&&(p.y=this.internal.__cell__.margins.top||0,b.push(p)),p.lineNumber=u;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(_)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),n=!1}}(Wt.API);var $0={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},G0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Vu=H0(G0),V0=[100,200,300,400,500,600,700,800,900],by=H0(V0);function Yu(t){var r=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return $0[s=s||"normal"]?s:"normal"}(t.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(s){return typeof Vu[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:r,style:n,weight:i,stretch:o,src:t.src||[],ref:t.ref||{name:r,style:[o,n,i].join(" ")}}}function $f(t,r,n,i){var o;for(o=n;o>=0&&o<r.length;o+=i)if(t[r[o]])return t[r[o]];for(o=n;o>=0&&o<r.length;o-=i)if(t[r[o]])return t[r[o]]}var yy={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Gf={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Vf(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function vy(t,r,n){for(var i=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},yy,n.genericFontFamilies||{}),s=null,a=null,c=0;c<r.length;++c)if(o[(s=Yu(r[c])).family]&&(s.family=o[s.family]),t.hasOwnProperty(s.family)){a=t[s.family];break}if(!(a=a||t[i]))throw new Error("Could not find a font-family for the rule '"+Vf(s)+"' and default family '"+i+"'.");if(a=function(u,h){if(h[u])return h[u];var p=Vu[u],x=p<=Vu.normal?-1:1,b=$f(h,G0,p,x);if(!b)throw new Error("Could not find a matching font-stretch value for "+u);return b}(s.stretch,a),a=function(u,h){if(h[u])return h[u];for(var p=$0[u],x=0;x<p.length;++x)if(h[p[x]])return h[p[x]];throw new Error("Could not find a matching font-style for "+u)}(s.style,a),!(a=function(u,h){if(h[u])return h[u];if(u===400&&h[500])return h[500];if(u===500&&h[400])return h[400];var p=by[u],x=$f(h,V0,p,u<400?-1:1);if(!x)throw new Error("Could not find a matching font-weight for value "+u);return x}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Vf(s)+"'.");return a}function Yf(t){return t.trimLeft()}function wy(t,r){for(var n=0;n<t.length;){if(t.charAt(n)===r)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function jy(t){var r=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],t.substring(r[0].length)]}var cc,Jf,Xf,wu=["times"];(function(t){var r,n,i,o,s,a,c,u,h,p=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new u,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new a,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new a,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new x(this),r=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,h=new p}]);var x=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=C;Object.defineProperty(this,"pdf",{get:function(){return q}});var L=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return L},set:function(ve){L=!!ve}});var G=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return G},set:function(ve){G=!!ve}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(ve){isNaN(ve)||(Q=ve)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(ve){isNaN(ve)||(ie=ve)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(ve){var te;typeof ve=="number"?te=[ve,ve,ve,ve]:((te=new Array(4))[0]=ve[0],te[1]=ve.length>=2?ve[1]:te[0],te[2]=ve.length>=3?ve[2]:te[0],te[3]=ve.length>=4?ve[3]:te[1]),h.margin=te}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(ve){ce=ve}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(ve){le=ve}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(ve){xe=ve}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(ve){ve instanceof p&&(h=ve)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(ve){h.path=ve}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(ve){we=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var te;te=b(ve),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var te=b(ve);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var ze=null;function De(ve,te){if(ze===null){var Ce=function(Be){var Ne=[];return Object.keys(Be).forEach(function(ue){Be[ue].forEach(function(Je){var Ke=null;switch(Je){case"bold":Ke={family:ue,weight:"bold"};break;case"italic":Ke={family:ue,style:"italic"};break;case"bolditalic":Ke={family:ue,weight:"bold",style:"italic"};break;case"":case"normal":Ke={family:ue}}Ke!==null&&(Ke.ref={name:ue,style:Je},Ne.push(Ke))})}),Ne}(ve.getFontList());ze=function(Be){for(var Ne={},ue=0;ue<Be.length;++ue){var Je=Yu(Be[ue]),Ke=Je.family,ut=Je.stretch,Ye=Je.style,Se=Je.weight;Ne[Ke]=Ne[Ke]||{},Ne[Ke][ut]=Ne[Ke][ut]||{},Ne[Ke][ut][Ye]=Ne[Ke][ut][Ye]||{},Ne[Ke][ut][Ye][Se]=Je}return Ne}(Ce.concat(te))}return ze}var $e=null;Object.defineProperty(this,"fontFaces",{get:function(){return $e},set:function(ve){ze=null,$e=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var te;if(this.ctx.font=ve,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var Ce=te[1];te[2];var Be=te[3],Ne=te[4];te[5];var ue=te[6],Je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor(Je==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:Je==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var Ke=function(_e){var Fe,Ee,it=[],Ve=_e.trim();if(Ve==="")return wu;if(Ve in Gf)return[Gf[Ve]];for(;Ve!=="";){switch(Ee=null,Fe=(Ve=Yf(Ve)).charAt(0)){case'"':case"'":Ee=wy(Ve.substring(1),Fe);break;default:Ee=jy(Ve)}if(Ee===null||(it.push(Ee[0]),(Ve=Yf(Ee[1]))!==""&&Ve.charAt(0)!==","))return wu;Ve=Ve.replace(/^,/,"")}return it}(ue);if(this.fontFaces){var ut=vy(De(this.pdf,this.fontFaces),Ke.map(function(_e){return{family:_e,stretch:"normal",weight:Be,style:Ce}}));this.pdf.setFont(ut.ref.name,ut.ref.style)}else{var Ye="";(Be==="bold"||parseInt(Be,10)>=700||Ce==="bold")&&(Ye="bold"),Ce==="italic"&&(Ye+="italic"),Ye.length===0&&(Ye="normal");for(var Se="",ye={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ae=0;Ae<Ke.length;Ae++){if(this.pdf.internal.getFont(Ke[Ae],Ye,{noFallback:!0,disableWarning:!0})!==void 0){Se=Ke[Ae];break}if(Ye==="bolditalic"&&this.pdf.internal.getFont(Ke[Ae],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Se=Ke[Ae],Ye="bold";else if(this.pdf.internal.getFont(Ke[Ae],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Se=Ke[Ae],Ye="normal";break}}if(Se===""){for(var Me=0;Me<Ke.length;Me++)if(ye[Ke[Me]]){Se=ye[Ke[Me]];break}}Se=Se===""?"Times":Se,this.pdf.setFont(Se,Ye)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};x.prototype.setLineDash=function(C){this.lineDash=C},x.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},x.prototype.fill=function(){re.call(this,"fill",!1)},x.prototype.stroke=function(){re.call(this,"stroke",!1)},x.prototype.beginPath=function(){this.path=[{type:"begin"}]},x.prototype.moveTo=function(C,q){if(isNaN(C)||isNaN(q))throw kr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var L=this.ctx.transform.applyToPoint(new a(C,q));this.path.push({type:"mt",x:L.x,y:L.y}),this.ctx.lastPoint=new a(C,q)},x.prototype.closePath=function(){var C=new a(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Lr(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){C=new a(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(C.x,C.y)},x.prototype.lineTo=function(C,q){if(isNaN(C)||isNaN(q))throw kr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var L=this.ctx.transform.applyToPoint(new a(C,q));this.path.push({type:"lt",x:L.x,y:L.y}),this.ctx.lastPoint=new a(L.x,L.y)},x.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),re.call(this,null,!0)},x.prototype.quadraticCurveTo=function(C,q,L,G){if(isNaN(L)||isNaN(G)||isNaN(C)||isNaN(q))throw kr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new a(L,G)),ie=this.ctx.transform.applyToPoint(new a(C,q));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(Q.x,Q.y)},x.prototype.bezierCurveTo=function(C,q,L,G,Q,ie){if(isNaN(Q)||isNaN(ie)||isNaN(C)||isNaN(q)||isNaN(L)||isNaN(G))throw kr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new a(Q,ie)),le=this.ctx.transform.applyToPoint(new a(C,q)),xe=this.ctx.transform.applyToPoint(new a(L,G));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:xe.x,y2:xe.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new a(ce.x,ce.y)},x.prototype.arc=function(C,q,L,G,Q,ie){if(isNaN(C)||isNaN(q)||isNaN(L)||isNaN(G)||isNaN(Q))throw kr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new a(C,q));C=ce.x,q=ce.y;var le=this.ctx.transform.applyToPoint(new a(0,L)),xe=this.ctx.transform.applyToPoint(new a(0,0));L=Math.sqrt(Math.pow(le.x-xe.x,2)+Math.pow(le.y-xe.y,2))}Math.abs(Q-G)>=2*Math.PI&&(G=0,Q=2*Math.PI),this.path.push({type:"arc",x:C,y:q,radius:L,startAngle:G,endAngle:Q,counterclockwise:ie})},x.prototype.arcTo=function(C,q,L,G,Q){throw new Error("arcTo not implemented.")},x.prototype.rect=function(C,q,L,G){if(isNaN(C)||isNaN(q)||isNaN(L)||isNaN(G))throw kr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,q),this.lineTo(C+L,q),this.lineTo(C+L,q+G),this.lineTo(C,q+G),this.lineTo(C,q),this.lineTo(C+L,q),this.lineTo(C,q)},x.prototype.fillRect=function(C,q,L,G){if(isNaN(C)||isNaN(q)||isNaN(L)||isNaN(G))throw kr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,q,L,G),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},x.prototype.strokeRect=function(C,q,L,G){if(isNaN(C)||isNaN(q)||isNaN(L)||isNaN(G))throw kr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(C,q,L,G),this.stroke())},x.prototype.clearRect=function(C,q,L,G){if(isNaN(C)||isNaN(q)||isNaN(L)||isNaN(G))throw kr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,q,L,G))},x.prototype.save=function(C){C=typeof C!="boolean"||C;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,L=0;L<this.pdf.internal.getNumberOfPages();L++)this.pdf.setPage(L+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var G=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=G}},x.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,L=0;L<this.pdf.internal.getNumberOfPages();L++)this.pdf.setPage(L+1),this.pdf.internal.out("Q");this.pdf.setPage(q),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},x.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(C){var q,L,G,Q;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))q=0,L=0,G=0,Q=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(ie!==null)q=parseInt(ie[1]),L=parseInt(ie[2]),G=parseInt(ie[3]),Q=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)q=parseInt(ie[1]),L=parseInt(ie[2]),G=parseInt(ie[3]),Q=parseFloat(ie[4]);else{if(Q=1,typeof C=="string"&&C.charAt(0)!=="#"){var ce=new D0(C);C=ce.ok?ce.toHex():"#000000"}C.length===4?(q=C.substring(1,2),q+=q,L=C.substring(2,3),L+=L,G=C.substring(3,4),G+=G):(q=C.substring(1,3),L=C.substring(3,5),G=C.substring(5,7)),q=parseInt(q,16),L=parseInt(L,16),G=parseInt(G,16)}}return{r:q,g:L,b:G,a:Q,style:C}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};x.prototype.fillText=function(C,q,L,G){if(isNaN(q)||isNaN(L)||typeof C!="string")throw kr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(G=isNaN(G)?void 0:G,!g.call(this)){var Q=se(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;A.call(this,{text:C,x:q,y:L,scale:ie,angle:Q,align:this.textAlign,maxWidth:G})}},x.prototype.strokeText=function(C,q,L,G){if(isNaN(q)||isNaN(L)||typeof C!="string")throw kr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){G=isNaN(G)?void 0:G;var Q=se(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;A.call(this,{text:C,x:q,y:L,scale:ie,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:G})}},x.prototype.measureText=function(C){if(typeof C!="string")throw kr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,L=this.pdf.internal.scaleFactor,G=q.internal.getFontSize(),Q=q.getStringUnitWidth(C)*G/q.internal.scaleFactor,ie=function(ce){var le=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return le}}),this};return new ie({width:Q*=Math.round(96*L/72*1e4)/1e4})},x.prototype.scale=function(C,q){if(isNaN(C)||isNaN(q))throw kr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var L=new u(C,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(L)},x.prototype.rotate=function(C){if(isNaN(C))throw kr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new u(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},x.prototype.translate=function(C,q){if(isNaN(C)||isNaN(q))throw kr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var L=new u(1,0,0,1,C,q);this.ctx.transform=this.ctx.transform.multiply(L)},x.prototype.transform=function(C,q,L,G,Q,ie){if(isNaN(C)||isNaN(q)||isNaN(L)||isNaN(G)||isNaN(Q)||isNaN(ie))throw kr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new u(C,q,L,G,Q,ie);this.ctx.transform=this.ctx.transform.multiply(ce)},x.prototype.setTransform=function(C,q,L,G,Q,ie){C=isNaN(C)?1:C,q=isNaN(q)?0:q,L=isNaN(L)?0:L,G=isNaN(G)?1:G,Q=isNaN(Q)?0:Q,ie=isNaN(ie)?0:ie,this.ctx.transform=new u(C,q,L,G,Q,ie)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};x.prototype.drawImage=function(C,q,L,G,Q,ie,ce,le,xe){var we=this.pdf.getImageProperties(C),ze=1,De=1,$e=1,ve=1;G!==void 0&&le!==void 0&&($e=le/G,ve=xe/Q,ze=we.width/G*le/G,De=we.height/Q*xe/Q),ie===void 0&&(ie=q,ce=L,q=0,L=0),G!==void 0&&le===void 0&&(le=G,xe=Q),G===void 0&&le===void 0&&(le=we.width,xe=we.height);for(var te,Ce=this.ctx.transform.decompose(),Be=se(Ce.rotate.shx),Ne=new u,ue=(Ne=(Ne=(Ne=Ne.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale)).applyToRectangle(new c(ie-q*$e,ce-L*ve,G*ze,Q*De)),Je=O.call(this,ue),Ke=[],ut=0;ut<Je.length;ut+=1)Ke.indexOf(Je[ut])===-1&&Ke.push(Je[ut]);if(J(Ke),this.autoPaging)for(var Ye=Ke[0],Se=Ke[Ke.length-1],ye=Ye;ye<Se+1;ye++){this.pdf.setPage(ye);var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Me=ye===1?this.posY+this.margin[0]:this.margin[0],_e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ee=ye===1?0:_e+(ye-2)*Fe;if(this.ctx.clip_path.length!==0){var it=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(te,this.posX+this.margin[3],-Ee+Me+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=it}var Ve=JSON.parse(JSON.stringify(ue));Ve=M([Ve],this.posX+this.margin[3],-Ee+Me+this.ctx.prevPageLastElemOffset)[0];var at=(ye>Ye||ye<Se)&&S.call(this);at&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,Fe,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,Be),at&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",ue.x,ue.y,ue.w,ue.h,null,null,Be)};var O=function(C,q,L){var G=[];q=q||this.pdf.internal.pageSize.width,L=L||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":G.push(Math.floor((C.y+Q)/L)+1);break;case"arc":G.push(Math.floor((C.y+Q-C.radius)/L)+1),G.push(Math.floor((C.y+Q+C.radius)/L)+1);break;case"qct":var ie=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);G.push(Math.floor((ie.y+Q)/L)+1),G.push(Math.floor((ie.y+ie.h+Q)/L)+1);break;case"bct":var ce=v(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);G.push(Math.floor((ce.y+Q)/L)+1),G.push(Math.floor((ce.y+ce.h+Q)/L)+1);break;case"rect":G.push(Math.floor((C.y+Q)/L)+1),G.push(Math.floor((C.y+C.h+Q)/L)+1)}for(var le=0;le<G.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<G[le];)k.call(this);return G},k=function(){var C=this.fillStyle,q=this.strokeStyle,L=this.font,G=this.lineCap,Q=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=q,this.font=L,this.lineCap=G,this.lineWidth=Q,this.lineJoin=ie},M=function(C,q,L){for(var G=0;G<C.length;G++)switch(C[G].type){case"bct":C[G].x2+=q,C[G].y2+=L;case"qct":C[G].x1+=q,C[G].y1+=L;case"mt":case"lt":case"arc":default:C[G].x+=q,C[G].y+=L}return C},J=function(C){return C.sort(function(q,L){return q-L})},re=function(C,q){for(var L,G,Q=this.fillStyle,ie=this.strokeStyle,ce=this.lineCap,le=this.lineWidth,xe=Math.abs(le*this.ctx.transform.scaleX),we=this.lineJoin,ze=JSON.parse(JSON.stringify(this.path)),De=JSON.parse(JSON.stringify(this.path)),$e=[],ve=0;ve<De.length;ve++)if(De[ve].x!==void 0)for(var te=O.call(this,De[ve]),Ce=0;Ce<te.length;Ce+=1)$e.indexOf(te[Ce])===-1&&$e.push(te[Ce]);for(var Be=0;Be<$e.length;Be++)for(;this.pdf.internal.getNumberOfPages()<$e[Be];)k.call(this);if(J($e),this.autoPaging)for(var Ne=$e[0],ue=$e[$e.length-1],Je=Ne;Je<ue+1;Je++){this.pdf.setPage(Je),this.fillStyle=Q,this.strokeStyle=ie,this.lineCap=ce,this.lineWidth=xe,this.lineJoin=we;var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ut=Je===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Se=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ye=Je===1?0:Ye+(Je-2)*Se;if(this.ctx.clip_path.length!==0){var Ae=this.path;L=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(L,this.posX+this.margin[3],-ye+ut+this.ctx.prevPageLastElemOffset),N.call(this,C,!0),this.path=Ae}if(G=JSON.parse(JSON.stringify(ze)),this.path=M(G,this.posX+this.margin[3],-ye+ut+this.ctx.prevPageLastElemOffset),q===!1||Je===0){var Me=(Je>Ne||Je<ue)&&S.call(this);Me&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,Se,null).clip().discardPath()),N.call(this,C,q),Me&&this.pdf.restoreGraphicsState()}this.lineWidth=le}else this.lineWidth=xe,N.call(this,C,q),this.lineWidth=le;this.path=ze},N=function(C,q){if((C!=="stroke"||q||!_.call(this))&&(C==="stroke"||q||!g.call(this))){for(var L,G,Q=[],ie=this.path,ce=0;ce<ie.length;ce++){var le=ie[ce];switch(le.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:le,deltas:[],abs:[]});break;case"lt":var xe=Q.length;if(ie[ce-1]&&!isNaN(ie[ce-1].x)&&(L=[le.x-ie[ce-1].x,le.y-ie[ce-1].y],xe>0)){for(;xe>=0;xe--)if(Q[xe-1].close!==!0&&Q[xe-1].begin!==!0){Q[xe-1].deltas.push(L),Q[xe-1].abs.push(le);break}}break;case"bct":L=[le.x1-ie[ce-1].x,le.y1-ie[ce-1].y,le.x2-ie[ce-1].x,le.y2-ie[ce-1].y,le.x-ie[ce-1].x,le.y-ie[ce-1].y],Q[Q.length-1].deltas.push(L);break;case"qct":var we=ie[ce-1].x+2/3*(le.x1-ie[ce-1].x),ze=ie[ce-1].y+2/3*(le.y1-ie[ce-1].y),De=le.x+2/3*(le.x1-le.x),$e=le.y+2/3*(le.y1-le.y),ve=le.x,te=le.y;L=[we-ie[ce-1].x,ze-ie[ce-1].y,De-ie[ce-1].x,$e-ie[ce-1].y,ve-ie[ce-1].x,te-ie[ce-1].y],Q[Q.length-1].deltas.push(L);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(le)}}G=q?null:C==="stroke"?"stroke":"fill";for(var Ce=!1,Be=0;Be<Q.length;Be++)if(Q[Be].arc)for(var Ne=Q[Be].abs,ue=0;ue<Ne.length;ue++){var Je=Ne[ue];Je.type==="arc"?U.call(this,Je.x,Je.y,Je.radius,Je.startAngle,Je.endAngle,Je.counterclockwise,void 0,q,!Ce):T.call(this,Je.x,Je.y),Ce=!0}else if(Q[Be].close===!0)this.pdf.internal.out("h"),Ce=!1;else if(Q[Be].begin!==!0){var Ke=Q[Be].start.x,ut=Q[Be].start.y;E.call(this,Q[Be].deltas,Ke,ut),Ce=!0}G&&R.call(this,G),q&&P.call(this)}},D=function(C){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,L=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-L;case"top":return C+q-L;case"hanging":return C+q-2*L;case"middle":return C+q/2-L;case"ideographic":return C;case"alphabetic":default:return C}},B=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};x.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(q,L){this.colorStops.push([q,L])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},x.prototype.createPattern=function(){return this.createLinearGradient()},x.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(C,q,L,G,Q,ie,ce,le,xe){for(var we=Z.call(this,L,G,Q,ie),ze=0;ze<we.length;ze++){var De=we[ze];ze===0&&(xe?w.call(this,De.x1+C,De.y1+q):T.call(this,De.x1+C,De.y1+q)),ee.call(this,C,q,De.x2,De.y2,De.x3,De.y3,De.x4,De.y4)}le?P.call(this):R.call(this,ce)},R=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},w=function(C,q){this.pdf.internal.out(n(C)+" "+i(q)+" m")},A=function(C){var q;switch(C.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var L=this.pdf.getTextDimensions(C.text),G=D.call(this,C.y),Q=B.call(this,G)-L.h,ie=this.ctx.transform.applyToPoint(new a(C.x,G)),ce=this.ctx.transform.decompose(),le=new u;le=(le=(le=le.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var xe,we,ze,De=this.ctx.transform.applyToRectangle(new c(C.x,G,L.w,L.h)),$e=le.applyToRectangle(new c(C.x,Q,L.w,L.h)),ve=O.call(this,$e),te=[],Ce=0;Ce<ve.length;Ce+=1)te.indexOf(ve[Ce])===-1&&te.push(ve[Ce]);if(J(te),this.autoPaging)for(var Be=te[0],Ne=te[te.length-1],ue=Be;ue<Ne+1;ue++){this.pdf.setPage(ue);var Je=ue===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[2],Ye=ut-this.margin[0],Se=this.pdf.internal.pageSize.width-this.margin[1],ye=Se-this.margin[3],Ae=ue===1?0:Ke+(ue-2)*Ye;if(this.ctx.clip_path.length!==0){var Me=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(xe,this.posX+this.margin[3],-1*Ae+Je),N.call(this,"fill",!0),this.path=Me}var _e=M([JSON.parse(JSON.stringify($e))],this.posX+this.margin[3],-Ae+Je+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*C.scale),ze=this.lineWidth,this.lineWidth=ze*C.scale);var Fe=this.autoPaging!=="text";if(Fe||_e.y+_e.h<=ut){if(Fe||_e.y>=Je&&_e.x<=Se){var Ee=Fe?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||Se-_e.x)[0],it=M([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Ae+Je+this.ctx.prevPageLastElemOffset)[0],Ve=Fe&&(ue>Be||ue<Ne)&&S.call(this);Ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ye,Ye,null).clip().discardPath()),this.pdf.text(Ee,it.x,it.y,{angle:C.angle,align:q,renderingMode:C.renderingMode}),Ve&&this.pdf.restoreGraphicsState()}}else _e.y<ut&&(this.ctx.prevPageLastElemOffset+=ut-_e.y);C.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=ze)}else C.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*C.scale),ze=this.lineWidth,this.lineWidth=ze*C.scale),this.pdf.text(C.text,ie.x+this.posX,ie.y+this.posY,{angle:C.angle,align:q,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=ze)},T=function(C,q,L,G){L=L||0,G=G||0,this.pdf.internal.out(n(C+L)+" "+i(q+G)+" l")},E=function(C,q,L){return this.pdf.lines(C,q,L,null,null)},ee=function(C,q,L,G,Q,ie,ce,le){this.pdf.internal.out([r(o(L+C)),r(s(G+q)),r(o(Q+C)),r(s(ie+q)),r(o(ce+C)),r(s(le+q)),"c"].join(" "))},Z=function(C,q,L,G){for(var Q=2*Math.PI,ie=Math.PI/2;q>L;)q-=Q;var ce=Math.abs(L-q);ce<Q&&G&&(ce=Q-ce);for(var le=[],xe=G?-1:1,we=q;ce>1e-5;){var ze=we+xe*Math.min(ce,ie);le.push(y.call(this,C,we,ze)),ce-=Math.abs(ze-we),we=ze}return le},y=function(C,q,L){var G=(L-q)/2,Q=C*Math.cos(G),ie=C*Math.sin(G),ce=Q,le=-ie,xe=ce*ce+le*le,we=xe+ce*Q+le*ie,ze=4/3*(Math.sqrt(2*xe*we)-we)/(ce*ie-le*Q),De=ce-ze*le,$e=le+ze*ce,ve=De,te=-$e,Ce=G+q,Be=Math.cos(Ce),Ne=Math.sin(Ce);return{x1:C*Math.cos(q),y1:C*Math.sin(q),x2:De*Be-$e*Ne,y2:De*Ne+$e*Be,x3:ve*Be-te*Ne,y3:ve*Ne+te*Be,x4:C*Math.cos(L),y4:C*Math.sin(L)}},se=function(C){return 180*C/Math.PI},W=function(C,q,L,G,Q,ie){var ce=C+.5*(L-C),le=q+.5*(G-q),xe=Q+.5*(L-Q),we=ie+.5*(G-ie),ze=Math.min(C,Q,ce,xe),De=Math.max(C,Q,ce,xe),$e=Math.min(q,ie,le,we),ve=Math.max(q,ie,le,we);return new c(ze,$e,De-ze,ve-$e)},v=function(C,q,L,G,Q,ie,ce,le){var xe,we,ze,De,$e,ve,te,Ce,Be,Ne,ue,Je,Ke,ut,Ye=L-C,Se=G-q,ye=Q-L,Ae=ie-G,Me=ce-Q,_e=le-ie;for(we=0;we<41;we++)Be=(te=(ze=C+(xe=we/40)*Ye)+xe*(($e=L+xe*ye)-ze))+xe*($e+xe*(Q+xe*Me-$e)-te),Ne=(Ce=(De=q+xe*Se)+xe*((ve=G+xe*Ae)-De))+xe*(ve+xe*(ie+xe*_e-ve)-Ce),we==0?(ue=Be,Je=Ne,Ke=Be,ut=Ne):(ue=Math.min(ue,Be),Je=Math.min(Je,Ne),Ke=Math.max(Ke,Be),ut=Math.max(ut,Ne));return new c(Math.round(ue),Math.round(Je),Math.round(Ke-ue),Math.round(ut-Je))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,q,L=(C=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:q}));this.prevLineDash!==L&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=L)}}})(Wt.API),function(t){var r=function(s){var a,c,u,h,p,x,b,g,_,S;for(c=[],u=0,h=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;h>u;u+=4)(p=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(x=(p=((p=((p=((p=(p-(S=p%85))/85)-(_=p%85))/85)-(g=p%85))/85)-(b=p%85))/85)%85,c.push(x+33,b+33,g+33,_+33,S+33)):c.push(122);return function(O,k){for(var M=k;M>0;M--)O.pop()}(c,a.length),String.fromCharCode.apply(String,c)+"~>"},n=function(s){var a,c,u,h,p,x=String,b="length",g=255,_="charCodeAt",S="slice",O="replace";for(s[S](-2),s=s[S](0,-2)[O](/\s/g,"")[O]("z","!!!!!"),u=[],h=0,p=(s+=a="uuuuu"[S](s[b]%5||5))[b];p>h;h+=5)c=52200625*(s[_](h)-33)+614125*(s[_](h+1)-33)+7225*(s[_](h+2)-33)+85*(s[_](h+3)-33)+(s[_](h+4)-33),u.push(g&c>>24,g&c>>16,g&c>>8,g&c);return function(k,M){for(var J=M;J>0;J--)k.pop()}(u,a[b]),x.fromCharCode.apply(x,u)},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",u=0;u<s.length;u+=2)c+=String.fromCharCode("0x"+(s[u]+s[u+1]));return c},o=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return s=(a=Wu(a)).reduce(function(u,h){return u+String.fromCharCode(h)},"")};t.processDataByFilters=function(s,a){var c=0,u=s||"",h=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=r(u),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=o(u),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:u,reverseChain:h.reverse().join(" ")}}}(Wt.API),function(t){t.loadFile=function(r,n,i){return function(o,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var c=void 0;try{c=function(u,h,p){var x=new XMLHttpRequest,b=0,g=function(_){var S=_.length,O=[],k=String.fromCharCode;for(b=0;b<S;b+=1)O.push(k(255&_.charCodeAt(b)));return O.join("")};if(x.open("GET",u,!h),x.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(x.onload=function(){x.status===200?p(g(this.responseText)):p(void 0)}),x.send(null),h&&x.status===200)return g(x.responseText)}(o,s,a)}catch{}return c}(r,n,i)},t.loadImageFile=t.loadFile}(Wt.API),function(t){function r(){return($t.html2canvas?Promise.resolve($t.html2canvas):ho(()=>import("./html2canvas.esm-Dw6mdHwC.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return($t.DOMPurify?Promise.resolve($t.DOMPurify):ho(()=>import("./purify.es-Co4A5LKW.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var i=function(a){var c=Lr(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},o=function(a,c){var u=document.createElement(a);for(var h in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[h]=c.style[h];return u},s=function a(c){var u=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),h=a.convert(Promise.resolve(),u);return h=(h=h.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||function(u){switch(i(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(u){return this.set({src:o("div",{innerHTML:a,dompurify:u})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=function u(h,p){for(var x=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),b=h.firstChild;b;b=b.nextSibling)p!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||x.appendChild(u(b,p));return h.nodeType===1&&(h.nodeName==="CANVAS"?(x.width=h.width,x.height=h.height,x.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(x.value=h.value),x.addEventListener("load",function(){x.scrollTop=h.scrollTop,x.scrollLeft=h.scrollLeft},!0)),x}(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(r).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(r).then(function(c){var u=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=h,h)for(var b=0;b<h.length;++b){var g=h[b],_=g.src.find(function(S){return S.format==="truetype"});_&&u.addFont(_.url,g.ref.name,g.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,u.context2d.save(!0),c(this.prop.container,x)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(i(a)!=="object")return this;var c=Object.keys(a||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=a[u]};switch(u){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[u]=a[u]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var u=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(u):u})},s.prototype.setMargin=function(a){return this.then(function(){switch(i(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(u,h){return Math.floor(u*h/72*96)}return this.then(function(){(a=a||Wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,u,h){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,u,h){return this.setProgress(a?this.progress.val+a:null,c||null,u?this.progress.n+u:null,h?this.progress.stack.concat(h):null)},s.prototype.then=function(a,c){var u=this;return this.thenCore(a,c,function(h,p){return u.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(x){return u.updateProgress(null,h),x}).then(h,p).then(function(x){return u.updateProgress(1),x})})},s.prototype.thenCore=function(a,c,u){u=u||Promise.prototype.then,a&&(a=a.bind(this)),c&&(c=c.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=u.call(h,a,c);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(u){c=c.thenCore(u)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Wt.getPageSize=function(a,c,u){if(Lr(a)==="object"){var h=a;a=h.orientation,c=h.unit||c,u=h.format||u}c=c||"mm",u=u||"a4",a=(""+(a||"P")).toLowerCase();var p,x=(""+u).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var g,_=0,S=0;if(b.hasOwnProperty(x))_=b[x][1]/p,S=b[x][0]/p;else try{_=u[1],S=u[0]}catch{throw new Error("Invalid format: "+u)}if(a==="p"||a==="portrait")a="p",S>_&&(g=S,S=_,_=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",_>S&&(g=S,S=_,_=g)}return{width:S,height:_,unit:c,k:p,orientation:a}},t.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Yu):null;var u=new s(c);return c.worker?u:u.from(a).doCallback()}}(Wt.API),Wt.API.addJS=function(t){return Xf=t,this.internal.events.subscribe("postPutResources",function(){cc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(cc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Jf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Xf+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){cc!==void 0&&Jf!==void 0&&this.internal.out("/Names <</JavaScript "+cc+" 0 R>>")}),this},function(t){var r;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),s=0;s<o.length;s++){var a=o[s],c=i.exec(a);if(c!=null){var u=c[1];n.internal.newObjectDeferredBegin(u,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,p=[];for(s=0;s<h;s++){var x=n.internal.newObject();p.push(x);var b=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),r=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+r+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,o,s){var a={title:o,options:s,children:[]};return i==null&&(i=this.root),i.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var a=i.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var c=this.count=this.count_r({count:0},a);if(c>0&&this.line("/Count "+c),a.options&&a.options.pageNumber){var u=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var h=0;h<i.children.length;h++)this.renderItems(i.children[h])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,o){for(var s=0;s<o.children.length;s++)i.count++,this.count_r(i,o.children[s]);return i.count}}])}(Wt.API),function(t){var r=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,o,s,a,c){var u,h=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(u=function(x){for(var b,g=256*x.charCodeAt(4)+x.charCodeAt(5),_=x.length,S={width:0,height:0,numcomponents:1},O=4;O<_;O+=2){if(O+=g,r.indexOf(x.charCodeAt(O+1))!==-1){b=256*x.charCodeAt(O+5)+x.charCodeAt(O+6),S={width:256*x.charCodeAt(O+7)+x.charCodeAt(O+8),height:b,numcomponents:x.charCodeAt(O+9)};break}g=256*x.charCodeAt(O+2)+x.charCodeAt(O+3)}return S}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:n,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:h,index:i,alias:o}}return p}}(Wt.API);var Go,dc,Kf,Qf,Zf,Sy=function(){var t,r,n;function i(s){var a,c,u,h,p,x,b,g,_,S,O,k,M,J;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},x=null;;){switch(a=this.readUInt32(),_=function(){var re,N;for(N=[],re=0;re<4;++re)N.push(String.fromCharCode(this.data[this.pos++]));return N}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":x&&this.animation.frames.push(x),this.pos+=4,x={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),h=this.readUInt16()||100,x.delay=1e3*p/h,x.disposeOp=this.data[this.pos++],x.blendOp=this.data[this.pos++],x.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,a-=4),s=(x!=null?x.data:void 0)||this.imgData,k=0;0<=a?k<a:k>a;0<=a?++k:--k)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((S=u-this.transparency.indexed.length)>0)for(M=0;0<=S?M<S:M>S;0<=S?++M:--M)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":b=(O=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,O.slice(0,b)),this.text[g]=String.fromCharCode.apply(String,O.slice(b+1));break;case"IEND":return x&&this.animation.frames.push(x),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(J=this.colorType)===4||J===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var a,c;for(c=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)c.push(this.data[this.pos++]);return c},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*a),u=0,h=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(x,b,g,_){var S,O,k,M,J,re,N,D,B,U,R,P,w,A,T,E,ee,Z,y,se,W,v=Math.ceil((h.width-x)/g),Y=Math.ceil((h.height-b)/_),C=h.width==v&&h.height==Y;for(A=a*v,P=C?c:new Uint8Array(A*Y),re=s.length,w=0,O=0;w<Y&&u<re;){switch(s[u++]){case 0:for(M=ee=0;ee<A;M=ee+=1)P[O++]=s[u++];break;case 1:for(M=Z=0;Z<A;M=Z+=1)S=s[u++],J=M<a?0:P[O-a],P[O++]=(S+J)%256;break;case 2:for(M=y=0;y<A;M=y+=1)S=s[u++],k=(M-M%a)/a,T=w&&P[(w-1)*A+k*a+M%a],P[O++]=(T+S)%256;break;case 3:for(M=se=0;se<A;M=se+=1)S=s[u++],k=(M-M%a)/a,J=M<a?0:P[O-a],T=w&&P[(w-1)*A+k*a+M%a],P[O++]=(S+Math.floor((J+T)/2))%256;break;case 4:for(M=W=0;W<A;M=W+=1)S=s[u++],k=(M-M%a)/a,J=M<a?0:P[O-a],w===0?T=E=0:(T=P[(w-1)*A+k*a+M%a],E=k&&P[(w-1)*A+(k-1)*a+M%a]),N=J+T-E,D=Math.abs(N-J),U=Math.abs(N-T),R=Math.abs(N-E),B=D<=U&&D<=R?J:U<=R?T:E,P[O++]=(S+B)%256;break;default:throw new Error("Invalid filter algorithm: "+s[u-1])}if(!C){var q=((b+w*_)*h.width+x)*a,L=w*A;for(M=0;M<v;M+=1){for(var G=0;G<a;G+=1)c[q++]=P[L++];q+=(g-1)*a}}w++}}return s=ty(s),h.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),c},i.prototype.decodePalette=function(){var s,a,c,u,h,p,x,b,g;for(c=this.palette,p=this.transparency.indexed||[],h=new Uint8Array((p.length||0)+c.length),u=0,s=0,a=x=0,b=c.length;x<b;a=x+=3)h[u++]=c[a],h[u++]=c[a+1],h[u++]=c[a+2],h[u++]=(g=p[s++])!=null?g:255;return h},i.prototype.copyToImageData=function(s,a){var c,u,h,p,x,b,g,_,S,O,k;if(u=this.colors,S=null,c=this.hasAlphaChannel,this.palette.length&&(S=(k=this._decodedPalette)!=null?k:this._decodedPalette=this.decodePalette(),u=4,c=!0),_=(h=s.data||s).length,x=S||a,p=b=0,u===1)for(;p<_;)g=S?4*a[p/4]:b,O=x[g++],h[p++]=O,h[p++]=O,h[p++]=O,h[p++]=c?x[g++]:255,b=g;else for(;p<_;)g=S?4*a[p/4]:b,h[p++]=x[g++],h[p++]=x[g++],h[p++]=x[g++],h[p++]=c?x[g++]:255,b=g},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var o=function(){if(Object.prototype.toString.call($t)==="[object Window]"){try{r=$t.document.createElement("canvas"),n=r.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(s){var a;if(o()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=r.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var a,c,u,h,p,x,b,g;if(this.animation){for(g=[],c=p=0,x=(b=this.animation.frames).length;p<x;c=++p)a=b[c],u=s.createImageData(a.width,a.height),h=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(u,h),a.imageData=u,g.push(a.image=t(u));return g}},i.prototype.renderFrame=function(s,a){var c,u,h;return c=(u=this.animation.frames)[a],h=u[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?s.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&s.putImageData(h.imageData,h.xOffset,h.yOffset),c.blendOp===0&&s.clearRect(c.xOffset,c.yOffset,c.width,c.height),s.drawImage(c.image,c.xOffset,c.yOffset)},i.prototype.animate=function(s){var a,c,u,h,p,x,b=this;return c=0,x=this.animation,h=x.numFrames,u=x.frames,p=x.numPlays,(a=function(){var g,_;if(g=c++%h,_=u[g],b.renderFrame(s,g),h>1&&c/h<p)return b.animation._timeout=setTimeout(a,_.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var a,c;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(c=a.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),a.putImageData(c,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Cy(t){var r=0;if(t[r++]!==71||t[r++]!==73||t[r++]!==70||t[r++]!==56||(t[r++]+1&253)!=56||t[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[r++]|t[r++]<<8,i=t[r++]|t[r++]<<8,o=t[r++],s=o>>7,a=1<<(7&o)+1;t[r++],t[r++];var c=null,u=null;s&&(c=r,u=a,r+=3*a);var h=!0,p=[],x=0,b=null,g=0,_=null;for(this.width=n,this.height=i;h&&r<t.length;)switch(t[r++]){case 33:switch(t[r++]){case 255:if(t[r]!==11||t[r+1]==78&&t[r+2]==69&&t[r+3]==84&&t[r+4]==83&&t[r+5]==67&&t[r+6]==65&&t[r+7]==80&&t[r+8]==69&&t[r+9]==50&&t[r+10]==46&&t[r+11]==48&&t[r+12]==3&&t[r+13]==1&&t[r+16]==0)r+=14,_=t[r++]|t[r++]<<8,r++;else for(r+=12;;){if(!((w=t[r++])>=0))throw Error("Invalid block size");if(w===0)break;r+=w}break;case 249:if(t[r++]!==4||t[r+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[r++];x=t[r++]|t[r++]<<8,b=t[r++],(1&S)==0&&(b=null),g=S>>2&7,r++;break;case 254:for(;;){if(!((w=t[r++])>=0))throw Error("Invalid block size");if(w===0)break;r+=w}break;default:throw new Error("Unknown graphic control label: 0x"+t[r-1].toString(16))}break;case 44:var O=t[r++]|t[r++]<<8,k=t[r++]|t[r++]<<8,M=t[r++]|t[r++]<<8,J=t[r++]|t[r++]<<8,re=t[r++],N=re>>6&1,D=1<<(7&re)+1,B=c,U=u,R=!1;re>>7&&(R=!0,B=r,U=D,r+=3*D);var P=r;for(r++;;){var w;if(!((w=t[r++])>=0))throw Error("Invalid block size");if(w===0)break;r+=w}p.push({x:O,y:k,width:M,height:J,has_local_palette:R,palette_offset:B,palette_size:U,data_offset:P,data_length:r-P,transparent_index:b,interlaced:!!N,delay:x,disposal:g});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[r-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return _},this.frameInfo=function(A){if(A<0||A>=p.length)throw new Error("Frame index out of range.");return p[A]},this.decodeAndBlitFrameBGRA=function(A,T){var E=this.frameInfo(A),ee=E.width*E.height,Z=new Uint8Array(ee);ep(t,E.data_offset,Z,ee);var y=E.palette_offset,se=E.transparent_index;se===null&&(se=256);var W=E.width,v=n-W,Y=W,C=4*(E.y*n+E.x),q=4*((E.y+E.height)*n+E.x),L=C,G=4*v;E.interlaced===!0&&(G+=4*n*7);for(var Q=8,ie=0,ce=Z.length;ie<ce;++ie){var le=Z[ie];if(Y===0&&(Y=W,(L+=G)>=q&&(G=4*v+4*n*(Q-1),L=C+(W+v)*(Q<<1),Q>>=1)),le===se)L+=4;else{var xe=t[y+3*le],we=t[y+3*le+1],ze=t[y+3*le+2];T[L++]=ze,T[L++]=we,T[L++]=xe,T[L++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(A,T){var E=this.frameInfo(A),ee=E.width*E.height,Z=new Uint8Array(ee);ep(t,E.data_offset,Z,ee);var y=E.palette_offset,se=E.transparent_index;se===null&&(se=256);var W=E.width,v=n-W,Y=W,C=4*(E.y*n+E.x),q=4*((E.y+E.height)*n+E.x),L=C,G=4*v;E.interlaced===!0&&(G+=4*n*7);for(var Q=8,ie=0,ce=Z.length;ie<ce;++ie){var le=Z[ie];if(Y===0&&(Y=W,(L+=G)>=q&&(G=4*v+4*n*(Q-1),L=C+(W+v)*(Q<<1),Q>>=1)),le===se)L+=4;else{var xe=t[y+3*le],we=t[y+3*le+1],ze=t[y+3*le+2];T[L++]=xe,T[L++]=we,T[L++]=ze,T[L++]=255}--Y}}}function ep(t,r,n,i){for(var o=t[r++],s=1<<o,a=s+1,c=a+1,u=o+1,h=(1<<u)-1,p=0,x=0,b=0,g=t[r++],_=new Int32Array(4096),S=null;;){for(;p<16&&g!==0;)x|=t[r++]<<p,p+=8,g===1?g=t[r++]:--g;if(p<u)break;var O=x&h;if(x>>=u,p-=u,O!==s){if(O===a)break;for(var k=O<c?O:S,M=0,J=k;J>s;)J=_[J]>>8,++M;var re=J;if(b+M+(k!==O?1:0)>i)return void kr.log("Warning, gif stream longer than expected.");n[b++]=re;var N=b+=M;for(k!==O&&(n[b++]=re),J=k;M--;)J=_[J],n[--N]=255&J,J>>=8;S!==null&&c<4096&&(_[c++]=S<<8|re,c>=h+1&&u<12&&(++u,h=h<<1|1)),S=O}else c=a+1,h=(1<<(u=o+1))-1,S=null}return b!==i&&kr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function ju(t){var r,n,i,o,s,a=Math.floor,c=new Array(64),u=new Array(64),h=new Array(64),p=new Array(64),x=new Array(65535),b=new Array(65535),g=new Array(64),_=new Array(64),S=[],O=0,k=7,M=new Array(64),J=new Array(64),re=new Array(64),N=new Array(256),D=new Array(2048),B=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],w=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(C,q){for(var L=0,G=0,Q=new Array,ie=1;ie<=16;ie++){for(var ce=1;ce<=C[ie];ce++)Q[q[G]]=[],Q[q[G]][0]=L,Q[q[G]][1]=ie,G++,L++;L*=2}return Q}function y(C){for(var q=C[0],L=C[1]-1;L>=0;)q&1<<L&&(O|=1<<k),L--,--k<0&&(O==255?(se(255),se(0)):se(O),k=7,O=0)}function se(C){S.push(C)}function W(C){se(C>>8&255),se(255&C)}function v(C,q,L,G,Q){for(var ie,ce=Q[0],le=Q[240],xe=function(Ne,ue){var Je,Ke,ut,Ye,Se,ye,Ae,Me,_e,Fe,Ee=0;for(_e=0;_e<8;++_e){Je=Ne[Ee],Ke=Ne[Ee+1],ut=Ne[Ee+2],Ye=Ne[Ee+3],Se=Ne[Ee+4],ye=Ne[Ee+5],Ae=Ne[Ee+6];var it=Je+(Me=Ne[Ee+7]),Ve=Je-Me,at=Ke+Ae,Lt=Ke-Ae,Ct=ut+ye,be=ut-ye,st=Ye+Se,Ie=Ye-Se,et=it+st,Tt=it-st,Le=at+Ct,We=at-Ct;Ne[Ee]=et+Le,Ne[Ee+4]=et-Le;var tt=.707106781*(We+Tt);Ne[Ee+2]=Tt+tt,Ne[Ee+6]=Tt-tt;var rt=.382683433*((et=Ie+be)-(We=Lt+Ve)),bt=.5411961*et+rt,yt=1.306562965*We+rt,qe=.707106781*(Le=be+Lt),pt=Ve+qe,lt=Ve-qe;Ne[Ee+5]=lt+bt,Ne[Ee+3]=lt-bt,Ne[Ee+1]=pt+yt,Ne[Ee+7]=pt-yt,Ee+=8}for(Ee=0,_e=0;_e<8;++_e){Je=Ne[Ee],Ke=Ne[Ee+8],ut=Ne[Ee+16],Ye=Ne[Ee+24],Se=Ne[Ee+32],ye=Ne[Ee+40],Ae=Ne[Ee+48];var zt=Je+(Me=Ne[Ee+56]),Rt=Je-Me,Pt=Ke+Ae,hr=Ke-Ae,jr=ut+ye,pn=ut-ye,Sr=Ye+Se,Dn=Ye-Se,An=zt+Sr,$n=zt-Sr,Gn=Pt+jr,si=Pt-jr;Ne[Ee]=An+Gn,Ne[Ee+32]=An-Gn;var he=.707106781*(si+$n);Ne[Ee+16]=$n+he,Ne[Ee+48]=$n-he;var kt=.382683433*((An=Dn+pn)-(si=hr+Rt)),Et=.5411961*An+kt,It=1.306562965*si+kt,pr=.707106781*(Gn=pn+hr),er=Rt+pr,tr=Rt-pr;Ne[Ee+40]=tr+Et,Ne[Ee+24]=tr-Et,Ne[Ee+8]=er+It,Ne[Ee+56]=er-It,Ee++}for(_e=0;_e<64;++_e)Fe=Ne[_e]*ue[_e],g[_e]=Fe>0?Fe+.5|0:Fe-.5|0;return g}(C,q),we=0;we<64;++we)_[B[we]]=xe[we];var ze=_[0]-L;L=_[0],ze==0?y(G[0]):(y(G[b[ie=32767+ze]]),y(x[ie]));for(var De=63;De>0&&_[De]==0;)De--;if(De==0)return y(ce),L;for(var $e,ve=1;ve<=De;){for(var te=ve;_[ve]==0&&ve<=De;)++ve;var Ce=ve-te;if(Ce>=16){$e=Ce>>4;for(var Be=1;Be<=$e;++Be)y(le);Ce&=15}ie=32767+_[ve],y(Q[(Ce<<4)+b[ie]]),y(x[ie]),ve++}return De!=63&&y(ce),L}function Y(C){C=Math.min(Math.max(C,1),100),s!=C&&(function(q){for(var L=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],G=0;G<64;G++){var Q=a((L[G]*q+50)/100);Q=Math.min(Math.max(Q,1),255),c[B[G]]=Q}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var le=a((ie[ce]*q+50)/100);le=Math.min(Math.max(le,1),255),u[B[ce]]=le}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,ze=0;ze<8;ze++)for(var De=0;De<8;De++)h[we]=1/(c[B[we]]*xe[ze]*xe[De]*8),p[we]=1/(u[B[we]]*xe[ze]*xe[De]*8),we++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),s=C)}this.encode=function(C,q){q&&Y(q),S=new Array,O=0,k=7,W(65496),W(65504),W(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),W(1),W(1),se(0),se(0),function(){W(65499),W(132),se(0);for(var Ke=0;Ke<64;Ke++)se(c[Ke]);se(1);for(var ut=0;ut<64;ut++)se(u[ut])}(),function(Ke,ut){W(65472),W(17),se(8),W(ut),W(Ke),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)}(C.width,C.height),function(){W(65476),W(418),se(0);for(var Ke=0;Ke<16;Ke++)se(U[Ke+1]);for(var ut=0;ut<=11;ut++)se(R[ut]);se(16);for(var Ye=0;Ye<16;Ye++)se(P[Ye+1]);for(var Se=0;Se<=161;Se++)se(w[Se]);se(1);for(var ye=0;ye<16;ye++)se(A[ye+1]);for(var Ae=0;Ae<=11;Ae++)se(T[Ae]);se(17);for(var Me=0;Me<16;Me++)se(E[Me+1]);for(var _e=0;_e<=161;_e++)se(ee[_e])}(),W(65498),W(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0);var L=0,G=0,Q=0;O=0,k=7,this.encode.displayName="_encode_";for(var ie,ce,le,xe,we,ze,De,$e,ve,te=C.data,Ce=C.width,Be=C.height,Ne=4*Ce,ue=0;ue<Be;){for(ie=0;ie<Ne;){for(we=Ne*ue+ie,De=-1,$e=0,ve=0;ve<64;ve++)ze=we+($e=ve>>3)*Ne+(De=4*(7&ve)),ue+$e>=Be&&(ze-=Ne*(ue+1+$e-Be)),ie+De>=Ne&&(ze-=ie+De-Ne+4),ce=te[ze++],le=te[ze++],xe=te[ze++],M[ve]=(D[ce]+D[le+256>>0]+D[xe+512>>0]>>16)-128,J[ve]=(D[ce+768>>0]+D[le+1024>>0]+D[xe+1280>>0]>>16)-128,re[ve]=(D[ce+1280>>0]+D[le+1536>>0]+D[xe+1792>>0]>>16)-128;L=v(M,h,L,r,i),G=v(J,p,G,n,o),Q=v(re,p,Q,n,o),ie+=32}ue+=8}if(k>=0){var Je=[];Je[1]=k+1,Je[0]=(1<<k+1)-1,y(Je)}return W(65497),new Uint8Array(S)},t=t||50,function(){for(var C=String.fromCharCode,q=0;q<256;q++)N[q]=C(q)}(),r=Z(U,R),n=Z(A,T),i=Z(P,w),o=Z(E,ee),function(){for(var C=1,q=2,L=1;L<=15;L++){for(var G=C;G<q;G++)b[32767+G]=L,x[32767+G]=[],x[32767+G][1]=L,x[32767+G][0]=G;for(var Q=-(q-1);Q<=-C;Q++)b[32767+Q]=L,x[32767+Q]=[],x[32767+Q][1]=L,x[32767+Q][0]=q-1+Q;C<<=1,q<<=1}}(),function(){for(var C=0;C<256;C++)D[C]=19595*C,D[C+256>>0]=38470*C,D[C+512>>0]=7471*C+32768,D[C+768>>0]=-11059*C,D[C+1024>>0]=-21709*C,D[C+1280>>0]=32768*C+8421375,D[C+1536>>0]=-27439*C,D[C+1792>>0]=-5329*C}(),Y(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ti(t,r){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function tp(t){function r(U){if(!U)throw Error("assert :P")}function n(U,R,P){for(var w=0;4>w;w++)if(U[R+w]!=P.charCodeAt(w))return!0;return!1}function i(U,R,P,w,A){for(var T=0;T<A;T++)U[R+T]=P[w+T]}function o(U,R,P,w){for(var A=0;A<w;A++)U[R+A]=P}function s(U){return new Int32Array(U)}function a(U,R){for(var P=[],w=0;w<U;w++)P.push(new R);return P}function c(U,R){var P=[];return function w(A,T,E){for(var ee=E[T],Z=0;Z<ee&&(A.push(E.length>T+1?[]:new R),!(E.length<T+1));Z++)w(A[Z],T+1,E)}(P,0,U),P}var u=function(){var U=this;function R(l,d){for(var m=1<<d-1>>>0;l&m;)m>>>=1;return m?(l&m-1)+m:l}function P(l,d,m,j,F){r(!(j%m));do l[d+(j-=m)]=F;while(0<j)}function w(l,d,m,j,F){if(r(2328>=F),512>=F)var H=s(512);else if((H=s(F))==null)return 0;return function(V,X,K,ne,pe,Oe){var Re,je,Ze=X,He=1<<K,ge=s(16),me=s(16);for(r(pe!=0),r(ne!=null),r(V!=null),r(0<K),je=0;je<pe;++je){if(15<ne[je])return 0;++ge[ne[je]]}if(ge[0]==pe)return 0;for(me[1]=0,Re=1;15>Re;++Re){if(ge[Re]>1<<Re)return 0;me[Re+1]=me[Re]+ge[Re]}for(je=0;je<pe;++je)Re=ne[je],0<ne[je]&&(Oe[me[Re]++]=je);if(me[15]==1)return(ne=new A).g=0,ne.value=Oe[0],P(V,Ze,1,He,ne),He;var Xe,nt=-1,Qe=He-1,Nt=0,vt=1,qt=1,wt=1<<K;for(je=0,Re=1,pe=2;Re<=K;++Re,pe<<=1){if(vt+=qt<<=1,0>(qt-=ge[Re]))return 0;for(;0<ge[Re];--ge[Re])(ne=new A).g=Re,ne.value=Oe[je++],P(V,Ze+Nt,pe,wt,ne),Nt=R(Nt,Re)}for(Re=K+1,pe=2;15>=Re;++Re,pe<<=1){if(vt+=qt<<=1,0>(qt-=ge[Re]))return 0;for(;0<ge[Re];--ge[Re]){if(ne=new A,(Nt&Qe)!=nt){for(Ze+=wt,Xe=1<<(nt=Re)-K;15>nt&&!(0>=(Xe-=ge[nt]));)++nt,Xe<<=1;He+=wt=1<<(Xe=nt-K),V[X+(nt=Nt&Qe)].g=Xe+K,V[X+nt].value=Ze-X-nt}ne.g=Re-K,ne.value=Oe[je++],P(V,Ze+(Nt>>K),pe,wt,ne),Nt=R(Nt,Re)}}return vt!=2*me[15]-1?0:He}(l,d,m,j,F,H)}function A(){this.value=this.g=0}function T(){this.value=this.g=0}function E(){this.G=a(5,A),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Cn,T)}function ee(l,d,m,j){r(l!=null),r(d!=null),r(2147483648>j),l.Ca=254,l.I=0,l.b=-8,l.Ka=0,l.oa=d,l.pa=m,l.Jd=d,l.Yc=m+j,l.Zc=4<=j?m+j-4+1:m,ie(l)}function Z(l,d){for(var m=0;0<d--;)m|=le(l,128)<<d;return m}function y(l,d){var m=Z(l,d);return ce(l)?-m:m}function se(l,d,m,j){var F,H=0;for(r(l!=null),r(d!=null),r(4294967288>j),l.Sb=j,l.Ra=0,l.u=0,l.h=0,4<j&&(j=4),F=0;F<j;++F)H+=d[m+F]<<8*F;l.Ra=H,l.bb=j,l.oa=d,l.pa=m}function W(l){for(;8<=l.u&&l.bb<l.Sb;)l.Ra>>>=8,l.Ra+=l.oa[l.pa+l.bb]<<No-8>>>0,++l.bb,l.u-=8;L(l)&&(l.h=1,l.u=0)}function v(l,d){if(r(0<=d),!l.h&&d<=Po){var m=q(l)&Lo[d];return l.u+=d,W(l),m}return l.h=1,l.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(l){return l.Ra>>>(l.u&No-1)>>>0}function L(l){return r(l.bb<=l.Sb),l.h||l.bb==l.Sb&&l.u>No}function G(l,d){l.u=d,l.h=L(l)}function Q(l){l.u>=Ea&&(r(l.u>=Ea),W(l))}function ie(l){r(l!=null&&l.oa!=null),l.pa<l.Zc?(l.I=(l.oa[l.pa++]|l.I<<8)>>>0,l.b+=8):(r(l!=null&&l.oa!=null),l.pa<l.Yc?(l.b+=8,l.I=l.oa[l.pa++]|l.I<<8):l.Ka?l.b=0:(l.I<<=8,l.b+=8,l.Ka=1))}function ce(l){return Z(l,1)}function le(l,d){var m=l.Ca;0>l.b&&ie(l);var j=l.b,F=m*d>>>8,H=(l.I>>>j>F)+0;for(H?(m-=F,l.I-=F+1<<j>>>0):m=F+1,j=m,F=0;256<=j;)F+=8,j>>=8;return j=7^F+Yn[j],l.b-=j,l.Ca=(m<<j)-1,H}function xe(l,d,m){l[d+0]=m>>24&255,l[d+1]=m>>16&255,l[d+2]=m>>8&255,l[d+3]=m>>0&255}function we(l,d){return l[d+0]<<0|l[d+1]<<8}function ze(l,d){return we(l,d)|l[d+2]<<16}function De(l,d){return we(l,d)|we(l,d+2)<<16}function $e(l,d){var m=1<<d;return r(l!=null),r(0<d),l.X=s(m),l.X==null?0:(l.Mb=32-d,l.Xa=d,1)}function ve(l,d){r(l!=null),r(d!=null),r(l.Xa==d.Xa),i(d.X,0,l.X,0,1<<d.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function Ce(l,d,m,j){r(m!=null),r(j!=null);var F=m[0],H=j[0];return F==0&&(F=(l*H+d/2)/d),H==0&&(H=(d*F+l/2)/l),0>=F||0>=H?0:(m[0]=F,j[0]=H,1)}function Be(l,d){return l+(1<<d)-1>>>d}function Ne(l,d){return((4278255360&l)+(4278255360&d)>>>0&4278255360)+((16711935&l)+(16711935&d)>>>0&16711935)>>>0}function ue(l,d){U[d]=function(m,j,F,H,V,X,K){var ne;for(ne=0;ne<V;++ne){var pe=U[l](X[K+ne-1],F,H+ne);X[K+ne]=Ne(m[j+ne],pe)}}}function Je(){this.ud=this.hd=this.jd=0}function Ke(l,d){return((4278124286&(l^d))>>>1)+(l&d)>>>0}function ut(l){return 0<=l&&256>l?l:0>l?0:255<l?255:void 0}function Ye(l,d){return ut(l+(l-d+.5>>1))}function Se(l,d,m){return Math.abs(d-m)-Math.abs(l-m)}function ye(l,d,m,j,F,H,V){for(j=H[V-1],m=0;m<F;++m)H[V+m]=j=Ne(l[d+m],j)}function Ae(l,d,m,j,F){var H;for(H=0;H<m;++H){var V=l[d+H],X=V>>8&255,K=16711935&(K=(K=16711935&V)+((X<<16)+X));j[F+H]=(4278255360&V)+K>>>0}}function Me(l,d){d.jd=l>>0&255,d.hd=l>>8&255,d.ud=l>>16&255}function _e(l,d,m,j,F,H){var V;for(V=0;V<j;++V){var X=d[m+V],K=X>>>8,ne=X,pe=255&(pe=(pe=X>>>16)+((l.jd<<24>>24)*(K<<24>>24)>>>5));ne=255&(ne=(ne=ne+((l.hd<<24>>24)*(K<<24>>24)>>>5))+((l.ud<<24>>24)*(pe<<24>>24)>>>5)),F[H+V]=(4278255360&X)+(pe<<16)+ne}}function Fe(l,d,m,j,F){U[d]=function(H,V,X,K,ne,pe,Oe,Re,je){for(K=Oe;K<Re;++K)for(Oe=0;Oe<je;++Oe)ne[pe++]=F(X[j(H[V++])])},U[l]=function(H,V,X,K,ne,pe,Oe){var Re=8>>H.b,je=H.Ea,Ze=H.K[0],He=H.w;if(8>Re)for(H=(1<<H.b)-1,He=(1<<Re)-1;V<X;++V){var ge,me=0;for(ge=0;ge<je;++ge)ge&H||(me=j(K[ne++])),pe[Oe++]=F(Ze[me&He]),me>>=Re}else U["VP8LMapColor"+m](K,ne,Ze,He,pe,Oe,V,X,je)}}function Ee(l,d,m,j,F){for(m=d+m;d<m;){var H=l[d++];j[F++]=H>>16&255,j[F++]=H>>8&255,j[F++]=H>>0&255}}function it(l,d,m,j,F){for(m=d+m;d<m;){var H=l[d++];j[F++]=H>>16&255,j[F++]=H>>8&255,j[F++]=H>>0&255,j[F++]=H>>24&255}}function Ve(l,d,m,j,F){for(m=d+m;d<m;){var H=(V=l[d++])>>16&240|V>>12&15,V=V>>0&240|V>>28&15;j[F++]=H,j[F++]=V}}function at(l,d,m,j,F){for(m=d+m;d<m;){var H=(V=l[d++])>>16&248|V>>13&7,V=V>>5&224|V>>3&31;j[F++]=H,j[F++]=V}}function Lt(l,d,m,j,F){for(m=d+m;d<m;){var H=l[d++];j[F++]=H>>0&255,j[F++]=H>>8&255,j[F++]=H>>16&255}}function Ct(l,d,m,j,F,H){if(H==0)for(m=d+m;d<m;)xe(j,((H=l[d++])[0]>>24|H[1]>>8&65280|H[2]<<8&16711680|H[3]<<24)>>>0),F+=32;else i(j,F,l,d,m)}function be(l,d){U[d][0]=U[l+"0"],U[d][1]=U[l+"1"],U[d][2]=U[l+"2"],U[d][3]=U[l+"3"],U[d][4]=U[l+"4"],U[d][5]=U[l+"5"],U[d][6]=U[l+"6"],U[d][7]=U[l+"7"],U[d][8]=U[l+"8"],U[d][9]=U[l+"9"],U[d][10]=U[l+"10"],U[d][11]=U[l+"11"],U[d][12]=U[l+"12"],U[d][13]=U[l+"13"],U[d][14]=U[l+"0"],U[d][15]=U[l+"0"]}function st(l){return l==Pd||l==Nd||l==Dl||l==Od}function Ie(){this.eb=[],this.size=this.A=this.fb=0}function et(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Tt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ie,this.f.kb=new et,this.sd=null}function Le(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function We(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function tt(l){return alert("todo:WebPSamplerProcessPlane"),l.T}function rt(l,d){var m=l.T,j=d.ba.f.RGBA,F=j.eb,H=j.fb+l.ka*j.A,V=ji[d.ba.S],X=l.y,K=l.O,ne=l.f,pe=l.N,Oe=l.ea,Re=l.W,je=d.cc,Ze=d.dc,He=d.Mc,ge=d.Nc,me=l.ka,Xe=l.ka+l.T,nt=l.U,Qe=nt+1>>1;for(me==0?V(X,K,null,null,ne,pe,Oe,Re,ne,pe,Oe,Re,F,H,null,null,nt):(V(d.ec,d.fc,X,K,je,Ze,He,ge,ne,pe,Oe,Re,F,H-j.A,F,H,nt),++m);me+2<Xe;me+=2)je=ne,Ze=pe,He=Oe,ge=Re,pe+=l.Rc,Re+=l.Rc,H+=2*j.A,V(X,(K+=2*l.fa)-l.fa,X,K,je,Ze,He,ge,ne,pe,Oe,Re,F,H-j.A,F,H,nt);return K+=l.fa,l.j+Xe<l.o?(i(d.ec,d.fc,X,K,nt),i(d.cc,d.dc,ne,pe,Qe),i(d.Mc,d.Nc,Oe,Re,Qe),m--):1&Xe||V(X,K,null,null,ne,pe,Oe,Re,ne,pe,Oe,Re,F,H+j.A,null,null,nt),m}function bt(l,d,m){var j=l.F,F=[l.J];if(j!=null){var H=l.U,V=d.ba.S,X=V==zl||V==Dl;d=d.ba.f.RGBA;var K=[0],ne=l.ka;K[0]=l.T,l.Kb&&(ne==0?--K[0]:(--ne,F[0]-=l.width),l.j+l.ka+l.T==l.o&&(K[0]=l.o-l.j-ne));var pe=d.eb;ne=d.fb+ne*d.A,l=Rr(j,F[0],l.width,H,K,pe,ne+(X?0:3),d.A),r(m==K),l&&st(V)&&vi(pe,ne,X,H,K,d.A)}return 0}function yt(l){var d=l.ma,m=d.ba.S,j=11>m,F=m==Fl||m==Il||m==zl||m==Ld||m==12||st(m);if(d.memory=null,d.Ib=null,d.Jb=null,d.Nd=null,!Oa(d.Oa,l,F?11:12))return 0;if(F&&st(m)&&ct(),l.da)alert("todo:use_scaling");else{if(j){if(d.Ib=tt,l.Kb){if(m=l.U+1>>1,d.memory=s(l.U+2*m),d.memory==null)return 0;d.ec=d.memory,d.fc=0,d.cc=d.ec,d.dc=d.fc+l.U,d.Mc=d.cc,d.Nc=d.dc+m,d.Ib=rt,ct()}}else alert("todo:EmitYUV");F&&(d.Jb=bt,j&&Pe())}if(j&&!xh){for(l=0;256>l;++l)yg[l]=89858*(l-128)+Bl>>Ml,jg[l]=-22014*(l-128)+Bl,wg[l]=-45773*(l-128),vg[l]=113618*(l-128)+Bl>>Ml;for(l=Ba;l<Td;++l)d=76283*(l-16)+Bl>>Ml,Sg[l-Ba]=ai(d,255),Cg[l-Ba]=ai(d+8>>4,15);xh=1}return 1}function qe(l){var d=l.ma,m=l.U,j=l.T;return r(!(1&l.ka)),0>=m||0>=j?0:(m=d.Ib(l,d),d.Jb!=null&&d.Jb(l,d,m),d.Dc+=m,1)}function pt(l){l.ma.memory=null}function lt(l,d,m,j){return v(l,8)!=47?0:(d[0]=v(l,14)+1,m[0]=v(l,14)+1,j[0]=v(l,1),v(l,3)!=0?0:!l.h)}function zt(l,d){if(4>l)return l+1;var m=l-2>>1;return(2+(1&l)<<m)+v(d,m)+1}function Rt(l,d){return 120<d?d-120:1<=(m=((m=sg[d-1])>>4)*l+(8-(15&m)))?m:1;var m}function Pt(l,d,m){var j=q(m),F=l[d+=255&j].g-8;return 0<F&&(G(m,m.u+8),j=q(m),d+=l[d].value,d+=j&(1<<F)-1),G(m,m.u+l[d].g),l[d].value}function hr(l,d,m){return m.g+=l.g,m.value+=l.value<<d>>>0,r(8>=m.g),l.g}function jr(l,d,m){var j=l.xc;return r((d=j==0?0:l.vc[l.md*(m>>j)+(d>>j)])<l.Wb),l.Ya[d]}function pn(l,d,m,j){var F=l.ab,H=l.c*d,V=l.C;d=V+d;var X=m,K=j;for(j=l.Ta,m=l.Ua;0<F--;){var ne=l.gc[F],pe=V,Oe=d,Re=X,je=K,Ze=(K=j,X=m,ne.Ea);switch(r(pe<Oe),r(Oe<=ne.nc),ne.hc){case 2:Ll(Re,je,(Oe-pe)*Ze,K,X);break;case 0:var He=pe,ge=Oe,me=K,Xe=X,nt=(wt=ne).Ea;He==0&&(kd(Re,je,null,null,1,me,Xe),ye(Re,je+1,0,0,nt-1,me,Xe+1),je+=nt,Xe+=nt,++He);for(var Qe=1<<wt.b,Nt=Qe-1,vt=Be(nt,wt.b),qt=wt.K,wt=wt.w+(He>>wt.b)*vt;He<ge;){var ur=qt,gr=wt,ar=1;for(Ta(Re,je,me,Xe-nt,1,me,Xe);ar<nt;){var ir=(ar&~Nt)+Qe;ir>nt&&(ir=nt),(0,ys[ur[gr++]>>8&15])(Re,je+ +ar,me,Xe+ar-nt,ir-ar,me,Xe+ar),ar=ir}je+=nt,Xe+=nt,++He&Nt||(wt+=vt)}Oe!=ne.nc&&i(K,X-Ze,K,X+(Oe-pe-1)*Ze,Ze);break;case 1:for(Ze=Re,ge=je,nt=(Re=ne.Ea)-(Xe=Re&~(me=(je=1<<ne.b)-1)),He=Be(Re,ne.b),Qe=ne.K,ne=ne.w+(pe>>ne.b)*He;pe<Oe;){for(Nt=Qe,vt=ne,qt=new Je,wt=ge+Xe,ur=ge+Re;ge<wt;)Me(Nt[vt++],qt),Js(qt,Ze,ge,je,K,X),ge+=je,X+=je;ge<ur&&(Me(Nt[vt++],qt),Js(qt,Ze,ge,nt,K,X),ge+=nt,X+=nt),++pe&me||(ne+=He)}break;case 3:if(Re==K&&je==X&&0<ne.b){for(ge=K,Re=Ze=X+(Oe-pe)*Ze-(Xe=(Oe-pe)*Be(ne.Ea,ne.b)),je=K,me=X,He=[],Xe=(nt=Xe)-1;0<=Xe;--Xe)He[Xe]=je[me+Xe];for(Xe=nt-1;0<=Xe;--Xe)ge[Re+Xe]=He[Xe];xi(ne,pe,Oe,K,Ze,K,X)}else xi(ne,pe,Oe,Re,je,K,X)}X=j,K=m}K!=m&&i(j,m,X,K,H)}function Sr(l,d){var m=l.V,j=l.Ba+l.c*l.C,F=d-l.C;if(r(d<=l.l.o),r(16>=F),0<F){var H=l.l,V=l.Ta,X=l.Ua,K=H.width;if(pn(l,F,m,j),F=X=[X],r((m=l.C)<(j=d)),r(H.v<H.va),j>H.o&&(j=H.o),m<H.j){var ne=H.j-m;m=H.j,F[0]+=ne*K}if(m>=j?m=0:(F[0]+=4*H.v,H.ka=m-H.j,H.U=H.va-H.v,H.T=j-m,m=1),m){if(X=X[0],11>(m=l.ca).S){var pe=m.f.RGBA,Oe=(j=m.S,F=H.U,H=H.T,ne=pe.eb,pe.A),Re=H;for(pe=pe.fb+l.Ma*pe.A;0<Re--;){var je=V,Ze=X,He=F,ge=ne,me=pe;switch(j){case Tl:Jn(je,Ze,He,ge,me);break;case Fl:Mn(je,Ze,He,ge,me);break;case Pd:Mn(je,Ze,He,ge,me),vi(ge,me,0,He,1,0);break;case lh:rs(je,Ze,He,ge,me);break;case Il:Ct(je,Ze,He,ge,me,1);break;case Nd:Ct(je,Ze,He,ge,me,1),vi(ge,me,0,He,1,0);break;case zl:Ct(je,Ze,He,ge,me,0);break;case Dl:Ct(je,Ze,He,ge,me,0),vi(ge,me,1,He,1,0);break;case Ld:vs(je,Ze,He,ge,me);break;case Od:vs(je,Ze,He,ge,me),Or(ge,me,He,1,0);break;case ch:ts(je,Ze,He,ge,me);break;default:r(0)}X+=K,pe+=Oe}l.Ma+=H}else alert("todo:EmitRescaledRowsYUVA");r(l.Ma<=m.height)}}l.C=d,r(l.C<=l.i)}function Dn(l){var d;if(0<l.ua)return 0;for(d=0;d<l.Wb;++d){var m=l.Ya[d].G,j=l.Ya[d].H;if(0<m[1][j[1]+0].g||0<m[2][j[2]+0].g||0<m[3][j[3]+0].g)return 0}return 1}function An(l,d,m,j,F,H){if(l.Z!=0){var V=l.qd,X=l.rd;for(r(Cs[l.Z]!=null);d<m;++d)Cs[l.Z](V,X,j,F,j,F,H),V=j,X=F,F+=H;l.qd=V,l.rd=X}}function $n(l,d){var m=l.l.ma,j=m.Z==0||m.Z==1?l.l.j:l.C;if(j=l.C<j?j:l.C,r(d<=l.l.o),d>j){var F=l.l.width,H=m.ca,V=m.tb+F*j,X=l.V,K=l.Ba+l.c*j,ne=l.gc;r(l.ab==1),r(ne[0].hc==3),Pl(ne[0],j,d,X,K,H,V),An(m,j,d,H,V,F)}l.C=l.Ma=d}function Gn(l,d,m,j,F,H,V){var X=l.$/j,K=l.$%j,ne=l.m,pe=l.s,Oe=m+l.$,Re=Oe;F=m+j*F;var je=m+j*H,Ze=280+pe.ua,He=l.Pb?X:16777216,ge=0<pe.ua?pe.Wa:null,me=pe.wc,Xe=Oe<je?jr(pe,K,X):null;r(l.C<H),r(je<=F);var nt=!1;e:for(;;){for(;nt||Oe<je;){var Qe=0;if(X>=He){var Nt=Oe-m;r((He=l).Pb),He.wd=He.m,He.xd=Nt,0<He.s.ua&&ve(He.s.Wa,He.s.vb),He=X+ag}if(K&me||(Xe=jr(pe,K,X)),r(Xe!=null),Xe.Qb&&(d[Oe]=Xe.qb,nt=!0),!nt)if(Q(ne),Xe.jc){Qe=ne,Nt=d;var vt=Oe,qt=Xe.pd[q(Qe)&Cn-1];r(Xe.jc),256>qt.g?(G(Qe,Qe.u+qt.g),Nt[vt]=qt.value,Qe=0):(G(Qe,Qe.u+qt.g-256),r(256<=qt.value),Qe=qt.value),Qe==0&&(nt=!0)}else Qe=Pt(Xe.G[0],Xe.H[0],ne);if(ne.h)break;if(nt||256>Qe){if(!nt)if(Xe.nd)d[Oe]=(Xe.qb|Qe<<8)>>>0;else{if(Q(ne),nt=Pt(Xe.G[1],Xe.H[1],ne),Q(ne),Nt=Pt(Xe.G[2],Xe.H[2],ne),vt=Pt(Xe.G[3],Xe.H[3],ne),ne.h)break;d[Oe]=(vt<<24|nt<<16|Qe<<8|Nt)>>>0}if(nt=!1,++Oe,++K>=j&&(K=0,++X,V!=null&&X<=H&&!(X%16)&&V(l,X),ge!=null))for(;Re<Oe;)Qe=d[Re++],ge.X[(506832829*Qe&4294967295)>>>ge.Mb]=Qe}else if(280>Qe){if(Qe=zt(Qe-256,ne),Nt=Pt(Xe.G[4],Xe.H[4],ne),Q(ne),Nt=Rt(j,Nt=zt(Nt,ne)),ne.h)break;if(Oe-m<Nt||F-Oe<Qe)break e;for(vt=0;vt<Qe;++vt)d[Oe+vt]=d[Oe+vt-Nt];for(Oe+=Qe,K+=Qe;K>=j;)K-=j,++X,V!=null&&X<=H&&!(X%16)&&V(l,X);if(r(Oe<=F),K&me&&(Xe=jr(pe,K,X)),ge!=null)for(;Re<Oe;)Qe=d[Re++],ge.X[(506832829*Qe&4294967295)>>>ge.Mb]=Qe}else{if(!(Qe<Ze))break e;for(nt=Qe-280,r(ge!=null);Re<Oe;)Qe=d[Re++],ge.X[(506832829*Qe&4294967295)>>>ge.Mb]=Qe;Qe=Oe,r(!(nt>>>(Nt=ge).Xa)),d[Qe]=Nt.X[nt],nt=!0}nt||r(ne.h==L(ne))}if(l.Pb&&ne.h&&Oe<F)r(l.m.h),l.a=5,l.m=l.wd,l.$=l.xd,0<l.s.ua&&ve(l.s.vb,l.s.Wa);else{if(ne.h)break e;V!=null&&V(l,X>H?H:X),l.a=0,l.$=Oe-m}return 1}return l.a=3,0}function si(l){r(l!=null),l.vc=null,l.yc=null,l.Ya=null;var d=l.Wa;d!=null&&(d.X=null),l.vb=null,r(l!=null)}function he(){var l=new _d;return l==null?null:(l.a=0,l.xb=hh,be("Predictor","VP8LPredictors"),be("Predictor","VP8LPredictors_C"),be("PredictorAdd","VP8LPredictorsAdd"),be("PredictorAdd","VP8LPredictorsAdd_C"),Ll=Ae,Js=_e,Jn=Ee,Mn=it,vs=Ve,ts=at,rs=Lt,U.VP8LMapColor32b=Oo,U.VP8LMapColor8b=Nl,l)}function kt(l,d,m,j,F){var H=1,V=[l],X=[d],K=j.m,ne=j.s,pe=null,Oe=0;e:for(;;){if(m)for(;H&&v(K,1);){var Re=V,je=X,Ze=j,He=1,ge=Ze.m,me=Ze.gc[Ze.ab],Xe=v(ge,2);if(Ze.Oc&1<<Xe)H=0;else{switch(Ze.Oc|=1<<Xe,me.hc=Xe,me.Ea=Re[0],me.nc=je[0],me.K=[null],++Ze.ab,r(4>=Ze.ab),Xe){case 0:case 1:me.b=v(ge,3)+2,He=kt(Be(me.Ea,me.b),Be(me.nc,me.b),0,Ze,me.K),me.K=me.K[0];break;case 3:var nt,Qe=v(ge,8)+1,Nt=16<Qe?0:4<Qe?1:2<Qe?2:3;if(Re[0]=Be(me.Ea,Nt),me.b=Nt,nt=He=kt(Qe,1,0,Ze,me.K)){var vt,qt=Qe,wt=me,ur=1<<(8>>wt.b),gr=s(ur);if(gr==null)nt=0;else{var ar=wt.K[0],ir=wt.w;for(gr[0]=wt.K[0][0],vt=1;vt<1*qt;++vt)gr[vt]=Ne(ar[ir+vt],gr[vt-1]);for(;vt<4*ur;++vt)gr[vt]=0;wt.K[0]=null,wt.K[0]=gr,nt=1}}He=nt;break;case 2:break;default:r(0)}H=He}}if(V=V[0],X=X[0],H&&v(K,1)&&!(H=1<=(Oe=v(K,4))&&11>=Oe)){j.a=3;break e}var _r;if(_r=H)t:{var wr,Kt,sn,Xn=j,on=V,Kn=X,mr=Oe,ci=m,di=Xn.m,mn=Xn.s,_n=[null],qn=1,Si=0,Gi=og[mr];r:for(;;){if(ci&&v(di,1)){var xn=v(di,3)+2,os=Be(on,xn),eo=Be(Kn,xn),Io=os*eo;if(!kt(os,eo,0,Xn,_n))break r;for(_n=_n[0],mn.xc=xn,wr=0;wr<Io;++wr){var _s=_n[wr]>>8&65535;_n[wr]=_s,_s>=qn&&(qn=_s+1)}}if(di.h)break r;for(Kt=0;5>Kt;++Kt){var Gr=dh[Kt];!Kt&&0<mr&&(Gr+=1<<mr),Si<Gr&&(Si=Gr)}var Fd=a(qn*Gi,A),vh=qn,wh=a(vh,E);if(wh==null)var Wl=null;else r(65536>=vh),Wl=wh;var qa=s(Si);if(Wl==null||qa==null||Fd==null){Xn.a=1;break r}var Ul=Fd;for(wr=sn=0;wr<qn;++wr){var Ri=Wl[wr],zo=Ri.G,Do=Ri.H,jh=0,Hl=1,Sh=0;for(Kt=0;5>Kt;++Kt){Gr=dh[Kt],zo[Kt]=Ul,Do[Kt]=sn,!Kt&&0<mr&&(Gr+=1<<mr);i:{var $l,Id=Gr,Gl=Xn,Wa=qa,Ag=Ul,Lg=sn,zd=0,ks=Gl.m,Pg=v(ks,1);if(o(Wa,0,0,Id),Pg){var Ng=v(ks,1)+1,Og=v(ks,1),Ch=v(ks,Og==0?1:8);Wa[Ch]=1,Ng==2&&(Wa[Ch=v(ks,8)]=1);var Vl=1}else{var _h=s(19),kh=v(ks,4)+4;if(19<kh){Gl.a=3;var Yl=0;break i}for($l=0;$l<kh;++$l)_h[ig[$l]]=v(ks,3);var Dd=void 0,Ua=void 0,Ah=Gl,Rg=_h,Jl=Id,Lh=Wa,Md=0,As=Ah.m,Ph=8,Nh=a(128,A);n:for(;w(Nh,0,7,Rg,19);){if(v(As,1)){var Eg=2+2*v(As,3);if((Dd=2+v(As,Eg))>Jl)break n}else Dd=Jl;for(Ua=0;Ua<Jl&&Dd--;){Q(As);var Oh=Nh[0+(127&q(As))];G(As,As.u+Oh.g);var Mo=Oh.value;if(16>Mo)Lh[Ua++]=Mo,Mo!=0&&(Ph=Mo);else{var Tg=Mo==16,Rh=Mo-16,Fg=rg[Rh],Eh=v(As,tg[Rh])+Fg;if(Ua+Eh>Jl)break n;for(var Ig=Tg?Ph:0;0<Eh--;)Lh[Ua++]=Ig}}Md=1;break n}Md||(Ah.a=3),Vl=Md}(Vl=Vl&&!ks.h)&&(zd=w(Ag,Lg,8,Wa,Id)),Vl&&zd!=0?Yl=zd:(Gl.a=3,Yl=0)}if(Yl==0)break r;if(Hl&&ng[Kt]==1&&(Hl=Ul[sn].g==0),jh+=Ul[sn].g,sn+=Yl,3>=Kt){var Ha,Bd=qa[0];for(Ha=1;Ha<Gr;++Ha)qa[Ha]>Bd&&(Bd=qa[Ha]);Sh+=Bd}}if(Ri.nd=Hl,Ri.Qb=0,Hl&&(Ri.qb=(zo[3][Do[3]+0].value<<24|zo[1][Do[1]+0].value<<16|zo[2][Do[2]+0].value)>>>0,jh==0&&256>zo[0][Do[0]+0].value&&(Ri.Qb=1,Ri.qb+=zo[0][Do[0]+0].value<<8)),Ri.jc=!Ri.Qb&&6>Sh,Ri.jc){var Xl,as=Ri;for(Xl=0;Xl<Cn;++Xl){var Ls=Xl,Ps=as.pd[Ls],Kl=as.G[0][as.H[0]+Ls];256<=Kl.value?(Ps.g=Kl.g+256,Ps.value=Kl.value):(Ps.g=0,Ps.value=0,Ls>>=hr(Kl,8,Ps),Ls>>=hr(as.G[1][as.H[1]+Ls],16,Ps),Ls>>=hr(as.G[2][as.H[2]+Ls],0,Ps),hr(as.G[3][as.H[3]+Ls],24,Ps))}}}mn.vc=_n,mn.Wb=qn,mn.Ya=Wl,mn.yc=Fd,_r=1;break t}_r=0}if(!(H=_r)){j.a=3;break e}if(0<Oe){if(ne.ua=1<<Oe,!$e(ne.Wa,Oe)){j.a=1,H=0;break e}}else ne.ua=0;var qd=j,Th=V,zg=X,Wd=qd.s,Ud=Wd.xc;if(qd.c=Th,qd.i=zg,Wd.md=Be(Th,Ud),Wd.wc=Ud==0?-1:(1<<Ud)-1,m){j.xb=pg;break e}if((pe=s(V*X))==null){j.a=1,H=0;break e}H=(H=Gn(j,pe,0,V,X,X,null))&&!K.h;break e}return H?(F!=null?F[0]=pe:(r(pe==null),r(m)),j.$=0,m||si(ne)):si(ne),H}function Et(l,d){var m=l.c*l.i,j=m+d+16*d;return r(l.c<=d),l.V=s(j),l.V==null?(l.Ta=null,l.Ua=0,l.a=1,0):(l.Ta=l.V,l.Ua=l.Ba+m+d,1)}function It(l,d){var m=l.C,j=d-m,F=l.V,H=l.Ba+l.c*m;for(r(d<=l.l.o);0<j;){var V=16<j?16:j,X=l.l.ma,K=l.l.width,ne=K*V,pe=X.ca,Oe=X.tb+K*m,Re=l.Ta,je=l.Ua;pn(l,V,F,H),Qr(Re,je,pe,Oe,ne),An(X,m,m+V,pe,Oe,K),j-=V,F+=V*l.c,m+=V}r(m==d),l.C=l.Ma=d}function pr(){this.ub=this.yd=this.td=this.Rb=0}function er(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function tr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var l=[];return function d(m,j,F){for(var H=F[j],V=0;V<H&&(m.push(F.length>j+1?[]:0),!(F.length<j+1));V++)d(m[V],j+1,F)}(l,0,[3,11]),l}()}function yr(){this.jb=s(3),this.Wc=c([4,8],Ht),this.Xc=c([4,17],Ht)}function Nr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function nr(){this.ld=this.La=this.dd=this.tc=0}function Mt(){this.Na=this.la=0}function Dt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function sr(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Xr(){this.uc=this.M=this.Nb=0,this.wa=Array(new nr),this.Y=0,this.ya=Array(new sr),this.aa=0,this.l=new Cr}function jt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function vr(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new pr,this.Kc=new er,this.ed=new Nr,this.Qa=new tr,this.Ic=this.$c=this.Aa=0,this.D=new Xr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Y),this.ia=0,this.pb=a(4,Dt),this.Pa=new yr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new jt),this.Hd=0,this.rb=Array(new Mt),this.sb=0,this.wa=Array(new nr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new sr),this.L=this.aa=0,this.gd=c([4,2],nr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Cr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function cr(){var l=new vr;return l!=null&&(l.a=0,l.sc="OK",l.cb=0,l.Xb=0,Ma||(Ma=mi)),l}function Gt(l,d,m){return l.a==0&&(l.a=d,l.sc=m,l.cb=0),0}function dr(l,d,m){return 3<=m&&l[d+0]==157&&l[d+1]==1&&l[d+2]==42}function oi(l,d){if(l==null)return 0;if(l.a=0,l.sc="OK",d==null)return Gt(l,2,"null VP8Io passed to VP8GetHeaders()");var m=d.data,j=d.w,F=d.ha;if(4>F)return Gt(l,7,"Truncated header.");var H=m[j+0]|m[j+1]<<8|m[j+2]<<16,V=l.Od;if(V.Rb=!(1&H),V.td=H>>1&7,V.yd=H>>4&1,V.ub=H>>5,3<V.td)return Gt(l,3,"Incorrect keyframe parameters.");if(!V.yd)return Gt(l,4,"Frame not displayable.");j+=3,F-=3;var X=l.Kc;if(V.Rb){if(7>F)return Gt(l,7,"cannot parse picture header");if(!dr(m,j,F))return Gt(l,3,"Bad code word");X.c=16383&(m[j+4]<<8|m[j+3]),X.Td=m[j+4]>>6,X.i=16383&(m[j+6]<<8|m[j+5]),X.Ud=m[j+6]>>6,j+=7,F-=7,l.za=X.c+15>>4,l.Ub=X.i+15>>4,d.width=X.c,d.height=X.i,d.Da=0,d.j=0,d.v=0,d.va=d.width,d.o=d.height,d.da=0,d.ib=d.width,d.hb=d.height,d.U=d.width,d.T=d.height,o((H=l.Pa).jb,0,255,H.jb.length),r((H=l.Qa)!=null),H.Cb=0,H.Bb=0,H.Fb=1,o(H.Zb,0,0,H.Zb.length),o(H.Lb,0,0,H.Lb)}if(V.ub>F)return Gt(l,7,"bad partition length");ee(H=l.m,m,j,V.ub),j+=V.ub,F-=V.ub,V.Rb&&(X.Ld=ce(H),X.Kd=ce(H)),X=l.Qa;var K,ne=l.Pa;if(r(H!=null),r(X!=null),X.Cb=ce(H),X.Cb){if(X.Bb=ce(H),ce(H)){for(X.Fb=ce(H),K=0;4>K;++K)X.Zb[K]=ce(H)?y(H,7):0;for(K=0;4>K;++K)X.Lb[K]=ce(H)?y(H,6):0}if(X.Bb)for(K=0;3>K;++K)ne.jb[K]=ce(H)?Z(H,8):255}else X.Bb=0;if(H.Ka)return Gt(l,3,"cannot parse segment header");if((X=l.ed).zd=ce(H),X.Tb=Z(H,6),X.wb=Z(H,3),X.Pc=ce(H),X.Pc&&ce(H)){for(ne=0;4>ne;++ne)ce(H)&&(X.vd[ne]=y(H,6));for(ne=0;4>ne;++ne)ce(H)&&(X.od[ne]=y(H,6))}if(l.L=X.Tb==0?0:X.zd?1:2,H.Ka)return Gt(l,3,"cannot parse filter header");var pe=F;if(F=K=j,j=K+pe,X=pe,l.Xb=(1<<Z(l.m,2))-1,pe<3*(ne=l.Xb))m=7;else{for(K+=3*ne,X-=3*ne,pe=0;pe<ne;++pe){var Oe=m[F+0]|m[F+1]<<8|m[F+2]<<16;Oe>X&&(Oe=X),ee(l.Jc[+pe],m,K,Oe),K+=Oe,X-=Oe,F+=3}ee(l.Jc[+ne],m,K,X),m=K<j?0:5}if(m!=0)return Gt(l,m,"cannot parse partitions");for(m=Z(K=l.m,7),F=ce(K)?y(K,4):0,j=ce(K)?y(K,4):0,X=ce(K)?y(K,4):0,ne=ce(K)?y(K,4):0,K=ce(K)?y(K,4):0,pe=l.Qa,Oe=0;4>Oe;++Oe){if(pe.Cb){var Re=pe.Zb[Oe];pe.Fb||(Re+=m)}else{if(0<Oe){l.pb[Oe]=l.pb[0];continue}Re=m}var je=l.pb[Oe];je.Sc[0]=Rd[ai(Re+F,127)],je.Sc[1]=Ed[ai(Re+0,127)],je.Eb[0]=2*Rd[ai(Re+j,127)],je.Eb[1]=101581*Ed[ai(Re+X,127)]>>16,8>je.Eb[1]&&(je.Eb[1]=8),je.Qc[0]=Rd[ai(Re+ne,117)],je.Qc[1]=Ed[ai(Re+K,127)],je.lc=Re+K}if(!V.Rb)return Gt(l,4,"Not a key frame.");for(ce(H),V=l.Pa,m=0;4>m;++m){for(F=0;8>F;++F)for(j=0;3>j;++j)for(X=0;11>X;++X)ne=le(H,hg[m][F][j][X])?Z(H,8):dg[m][F][j][X],V.Wc[m][F].Yb[j][X]=ne;for(F=0;17>F;++F)V.Xc[m][F]=V.Wc[m][fg[F]]}return l.kc=ce(H),l.kc&&(l.Bd=Z(H,8)),l.cb=1}function mi(l,d,m,j,F,H,V){var X=d[F].Yb[m];for(m=0;16>F;++F){if(!le(l,X[m+0]))return F;for(;!le(l,X[m+1]);)if(X=d[++F].Yb[0],m=0,F==16)return 16;var K=d[F+1].Yb;if(le(l,X[m+2])){var ne=l,pe=0;if(le(ne,(Re=X)[(Oe=m)+3]))if(le(ne,Re[Oe+6])){for(X=0,Oe=2*(pe=le(ne,Re[Oe+8]))+(Re=le(ne,Re[Oe+9+pe])),pe=0,Re=lg[Oe];Re[X];++X)pe+=pe+le(ne,Re[X]);pe+=3+(8<<Oe)}else le(ne,Re[Oe+7])?(pe=7+2*le(ne,165),pe+=le(ne,145)):pe=5+le(ne,159);else pe=le(ne,Re[Oe+4])?3+le(ne,Re[Oe+5]):2;X=K[2]}else pe=1,X=K[1];K=V+cg[F],0>(ne=l).b&&ie(ne);var Oe,Re=ne.b,je=(Oe=ne.Ca>>1)-(ne.I>>Re)>>31;--ne.b,ne.Ca+=je,ne.Ca|=1,ne.I-=(Oe+1&je)<<Re,H[K]=((pe^je)-je)*j[(0<F)+0]}return 16}function gs(l){var d=l.rb[l.sb-1];d.la=0,d.Na=0,o(l.zc,0,0,l.zc.length),l.ja=0}function xo(l,d){if(l==null)return 0;if(d==null)return Gt(l,2,"NULL VP8Io parameter in VP8Decode().");if(!l.cb&&!oi(l,d))return 0;if(r(l.cb),d.ac==null||d.ac(d)){d.ob&&(l.L=0);var m=ql[l.L];if(l.L==2?(l.yb=0,l.zb=0):(l.yb=d.v-m>>4,l.zb=d.j-m>>4,0>l.yb&&(l.yb=0),0>l.zb&&(l.zb=0)),l.Va=d.o+15+m>>4,l.Hb=d.va+15+m>>4,l.Hb>l.za&&(l.Hb=l.za),l.Va>l.Ub&&(l.Va=l.Ub),0<l.L){var j=l.ed;for(m=0;4>m;++m){var F;if(l.Qa.Cb){var H=l.Qa.Lb[m];l.Qa.Fb||(H+=j.Tb)}else H=j.Tb;for(F=0;1>=F;++F){var V=l.gd[m][F],X=H;if(j.Pc&&(X+=j.vd[0],F&&(X+=j.od[0])),0<(X=0>X?0:63<X?63:X)){var K=X;0<j.wb&&(K=4<j.wb?K>>2:K>>1)>9-j.wb&&(K=9-j.wb),1>K&&(K=1),V.dd=K,V.tc=2*X+K,V.ld=40<=X?2:15<=X?1:0}else V.tc=0;V.La=F}}}m=0}else Gt(l,6,"Frame setup failed"),m=l.a;if(m=m==0){if(m){l.$c=0,0<l.Aa||(l.Ic=kg);e:{m=l.Ic,j=4*(K=l.za);var ne=32*K,pe=K+1,Oe=0<l.L?K*(0<l.Aa?2:1):0,Re=(l.Aa==2?2:1)*K;if((V=j+832+(F=3*(16*m+ql[l.L])/2*ne)+(H=l.Fa!=null&&0<l.Fa.length?l.Kc.c*l.Kc.i:0))!=V)m=0;else{if(V>l.Vb){if(l.Vb=0,l.Ec=s(V),l.Fc=0,l.Ec==null){m=Gt(l,1,"no memory during frame initialization.");break e}l.Vb=V}V=l.Ec,X=l.Fc,l.Ac=V,l.Bc=X,X+=j,l.Gd=a(ne,jt),l.Hd=0,l.rb=a(pe+1,Mt),l.sb=1,l.wa=Oe?a(Oe,nr):null,l.Y=0,l.D.Nb=0,l.D.wa=l.wa,l.D.Y=l.Y,0<l.Aa&&(l.D.Y+=K),r(!0),l.oc=V,l.pc=X,X+=832,l.ya=a(Re,sr),l.aa=0,l.D.ya=l.ya,l.D.aa=l.aa,l.Aa==2&&(l.D.aa+=K),l.R=16*K,l.B=8*K,K=(ne=ql[l.L])*l.R,ne=ne/2*l.B,l.sa=V,l.ta=X+K,l.qa=l.sa,l.ra=l.ta+16*m*l.R+ne,l.Ha=l.qa,l.Ia=l.ra+8*m*l.B+ne,l.$c=0,X+=F,l.mb=H?V:null,l.nb=H?X:null,r(X+H<=l.Fc+l.Vb),gs(l),o(l.Ac,l.Bc,0,j),m=1}}if(m){if(d.ka=0,d.y=l.sa,d.O=l.ta,d.f=l.qa,d.N=l.ra,d.ea=l.Ha,d.Vd=l.Ia,d.fa=l.R,d.Rc=l.B,d.F=null,d.J=0,!Rl){for(m=-255;255>=m;++m)ln[255+m]=0>m?-m:m;for(m=-1020;1020>=m;++m)is[1020+m]=-128>m?-128:127<m?127:m;for(m=-112;112>=m;++m)Da[112+m]=-16>m?-16:15<m?15:m;for(m=-255;510>=m;++m)Fo[255+m]=0>m?0:255<m?255:m;Rl=1}Ro=ud,ns=cd,Fa=gl,Bn=dd,bi=ml,Kr=pl,Eo=ja,Ol=Vs,Ia=Cd,Xs=Sa,Ks=Sd,ws=So,Qs=Ca,To=_l,Zs=Cl,js=Hi,za=es,yi=jd,Oi[0]=Ui,Oi[1]=hd,Oi[2]=md,Oi[3]=xd,Oi[4]=yl,Oi[5]=wo,Oi[6]=vl,Oi[7]=ya,Oi[8]=yd,Oi[9]=bd,Ss[0]=xl,Ss[1]=pd,Ss[2]=Zi,Ss[3]=yo,Ss[4]=Ln,Ss[5]=gd,Ss[6]=bl,ss[0]=ms,ss[1]=fd,ss[2]=vd,ss[3]=va,ss[4]=Gs,ss[5]=wd,ss[6]=wa,m=1}else m=0}m&&(m=function(je,Ze){for(je.M=0;je.M<je.Va;++je.M){var He,ge=je.Jc[je.M&je.Xb],me=je.m,Xe=je;for(He=0;He<Xe.za;++He){var nt=me,Qe=Xe,Nt=Qe.Ac,vt=Qe.Bc+4*He,qt=Qe.zc,wt=Qe.ya[Qe.aa+He];if(Qe.Qa.Bb?wt.$b=le(nt,Qe.Pa.jb[0])?2+le(nt,Qe.Pa.jb[2]):le(nt,Qe.Pa.jb[1]):wt.$b=0,Qe.kc&&(wt.Ad=le(nt,Qe.Bd)),wt.Za=!le(nt,145)+0,wt.Za){var ur=wt.Ob,gr=0;for(Qe=0;4>Qe;++Qe){var ar,ir=qt[0+Qe];for(ar=0;4>ar;++ar){ir=ug[Nt[vt+ar]][ir];for(var _r=uh[le(nt,ir[0])];0<_r;)_r=uh[2*_r+le(nt,ir[_r])];ir=-_r,Nt[vt+ar]=ir}i(ur,gr,Nt,vt,4),gr+=4,qt[0+Qe]=ir}}else ir=le(nt,156)?le(nt,128)?1:3:le(nt,163)?2:0,wt.Ob[0]=ir,o(Nt,vt,ir,4),o(qt,0,ir,4);wt.Dd=le(nt,142)?le(nt,114)?le(nt,183)?1:3:2:0}if(Xe.m.Ka)return Gt(je,7,"Premature end-of-partition0 encountered.");for(;je.ja<je.za;++je.ja){if(Xe=ge,nt=(me=je).rb[me.sb-1],Nt=me.rb[me.sb+me.ja],He=me.ya[me.aa+me.ja],vt=me.kc?He.Ad:0)nt.la=Nt.la=0,He.Za||(nt.Na=Nt.Na=0),He.Hc=0,He.Gc=0,He.ia=0;else{var wr,Kt;if(nt=Nt,Nt=Xe,vt=me.Pa.Xc,qt=me.ya[me.aa+me.ja],wt=me.pb[qt.$b],Qe=qt.ad,ur=0,gr=me.rb[me.sb-1],ir=ar=0,o(Qe,ur,0,384),qt.Za)var sn=0,Xn=vt[3];else{_r=s(16);var on=nt.Na+gr.Na;if(on=Ma(Nt,vt[1],on,wt.Eb,0,_r,0),nt.Na=gr.Na=(0<on)+0,1<on)Ro(_r,0,Qe,ur);else{var Kn=_r[0]+3>>3;for(_r=0;256>_r;_r+=16)Qe[ur+_r]=Kn}sn=1,Xn=vt[0]}var mr=15&nt.la,ci=15&gr.la;for(_r=0;4>_r;++_r){var di=1&ci;for(Kn=Kt=0;4>Kn;++Kn)mr=mr>>1|(di=(on=Ma(Nt,Xn,on=di+(1&mr),wt.Sc,sn,Qe,ur))>sn)<<7,Kt=Kt<<2|(3<on?3:1<on?2:Qe[ur+0]!=0),ur+=16;mr>>=4,ci=ci>>1|di<<7,ar=(ar<<8|Kt)>>>0}for(Xn=mr,sn=ci>>4,wr=0;4>wr;wr+=2){for(Kt=0,mr=nt.la>>4+wr,ci=gr.la>>4+wr,_r=0;2>_r;++_r){for(di=1&ci,Kn=0;2>Kn;++Kn)on=di+(1&mr),mr=mr>>1|(di=0<(on=Ma(Nt,vt[2],on,wt.Qc,0,Qe,ur)))<<3,Kt=Kt<<2|(3<on?3:1<on?2:Qe[ur+0]!=0),ur+=16;mr>>=2,ci=ci>>1|di<<5}ir|=Kt<<4*wr,Xn|=mr<<4<<wr,sn|=(240&ci)<<wr}nt.la=Xn,gr.la=sn,qt.Hc=ar,qt.Gc=ir,qt.ia=43690&ir?0:wt.ia,vt=!(ar|ir)}if(0<me.L&&(me.wa[me.Y+me.ja]=me.gd[He.$b][He.Za],me.wa[me.Y+me.ja].La|=!vt),Xe.Ka)return Gt(je,7,"Premature end-of-file encountered.")}if(gs(je),me=Ze,Xe=1,He=(ge=je).D,nt=0<ge.L&&ge.M>=ge.zb&&ge.M<=ge.Va,ge.Aa==0)e:{if(He.M=ge.M,He.uc=nt,Na(ge,He),Xe=1,He=(Kt=ge.D).Nb,nt=(ir=ql[ge.L])*ge.R,Nt=ir/2*ge.B,_r=16*He*ge.R,Kn=8*He*ge.B,vt=ge.sa,qt=ge.ta-nt+_r,wt=ge.qa,Qe=ge.ra-Nt+Kn,ur=ge.Ha,gr=ge.Ia-Nt+Kn,ci=(mr=Kt.M)==0,ar=mr>=ge.Va-1,ge.Aa==2&&Na(ge,Kt),Kt.uc)for(di=(on=ge).D.M,r(on.D.uc),Kt=on.yb;Kt<on.Hb;++Kt){sn=Kt,Xn=di;var mn=(_n=(Gr=on).D).Nb;wr=Gr.R;var _n=_n.wa[_n.Y+sn],qn=Gr.sa,Si=Gr.ta+16*mn*wr+16*sn,Gi=_n.dd,xn=_n.tc;if(xn!=0)if(r(3<=xn),Gr.L==1)0<sn&&js(qn,Si,wr,xn+4),_n.La&&yi(qn,Si,wr,xn),0<Xn&&Zs(qn,Si,wr,xn+4),_n.La&&za(qn,Si,wr,xn);else{var os=Gr.B,eo=Gr.qa,Io=Gr.ra+8*mn*os+8*sn,_s=Gr.Ha,Gr=Gr.Ia+8*mn*os+8*sn;mn=_n.ld,0<sn&&(Ol(qn,Si,wr,xn+4,Gi,mn),Xs(eo,Io,_s,Gr,os,xn+4,Gi,mn)),_n.La&&(ws(qn,Si,wr,xn,Gi,mn),To(eo,Io,_s,Gr,os,xn,Gi,mn)),0<Xn&&(Eo(qn,Si,wr,xn+4,Gi,mn),Ia(eo,Io,_s,Gr,os,xn+4,Gi,mn)),_n.La&&(Ks(qn,Si,wr,xn,Gi,mn),Qs(eo,Io,_s,Gr,os,xn,Gi,mn))}}if(ge.ia&&alert("todo:DitherRow"),me.put!=null){if(Kt=16*mr,mr=16*(mr+1),ci?(me.y=ge.sa,me.O=ge.ta+_r,me.f=ge.qa,me.N=ge.ra+Kn,me.ea=ge.Ha,me.W=ge.Ia+Kn):(Kt-=ir,me.y=vt,me.O=qt,me.f=wt,me.N=Qe,me.ea=ur,me.W=gr),ar||(mr-=ir),mr>me.o&&(mr=me.o),me.F=null,me.J=null,ge.Fa!=null&&0<ge.Fa.length&&Kt<mr&&(me.J=La(ge,me,Kt,mr-Kt),me.F=ge.mb,me.F==null&&me.F.length==0)){Xe=Gt(ge,3,"Could not decode alpha data.");break e}Kt<me.j&&(ir=me.j-Kt,Kt=me.j,r(!(1&ir)),me.O+=ge.R*ir,me.N+=ge.B*(ir>>1),me.W+=ge.B*(ir>>1),me.F!=null&&(me.J+=me.width*ir)),Kt<mr&&(me.O+=me.v,me.N+=me.v>>1,me.W+=me.v>>1,me.F!=null&&(me.J+=me.v),me.ka=Kt-me.j,me.U=me.va-me.v,me.T=mr-Kt,Xe=me.put(me))}He+1!=ge.Ic||ar||(i(ge.sa,ge.ta-nt,vt,qt+16*ge.R,nt),i(ge.qa,ge.ra-Nt,wt,Qe+8*ge.B,Nt),i(ge.Ha,ge.Ia-Nt,ur,gr+8*ge.B,Nt))}if(!Xe)return Gt(je,6,"Output aborted.")}return 1}(l,d)),d.bc!=null&&d.bc(d),m&=1}return m?(l.cb=0,m):0}function Li(l,d,m,j,F){F=l[d+m+32*j]+(F>>3),l[d+m+32*j]=-256&F?0>F?0:255:F}function bo(l,d,m,j,F,H){Li(l,d,0,m,j+F),Li(l,d,1,m,j+H),Li(l,d,2,m,j-H),Li(l,d,3,m,j-F)}function Vn(l){return(20091*l>>16)+l}function xa(l,d,m,j){var F,H=0,V=s(16);for(F=0;4>F;++F){var X=l[d+0]+l[d+8],K=l[d+0]-l[d+8],ne=(35468*l[d+4]>>16)-Vn(l[d+12]),pe=Vn(l[d+4])+(35468*l[d+12]>>16);V[H+0]=X+pe,V[H+1]=K+ne,V[H+2]=K-ne,V[H+3]=X-pe,H+=4,d++}for(F=H=0;4>F;++F)X=(l=V[H+0]+4)+V[H+8],K=l-V[H+8],ne=(35468*V[H+4]>>16)-Vn(V[H+12]),Li(m,j,0,0,X+(pe=Vn(V[H+4])+(35468*V[H+12]>>16))),Li(m,j,1,0,K+ne),Li(m,j,2,0,K-ne),Li(m,j,3,0,X-pe),H++,j+=32}function pl(l,d,m,j){var F=l[d+0]+4,H=35468*l[d+4]>>16,V=Vn(l[d+4]),X=35468*l[d+1]>>16;bo(m,j,0,F+V,l=Vn(l[d+1]),X),bo(m,j,1,F+H,l,X),bo(m,j,2,F-H,l,X),bo(m,j,3,F-V,l,X)}function cd(l,d,m,j,F){xa(l,d,m,j),F&&xa(l,d+16,m,j+4)}function gl(l,d,m,j){ns(l,d+0,m,j,1),ns(l,d+32,m,j+128,1)}function dd(l,d,m,j){var F;for(l=l[d+0]+4,F=0;4>F;++F)for(d=0;4>d;++d)Li(m,j,d,F,l)}function ml(l,d,m,j){l[d+0]&&Bn(l,d+0,m,j),l[d+16]&&Bn(l,d+16,m,j+4),l[d+32]&&Bn(l,d+32,m,j+128),l[d+48]&&Bn(l,d+48,m,j+128+4)}function ud(l,d,m,j){var F,H=s(16);for(F=0;4>F;++F){var V=l[d+0+F]+l[d+12+F],X=l[d+4+F]+l[d+8+F],K=l[d+4+F]-l[d+8+F],ne=l[d+0+F]-l[d+12+F];H[0+F]=V+X,H[8+F]=V-X,H[4+F]=ne+K,H[12+F]=ne-K}for(F=0;4>F;++F)V=(l=H[0+4*F]+3)+H[3+4*F],X=H[1+4*F]+H[2+4*F],K=H[1+4*F]-H[2+4*F],ne=l-H[3+4*F],m[j+0]=V+X>>3,m[j+16]=ne+K>>3,m[j+32]=V-X>>3,m[j+48]=ne-K>>3,j+=64}function ba(l,d,m){var j,F=d-32,H=li,V=255-l[F-1];for(j=0;j<m;++j){var X,K=H,ne=V+l[d-1];for(X=0;X<m;++X)l[d+X]=K[ne+l[F+X]];d+=32}}function hd(l,d){ba(l,d,4)}function fd(l,d){ba(l,d,8)}function pd(l,d){ba(l,d,16)}function Zi(l,d){var m;for(m=0;16>m;++m)i(l,d+32*m,l,d-32,16)}function yo(l,d){var m;for(m=16;0<m;--m)o(l,d,l[d-1],16),d+=32}function vo(l,d,m){var j;for(j=0;16>j;++j)o(d,m+32*j,l,16)}function xl(l,d){var m,j=16;for(m=0;16>m;++m)j+=l[d-1+32*m]+l[d+m-32];vo(j>>5,l,d)}function Ln(l,d){var m,j=8;for(m=0;16>m;++m)j+=l[d-1+32*m];vo(j>>4,l,d)}function gd(l,d){var m,j=8;for(m=0;16>m;++m)j+=l[d+m-32];vo(j>>4,l,d)}function bl(l,d){vo(128,l,d)}function Vt(l,d,m){return l+2*d+m+2>>2}function md(l,d){var m,j=d-32;for(j=new Uint8Array([Vt(l[j-1],l[j+0],l[j+1]),Vt(l[j+0],l[j+1],l[j+2]),Vt(l[j+1],l[j+2],l[j+3]),Vt(l[j+2],l[j+3],l[j+4])]),m=0;4>m;++m)i(l,d+32*m,j,0,j.length)}function xd(l,d){var m=l[d-1],j=l[d-1+32],F=l[d-1+64],H=l[d-1+96];xe(l,d+0,16843009*Vt(l[d-1-32],m,j)),xe(l,d+32,16843009*Vt(m,j,F)),xe(l,d+64,16843009*Vt(j,F,H)),xe(l,d+96,16843009*Vt(F,H,H))}function Ui(l,d){var m,j=4;for(m=0;4>m;++m)j+=l[d+m-32]+l[d-1+32*m];for(j>>=3,m=0;4>m;++m)o(l,d+32*m,j,4)}function yl(l,d){var m=l[d-1+0],j=l[d-1+32],F=l[d-1+64],H=l[d-1-32],V=l[d+0-32],X=l[d+1-32],K=l[d+2-32],ne=l[d+3-32];l[d+0+96]=Vt(j,F,l[d-1+96]),l[d+1+96]=l[d+0+64]=Vt(m,j,F),l[d+2+96]=l[d+1+64]=l[d+0+32]=Vt(H,m,j),l[d+3+96]=l[d+2+64]=l[d+1+32]=l[d+0+0]=Vt(V,H,m),l[d+3+64]=l[d+2+32]=l[d+1+0]=Vt(X,V,H),l[d+3+32]=l[d+2+0]=Vt(K,X,V),l[d+3+0]=Vt(ne,K,X)}function vl(l,d){var m=l[d+1-32],j=l[d+2-32],F=l[d+3-32],H=l[d+4-32],V=l[d+5-32],X=l[d+6-32],K=l[d+7-32];l[d+0+0]=Vt(l[d+0-32],m,j),l[d+1+0]=l[d+0+32]=Vt(m,j,F),l[d+2+0]=l[d+1+32]=l[d+0+64]=Vt(j,F,H),l[d+3+0]=l[d+2+32]=l[d+1+64]=l[d+0+96]=Vt(F,H,V),l[d+3+32]=l[d+2+64]=l[d+1+96]=Vt(H,V,X),l[d+3+64]=l[d+2+96]=Vt(V,X,K),l[d+3+96]=Vt(X,K,K)}function wo(l,d){var m=l[d-1+0],j=l[d-1+32],F=l[d-1+64],H=l[d-1-32],V=l[d+0-32],X=l[d+1-32],K=l[d+2-32],ne=l[d+3-32];l[d+0+0]=l[d+1+64]=H+V+1>>1,l[d+1+0]=l[d+2+64]=V+X+1>>1,l[d+2+0]=l[d+3+64]=X+K+1>>1,l[d+3+0]=K+ne+1>>1,l[d+0+96]=Vt(F,j,m),l[d+0+64]=Vt(j,m,H),l[d+0+32]=l[d+1+96]=Vt(m,H,V),l[d+1+32]=l[d+2+96]=Vt(H,V,X),l[d+2+32]=l[d+3+96]=Vt(V,X,K),l[d+3+32]=Vt(X,K,ne)}function ya(l,d){var m=l[d+0-32],j=l[d+1-32],F=l[d+2-32],H=l[d+3-32],V=l[d+4-32],X=l[d+5-32],K=l[d+6-32],ne=l[d+7-32];l[d+0+0]=m+j+1>>1,l[d+1+0]=l[d+0+64]=j+F+1>>1,l[d+2+0]=l[d+1+64]=F+H+1>>1,l[d+3+0]=l[d+2+64]=H+V+1>>1,l[d+0+32]=Vt(m,j,F),l[d+1+32]=l[d+0+96]=Vt(j,F,H),l[d+2+32]=l[d+1+96]=Vt(F,H,V),l[d+3+32]=l[d+2+96]=Vt(H,V,X),l[d+3+64]=Vt(V,X,K),l[d+3+96]=Vt(X,K,ne)}function bd(l,d){var m=l[d-1+0],j=l[d-1+32],F=l[d-1+64],H=l[d-1+96];l[d+0+0]=m+j+1>>1,l[d+2+0]=l[d+0+32]=j+F+1>>1,l[d+2+32]=l[d+0+64]=F+H+1>>1,l[d+1+0]=Vt(m,j,F),l[d+3+0]=l[d+1+32]=Vt(j,F,H),l[d+3+32]=l[d+1+64]=Vt(F,H,H),l[d+3+64]=l[d+2+64]=l[d+0+96]=l[d+1+96]=l[d+2+96]=l[d+3+96]=H}function yd(l,d){var m=l[d-1+0],j=l[d-1+32],F=l[d-1+64],H=l[d-1+96],V=l[d-1-32],X=l[d+0-32],K=l[d+1-32],ne=l[d+2-32];l[d+0+0]=l[d+2+32]=m+V+1>>1,l[d+0+32]=l[d+2+64]=j+m+1>>1,l[d+0+64]=l[d+2+96]=F+j+1>>1,l[d+0+96]=H+F+1>>1,l[d+3+0]=Vt(X,K,ne),l[d+2+0]=Vt(V,X,K),l[d+1+0]=l[d+3+32]=Vt(m,V,X),l[d+1+32]=l[d+3+64]=Vt(j,m,V),l[d+1+64]=l[d+3+96]=Vt(F,j,m),l[d+1+96]=Vt(H,F,j)}function vd(l,d){var m;for(m=0;8>m;++m)i(l,d+32*m,l,d-32,8)}function va(l,d){var m;for(m=0;8>m;++m)o(l,d,l[d-1],8),d+=32}function $s(l,d,m){var j;for(j=0;8>j;++j)o(d,m+32*j,l,8)}function ms(l,d){var m,j=8;for(m=0;8>m;++m)j+=l[d+m-32]+l[d-1+32*m];$s(j>>4,l,d)}function wd(l,d){var m,j=4;for(m=0;8>m;++m)j+=l[d+m-32];$s(j>>3,l,d)}function Gs(l,d){var m,j=4;for(m=0;8>m;++m)j+=l[d-1+32*m];$s(j>>3,l,d)}function wa(l,d){$s(128,l,d)}function jo(l,d,m){var j=l[d-m],F=l[d+0],H=3*(F-j)+Ad[1020+l[d-2*m]-l[d+m]],V=El[112+(H+4>>3)];l[d-m]=li[255+j+El[112+(H+3>>3)]],l[d+0]=li[255+F-V]}function wl(l,d,m,j){var F=l[d+0],H=l[d+m];return wi[255+l[d-2*m]-l[d-m]]>j||wi[255+H-F]>j}function jl(l,d,m,j){return 4*wi[255+l[d-m]-l[d+0]]+wi[255+l[d-2*m]-l[d+m]]<=j}function Sl(l,d,m,j,F){var H=l[d-3*m],V=l[d-2*m],X=l[d-m],K=l[d+0],ne=l[d+m],pe=l[d+2*m],Oe=l[d+3*m];return 4*wi[255+X-K]+wi[255+V-ne]>j?0:wi[255+l[d-4*m]-H]<=F&&wi[255+H-V]<=F&&wi[255+V-X]<=F&&wi[255+Oe-pe]<=F&&wi[255+pe-ne]<=F&&wi[255+ne-K]<=F}function Cl(l,d,m,j){var F=2*j+1;for(j=0;16>j;++j)jl(l,d+j,m,F)&&jo(l,d+j,m)}function Hi(l,d,m,j){var F=2*j+1;for(j=0;16>j;++j)jl(l,d+j*m,1,F)&&jo(l,d+j*m,1)}function es(l,d,m,j){var F;for(F=3;0<F;--F)Cl(l,d+=4*m,m,j)}function jd(l,d,m,j){var F;for(F=3;0<F;--F)Hi(l,d+=4,m,j)}function xs(l,d,m,j,F,H,V,X){for(H=2*H+1;0<F--;){if(Sl(l,d,m,H,V))if(wl(l,d,m,X))jo(l,d,m);else{var K=l,ne=d,pe=m,Oe=K[ne-2*pe],Re=K[ne-pe],je=K[ne+0],Ze=K[ne+pe],He=K[ne+2*pe],ge=27*(Xe=Ad[1020+3*(je-Re)+Ad[1020+Oe-Ze]])+63>>7,me=18*Xe+63>>7,Xe=9*Xe+63>>7;K[ne-3*pe]=li[255+K[ne-3*pe]+Xe],K[ne-2*pe]=li[255+Oe+me],K[ne-pe]=li[255+Re+ge],K[ne+0]=li[255+je-ge],K[ne+pe]=li[255+Ze-me],K[ne+2*pe]=li[255+He-Xe]}d+=j}}function Pi(l,d,m,j,F,H,V,X){for(H=2*H+1;0<F--;){if(Sl(l,d,m,H,V))if(wl(l,d,m,X))jo(l,d,m);else{var K=l,ne=d,pe=m,Oe=K[ne-pe],Re=K[ne+0],je=K[ne+pe],Ze=El[112+((He=3*(Re-Oe))+4>>3)],He=El[112+(He+3>>3)],ge=Ze+1>>1;K[ne-2*pe]=li[255+K[ne-2*pe]+ge],K[ne-pe]=li[255+Oe+He],K[ne+0]=li[255+Re-Ze],K[ne+pe]=li[255+je-ge]}d+=j}}function ja(l,d,m,j,F,H){xs(l,d,m,1,16,j,F,H)}function Vs(l,d,m,j,F,H){xs(l,d,1,m,16,j,F,H)}function Sd(l,d,m,j,F,H){var V;for(V=3;0<V;--V)Pi(l,d+=4*m,m,1,16,j,F,H)}function So(l,d,m,j,F,H){var V;for(V=3;0<V;--V)Pi(l,d+=4,1,m,16,j,F,H)}function Cd(l,d,m,j,F,H,V,X){xs(l,d,F,1,8,H,V,X),xs(m,j,F,1,8,H,V,X)}function Sa(l,d,m,j,F,H,V,X){xs(l,d,1,F,8,H,V,X),xs(m,j,1,F,8,H,V,X)}function Ca(l,d,m,j,F,H,V,X){Pi(l,d+4*F,F,1,8,H,V,X),Pi(m,j+4*F,F,1,8,H,V,X)}function _l(l,d,m,j,F,H,V,X){Pi(l,d+4,1,F,8,H,V,X),Pi(m,j+4,1,F,8,H,V,X)}function Co(){this.ba=new Tt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new We,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function _a(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ka(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function kl(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new E,this.yc=new A}function _d(){this.xb=this.a=0,this.l=new Cr,this.ca=new Tt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new kl,this.ab=0,this.gc=a(4,ka),this.Oc=0}function _o(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Cr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ys(l,d,m,j,F,H,V){for(l=l==null?0:l[d+0],d=0;d<V;++d)F[H+d]=l+m[j+d]&255,l=F[H+d]}function Aa(l,d,m,j,F,H,V){var X;if(l==null)Ys(null,null,m,j,F,H,V);else for(X=0;X<V;++X)F[H+X]=l[d+X]+m[j+X]&255}function bs(l,d,m,j,F,H,V){if(l==null)Ys(null,null,m,j,F,H,V);else{var X,K=l[d+0],ne=K,pe=K;for(X=0;X<V;++X)ne=pe+(K=l[d+X])-ne,pe=m[j+X]+(-256&ne?0>ne?0:255:ne)&255,ne=K,F[H+X]=pe}}function La(l,d,m,j){var F=d.width,H=d.o;if(r(l!=null&&d!=null),0>m||0>=j||m+j>H)return null;if(!l.Cc){if(l.ga==null){var V;if(l.ga=new _o,(V=l.ga==null)||(V=d.width*d.o,r(l.Gb.length==0),l.Gb=s(V),l.Uc=0,l.Gb==null?V=0:(l.mb=l.Gb,l.nb=l.Uc,l.rc=null,V=1),V=!V),!V){V=l.ga;var X=l.Fa,K=l.P,ne=l.qc,pe=l.mb,Oe=l.nb,Re=K+1,je=ne-1,Ze=V.l;if(r(X!=null&&pe!=null&&d!=null),Cs[0]=null,Cs[1]=Ys,Cs[2]=Aa,Cs[3]=bs,V.ca=pe,V.tb=Oe,V.c=d.width,V.i=d.height,r(0<V.c&&0<V.i),1>=ne)d=0;else if(V.$a=X[K+0]>>0&3,V.Z=X[K+0]>>2&3,V.Lc=X[K+0]>>4&3,K=X[K+0]>>6&3,0>V.$a||1<V.$a||4<=V.Z||1<V.Lc||K)d=0;else if(Ze.put=qe,Ze.ac=yt,Ze.bc=pt,Ze.ma=V,Ze.width=d.width,Ze.height=d.height,Ze.Da=d.Da,Ze.v=d.v,Ze.va=d.va,Ze.j=d.j,Ze.o=d.o,V.$a)e:{r(V.$a==1),d=he();t:for(;;){if(d==null){d=0;break e}if(r(V!=null),V.mc=d,d.c=V.c,d.i=V.i,d.l=V.l,d.l.ma=V,d.l.width=V.c,d.l.height=V.i,d.a=0,se(d.m,X,Re,je),!kt(V.c,V.i,1,d,null)||(d.ab==1&&d.gc[0].hc==3&&Dn(d.s)?(V.ic=1,X=d.c*d.i,d.Ta=null,d.Ua=0,d.V=s(X),d.Ba=0,d.V==null?(d.a=1,d=0):d=1):(V.ic=0,d=Et(d,V.c)),!d))break t;d=1;break e}V.mc=null,d=0}else d=je>=V.c*V.i;V=!d}if(V)return null;l.ga.Lc!=1?l.Ga=0:j=H-m}r(l.ga!=null),r(m+j<=H);e:{if(d=(X=l.ga).c,H=X.l.o,X.$a==0){if(Re=l.rc,je=l.Vc,Ze=l.Fa,K=l.P+1+m*d,ne=l.mb,pe=l.nb+m*d,r(K<=l.P+l.qc),X.Z!=0)for(r(Cs[X.Z]!=null),V=0;V<j;++V)Cs[X.Z](Re,je,Ze,K,ne,pe,d),Re=ne,je=pe,pe+=d,K+=d;else for(V=0;V<j;++V)i(ne,pe,Ze,K,d),Re=ne,je=pe,pe+=d,K+=d;l.rc=Re,l.Vc=je}else{if(r(X.mc!=null),d=m+j,r((V=X.mc)!=null),r(d<=V.i),V.C>=d)d=1;else if(X.ic||Pe(),X.ic){X=V.V,Re=V.Ba,je=V.c;var He=V.i,ge=(Ze=1,K=V.$/je,ne=V.$%je,pe=V.m,Oe=V.s,V.$),me=je*He,Xe=je*d,nt=Oe.wc,Qe=ge<Xe?jr(Oe,ne,K):null;r(ge<=me),r(d<=He),r(Dn(Oe));t:for(;;){for(;!pe.h&&ge<Xe;){if(ne&nt||(Qe=jr(Oe,ne,K)),r(Qe!=null),Q(pe),256>(He=Pt(Qe.G[0],Qe.H[0],pe)))X[Re+ge]=He,++ge,++ne>=je&&(ne=0,++K<=d&&!(K%16)&&$n(V,K));else{if(!(280>He)){Ze=0;break t}He=zt(He-256,pe);var Nt,vt=Pt(Qe.G[4],Qe.H[4],pe);if(Q(pe),!(ge>=(vt=Rt(je,vt=zt(vt,pe)))&&me-ge>=He)){Ze=0;break t}for(Nt=0;Nt<He;++Nt)X[Re+ge+Nt]=X[Re+ge+Nt-vt];for(ge+=He,ne+=He;ne>=je;)ne-=je,++K<=d&&!(K%16)&&$n(V,K);ge<Xe&&ne&nt&&(Qe=jr(Oe,ne,K))}r(pe.h==L(pe))}$n(V,K>d?d:K);break t}!Ze||pe.h&&ge<me?(Ze=0,V.a=pe.h?5:3):V.$=ge,d=Ze}else d=Gn(V,V.V,V.Ba,V.c,V.i,d,It);if(!d){j=0;break e}}m+j>=H&&(l.Cc=1),j=1}if(!j)return null;if(l.Cc&&((j=l.ga)!=null&&(j.mc=null),l.ga=null,0<l.Ga))return alert("todo:WebPDequantizeLevels"),null}return l.nb+m*F}function f(l,d,m,j,F,H){for(;0<F--;){var V,X=l,K=d+(m?1:0),ne=l,pe=d+(m?0:3);for(V=0;V<j;++V){var Oe=ne[pe+4*V];Oe!=255&&(Oe*=32897,X[K+4*V+0]=X[K+4*V+0]*Oe>>23,X[K+4*V+1]=X[K+4*V+1]*Oe>>23,X[K+4*V+2]=X[K+4*V+2]*Oe>>23)}d+=H}}function I(l,d,m,j,F){for(;0<j--;){var H;for(H=0;H<m;++H){var V=l[d+2*H+0],X=15&(ne=l[d+2*H+1]),K=4369*X,ne=(240&ne|ne>>4)*K>>16;l[d+2*H+0]=(240&V|V>>4)*K>>16&240|(15&V|V<<4)*K>>16>>4&15,l[d+2*H+1]=240&ne|X}d+=F}}function oe(l,d,m,j,F,H,V,X){var K,ne,pe=255;for(ne=0;ne<F;++ne){for(K=0;K<j;++K){var Oe=l[d+K];H[V+4*K]=Oe,pe&=Oe}d+=m,V+=X}return pe!=255}function fe(l,d,m,j,F){var H;for(H=0;H<F;++H)m[j+H]=l[d+H]>>8}function Pe(){vi=f,Or=I,Rr=oe,Qr=fe}function Ge(l,d,m){U[l]=function(j,F,H,V,X,K,ne,pe,Oe,Re,je,Ze,He,ge,me,Xe,nt){var Qe,Nt=nt-1>>1,vt=X[K+0]|ne[pe+0]<<16,qt=Oe[Re+0]|je[Ze+0]<<16;r(j!=null);var wt=3*vt+qt+131074>>2;for(d(j[F+0],255&wt,wt>>16,He,ge),H!=null&&(wt=3*qt+vt+131074>>2,d(H[V+0],255&wt,wt>>16,me,Xe)),Qe=1;Qe<=Nt;++Qe){var ur=X[K+Qe]|ne[pe+Qe]<<16,gr=Oe[Re+Qe]|je[Ze+Qe]<<16,ar=vt+ur+qt+gr+524296,ir=ar+2*(ur+qt)>>3;wt=ir+vt>>1,vt=(ar=ar+2*(vt+gr)>>3)+ur>>1,d(j[F+2*Qe-1],255&wt,wt>>16,He,ge+(2*Qe-1)*m),d(j[F+2*Qe-0],255&vt,vt>>16,He,ge+(2*Qe-0)*m),H!=null&&(wt=ar+qt>>1,vt=ir+gr>>1,d(H[V+2*Qe-1],255&wt,wt>>16,me,Xe+(2*Qe-1)*m),d(H[V+2*Qe+0],255&vt,vt>>16,me,Xe+(2*Qe+0)*m)),vt=ur,qt=gr}1&nt||(wt=3*vt+qt+131074>>2,d(j[F+nt-1],255&wt,wt>>16,He,ge+(nt-1)*m),H!=null&&(wt=3*qt+vt+131074>>2,d(H[V+nt-1],255&wt,wt>>16,me,Xe+(nt-1)*m)))}}function ct(){ji[Tl]=gg,ji[Fl]=fh,ji[lh]=mg,ji[Il]=ph,ji[zl]=gh,ji[Ld]=mh,ji[ch]=xg,ji[Pd]=fh,ji[Nd]=ph,ji[Dl]=gh,ji[Od]=mh}function At(l){return l&-16384?0>l?0:255:l>>bg}function Bt(l,d){return At((19077*l>>8)+(26149*d>>8)-14234)}function Xt(l,d,m){return At((19077*l>>8)-(6419*d>>8)-(13320*m>>8)+8708)}function Yt(l,d){return At((19077*l>>8)+(33050*d>>8)-17685)}function or(l,d,m,j,F){j[F+0]=Bt(l,m),j[F+1]=Xt(l,d,m),j[F+2]=Yt(l,d)}function Dr(l,d,m,j,F){j[F+0]=Yt(l,d),j[F+1]=Xt(l,d,m),j[F+2]=Bt(l,m)}function $r(l,d,m,j,F){var H=Xt(l,d,m);d=H<<3&224|Yt(l,d)>>3,j[F+0]=248&Bt(l,m)|H>>5,j[F+1]=d}function nn(l,d,m,j,F){var H=240&Yt(l,d)|15;j[F+0]=240&Bt(l,m)|Xt(l,d,m)>>4,j[F+1]=H}function Pn(l,d,m,j,F){j[F+0]=255,or(l,d,m,j,F+1)}function gn(l,d,m,j,F){Dr(l,d,m,j,F),j[F+3]=255}function Ni(l,d,m,j,F){or(l,d,m,j,F),j[F+3]=255}function ai(l,d){return 0>l?0:l>d?d:l}function $i(l,d,m){U[l]=function(j,F,H,V,X,K,ne,pe,Oe){for(var Re=pe+(-2&Oe)*m;pe!=Re;)d(j[F+0],H[V+0],X[K+0],ne,pe),d(j[F+1],H[V+0],X[K+0],ne,pe+m),F+=2,++V,++K,pe+=2*m;1&Oe&&d(j[F+0],H[V+0],X[K+0],ne,pe)}}function Al(l,d,m){return m==0?l==0?d==0?6:5:d==0?4:0:m}function Pa(l,d,m,j,F){switch(l>>>30){case 3:ns(d,m,j,F,0);break;case 2:Kr(d,m,j,F);break;case 1:Bn(d,m,j,F)}}function Na(l,d){var m,j,F=d.M,H=d.Nb,V=l.oc,X=l.pc+40,K=l.oc,ne=l.pc+584,pe=l.oc,Oe=l.pc+600;for(m=0;16>m;++m)V[X+32*m-1]=129;for(m=0;8>m;++m)K[ne+32*m-1]=129,pe[Oe+32*m-1]=129;for(0<F?V[X-1-32]=K[ne-1-32]=pe[Oe-1-32]=129:(o(V,X-32-1,127,21),o(K,ne-32-1,127,9),o(pe,Oe-32-1,127,9)),j=0;j<l.za;++j){var Re=d.ya[d.aa+j];if(0<j){for(m=-1;16>m;++m)i(V,X+32*m-4,V,X+32*m+12,4);for(m=-1;8>m;++m)i(K,ne+32*m-4,K,ne+32*m+4,4),i(pe,Oe+32*m-4,pe,Oe+32*m+4,4)}var je=l.Gd,Ze=l.Hd+j,He=Re.ad,ge=Re.Hc;if(0<F&&(i(V,X-32,je[Ze].y,0,16),i(K,ne-32,je[Ze].f,0,8),i(pe,Oe-32,je[Ze].ea,0,8)),Re.Za){var me=V,Xe=X-32+16;for(0<F&&(j>=l.za-1?o(me,Xe,je[Ze].y[15],4):i(me,Xe,je[Ze+1].y,0,4)),m=0;4>m;m++)me[Xe+128+m]=me[Xe+256+m]=me[Xe+384+m]=me[Xe+0+m];for(m=0;16>m;++m,ge<<=2)me=V,Xe=X+bh[m],Oi[Re.Ob[m]](me,Xe),Pa(ge,He,16*+m,me,Xe)}else if(me=Al(j,F,Re.Ob[0]),Ss[me](V,X),ge!=0)for(m=0;16>m;++m,ge<<=2)Pa(ge,He,16*+m,V,X+bh[m]);for(m=Re.Gc,me=Al(j,F,Re.Dd),ss[me](K,ne),ss[me](pe,Oe),ge=He,me=K,Xe=ne,255&(Re=m>>0)&&(170&Re?Fa(ge,256,me,Xe):bi(ge,256,me,Xe)),Re=pe,ge=Oe,255&(m>>=8)&&(170&m?Fa(He,320,Re,ge):bi(He,320,Re,ge)),F<l.Ub-1&&(i(je[Ze].y,0,V,X+480,16),i(je[Ze].f,0,K,ne+224,8),i(je[Ze].ea,0,pe,Oe+224,8)),m=8*H*l.B,je=l.sa,Ze=l.ta+16*j+16*H*l.R,He=l.qa,Re=l.ra+8*j+m,ge=l.Ha,me=l.Ia+8*j+m,m=0;16>m;++m)i(je,Ze+m*l.R,V,X+32*m,16);for(m=0;8>m;++m)i(He,Re+m*l.B,K,ne+32*m,8),i(ge,me+m*l.B,pe,Oe+32*m,8)}}function ko(l,d,m,j,F,H,V,X,K){var ne=[0],pe=[0],Oe=0,Re=K!=null?K.kd:0,je=K!=null?K:new _a;if(l==null||12>m)return 7;je.data=l,je.w=d,je.ha=m,d=[d],m=[m],je.gb=[je.gb];e:{var Ze=d,He=m,ge=je.gb;if(r(l!=null),r(He!=null),r(ge!=null),ge[0]=0,12<=He[0]&&!n(l,Ze[0],"RIFF")){if(n(l,Ze[0]+8,"WEBP")){ge=3;break e}var me=De(l,Ze[0]+4);if(12>me||4294967286<me){ge=3;break e}if(Re&&me>He[0]-8){ge=7;break e}ge[0]=me,Ze[0]+=12,He[0]-=12}ge=0}if(ge!=0)return ge;for(me=0<je.gb[0],m=m[0];;){e:{var Xe=l;He=d,ge=m;var nt=ne,Qe=pe,Nt=Ze=[0];if((wt=Oe=[Oe])[0]=0,8>ge[0])ge=7;else{if(!n(Xe,He[0],"VP8X")){if(De(Xe,He[0]+4)!=10){ge=3;break e}if(18>ge[0]){ge=7;break e}var vt=De(Xe,He[0]+8),qt=1+ze(Xe,He[0]+12);if(2147483648<=qt*(Xe=1+ze(Xe,He[0]+15))){ge=3;break e}Nt!=null&&(Nt[0]=vt),nt!=null&&(nt[0]=qt),Qe!=null&&(Qe[0]=Xe),He[0]+=18,ge[0]-=18,wt[0]=1}ge=0}}if(Oe=Oe[0],Ze=Ze[0],ge!=0)return ge;if(He=!!(2&Ze),!me&&Oe)return 3;if(H!=null&&(H[0]=!!(16&Ze)),V!=null&&(V[0]=He),X!=null&&(X[0]=0),V=ne[0],Ze=pe[0],Oe&&He&&K==null){ge=0;break}if(4>m){ge=7;break}if(me&&Oe||!me&&!Oe&&!n(l,d[0],"ALPH")){m=[m],je.na=[je.na],je.P=[je.P],je.Sa=[je.Sa];e:{vt=l,ge=d,me=m;var wt=je.gb;nt=je.na,Qe=je.P,Nt=je.Sa,qt=22,r(vt!=null),r(me!=null),Xe=ge[0];var ur=me[0];for(r(nt!=null),r(Nt!=null),nt[0]=null,Qe[0]=null,Nt[0]=0;;){if(ge[0]=Xe,me[0]=ur,8>ur){ge=7;break e}var gr=De(vt,Xe+4);if(4294967286<gr){ge=3;break e}var ar=8+gr+1&-2;if(qt+=ar,0<wt&&qt>wt){ge=3;break e}if(!n(vt,Xe,"VP8 ")||!n(vt,Xe,"VP8L")){ge=0;break e}if(ur[0]<ar){ge=7;break e}n(vt,Xe,"ALPH")||(nt[0]=vt,Qe[0]=Xe+8,Nt[0]=gr),Xe+=ar,ur-=ar}}if(m=m[0],je.na=je.na[0],je.P=je.P[0],je.Sa=je.Sa[0],ge!=0)break}m=[m],je.Ja=[je.Ja],je.xa=[je.xa];e:if(wt=l,ge=d,me=m,nt=je.gb[0],Qe=je.Ja,Nt=je.xa,vt=ge[0],Xe=!n(wt,vt,"VP8 "),qt=!n(wt,vt,"VP8L"),r(wt!=null),r(me!=null),r(Qe!=null),r(Nt!=null),8>me[0])ge=7;else{if(Xe||qt){if(wt=De(wt,vt+4),12<=nt&&wt>nt-12){ge=3;break e}if(Re&&wt>me[0]-8){ge=7;break e}Qe[0]=wt,ge[0]+=8,me[0]-=8,Nt[0]=qt}else Nt[0]=5<=me[0]&&wt[vt+0]==47&&!(wt[vt+4]>>5),Qe[0]=me[0];ge=0}if(m=m[0],je.Ja=je.Ja[0],je.xa=je.xa[0],d=d[0],ge!=0)break;if(4294967286<je.Ja)return 3;if(X==null||He||(X[0]=je.xa?2:1),V=[V],Ze=[Ze],je.xa){if(5>m){ge=7;break}X=V,Re=Ze,He=H,l==null||5>m?l=0:5<=m&&l[d+0]==47&&!(l[d+4]>>5)?(me=[0],wt=[0],nt=[0],se(Qe=new C,l,d,m),lt(Qe,me,wt,nt)?(X!=null&&(X[0]=me[0]),Re!=null&&(Re[0]=wt[0]),He!=null&&(He[0]=nt[0]),l=1):l=0):l=0}else{if(10>m){ge=7;break}X=Ze,l==null||10>m||!dr(l,d+3,m-3)?l=0:(Re=l[d+0]|l[d+1]<<8|l[d+2]<<16,He=16383&(l[d+7]<<8|l[d+6]),l=16383&(l[d+9]<<8|l[d+8]),1&Re||3<(Re>>1&7)||!(Re>>4&1)||Re>>5>=je.Ja||!He||!l?l=0:(V&&(V[0]=He),X&&(X[0]=l),l=1))}if(!l||(V=V[0],Ze=Ze[0],Oe&&(ne[0]!=V||pe[0]!=Ze)))return 3;K!=null&&(K[0]=je,K.offset=d-K.w,r(4294967286>d-K.w),r(K.offset==K.ha-m));break}return ge==0||ge==7&&Oe&&K==null?(H!=null&&(H[0]|=je.na!=null&&0<je.na.length),j!=null&&(j[0]=V),F!=null&&(F[0]=Ze),0):ge}function Oa(l,d,m){var j=d.width,F=d.height,H=0,V=0,X=j,K=F;if(d.Da=l!=null&&0<l.Da,d.Da&&(X=l.cd,K=l.bd,H=l.v,V=l.j,11>m||(H&=-2,V&=-2),0>H||0>V||0>=X||0>=K||H+X>j||V+K>F))return 0;if(d.v=H,d.j=V,d.va=H+X,d.o=V+K,d.U=X,d.T=K,d.da=l!=null&&0<l.da,d.da){if(!Ce(X,K,m=[l.ib],H=[l.hb]))return 0;d.ib=m[0],d.hb=H[0]}return d.ob=l!=null&&l.ob,d.Kb=l==null||!l.Sd,d.da&&(d.ob=d.ib<3*j/4&&d.hb<3*F/4,d.Kb=0),1}function Ra(l){if(l==null)return 2;if(11>l.S){var d=l.f.RGBA;d.fb+=(l.height-1)*d.A,d.A=-d.A}else d=l.f.kb,l=l.height,d.O+=(l-1)*d.fa,d.fa=-d.fa,d.N+=(l-1>>1)*d.Ab,d.Ab=-d.Ab,d.W+=(l-1>>1)*d.Db,d.Db=-d.Db,d.F!=null&&(d.J+=(l-1)*d.lb,d.lb=-d.lb);return 0}function Ao(l,d,m,j){if(j==null||0>=l||0>=d)return 2;if(m!=null){if(m.Da){var F=m.cd,H=m.bd,V=-2&m.v,X=-2&m.j;if(0>V||0>X||0>=F||0>=H||V+F>l||X+H>d)return 2;l=F,d=H}if(m.da){if(!Ce(l,d,F=[m.ib],H=[m.hb]))return 2;l=F[0],d=H[0]}}j.width=l,j.height=d;e:{var K=j.width,ne=j.height;if(l=j.S,0>=K||0>=ne||!(l>=Tl&&13>l))l=2;else{if(0>=j.Rd&&j.sd==null){V=H=F=d=0;var pe=(X=K*yh[l])*ne;if(11>l||(H=(ne+1)/2*(d=(K+1)/2),l==12&&(V=(F=K)*ne)),(ne=s(pe+2*H+V))==null){l=1;break e}j.sd=ne,11>l?((K=j.f.RGBA).eb=ne,K.fb=0,K.A=X,K.size=pe):((K=j.f.kb).y=ne,K.O=0,K.fa=X,K.Fd=pe,K.f=ne,K.N=0+pe,K.Ab=d,K.Cd=H,K.ea=ne,K.W=0+pe+H,K.Db=d,K.Ed=H,l==12&&(K.F=ne,K.J=0+pe+2*H),K.Tc=V,K.lb=F)}if(d=1,F=j.S,H=j.width,V=j.height,F>=Tl&&13>F)if(11>F)l=j.f.RGBA,d&=(X=Math.abs(l.A))*(V-1)+H<=l.size,d&=X>=H*yh[F],d&=l.eb!=null;else{l=j.f.kb,X=(H+1)/2,pe=(V+1)/2,K=Math.abs(l.fa),ne=Math.abs(l.Ab);var Oe=Math.abs(l.Db),Re=Math.abs(l.lb),je=Re*(V-1)+H;d&=K*(V-1)+H<=l.Fd,d&=ne*(pe-1)+X<=l.Cd,d=(d&=Oe*(pe-1)+X<=l.Ed)&K>=H&ne>=X&Oe>=X,d&=l.y!=null,d&=l.f!=null,d&=l.ea!=null,F==12&&(d&=Re>=H,d&=je<=l.Tc,d&=l.F!=null)}else d=0;l=d?0:2}}return l!=0||m!=null&&m.fd&&(l=Ra(j)),l}var Cn=64,Lo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Po=24,No=32,Ea=8,Yn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ue("Predictor0","PredictorAdd0"),U.Predictor0=function(){return 4278190080},U.Predictor1=function(l){return l},U.Predictor2=function(l,d,m){return d[m+0]},U.Predictor3=function(l,d,m){return d[m+1]},U.Predictor4=function(l,d,m){return d[m-1]},U.Predictor5=function(l,d,m){return Ke(Ke(l,d[m+1]),d[m+0])},U.Predictor6=function(l,d,m){return Ke(l,d[m-1])},U.Predictor7=function(l,d,m){return Ke(l,d[m+0])},U.Predictor8=function(l,d,m){return Ke(d[m-1],d[m+0])},U.Predictor9=function(l,d,m){return Ke(d[m+0],d[m+1])},U.Predictor10=function(l,d,m){return Ke(Ke(l,d[m-1]),Ke(d[m+0],d[m+1]))},U.Predictor11=function(l,d,m){var j=d[m+0];return 0>=Se(j>>24&255,l>>24&255,(d=d[m-1])>>24&255)+Se(j>>16&255,l>>16&255,d>>16&255)+Se(j>>8&255,l>>8&255,d>>8&255)+Se(255&j,255&l,255&d)?j:l},U.Predictor12=function(l,d,m){var j=d[m+0];return(ut((l>>24&255)+(j>>24&255)-((d=d[m-1])>>24&255))<<24|ut((l>>16&255)+(j>>16&255)-(d>>16&255))<<16|ut((l>>8&255)+(j>>8&255)-(d>>8&255))<<8|ut((255&l)+(255&j)-(255&d)))>>>0},U.Predictor13=function(l,d,m){var j=d[m-1];return(Ye((l=Ke(l,d[m+0]))>>24&255,j>>24&255)<<24|Ye(l>>16&255,j>>16&255)<<16|Ye(l>>8&255,j>>8&255)<<8|Ye(l>>0&255,j>>0&255))>>>0};var kd=U.PredictorAdd0;U.PredictorAdd1=ye,ue("Predictor2","PredictorAdd2"),ue("Predictor3","PredictorAdd3"),ue("Predictor4","PredictorAdd4"),ue("Predictor5","PredictorAdd5"),ue("Predictor6","PredictorAdd6"),ue("Predictor7","PredictorAdd7"),ue("Predictor8","PredictorAdd8"),ue("Predictor9","PredictorAdd9"),ue("Predictor10","PredictorAdd10"),ue("Predictor11","PredictorAdd11"),ue("Predictor12","PredictorAdd12"),ue("Predictor13","PredictorAdd13");var Ta=U.PredictorAdd2;Fe("ColorIndexInverseTransform","MapARGB","32b",function(l){return l>>8&255},function(l){return l}),Fe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(l){return l},function(l){return l>>8&255});var Ll,xi=U.ColorIndexInverseTransform,Oo=U.MapARGB,Pl=U.VP8LColorIndexInverseTransformAlpha,Nl=U.MapAlpha,ys=U.VP8LPredictorsAdd=[];ys.length=16,(U.VP8LPredictors=[]).length=16,(U.VP8LPredictorsAdd_C=[]).length=16,(U.VP8LPredictors_C=[]).length=16;var Js,Jn,Mn,vs,ts,rs,Ro,ns,Kr,Fa,Bn,bi,Eo,Ol,Ia,Xs,Ks,ws,Qs,To,Zs,js,za,yi,vi,Or,Rr,Qr,ln=s(511),is=s(2041),Da=s(225),Fo=s(767),Rl=0,Ad=is,El=Da,li=Fo,wi=ln,Tl=0,Fl=1,lh=2,Il=3,zl=4,Ld=5,ch=6,Pd=7,Nd=8,Dl=9,Od=10,tg=[2,3,7],rg=[3,3,11],dh=[280,256,256,256,40],ng=[0,1,1,1,0],ig=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],sg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],og=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ag=8,Rd=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ed=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ma=null,lg=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],cg=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],uh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],dg=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ug=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hg=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],fg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ss=[],Oi=[],ss=[],pg=1,hh=2,Cs=[],ji=[];Ge("UpsampleRgbLinePair",or,3),Ge("UpsampleBgrLinePair",Dr,3),Ge("UpsampleRgbaLinePair",Ni,4),Ge("UpsampleBgraLinePair",gn,4),Ge("UpsampleArgbLinePair",Pn,4),Ge("UpsampleRgba4444LinePair",nn,2),Ge("UpsampleRgb565LinePair",$r,2);var gg=U.UpsampleRgbLinePair,mg=U.UpsampleBgrLinePair,fh=U.UpsampleRgbaLinePair,ph=U.UpsampleBgraLinePair,gh=U.UpsampleArgbLinePair,mh=U.UpsampleRgba4444LinePair,xg=U.UpsampleRgb565LinePair,Ml=16,Bl=1<<Ml-1,Ba=-227,Td=482,bg=6,xh=0,yg=s(256),vg=s(256),wg=s(256),jg=s(256),Sg=s(Td-Ba),Cg=s(Td-Ba);$i("YuvToRgbRow",or,3),$i("YuvToBgrRow",Dr,3),$i("YuvToRgbaRow",Ni,4),$i("YuvToBgraRow",gn,4),$i("YuvToArgbRow",Pn,4),$i("YuvToRgba4444Row",nn,2),$i("YuvToRgb565Row",$r,2);var bh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ql=[0,2,8],_g=[8,7,6,4,4,2,2,2,1,1,1,1],kg=1;this.WebPDecodeRGBA=function(l,d,m,j,F){var H=Fl,V=new Co,X=new Tt;V.ba=X,X.S=H,X.width=[X.width],X.height=[X.height];var K=X.width,ne=X.height,pe=new Le;if(pe==null||l==null)var Oe=2;else r(pe!=null),Oe=ko(l,d,m,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(Oe!=0?K=0:(K!=null&&(K[0]=pe.width[0]),ne!=null&&(ne[0]=pe.height[0]),K=1),K){X.width=X.width[0],X.height=X.height[0],j!=null&&(j[0]=X.width),F!=null&&(F[0]=X.height);e:{if(j=new Cr,(F=new _a).data=l,F.w=d,F.ha=m,F.kd=1,d=[0],r(F!=null),((l=ko(F.data,F.w,F.ha,null,null,null,d,null,F))==0||l==7)&&d[0]&&(l=4),(d=l)==0){if(r(V!=null),j.data=F.data,j.w=F.w+F.offset,j.ha=F.ha-F.offset,j.put=qe,j.ac=yt,j.bc=pt,j.ma=V,F.xa){if((l=he())==null){V=1;break e}if(function(Re,je){var Ze=[0],He=[0],ge=[0];t:for(;;){if(Re==null)return 0;if(je==null)return Re.a=2,0;if(Re.l=je,Re.a=0,se(Re.m,je.data,je.w,je.ha),!lt(Re.m,Ze,He,ge)){Re.a=3;break t}if(Re.xb=hh,je.width=Ze[0],je.height=He[0],!kt(Ze[0],He[0],1,Re,null))break t;return 1}return r(Re.a!=0),0}(l,j)){if(j=(d=Ao(j.width,j.height,V.Oa,V.ba))==0){t:{j=l;r:for(;;){if(j==null){j=0;break t}if(r(j.s.yc!=null),r(j.s.Ya!=null),r(0<j.s.Wb),r((m=j.l)!=null),r((F=m.ma)!=null),j.xb!=0){if(j.ca=F.ba,j.tb=F.tb,r(j.ca!=null),!Oa(F.Oa,m,Il)){j.a=2;break r}if(!Et(j,m.width)||m.da)break r;if((m.da||st(j.ca.S))&&Pe(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&Pe()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!$e(j.s.vb,j.s.Wa.Xa)){j.a=1;break r}j.xb=0}if(!Gn(j,j.V,j.Ba,j.c,j.i,m.o,Sr))break r;F.Dc=j.Ma,j=1;break t}r(j.a!=0),j=0}j=!j}j&&(d=l.a)}else d=l.a}else{if((l=new cr)==null){V=1;break e}if(l.Fa=F.na,l.P=F.P,l.qc=F.Sa,oi(l,j)){if((d=Ao(j.width,j.height,V.Oa,V.ba))==0){if(l.Aa=0,m=V.Oa,r((F=l)!=null),m!=null){if(0<(K=0>(K=m.Md)?0:100<K?255:255*K/100)){for(ne=pe=0;4>ne;++ne)12>(Oe=F.pb[ne]).lc&&(Oe.ia=K*_g[0>Oe.lc?0:Oe.lc]>>3),pe|=Oe.ia;pe&&(alert("todo:VP8InitRandom"),F.ia=1)}F.Ga=m.Id,100<F.Ga?F.Ga=100:0>F.Ga&&(F.Ga=0)}xo(l,j)||(d=l.a)}}else d=l.a}d==0&&V.Oa!=null&&V.Oa.fd&&(d=Ra(V.ba))}V=d}H=V!=0?null:11>H?X.f.RGBA.eb:X.f.kb.y}else H=null;return H};var yh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(U,R){for(var P="",w=0;w<4;w++)P+=String.fromCharCode(U[R++]);return P}function p(U,R){return(U[R+0]<<0|U[R+1]<<8|U[R+2]<<16)>>>0}function x(U,R){return(U[R+0]<<0|U[R+1]<<8|U[R+2]<<16|U[R+3]<<24)>>>0}new u;var b=[0],g=[0],_=[],S=new u,O=t,k=function(U,R){var P={},w=0,A=!1,T=0,E=0;if(P.frames=[],!function(q,L,G,Q){for(var ie=0;ie<Q;ie++)if(q[L+ie]!=G.charCodeAt(ie))return!0;return!1}(U,R,"RIFF",4)){for(x(U,R+=4),R+=8;R<U.length;){var ee=h(U,R),Z=x(U,R+=4);R+=4;var y=Z+(1&Z);switch(ee){case"VP8 ":case"VP8L":P.frames[w]===void 0&&(P.frames[w]={}),(v=P.frames[w]).src_off=A?E:R-8,v.src_size=T+Z+8,w++,A&&(A=!1,T=0,E=0);break;case"VP8X":(v=P.header={}).feature_flags=U[R];var se=R+4;v.canvas_width=1+p(U,se),se+=3,v.canvas_height=1+p(U,se),se+=3;break;case"ALPH":A=!0,T=y+8,E=R-8;break;case"ANIM":(v=P.header).bgcolor=x(U,R),se=R+4,v.loop_count=(Y=U)[(C=se)+0]<<0|Y[C+1]<<8,se+=2;break;case"ANMF":var W,v;(v=P.frames[w]={}).offset_x=2*p(U,R),R+=3,v.offset_y=2*p(U,R),R+=3,v.width=1+p(U,R),R+=3,v.height=1+p(U,R),R+=3,v.duration=p(U,R),R+=3,W=U[R++],v.dispose=1&W,v.blend=W>>1&1}ee!="ANMF"&&(R+=y)}var Y,C;return P}}(O,0);k.response=O,k.rgbaoutput=!0,k.dataurl=!1;var M=k.header?k.header:null,J=k.frames?k.frames:null;if(M){M.loop_counter=M.loop_count,b=[M.canvas_height],g=[M.canvas_width];for(var re=0;re<J.length&&J[re].blend!=0;re++);}var N=J[0],D=S.WebPDecodeRGBA(O,N.src_off,N.src_size,g,b);N.rgba=D,N.imgwidth=g[0],N.imgheight=b[0];for(var B=0;B<g[0]*b[0]*4;B++)_[B]=D[B];return this.width=g,this.height=b,this.data=_,this}(function(t){var r=function(){return typeof Wu=="function"},n=function(b,g,_,S){var O=4,k=a;switch(S){case t.image_compression.FAST:O=1,k=s;break;case t.image_compression.MEDIUM:O=6,k=c;break;case t.image_compression.SLOW:O=9,k=u}b=i(b,g,_,k);var M=Wu(b,{level:O});return t.__addimage__.arrayBufferToBinaryString(M)},i=function(b,g,_,S){for(var O,k,M,J=b.length/g,re=new Uint8Array(b.length+J),N=p(),D=0;D<J;D+=1){if(M=D*g,O=b.subarray(M,M+g),S)re.set(S(O,_,k),M+D);else{for(var B,U=N.length,R=[];B<U;B+=1)R[B]=N[B](O,_,k);var P=x(R.concat());re.set(R[P],M+D)}k=O}return re},o=function(b){var g=Array.apply([],b);return g.unshift(0),g},s=function(b,g){var _,S=[],O=b.length;S[0]=1;for(var k=0;k<O;k+=1)_=b[k-g]||0,S[k+1]=b[k]-_+256&255;return S},a=function(b,g,_){var S,O=[],k=b.length;O[0]=2;for(var M=0;M<k;M+=1)S=_&&_[M]||0,O[M+1]=b[M]-S+256&255;return O},c=function(b,g,_){var S,O,k=[],M=b.length;k[0]=3;for(var J=0;J<M;J+=1)S=b[J-g]||0,O=_&&_[J]||0,k[J+1]=b[J]+256-(S+O>>>1)&255;return k},u=function(b,g,_){var S,O,k,M,J=[],re=b.length;J[0]=4;for(var N=0;N<re;N+=1)S=b[N-g]||0,O=_&&_[N]||0,k=_&&_[N-g]||0,M=h(S,O,k),J[N+1]=b[N]-M+256&255;return J},h=function(b,g,_){if(b===g&&g===_)return b;var S=Math.abs(g-_),O=Math.abs(b-_),k=Math.abs(b+g-_-_);return S<=O&&S<=k?b:O<=k?g:_},p=function(){return[o,s,a,c,u]},x=function(b){var g=b.map(function(_){return _.reduce(function(S,O){return S+Math.abs(O)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(b,g,_,S){var O,k,M,J,re,N,D,B,U,R,P,w,A,T,E,ee=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(b)&&(b=new Uint8Array(b)),this.__addimage__.isArrayBufferView(b)){if(b=(M=new Sy(b)).imgData,k=M.bits,O=M.colorSpace,re=M.colors,[4,6].indexOf(M.colorType)!==-1){if(M.bits===8){U=(B=M.pixelBitlength==32?new Uint32Array(M.decodePixels().buffer):M.pixelBitlength==16?new Uint16Array(M.decodePixels().buffer):new Uint8Array(M.decodePixels().buffer)).length,P=new Uint8Array(U*M.colors),R=new Uint8Array(U);var y,se=M.pixelBitlength-M.bits;for(T=0,E=0;T<U;T++){for(A=B[T],y=0;y<se;)P[E++]=A>>>y&255,y+=M.bits;R[T]=A>>>y&255}}if(M.bits===16){U=(B=new Uint32Array(M.decodePixels().buffer)).length,P=new Uint8Array(U*(32/M.pixelBitlength)*M.colors),R=new Uint8Array(U*(32/M.pixelBitlength)),w=M.colors>1,T=0,E=0;for(var W=0;T<U;)A=B[T++],P[E++]=A>>>0&255,w&&(P[E++]=A>>>16&255,A=B[T++],P[E++]=A>>>0&255),R[W++]=A>>>16&255;k=8}S!==t.image_compression.NONE&&r()?(b=n(P,M.width*M.colors,M.colors,S),D=n(R,M.width,1,S)):(b=P,D=R,ee=void 0)}if(M.colorType===3&&(O=this.color_spaces.INDEXED,N=M.palette,M.transparency.indexed)){var v=M.transparency.indexed,Y=0;for(T=0,U=v.length;T<U;++T)Y+=v[T];if((Y/=255)===U-1&&v.indexOf(0)!==-1)J=[v.indexOf(0)];else if(Y!==U){for(B=M.decodePixels(),R=new Uint8Array(B.length),T=0,U=B.length;T<U;T++)R[T]=v[B[T]];D=n(R,M.width,1)}}var C=function(q){var L;switch(q){case t.image_compression.FAST:L=11;break;case t.image_compression.MEDIUM:L=13;break;case t.image_compression.SLOW:L=14;break;default:L=12}return L}(S);return ee===this.decode.FLATE_DECODE&&(Z="/Predictor "+C+" "),Z+="/Colors "+re+" /BitsPerComponent "+k+" /Columns "+M.width,(this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:_,data:b,index:g,filter:ee,decodeParameters:Z,transparency:J,palette:N,sMask:D,predictor:C,width:M.width,height:M.height,bitsPerComponent:k,colorSpace:O}}}})(Wt.API),function(t){t.processGIF89A=function(r,n,i,o){var s=new Cy(r),a=s.width,c=s.height,u=[];s.decodeAndBlitFrameRGBA(0,u);var h={data:u,width:a,height:c},p=new ju(100).encode(h,100);return t.processJPEG.call(this,p,n,i,o)},t.processGIF87A=t.processGIF89A}(Wt.API),Ti.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var r=0;r<t;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:o,green:i,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ti.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Uint8Array(r),this[t]()}catch(n){kr.log("bit decode error:"+n)}},Ti.prototype.bit1=function(){var t,r=Math.ceil(this.width/8),n=r%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,o=0;o<r;o++)for(var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*o*4,c=0;c<8&&8*o+c<this.width;c++){var u=this.palette[s>>7-c&1];this.data[a+4*c]=u.blue,this.data[a+4*c+1]=u.green,this.data[a+4*c+2]=u.red,this.data[a+4*c+3]=255}n!==0&&(this.pos+=4-n)}},Ti.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),r=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<t;o++){var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*o*4,c=s>>4,u=15&s,h=this.palette[c];if(this.data[a]=h.blue,this.data[a+1]=h.green,this.data[a+2]=h.red,this.data[a+3]=255,2*o+1>=this.width)break;h=this.palette[u],this.data[a+4]=h.blue,this.data[a+4+1]=h.green,this.data[a+4+2]=h.red,this.data[a+4+3]=255}r!==0&&(this.pos+=4-r)}},Ti.prototype.bit8=function(){for(var t=this.width%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*i;if(o<this.palette.length){var a=this.palette[o];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Ti.prototype.bit15=function(){for(var t=this.width%3,r=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&r)/r*255|0,c=(s>>5&r)/r*255|0,u=(s>>10&r)/r*255|0,h=s>>15?255:0,p=i*this.width*4+4*o;this.data[p]=u,this.data[p+1]=c,this.data[p+2]=a,this.data[p+3]=h}this.pos+=t}},Ti.prototype.bit16=function(){for(var t=this.width%3,r=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&r)/r*255|0,u=(a>>5&n)/n*255|0,h=(a>>11)/r*255|0,p=o*this.width*4+4*s;this.data[p]=h,this.data[p+1]=u,this.data[p+2]=c,this.data[p+3]=255}this.pos+=t}},Ti.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;this.data[a]=s,this.data[a+1]=o,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},Ti.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+4*n;this.data[c]=s,this.data[c+1]=o,this.data[c+2]=i,this.data[c+3]=a}},Ti.prototype.getData=function(){return this.data},function(t){t.processBMP=function(r,n,i,o){var s=new Ti(r,!1),a=s.width,c=s.height,u={data:s.getData(),width:a,height:c},h=new ju(100).encode(u,100);return t.processJPEG.call(this,h,n,i,o)}}(Wt.API),tp.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(r,n,i,o){var s=new tp(r),a=s.width,c=s.height,u={data:s.getData(),width:a,height:c},h=new ju(100).encode(u,100);return t.processJPEG.call(this,h,n,i,o)}}(Wt.API),Wt.API.processRGBA=function(t,r,n){for(var i=t.data,o=i.length,s=new Uint8Array(o/4*3),a=new Uint8Array(o/4),c=0,u=0,h=0;h<o;h+=4){var p=i[h],x=i[h+1],b=i[h+2],g=i[h+3];s[c++]=p,s[c++]=x,s[c++]=b,a[u++]=g}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:_,index:r,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Wt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Go=Wt.API,dc=Go.getCharWidthsArray=function(t,r){var n,i,o=(r=r||{}).font||this.internal.getFont(),s=r.fontSize||this.internal.getFontSize(),a=r.charSpace||this.internal.getCharSpace(),c=r.widths?r.widths:o.metadata.Unicode.widths,u=c.fof?c.fof:1,h=r.kerning?r.kerning:o.metadata.Unicode.kerning,p=h.fof?h.fof:1,x=r.doKerning!==!1,b=0,g=t.length,_=0,S=c[0]||u,O=[];for(n=0;n<g;n++)i=t.charCodeAt(n),typeof o.metadata.widthOfString=="function"?O.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+a*(1e3/s)||0)/1e3):(b=x&&Lr(h[i])==="object"&&!isNaN(parseInt(h[i][_],10))?h[i][_]/p:0,O.push((c[i]||S)/u+b)),_=i;return O},Kf=Go.getStringUnitWidth=function(t,r){var n=(r=r||{}).fontSize||this.internal.getFontSize(),i=r.font||this.internal.getFont(),o=r.charSpace||this.internal.getCharSpace();return Go.processArabic&&(t=Go.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,o)/n:dc.apply(this,arguments).reduce(function(s,a){return s+a},0)},Qf=function(t,r,n,i){for(var o=[],s=0,a=t.length,c=0;s!==a&&c+r[s]<n;)c+=r[s],s++;o.push(t.slice(0,s));var u=s;for(c=0;s!==a;)c+r[s]>i&&(o.push(t.slice(u,s)),c=0,u=s),c+=r[s],s++;return u!==s&&o.push(t.slice(u,s)),o},Zf=function(t,r,n){n||(n={});var i,o,s,a,c,u,h,p=[],x=[p],b=n.textIndent||0,g=0,_=0,S=t.split(" "),O=dc.apply(this,[" ",n])[0];if(u=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var k=Array(u).join(" "),M=[];S.map(function(re){(re=re.split(/\s*\n/)).length>1?M=M.concat(re.map(function(N,D){return(D&&N.length?`
`:"")+N})):M.push(re[0])}),S=M,u=Kf.apply(this,[k,n])}for(s=0,a=S.length;s<a;s++){var J=0;if(i=S[s],u&&i[0]==`
`&&(i=i.substr(1),J=1),b+g+(_=(o=dc.apply(this,[i,n])).reduce(function(re,N){return re+N},0))>r||J){if(_>r){for(c=Qf.apply(this,[i,o,r-(b+g),r]),p.push(c.shift()),p=[c.pop()];c.length;)x.push([c.shift()]);_=o.slice(i.length-(p[0]?p[0].length:0)).reduce(function(re,N){return re+N},0)}else p=[i];x.push(p),b=_+u,g=O}else p.push(i),b+=g+_,g=O}return h=u?function(re,N){return(N?k:"")+re.join(" ")}:function(re){return re.join(" ")},x.map(h)},Go.splitTextToSize=function(t,r,n){var i,o=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var x=this.internal.getFont(p.fontName,p.fontStyle);return x.metadata.Unicode?{widths:x.metadata.Unicode.widths||{0:1},kerning:x.metadata.Unicode.kerning||{}}:{font:x.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*r/o;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=n.lineIndent;var c,u,h=[];for(c=0,u=i.length;c<u;c++)h=h.concat(Zf.apply(this,[i[c],a,s]));return h},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var r="klmnopqrstuvwxyz",n={},i={},o=0;o<r.length;o++)n[r[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=r[o];var s=function(x){return"0x"+parseInt(x,10).toString(16)},a=t.__fontmetrics__.compress=function(x){var b,g,_,S,O=["{"];for(var k in x){if(b=x[k],isNaN(parseInt(k,10))?g="'"+k+"'":(k=parseInt(k,10),g=(g=s(k).slice(2)).slice(0,-1)+i[g.slice(-1)]),typeof b=="number")b<0?(_=s(b).slice(3),S="-"):(_=s(b).slice(2),S=""),_=S+_.slice(0,-1)+i[_.slice(-1)];else{if(Lr(b)!=="object")throw new Error("Don't know what to do with value type "+Lr(b)+".");_=a(b)}O.push(g+_)}return O.push("}"),O.join("")},c=t.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,g,_,S,O={},k=1,M=O,J=[],re="",N="",D=x.length-1,B=1;B<D;B+=1)(S=x[B])=="'"?b?(_=b.join(""),b=void 0):b=[]:b?b.push(S):S=="{"?(J.push([M,_]),M={},_=void 0):S=="}"?((g=J.pop())[0][g[1]]=M,_=void 0,M=g[0]):S=="-"?k=-1:_===void 0?n.hasOwnProperty(S)?(re+=n[S],_=parseInt(re,16)*k,k=1,re=""):re+=S:n.hasOwnProperty(S)?(N+=n[S],M[_]=parseInt(N,16)*k,k=1,_=void 0,N=""):N+=S;return O},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(x){var b=x.font,g=p.Unicode[b.postScriptName];g&&(b.metadata.Unicode={},b.metadata.Unicode.widths=g.widths,b.metadata.Unicode.kerning=g.kerning);var _=h.Unicode[b.postScriptName];_&&(b.metadata.Unicode.encoding=_,b.encoding=_.codePages[0])}])}(Wt.API),function(t){var r=function(n){for(var i=n.length,o=new Uint8Array(i),s=0;s<i;s++)o[s]=n.charCodeAt(s);return o};t.API.events.push(["addFont",function(n){var i=void 0,o=n.font,s=n.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(a,c){c=/^\x00\x01\x00\x00/.test(c)?r(c):r(tl(c)),a.metadata=t.API.TTFFont.open(c),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(o,i)}}])}(Wt),function(t){function r(){return($t.canvg?Promise.resolve($t.canvg):ho(()=>import("./index.es-BwU4tXPw.js"),__vite__mapDeps([0,1,2]))).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Wt.API.addSvgAsImage=function(n,i,o,s,a,c,u,h){if(isNaN(i)||isNaN(o))throw kr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw kr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var x=p.getContext("2d");x.fillStyle="#fff",x.fillRect(0,0,p.width,p.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return r().then(function(_){return _.fromString(x,n,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(b)}).then(function(){g.addImage(p.toDataURL("image/jpeg",1),i,o,s,a,u,h)})}}(),Wt.API.putTotalPages=function(t){var r,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(r,n);return this},Wt.API.viewerPreferences=function(t,r){var n;t=t||{},r=r||!1;var i,o,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(a),u=[],h=0,p=0,x=0;function b(_,S){var O,k=!1;for(O=0;O<_.length;O+=1)_[O]===S&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||r===!0){var g=c.length;for(x=0;x<g;x+=1)n[c[x]].value=n[c[x]].defaultValue,n[c[x]].explicitSet=!1}if(Lr(t)==="object"){for(o in t)if(s=t[o],b(c,o)&&s!==void 0){if(n[o].type==="boolean"&&typeof s=="boolean")n[o].value=s;else if(n[o].type==="name"&&b(n[o].valueSet,s))n[o].value=s;else if(n[o].type==="integer"&&Number.isInteger(s))n[o].value=s;else if(n[o].type==="array"){for(h=0;h<s.length;h+=1)if(i=!0,s[h].length===1&&typeof s[h][0]=="number")u.push(String(s[h]-1));else if(s[h].length>1){for(p=0;p<s[h].length;p+=1)typeof s[h][p]!="number"&&(i=!1);i===!0&&u.push([s[h][0]-1,s[h][1]-1].join(" "))}n[o].value="["+u.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,S=[];for(_ in n)n[_].explicitSet===!0&&(n[_].type==="name"?S.push("/"+_+" /"+n[_].value):S.push("/"+_+" "+n[_].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var r=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),h=s.length+a.length+c.length+o.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(o+s+a+c+u),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",r)),this}}(Wt.API),function(t){var r=t.API,n=r.pdfEscape16=function(s,a){for(var c,u=a.metadata.Unicode.widths,h=["","0","00","000","0000"],p=[""],x=0,b=s.length;x<b;++x){if(c=a.metadata.characterToGlyph(s.charCodeAt(x)),a.metadata.glyIdsUsed.push(c),a.metadata.toUnicode[c]=s.charCodeAt(x),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(a.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(h[4-c.length],c)}return p.join("")},i=function(s){var a,c,u,h,p,x,b;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],x=0,b=(c=Object.keys(s).sort(function(g,_){return g-_})).length;x<b;x++)a=c[x],u.length>=100&&(p+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(h=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),u.push("<"+a+"><"+h+">"));return u.length&&(p+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(s){(function(a){var c=a.font,u=a.out,h=a.newObject,p=a.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var x=c.metadata.Unicode.widths,b=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),g="",_=0;_<b.length;_++)g+=String.fromCharCode(b[_]);var S=h();p({data:g,addLength1:!0,objectId:S}),u("endobj");var O=h();p({data:i(c.metadata.toUnicode),addLength1:!0,objectId:O}),u("endobj");var k=h();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Xo(c.fontName)),u("/FontFile2 "+S+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var M=h();u("<<"),u("/Type /Font"),u("/BaseFont /"+Xo(c.fontName)),u("/FontDescriptor "+k+" 0 R"),u("/W "+t.API.PDFObject.convert(x)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=h(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+O+" 0 R"),u("/BaseFont /"+Xo(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+M+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]),r.events.push(["putFont",function(s){(function(a){var c=a.font,u=a.out,h=a.newObject,p=a.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var x=c.metadata.rawData,b="",g=0;g<x.length;g++)b+=String.fromCharCode(x[g]);var _=h();p({data:b,addLength1:!0,objectId:_}),u("endobj");var S=h();p({data:i(c.metadata.toUnicode),addLength1:!0,objectId:S}),u("endobj");var O=h();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+_+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+Xo(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=h();for(var k=0;k<c.metadata.hmtx.widths.length;k++)c.metadata.hmtx.widths[k]=parseInt(c.metadata.hmtx.widths[k]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Xo(c.fontName)+"/FontDescriptor "+O+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]);var o=function(s){var a,c=s.text||"",u=s.x,h=s.y,p=s.options||{},x=s.mutex||{},b=x.pdfEscape,g=x.activeFontKey,_=x.fonts,S=g,O="",k=0,M="",J=_[S].encoding;if(_[S].encoding!=="Identity-H")return{text:c,x:u,y:h,options:p,mutex:x};for(M=c,S=g,Array.isArray(c)&&(M=c[0]),k=0;k<M.length;k+=1)_[S].metadata.hasOwnProperty("cmap")&&(a=_[S].metadata.cmap.unicode.codeMap[M[k].charCodeAt(0)]),a||M[k].charCodeAt(0)<256&&_[S].metadata.hasOwnProperty("Unicode")?O+=M[k]:O+="";var re="";return parseInt(S.slice(1))<14||J==="WinAnsiEncoding"?re=b(O,S).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):J==="Identity-H"&&(re=n(O,_[S])),x.isHex=!0,{text:re,x:u,y:h,options:p,mutex:x}};r.events.push(["postProcessText",function(s){var a=s.text||"",c=[],u={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var h=0;for(h=0;h<a.length;h+=1)Array.isArray(a[h])&&a[h].length===3?c.push([o(Object.assign({},u,{text:a[h][0]})).text,a[h][1],a[h][2]]):c.push(o(Object.assign({},u,{text:a[h]})).text);s.text=c}else s.text=o(Object.assign({},u,{text:a})).text}])}(Wt),function(t){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return r.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return r.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return r.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Wt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var o,s,a,c,u,h,p,x=r,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},O=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),M=!1,J=0;this.__bidiEngine__={};var re=function(w){var A=w.charCodeAt(),T=A>>8,E=S[T];return E!==void 0?x[256*E+(255&A)]:T===252||T===253?"AL":k.test(T)?"L":T===8?"R":"N"},N=function(w){for(var A,T=0;T<w.length;T++){if((A=re(w.charAt(T)))==="L")return!1;if(A==="R")return!0}return!1},D=function(w,A,T,E){var ee,Z,y,se,W=A[E];switch(W){case"L":case"R":M=!1;break;case"N":case"AN":break;case"EN":M&&(W="AN");break;case"AL":M=!0,W="R";break;case"WS":W="N";break;case"CS":E<1||E+1>=A.length||(ee=T[E-1])!=="EN"&&ee!=="AN"||(Z=A[E+1])!=="EN"&&Z!=="AN"?W="N":M&&(Z="AN"),W=Z===ee?Z:"N";break;case"ES":W=(ee=E>0?T[E-1]:"B")==="EN"&&E+1<A.length&&A[E+1]==="EN"?"EN":"N";break;case"ET":if(E>0&&T[E-1]==="EN"){W="EN";break}if(M){W="N";break}for(y=E+1,se=A.length;y<se&&A[y]==="ET";)y++;W=y<se&&A[y]==="EN"?"EN":"N";break;case"NSM":if(a&&!c){for(se=A.length,y=E+1;y<se&&A[y]==="NSM";)y++;if(y<se){var v=w[E],Y=v>=1425&&v<=2303||v===64286;if(ee=A[y],Y&&(ee==="R"||ee==="AL")){W="R";break}}}W=E<1||(ee=A[E-1])==="B"?"N":T[E-1];break;case"B":M=!1,o=!0,W=J;break;case"S":s=!0,W="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":M=!1;break;case"BN":W="N"}return W},B=function(w,A,T){var E=w.split("");return T&&U(E,T,{hiLevel:J}),E.reverse(),A&&A.reverse(),E.join("")},U=function(w,A,T){var E,ee,Z,y,se,W=-1,v=w.length,Y=0,C=[],q=J?g:b,L=[];for(M=!1,o=!1,s=!1,ee=0;ee<v;ee++)L[ee]=re(w[ee]);for(Z=0;Z<v;Z++){if(se=Y,C[Z]=D(w,L,C,Z),E=240&(Y=q[se][_[C[Z]]]),Y&=15,A[Z]=y=q[Y][5],E>0)if(E===16){for(ee=W;ee<Z;ee++)A[ee]=1;W=-1}else W=-1;if(q[Y][6])W===-1&&(W=Z);else if(W>-1){for(ee=W;ee<Z;ee++)A[ee]=y;W=-1}L[Z]==="B"&&(A[Z]=0),T.hiLevel|=y}s&&function(G,Q,ie){for(var ce=0;ce<ie;ce++)if(G[ce]==="S"){Q[ce]=J;for(var le=ce-1;le>=0&&G[le]==="WS";le--)Q[le]=J}}(L,A,v)},R=function(w,A,T,E,ee){if(!(ee.hiLevel<w)){if(w===1&&J===1&&!o)return A.reverse(),void(T&&T.reverse());for(var Z,y,se,W,v=A.length,Y=0;Y<v;){if(E[Y]>=w){for(se=Y+1;se<v&&E[se]>=w;)se++;for(W=Y,y=se-1;W<y;W++,y--)Z=A[W],A[W]=A[y],A[y]=Z,T&&(Z=T[W],T[W]=T[y],T[y]=Z);Y=se}Y++}}},P=function(w,A,T){var E=w.split(""),ee={hiLevel:J};return T||(T=[]),U(E,T,ee),function(Z,y,se){if(se.hiLevel!==0&&p)for(var W,v=0;v<Z.length;v++)y[v]===1&&(W=O.indexOf(Z[v]))>=0&&(Z[v]=O[W+1])}(E,T,ee),R(2,E,A,T,ee),R(1,E,A,T,ee),E.join("")};return this.__bidiEngine__.doBidiReorder=function(w,A,T){if(function(ee,Z){if(Z)for(var y=0;y<ee.length;y++)Z[y]=y;c===void 0&&(c=N(ee)),h===void 0&&(h=N(ee))}(w,A),a||!u||h)if(a&&u&&c^h)J=c?1:0,w=B(w,A,T);else if(!a&&u&&h)J=c?1:0,w=P(w,A,T),w=B(w,A);else if(!a||c||u||h){if(a&&!u&&c^h)w=B(w,A),c?(J=0,w=P(w,A,T)):(J=1,w=P(w,A,T),w=B(w,A));else if(a&&c&&!u&&h)J=1,w=P(w,A,T),w=B(w,A);else if(!a&&!u&&c^h){var E=p;c?(J=1,w=P(w,A,T),J=0,p=!1,w=P(w,A,T),p=E):(J=0,w=P(w,A,T),w=B(w,A),J=1,p=!1,w=P(w,A,T),p=E,w=B(w,A))}}else J=0,w=P(w,A,T);else J=c?1:0,w=P(w,A,T);return w},this.__bidiEngine__.setOptions=function(w){w&&(a=w.isInputVisual,u=w.isOutputVisual,c=w.isInputRtl,h=w.isOutputRtl,p=w.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var o=i.text;i.x,i.y;var s=i.options||{};i.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var c=0;for(a=[],c=0;c<o.length;c+=1)Object.prototype.toString.call(o[c])==="[object Array]"?a.push([n.doBidiReorder(o[c][0]),o[c][1],o[c][2]]):a.push([n.doBidiReorder(o[c])]);i.text=a}else i.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(Wt),Wt.API.TTFFont=function(){function t(r){var n;if(this.rawData=r,n=this.contents=new qs(r),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new My(this),this.registerTTF()}return t.open=function(r){return new t(r)},t.prototype.parse=function(){return this.directory=new _y(this.contents),this.head=new Ay(this),this.name=new Ry(this),this.cmap=new Y0(this),this.toUnicode={},this.hhea=new Ly(this),this.maxp=new Ey(this),this.hmtx=new Ty(this),this.post=new Ny(this),this.os2=new Py(this),this.loca=new Dy(this),this.glyf=new Fy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var r,n,i,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var a,c,u,h;for(h=[],a=0,c=(u=this.bbox).length;a<c;a++)r=u[a],h.push(Math.round(r*this.scaleFactor));return h}.call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),(32768&(n=o>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(r){var n;return((n=this.cmap.unicode)!=null?n.codeMap[r]:void 0)||0},t.prototype.widthOfGlyph=function(r){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*n},t.prototype.widthOfString=function(r,n,i){var o,s,a,c;for(a=0,s=0,c=(r=""+r).length;0<=c?s<c:s>c;s=0<=c?++s:--s)o=r.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(r,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*r},t}();var Wi,qs=function(){function t(r){this.data=r!=null?r:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(r){return this.data[this.pos++]=r},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},t.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},t.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},t.prototype.readString=function(r){var n,i;for(i=[],n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(r){var n,i,o;for(o=[],n=0,i=r.length;0<=i?n<i:n>i;n=0<=i?++n:--n)o.push(this.writeByte(r.charCodeAt(n)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(r){return this.writeInt16(r)},t.prototype.readLongLong=function(){var r,n,i,o,s,a,c,u;return r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),u=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^s)+65536*(255^a)+256*(255^c)+(255^u)+1):72057594037927940*r+281474976710656*n+1099511627776*i+4294967296*o+16777216*s+65536*a+256*c+u},t.prototype.writeLongLong=function(r){var n,i;return n=Math.floor(r/4294967296),i=4294967295&r,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(r){return this.writeInt32(r)},t.prototype.read=function(r){var n,i;for(n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(r){var n,i,o,s;for(s=[],i=0,o=r.length;i<o;i++)n=r[i],s.push(this.writeByte(n));return s},t}(),_y=function(){var t;function r(n){var i,o,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return r.prototype.encode=function(n){var i,o,s,a,c,u,h,p,x,b,g,_,S;for(S in g=Object.keys(n).length,u=Math.log(2),x=16*Math.floor(Math.log(g)/u),a=Math.floor(x/u),p=16*g-x,(o=new qs).writeInt(this.scalarType),o.writeShort(g),o.writeShort(x),o.writeShort(a),o.writeShort(p),s=16*g,h=o.pos+s,c=null,_=[],n)for(b=n[S],o.writeString(S),o.writeInt(t(b)),o.writeInt(h),o.writeInt(b.length),_=_.concat(b),S==="head"&&(c=h),h+=b.length;h%4;)_.push(0),h++;return o.write(_),i=2981146554-t(o.data),o.pos=c+8,o.writeUInt32(i),o.data},t=function(n){var i,o,s,a;for(n=J0.call(n);n.length%4;)n.push(0);for(s=new qs(n),o=0,i=0,a=n.length;i<a;i=i+=4)o+=s.readUInt32();return 4294967295&o},r}(),ky={}.hasOwnProperty,Qi=function(t,r){for(var n in r)ky.call(r,n)&&(t[n]=r[n]);function i(){this.constructor=t}return i.prototype=r.prototype,t.prototype=new i,t.__super__=r.prototype,t};Wi=function(){function t(r){var n;this.file=r,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Ay=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Qi(r,Wi),r.prototype.tag="head",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},r.prototype.encode=function(n){var i;return(i=new qs).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},r}(),rp=function(){function t(r,n){var i,o,s,a,c,u,h,p,x,b,g,_,S,O,k,M,J;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=n+r.readInt(),x=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=r.readByte();break;case 4:for(g=r.readUInt16(),b=g/2,r.pos+=6,s=function(){var re,N;for(N=[],u=re=0;0<=b?re<b:re>b;u=0<=b?++re:--re)N.push(r.readUInt16());return N}(),r.pos+=2,S=function(){var re,N;for(N=[],u=re=0;0<=b?re<b:re>b;u=0<=b?++re:--re)N.push(r.readUInt16());return N}(),h=function(){var re,N;for(N=[],u=re=0;0<=b?re<b:re>b;u=0<=b?++re:--re)N.push(r.readUInt16());return N}(),p=function(){var re,N;for(N=[],u=re=0;0<=b?re<b:re>b;u=0<=b?++re:--re)N.push(r.readUInt16());return N}(),o=(this.length-r.pos+this.offset)/2,c=function(){var re,N;for(N=[],u=re=0;0<=o?re<o:re>o;u=0<=o?++re:--re)N.push(r.readUInt16());return N}(),u=k=0,J=s.length;k<J;u=++k)for(O=s[u],i=M=_=S[u];_<=O?M<=O:M>=O;i=_<=O?++M:--M)p[u]===0?a=i+h[u]:(a=c[p[u]/2+(i-_)-(b-u)]||0)!==0&&(a+=h[u]),this.codeMap[i]=65535&a}r.pos=x}return t.encode=function(r,n){var i,o,s,a,c,u,h,p,x,b,g,_,S,O,k,M,J,re,N,D,B,U,R,P,w,A,T,E,ee,Z,y,se,W,v,Y,C,q,L,G,Q,ie,ce,le,xe,we,ze;switch(E=new qs,a=Object.keys(r).sort(function(De,$e){return De-$e}),n){case"macroman":for(S=0,O=function(){var De=[];for(_=0;_<256;++_)De.push(0);return De}(),M={0:0},s={},ee=0,W=a.length;ee<W;ee++)M[le=r[o=a[ee]]]==null&&(M[le]=++S),s[o]={old:r[o],new:M[r[o]]},O[o]=M[r[o]];return E.writeUInt16(1),E.writeUInt16(0),E.writeUInt32(12),E.writeUInt16(0),E.writeUInt16(262),E.writeUInt16(0),E.write(O),{charMap:s,subtable:E.data,maxGlyphID:S+1};case"unicode":for(A=[],x=[],J=0,M={},i={},k=h=null,Z=0,v=a.length;Z<v;Z++)M[N=r[o=a[Z]]]==null&&(M[N]=++J),i[o]={old:N,new:M[N]},c=M[N]-o,k!=null&&c===h||(k&&x.push(k),A.push(o),h=c),k=o;for(k&&x.push(k),x.push(65535),A.push(65535),P=2*(R=A.length),U=2*Math.pow(Math.log(R)/Math.LN2,2),b=Math.log(U/2)/Math.LN2,B=2*R-U,u=[],D=[],g=[],_=y=0,Y=A.length;y<Y;_=++y){if(w=A[_],p=x[_],w===65535){u.push(0),D.push(0);break}if(w-(T=i[w].new)>=32768)for(u.push(0),D.push(2*(g.length+R-_)),o=se=w;w<=p?se<=p:se>=p;o=w<=p?++se:--se)g.push(i[o].new);else u.push(T-w),D.push(0)}for(E.writeUInt16(3),E.writeUInt16(1),E.writeUInt32(12),E.writeUInt16(4),E.writeUInt16(16+8*R+2*g.length),E.writeUInt16(0),E.writeUInt16(P),E.writeUInt16(U),E.writeUInt16(b),E.writeUInt16(B),ie=0,C=x.length;ie<C;ie++)o=x[ie],E.writeUInt16(o);for(E.writeUInt16(0),ce=0,q=A.length;ce<q;ce++)o=A[ce],E.writeUInt16(o);for(xe=0,L=u.length;xe<L;xe++)c=u[xe],E.writeUInt16(c);for(we=0,G=D.length;we<G;we++)re=D[we],E.writeUInt16(re);for(ze=0,Q=g.length;ze<Q;ze++)S=g[ze],E.writeUInt16(S);return{charMap:i,subtable:E.data,maxGlyphID:J+1}}},t}(),Y0=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Qi(r,Wi),r.prototype.tag="cmap",r.prototype.parse=function(n){var i,o,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)i=new rp(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},r.encode=function(n,i){var o,s;return i==null&&(i="macroman"),o=rp.encode(n,i),(s=new qs).writeUInt16(0),s.writeUInt16(1),o.table=s.data.concat(o.subtable),o},r}(),Ly=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Qi(r,Wi),r.prototype.tag="hhea",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},r}(),Py=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Qi(r,Wi),r.prototype.tag="OS/2",r.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(n.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},r}(),Ny=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Qi(r,Wi),r.prototype.tag="post",r.prototype.parse=function(n){var i,o,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(o=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)i=n.readByte(),s.push(this.names.push(n.readString(i)));return s;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=function(){var c,u,h;for(h=[],a=c=0,u=this.file.maxp.numGlyphs;0<=u?c<u:c>u;a=0<=u?++c:--c)h.push(n.readUInt32());return h}.call(this)}},r}(),Oy=function(t,r){this.raw=t,this.length=t.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},Ry=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Qi(r,Wi),r.prototype.tag="name",r.prototype.parse=function(n){var i,o,s,a,c,u,h,p,x,b,g;for(n.pos=this.offset,n.readShort(),i=n.readShort(),u=n.readShort(),o=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+u+n.readShort()});for(h={},a=x=0,b=o.length;x<b;a=++x)s=o[a],n.pos=s.offset,p=n.readString(s.length),c=new Oy(p,s),h[g=s.nameID]==null&&(h[g]=[]),h[s.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r}(),Ey=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Qi(r,Wi),r.prototype.tag="maxp",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},r}(),Ty=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Qi(r,Wi),r.prototype.tag="hmtx",r.prototype.parse=function(n){var i,o,s,a,c,u,h;for(n.pos=this.offset,this.metrics=[],i=0,u=this.file.hhea.numberOfMetrics;0<=u?i<u:i>u;i=0<=u?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,x;for(x=[],i=p=0;0<=s?p<s:p>s;i=0<=s?++p:--p)x.push(n.readInt16());return x}(),this.widths=function(){var p,x,b,g;for(g=[],p=0,x=(b=this.metrics).length;p<x;p++)a=b[p],g.push(a.advance);return g}.call(this),o=this.widths[this.widths.length-1],h=[],i=c=0;0<=s?c<s:c>s;i=0<=s?++c:--c)h.push(this.widths.push(o));return h},r.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},r}(),J0=[].slice,Fy=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Qi(r,Wi),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(n){var i,o,s,a,c,u,h,p,x,b;return n in this.cache?this.cache[n]:(a=this.file.loca,i=this.file.contents,o=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+o,c=(u=new qs(i.read(s))).readShort(),p=u.readShort(),b=u.readShort(),h=u.readShort(),x=u.readShort(),this.cache[n]=c===-1?new zy(u,p,b,h,x):new Iy(u,c,p,b,h,x),this.cache[n]))},r.prototype.encode=function(n,i,o){var s,a,c,u,h;for(c=[],a=[],u=0,h=i.length;u<h;u++)s=n[i[u]],a.push(c.length),s&&(c=c.concat(s.encode(o)));return a.push(c.length),{table:c,offsets:a}},r}(),Iy=function(){function t(r,n,i,o,s,a){this.raw=r,this.numberOfContours=n,this.xMin=i,this.yMin=o,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),zy=function(){function t(r,n,i,o,s){var a,c;for(this.raw=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;c=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&c;)a.pos+=1&c?4:2,128&c?a.pos+=8:64&c?a.pos+=4:8&c&&(a.pos+=2)}return t.prototype.encode=function(){var r,n,i;for(n=new qs(J0.call(this.raw.data)),r=0,i=this.glyphIDs.length;r<i;++r)n.pos=this.glyphOffsets[r];return n.data},t}(),Dy=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Qi(r,Wi),r.prototype.tag="loca",r.prototype.parse=function(n){var i,o;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?function(){var s,a;for(a=[],o=0,s=this.length;o<s;o+=2)a.push(2*n.readUInt16());return a}.call(this):function(){var s,a;for(a=[],o=0,s=this.length;o<s;o+=4)a.push(n.readUInt32());return a}.call(this)},r.prototype.indexOf=function(n){return this.offsets[n]},r.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},r.prototype.encode=function(n,i){for(var o=new Uint32Array(this.offsets.length),s=0,a=0,c=0;c<o.length;++c)if(o[c]=s,a<i.length&&i[a]==c){++a,o[c]=s;var u=this.offsets[c],h=this.offsets[c+1]-u;h>0&&(s+=h)}for(var p=new Array(4*o.length),x=0;x<o.length;++x)p[4*x+3]=255&o[x],p[4*x+2]=(65280&o[x])>>8,p[4*x+1]=(16711680&o[x])>>16,p[4*x]=(4278190080&o[x])>>24;return p},r}(),My=function(){function t(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var r,n,i,o,s;for(n in o=this.font.cmap.tables[0].codeMap,r={},s=this.subset)i=s[n],r[n]=o[i];return r},t.prototype.glyphsFor=function(r){var n,i,o,s,a,c,u;for(o={},a=0,c=r.length;a<c;a++)o[s=r[a]]=this.font.glyf.glyphFor(s);for(s in n=[],o)(i=o[s])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(s in u=this.glyphsFor(n))i=u[s],o[s]=i;return o},t.prototype.encode=function(r,n){var i,o,s,a,c,u,h,p,x,b,g,_,S,O,k;for(o in i=Y0.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(r),g={0:0},k=i.charMap)g[(u=k[o]).old]=u.new;for(_ in b=i.maxGlyphID,a)_ in g||(g[_]=b++);return p=function(M){var J,re;for(J in re={},M)re[M[J]]=J;return re}(g),x=Object.keys(p).sort(function(M,J){return M-J}),S=function(){var M,J,re;for(re=[],M=0,J=x.length;M<J;M++)c=x[M],re.push(p[c]);return re}(),s=this.font.glyf.encode(a,S,g),h=this.font.loca.encode(s.offsets,S),O={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(O["OS/2"]=this.font.os2.raw()),this.font.directory.encode(O)},t}();Wt.API.PDFObject=function(){var t;function r(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},r.convert=function(n){var i,o,s,a;if(Array.isArray(n))return"["+function(){var c,u,h;for(h=[],c=0,u=n.length;c<u;c++)i=n[c],h.push(r.convert(i));return h}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in s=["<<"],n)a=n[o],s.push("/"+o+" "+r.convert(a));return s.push(">>"),s.join(`
`)}return""+n},r}();const By=lr(rr),qy=()=>{const[t,r]=z.useState([]),[n,i]=z.useState(!0),[o,s]=z.useState(null),[a,c]=z.useState(1),[u,h]=z.useState(1),[p,x]=z.useState(""),[b,g]=z.useState([]),[_,S]=z.useState([]),[O,k]=z.useState(!1),[M,J]=z.useState(null),[re,N]=z.useState(1),[D,B]=z.useState(1),[U,R]=z.useState(0),P=localStorage.getItem("role"),w=P==="admin"||P==="moderator",[A,T]=z.useState("closed"),[E,ee]=z.useState(!1),[Z,y]=z.useState(!1),[se,W]=z.useState(!0),v=ae("white","gray.700"),Y=ae("gray.800","white"),C=ae("gray.500","gray.400"),q=ae("blue.500","blue.200"),L=ae("gray.200","gray.700"),G=Jr(),Q=ll({base:!0,md:!1}),ie=Hr(),{isOpen:ce,onOpen:le,onClose:xe}=Yr(),{isOpen:we,onOpen:ze,onClose:De}=Yr(),{isOpen:$e,onOpen:ve,onClose:te}=Yr(),[Ce,Be]=z.useState(null),[Ne,ue]=z.useState(null),{isOpen:Je,onOpen:Ke,onClose:ut}=Yr(),[Ye,Se]=z.useState(null),ye=z.useCallback(async(Ie,et)=>{i(!0),s(null);try{const Tt=If(Ie,et),Le=(async()=>{const yt=[];let qe=1,pt=1;do{const lt=await oc(qe);if(lt&&lt.data)yt.push(...lt.data),pt=lt.last_page;else break;qe++}while(qe<=pt);return yt})(),[We,tt]=await Promise.all([Tt,Le]);if(!We||!We.data){r([]);return}const rt=new Set(tt.map(yt=>yt.id)),bt=We.data.map(yt=>({...yt,is_member:rt.has(yt.id)}));r(bt),h(We.last_page||1),c(We.current_page||1)}catch(Tt){s(Tt.message||"Failed to fetch clubs."),ie({title:"Error",description:Tt.message,status:"error",duration:5e3,isClosable:!0})}finally{i(!1)}},[ie,oc,If]),Ae=z.useCallback(async()=>{k(!0),J(null);try{const Ie=[];let et=1,Tt=1;do{const Le=await oc(et);if(Le&&Le.data)Ie.push(...Le.data),Tt=Le.last_page;else break;et++}while(et<=Tt);S(Ie)}catch(Ie){J(Ie.message||"Failed to fetch your clubs."),ie({title:"Error",description:Ie.message,status:"error",duration:5e3,isClosable:!0})}finally{k(!1)}},[ie,oc]),Me=z.useCallback(async()=>{try{const Ie=await Fb();T(Ie)}catch(Ie){console.error("Failed to fetch voting status:",Ie)}finally{W(!1)}},[]);z.useEffect(()=>{Me()},[Me]),z.useEffect(()=>{if(U===0){const Ie=setTimeout(()=>{ye(a,p)},300);return()=>clearTimeout(Ie)}},[U,a,p,ye]),z.useEffect(()=>{U===1&&Ae()},[U,Ae]),z.useEffect(()=>{if(U!==1)return;const Ie=p?_.filter(tt=>tt.name.toLowerCase().includes(p.toLowerCase())):_,et=10,Tt=Math.ceil(Ie.length/et);B(Tt>0?Tt:1),re>Tt&&Tt>0&&N(1);const Le=(re-1)*et,We=Le+et;g(Ie.slice(Le,We))},[p,_,re,U]);const _e=async(Ie,et)=>{try{const Le=await(et==="join"?Pb:Nb)(Ie.id);ie({title:"Success",description:Le.message,status:"success",duration:3e3,isClosable:!0}),ye(a,p),Ae()}catch(Tt){ie({title:"Error",description:Tt.message,status:"error",duration:5e3,isClosable:!0})}},Fe=Ie=>{Be(Ie),ze()},Ee=Ie=>{Se(Ie),Ke()},it=async Ie=>{if(window.confirm(`Are you sure you want to delete ${Ie.name}? This action cannot be undone.`))try{await Db(Ie.id),ie({title:"Club deleted",status:"success",duration:3e3,isClosable:!0}),ye(a,p),Ae()}catch(et){ie({title:"Error",description:et.message,status:"error",duration:5e3,isClosable:!0})}},Ve=Ie=>{ue(Ie),ve()},at=async()=>{if(!E){ee(!0);try{const Ie=new Wt;Ie.setFontSize(16),Ie.text("Voting Results",105,20,{align:"center"});let et=30;for(const Tt of t){let Le=[];try{Le=await L0(Tt.id)}catch{Le=[]}if(Ie.setFontSize(14),Ie.text(Tt.name,14,et),et+=6,Le.length===0)Ie.setFontSize(12),Ie.text("No votes",20,et),et+=8;else{Ie.setFontSize(12);for(const We of Le){const tt=`${We.name}: ${We.votes_count} votes`;Ie.text(tt,20,et),et+=6,et>280&&(Ie.addPage(),et=20)}et+=4}et>285&&(Ie.addPage(),et=20)}Ie.save("voting_results.pdf")}catch(Ie){ie({title:"Error",description:Ie.message||"Failed to generate PDF",status:"error",duration:5e3,isClosable:!0})}finally{ee(!1)}}},Lt=async()=>{const Ie=A==="open"?"closed":"open";y(!0);try{await Ib(Ie),T(Ie),ie({title:"Success",description:`Voting system has been ${Ie==="open"?"opened":"closed"}.`,status:"success",duration:3e3,isClosable:!0})}catch(et){ie({title:"Error",description:et.message||"Failed to update voting system status",status:"error",duration:5e3,isClosable:!0})}finally{y(!1)}},Ct=(Ie,et)=>{const Tt=(A==="open"||P==="admin"||P==="moderator")&&A!=="closed";return e.jsxs(By,{bg:v,boxShadow:"md",borderRadius:"lg",overflow:"hidden",whileHover:{y:-5},transition:{duration:.2},children:[e.jsx(de,{position:"relative",children:e.jsx(Ir,{src:`https://mu-connect.me/api/storage/${Ie.logo}`,alt:`${Ie.name} logo`,height:"130px",width:"100%",objectFit:"cover"})}),e.jsxs(In,{pt:3,children:[e.jsx(ft,{size:"md",mb:2,color:Y,children:Ie.name}),e.jsx($,{fontSize:"sm",color:C,noOfLines:2,mb:3,children:Ie.description}),e.jsxs(br,{spacing:2,mb:4,children:[e.jsxs(dt,{children:[e.jsx(ni,{size:14,color:q}),e.jsxs($,{fontSize:"sm",color:Y,children:[Ie.members," members"]})]}),Ie.upcoming_event&&e.jsxs(dt,{children:[e.jsx(zn,{size:14,color:q}),e.jsxs($,{fontSize:"sm",color:Y,children:["Upcoming: ",Ie.upcoming_event.title]})]})]})]}),e.jsx(da,{pt:0,borderTop:"1px solid",borderColor:L,children:e.jsxs(ke,{justify:"space-between",align:"center",w:"full",children:[e.jsxs(dt,{spacing:1,children:[e.jsx(Te,{rightIcon:et?e.jsx(Pc,{}):e.jsx(Bh,{}),colorScheme:et?"red":"green",variant:"ghost",size:"sm",borderRadius:"full",onClick:()=>_e(Ie,et?"leave":"join"),children:et?"Leave":"Join"}),Tt&&e.jsx(Te,{variant:"ghost",colorScheme:"purple",size:"sm",borderRadius:"full",onClick:()=>Ve(Ie),isDisabled:!et,children:"Vote"})]}),(P==="admin"||P==="moderator")&&e.jsxs(un,{children:[e.jsx(hn,{as:Ut,icon:e.jsx(nl,{}),size:"sm",variant:"ghost"}),e.jsxs(fn,{children:[e.jsx(Zt,{icon:e.jsx(pi,{}),onClick:()=>Fe(Ie),children:"Create Event"}),e.jsx(Zt,{icon:e.jsx(la,{}),onClick:()=>Ee(Ie),children:"Edit Club"}),e.jsx(Zt,{icon:e.jsx($c,{}),onClick:()=>it(Ie),color:"red.500",children:"Delete Club"})]})]})]})})]},Ie.id)},be=Ie=>{R(Ie),x(""),c(1),N(1)},st=Ie=>{c(1),N(1),x(Ie.target.value)};return e.jsx(ke,{minH:"100vh",p:{base:4,md:8},bg:ae("gray.50","gray.800"),children:e.jsxs(de,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsxs(ke,{justify:"space-between",align:"center",mb:6,direction:Q?"column":"row",gap:4,children:[e.jsxs(dt,{spacing:4,children:[e.jsx(Ut,{icon:e.jsx(Hn,{}),"aria-label":"Go back",onClick:()=>G("/dashboard"),variant:"ghost",borderRadius:"full"}),e.jsx(ft,{size:"xl",color:Y,fontWeight:"800",letterSpacing:"tight",children:"Students Clubs"})]}),e.jsxs(dt,{spacing:4,align:"center",children:[A==="open"&&e.jsx(zr,{colorScheme:"green",px:2,py:1,borderRadius:"md",children:"Voting is currently open"}),w&&e.jsxs(dt,{spacing:2,children:[e.jsx(Te,{leftIcon:e.jsx(pi,{}),colorScheme:"blue",onClick:le,size:"sm",children:"Create Club"}),e.jsxs(un,{children:[e.jsx(hn,{as:Ut,icon:e.jsx(nl,{}),size:"sm",variant:"ghost"}),e.jsxs(fn,{children:[e.jsx(Zt,{icon:e.jsx(Ci,{}),onClick:at,isDisabled:E,children:"Download Results"}),e.jsx(Zt,{icon:A==="open"?e.jsx(Pc,{}):e.jsx(Bh,{}),onClick:Lt,isDisabled:Z,children:A==="open"?"Close Voting":"Open Voting"})]})]})]})]})]}),e.jsxs(Ws,{colorScheme:"blue",mb:6,variant:"soft-rounded",onChange:be,children:[e.jsxs(ke,{justify:"space-between",align:Q?"flex-start":"center",direction:Q?"column":"row",gap:4,mb:4,children:[e.jsxs(Us,{children:[e.jsx(Sn,{children:"All Clubs"}),e.jsx(Sn,{children:"My Clubs"})]}),e.jsxs(Er,{maxW:"250px",children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ha,{color:C})}),e.jsx(Ft,{placeholder:U===0?"Search all clubs...":"Search your clubs...",size:"sm",borderRadius:"full",value:p,onChange:st,_focus:{boxShadow:`0 0 0 2px ${q}`}})]})]}),e.jsxs(fo,{children:[e.jsx(kn,{children:n?e.jsx(ke,{justify:"center",py:10,children:e.jsx(qr,{size:"xl"})}):o?e.jsx($,{color:"red.500",children:o}):t.length>0?e.jsx(Zn,{columns:{base:1,md:2,lg:3},spacing:6,children:t.map(Ie=>Ct(Ie,Ie.is_member))}):e.jsx($,{children:"No clubs found."})}),e.jsx(kn,{children:O?e.jsx(ke,{justify:"center",py:10,children:e.jsx(qr,{size:"xl"})}):M?e.jsx($,{color:"red.500",children:M}):b.length>0?e.jsx(Zn,{columns:{base:1,md:2,lg:3},spacing:6,children:b.map(Ie=>Ct(Ie,!0))}):e.jsx(ke,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(de,{textAlign:"center",maxW:"400px",children:[e.jsx(ni,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),e.jsx(ft,{size:"md",mb:2,children:"You haven't joined any clubs yet"}),e.jsx($,{color:C,children:"Explore and join clubs to see them here."})]})})})]})]}),U===0&&t.length>0&&e.jsx(ke,{justify:"center",mt:8,children:e.jsxs(dt,{children:[e.jsx(Te,{onClick:()=>c(Ie=>Math.max(1,Ie-1)),isDisabled:a<=1,children:"Previous"}),e.jsxs($,{children:["Page ",a," of ",u]}),e.jsx(Te,{onClick:()=>c(Ie=>Math.min(u,Ie+1)),isDisabled:a>=u,children:"Next"})]})}),U===1&&b.length>0&&e.jsx(ke,{justify:"center",mt:8,children:e.jsxs(dt,{children:[e.jsx(Te,{onClick:()=>N(Ie=>Math.max(1,Ie-1)),isDisabled:re<=1,children:"Previous"}),e.jsxs($,{children:["Page ",re," of ",D]}),e.jsx(Te,{onClick:()=>N(Ie=>Math.min(D,Ie+1)),isDisabled:re>=D,children:"Next"})]})}),e.jsx(Mb,{isOpen:ce,onClose:xe,onClubCreated:()=>ye(1,"")}),e.jsx(Bb,{isOpen:we,onClose:De,club:Ce,onEventCreated:()=>{ye(a,p),Ae()}}),e.jsx(Wb,{isOpen:$e,onClose:te,club:Ne,userRole:P,isMember:(Ne==null?void 0:Ne.is_member)||!1}),e.jsx(qb,{isOpen:Je,onClose:ut,club:Ye,onClubUpdated:()=>{ye(a,p),Ae()}})]})})},wc=lr(rr),Wy=lr(Yo),Uy=()=>{const{id:t}=Wc(),r=Jr(),n=ae("white","gray.700");ae("gray.800","white");const i=ae("gray.500","gray.400"),o=ae("blue.500","blue.300"),s=ae("gray.50","gray.600");ll({base:!0,md:!1});const a={code:"CS 301",title:"Computer Architecture",members:142,activeGroups:8,resources:23,discussions:45,recentMaterials:[{type:"notes",title:"Midterm Prep Notes",author:"Sarah M",votes:15},{type:"video",title:"Cache Memory Explained",author:"Ali H",votes:9},{type:"notes",title:"Practice Problem Set",author:"Noura K",votes:22}],studyGroups:[{name:"Digital Logic Study Group",members:12,active:"2h ago"},{name:"Weekly Problem Solving",members:8,active:"5h ago"}]};return e.jsx(ke,{minH:"100vh",p:{base:4,md:8},bg:ae("gray.50","gray.800"),children:e.jsxs(de,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsx(Te,{leftIcon:e.jsx(Hn,{}),onClick:()=>r(-1),mb:8,variant:"ghost",color:o,borderRadius:"full",_hover:{bg:s},children:"Back to Courses"}),e.jsxs(wc,{bg:n,boxShadow:"xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsx(po,{px:{base:4,md:8},py:8,bgGradient:`linear(to-r, ${o}, blue.400)`,color:"white",children:e.jsxs(br,{spacing:4,children:[e.jsxs(dt,{spacing:3,children:[e.jsx(zr,{variant:"solid",fontSize:"lg",px:3,py:1,borderRadius:"full",children:a.code}),e.jsxs(ft,{size:"xl",children:[a.title," Community"]})]}),e.jsxs(ke,{gap:6,flexWrap:"wrap",children:[e.jsxs(dt,{spacing:2,children:[e.jsx(ht,{as:ni,boxSize:5}),e.jsxs($,{fontWeight:"500",children:[a.members," Members"]})]}),e.jsxs(dt,{spacing:2,children:[e.jsx(ht,{as:zs,boxSize:5}),e.jsxs($,{fontWeight:"500",children:[a.activeGroups," Active Groups"]})]}),e.jsxs(dt,{spacing:2,children:[e.jsx(ht,{as:Au,boxSize:5}),e.jsxs($,{fontWeight:"500",children:[a.discussions," Discussions"]})]})]})]})}),e.jsx(In,{px:{base:4,md:8},py:8,children:e.jsxs(Ws,{variant:"enclosed-colored",colorScheme:"blue",children:[e.jsxs(Us,{children:[e.jsxs(Sn,{_selected:{color:"white",bg:o},borderRadius:"md",children:["Resources (",a.resources,")"]}),e.jsxs(Sn,{_selected:{color:"white",bg:o},borderRadius:"md",children:["Study Groups (",a.activeGroups,")"]}),e.jsxs(Sn,{_selected:{color:"white",bg:o},borderRadius:"md",children:["Discussions (",a.discussions,")"]})]}),e.jsxs(fo,{mt:6,children:[e.jsx(kn,{p:0,children:e.jsxs(br,{spacing:6,children:[e.jsx(Te,{leftIcon:e.jsx(pi,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Share New Material"}),e.jsx(fr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:6,children:a.recentMaterials.map((c,u)=>e.jsx(wc,{variant:"outline",whileHover:{y:-5},transition:{duration:.2},cursor:"pointer",onClick:()=>r(`/courses/${t}/resource/${c.id}`),children:e.jsxs(In,{children:[e.jsxs(ke,{align:"center",mb:3,children:[e.jsx(ht,{as:c.type==="notes"?Un:Qu,boxSize:6,color:o,mr:3}),e.jsx($,{fontWeight:"700",fontSize:"lg",children:c.title})]}),e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsxs(ke,{align:"center",children:[e.jsx(Fr,{size:"sm",name:c.author,mr:2}),e.jsx($,{fontSize:"sm",color:i,children:c.author})]}),e.jsxs(zr,{colorScheme:"green",px:3,py:1,borderRadius:"full",display:"flex",alignItems:"center",children:[e.jsx(ht,{as:Lu,mr:1})," ",c.votes]})]})]})},u))})]})}),e.jsx(kn,{p:0,children:e.jsxs(br,{spacing:6,children:[e.jsx(Te,{leftIcon:e.jsx(pi,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Create New Group"}),e.jsx(Cu,{spacing:4,children:a.studyGroups.map((c,u)=>e.jsx(Wy,{p:4,borderWidth:"1px",borderRadius:"lg",_hover:{borderColor:o},whileHover:{x:5},transition:{duration:.2},children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsxs(de,{flex:1,children:[e.jsx($,{fontWeight:"700",mb:1,children:c.name}),e.jsxs(dt,{spacing:2,children:[e.jsx(ht,{as:fs,color:i,boxSize:4}),e.jsxs($,{fontSize:"sm",color:i,children:["Active ",c.active]})]})]}),e.jsxs(dt,{spacing:2,children:[e.jsx(Gg,{size:"sm",max:4,children:[...Array(c.members)].map((h,p)=>e.jsx(Fr,{name:`Member ${p+1}`,src:`https://i.pravatar.cc/150?img=${p}`},p))}),e.jsx($,{color:i,children:c.members})]})]})},u))})]})}),e.jsx(kn,{p:0,children:e.jsxs(br,{spacing:6,children:[e.jsx(Te,{leftIcon:e.jsx(pi,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Start New Discussion"}),[1,2,3].map(c=>e.jsx(wc,{variant:"outline",whileHover:{x:5},transition:{duration:.2},children:e.jsxs(In,{children:[e.jsxs(ke,{align:"center",mb:2,children:[e.jsx(Fr,{size:"sm",name:"Omar K",mr:3}),e.jsxs(de,{flex:1,children:[e.jsx($,{fontWeight:"700",children:"Understanding Pipeline Hazards"}),e.jsxs(dt,{mt:1,spacing:2,children:[e.jsx(Qn,{colorScheme:"blue",size:"sm",children:"Help Needed"}),e.jsx(Qn,{colorScheme:"purple",size:"sm",children:"CS 301"})]})]})]}),e.jsx($,{color:i,noOfLines:2,mb:4,children:"Can someone explain the different types of pipeline hazards? I'm having trouble with this concept..."}),e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsxs(dt,{spacing:4,children:[e.jsx(Te,{variant:"ghost",size:"sm",leftIcon:e.jsx(Lu,{}),children:"24 Helpful"}),e.jsx(Te,{variant:"ghost",size:"sm",leftIcon:e.jsx(Ju,{}),children:"5 Answers"})]}),e.jsx($,{fontSize:"sm",color:i,children:"3h ago"})]})]})},c))]})})]})]})}),e.jsx(da,{px:{base:4,md:8},py:6,borderTopWidth:"1px",children:e.jsxs(br,{w:"full",spacing:4,children:[e.jsx($,{fontWeight:"700",fontSize:"xl",children:"Community Actions"}),e.jsxs(fr,{templateColumns:{base:"1fr",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:4,children:[e.jsx(uc,{icon:fa,title:"Share Community",description:"Invite classmates to join"}),e.jsx(uc,{icon:Au,title:"Discussions",description:"Browse all conversations"}),e.jsx(uc,{icon:ni,title:"Members",description:"Connect with peers"}),e.jsx(uc,{icon:Uc,title:"Resources",description:"View all materials"})]})]})})]})]})})},uc=({icon:t,title:r,description:n})=>(ae("white","gray.700"),ae("gray.50","gray.600"),e.jsx(wc,{p:4,variant:"outline",whileHover:{scale:1.02},transition:{duration:.2},cursor:"pointer",children:e.jsxs(br,{spacing:3,children:[e.jsx(ht,{as:t,boxSize:6,color:"blue.500"}),e.jsx($,{fontWeight:"700",children:r}),e.jsx($,{fontSize:"sm",color:"gray.500",children:n})]})})),hc=async(t={})=>(await gt.get("/study-groups",{params:t})).data,Hy=async t=>(await gt.post("/study-groups",t)).data,$y=async t=>(await gt.post(`/study-groups/${t}/join`)).data,Gy=async t=>(await gt.post(`/study-groups/${t}/leave`)).data,Su=async(t={})=>(await gt.get("/study-groups/my-groups",{params:t})).data,Vy=async(t,r)=>(await gt.put(`/study-groups/${t}`,r)).data,Yy=async t=>(await gt.delete(`/study-groups/${t}`)).data,Jy=lr(rr),Xy=({group:t,onJoinLeave:r,onEdit:n,onDelete:i,currentUser:o})=>{const s=ae("white","gray.700"),a=ae("gray.800","white"),c=ae("gray.500","gray.400"),u=ae("gray.100","gray.600"),h=ae("gray.200","gray.700"),p=Hr(),x=o&&t.creator&&o.id===t.creator.id,b=()=>{const g=`${window.location.origin}/study-groups/${t.id}`;navigator.share?navigator.share({title:`Join "${t.name}" Study Group`,text:`Join our study group for ${t.course}`,url:g}).catch(()=>{navigator.clipboard.writeText(g),p({title:"Link copied to clipboard",status:"success",duration:2e3})}):(navigator.clipboard.writeText(g),p({title:"Group link copied to clipboard",status:"success",duration:2e3}))};return e.jsxs(Jy,{bg:s,boxShadow:"md",borderRadius:"lg",overflow:"hidden",whileHover:{y:-5},transition:{duration:.2},children:[e.jsx(po,{children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(ft,{size:"md",color:a,children:t.name||"Untitled Group"}),e.jsx(Qn,{colorScheme:"blue",children:t.course||"Unknown Course"})]})}),e.jsxs(In,{children:[e.jsx($,{color:a,mb:3,noOfLines:2,children:t.description}),e.jsx(dt,{spacing:2,mb:4,flexWrap:"wrap",children:(t.tags||[]).map((g,_)=>e.jsx(Qn,{size:"sm",colorScheme:"gray",borderRadius:"full",children:g},_))}),e.jsx(an,{my:4,borderColor:h}),e.jsxs(br,{spacing:3,children:[e.jsxs(ke,{align:"center",color:c,children:[e.jsx(ni,{style:{marginRight:"8px"}}),e.jsxs($,{children:[t.members||0," / ",t.capacity||15," Members"]})]}),e.jsxs(ke,{align:"center",color:c,children:[e.jsx(fs,{style:{marginRight:"8px"}}),e.jsxs($,{children:["Session: ",t.formattedTime||"TBD"]})]}),e.jsxs(ke,{align:"center",color:c,children:[e.jsx(Ko,{style:{marginRight:"8px"}}),e.jsx($,{noOfLines:1,children:t.location||"TBD"})]})]})]}),e.jsx(da,{pt:0,borderTop:"1px solid",borderColor:h,children:e.jsxs(ke,{justify:"space-between",align:"center",w:"full",children:[e.jsxs(un,{children:[e.jsx(hn,{as:Ut,"aria-label":"Options",icon:e.jsx(bp,{}),variant:"ghost",size:"sm",borderRadius:"full",_hover:{bg:u}}),e.jsxs(fn,{children:[x&&e.jsxs(e.Fragment,{children:[e.jsx(Zt,{icon:e.jsx(la,{}),onClick:()=>n&&n(t),children:"Edit Group"}),e.jsx(Zt,{icon:e.jsx(dl,{}),onClick:()=>i&&i(t),color:"red.500",_hover:{bg:"red.50"},children:"Delete Group"})]}),e.jsx(Zt,{icon:e.jsx(fa,{}),onClick:b,children:"Share Group Link"})]})]}),e.jsx(Te,{colorScheme:t.isJoined?"red":"blue",variant:t.isJoined?"outline":"solid",size:"sm",borderRadius:"full",onClick:()=>r(t.id),leftIcon:t.isJoined?void 0:e.jsx(pi,{}),children:t.isJoined?"Leave Group":"Join Group"})]})})]})},Ky=({type:t="filter",title:r,message:n})=>{const i=ae("gray.500","gray.400"),o={filter:"No study groups found",myGroups:"You haven't joined any study groups yet"},s={filter:"Try changing your search terms or filters",myGroups:"Join a study group to collaborate with others and improve your learning"},a=r||o[t],c=n||s[t];return e.jsx(ke,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(de,{textAlign:"center",maxW:"400px",children:[t==="filter"?e.jsx(Uc,{size:50,style:{margin:"0 auto 20px",opacity:.3}}):e.jsx(ni,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),e.jsx(ft,{size:"md",mb:2,children:a}),e.jsx($,{color:i,mb:6,children:c})]})})},Qy=({groups:t,onJoinLeave:r,onEdit:n,onDelete:i,currentUser:o,emptyStateType:s})=>t.length===0?e.jsx(Ky,{type:s}):e.jsx(Zn,{columns:{base:1,md:2},spacing:6,children:t.map(a=>e.jsx(Xy,{group:a,onJoinLeave:r,onEdit:n,onDelete:i,currentUser:o},a.id))}),Zy=({isOpen:t,onClose:r,newGroup:n,onInputChange:i,onCreateGroup:o,courses:s=[],coursesLoading:a=!1,currentCoursePage:c=1,totalCoursePages:u=1,onCoursePageChange:h=()=>{}})=>{const p=ae("gray.200","gray.700"),x=ae("gray.500","gray.400");return e.jsxs(wn,{isOpen:t,onClose:r,size:"lg",isCentered:!0,children:[e.jsx(Wr,{}),e.jsxs(jn,{borderRadius:"xl",children:[e.jsx(rn,{borderBottomWidth:"1px",borderColor:p,pb:4,children:e.jsx(ft,{size:"md",children:"Create a New Study Group"})}),e.jsx(cn,{}),e.jsx(Ur,{py:6,children:e.jsxs(br,{spacing:5,children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{fontWeight:"medium",children:"Group Name"}),e.jsx(Ft,{name:"name",value:n.name,onChange:i,placeholder:"e.g., Calculus II Problem Solvers",borderRadius:"md"})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{fontWeight:"medium",children:"Course"}),e.jsxs(un,{children:[e.jsx(hn,{as:Te,rightIcon:e.jsx(hs,{}),w:"100%",textAlign:"left",fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:n.course_id&&s.length>0&&s.find(b=>b.id===Number(n.course_id))?`${s.find(b=>b.id===Number(n.course_id)).code} - ${s.find(b=>b.id===Number(n.course_id)).title}`:"Select course"}),e.jsxs(fn,{maxH:"320px",overflowY:"auto",minW:"400px",children:[a?e.jsx(ke,{justify:"center",align:"center",h:"100px",children:e.jsx(qr,{})}):s.map(b=>{var g;return e.jsx(Zt,{onClick:()=>i({target:{name:"course_id",value:b.id}}),children:e.jsxs(de,{children:[e.jsxs($,{fontWeight:"medium",children:[b.code," - ",b.title]}),e.jsx($,{fontSize:"sm",color:x,children:(g=b.major)==null?void 0:g.name})]})},b.id)}),u>1&&e.jsx(de,{borderTop:"1px solid",borderColor:p,mt:2,pt:2,px:2,children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"xs",onClick:b=>{b.stopPropagation(),h(c-1)},isDisabled:c<=1||a,variant:"outline",borderRadius:"md",children:"Prev"}),e.jsxs($,{fontSize:"xs",color:x,mx:2,children:["Page ",c," of ",u]}),e.jsx(Te,{size:"xs",onClick:b=>{b.stopPropagation(),h(c+1)},isDisabled:c>=u||a,variant:"outline",borderRadius:"md",children:"Next"})]})})]})]})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{fontWeight:"medium",children:"Description"}),e.jsx(ri,{name:"description",value:n.description,onChange:i,placeholder:"Describe the purpose, goals, and activities of your study group...",borderRadius:"md",minHeight:"120px"})]}),e.jsxs(fr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{fontWeight:"medium",children:"Meeting Time"}),e.jsx(Ft,{type:"datetime-local",name:"meeting_time",value:n.meeting_time,onChange:i,borderRadius:"md"})]}),e.jsxs(mt,{children:[e.jsx(xt,{fontWeight:"medium",children:"Location"}),e.jsx(Ft,{name:"location",value:n.location,onChange:i,placeholder:"e.g., Library Room 201",borderRadius:"md",isDisabled:n.isOnline})]})]}),e.jsx(mt,{children:e.jsx(up,{name:"isOnline",isChecked:n.isOnline,onChange:i,children:"This is an online meeting"})})]})}),e.jsxs(dn,{borderTopWidth:"1px",borderColor:p,pt:4,children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:r,borderRadius:"md",children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",leftIcon:e.jsx(Di,{}),onClick:o,isDisabled:!n.name||!n.course_id||!n.description||!n.meeting_time||!n.isOnline&&!n.location,borderRadius:"md",children:"Create Group"})]})]})]})};lr(rr);const Za=(t,r)=>{if(!t)return"Unknown Course";if(typeof t=="string")return t;if(t.code)return`${t.code}`;const n=r.find(i=>i.id===t);return n?`${n.code} - ${n.title}`:"Unknown Course"},Vo=t=>t?new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"TBD",ev=()=>{const t=Jr(),r=Hr(),{isOpen:n,onOpen:i,onClose:o}=Yr(),{user:s}=gi(),{isOpen:a,onOpen:c,onClose:u}=Yr(),[h,p]=z.useState(null),x=z.useRef(),{isOpen:b,onOpen:g,onClose:_}=Yr(),[S,O]=z.useState(null),[k,M]=z.useState({}),J=ae("white","gray.700"),re=ae("gray.800","white"),N=ae("gray.500","gray.400"),D=ae("blue.500","blue.300");ae("gray.100","gray.600");const B=ae("gray.200","gray.700"),[U,R]=z.useState(""),[P,w]=z.useState(0),[A,T]=z.useState(!1),[E,ee]=z.useState([]),[Z,y]=z.useState([]),[se,W]=z.useState([]),[v,Y]=z.useState(!1),[C,q]=z.useState(1),[L,G]=z.useState(1),[Q,ie]=z.useState(!0),[ce,le]=z.useState(!1),[xe,we]=z.useState(!1),[ze,De]=z.useState(1),[$e,ve]=z.useState(1),[te,Ce]=z.useState(0),[Be,Ne]=z.useState({is_online:null,is_complete:null,course_id:""}),[ue,Je]=z.useState({name:"",course_id:"",description:"",meeting_time:"",location:"",isOnline:!1}),Ke=async Le=>{if(!(Le<1||Le>L)){Y(!0);try{const We=localStorage.getItem("major_id"),tt=localStorage.getItem("faculty_id"),rt={...We?{major_id:We}:tt?{faculty_id:tt}:{},page:Le,per_page:10},bt=await ol(rt);W(bt.data||[]),q(bt.current_page||Le),G(bt.last_page||1)}catch(We){Se("Failed to fetch courses",We)}finally{Y(!1)}}},ut=Le=>{Je(We=>({...We,isOnline:Le.target.checked,location:Le.target.checked?"":We.location}))},Ye=Le=>{const{name:We,value:tt,type:rt,checked:bt}=Le.target;Je(yt=>({...yt,[We]:rt==="checkbox"?bt:tt}))};z.useEffect(()=>{(async()=>{ie(!0),le(!0),Y(!0);try{const We=localStorage.getItem("major_id"),tt=localStorage.getItem("faculty_id");let rt={};We?rt.major_id=We:tt&&(rt.faculty_id=tt);const[bt,yt,qe]=await Promise.all([hc(rt),Su(),ol({...We?{major_id:We}:tt?{faculty_id:tt}:{},page:1,per_page:10})]);W(qe.data||[]),q(qe.current_page||1),G(qe.last_page||1);const pt=Rt=>({...Rt,meetings:Rt.meeting_time?[Rt.meeting_time]:[],members:Rt.members_count||1,tags:Rt.major?[Rt.major.name]:[],leader:Rt.creator||{},course:Za(Rt.course,qe.data||[]),formattedTime:Vo(Rt.meeting_time),isPast:Rt.meeting_time?new Date(Rt.meeting_time)<new Date:!1}),lt=Array.isArray(yt)?yt:yt.data||[],zt=new Set(lt.map(Rt=>Rt.id));ee(bt.data.map(Rt=>({...pt(Rt),isJoined:zt.has(Rt.id)}))),bt.current_page!==void 0&&(De(bt.current_page),ve(bt.last_page||1),Ce(bt.total||0)),y(lt.map(Rt=>({...pt(Rt),isJoined:!0})))}catch(We){Se("Failed to load data",We)}finally{ie(!1),le(!1),Y(!1)}})()},[]);const Se=(Le,We)=>{var tt,rt;r({title:Le,description:((rt=(tt=We==null?void 0:We.response)==null?void 0:tt.data)==null?void 0:rt.message)||We.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})},ye=z.useCallback(async(Le=U,We=Be,tt=1)=>{we(!0);try{const rt=localStorage.getItem("major_id"),bt=localStorage.getItem("faculty_id"),yt={...Le.trim()&&{q:Le.trim()},...We,...rt&&{major_id:rt},...bt&&{faculty_id:bt},page:tt,per_page:4};Object.keys(yt).forEach(Pt=>{(yt[Pt]===""||yt[Pt]===null)&&delete yt[Pt]});const qe=await hc(yt),pt=Pt=>({...Pt,meetings:Pt.meeting_time?[Pt.meeting_time]:[],members:Pt.members_count||1,tags:Pt.major?[Pt.major.name]:[],leader:Pt.creator||{},course:Za(Pt.course,se),formattedTime:Vo(Pt.meeting_time),isPast:Pt.meeting_time?new Date(Pt.meeting_time)<new Date:!1}),lt=Array.isArray(Z)?Z:[],zt=new Set(lt.map(Pt=>Pt.id)),Rt=(qe.data||qe).map(Pt=>({...pt(Pt),isJoined:zt.has(Pt.id)}));ee(Rt),qe.current_page!==void 0&&(De(qe.current_page),ve(qe.last_page||1),Ce(qe.total||0))}catch(rt){Se("Search failed",rt)}finally{we(!1)}},[U,Be,se,Z]),Ae=z.useCallback((Le,We)=>{const tt={...Be,[Le]:We};Ne(tt),De(1),ye(U,tt,1)},[Be,U,ye]),Me=z.useCallback(()=>{const Le={is_online:null,is_complete:null,course_id:""};Ne(Le),De(1),ye(U,Le,1)},[U,ye]),_e=z.useCallback(Le=>{De(Le),ye(U,Be,Le)},[U,Be,ye]);z.useEffect(()=>{const Le=setTimeout(()=>{ye()},500);return()=>clearTimeout(Le)},[U,ye]);const Fe=z.useMemo(()=>E,[E]),Ee=z.useMemo(()=>{if(!U)return Z;const Le=U.toLowerCase();return Z.filter(We=>We.name.toLowerCase().includes(Le)||We.course.toLowerCase().includes(Le)||We.description.toLowerCase().includes(Le))},[Z,U]),it=z.useCallback(async Le=>{try{const We=E.find(Pt=>Pt.id===Le);if(We.isPast){r({title:"Cannot join past session",status:"error",duration:3e3});return}await $y(Le),le(!0);const tt=localStorage.getItem("major_id"),rt=localStorage.getItem("faculty_id");let bt={};tt?bt.major_id=tt:rt&&(bt.faculty_id=rt);const[yt,qe]=await Promise.all([hc(bt),Su()]),pt={};yt.data.forEach(Pt=>{pt[Pt.id]={...Pt,members_count:Pt.members_count}});const lt=Pt=>{const hr=pt[Pt.id];return{...Pt,meetings:Pt.meeting_time?[Pt.meeting_time]:[],members:hr?hr.members_count||1:Pt.members_count||1,tags:Pt.major?[Pt.major.name]:[],leader:Pt.creator||{},course:Za(Pt.course,se),formattedTime:Vo(Pt.meeting_time),isPast:Pt.meeting_time?new Date(Pt.meeting_time)<new Date:!1}},zt=Array.isArray(qe)?qe:qe.data||[],Rt=new Set(zt.map(Pt=>Pt.id));ee(yt.data.map(Pt=>({...lt(Pt),isJoined:Rt.has(Pt.id)}))),y(zt.map(Pt=>{const hr=pt[Pt.id];return{...lt(Pt),members:hr?hr.members_count||1:Pt.members_count||1,isJoined:!0}})),le(!1),r({title:`Joined ${We.name}`,status:"success"})}catch(We){Se("Failed to join group",We),le(!1)}},[E,se]),Ve=z.useCallback(async Le=>{try{const We=await Gy(Le);ie(!0),le(!0);const tt=localStorage.getItem("major_id"),rt=localStorage.getItem("faculty_id");let bt={};tt?bt.major_id=tt:rt&&(bt.faculty_id=rt);const[yt,qe]=await Promise.all([hc(bt),Su()]),pt=Rt=>({...Rt,meetings:Rt.meeting_time?[Rt.meeting_time]:[],members:Rt.members_count||1,tags:Rt.major?[Rt.major.name]:[],leader:Rt.creator||{},course:Za(Rt.course,se),formattedTime:Vo(Rt.meeting_time),isPast:Rt.meeting_time?new Date(Rt.meeting_time)<new Date:!1}),lt=Array.isArray(qe)?qe:qe.data||[],zt=new Set(lt.map(Rt=>Rt.id));ee(yt.data.map(Rt=>({...pt(Rt),isJoined:zt.has(Rt.id)}))),y(lt.map(Rt=>({...pt(Rt),isJoined:!0}))),ie(!1),le(!1),We&&We.message&&We.message.includes("The group has been deleted")?r({title:"Group deleted",description:We.message,status:"info",duration:4e3}):r({title:"Left group",description:(We==null?void 0:We.message)||void 0,status:"info",duration:3e3})}catch(We){Se("Failed to leave group",We),ie(!1),le(!1)}},[se]),at=z.useCallback(async()=>{try{const Le=localStorage.getItem("major_id"),We=localStorage.getItem("faculty_id");if(!Le||!We){r({title:"Missing Profile Information",description:"Please complete your profile (major and faculty) before creating a group.",status:"error",duration:4e3});return}const tt={...ue,course_id:parseInt(ue.course_id),meeting_time:ue.meeting_time,capacity:15,is_online:ue.isOnline,location:ue.isOnline?"Online":ue.location,major_id:parseInt(Le),faculty_id:parseInt(We)},rt=await Hy(tt);r({title:"Group created!",status:"success"}),o(),Je({name:"",course_id:"",description:"",meeting_time:"",location:"",isOnline:!1});const bt={...rt,meetings:rt.meeting_time?[rt.meeting_time]:[],tags:rt.major?[rt.major.name]:[],formattedTime:Vo(rt.meeting_time),isPast:rt.meeting_time?new Date(rt.meeting_time)<new Date:!1,isJoined:!0,members:1,course:Za(rt.course,se),capacity:rt.capacity||15};ee(yt=>[bt,...yt]),y(yt=>[bt,...yt])}catch(Le){Se("Failed to create group",Le)}},[ue,se]),Lt=z.useCallback(Le=>{O(Le),M({name:Le.name,description:Le.description,meeting_time:Le.meeting_time?new Date(Le.meeting_time).toISOString().slice(0,16):"",location:Le.location||"",isOnline:Le.isOnline||!1}),g()},[g]),Ct=z.useCallback(Le=>{p(Le),c()},[c]),be=z.useCallback(async()=>{if(h)try{await Yy(h.id),ee(Le=>Le.filter(We=>We.id!==h.id)),y(Le=>Le.filter(We=>We.id!==h.id)),r({title:"Group deleted",description:"The study group has been successfully deleted.",status:"success",duration:3e3})}catch(Le){Se("Failed to delete group",Le)}finally{u(),p(null)}},[h,u,r]),st=z.useCallback(async()=>{if(!S||!k.name||!k.description){r({title:"Please fill in all required fields",status:"error",duration:3e3});return}try{const Le={name:k.name,description:k.description,meeting_time:k.meeting_time||null,location:k.isOnline?"Online":k.location,is_online:k.isOnline};await Vy(S.id,Le);const We={...S,...Le,formattedTime:Vo(k.meeting_time)};ee(tt=>tt.map(rt=>rt.id===S.id?We:rt)),y(tt=>tt.map(rt=>rt.id===S.id?We:rt)),r({title:"Group updated",description:"The study group has been successfully updated.",status:"success",duration:3e3}),_(),O(null),M({})}catch(Le){Se("Failed to update group",Le)}},[S,k,_,r]),Ie=(Le,We=!1)=>e.jsx(Qy,{groups:Le,onJoinLeave:tt=>{const rt=Le.find(bt=>bt.id===tt);rt&&rt.isJoined?Ve(tt):it(tt)},onEdit:Lt,onDelete:Ct,currentUser:s,emptyStateType:We?"myGroups":"allGroups"}),et=(Le,We,tt)=>e.jsx(ke,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(de,{textAlign:"center",maxW:"400px",children:[Le,e.jsx(ft,{size:"md",mb:2,children:We}),e.jsx($,{color:N,mb:6,children:tt}),P===0&&e.jsx(Te,{colorScheme:"blue",onClick:i,children:"Create Your First Group"})]})}),Tt=()=>e.jsx(Zn,{columns:{base:1,md:2},spacing:6,children:[...Array(4)].map((Le,We)=>e.jsxs(de,{p:6,bg:J,borderRadius:"lg",boxShadow:"md",children:[e.jsx(Ar,{height:"32px",mb:4}),e.jsx(Zo,{noOfLines:3,spacing:"4"}),e.jsxs(dt,{mt:4,spacing:2,children:[e.jsx(Ar,{height:"24px",width:"60px"}),e.jsx(Ar,{height:"24px",width:"60px"})]}),e.jsx(an,{my:4}),e.jsxs(br,{spacing:3,children:[e.jsx(Ar,{height:"20px"}),e.jsx(Ar,{height:"20px"}),e.jsx(Ar,{height:"20px"})]}),e.jsx(an,{my:4}),e.jsxs(ke,{justify:"space-between",mt:4,children:[e.jsx(Ar,{height:"32px",width:"100px"}),e.jsx(Ar,{height:"32px",width:"100px"})]})]},We))});return e.jsxs(ke,{minH:"100vh",p:{base:4,md:8},bg:ae("gray.50","gray.800"),children:[e.jsxs(de,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsxs(ke,{justify:"space-between",align:"center",mb:6,flexWrap:"wrap",gap:4,children:[e.jsxs(dt,{spacing:4,children:[e.jsx(Ut,{icon:e.jsx(Hn,{}),"aria-label":"Go back",onClick:()=>t(-1),variant:"ghost",borderRadius:"full"}),e.jsx(ft,{size:"xl",color:re,fontWeight:"700",children:"Study Groups"})]}),e.jsx(Te,{leftIcon:e.jsx(pi,{}),colorScheme:"blue",onClick:i,borderRadius:"full",children:"Create Group"})]}),e.jsxs(Ws,{colorScheme:"blue",mb:6,variant:"soft-rounded",index:P,onChange:w,children:[e.jsxs(ke,{justify:"space-between",align:"center",gap:4,mb:4,flexWrap:"wrap",children:[e.jsxs(Us,{children:[e.jsx(Sn,{children:"All Groups"}),e.jsx(Sn,{children:"My Groups"})]}),e.jsxs(dt,{spacing:2,children:[e.jsxs(Te,{leftIcon:e.jsx(Hc,{}),variant:"outline",size:"sm",onClick:()=>T(!A),colorScheme:Object.values(Be).some(Le=>Le!==null&&Le!=="")?"blue":"gray",children:["Filters",Object.values(Be).some(Le=>Le!==null&&Le!=="")&&e.jsx(zr,{ml:2,colorScheme:"blue",variant:"solid",children:Object.values(Be).filter(Le=>Le!==null&&Le!=="").length})]}),e.jsxs(Er,{maxW:{base:"250px",md:"300px"},children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ha,{color:N})}),e.jsx(Ft,{placeholder:"Search study sessions...",size:"md",borderRadius:"lg",value:U,onChange:Le=>R(Le.target.value),_focus:{borderColor:D,boxShadow:`0 0 0 1px ${D}`},bg:ae("white","gray.700")}),(U||xe)&&e.jsx(Cc,{children:xe?e.jsx(qr,{size:"sm"}):e.jsx(Ut,{icon:e.jsx(co,{}),size:"sm",variant:"ghost","aria-label":"Clear search",onClick:()=>R("")})})]})]})]}),e.jsx(Vg,{in:A,animateOpacity:!0,children:e.jsx(de,{p:4,bg:ae("gray.50","gray.700"),borderRadius:"lg",mb:4,border:"1px solid",borderColor:B,children:e.jsxs(ot,{spacing:4,align:"stretch",children:[e.jsxs(dt,{justify:"space-between",align:"center",children:[e.jsx($,{fontWeight:"medium",fontSize:"sm",color:re,children:"Filter Groups"}),e.jsx(Te,{size:"xs",variant:"ghost",onClick:Me,disabled:!Object.values(Be).some(Le=>Le!==null&&Le!==""),children:"Clear All"})]}),"                ",e.jsxs(fr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:4,children:[e.jsxs(mt,{children:[e.jsx(xt,{fontSize:"sm",mb:1,children:"Course"}),e.jsxs(un,{children:[e.jsx(hn,{as:Te,size:"sm",w:"100%",rightIcon:e.jsx(hs,{}),textAlign:"left",fontWeight:"normal",bg:ae("white","gray.600"),overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:Be.course_id&&se.find(Le=>Le.id===Number(Be.course_id))?`${se.find(Le=>Le.id===Number(Be.course_id)).code} - ${se.find(Le=>Le.id===Number(Be.course_id)).title}`:"Any course"}),e.jsx(Yg,{children:e.jsxs(fn,{maxH:"320px",overflowY:"auto",minW:"400px",children:[e.jsx(Zt,{onClick:()=>Ae("course_id",""),children:"Any course"}),v?e.jsx(ke,{justify:"center",align:"center",h:"100px",children:e.jsx(qr,{})}):se.map(Le=>{var We;return e.jsx(Zt,{onClick:()=>Ae("course_id",Le.id),children:e.jsxs(de,{children:[e.jsxs($,{fontWeight:"medium",children:[Le.code," - ",Le.title]}),e.jsx($,{fontSize:"sm",color:N,children:(We=Le.major)==null?void 0:We.name})]})},Le.id)}),L>1&&e.jsx(de,{borderTop:"1px solid",borderColor:B,mt:2,pt:2,px:2,children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"xs",onClick:Le=>{Le.stopPropagation(),Ke(C-1)},isDisabled:C<=1||v,variant:"outline",borderRadius:"md",children:"Prev"}),e.jsxs($,{fontSize:"xs",color:N,mx:2,children:["Page ",C," of ",L]}),e.jsx(Te,{size:"xs",onClick:Le=>{Le.stopPropagation(),Ke(C+1)},isDisabled:C>=L||v,variant:"outline",borderRadius:"md",children:"Next"})]})})]})})]})]}),e.jsxs(mt,{children:[e.jsx(xt,{fontSize:"sm",mb:1,children:"Meeting Type"}),e.jsxs(zi,{size:"sm",value:Be.is_online===null?"":Be.is_online.toString(),onChange:Le=>Ae("is_online",Le.target.value===""?null:Le.target.value==="true"),placeholder:"Any type",bg:ae("white","gray.600"),children:[e.jsx("option",{value:"true",children:"Online"}),e.jsx("option",{value:"false",children:"In-person"})]})]}),e.jsxs(mt,{children:[e.jsx(xt,{fontSize:"sm",mb:1,children:"Status"}),e.jsxs(zi,{size:"sm",value:Be.is_complete===null?"":Be.is_complete.toString(),onChange:Le=>Ae("is_complete",Le.target.value===""?null:Le.target.value==="true"),placeholder:"Any status",bg:ae("white","gray.600"),children:[e.jsx("option",{value:"false",children:"Active"}),e.jsx("option",{value:"true",children:"Completed"})]})]})]}),Object.entries(Be).some(([Le,We])=>We!==null&&We!=="")&&e.jsxs(de,{children:[e.jsx($,{fontSize:"xs",color:N,mb:2,children:"Active Filters:"}),e.jsx(dt,{spacing:2,flexWrap:"wrap",children:Object.entries(Be).map(([Le,We])=>{if(We===null||We==="")return null;let tt="",rt=We;switch(Le){case"course_id":const bt=se.find(yt=>yt.id.toString()===We.toString());tt="Course",rt=bt?bt.code:We;break;case"is_online":tt="Type",rt=We?"Online":"In-person";break;case"is_complete":tt="Status",rt=We?"Completed":"Active";break}return e.jsxs(Qn,{size:"sm",colorScheme:"blue",variant:"solid",cursor:"pointer",onClick:()=>Ae(Le,Le==="is_online"||Le==="is_complete"?null:""),children:[tt,": ",rt,e.jsx(co,{style:{marginLeft:"4px"}})]},Le)})})]})]})})}),e.jsxs(fo,{children:[e.jsx(kn,{px:0,children:Q?Tt():Fe.length>0?e.jsxs(e.Fragment,{children:[Ie(Fe),$e>1&&e.jsxs(de,{mt:8,children:[e.jsx(ke,{justify:"center",mb:4,display:{base:"flex",md:"none"},children:e.jsxs($,{fontSize:"sm",color:N,textAlign:"center",px:4,children:["Page ",ze," of ",$e]})}),e.jsxs(ke,{justify:"space-between",align:"center",p:6,bg:ae("white","gray.700"),borderRadius:"xl",borderWidth:"1px",borderColor:B,shadow:"sm",_hover:{shadow:"md",borderColor:ae("gray.300","gray.600")},transition:"all 0.2s",flexDirection:{base:"column",md:"row"},gap:{base:4,md:0},children:[e.jsxs($,{fontSize:"sm",color:N,fontWeight:"medium",display:{base:"none",md:"block"},children:["Showing page ",ze," of ",$e," • ",te," total groups"]}),e.jsxs(dt,{spacing:2,children:[e.jsx(Te,{leftIcon:e.jsx(Ds,{}),onClick:()=>_e(ze-1),isDisabled:ze===1||xe,variant:"outline",size:"md",borderRadius:"lg",_hover:{bg:ae("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",isLoading:xe,loadingText:"Previous",children:"Previous"}),e.jsx(dt,{spacing:1,mx:2,children:(()=>{const Le=[],We=window.innerWidth<768?3:5;let tt=Math.max(1,ze-Math.floor(We/2)),rt=Math.min($e,tt+We-1);rt-tt+1<We&&(tt=Math.max(1,rt-We+1)),tt>1&&(Le.push(e.jsx(Te,{onClick:()=>_e(1),isDisabled:xe,variant:"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",_hover:{bg:ae("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"1"},1)),tt>2&&Le.push(e.jsx($,{color:N,px:2,fontSize:"lg",children:"..."},"ellipsis1")));for(let bt=tt;bt<=rt;bt++){const yt=bt===ze;Le.push(e.jsx(Te,{onClick:()=>_e(bt),isDisabled:xe,colorScheme:yt?"blue":void 0,variant:yt?"solid":"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",fontWeight:yt?"bold":"medium",_hover:yt?{}:{bg:ae("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",shadow:yt?"md":"sm",children:bt},bt))}return rt<$e&&(rt<$e-1&&Le.push(e.jsx($,{color:N,px:2,fontSize:"lg",children:"..."},"ellipsis2")),Le.push(e.jsx(Te,{onClick:()=>_e($e),isDisabled:xe,variant:"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",_hover:{bg:ae("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:$e},$e))),Le})()}),e.jsx(Te,{rightIcon:e.jsx(ua,{}),onClick:()=>_e(ze+1),isDisabled:ze===$e||xe,variant:"outline",size:"md",borderRadius:"lg",_hover:{bg:ae("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",isLoading:xe,loadingText:"Next",children:"Next"})]})]})]})]}):et(e.jsx(Uc,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),"No study groups found","Try changing your search terms or create a new group")}),e.jsx(kn,{px:0,children:ce?Tt():Ee.length>0?Ie(Ee,!0):et(e.jsx(ni,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),"You haven't joined any groups yet","Join a study group to collaborate with others")})]})]})]}),e.jsx(Zy,{isOpen:n,onClose:o,newGroup:ue,onInputChange:Ye,onCreateGroup:at,onToggleOnline:ut,subjects:["All",...new Set(se.map(Le=>{var We;return(We=Le.major)==null?void 0:We.name}).filter(Boolean))],courses:se,coursesLoading:v,currentCoursePage:C,totalCoursePages:L,onCoursePageChange:Ke}),e.jsxs(wn,{isOpen:b,onClose:_,size:"lg",isCentered:!0,children:[e.jsx(Wr,{}),e.jsxs(jn,{borderRadius:"xl",children:[e.jsx(rn,{borderBottomWidth:"1px",borderColor:B,pb:4,children:"Edit Study Group"}),e.jsx(cn,{}),e.jsx(Ur,{py:6,children:e.jsxs(br,{spacing:4,children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Group Name"}),e.jsx(Ft,{value:k.name||"",onChange:Le=>M(We=>({...We,name:Le.target.value})),placeholder:"Enter group name"})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Description"}),e.jsx(ri,{value:k.description||"",onChange:Le=>M(We=>({...We,description:Le.target.value})),placeholder:"Describe your study group",rows:3})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Meeting Time"}),e.jsx(Ft,{type:"datetime-local",value:k.meeting_time||"",onChange:Le=>M(We=>({...We,meeting_time:Le.target.value}))})]}),e.jsxs(mt,{display:"flex",alignItems:"center",children:[e.jsx(xt,{mb:"0",children:"Online Meeting"}),e.jsx(Jg,{isChecked:k.isOnline||!1,onChange:Le=>M(We=>({...We,isOnline:Le.target.checked}))})]}),!k.isOnline&&e.jsxs(mt,{children:[e.jsx(xt,{children:"Location"}),e.jsx(Ft,{value:k.location||"",onChange:Le=>M(We=>({...We,location:Le.target.value})),placeholder:"Enter meeting location"})]})]})}),e.jsxs(dn,{borderTopWidth:"1px",borderColor:B,pt:4,children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:_,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",onClick:st,isDisabled:!k.name||!k.description,children:"Update Group"})]})]})]}),e.jsx(Bc,{isOpen:a,leastDestructiveRef:x,onClose:u,isCentered:!0,children:e.jsx(Wr,{children:e.jsxs(qc,{borderRadius:"xl",children:[e.jsx(rn,{fontSize:"lg",fontWeight:"bold",children:"Delete Study Group"}),e.jsxs(Ur,{children:['Are you sure you want to delete "',h==null?void 0:h.name,'"? This action cannot be undone and will remove all group data.']}),e.jsxs(dn,{children:[e.jsx(Te,{ref:x,onClick:u,children:"Cancel"}),e.jsx(Te,{colorScheme:"red",onClick:be,ml:3,children:"Delete"})]})]})})})]})},tv=()=>{const t=cl(),r=Jr(),n=Hr(),{docId:i}=Wc(),[o,s]=z.useState(!0),[a,c]=z.useState(null);z.useEffect(()=>{var M;s(!0),(M=t.state)!=null&&M.document?setTimeout(()=>{c(t.state.document),s(!1)},800):(s(!1),n({title:"Document not found",description:"The requested document could not be loaded.",status:"error",duration:5e3,isClosable:!0}))},[t,i,n]);const u=()=>{if(a){const M=a.createElement("a");M.href=a.url,M.setAttribute("download",a.name),a.body.appendChild(M),M.click(),a.body.removeChild(M),n({title:"Download started",description:`${a.name} is downloading.`,status:"success",duration:3e3,isClosable:!0})}},h=()=>{n({title:"Document bookmarked",description:"You can access this document in your bookmarks.",status:"success",duration:3e3,isClosable:!0})},p=()=>{navigator.clipboard.writeText(window.location.href),n({title:"Link copied",description:"Document link copied to clipboard.",status:"info",duration:3e3,isClosable:!0})},x=()=>{window.print()},b=ae("white","gray.800"),g=ae("gray.200","gray.600"),_=ae("gray.600","gray.400"),S=ae("brand.gold","brand.goldDark"),O=ae("brand.navy","brand.navyDark"),k=ae("gray.50","gray.800");return e.jsx(e.Fragment,{children:e.jsxs(de,{px:{base:4,md:6},py:6,maxW:"1400px",mx:"auto",bg:k,children:[e.jsx(Te,{leftIcon:e.jsx(Hn,{}),variant:"ghost",mb:6,onClick:()=>r(-1),size:"sm",color:O,_hover:{bg:"transparent",color:S},children:"Back"}),e.jsxs(fr,{templateColumns:{base:"1fr",lg:"3fr 1fr"},gap:6,children:[e.jsx(_c,{children:e.jsxs(rr,{bg:b,shadow:"md",borderRadius:"lg",overflow:"hidden",children:[e.jsxs(ke,{p:6,borderBottom:"1px",borderColor:g,direction:{base:"column",md:"row"},justify:"space-between",align:{base:"start",md:"center"},gap:4,children:[e.jsxs(de,{children:[e.jsx(ft,{as:"h1",size:"lg",mb:2,color:O,children:o?e.jsx(Ar,{height:"36px",width:"300px"}):(a==null?void 0:a.name)||"Document not found"}),e.jsx(ke,{align:"center",gap:3,color:_,flexWrap:"wrap",children:o?e.jsx(Ar,{height:"20px",width:"180px"}):e.jsxs(e.Fragment,{children:[e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ht,{as:Un,color:S}),e.jsx($,{children:(a==null?void 0:a.type)||"Unknown type"})]}),(a==null?void 0:a.size)&&e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ht,{as:mp,color:S}),e.jsx($,{children:a.size})]}),e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ht,{as:fs,color:S}),e.jsxs($,{children:["Uploaded ",(a==null?void 0:a.uploadDate)||"recently"]})]})]})})]}),e.jsxs(ke,{gap:2,children:[e.jsx(_i,{label:"Download",children:e.jsx(Ut,{"aria-label":"Download document",icon:e.jsx(Ci,{}),onClick:u,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:S}})}),e.jsx(_i,{label:"Bookmark",children:e.jsx(Ut,{"aria-label":"Bookmark document",icon:e.jsx(Ki,{}),onClick:h,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:S}})}),e.jsx(_i,{label:"Share",children:e.jsx(Ut,{"aria-label":"Share document",icon:e.jsx(fa,{}),onClick:p,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:S}})}),e.jsx(_i,{label:"Print",children:e.jsx(Ut,{"aria-label":"Print document",icon:e.jsx(n1,{}),onClick:x,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:S}})})]})]}),e.jsx(de,{p:6,children:o?e.jsx(Ar,{height:"600px",width:"100%"}):a?e.jsx(Ts,{ratio:4/3,maxH:"800px",children:e.jsx(de,{as:"iframe",src:a.url,borderRadius:"md",bg:k,border:"1px",borderColor:g,width:"100%",height:"100%","aria-label":"Document preview"})}):e.jsxs(ke,{direction:"column",align:"center",justify:"center",py:20,bg:k,borderRadius:"md",children:[e.jsx(ht,{as:Un,boxSize:16,color:_,mb:4}),e.jsx(ft,{size:"md",mb:2,color:O,children:"Document Not Found"}),e.jsx($,{color:_,children:"The document you're looking for could not be loaded."}),e.jsx(Te,{mt:6,leftIcon:e.jsx(Hn,{}),onClick:()=>r(-1),bg:O,color:"white",_hover:{bg:S},children:"Go Back"})]})})]})}),e.jsx(_c,{children:e.jsx(rr,{bg:b,shadow:"md",borderRadius:"lg",children:e.jsxs(In,{children:[e.jsx(ft,{size:"md",mb:4,color:O,children:"Document Information"}),e.jsx(an,{mb:4,borderColor:g}),o?e.jsx(ke,{direction:"column",gap:3,children:[...Array(5)].map((M,J)=>e.jsx(Ar,{height:"24px"},J))}):a?e.jsxs(Cu,{spacing:3,children:[e.jsxs(Yo,{children:[e.jsx(tc,{as:na,color:S}),e.jsx($,{as:"span",fontWeight:"bold",mr:2,color:O,children:"Owner:"}),e.jsx($,{as:"span",children:a.owner||"Unknown"})]}),e.jsxs(Yo,{children:[e.jsx(tc,{as:zn,color:S}),e.jsx($,{as:"span",fontWeight:"bold",mr:2,color:O,children:"Created:"}),e.jsx($,{as:"span",children:a.created||"Unknown"})]}),e.jsxs(Yo,{children:[e.jsx(tc,{as:Un,color:S}),e.jsx($,{as:"span",fontWeight:"bold",mr:2,color:O,children:"File Type:"}),e.jsx($,{as:"span",children:a.type||"Unknown"})]}),e.jsxs(Yo,{children:[e.jsx(tc,{as:Ku,color:S}),e.jsx($,{as:"span",fontWeight:"bold",mr:2,color:O,children:"Rating:"}),e.jsx(zr,{px:2,py:1,borderRadius:"full",bg:S,color:"white",children:a.rating||"Not rated"})]})]}):e.jsx($,{color:_,children:"No document information available"}),e.jsx(an,{my:4,borderColor:g}),e.jsx(ft,{size:"md",mb:4,color:O,children:"Related Documents"}),o?e.jsx(ke,{direction:"column",gap:3,children:[...Array(3)].map((M,J)=>e.jsx(Ar,{height:"60px"},J))}):a?e.jsx(Cu,{spacing:3,children:(a.relatedDocuments||[{id:1,name:"Course Syllabus",type:"PDF"},{id:2,name:"Lecture Notes",type:"DOCX"},{id:3,name:"Assignment 1",type:"PDF"}]).map(M=>e.jsx(Yo,{p:2,_hover:{bg:k},borderRadius:"md",children:e.jsxs(ke,{align:"center",children:[e.jsx(ht,{as:Un,mr:3,color:S}),e.jsxs(de,{children:[e.jsx($,{fontWeight:"medium",color:O,children:M.name}),e.jsx($,{fontSize:"sm",color:_,children:M.type})]})]})},M.id))}):e.jsx($,{color:_,children:"No related documents available"}),e.jsx(Te,{mt:6,width:"full",leftIcon:e.jsx(Ci,{}),bg:O,color:"white",_hover:{bg:S},onClick:u,isDisabled:o||!a,children:"Download Document"})]})})})]})]})})},rv=async(t=1)=>{try{return(await gt.get("/notifications",{params:{page:t}})).data}catch(r){throw r}},nv=async t=>{try{return(await gt.patch(`/notifications/${t}/read`,{})).data}catch(r){throw r}},iv=async t=>{try{return(await gt.delete(`/notifications/${t}`)).data}catch(r){throw r}},sv=async()=>{try{return(await gt.put("/notifications",{})).data}catch(t){throw t}},X0=z.createContext(),ov=({children:t})=>{const[r,n]=z.useState([]),[i,o]=z.useState(!0),[s,a]=z.useState(null),[c,u]=z.useState(0),[h,p]=z.useState(1),[x,b]=z.useState(1),[g,_]=z.useState(!1),S=z.useCallback(R=>{var P,w,A;return{id:R.id,user:R.sender_name||"System",avatar:R.sender_avatar,content:((P=R.data)==null?void 0:P.message)||"",isRead:!!R.read,time:O(R.created_at),url:R.url||((w=R.data)==null?void 0:w.url),created_at:R.created_at,type:R.type,reason:(A=R.data)==null?void 0:A.reason}},[]),O=z.useCallback(R=>{if(!R)return"";const P=new Date,w=new Date(R),A=(P-w)/1e3;return A<60?`${Math.floor(A)}s ago`:A<3600?`${Math.floor(A/60)}m ago`:A<86400?`${Math.floor(A/3600)}h ago`:A<604800?`${Math.floor(A/86400)}d ago`:w.toLocaleDateString()},[]),k=z.useCallback(async(R=1,P=!1)=>{try{P||o(!0),a(null);const w=await rv(R);let A=[];Array.isArray(w)?A=w:Array.isArray(w.data)?(A=w.data,p(w.current_page||R),b(w.last_page||1),_((w.current_page||R)<(w.last_page||1))):Array.isArray(w.notifications)&&(A=w.notifications);const T=A.map(S);P&&R>1?n(ee=>[...ee,...T]):n(T);const E=T.filter(ee=>!ee.isRead);P||u(E.length)}catch(w){a("Failed to load notifications"),console.error("Error fetching notifications:",w)}finally{o(!1)}},[S]),M=z.useCallback(()=>r.filter(R=>!R.isRead).sort((R,P)=>new Date(P.created_at)-new Date(R.created_at)).slice(0,3),[r]),J=z.useCallback(async R=>{n(w=>w.map(A=>A.id===R?{...A,isRead:!0}:A));const P=Math.max(0,c-1);u(P);try{await nv(R)}catch(w){console.error("Error marking notification as read:",w),n(A=>A.map(T=>T.id===R?{...T,isRead:!1}:T)),u(A=>A+1)}},[c]),re=z.useCallback(async()=>{const R=r.filter(P=>!P.isRead);n(P=>P.map(w=>({...w,isRead:!0}))),u(0);try{await sv()}catch(P){console.error("Error marking all notifications as read:",P),n(w=>w.map(A=>R.find(E=>E.id===A.id)?{...A,isRead:!1}:A)),u(R.length)}},[r]),N=z.useCallback(async R=>{const P=r.find(w=>w.id===R);n(w=>w.filter(A=>A.id!==R)),P&&!P.isRead&&u(w=>Math.max(0,w-1));try{await iv(R)}catch(w){throw console.error("Error deleting notification:",w),n(A=>[...A,P].sort((T,E)=>new Date(E.created_at)-new Date(T.created_at))),P&&!P.isRead&&u(A=>A+1),w}},[r]),D=z.useCallback(()=>{k(1,!1)},[k]),B=z.useCallback(()=>{g&&!i&&h<x&&k(h+1,!0)},[g,i,h,x,k]);z.useEffect(()=>{k(1,!1)},[k]),z.useEffect(()=>{const R=setInterval(()=>{document.visibilityState==="visible"&&D()},3e4);return()=>clearInterval(R)},[D]);const U={notifications:r,loading:i,error:s,unreadCount:c,currentPage:h,totalPages:x,hasMore:g,unreadNotifications:M(),fetchNotifications:k,markAsRead:J,markAllAsRead:re,deleteNotification:N,refreshNotifications:D,loadMoreNotifications:B};return e.jsx(X0.Provider,{value:U,children:t})},K0=()=>{const t=z.useContext(X0);if(!t)throw new Error("useNotifications must be used within a NotificationsProvider");return t},av=()=>{const t=ae("#f0f4f8","gray.900"),r=ae("white","gray.800"),n=ae("gray.200","gray.600"),i=ae("brand.navy","white"),o=ae("gray.600","gray.400"),s=ae("brand.gold","brand.goldDark"),a=ae("brand.navy","brand.navyDark"),c=ae("0 4px 20px rgba(0, 0, 0, 0.1)","0 4px 20px rgba(0, 0, 0, 0.3)"),u=ae("gray.50","gray.700");ll({base:!0,md:!1});const h=Hr(),p=Jr(),{notifications:x,loading:b,error:g,unreadCount:_,currentPage:S,totalPages:O,hasMore:k,markAsRead:M,markAllAsRead:J,deleteNotification:re,fetchNotifications:N}=K0(),D=async()=>{try{await J(),h({title:"All notifications marked as read",status:"success",duration:3e3,isClosable:!0,position:"top"})}catch{h({title:"Failed to mark all as read",status:"error",duration:3e3,isClosable:!0,position:"top"})}},B=async w=>{try{await M(w)}catch{}},U=async w=>{try{await re(w),h({title:"Notification deleted",status:"success",duration:3e3,isClosable:!0,position:"top"})}catch{h({title:"Failed to delete notification",status:"error",duration:3e3,isClosable:!0,position:"top"})}},R=w=>{w>=1&&w<=O&&N(w,!1)},P=async w=>{if(w.isRead||B(w.id),w.url)try{const A=new URL(w.url).pathname;p(A)}catch{console.error("Invalid URL for notification:",w.url),h({title:"Invalid notification link",status:"error",duration:3e3,isClosable:!0,position:"top"})}};return e.jsx(de,{minH:"100vh",bg:t,py:{base:4,md:8},px:{base:3,md:6},children:e.jsx(Ai,{maxW:"900px",children:e.jsxs(ke,{direction:"column",mx:"auto",bg:r,borderRadius:"xl",overflow:"hidden",boxShadow:c,children:[e.jsxs(ke,{p:4,align:"center",justify:"space-between",borderBottom:"1px solid",borderColor:n,bg:ae("gray.50","gray.750"),children:[e.jsxs(dt,{spacing:3,children:[e.jsx(Ut,{as:Ii,to:"/dashboard",icon:e.jsx(Ds,{size:18}),variant:"ghost","aria-label":"Go back",color:i,borderRadius:"full",size:"md",_hover:{bg:`${s}20`}}),e.jsx(ht,{as:ra,color:s,boxSize:5}),e.jsx(ft,{size:"md",color:i,children:"Notifications"}),_>0&&e.jsxs(zr,{px:2,py:1,bg:s,color:a,borderRadius:"full",fontWeight:"medium",children:[_," new"]})]}),e.jsx(Te,{size:"sm",colorScheme:"gray",variant:"ghost",onClick:D,leftIcon:e.jsx(Di,{}),isDisabled:_===0,_hover:{bg:`${s}20`},children:"Mark all as read"})]}),e.jsx(de,{children:b?e.jsx(vn,{py:16,children:e.jsx($,{color:o,children:"Loading notifications..."})}):g?e.jsx(vn,{py:16,children:e.jsx($,{color:"red.400",children:g})}):x.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ot,{spacing:0,align:"stretch",divider:e.jsx(an,{borderColor:n}),children:x.map(w=>e.jsx(de,{children:e.jsx(ke,{p:5,position:"relative",bg:w.isRead?"transparent":`${s}10`,_hover:{bg:u},transition:"all 0.2s ease",borderLeft:"3px solid",borderLeftColor:w.isRead?"transparent":s,onClick:()=>P(w),cursor:w.url?"pointer":"default",direction:"column",children:e.jsxs(ke,{align:"flex-start",gap:4,children:[e.jsxs(de,{position:"relative",flexShrink:0,children:[e.jsx(Fr,{size:"md",name:w.user,src:w.avatar,border:"2px solid",borderColor:w.isRead?n:s}),!w.isRead&&e.jsx(zr,{position:"absolute",top:"-1",right:"-1",bg:s,boxSize:"10px",borderRadius:"full",border:"2px solid",borderColor:r})]}),e.jsxs(de,{ml:0,flex:"1",minW:0,children:[e.jsxs(ke,{align:"baseline",justify:"space-between",children:[e.jsx($,{fontWeight:w.isRead?"medium":"bold",color:i,children:w.user}),e.jsx($,{fontSize:"sm",color:o,children:w.time})]}),e.jsx($,{mt:1,color:w.isRead?o:i,children:w.content}),w.type==="resource_rejected"&&w.reason&&e.jsxs(ui,{mt:3,status:"warning",variant:"subtle",borderRadius:"md",fontSize:"sm",children:[e.jsx(hi,{as:Ju}),e.jsxs(de,{children:[e.jsx($,{fontWeight:"semibold",mb:1,children:"Rejection Reason:"}),e.jsx($,{children:w.reason})]})]})]}),e.jsx(Ut,{icon:e.jsx(dl,{}),variant:"ghost",colorScheme:"red",size:"sm",onClick:A=>{A.stopPropagation(),U(w.id)},"aria-label":"Delete notification",alignSelf:"center",borderRadius:"full",opacity:.7,_hover:{opacity:1},flexShrink:0})]})})},w.id))}),O>1&&e.jsxs(ke,{justify:"center",align:"center",p:4,borderTop:"1px solid",borderColor:n,children:[e.jsx(Te,{onClick:()=>R(S-1),isDisabled:S===1,leftIcon:e.jsx(Ds,{}),mr:2,children:"Previous"}),e.jsxs($,{color:o,children:["Page ",S," of ",O]}),e.jsx(Te,{onClick:()=>R(S+1),isDisabled:S===O,rightIcon:e.jsx(ua,{}),ml:2,children:"Next"})]})]}):e.jsx(vn,{py:16,children:e.jsxs(ot,{spacing:4,children:[e.jsx(de,{p:4,borderRadius:"full",bg:`${s}20`,children:e.jsx(ht,{as:ra,fontSize:"3xl",color:s})}),e.jsx(ft,{size:"md",color:i,children:"No notifications"}),e.jsx($,{color:o,textAlign:"center",maxW:"350px",children:"You're all caught up! Check back later for updates and activities from your courses and study groups."}),e.jsx(Te,{as:Ii,to:"/dashboard",mt:2,leftIcon:e.jsx(Hn,{}),colorScheme:"gray",variant:"outline",_hover:{bg:`${s}20`,borderColor:s},children:"Return to Dashboard"})]})})})]})})})},lv=async(t={})=>(await gt.get("/requests",{params:t})).data,cv=async(t={})=>{const r={};return t.course_name&&(r.course_name=t.course_name),t.current_day&&(r.current_day=t.current_day),t.desired_day&&(r.desired_day=t.desired_day),(await gt.get("/requests",{params:r})).data},dv=async(t={})=>(await gt.get("/my-requests",{params:t})).data,uv=async()=>(await gt.get("/my-applications")).data,hv=async t=>(await gt.post("/requests",t)).data,fv=async t=>(await gt.get(`/requests/${t}`)).data,Q0=async(t,r)=>(await gt.put(`/requests/${t}`,r)).data,pv=async t=>(await gt.delete(`/requests/${t}`)).data,gv=async(t,r={})=>(await gt.post(`/requests/${t}/apply`,r)).data,mv=async t=>(await gt.get(`/requests/${t}/applications`)).data,np=async(t,r)=>(await gt.put(`/applications/${t}`,r)).data,xv=async t=>(await gt.put(`/applications/${t}/withdraw`)).data,Mc=({currentPage:t,totalPages:r,onPageChange:n,isLoading:i})=>e.jsxs(dt,{spacing:2,justify:"center",mt:4,children:[e.jsx(Te,{size:"sm",onClick:()=>n(t-1),isDisabled:i||t<=1,children:"Prev"}),e.jsxs($,{fontSize:"sm",children:["Page ",t," of ",r]}),e.jsx(Te,{size:"sm",onClick:()=>n(t+1),isDisabled:i||t>=r,children:"Next"})]}),bv=5;function Z0({perPage:t=bv,trigger:r=!0}={}){const[n,i]=z.useState([]),[o,s]=z.useState(!1),[a,c]=z.useState(null),[u,h]=z.useState(1),[p,x]=z.useState(1),b=z.useCallback(async(g=1)=>{s(!0),c(null);try{const _=localStorage.getItem("major_id"),S=localStorage.getItem("faculty_id"),O={..._?{major_id:_}:{},...S?{faculty_id:S}:{},page:g,per_page:t},k=await ol(O);i(k.data||[]),x(k.last_page||1),h(k.current_page||1)}catch(_){c(_.message||"Failed to load courses")}finally{s(!1)}},[t]);return z.useEffect(()=>{r&&b(u)},[u,r]),{courses:n,coursesLoading:o,coursesError:a,coursesPage:u,coursesTotalPages:p,setCoursesPage:h,fetchPaginatedCourses:b}}const ld="https://bit.ly/dan-abramov",ip=t=>t?{id:t.id,userId:t.user_id,userName:t.user&&t.user.first_name&&t.user.last_name?`${t.user.first_name} ${t.user.last_name}`:t.user&&t.user.username||t.userName||"You",userAvatar:t.user&&t.user.avatar_url||t.userAvatar||ld,reason:t.reason,createdAt:t.created_at||t.createdAt,status:t.status,request:t.request}:{},el=(t,r)=>{if(!t)return{};const n=t.requester||r||{};return{id:t.id,courseName:t.course_name,currentSection:t.current_section,desiredSection:t.desired_section,currentDay:t.current_day,currentTime:t.current_time,desiredDay:t.desired_day,desiredTime:t.desired_time,reason:t.reason,status:t.status,requesterId:n.id,requesterName:n.first_name&&n.last_name?`${n.first_name} ${n.last_name}`:n.name||"You",requesterAvatar:n.avatar_url||ld,createdAt:t.created_at,applications:Array.isArray(t.applications)?t.applications.map(i=>({id:i.id,requestId:t.id,userId:i.user_id||(i.user?i.user.id:void 0),status:i.status,user:i.user?{id:i.user.id,name:`${i.user.first_name} ${i.user.last_name}`}:{}})):[]}},sp=({request:t,userId:r,onApply:n,onCancel:i,onDelete:o,onViewApplications:s,onUpdateApplication:a,onUpdateApplicationStatus:c,onEdit:u})=>{var M;typeof window!="undefined"&&localStorage.getItem("role");const h=t.requesterId===r,p=ae("white","gray.800"),x=ae("gray.800","white"),b=ae("gray.600","gray.400"),g=ae("yellow.400","yellow.500"),_=ae("gray.100","gray.700"),S=(M=t.applications)==null?void 0:M.some(J=>J.userId===r&&(J.status==="pending"||J.status==="accepted")),O={pending:"orange",accepted:"green",declined:"red",cancelled:"gray"},k=J=>{if(!J)return"";try{const[re,N]=J.split(":"),D=parseInt(re,10),B=D>=12?"PM":"AM";return`${D%12||12}:${N} ${B}`}catch{return J}};return e.jsxs(rr,{bg:p,boxShadow:"sm",border:"1px solid",borderColor:_,borderRadius:"lg",overflow:"hidden",transition:"all 0.2s",_hover:{transform:"translateY(-2px)",boxShadow:"md"},children:[t.status!=="pending"&&e.jsx(zr,{position:"absolute",top:2,right:2,colorScheme:O[t.status],variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:t.status}),e.jsx(po,{pb:3,children:e.jsxs(ke,{justify:"space-between",align:"start",children:[e.jsxs(ot,{align:"start",spacing:1,children:[e.jsx(ft,{size:"sm",color:x,children:t.courseName}),e.jsxs($,{fontSize:"xs",color:b,children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsxs(dt,{spacing:2,children:[e.jsx(Qn,{size:"sm",colorScheme:"blue",variant:"subtle",minW:"max-content",children:t.currentSection}),e.jsx($,{fontSize:"sm",color:"gray.500",children:"→"}),e.jsx(Qn,{size:"sm",colorScheme:"green",variant:"subtle",minW:"max-content",children:t.desiredSection})]})]})}),e.jsxs(In,{py:0,children:[e.jsxs(fr,{templateColumns:{base:"1fr",sm:"repeat(2, 1fr)"},gap:4,py:3,children:[e.jsxs(ot,{align:"start",spacing:2,children:[e.jsxs(ke,{align:"center",children:[e.jsx(de,{as:zn,mr:2,color:g}),e.jsxs(ot,{spacing:0,align:"start",children:[e.jsx($,{fontSize:"xs",color:b,children:"Current Day"}),e.jsx($,{fontSize:"sm",color:x,children:t.currentDay})]})]}),e.jsxs(ke,{align:"center",children:[e.jsx(de,{as:fs,mr:2,color:g}),e.jsxs(ot,{spacing:0,align:"start",children:[e.jsx($,{fontSize:"xs",color:b,children:"Time"}),e.jsx($,{fontSize:"sm",color:x,children:k(t.currentTime)})]})]})]}),e.jsxs(ot,{align:"start",spacing:2,children:[e.jsxs(ke,{align:"center",children:[e.jsx(de,{as:zn,mr:2,color:g}),e.jsxs(ot,{spacing:0,align:"start",children:[e.jsx($,{fontSize:"xs",color:b,children:"Desired Day"}),e.jsx($,{fontSize:"sm",color:x,children:t.desiredDay})]})]}),e.jsxs(ke,{align:"center",children:[e.jsx(de,{as:fs,mr:2,color:g}),e.jsxs(ot,{spacing:0,align:"start",children:[e.jsx($,{fontSize:"xs",color:b,children:"Time"}),e.jsx($,{fontSize:"sm",color:x,children:k(t.desiredTime)})]})]})]})]}),t.reason&&e.jsxs(de,{mt:2,p:3,bg:ae("gray.50","gray.700"),borderRadius:"md",children:[e.jsx($,{fontSize:"sm",color:b,noOfLines:2,children:t.reason}),c&&t.applications&&t.applications.length>0&&e.jsxs(de,{pt:4,mt:4,borderTopWidth:"1px",borderColor:_,children:[e.jsx(ft,{size:"sm",mb:3,color:x,children:"Applicants"}),e.jsx(ot,{spacing:4,align:"stretch",children:t.applications.map(J=>e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsxs(ke,{align:"center",children:[e.jsx(Fr,{size:"sm",name:J.user.username,src:J.user.avatar}),e.jsxs(de,{ml:3,children:[e.jsx($,{fontWeight:"bold",color:x,children:J.user.username}),e.jsx($,{fontSize:"sm",color:b,children:J.reason})]})]}),e.jsx(de,{textAlign:"right",children:J.status==="pending"?e.jsxs(dt,{spacing:2,children:[e.jsx(Te,{size:"xs",colorScheme:"green",onClick:()=>c(J.id,"approved"),children:"Approve"}),e.jsx(Te,{size:"xs",colorScheme:"red",onClick:()=>c(J.id,"declined"),children:"Decline"})]}):e.jsx(zr,{colorScheme:J.status==="approved"?"green":"red",children:J.status.charAt(0).toUpperCase()+J.status.slice(1)})})]},J.id))})]})]})]}),e.jsx(da,{pt:3,children:e.jsxs(ke,{w:"100%",justify:"space-between",align:"center",children:[e.jsxs(dt,{spacing:2,children:[e.jsx(Fr,{size:"xs",src:t.requesterAvatar,name:t.requesterName}),e.jsx($,{fontSize:"sm",color:x,fontWeight:"medium",children:t.requesterName})]}),t.status==="pending"&&e.jsxs(dt,{spacing:2,children:[h&&e.jsxs(e.Fragment,{children:[e.jsx(Te,{size:"sm",variant:"solid",colorScheme:"blue",onClick:()=>s(t.id),children:t.applications&&t.applications.length>0?`View Applicants (${t.applications.length})`:"No Applicants"}),e.jsxs(un,{children:[e.jsx(hn,{as:Ut,"aria-label":"More actions",icon:e.jsx(Ds,{style:{transform:"rotate(-90deg)"}}),size:"sm",variant:"ghost"}),e.jsxs(fn,{children:[e.jsx(Zt,{icon:e.jsx(co,{}),onClick:()=>i(t.id),children:"Cancel"}),e.jsx(Zt,{icon:e.jsx(qm,{}),onClick:()=>u(t),children:"Edit"}),e.jsx(Zt,{icon:e.jsx($c,{}),color:"red.500",onClick:()=>o(t.id),children:"Delete"})]})]})]}),!h&&S&&e.jsx(Te,{size:"sm",colorScheme:"gray",variant:"solid",isDisabled:!0,children:"Applied"}),!h&&!S&&typeof n=="function"&&e.jsx(Te,{size:"sm",colorScheme:"green",variant:"solid",leftIcon:e.jsx(Di,{}),onClick:()=>n(t.id),children:"Apply"})]})]})})]})},yv=({application:t,onWithdraw:r})=>{const[n,i]=z.useState(!1),o=z.useRef(),s=ae("white","gray.800"),a=ae("gray.800","white"),c=ae("gray.600","gray.400"),u=ae("gray.100","gray.700"),h={pending:"orange",accepted:"green",declined:"red",cancelled:"gray"},p=t.request,x=(p==null?void 0:p.courseName)||`Request #${t.request_id}`,b=(p==null?void 0:p.currentSection)||"-",g=(p==null?void 0:p.desiredSection)||"-",_=(p==null?void 0:p.currentDay)||"-",S=(p==null?void 0:p.desiredDay)||"-",O=(p==null?void 0:p.currentTime)||"-",k=(p==null?void 0:p.desiredTime)||"-";return p!=null&&p.requesterAvatar,p!=null&&p.requesterName,e.jsxs(rr,{bg:s,boxShadow:"sm",border:"1px solid",borderColor:u,borderRadius:"lg",overflow:"hidden",transition:"all 0.2s",_hover:{transform:"translateY(-2px)",boxShadow:"md"},children:[e.jsx(zr,{position:"absolute",top:2,right:2,colorScheme:h[t.status],variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:t.status}),e.jsx(po,{pb:3,children:e.jsx(ke,{justify:"space-between",align:"start",children:e.jsxs(ot,{align:"start",spacing:1,children:[e.jsx(ft,{size:"sm",color:a,children:x}),e.jsxs($,{fontSize:"xs",color:c,children:["Applied: ",new Date(t.createdAt).toLocaleDateString()]})]})})}),e.jsxs(In,{py:0,children:[e.jsxs(fr,{templateColumns:"repeat(2, 1fr)",gap:4,py:3,children:[e.jsxs(ot,{align:"start",spacing:2,children:[e.jsx($,{fontSize:"sm",fontWeight:"medium",color:a,children:"Current Section"}),e.jsx(Qn,{size:"md",colorScheme:"blue",variant:"subtle",minW:"max-content",children:b}),e.jsx($,{fontSize:"sm",color:c,mt:2,children:"Current Day"}),e.jsx($,{fontSize:"sm",color:a,children:_}),e.jsx($,{fontSize:"sm",color:c,mt:2,children:"Current Time"}),e.jsx($,{fontSize:"sm",color:a,children:O})]}),e.jsxs(ot,{align:"start",spacing:2,children:[e.jsx($,{fontSize:"sm",fontWeight:"medium",color:a,children:"Desired Section"}),e.jsx(Qn,{size:"md",colorScheme:"green",variant:"subtle",minW:"max-content",children:g}),e.jsx($,{fontSize:"sm",color:c,mt:2,children:"Desired Day"}),e.jsx($,{fontSize:"sm",color:a,children:S}),e.jsx($,{fontSize:"sm",color:c,mt:2,children:"Desired Time"}),e.jsx($,{fontSize:"sm",color:a,children:k})]})]}),e.jsxs(de,{mt:2,p:3,bg:ae("gray.50","gray.700"),borderRadius:"md",children:[e.jsx($,{fontSize:"sm",fontWeight:"medium",color:a,children:"Your Reason:"}),e.jsx($,{fontSize:"sm",color:c,children:t.reason})]})]}),e.jsx(da,{pt:3,children:e.jsx(ke,{w:"100%",justify:"space-between",align:"center",children:r&&t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(Te,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>i(!0),"aria-label":"Withdraw Application",children:"Withdraw"}),e.jsx(Bc,{isOpen:n,leastDestructiveRef:o,onClose:()=>i(!1),children:e.jsx(Wr,{children:e.jsxs(qc,{children:[e.jsx(rn,{fontSize:"lg",fontWeight:"bold",children:"Withdraw Application"}),e.jsx(Ur,{children:"Are you sure you want to withdraw this application? This action cannot be undone."}),e.jsxs(dn,{children:[e.jsx(Te,{ref:o,onClick:()=>i(!1),children:"Cancel"}),e.jsx(Te,{colorScheme:"red",ml:3,onClick:()=>{i(!1),r(t.id)},children:"Confirm"})]})]})})})]})})})]})},vv=z.forwardRef(({onEditRequest:t},r)=>{const{isOpen:n,onOpen:i,onClose:o}=Yr(),s=Hr(),a=Jr(),{user:c}=gi(),{isOpen:u,onOpen:h,onClose:p}=Yr(),{courses:x,coursesLoading:b,coursesError:g,coursesPage:_,coursesTotalPages:S,setCoursesPage:O}=Z0({trigger:n||u}),k=ae("gray.50","gray.900"),M=ae("white","gray.800"),J=ae("gray.800","white"),re=ae("gray.600","gray.400");ae("yellow.400","yellow.500");const N=ae("gray.100","gray.700"),[D,B]=z.useState([]),[U,R]=z.useState(1),[P,w]=z.useState(1),[A,T]=z.useState("created_at"),[E,ee]=z.useState("desc"),[Z,y]=z.useState([]),[se,W]=z.useState(1),[v,Y]=z.useState(1),[C,q]=z.useState("created_at"),[L,G]=z.useState("desc"),[Q,ie]=z.useState([]),[ce,le]=z.useState(1),[xe,we]=z.useState(1),[ze,De]=z.useState("created_at"),[$e,ve]=z.useState("desc"),[te,Ce]=z.useState(!0),[Be,Ne]=z.useState({course_code:"",current_day:"",desired_day:""}),[ue,Je]=z.useState(!1);z.useImperativeHandle(r,()=>({fetchAvailableRequestsPaginated:at,fetchMyRequestsPaginated:Lt,fetchMyApplicationsPaginated:Ct}));const[Ke,ut]=z.useState(!1),[Ye,Se]=z.useState(!1),[ye,Ae]=z.useState(null),[Me,_e]=z.useState(""),[Fe,Ee]=z.useState(!1),[it,Ve]=z.useState([]),at=async(qe=1,pt=A,lt=E)=>{Ce(!0);try{const zt=await lv({page:qe,sort_by:pt,sort_order:lt});B(Array.isArray(zt.data)?zt.data.map(el):[]),w(zt.last_page||1),R(zt.current_page||1)}catch(zt){s({title:"Failed to load available requests",description:zt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{Ce(!1)}},Lt=async(qe=1,pt=C,lt=L)=>{Ce(!0);try{const zt=await dv({page:qe,sort_by:pt,sort_order:lt});let Rt=[];Array.isArray(zt.data)&&(Rt=zt.data.map(Pt=>el(Pt,c))),y(Rt),Y(zt.last_page||1),W(zt.current_page||1)}catch(zt){s({title:"Failed to load your requests",description:zt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{Ce(!1)}},Ct=async(qe=1,pt=ze,lt=$e)=>{Ce(!0);try{const zt=await uv({page:qe,sort_by:pt,sort_order:lt});we(zt.last_page||1),le(zt.current_page||1);const Rt=zt.data||[],Pt=Array.isArray(Rt)?Rt.map(Sr=>Sr&&Sr.request_id).filter(Boolean):[],hr=await Promise.all(Pt.map(Sr=>fv(Sr).catch(()=>null))),jr={};hr.forEach((Sr,Dn)=>{Sr&&Sr.id&&(jr[Sr.id]=Sr)});const pn=Array.isArray(Rt)?Rt.map(Sr=>{const Dn=ip(Sr),An=Sr&&Sr.request?el(Sr.request):Sr&&jr[Sr.request_id]?el(jr[Sr.request_id]):void 0;return{...Dn,request:An}}):[];ie(pn)}catch(zt){s({title:"Failed to load applications",description:zt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{Ce(!1)}};z.useEffect(()=>{at(U,A,E)},[U,A,E]),z.useEffect(()=>{Lt(se,C,L)},[se,C,L]),z.useEffect(()=>{Ct(ce,ze,$e)},[ce,ze,$e]);const be=qe=>{const{name:pt,value:lt}=qe.target;Ne(zt=>({...zt,[pt]:lt}))},st=async()=>{Je(!0);try{const qe=await cv({course_name:Be.course_code,current_day:Be.current_day,desired_day:Be.desired_day});B(Array.isArray(qe.data)?qe.data.map(el):[]),p()}catch(qe){s({title:"Failed to apply filters",description:qe.message||"Please try again later",status:"error",duration:4e3,isClosable:!0})}finally{Je(!1)}},Ie=async qe=>{try{await xv(qe),ie(pt=>pt.filter(lt=>lt.id!==qe)),at(),s({title:"Application withdrawn",description:"Your application has been successfully withdrawn.",status:"info",duration:3e3,isClosable:!0})}catch(pt){s({title:"Failed to withdraw application",description:pt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},et=async qe=>{if(window.confirm("Are you sure you want to delete this request? This cannot be undone."))try{await pv(qe),y(pt=>pt.filter(lt=>lt.id!==qe)),s({title:"Request deleted",status:"info",duration:3e3,isClosable:!0})}catch(pt){s({title:"Failed to delete request",description:pt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},Tt=qe=>{Ae(qe),_e(""),ut(!0)},Le=async()=>{if(!Fe){Ee(!0);try{await gv(ye,{reason:Me}),B(qe=>qe.map(pt=>pt.id===ye?{...pt,applications:[...pt.applications||[],{id:Date.now().toString(),userId:c.id,userName:"You",userAvatar:ld,reason:Me,createdAt:new Date().toISOString(),status:"pending"}]}:pt)),await Ct(),s({title:"Application submitted",description:"Your application has been submitted to the request owner.",status:"success",duration:3e3,isClosable:!0}),ut(!1),_e(""),Ae(null)}catch(qe){s({title:"Failed to submit application",description:qe.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{Ee(!1)}}},We=async qe=>{try{const pt=await mv(qe);Ae(qe),Ve(pt.map(ip)),Se(!0)}catch(pt){s({title:"Failed to load applications",description:pt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},tt=async qe=>{try{await np(qe,{status:"accepted"});const pt=it.map(lt=>lt.id===qe?{...lt,status:"accepted"}:{...lt,status:lt.status==="pending"?"declined":lt.status});Ve(pt),y(lt=>lt.map(zt=>zt.id===ye?{...zt,status:"accepted",applications:pt}:zt)),Se(!1),s({title:"Application accepted",description:"You have accepted the application for your class exchange request.",status:"success",duration:3e3,isClosable:!0})}catch(pt){s({title:"Failed to accept application",description:pt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},rt=async qe=>{try{await np(qe,{status:"declined"});const pt=it.map(lt=>lt.id===qe?{...lt,status:"declined"}:lt);Ve(pt),y(lt=>lt.map(zt=>zt.id===ye?{...zt,applications:pt}:zt)),s({title:"Application declined",description:"You have declined the application for your class exchange request.",status:"info",duration:3e3,isClosable:!0})}catch(pt){s({title:"Failed to decline application",description:pt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},bt=async qe=>{try{await Q0(qe,{status:"cancelled"}),y(pt=>pt.map(lt=>lt.id===qe?{...lt,status:"cancelled"}:lt)),s({title:"Request cancelled",description:"Your class exchange request has been cancelled.",status:"info",duration:3e3,isClosable:!0})}catch(pt){s({title:"Failed to cancel request",description:pt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},yt=()=>{a(-1)};return e.jsxs(de,{minH:"100vh",bg:k,p:{base:4,md:6},children:[e.jsxs(Ai,{maxW:"7xl",children:[e.jsxs(ke,{mb:8,align:"center",children:[e.jsx(Ut,{icon:e.jsx(Ds,{}),onClick:yt,"aria-label":"Go back",variant:"ghost",color:J,size:"lg",mr:3,_hover:{bg:ae("gray.100","gray.700")}}),e.jsxs(ot,{align:"start",spacing:1,children:[e.jsx(ft,{size:"lg",color:J,children:"Class Exchange Requests"}),e.jsx($,{fontSize:"sm",color:re,children:"Manage your class time exchange requests"})]})]}),e.jsxs(de,{bg:M,borderRadius:"xl",boxShadow:"sm",borderWidth:"1px",borderColor:N,children:[e.jsxs(ke,{justify:"flex-end",p:6,borderBottomWidth:"1px",borderColor:N,children:[e.jsx(Te,{colorScheme:"yellow",leftIcon:e.jsx(Hc,{}),mr:3,onClick:h,children:"Filters"}),e.jsx(Te,{leftIcon:e.jsx(pi,{}),onClick:i,colorScheme:"yellow",size:"md",children:"New Request"})]}),e.jsxs(wn,{isOpen:u,onClose:p,isCentered:!0,children:[e.jsx(Wr,{}),e.jsxs(jn,{children:[e.jsx(rn,{children:"Filter Requests"}),e.jsx(cn,{}),e.jsx(Ur,{children:e.jsxs(br,{spacing:4,children:[e.jsxs(mt,{children:[e.jsx(xt,{children:"Course"}),e.jsxs(un,{isLazy:!0,children:[e.jsx(hn,{as:Te,width:"100%",rightIcon:e.jsx("span",{style:{marginLeft:8},children:"▼"}),isLoading:b,isDisabled:b||!!g,textAlign:"left",children:Be.course_code?(()=>{const qe=x.find(pt=>pt.code===Be.course_code);return qe?`${qe.code} - ${qe.title}`:Be.course_code})():b?"Loading courses...":"Select course"}),e.jsxs(fn,{maxH:"250px",overflowY:"auto",minW:"250px",px:0,children:[g?e.jsx(Zt,{isDisabled:!0,children:"Failed to load courses"}):x.length===0&&!b?e.jsx(Zt,{isDisabled:!0,children:"No courses found"}):x.map(qe=>e.jsx(Zt,{value:qe.title,onClick:()=>Ne(pt=>({...pt,course_code:qe.code})),_active:{bg:"gray.100"},_selected:{fontWeight:"bold",bg:"gray.200"},style:Be.course_code===qe.code?{fontWeight:"bold",background:"#f7fafc"}:{},children:qe.code?`${qe.code} - ${qe.title}`:qe.title},qe.id)),e.jsx(de,{borderTop:"1px solid #eee",mt:2,pt:2,px:2,children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"xs",onClick:qe=>{qe.stopPropagation(),O(pt=>Math.max(1,pt-1))},isDisabled:b||_<=1,children:"Prev"}),e.jsxs($,{fontSize:"xs",children:["Page ",_," of ",S]}),e.jsx(Te,{size:"xs",onClick:qe=>{qe.stopPropagation(),O(pt=>Math.min(S,pt+1))},isDisabled:b||_>=S,children:"Next"})]})})]})]})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Current Day"}),e.jsxs(zi,{placeholder:"Select current day",name:"current_day",value:Be.current_day,onChange:be,children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Desired Day"}),e.jsxs(zi,{placeholder:"Select desired day",name:"desired_day",value:Be.desired_day,onChange:be,children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]})]})}),e.jsxs(dn,{children:[e.jsx(Te,{onClick:p,mr:3,variant:"ghost",children:"Cancel"}),e.jsx(Te,{colorScheme:"yellow",onClick:st,isLoading:ue,children:"Apply Filters"})]})]})]}),e.jsxs(Ws,{variant:"soft-rounded",colorScheme:"yellow",children:[e.jsxs(Us,{px:6,pt:4,children:[e.jsx(Sn,{fontSize:"sm",_selected:{fontWeight:"semibold",color:J},children:"Available"}),e.jsxs(Sn,{fontSize:"sm",_selected:{fontWeight:"semibold",color:J},children:["My Requests (",Z.length,")"]}),e.jsx(Sn,{fontSize:"sm",_selected:{fontWeight:"semibold",color:J},children:"My Applications"})]}),e.jsxs(fo,{p:6,children:[e.jsx(kn,{p:0,children:te?e.jsx(ke,{justify:"center",py:10,children:e.jsx(qr,{size:"xl"})}):D.length>0?e.jsxs(e.Fragment,{children:[e.jsx(fr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:6,children:D.map(qe=>e.jsx(sp,{request:qe,userId:c.id,onApply:Tt,onViewApplications:We,onEdit:t,onDelete:et},qe.id))}),e.jsx(Mc,{currentPage:U,totalPages:P,onPageChange:R,isLoading:te})]}):e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:N,borderRadius:"lg",children:e.jsx($,{color:re,children:"No available requests at this time"})})}),e.jsx(kn,{p:0,children:te?e.jsx(ke,{justify:"center",py:10,children:e.jsx(qr,{size:"xl"})}):Z.length>0?e.jsxs(e.Fragment,{children:[e.jsx(fr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:6,children:Z.map(qe=>e.jsx(sp,{request:qe,userId:c.id,onCancel:bt,onDelete:et,onViewApplications:We,onEdit:t},qe.id))}),e.jsx(Mc,{currentPage:se,totalPages:v,onPageChange:W,isLoading:te})]}):e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:N,borderRadius:"lg",children:e.jsx($,{color:re,children:"No personal requests found"})})}),e.jsx(kn,{p:0,children:te?e.jsx(ke,{justify:"center",py:10,children:e.jsx(qr,{size:"xl"})}):Q.length>0?e.jsxs(e.Fragment,{children:[e.jsx(fr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:6,mb:6,children:Q.map(qe=>e.jsx(yv,{application:qe,onWithdraw:Ie},qe.id))}),e.jsx(ke,{justify:"center",mt:6,mb:4,children:e.jsxs(Xg,{isAttached:!0,variant:"outline",size:"sm",children:[e.jsx(Ut,{icon:e.jsx(Ds,{}),isDisabled:ce<=1,onClick:()=>le(qe=>Math.max(qe-1,1)),"aria-label":"Previous page"}),e.jsxs(Te,{isDisabled:!0,children:["Page ",ce," of ",xe]}),e.jsx(Ut,{icon:e.jsx(ua,{}),isDisabled:ce>=xe,onClick:()=>le(qe=>Math.min(qe+1,xe)),"aria-label":"Next page"})]})})]}):e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:N,borderRadius:"lg",children:e.jsx($,{color:re,children:"No applications submitted yet"})})})]})]})]})]}),e.jsx(eg,{isOpen:n,onClose:o,mode:"create",initialData:{},onSubmit:async qe=>{var pt,lt;try{const zt=await hv({course_name:qe.courseName,current_section:qe.currentSection,desired_section:qe.desiredSection,current_day:qe.currentDay,current_time:qe.currentTime,desired_day:qe.desiredDay,desired_time:qe.desiredTime,reason:qe.reason});await at(),await Lt(),s({title:"Request created",description:"Your class exchange request has been submitted.",status:"success",duration:3e3,isClosable:!0}),o()}catch(zt){throw s({title:"Failed to create request",description:((lt=(pt=zt.response)==null?void 0:pt.data)==null?void 0:lt.message)||"Please try again later",status:"error",duration:5e3,isClosable:!0}),zt}},courses:x,coursesLoading:b,coursesError:g,coursesPage:_,coursesTotalPages:S,onCoursePageChange:O}),e.jsxs(wn,{isOpen:Ke,onClose:()=>ut(!1),size:"md",children:[e.jsx(Wr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(jn,{bg:M,borderRadius:"xl",children:[e.jsx(rn,{color:J,children:"Apply for Class Exchange"}),e.jsx(cn,{}),e.jsxs(Ur,{children:[e.jsxs(ot,{spacing:4,align:"stretch",children:[e.jsx($,{fontSize:"sm",color:re,children:"Submit your application to exchange class times with the requester. The requester will review all applications and select one to accept."}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{color:J,children:"Why do you want to exchange?"}),e.jsx(ri,{value:Me,onChange:qe=>_e(qe.target.value),placeholder:"Explain why this exchange works for you...",color:J,resize:"vertical",rows:3})]})]}),e.jsxs(ke,{justify:"flex-end",mt:6,gap:3,children:[e.jsx(Te,{variant:"ghost",onClick:()=>ut(!1),children:"Cancel"}),e.jsx(Te,{type:"button",colorScheme:"green",isDisabled:!Me.trim()||Fe,isLoading:Fe,onClick:Le,children:"Submit Application"})]})]})]})]}),e.jsxs(wn,{isOpen:Ye,onClose:()=>Se(!1),size:"xl",children:[e.jsx(Wr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(jn,{bg:M,borderRadius:"xl",children:[e.jsx(rn,{color:J,children:"Applications for Your Request"}),e.jsx(cn,{}),e.jsx(Ur,{children:it.length>0?e.jsx(ot,{spacing:4,align:"stretch",children:it.map(qe=>{var pt;return e.jsxs(rr,{p:4,borderRadius:"md",borderWidth:"1px",borderColor:N,position:"relative",children:[qe.status!=="pending"&&e.jsx(zr,{position:"absolute",top:2,right:2,colorScheme:qe.status==="accepted"?"green":"red",variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:qe.status}),e.jsxs(ke,{mb:3,children:[e.jsx(Fr,{size:"sm",src:qe.userAvatar,name:(pt=qe.user)==null?void 0:pt.name,mr:3}),e.jsxs(ot,{align:"start",spacing:0,children:[e.jsx($,{fontWeight:"medium",color:J,children:qe.userName}),e.jsxs($,{fontSize:"xs",color:re,children:["Applied: ",new Date(qe.createdAt).toLocaleDateString()]})]})]}),e.jsx(de,{p:3,bg:ae("gray.50","gray.700"),borderRadius:"md",mb:3,children:e.jsx($,{fontSize:"sm",color:re,children:qe.reason})}),qe.status==="pending"&&e.jsxs(ke,{justifyContent:"flex-end",gap:2,children:[e.jsx(Te,{size:"sm",colorScheme:"green",onClick:()=>tt(qe.id),children:"Accept"}),e.jsx(Te,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>rt(qe.id),children:"Decline"})]})]},qe.id)})}):e.jsx(de,{p:8,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:N,borderRadius:"lg",children:e.jsx($,{color:re,children:"No applications received yet"})})}),e.jsx(dn,{children:e.jsx(Te,{onClick:()=>Se(!1),children:"Close"})})]})]})]})});function eg({isOpen:t,onClose:r,mode:n="create",initialData:i={},onSubmit:o,courses:s=[],coursesLoading:a=!1,coursesError:c=null,coursesPage:u=1,coursesTotalPages:h=1,onCoursePageChange:p}){var M,J,re,N;const x={id:"",courseName:"",currentSection:"",desiredSection:"",currentDay:"",currentTime:"",desiredDay:"",desiredTime:"",reason:""},[b,g]=z.useState({...x,...i}),[_,S]=z.useState(!1);z.useEffect(()=>{g({...x,...i})},[i]);const O=D=>{const{name:B,value:U}=D.target;g(R=>({...R,[B]:U}))},k=async D=>{D.preventDefault(),S(!0);try{await o(b)}catch{}finally{S(!1)}};return e.jsxs(wn,{isOpen:t,onClose:r,size:"lg",children:[e.jsx(Wr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(jn,{borderRadius:"xl",children:[e.jsx(rn,{children:n==="edit"?"Edit Exchange Request":"Create Exchange Request"}),e.jsx(cn,{}),e.jsxs(Ur,{children:[e.jsxs(ui,{status:"info",variant:"left-accent",mb:4,borderRadius:"md",children:[e.jsx(hi,{}),e.jsx($,{fontSize:"sm",children:"You can only make up to 2 exchange requests per day."})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs(br,{spacing:4,children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Course"}),e.jsxs(un,{isLazy:!0,children:[e.jsx(hn,{as:Te,w:"100%",rightIcon:e.jsx("span",{style:{marginLeft:8},children:"▼"}),isLoading:a,isDisabled:a,variant:"outline",textAlign:"left",children:b.courseName?(M=s.find(D=>(D.code||D.name)===b.courseName))!=null&&M.code?`${(J=s.find(D=>(D.code||D.name)===b.courseName))==null?void 0:J.code} - ${(re=s.find(D=>(D.code||D.name)===b.courseName))==null?void 0:re.title}`:(N=s.find(D=>(D.code||D.name)===b.courseName))==null?void 0:N.name:a?"Loading courses...":"Select course"}),e.jsxs(fn,{maxH:"320px",overflowY:"auto",minW:"320px",px:0,children:[c&&e.jsx(de,{px:4,py:2,children:e.jsx($,{color:"red.500",fontSize:"sm",children:c})}),a?e.jsx(de,{px:4,py:2,children:e.jsx($,{fontSize:"sm",children:"Loading..."})}):s.length===0?e.jsx(de,{px:4,py:2,children:e.jsx($,{fontSize:"sm",color:"gray.500",children:"No courses found."})}):s.map(D=>e.jsx(Zt,{value:D.code||D.name,onClick:()=>g(B=>({...B,courseName:D.code||D.name})),bg:(D.code||D.name)===b.courseName?"blue.50":void 0,fontWeight:(D.code||D.name)===b.courseName?"bold":"normal",children:D.code?`${D.code} - ${D.title}`:D.name},D.id||D.code)),e.jsx(de,{borderTop:"1px solid",borderColor:"gray.100",mt:2,px:2,py:1,children:e.jsx(Mc,{currentPage:u,totalPages:h,onPageChange:p,isLoading:a})})]})]})]}),e.jsxs(fr,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Current Section"}),e.jsx(Ft,{name:"currentSection",value:b.currentSection,onChange:O,placeholder:"e.g., A, B, C"})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Desired Section"}),e.jsx(Ft,{name:"desiredSection",value:b.desiredSection,onChange:O,placeholder:"e.g., B, C, D"})]})]}),e.jsxs(fr,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Current Day"}),e.jsxs(zi,{name:"currentDay",value:b.currentDay,onChange:O,placeholder:"Select day",children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Current Time"}),e.jsx(Ft,{name:"currentTime",value:b.currentTime,onChange:O,type:"time"})]})]}),e.jsxs(fr,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Desired Day"}),e.jsxs(zi,{name:"desiredDay",value:b.desiredDay,onChange:O,placeholder:"Select day",children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(mt,{isRequired:!0,children:[e.jsx(xt,{children:"Desired Time"}),e.jsx(Ft,{name:"desiredTime",value:b.desiredTime,onChange:O,type:"time"})]})]}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Reason (Optional)"}),e.jsx(ri,{name:"reason",value:b.reason,onChange:O,placeholder:"Explain why you need to exchange class times...",resize:"vertical",rows:2})]})]}),e.jsxs(ke,{justify:"flex-end",mt:6,gap:3,children:[e.jsx(Te,{variant:"ghost",onClick:r,children:"Cancel"}),e.jsx(Te,{type:"submit",colorScheme:n==="edit"?"blue":"yellow",isLoading:_,children:n==="edit"?"Update":"Create Request"})]})]})]})]})]})}function wv(t){const r=z.useRef(),n=Hr(),{courses:i,coursesLoading:o,coursesError:s,coursesPage:a,coursesTotalPages:c,setCoursesPage:u}=Z0({trigger:t.editRequestModalOpen}),[h,p]=z.useState(!1),[x,b]=z.useState(null),[g,_]=z.useState(!1),S=k=>{b(k),p(!0)},O=async k=>{_(!0);try{const M={course_name:k.courseName,current_section:k.currentSection,desired_section:k.desiredSection,current_day:k.currentDay,desired_day:k.desiredDay,current_time:k.currentTime,desired_time:k.desiredTime,reason:k.reason};await Q0(k.id,M),p(!1),b(null),r.current&&(r.current.fetchAvailableRequestsPaginated(),r.current.fetchMyRequestsPaginated()),n({title:"Request updated",status:"success",duration:3e3,isClosable:!0})}catch(M){n({title:"Failed to update request",description:M.message,status:"error",duration:4e3,isClosable:!0})}finally{_(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(vv,{ref:r,onEditRequest:S}),e.jsx(eg,{isOpen:h,onClose:()=>p(!1),mode:"edit",initialData:x||{},onSubmit:O,isLoading:g,courses:i,coursesLoading:o,coursesError:s,coursesPage:a,coursesTotalPages:c,onCoursePageChange:u})]})}const op=({textColor:t,mutedText:r,isCollapsed:n,onClose:i})=>{const{user:o}=gi(),s=ae("rgba(250, 202, 21, 0.3)","rgba(202, 162, 18, 0.3)"),a=Jr(),c=cl(),u=localStorage.getItem("role"),h=(u||"").toLowerCase(),x=[{icon:Jm,label:"Home",path:"/dashboard"},{icon:Uc,label:"Resources",path:"/resources"},{icon:ni,label:"Study Groups",path:"/study-groups"},{icon:zn,label:"Events",path:"/events"},{icon:_u,label:"Clubs",path:"/clubs"},{icon:Bm,label:"Grade Calculator",path:"/grade-calculator"},{icon:Xm,label:"Requests",path:"/requests"},...h==="admin"||h==="moderator"?[{icon:o1,label:"Moderate Resources",path:"/resource-moderation"}]:[]],b=_=>{a(_),i&&i()},g=_=>c.pathname===_||c.pathname.startsWith(_+"/");return e.jsxs(ke,{direction:"column",h:"100%",justify:"space-between",children:[e.jsxs(de,{children:[e.jsx(vn,{py:4,mb:2,children:e.jsx("img",{src:ki,alt:"maaref Logo",style:{maxWidth:n?"40px":"60px",height:"auto",transition:"max-width 0.3s ease"}})}),e.jsx(br,{spacing:3,px:n?1:3,children:x.map(_=>e.jsx(_i,{label:_.label,placement:"right",isDisabled:!n,hasArrow:!0,children:e.jsxs(Te,{leftIcon:n?null:e.jsx(_.icon,{}),justifyContent:n?"center":"flex-start",variant:"ghost",color:t,bg:g(_.path)?s:"transparent",onClick:()=>b(_.path),_hover:{bg:s},px:n?2:4,w:"full",size:"md",children:[!n&&_.label,n&&e.jsx(_.icon,{})]})},_.path))}),e.jsxs(de,{mt:6,children:[!n&&e.jsx($,{px:3,fontSize:"xs",fontWeight:"medium",textTransform:"uppercase",color:r,mb:2,children:"Personal"}),e.jsx(an,{mb:3,opacity:.3}),e.jsx(br,{spacing:3,px:n?1:3,children:e.jsx(_i,{label:"Saved",placement:"right",isDisabled:!n,hasArrow:!0,children:e.jsxs(Te,{leftIcon:n?null:e.jsx(Ki,{}),justifyContent:n?"center":"flex-start",variant:"ghost",color:t,bg:g("/saved-resources")?s:"transparent",onClick:()=>b("/saved-resources"),_hover:{bg:s},px:n?2:4,w:"full",size:"md",children:[!n&&"Saved",n&&e.jsx(Ki,{})]})})})]})]}),e.jsxs(de,{px:n?1:3,py:4,mt:"auto",children:[e.jsx(an,{mb:4}),e.jsxs(un,{placement:"top-end",strategy:"fixed",offset:[0,10],children:[e.jsx(hn,{as:Te,variant:"ghost",w:"full",py:2,borderRadius:"md",textAlign:"left",_hover:{bg:s},children:e.jsxs(dt,{spacing:3,justify:n?"center":"flex-start",children:[e.jsx(Fr,{size:"sm",name:o?`${o.first_name} ${o.last_name}`:"User",src:(o==null?void 0:o.avatar_url)||(o==null?void 0:o.avatar)}),!n&&e.jsxs(de,{children:[e.jsx($,{fontSize:"sm",fontWeight:"medium",color:t,children:o?`${o.first_name} ${o.last_name}`:"Guest"}),e.jsx($,{fontSize:"xs",color:r,children:u})]}),!n&&e.jsx(ht,{as:hs,ml:"auto",fontSize:"sm",color:t})]})}),e.jsxs(fn,{zIndex:1500,shadow:"xl",children:[e.jsx(Zt,{icon:e.jsx(s1,{}),onClick:()=>b("/settings"),children:"Settings"}),e.jsx(an,{}),e.jsx(Zt,{icon:e.jsx(Pc,{}),onClick:()=>{ed()},children:"Sign Out"})]})]})]})]})},jv=dp`
  0% { transform: rotate(0); }
  10% { transform: rotate(15deg); }
  20% { transform: rotate(-15deg); }
  30% { transform: rotate(7deg); }
  40% { transform: rotate(-7deg); }
  50% { transform: rotate(0); }
  100% { transform: rotate(0); }
`,Sv=()=>{var B,U;const{isOpen:t,onOpen:r,onClose:n}=Yr(),{unreadNotifications:i,unreadCount:o,loading:s,error:a,markAsRead:c,markAllAsRead:u}=K0(),h=Kg(),p=ae("white","gray.800"),x=ae("gray.200","gray.600"),b=ae("gray.50","gray.700"),g=ae("brand.navy","white"),_=ae("gray.600","gray.400"),S=ae("brand.gold","brand.goldDark"),O=ae("brand.navy","brand.navyDark"),k=ae("0 4px 20px rgba(0, 0, 0, 0.1)","0 4px 20px rgba(0, 0, 0, 0.3)"),M=`${jv} 1s ease-in-out`,J=ae(`0 0 8px ${((B=h.colors.brand)==null?void 0:B.gold)||"#F2D944"}`,`0 0 8px ${((U=h.colors.brand)==null?void 0:U.goldDark)||"#D9C226"}`),re=z.useRef(),[N,D]=z.useState(!1);return z.useEffect(()=>{if(o>0){D(!0);const R=setTimeout(()=>D(!1),1e3);return()=>clearTimeout(R)}},[o]),e.jsxs(Qg,{isOpen:t,onOpen:r,onClose:n,placement:"bottom-end",initialFocusRef:re,closeOnBlur:!0,gutter:1,strategy:"fixed",children:[e.jsx(Zg,{children:e.jsxs(de,{position:"relative",display:"inline-block",children:[e.jsx(Ut,{icon:e.jsx(ra,{size:20}),"aria-label":"Notifications",variant:"ghost",position:"relative",animation:N?M:void 0,_hover:{transform:"scale(1.05)",bg:`${S}20`,transition:"all 0.2s ease-in-out"},transition:"all 0.2s ease-in-out",borderRadius:"full"}),o>0&&e.jsx(zr,{position:"absolute",top:"-2px",right:"-2px",bg:S,color:O,borderRadius:"full",boxSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"xs",fontWeight:"bold",boxShadow:N?J:"none",transition:"box-shadow 0.3s ease-in-out",border:"2px solid",borderColor:p,zIndex:2,children:o})]})}),e.jsxs(em,{w:{base:"300px",sm:"350px"},maxH:"450px",bg:p,borderColor:x,boxShadow:k,borderRadius:"xl",_focus:{outline:"none"},overflow:"hidden",children:[e.jsx(tm,{bg:p}),e.jsx(rm,{color:g,size:"md"}),e.jsx(nm,{borderBottom:"1px solid",borderColor:x,p:4,fontWeight:"bold",color:g,bg:ae("gray.50","gray.750"),children:e.jsx(ke,{justify:"space-between",align:"center",children:e.jsxs(dt,{spacing:2,children:[e.jsx(ht,{as:ra,color:S}),e.jsx($,{fontSize:"md",children:"Notifications"})]})})}),e.jsx(im,{p:0,overflowY:"auto",maxH:"300px",children:s?e.jsx(vn,{py:10,children:e.jsx($,{color:_,children:"Loading notifications..."})}):a?e.jsx(vn,{py:10,children:e.jsx($,{color:"red.400",children:a})}):i.length>0?e.jsx(ot,{spacing:0,align:"stretch",divider:e.jsx(an,{borderColor:x}),children:i.map(R=>e.jsx(de,{p:4,position:"relative",bg:R.isRead?"transparent":`${S}10`,_hover:{bg:b},transition:"all 0.2s",cursor:"pointer",onClick:()=>c(R.id),borderLeft:"3px solid",borderLeftColor:R.isRead?"transparent":S,children:e.jsxs(ke,{align:"center",children:[e.jsxs(de,{position:"relative",children:[e.jsx(Fr,{size:"md",name:R.user,border:"2px solid",borderColor:R.isRead?x:S}),!R.isRead&&e.jsx(zr,{position:"absolute",top:"-1",right:"-1",bg:S,boxSize:"8px",borderRadius:"full",border:"2px solid",borderColor:p})]}),e.jsxs(de,{ml:4,flex:"1",children:[e.jsxs(ke,{align:"baseline",justify:"space-between",children:[e.jsx($,{fontWeight:R.isRead?"medium":"bold",fontSize:"sm",color:g,noOfLines:1,children:R.user}),e.jsx($,{fontSize:"xs",color:_,children:R.time})]}),e.jsx($,{fontSize:"sm",color:R.isRead?_:g,mt:1,noOfLines:2,children:R.content})]})]})},R.id))}):e.jsx(vn,{py:10,children:e.jsxs(ot,{spacing:2,children:[e.jsx(de,{p:3,borderRadius:"full",bg:`${S}20`,children:e.jsx(ht,{as:ra,fontSize:"xl",color:S})}),e.jsx($,{fontWeight:"medium",color:g,children:"No notifications"}),e.jsx($,{fontSize:"sm",color:_,textAlign:"center",children:"You're all caught up!"})]})})}),e.jsx(sm,{p:0,borderTop:"1px solid",borderColor:x,children:e.jsx(Te,{as:Ii,to:"/notifications",ref:re,variant:"ghost",size:"md",color:O,_hover:{bg:`${S}20`},fontWeight:"medium",width:"100%",height:"50px",borderRadius:"0",rightIcon:e.jsx(ua,{}),onClick:n,children:"See All Notifications"})})]})]})},Cv=({isMobile:t,onLeftOpen:r,colorMode:n,toggleColorMode:i})=>(Jr(),ae("white","gray.800"),ae("gray.200","gray.700"),ae("rgba(250, 202, 21, 0.3)","rgba(202, 162, 18, 0.3)"),e.jsxs(ke,{align:"center",gap:2,ml:"auto",children:[e.jsx(_i,{label:n==="light"?"Dark mode":"Light mode",children:e.jsx(Ut,{size:"md",variant:"ghost",icon:n==="light"?e.jsx(e1,{}):e.jsx(a1,{}),onClick:i,"aria-label":`Toggle ${n==="light"?"Dark":"Light"} Mode`})}),e.jsx(Sv,{})]})),_v=()=>{const{colorMode:t,toggleColorMode:r}=hp(),n=ll({base:!0,lg:!1}),i=ae("white","gray.800"),o=ae("gray.800","whiteAlpha.900"),s=ae("gray.600","gray.400"),a=ae("gray.200","gray.700"),c=ae("gray.50","gray.900");ae("blue.600","blue.400"),ae("yellow.400","yellow.500");const u=ae("gray.100","gray.700"),[h,p]=z.useState(!1),x=()=>p(!h),{isOpen:b,onOpen:g,onClose:_}=Yr();return Yr(),e.jsxs(ke,{direction:{base:"column",lg:"row"},width:"100%",bg:c,minH:"100vh",children:[!n&&e.jsxs(de,{bg:i,borderRight:"1px solid",borderColor:a,width:h?"70px":"240px",flexShrink:0,display:{base:"none",lg:"block"},position:"fixed",left:0,top:0,transition:"width 0.3s ease",height:"100vh",overflowY:"auto",overflowX:"hidden",zIndex:20,px:h?2:4,py:4,css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px"},"&::-webkit-scrollbar-thumb":{background:"gray.300",borderRadius:"24px"}},children:[e.jsx(Ut,{icon:h?e.jsx(ua,{}):e.jsx(Ds,{}),position:"absolute",right:"-12px",top:"20px",size:"sm",borderRadius:"full",bg:i,borderWidth:"1px",borderColor:a,zIndex:30,onClick:x,"aria-label":h?"Expand sidebar":"Collapse sidebar",boxShadow:"sm"}),e.jsx(op,{textColor:o,mutedText:s,highlightBg:u,isCollapsed:h})]}),e.jsxs(de,{flexGrow:1,overflowY:"auto",ml:{base:0,lg:h?"70px":"240px"},transition:"margin-left 0.3s ease",children:[e.jsxs(ke,{direction:{base:"column",md:"row"},align:{base:"flex-start",md:"center"},justify:"space-between",mb:4,gap:4,px:6,py:4,bg:i,borderBottom:"1px solid",borderColor:a,children:[e.jsx(ke,{align:"center",gap:2,children:n&&e.jsx(Ut,{icon:e.jsx(Qm,{}),variant:"ghost",onClick:g,"aria-label":"Open menu",mr:2})}),e.jsx(Cv,{isMobile:n,onLeftOpen:g,colorMode:t,toggleColorMode:r})]}),e.jsx(de,{p:{base:4,md:6},children:e.jsx(fp,{})})]}),e.jsxs(om,{isOpen:b,placement:"left",onClose:_,children:[e.jsx(Wr,{}),e.jsxs(am,{bg:i,children:[e.jsx(cn,{}),e.jsx(Ur,{p:4,pt:12,children:e.jsx(op,{textColor:o,mutedText:s,highlightBg:u,isCollapsed:!1,onClose:_})})]})]})]})},kv=()=>{const t=ae("gray.50","gray.800"),r=ae("gray.600","gray.300"),n=ae("brand.navy","white");return e.jsx(de,{bg:t,minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:e.jsxs(ot,{spacing:8,textAlign:"center",maxW:"xl",children:[e.jsx(ft,{fontSize:{base:"6xl",md:"8xl"},fontWeight:"bold",color:n,children:"404"}),e.jsx(Ir,{src:ki,alt:"Page not found",boxSize:{base:"400px",md:"300px"}}),e.jsx(ft,{size:"xl",color:n,children:"Page Not Found"}),e.jsx($,{fontSize:"lg",color:r,children:"The page you're looking for doesn't exist or has been moved."}),e.jsx(Te,{as:Ii,to:"/dashboard",variant:"primary",size:"lg",mt:4,children:"Return to Dashboard"})]})})};function Av(t){return St({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm32 160a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM96 352a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM64 416c0-17.7 14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32zM192 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zm64-64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM288 448a32 32 0 1 1 0-64 32 32 0 1 1 0 64z"},child:[]}]})(t)}const ap=[{id:1,name:"Partial Exam 1",weight:15,grade:""},{id:2,name:"Partial Exam 2",weight:15,grade:""},{id:3,name:"Quizzes (Avg)",weight:15,grade:""},{id:4,name:"Assignment",weight:10,grade:""},{id:5,name:"Attendance",weight:5,grade:""},{id:6,name:"Participation",weight:5,grade:""},{id:7,name:"Final Exam",weight:35,grade:""}],Lv=t=>t>=95?"A+":t>=90?"A":t>=85?"B+":t>=80?"B":t>=75?"C+":t>=70?"C":t>=65?"D+":t>=60?"D":"F",Pv=()=>{const t=Hr(),[r,n]=z.useState(ap),[i,o]=z.useState(70),[s,a]=z.useState(null),[c,u]=z.useState(7),[h,p]=z.useState(7),x=z.useMemo(()=>r.reduce((N,D)=>N+Number(D.weight||0),0),[r]),b=(N,D,B)=>{let U=B;if((D==="weight"||D==="grade")&&B!==""){const R=Number(B);if(isNaN(R)||R<0||R>100)return;U=R}n(r.map(R=>R.id===N?{...R,[D]:U}:R)),a(null)},g=()=>{n([...r,{id:c,name:"",weight:0,grade:""}]),u(c+1)},_=N=>{N===h&&p(null),n(r.filter(D=>D.id!==N)),a(null)},S=()=>{if(x!==100){t({title:"Invalid Weights",description:`Total weight must be 100%, but it is currently ${x}%.`,status:"error",duration:5e3,isClosable:!0});return}const N=h?r.find(B=>B.id===h):null;if(N&&N.grade!==""){let B=0;r.forEach(R=>{const P=parseFloat(R.grade),w=parseFloat(R.weight);!isNaN(P)&&!isNaN(w)&&(B+=P*w/100)});const U=Lv(B);a({overall:B.toFixed(2),passed:B>=i,letterGrade:U})}else{if(!N){t({title:"Final Exam Not Set",description:"Please select which component is the final exam to calculate the required score.",status:"info",duration:5e3,isClosable:!0});return}let B=0;r.forEach(P=>{if(P.id!==h){const w=parseFloat(P.grade),A=parseFloat(P.weight);!isNaN(w)&&!isNaN(A)&&(B+=w*A/100)}});const U=parseFloat(N.weight);if(isNaN(U)||U===0){t({title:"Invalid Final Weight",description:"The final exam must have a weight greater than 0.",status:"error",duration:5e3,isClosable:!0});return}const R=(i-B)*100/U;a({currentTotal:B.toFixed(2),neededFinal:R})}},O=()=>{n(ap),o(70),a(null)},k=ae("white","gray.800"),M=ae("gray.800","whiteAlpha.900"),J=ae("gray.600","gray.400"),re=ae("gray.200","gray.700");return e.jsxs(de,{children:[e.jsx(lr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(rr,{mb:6,p:6,borderRadius:"xl",borderWidth:"1px",borderColor:re,bg:k,children:e.jsxs(ke,{alignItems:"center",gap:4,children:[e.jsx(ht,{as:zs,w:10,h:10,color:ae("blue.600","blue.400")}),e.jsxs(de,{children:[e.jsx(ft,{size:"lg",color:M,children:"Dynamic Grade Calculator"}),e.jsx($,{color:J,children:"Add, remove, and edit grade components to match any course structure."})]})]})})}),e.jsx(rr,{bg:k,borderWidth:"1px",borderColor:re,borderRadius:"lg",children:e.jsx(In,{children:e.jsxs(ot,{spacing:6,align:"stretch",children:[e.jsxs(ot,{spacing:4,align:"stretch",p:4,borderWidth:"1px",borderRadius:"md",children:[e.jsx(ft,{size:"sm",children:"Settings"}),e.jsxs(mt,{children:[e.jsx(xt,{children:"Passing Grade (%)"}),e.jsx($d,{value:i,onChange:N=>o(Number(N)),min:0,max:100,children:e.jsx(Gd,{})})]}),e.jsxs(de,{children:[e.jsxs($,{fontWeight:"bold",children:["Total Weight: ",x,"%"]}),x!==100&&e.jsxs(ui,{status:"warning",mt:2,borderRadius:"md",children:[e.jsx(hi,{}),"Must equal 100%."]})]})]}),e.jsx(ot,{spacing:4,align:"stretch",children:r.map((N,D)=>e.jsx(lr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:D*.05},children:e.jsxs(dt,{spacing:3,p:3,borderWidth:"1px",borderRadius:"md",bg:ae("gray.50","gray.700"),children:[e.jsx(_i,{label:"Set as Final Exam",placement:"top",children:e.jsx(Ut,{"aria-label":"Set as Final Exam",icon:e.jsx(Ku,{}),isRound:!0,variant:h===N.id?"solid":"ghost",colorScheme:h===N.id?"yellow":"gray",onClick:()=>p(N.id)})}),e.jsx(Ft,{placeholder:"Component Name (e.g., Midterm)",value:N.name,onChange:B=>b(N.id,"name",B.target.value),fontWeight:"bold"}),e.jsx($d,{value:N.weight,onChange:B=>b(N.id,"weight",B),min:0,max:100,w:"120px",children:e.jsx(Gd,{placeholder:"Weight %"})}),e.jsx($d,{value:N.grade,onChange:B=>b(N.id,"grade",B),min:0,max:100,w:"120px",children:e.jsx(Gd,{placeholder:"/100"})}),e.jsx(Ut,{"aria-label":"Delete component",icon:e.jsx(dl,{}),colorScheme:"red",variant:"ghost",onClick:()=>_(N.id)})]})},N.id))}),e.jsx(dt,{spacing:4,mt:4,w:"full",children:e.jsx(Te,{leftIcon:e.jsx(pi,{}),onClick:g,w:"full",children:"Add Component"})}),e.jsxs(dt,{spacing:4,mt:2,w:"full",children:[e.jsx(Te,{leftIcon:e.jsx(Av,{}),colorScheme:"blue",onClick:S,w:"full",children:"Calculate"}),e.jsx(Te,{onClick:O,w:"full",children:"Reset"})]})]})})}),(()=>{if(!s)return null;let N="info",D="";s.overall?N=s.passed?"success":"error":s.neededFinal&&(s.neededFinal<=0?(N="success",D="You have already secured a passing grade! 🎉"):s.neededFinal>100?(N="error",D="It is impossible to reach the passing grade."):(N="info",D="This is the minimum score required on the final to pass."));const U={success:{bg:ae("green.50","green.900"),borderColor:ae("green.200","green.700")},error:{bg:ae("red.50","red.900"),borderColor:ae("red.200","red.700")},info:{bg:ae("blue.50","blue.900"),borderColor:ae("blue.200","blue.700")}}[N];return e.jsx(lr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(rr,{mt:6,bg:U.bg,borderWidth:"1px",borderColor:U.borderColor,borderRadius:"lg",p:6,children:e.jsxs(ot,{spacing:2,textAlign:"center",children:[s.overall&&e.jsxs(e.Fragment,{children:[e.jsx(ft,{size:"lg",children:"Result"}),e.jsxs($,{fontSize:"4xl",fontWeight:"bold",children:[s.overall," ",e.jsxs($,{as:"span",fontSize:"3xl",fontWeight:"medium",children:["(",s.letterGrade,")"]})]}),e.jsx($,{fontSize:"md",color:J,mt:-2,children:"Overall Grade"}),e.jsx(an,{my:3}),e.jsx($,{fontSize:"lg",fontWeight:"semibold",children:s.passed?"Congratulations, you passed!":"You did not pass."})]}),s.currentTotal!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(ft,{size:"lg",children:"Calculation"}),e.jsxs($,{fontSize:"lg",children:["Your current grade (without the final) is ",e.jsxs("strong",{children:[s.currentTotal,"%"]}),"."]}),e.jsx(an,{my:3}),e.jsx($,{fontSize:"lg",children:"To pass, you need at least:"}),e.jsxs($,{fontSize:"4xl",fontWeight:"bold",children:[s.neededFinal.toFixed(2),"%"]}),e.jsx($,{fontSize:"md",color:J,mt:-2,children:"on the Final Exam"}),e.jsx($,{fontSize:"sm",mt:2,children:D})]})]})})})})()]})},Nv=({roles:t=[]})=>{const{user:r,loading:n}=gi();return n?e.jsx(vn,{minH:"80vh",children:e.jsx(qr,{size:"xl",color:"blue.500"})}):r?t.length>0&&(!r.roles||!t.some(i=>r.roles.includes(i)))?e.jsx(kc,{to:"/unauthorized",replace:!0}):e.jsx(fp,{}):e.jsx(kc,{to:"/login",replace:!0})},Ov=({lastUpdated:t,likes:r=0,commentsCount:n=0,courseName:i="",courseCode:o=""})=>{const s=ae("white","gray.800"),a=ae("gray.200","gray.700"),c=ae("gray.600","gray.400"),u=t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-",h=!!(i||o);return e.jsxs(rr,{mb:6,bg:s,borderColor:a,borderWidth:"1px",boxShadow:"sm",children:[e.jsx(po,{pb:2,children:e.jsx(ft,{size:"md",children:"Quick Info"})}),e.jsx(In,{pt:0,children:e.jsxs(ot,{spacing:4,align:"stretch",children:[h&&e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx($,{fontSize:"sm",color:c,mb:1,children:"Course"}),e.jsx(dt,{children:e.jsxs($,{fontWeight:"medium",children:[o&&e.jsxs(e.Fragment,{children:[o," • "]}),i]})})]}),e.jsx(an,{})]}),e.jsxs(de,{children:[e.jsx($,{fontSize:"sm",color:c,mb:1,children:"Last Updated"}),e.jsx(dt,{children:e.jsx($,{fontWeight:"medium",children:u})})]}),e.jsx(an,{}),e.jsxs(de,{children:[e.jsx($,{fontSize:"sm",color:c,mb:1,children:"Upvotes"}),e.jsxs(dt,{children:[e.jsx(ht,{as:Nc,color:c,boxSize:4}),e.jsx($,{fontWeight:"medium",children:r})]})]}),e.jsx(an,{}),e.jsxs(de,{children:[e.jsx($,{fontSize:"sm",color:c,mb:1,children:"Comments"}),e.jsxs(dt,{children:[e.jsx(ht,{as:Zm,color:c,boxSize:4}),e.jsx($,{fontWeight:"medium",children:n})]})]})]})})]})},Rv=z.lazy(()=>ho(()=>import("./index-BJNqqCsF.js").then(t=>t.i),__vite__mapDeps([3,1,2]))),Ev=lr(de),Tv=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(de,{className:r,style:{...n,left:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},Fv=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(de,{className:r,style:{...n,right:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},Iv=()=>{var hr,jr,pn,Sr,Dn,An,$n,Gn,si;const{isOpen:t,onOpen:r,onClose:n}=Yr(),i=z.useRef(),[o,s]=z.useState(null),[a,c]=z.useState(null),[u,h]=z.useState(""),{id:p}=Wc(),{user:x}=gi();Jr();const b=Hr(),{isOpen:g,onToggle:_,onOpen:S}=Yr({defaultIsOpen:!0}),O=z.useRef(null),k=z.useRef(null),{colorMode:M}=hp(),{isOpen:J,onOpen:re,onClose:N}=Yr(),[D,B]=z.useState(null),[U,R]=z.useState(!1),P=z.useRef(!1),[w,A]=z.useState(!1),T=z.useRef(!1),E=async(he,kt,Et)=>{try{console.log("Download request for:",{url:he,fileName:kt,fileType:Et});const It=he.split("/"),pr=It[It.length-1];let er=Et;er||(he.includes("/images/")||he.includes("image")?er="images":he.includes("/videos/")||he.includes("video")?er="videos":er="documents"),console.log("Using file type for download:",er);const tr=`${Hs}/resources/download/${er}/${pr}`,Ht=localStorage.getItem("authToken"),yr={};Ht&&(yr.Authorization=`Bearer ${Ht}`);const Nr=await fetch(tr,{headers:yr});if(!Nr.ok){const sr=await Nr.json().catch(()=>({message:"Download failed"}));throw new Error(sr.message||`Download failed with status: ${Nr.status}`)}const nr=await Nr.blob(),Mt=window.URL.createObjectURL(nr),Dt=document.createElement("a");Dt.href=Mt,Dt.download=kt||pr||"download",Dt.style.display="none",document.body.appendChild(Dt),Dt.click(),setTimeout(()=>{document.body.removeChild(Dt),window.URL.revokeObjectURL(Mt)},100)}catch(It){console.error("Download failed:",It)}},ee=he=>he.replace(/<[^>]+>/g,""),Z=async(he,kt="quiz")=>{if(!(!(ue!=null&&ue.id)||!he)){Ie[he]&&(clearInterval(Ie[he]),et(Et=>{const It={...Et};return delete It[he],It})),Ve(Et=>({...Et,[he]:{...Et[he]||{},loading:!0,url:null,name:kt,progress:0,error:null}}));try{const It=(await g0(ue.id,he)).job_id;if(!It)throw new Error("No job ID received from server");Ve(Ht=>({...Ht,[he]:{...Ht[he]||{},jobId:It,progress:10}}));const pr=600*1e3,er=Date.now(),tr=setInterval(async()=>{try{if(Date.now()-er>pr){clearInterval(tr),et(Mt=>{const Dt={...Mt};return delete Dt[he],Dt}),Ve(Mt=>({...Mt,[he]:{...Mt[he]||{},loading:!1,error:"Generation timed out. Please try again."}})),b({title:"Generation timed out",description:"Please try again",status:"error",duration:5e3,isClosable:!0});return}const Ht=await Iu(It),yr=Ht.status,Nr=Date.now()-er,nr=Math.min(10+Nr/pr*80,90);if(Ve(Mt=>({...Mt,[he]:{...Mt[he]||{},progress:yr==="completed"?100:nr}})),yr==="completed"){clearInterval(tr),et(Cr=>{const cr={...Cr};return delete cr[he],cr});const Mt=Ht.result||[];if(!Mt||Mt.length===0){Ve(Cr=>({...Cr,[he]:{...Cr[he]||{},loading:!1,error:"No quiz content generated. Please try again."}})),b({title:"No quiz content generated",description:"Please try again",status:"error",duration:5e3,isClosable:!0});return}const Dt=new Wt;let sr=10;Mt.forEach((Cr,cr)=>{Dt.setFontSize(12);const Gt=Dt.splitTextToSize(`${cr+1}. ${ee(Cr.question)}`,180);Dt.text(Gt,10,sr),sr+=Gt.length*6+4,(Cr.options||[]).forEach((dr,oi)=>{const mi=Dt.splitTextToSize(`${String.fromCharCode(65+oi)}. ${ee(dr)}`,170);Dt.text(mi,14,sr),sr+=mi.length*6+2}),sr+=6,sr>280&&(Dt.addPage(),sr=10)}),Dt.addPage(),Dt.setFontSize(14),Dt.text("Answer Key",10,10);let Xr=20;Mt.forEach((Cr,cr)=>{Dt.setFontSize(12);const Gt=`${cr+1}. ${ee(Cr.correct_answer)}`,dr=Dt.splitTextToSize(Gt,180);if(Dt.text(dr,10,Xr),Xr+=dr.length*6+2,Cr.explanation){Dt.setFontSize(10);const oi=Dt.splitTextToSize(`Explanation: ${ee(Cr.explanation)}`,180);Dt.text(oi,12,Xr),Xr+=oi.length*5+4}Xr>280&&(Dt.addPage(),Xr=10)});const jt=Dt.output("blob"),vr=URL.createObjectURL(jt);Ve(Cr=>({...Cr,[he]:{url:vr,loading:!1,name:kt,progress:100,error:null}})),b({title:"Quiz generated successfully",status:"success",duration:3e3,isClosable:!0})}else if(yr==="failed"){clearInterval(tr),et(Dt=>{const sr={...Dt};return delete sr[he],sr});const Mt=Ht.error||"Generation failed";Ve(Dt=>({...Dt,[he]:{...Dt[he]||{},loading:!1,error:Mt}})),b({title:"Failed to generate quiz",description:Mt,status:"error",duration:5e3,isClosable:!0})}}catch(Ht){console.error("Polling error:",Ht)}},3e3);et(Ht=>({...Ht,[he]:tr}))}catch(Et){Ve(It=>({...It,[he]:{...It[he]||{},loading:!1,error:Et.message||"Failed to start generation"}})),b({title:"Failed to start quiz generation",description:Et.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}}},y=async(he,kt="summary")=>{if(!(!(ue!=null&&ue.id)||!he)){Ie[he]&&(clearInterval(Ie[he]),et(Et=>{const It={...Et};return delete It[he],It})),Lt(Et=>({...Et,[he]:{...Et[he]||{},loading:!0,url:null,name:kt,progress:0,error:null}}));try{const It=(await m0(ue.id,he)).job_id;if(!It)throw new Error("No job ID received from server");Lt(Ht=>({...Ht,[he]:{...Ht[he]||{},jobId:It,progress:10}}));const pr=600*1e3,er=Date.now(),tr=setInterval(async()=>{try{if(Date.now()-er>pr){clearInterval(tr),et(Mt=>{const Dt={...Mt};return delete Dt[he],Dt}),Lt(Mt=>({...Mt,[he]:{...Mt[he]||{},loading:!1,error:"Generation timed out. Please try again."}})),b({title:"Generation timed out",description:"Please try again",status:"error",duration:5e3,isClosable:!0});return}const Ht=await Iu(It),yr=Ht.status,Nr=Date.now()-er,nr=Math.min(10+Nr/pr*80,90);if(Lt(Mt=>({...Mt,[he]:{...Mt[he]||{},progress:yr==="completed"?100:nr}})),yr==="completed"){clearInterval(tr),et(Gt=>{const dr={...Gt};return delete dr[he],dr});const Mt=Ht.result||{},Dt=Mt.introduction||"",sr=Mt.concept_summaries||{},Xr=Array.isArray(Mt.key_topics)&&Mt.key_topics.length?Mt.key_topics:Object.keys(sr);if(!Mt||!Dt&&Object.keys(sr).length===0){Lt(Gt=>({...Gt,[he]:{...Gt[he]||{},loading:!1,error:"No summary content generated. Please try again."}})),b({title:"No summary content generated",description:"Please try again",status:"error",duration:5e3,isClosable:!0});return}const jt=new Wt;let vr=10;Dt&&(jt.setFontSize(14),jt.text("Introduction",10,vr),vr+=8,jt.setFontSize(11),jt.splitTextToSize(Dt,180).forEach(dr=>{jt.text(dr,10,vr),vr+=6,vr>280&&(jt.addPage(),vr=10)}),vr+=4),Xr.forEach(Gt=>{const dr=sr[Gt]||"";if(!dr)return;jt.setFontSize(13),jt.text(Gt,10,vr),vr+=7,jt.setFontSize(11),jt.splitTextToSize(dr,180).forEach(mi=>{jt.text(mi,10,vr),vr+=6,vr>280&&(jt.addPage(),vr=10)}),vr+=6});const Cr=jt.output("blob"),cr=URL.createObjectURL(Cr);Lt(Gt=>({...Gt,[he]:{url:cr,loading:!1,name:kt,progress:100,error:null}})),b({title:"Summary generated successfully",status:"success",duration:3e3,isClosable:!0})}else if(yr==="failed"){clearInterval(tr),et(Dt=>{const sr={...Dt};return delete sr[he],sr});const Mt=Ht.error||"Generation failed";Lt(Dt=>({...Dt,[he]:{...Dt[he]||{},loading:!1,error:Mt}})),b({title:"Failed to generate summary",description:Mt,status:"error",duration:5e3,isClosable:!0})}}catch(Ht){console.error("Polling error:",Ht)}},3e3);et(Ht=>({...Ht,[he]:tr}))}catch(Et){Lt(It=>({...It,[he]:{...It[he]||{},loading:!1,error:Et.message||"Failed to start generation"}})),b({title:"Failed to start summary generation",description:Et.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}}},se=ae("white","gray.700");ae("gray.800","white");const W=ae("gray.500","gray.400"),v=ae("blue.500","blue.300"),Y=ae("gray.200","gray.600"),C=ae("gray.100","gray.600"),q=ae("gray.50","gray.800");ae("blue.50","blue.900");const[L,G]=z.useState(!1),[Q,ie]=z.useState(!1),[ce,le]=z.useState(0),[xe,we]=z.useState(""),[ze,De]=z.useState([]),[$e,ve]=z.useState(47),[te,Ce]=z.useState(!0),[Be,Ne]=z.useState(!1),[ue,Je]=z.useState(null),[Ke,ut]=z.useState(16),[Ye,Se]=z.useState(0),[ye,Ae]=z.useState({}),[Me,_e]=z.useState({}),[Fe,Ee]=z.useState([]),[it,Ve]=z.useState({}),[at,Lt]=z.useState({}),[Ct,be]=z.useState({}),st=z.useRef(new Set),[Ie,et]=z.useState({});(hr=ue==null?void 0:ue.documents)==null||hr.some(he=>he.original_name&&he.original_name.toLowerCase().endsWith(".pdf")||he.url&&he.url.toLowerCase().endsWith(".pdf")),z.useEffect(()=>()=>{Object.values(Ie).forEach(he=>{he&&clearInterval(he)})},[Ie]);const Tt=he=>he?he.startsWith("http")?he:`${ps}${he}`:"",Le=async()=>{try{ie(he=>!he),ue!=null&&ue.id&&(await rd(ue.id),b({title:Q?"Resource removed from saved items":"Resource saved successfully",status:"success",duration:2e3,isClosable:!0}))}catch(he){ie(kt=>!kt),b({title:"Error",description:"Could not update saved status. Please try again.",status:"error",duration:3e3,isClosable:!0}),console.error("Error updating bookmark status:",he)}};z.useEffect(()=>{p&&(async()=>{var kt,Et,It,pr,er,tr,Ht,yr,Nr,nr,Mt,Dt,sr,Xr;Ce(!0);try{const jt=await mc(p);console.log("Resource data:",jt);const vr={id:jt.id,type:((It=(Et=(kt=jt.attachments)==null?void 0:kt[0])==null?void 0:Et.file_type)==null?void 0:It.toUpperCase())||"Resource",title:jt.title,difficulty:"",fileSize:"",dateAdded:jt.created_at,lastUpdated:jt.updated_at,readTime:"",author:{id:(pr=jt.user)==null?void 0:pr.id,name:`${((er=jt.user)==null?void 0:er.first_name)||""} ${((tr=jt.user)==null?void 0:tr.last_name)||""}`.trim()||((Ht=jt.user)==null?void 0:Ht.username)||"Unknown",avatar:(yr=jt.user)==null?void 0:yr.avatar_url,verified:((Nr=jt.user)==null?void 0:Nr.primary_role)==="admin"||((nr=jt.user)==null?void 0:nr.primary_role)==="moderator",resources:null},likes:(Mt=jt.upvote_count)!=null?Mt:0,shares:0,comments:jt.comments||[],images:(jt.attachments||[]).filter(cr=>cr.file_type==="image"),videos:(jt.attachments||[]).filter(cr=>cr.file_type==="video"),documents:(jt.attachments||[]).filter(cr=>cr.file_type==="document"),content:jt.description,courseName:((Dt=jt.course)==null?void 0:Dt.title)||jt.course_name||"",courseCode:((sr=jt.course)==null?void 0:sr.code)||jt.course_code||"",related:[],polls:jt.polls?(Array.isArray(jt.polls)?jt.polls:[jt.polls]).map(Gt=>({id:Gt.id,question:Gt.question,options:(Gt.options||[]).map(dr=>{var oi,mi,gs,xo;return{id:dr.id,text:(mi=(oi=dr.option_text)!=null?oi:dr.text)!=null?mi:"",votes:(xo=(gs=dr.vote_count)!=null?gs:dr.votes)!=null?xo:0}})})):[]};Je(vr),console.log("Resource saved status:",jt.is_saved),ie(jt.is_saved===!0),G(!!jt.is_upvoted),ve((Xr=jt.upvote_count)!=null?Xr:0);const Cr=(jt.comments||[]).map(cr=>({id:cr.id,text:cr.body,date:cr.created_at,user:cr.user,likes:cr.upvote_count||0,isUpvoted:cr.is_upvoted||!1}));De(Cr),setTimeout(()=>{var cr;console.log("Resource images:",vr.images),(cr=vr.images)!=null&&cr.length&&vr.images.forEach(Gt=>{console.log("Image URL:",Gt.url),console.log("Resolved URL:",Tt(Gt.url))})},100)}catch(jt){console.error("Failed to fetch resource",jt),b({title:"Failed to load resource",description:jt.message||"An unexpected error occurred",status:"error",duration:3e3,isClosable:!0})}finally{Ce(!1)}})()},[p]),z.useEffect(()=>{const he=()=>{if(k.current){const{scrollTop:Et,scrollHeight:It,clientHeight:pr}=k.current,er=Et/(It-pr)*100;Se(Math.min(er,100))}},kt=k.current;if(kt)return kt.addEventListener("scroll",he),()=>kt.removeEventListener("scroll",he)},[]);const We=async()=>{const he=L,kt=$e;G(!he),ve(he?kt-1:kt+1);try{await nh(p),b({title:he?"Upvote removed":"Resource upvoted",status:"success",duration:2e3,isClosable:!0})}catch(Et){G(he),ve(kt),b({title:"Unable to update upvote",description:Et.message||"An unexpected error occurred",status:"error",duration:3e3,isClosable:!0})}},tt=async he=>{try{const{message:kt,upvote_count:Et,is_upvoted:It}=await u0(he);De(pr=>pr.map(er=>er.id===he?{...er,isUpvoted:It,likes:Et}:er).sort((er,tr)=>tr.likes-er.likes)),b({title:kt||(It?"Comment upvoted":"Upvote removed"),status:"success",duration:2e3,isClosable:!0})}catch(kt){console.error("Error upvoting comment:",kt),b({title:"Error",description:"Could not update upvote. Please try again.",status:"error",duration:3e3,isClosable:!0})}},rt=async()=>{try{const he=window.location.href;navigator.share?await navigator.share({title:(ue==null?void 0:ue.title)||"Resource",url:he}):(await navigator.clipboard.writeText(he),b({title:"Link copied",description:"Resource link copied to clipboard",status:"success",duration:2e3,isClosable:!0}))}catch(he){console.error("Share failed",he),b({title:"Unable to share",status:"error",duration:2e3,isClosable:!0})}},bt=he=>{c(he.id),h(he.text)},yt=()=>{c(null),setNewCommentText(""),h("")},qe=async()=>{if(!(!a||!u.trim()))try{await c0(a,u.trim()),b({title:"Comment updated",status:"success",duration:2e3,isClosable:!0});const kt=((await mc(p)).comments||[]).map(Et=>({id:Et.id,text:Et.body,date:Et.created_at,user:Et.user,likes:Et.upvote_count||0,isUpvoted:Et.is_upvoted||!1}));De(kt),h(""),yt()}catch(he){console.error("Update comment error",he)}},pt=he=>{s(he),r()},lt=async()=>{if(!(!o||T.current)){T.current=!0,A(!0);try{await d0(o),De(he=>he.filter(kt=>kt.id!==o)),b({title:"Comment deleted",status:"success",duration:2e3,isClosable:!0})}catch(he){console.error("Delete comment error",he),b({title:"Failed to delete comment",status:"error",duration:3e3,isClosable:!0})}finally{s(null),A(!1),T.current=!1,n()}}},zt=async()=>{const he=(xe||"").trim();if(!(P.current||!he)){P.current=!0,R(!0);try{await l0(p,he),we(""),g||S(),b({title:"Comment added",status:"success",duration:2e3,isClosable:!0});const Et=((await mc(p)).comments||[]).map(It=>({id:It.id,text:It.body,date:It.created_at,user:It.user,likes:It.upvote_count||0,isUpvoted:It.is_upvoted||!1}));De(Et)}catch(kt){console.error("Error adding comment:",kt),b({title:"Failed to add comment",description:kt.message||"Please try again later",status:"error",duration:3e3,isClosable:!0})}finally{R(!1),P.current=!1}}},Rt=he=>new Date(he).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),Pt=he=>{const kt=new Date(he),It=new Date-kt,pr=Math.floor(It/1e3),er=Math.floor(pr/60),tr=Math.floor(er/60),Ht=Math.floor(tr/24);return Ht>30?Rt(he):Ht>0?`${Ht}d ago`:tr>0?`${tr}h ago`:er>0?`${er}m ago`:"Just now"};return!te&&!ue?e.jsx(de,{bg:q,minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:e.jsx($,{fontSize:"lg",children:"Resource not found."})}):e.jsx(de,{bg:q,minH:"100vh",children:e.jsxs(de,{maxW:"container.xl",mx:"auto",px:{base:4,md:6},py:6,children:[e.jsx(ke,{w:"full",align:"center",justify:"space-between",mb:4,p:3,bg:se,borderRadius:"md",boxShadow:"sm",position:"sticky",top:"2",zIndex:"sticky",children:e.jsx(Te,{leftIcon:e.jsx(Hn,{}),as:Ii,to:"/resources",variant:"ghost",size:"md",children:"Back to Resources"})}),e.jsxs(fr,{templateColumns:{base:"1fr",lg:"2fr 1fr"},gap:6,children:[e.jsxs(_c,{children:[e.jsx(rr,{overflow:"hidden",bg:se,boxShadow:"sm",mb:6,children:te?e.jsxs(In,{children:[e.jsx(Zo,{mt:"4",noOfLines:1,spacing:"4",skeletonHeight:"10",mb:6}),e.jsx(Zo,{mt:"4",noOfLines:4,spacing:"4",mb:6}),e.jsx(Ar,{height:"300px",mb:6}),e.jsx(Zo,{mt:"4",noOfLines:8,spacing:"4"})]}):e.jsxs(e.Fragment,{children:[e.jsx(po,{pb:3,children:e.jsx(ke,{justify:"space-between",align:"center",mb:4,children:e.jsxs(dt,{spacing:3,children:[e.jsx(Fr,{src:ue.author.avatar,name:ue.author.name,size:"md"}),e.jsxs(de,{children:[e.jsxs(dt,{spacing:2,children:[e.jsx($,{fontWeight:"medium",children:ue.author.id===(x==null?void 0:x.id)?"You":ue.author.name}),ue.author.verified&&e.jsx(ht,{as:Di,color:"blue.500",boxSize:3.5})]}),e.jsx($,{fontSize:"sm",color:W,children:Pt(ue.dateAdded)})]})]})})}),e.jsxs(In,{pt:2,children:[e.jsx(ft,{size:"md",mb:4,children:ue.title}),e.jsx(de,{mb:4,children:e.jsx($,{fontSize:"xl",lineHeight:"1.6",whiteSpace:"pre-wrap",children:ue.content})})]})]})}),e.jsx(rr,{overflow:"hidden",bg:se,boxShadow:"sm",mb:6,children:e.jsxs(Ws,{variant:"enclosed",isLazy:!0,colorScheme:"blue",children:[e.jsxs(Us,{overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",px:{base:2,md:4},sx:{"&::-webkit-scrollbar":{display:"none"}},children:[(((jr=ue==null?void 0:ue.images)==null?void 0:jr.length)||((pn=ue==null?void 0:ue.videos)==null?void 0:pn.length))>0&&e.jsx(Sn,{fontSize:{base:"sm",md:"md"},px:{base:2,md:4},children:"Media"}),((Sr=ue==null?void 0:ue.documents)==null?void 0:Sr.length)>0&&e.jsx(Sn,{fontSize:{base:"sm",md:"md"},px:{base:2,md:4},children:"Documents"}),Fe.length>0&&e.jsx(Sn,{fontSize:{base:"sm",md:"md"},px:{base:2,md:4},children:"Polls"})]}),e.jsxs(fo,{children:[(((Dn=ue==null?void 0:ue.images)==null?void 0:Dn.length)||((An=ue==null?void 0:ue.videos)==null?void 0:An.length))>0&&e.jsxs(kn,{px:0,children:[(($n=ue==null?void 0:ue.images)==null?void 0:$n.length)>0&&e.jsx(rr,{mb:4,width:"full",maxW:"container.md",mx:"auto",bg:se,borderColor:Y,borderWidth:"1px",boxShadow:"sm",children:e.jsx(In,{p:0,children:ue.images.length>1?e.jsx(de,{position:"relative",width:"full",children:e.jsx(A0,{dots:!0,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:ue.images.length>1,prevArrow:ue.images.length>1?e.jsx(Tv,{}):null,nextArrow:ue.images.length>1?e.jsx(Fv,{}):null,css:{".slick-slide":{padding:"0 4px"},".slick-list":{margin:"0 -4px"}},children:ue.images.map(he=>e.jsxs(de,{width:"full",height:{base:"200px",md:"350px"},overflow:"hidden",borderRadius:"md",position:"relative",cursor:"pointer",_hover:{"& img":{transform:"scale(1.03)"}},onClick:()=>{B(Tt(he.url)),re()},children:[e.jsx(Ir,{src:Tt(he.url),alt:he.original_name||ue.title,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease",onError:kt=>{console.error(`Failed to load image: ${he.url}`,kt),kt.target.src="https://via.placeholder.com/400x300?text=Image+Error"},fallback:e.jsx(de,{w:"100%",h:"100%",bg:"gray.200",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx($,{children:"Loading image..."})})}),e.jsx(Ut,{icon:e.jsx(Ci,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"blackAlpha.800"},onClick:kt=>{kt.stopPropagation();const Et=he.original_name||`Image-${ue.title}`;E(he.url,Et,"images")},"aria-label":"Download image"})]},he.id||he.url))})}):e.jsxs(de,{width:"full",height:{base:"200px",md:"350px"},overflow:"hidden",borderRadius:"md",position:"relative",cursor:"pointer",_hover:{"& img":{transform:"scale(1.03)"}},onClick:()=>{B(Tt(ue.images[0].url)),re()},children:[e.jsx(Ir,{src:Tt(ue.images[0].url),alt:ue.images[0].original_name||ue.title,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease",onError:he=>{console.error(`Failed to load image: ${ue.images[0].url}`,he),he.target.src="https://via.placeholder.com/400x300?text=Image+Error"},fallback:e.jsx(de,{w:"100%",h:"100%",bg:"gray.200",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx($,{children:"Loading image..."})})}),e.jsx(Ut,{icon:e.jsx(Ci,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"blackAlpha.800"},onClick:he=>{he.stopPropagation();const kt=ue.images[0].original_name||`Image-${ue.title}`;E(ue.images[0].url,kt,"images")},"aria-label":"Download image"})]},ue.images[0].id||ue.images[0].url)})}),((Gn=ue==null?void 0:ue.videos)==null?void 0:Gn.length)>0&&e.jsx(ot,{spacing:4,mb:4,children:ue.videos.map(he=>e.jsxs(de,{position:"relative",children:[e.jsx(Rv,{url:Tt(he.url),width:"100%",height:"100%",controls:!0,playing:!1,onError:kt=>console.error(`Failed to load video: ${he.url}`,kt)}),e.jsx(Ut,{icon:e.jsx(Ci,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"blackAlpha.800"},onClick:kt=>{kt.stopPropagation();const Et=he.original_name||`Video-${ue.title}`;E(he.url,Et,"videos"),b({title:"Downloading video",description:`${Et} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":"Download video"})]},he.id||he.url))})]}),((si=ue==null?void 0:ue.documents)==null?void 0:si.length)>0&&e.jsx(kn,{px:0,children:e.jsx(de,{mb:4,children:e.jsx(Zn,{spacing:3,children:ue.documents.map((he,kt)=>{var Et,It,pr,er,tr,Ht,yr,Nr,nr,Mt,Dt,sr,Xr;return e.jsxs(ke,{p:3,borderWidth:"1px",borderRadius:"md",alignItems:"center",justifyContent:"space-between",bg:se,_hover:{bg:C},cursor:"pointer",children:[e.jsxs(dt,{spacing:3,children:[e.jsx(ht,{as:Vm,boxSize:5,color:v}),e.jsxs(ke,{align:"center",children:[e.jsx($,{fontWeight:"bold",fontSize:"lg",isTruncated:!0,children:he.original_name||`Document-${kt+1}`}),((Et=it[he.id])==null?void 0:Et.url)&&e.jsx(ht,{as:Di,color:"green.500",ml:2})]})]}),e.jsxs(dt,{spacing:2,children:[e.jsx(Ut,{icon:e.jsx(Um,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:jt=>{jt.stopPropagation(),window.open(Tt(he.url),"_blank")},"aria-label":"Preview document"}),(()=>{var Cr;const jt=(Cr=he.id)!=null?Cr:`idx-${kt}`,vr=!!Ct[jt];return e.jsx(Te,{leftIcon:e.jsx(Ci,{}),size:"sm",colorScheme:"blue",onClick:async cr=>{if(cr.stopPropagation(),st.current.has(jt))return;st.current.add(jt),be(dr=>({...dr,[jt]:!0}));const Gt=he.original_name||`Document-${kt+1}`;try{await E(he.url,Gt,"documents"),b({title:"Downloading document",description:`${Gt} is being downloaded`,status:"info",duration:2e3,isClosable:!0})}catch(dr){b({title:"Download failed",description:(dr==null?void 0:dr.message)||"Please try again",status:"error",duration:3e3,isClosable:!0})}finally{be(dr=>({...dr,[jt]:!1})),st.current.delete(jt)}},isLoading:vr,isDisabled:vr,"aria-label":"Download document",children:"Download"})})(),((he.original_name||"").toLowerCase().endsWith(".pdf")||(he.url||"").toLowerCase().endsWith(".pdf"))&&e.jsxs(un,{strategy:"fixed",children:[e.jsx(hn,{as:Ut,icon:e.jsx(nl,{}),size:"sm",variant:"ghost",onClick:jt=>jt.stopPropagation(),"aria-label":"AI options"}),e.jsxs(fn,{zIndex:9999,bg:se,children:[(It=it[he.id])!=null&&It.url?e.jsx(Zt,{as:"a",icon:e.jsx(Ci,{}),href:it[he.id].url,download:`Quiz-${he.original_name||"quiz"}.pdf`,children:"Download quiz"}):e.jsx(Zt,{icon:e.jsx(xp,{}),isDisabled:(pr=it[he.id])==null?void 0:pr.loading,onClick:jt=>{jt.stopPropagation(),Z(he.id,he.original_name||`Document-${kt+1}`)},children:(er=it[he.id])!=null&&er.loading?e.jsxs(dt,{spacing:2,children:[e.jsx($,{children:"Generating quiz..."}),e.jsx(Is,{size:"sm",value:((tr=it[he.id])==null?void 0:tr.progress)||0,w:"60px"}),e.jsxs($,{fontSize:"sm",children:[((Ht=it[he.id])==null?void 0:Ht.progress)||0,"%"]})]}):(yr=it[he.id])!=null&&yr.error?e.jsxs(ot,{align:"start",spacing:1,children:[e.jsx($,{color:"red.500",children:"Generation failed"}),e.jsx($,{fontSize:"xs",color:"gray.500",children:it[he.id].error}),e.jsx(Te,{size:"xs",colorScheme:"red",variant:"link",onClick:jt=>{jt.stopPropagation(),Z(he.id,he.original_name||`Document-${kt+1}`)},children:"Retry"})]}):"Generate quiz"}),(Nr=at[he.id])!=null&&Nr.url?e.jsx(Zt,{as:"a",icon:e.jsx(Ci,{}),href:at[he.id].url,download:`Summary-${he.original_name||"summary"}.pdf`,children:"Download summary"}):e.jsx(Zt,{icon:e.jsx(Un,{}),isDisabled:(nr=at[he.id])==null?void 0:nr.loading,onClick:jt=>{jt.stopPropagation(),y(he.id,he.original_name||`Document-${kt+1}`)},children:(Mt=at[he.id])!=null&&Mt.loading?e.jsxs(dt,{spacing:2,children:[e.jsx($,{children:"Generating summary..."}),e.jsx(Is,{size:"sm",value:((Dt=at[he.id])==null?void 0:Dt.progress)||0,w:"60px"}),e.jsxs($,{fontSize:"sm",children:[((sr=at[he.id])==null?void 0:sr.progress)||0,"%"]})]}):(Xr=at[he.id])!=null&&Xr.error?e.jsxs(ot,{align:"start",spacing:1,children:[e.jsx($,{color:"red.500",children:"Generation failed"}),e.jsx($,{fontSize:"xs",color:"gray.500",children:at[he.id].error}),e.jsx(Te,{size:"xs",colorScheme:"red",variant:"link",onClick:jt=>{jt.stopPropagation(),y(he.id,he.original_name||`Document-${kt+1}`)},children:"Retry"})]}):"Generate summary"})]})]})]})]},he.id||kt)})})})}),Fe.length>0&&e.jsx(kn,{px:0,children:e.jsx(de,{mb:4,children:Fe.slice(0,1).map((he,kt)=>{const Et=he.id||`poll-${kt}`,It=he.options.reduce((tr,Ht)=>tr+(Ht.votes||0),0);Me[Et];const pr=ye[Et],er=async tr=>{try{const{message:Ht,poll:yr}=await ih(tr),Nr={id:yr.id,question:yr.question,options:(yr.options||[]).map(nr=>{var Mt,Dt,sr,Xr;return{id:nr.id,text:(Dt=(Mt=nr.option_text)!=null?Mt:nr.text)!=null?Dt:"",votes:(Xr=(sr=nr.vote_count)!=null?sr:nr.votes)!=null?Xr:0}})};Ee(nr=>nr.map(Mt=>Mt.id===Nr.id?Nr:Mt)),Ht.startsWith("Vote removed")?(Ae(nr=>({...nr,[he.id]:null})),_e(nr=>({...nr,[he.id]:!1}))):(Ae(nr=>({...nr,[he.id]:tr})),_e(nr=>({...nr,[he.id]:!0}))),b({title:Ht,status:"success",duration:2e3,isClosable:!0})}catch(Ht){console.error("Vote error",Ht),b({title:"Failed to record vote",description:Ht.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}};return e.jsxs(de,{bg:ae("gray.50","gray.700"),p:4,borderRadius:"xl",children:[e.jsx($,{fontWeight:"semibold",mb:3,children:he.question}),e.jsx(ot,{spacing:2,align:"stretch",children:he.options.map((tr,Ht)=>{const yr=tr.id||`option-${Ht}`,Nr=pr===yr,nr=tr.votes||0,Mt=It>0?Math.round(nr/It*100):0;return e.jsxs(de,{position:"relative",p:3,borderRadius:"lg",cursor:"pointer",onClick:()=>er(yr),bg:ae("white","gray.800"),border:"2px solid",borderColor:Nr?"blue.400":"transparent",_hover:{borderColor:Nr?"blue.500":ae("gray.200","gray.600")},children:[e.jsx(de,{position:"absolute",left:0,top:0,bottom:0,width:`${Mt}%`,bg:Nr?"blue.100":ae("gray.100","gray.700"),opacity:.3,borderRadius:"lg"}),e.jsxs(ke,{justify:"space-between",align:"center",position:"relative",children:[e.jsx($,{children:tr.text}),e.jsxs($,{fontWeight:"bold",color:Nr?"blue.500":W,children:[Mt,"%"]})]})]},yr)})}),e.jsxs($,{fontSize:"sm",color:W,mt:2,textAlign:"center",children:[It," ",It===1?"vote":"votes"]})]},Et)})})})]})]})}),e.jsx(rr,{overflow:"hidden",bg:se,boxShadow:"sm",mb:6,children:e.jsxs(In,{children:[e.jsxs(ke,{justify:"space-between",align:"center",mb:4,children:[e.jsxs(ft,{size:"md",children:["Discussion (",ze.length,")"]}),e.jsx(Te,{rightIcon:g?e.jsx(Mm,{}):e.jsx(hs,{}),variant:"ghost",size:"sm",onClick:_,children:g?"Hide":"Show"})]}),g&&e.jsxs(ot,{align:"stretch",spacing:6,children:[e.jsx(de,{p:4,borderWidth:"1px",borderRadius:"lg",bg:se,children:e.jsxs(dt,{align:"start",spacing:3,children:[e.jsx(Fr,{size:"sm",name:x?`${x.first_name} ${x.last_name}`:"User",src:(x==null?void 0:x.avatar_url)||(x!=null&&x.avatar?Tt(x.avatar):void 0)}),e.jsx(ri,{ref:O,value:xe,onChange:he=>we(he.target.value),placeholder:"Add to the discussion...",variant:"unstyled",rows:2,resize:"none",onKeyDown:he=>{he.key==="Enter"&&!he.shiftKey&&(he.preventDefault(),U||zt())}}),e.jsx(Te,{rightIcon:e.jsx(yp,{}),"aria-label":a?"Save edited comment":"Send comment",onClick:zt,colorScheme:"blue",size:"sm",isLoading:U,isDisabled:!(xe!=null&&xe.trim())||U,children:"Send"})]})}),ze.map(he=>{var kt,Et;return e.jsx(Ev,{p:4,borderWidth:"1px",borderRadius:"lg",bg:se,initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs(dt,{align:"start",spacing:3,children:[e.jsx(Fr,{size:"sm",name:he.user?`${he.user.first_name} ${he.user.last_name}`:"Anonymous",src:((kt=he.user)==null?void 0:kt.avatar_url)||((Et=he.user)!=null&&Et.avatar?Tt(he.user.avatar):void 0)}),e.jsxs(de,{flex:"1",children:[e.jsxs(dt,{justify:"space-between",children:[e.jsxs(de,{children:[e.jsx($,{fontWeight:"600",children:he.user.id===(x==null?void 0:x.id)?"You":`${he.user.first_name} ${he.user.last_name}`}),e.jsx($,{fontSize:"sm",color:W,children:Pt(he.date)})]}),e.jsxs(dt,{spacing:2,children:[e.jsx(Te,{variant:"ghost",size:"sm",leftIcon:e.jsx(ht,{as:Nc,color:he.isUpvoted?"green.500":void 0}),color:he.isUpvoted?"green.500":void 0,fontWeight:he.isUpvoted?"bold":"normal",onClick:()=>tt(he.id),children:he.likes||0}),he.user.id===(x==null?void 0:x.id)&&e.jsxs(dt,{spacing:1,children:[e.jsx(Ut,{"aria-label":"Edit",variant:"ghost",size:"sm",icon:e.jsx(la,{}),onClick:()=>bt(he)}),e.jsx(Ut,{"aria-label":"Delete",variant:"ghost",size:"sm",icon:e.jsx($c,{}),onClick:()=>pt(he.id)})]})]})]}),a===he.id?e.jsxs(de,{mt:2,children:[e.jsx(ri,{value:u,onChange:It=>h(It.target.value),rows:2,resize:"vertical"}),e.jsxs(dt,{mt:2,spacing:2,children:[e.jsx(Te,{size:"sm",colorScheme:"blue",onClick:qe,children:"Save"}),e.jsx(Te,{size:"sm",variant:"ghost",onClick:yt,children:"Cancel"})]})]}):e.jsx($,{mt:2,children:he.text})]})]})},he.id)})]})]})})]}),e.jsx(_c,{children:e.jsx(de,{position:"sticky",top:"24",children:e.jsx(Ov,{courseName:ue==null?void 0:ue.courseName,courseCode:ue==null?void 0:ue.courseCode,lastUpdated:ue==null?void 0:ue.lastUpdated,likes:$e,commentsCount:ze==null?void 0:ze.length})})})]}),e.jsx(de,{position:"fixed",bottom:{base:4,md:8},right:{base:4,md:8},zIndex:"tooltip",children:e.jsxs(ot,{spacing:3,children:[e.jsx(Ut,{icon:e.jsx(Nc,{}),variant:L?"solid":"outline",colorScheme:L?"blue":"gray",size:"lg","aria-label":"Upvote",onClick:We}),e.jsx(Ut,{icon:e.jsx(Ki,{}),variant:Q?"solid":"outline",colorScheme:Q?"blue":"gray",size:"lg","aria-label":"Save",onClick:Le}),e.jsx(Ut,{icon:e.jsx(fa,{}),variant:"outline",colorScheme:"gray",size:"lg","aria-label":"Share",onClick:rt})]})}),e.jsx(Bc,{isOpen:t,leastDestructiveRef:i,onClose:w?()=>{}:n,closeOnOverlayClick:!w,closeOnEsc:!w,children:e.jsx(Wr,{children:e.jsxs(qc,{children:[e.jsx(rn,{fontSize:"lg",fontWeight:"bold",children:"Delete Comment"}),e.jsx(Ur,{children:"Are you sure you want to delete this comment? This action cannot be undone."}),e.jsxs(dn,{children:[e.jsx(Te,{ref:i,onClick:n,isDisabled:w,children:"Cancel"}),e.jsx(Te,{colorScheme:"red",onClick:lt,ml:3,isLoading:w,isDisabled:w,children:"Delete"})]})]})})}),e.jsxs(wn,{isOpen:J,onClose:N,size:"full",isCentered:!0,children:[e.jsx(Wr,{}),e.jsxs(jn,{bg:"transparent",boxShadow:"none",maxW:"90vw",maxH:"90vh",m:"auto",children:[e.jsx(cn,{color:"white"}),e.jsx(Ur,{p:0,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(Ir,{src:D,alt:"Preview",borderRadius:"md",maxW:"90vw",maxH:"90vh",objectFit:"contain"})})]})]})]})})},lp=lr(de),cp=({event:t,onBookmark:r,onCardClick:n})=>{const i=ae("white","gray.800"),o=ae("gray.800","whiteAlpha.900"),s=ae("gray.600","gray.400"),a=ae("gray.200","gray.700");if(!t||!t.data)return e.jsx(lp,{p:5,borderWidth:"1px",borderRadius:"lg",borderColor:a,bg:i,textAlign:"center",children:e.jsx($,{color:s,children:"This saved item is no longer available."})});const{title:c,event_datetime:u,location:h,organizer:p,attendees_count:x,image_path:b,is_club_event:g,club:_}=t.data,S=new Date(u)<new Date,O=new Date(u).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),k=new Date(u).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsxs(lp,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",bg:i,borderColor:a,whileHover:{y:-5,boxShadow:"lg"},transition:{type:"spring",stiffness:300},cursor:"pointer",onClick:()=>n(t.data.id),children:[e.jsxs(de,{position:"relative",children:[e.jsx(Ir,{src:`${ps}/storage/${b}`,alt:c,objectFit:"cover",w:"100%",h:"200px"}),S&&e.jsx(zr,{position:"absolute",top:2,left:2,colorScheme:"red",children:"Finished"}),e.jsx(dt,{position:"absolute",top:2,right:2,spacing:2,children:e.jsx(_i,{label:t.isSaved?"Unsave":"Save",placement:"top",children:e.jsx(Ut,{icon:e.jsx(Ki,{fill:t.isSaved?"currentColor":"none"}),onClick:M=>{M.stopPropagation(),r(t.data.id,"Event")},size:"sm",borderRadius:"full",bg:"rgba(0,0,0,0.6)",color:"white",_hover:{bg:"rgba(0,0,0,0.8)"},"aria-label":"Bookmark Event"})})})]}),e.jsxs(ot,{p:4,align:"start",spacing:3,children:[e.jsx(ft,{size:"md",color:o,noOfLines:2,children:c}),e.jsxs(ot,{align:"start",spacing:2,color:s,children:[e.jsxs(dt,{children:[e.jsx(ht,{as:zn}),e.jsx($,{children:O})]}),e.jsxs(dt,{children:[e.jsx(ht,{as:fs}),e.jsx($,{children:k})]}),e.jsxs(dt,{children:[e.jsx(ht,{as:Ko}),e.jsx($,{children:h})]})]}),e.jsxs(ke,{justify:"space-between",align:"center",w:"100%",mt:3,children:[e.jsx(dt,{children:g&&_?e.jsxs(e.Fragment,{children:[e.jsx(Fr,{size:"xs",name:_.name,src:`${ps}/storage/${_.logo_path}`}),e.jsx($,{fontSize:"sm",fontWeight:"bold",children:_.name})]}):e.jsxs($,{fontSize:"sm",children:["Organized by: ",p]})}),e.jsxs(dt,{spacing:1,align:"center",children:[e.jsx(ht,{as:ni}),e.jsx($,{fontSize:"sm",children:x})]})]})]})]})},zv=[{id:"all",name:"All Items",icon:mp,color:"gray.500"},{id:"Resource",name:"Resources",icon:Un,color:"blue.500"},{id:"Event",name:"Events",icon:zn,color:"purple.500"}],Dv=()=>{const t=Jr(),[r,n]=z.useState([]),[i,o]=z.useState(!0),[s,a]=z.useState(null),[c,u]=z.useState(""),[h,p]=z.useState("all"),[x,b]=z.useState("grid"),[g,_]=z.useState(1),S=9,[O,k]=z.useState(null),M=ae("gray.50","gray.900"),J=ae("gray.800","whiteAlpha.900"),re=ae("gray.600","gray.400"),N=ae("gray.200","gray.700"),D=ae("white","gray.800"),B=ae("blue.50","blue.900"),U=ae("gray.100","gray.700");z.useEffect(()=>{(async()=>{o(!0);try{const v=await io();k(v);const C=(await f0()).data.map(q=>({...q,isSaved:!0,data:q.type==="Resource"?{...q.data,is_saved:!0}:q.data}));n(C)}catch(v){a("Failed to fetch saved items. Please try again later."),console.error(v)}finally{o(!1)}})()},[]);const R=async(W,v)=>{const Y=[...r],C=r.filter(q=>{var L;return((L=q.data)==null?void 0:L.id)!==W});n(C);try{v==="Resource"?await rd(W):v==="Event"&&await Zp(W)}catch(q){console.error("Failed to update bookmark status:",q),n(Y)}},P=(W,v)=>{v==="Resource"?t(`/resources/${W}`):v==="Event"&&t("/events")},w=r.filter(W=>{var C,q;if(!W.data)return h==="all"&&c==="";const v=((C=W.data.title)==null?void 0:C.toLowerCase().includes(c.toLowerCase()))||((q=W.data.description)==null?void 0:q.toLowerCase().includes(c.toLowerCase())),Y=h==="all"||W.type===h;return v&&Y}).sort((W,v)=>new Date(v.saved_at||0)-new Date(W.saved_at||0)),A=(g-1)*S,T=w.slice(A,A+S),E=Math.ceil(w.length/S),ee=()=>{window.history.back()},Z={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},y={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},se=()=>{if(i)return e.jsx(vn,{w:"full",py:12,children:e.jsx(fr,{templateColumns:{base:"1fr",md:"repeat(2,1fr)",lg:"repeat(3,1fr)"},gap:6,w:"full",children:[...Array(6)].map((v,Y)=>e.jsxs(de,{borderWidth:"1px",borderRadius:"lg",p:4,bg:D,borderColor:N,children:[e.jsx(Ar,{height:"150px",mb:4}),e.jsx(Zo,{noOfLines:3,spacing:"4"})]},Y))})});if(s)return e.jsx(vn,{h:"300px",children:e.jsxs(ui,{status:"error",borderRadius:"md",children:[e.jsx(hi,{}),e.jsx(lm,{children:"An Error Occurred!"}),e.jsx(cm,{children:s})]})});if(w.length===0)return e.jsx(vn,{h:"300px",children:e.jsxs(ot,{children:[e.jsx(ht,{as:Ki,boxSize:"50px",color:re}),e.jsx(ft,{size:"md",color:J,children:"No Saved Items Found"}),e.jsx($,{color:re,children:c||h!=="all"?"Try adjusting your search or filter.":"You haven't saved any items yet."})]})});const W={base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"};return e.jsx(dm,{mode:"wait",children:e.jsx(lr.div,{variants:Z,initial:"hidden",animate:"show",children:x==="grid"?e.jsx(fr,{templateColumns:W,gap:6,children:T.map(v=>{var Y;return e.jsx(lr.div,{variants:y,children:v.type==="Resource"?e.jsx(Ic,{resource:v.data,onBookmark:()=>R(v.data.id,"Resource"),onCardClick:()=>P(v.data.id,"Resource"),currentUser:O,cardBg:D,textColor:J,mutedText:re,borderColor:N}):e.jsx(cp,{event:v,onBookmark:()=>R(v.data.id,"Event"),onCardClick:()=>P(v.data.id,"Event")})},`${v.type}-${((Y=v.data)==null?void 0:Y.id)||v.saved_at}`)})}):e.jsx(ot,{spacing:4,align:"stretch",children:T.map(v=>{var Y;return e.jsx(lr.div,{variants:y,children:v.type==="Resource"?e.jsx(Ic,{resource:v.data,onBookmark:()=>R(v.data.id,"Resource"),onCardClick:()=>P(v.data.id,"Resource"),currentUser:O,cardBg:D,textColor:J,mutedText:re,borderColor:N}):e.jsx(cp,{event:v,onBookmark:()=>R(v.data.id,"Event"),onCardClick:()=>P(v.data.id,"Event")})},`${v.type}-${((Y=v.data)==null?void 0:Y.id)||v.saved_at}`)})})},x)})};return e.jsxs(de,{bg:M,minH:"100vh",p:{base:4,md:8},children:[e.jsxs(ke,{mb:4,align:"center",children:[e.jsx(Ut,{icon:e.jsx(Hn,{}),"aria-label":"Go back",variant:"ghost",onClick:ee}),e.jsx($,{ml:2,fontWeight:"medium",color:re,children:"Go Back"})]}),e.jsxs(ot,{spacing:6,align:"stretch",children:[e.jsxs(ke,{direction:{base:"column",md:"row"},justify:"space-between",align:{base:"flex-start",md:"center"},gap:4,children:[e.jsxs(de,{children:[e.jsx(ft,{size:"lg",color:J,children:"My Saved Items"}),e.jsx($,{color:re,children:i?"Loading...":`${w.length} items found`})]}),e.jsxs(ke,{gap:2,direction:{base:"column",sm:"row"},w:{base:"100%",md:"auto"},children:[e.jsxs(Er,{w:{base:"100%",sm:"250px"},children:[e.jsx(Br,{pointerEvents:"none",children:e.jsx(ht,{as:ha,color:re})}),e.jsx(Ft,{placeholder:"Search saved items...",value:c,onChange:W=>u(W.target.value),bg:D})]}),e.jsxs(dt,{spacing:1,bg:D,borderRadius:"md",p:1,borderWidth:"1px",borderColor:N,children:[e.jsx(Te,{size:"sm",variant:x==="grid"?"solid":"ghost",onClick:()=>b("grid"),leftIcon:e.jsx(Ym,{}),children:"Grid"}),e.jsx(Te,{size:"sm",variant:x==="list"?"solid":"ghost",onClick:()=>b("list"),leftIcon:e.jsx(xp,{}),children:"List"})]})]})]}),e.jsx(Ws,{variant:"soft-rounded",colorScheme:"blue",children:e.jsx(Us,{overflowX:"auto",py:2,children:zv.map(W=>e.jsxs(Sn,{onClick:()=>p(W.id),bg:h===W.id?B:"transparent",_hover:{bg:U},children:[e.jsx(ht,{as:W.icon,mr:2,color:W.color}),W.name]},W.id))})}),e.jsxs(e.Fragment,{children:[se(),E>1&&e.jsxs(dt,{justify:"center",spacing:4,mt:4,children:[e.jsx(Te,{onClick:()=>_(W=>W-1),isDisabled:g===1,children:"Previous"}),e.jsxs($,{children:["Page ",g," of ",E]}),e.jsx(Te,{onClick:()=>_(W=>W+1),isDisabled:g===E,children:"Next"})]})]})]})]})},Mv=()=>{const t=Hr(),r=Jr(),{user:n}=gi(),i=ae("rgba(255, 255, 255, 0.92)","rgba(45, 55, 72, 0.85)"),o=ae("rgba(226, 232, 240, 0.8)","rgba(74, 85, 104, 0.6)"),s=ae("gray.600","gray.400"),a=ae("blue.50","rgba(49, 130, 206, 0.12)"),c=ae("rgba(226, 232, 240, 0.9)","rgba(74, 85, 104, 0.7)"),u=ae("rgba(237, 242, 247, 0.7)","rgba(45, 55, 72, 0.6)"),h=ae("rgba(203, 213, 224, 0.9)","rgba(74, 85, 104, 0.6)"),[p,x]=z.useState([]),[b,g]=z.useState({current_page:1,last_page:1,total:0}),[_,S]=z.useState(!0),[O,k]=z.useState(null),[M,J]=z.useState(null),[re,N]=z.useState(""),[D,B]=z.useState(""),{isOpen:U,onOpen:R,onClose:P}=Yr(),w=()=>{P(),J(null),N(""),B("")},A=L=>L?Array.isArray(L)?L.map(G=>G==null?void 0:G.toLowerCase()).filter(Boolean):[String(L).toLowerCase()]:[],T=z.useMemo(()=>{const L=(localStorage.getItem("role")||"").toLowerCase(),G=A(n==null?void 0:n.roles),Q=A(n==null?void 0:n.role_names),ie=A(n==null?void 0:n.role),ce=new Set([...G,...Q,...ie,L]);return ce.has("admin")||ce.has("moderator")},[n]),E=L=>{if(!L)return"Unknown";const G=new Date(String(L).replace(" ","T"));return Number.isNaN(G.getTime())?L:G.toLocaleString()},ee=L=>{if(!L)return"#";if(/^https?:\/\//i.test(L))return L;const G=ps||"";return G?L.startsWith("/")?`${G}${L}`:`${G}/${L}`:L},Z=L=>{const G=((L==null?void 0:L.type)||"").toLowerCase(),Q=((L==null?void 0:L.mime_type)||"").toLowerCase();return G==="image"||Q.startsWith("image")?rl:G==="document"||Q.includes("pdf")||Q.includes("word")?Un:t1},y=L=>L?L.poll?L.poll:L.polls&&!Array.isArray(L.polls)?L.polls:null:null,se=z.useCallback(async(L=1)=>{if(T){S(!0);try{const G=await x0({page:L});x(Array.isArray(G==null?void 0:G.data)?G.data:[]),g({current_page:(G==null?void 0:G.current_page)||L,last_page:(G==null?void 0:G.last_page)||1,total:(G==null?void 0:G.total)||0})}catch(G){t({title:"Failed to load pending resources",description:(G==null?void 0:G.message)||(G==null?void 0:G.error)||"Please try again in a moment.",status:"error",duration:4e3,isClosable:!0})}finally{S(!1)}}},[T,t]);z.useEffect(()=>{n&&!T&&(t({title:"Access restricted",description:"You do not have permission to moderate resources.",status:"warning",duration:3e3,isClosable:!0}),r("/dashboard",{replace:!0}))},[n,T,r,t]),z.useEffect(()=>{se(1)},[se]);const W=L=>{L<1||L>b.last_page||L===b.current_page||se(L)},v=L=>{x(G=>G.filter(Q=>Q.id!==L)),g(G=>({...G,total:Math.max((G.total||1)-1,0)}))},Y=async L=>{k(L);try{await b0(L),v(L),t({title:"Resource approved",status:"success",duration:2500,isClosable:!0}),p.length<=1&&b.current_page>1&&se(b.current_page-1)}catch(G){t({title:"Approval failed",description:(G==null?void 0:G.message)||(G==null?void 0:G.error)||"Please try again.",status:"error",duration:3500,isClosable:!0})}finally{k(null)}},C=L=>{J(L),N(""),B(""),R()},q=async()=>{const L=re.trim();if(!L){B("Please provide a reason for rejection.");return}if(M){k(M.id);try{await y0(M.id,L),v(M.id),t({title:"Resource rejected",status:"info",duration:2500,isClosable:!0}),w(),p.length<=1&&b.current_page>1&&se(b.current_page-1)}catch(G){t({title:"Rejection failed",description:(G==null?void 0:G.message)||(G==null?void 0:G.error)||"Please try again.",status:"error",duration:3500,isClosable:!0})}finally{k(null)}}};return T?e.jsxs(de,{position:"relative",bg:ae("gray.50","gray.900"),minH:"calc(100vh - 60px)",py:6,px:{base:4,md:6,lg:8},children:[e.jsxs(ke,{direction:"column",maxW:"1200px",mx:"auto",gap:6,children:[e.jsx(ft,{size:"lg",children:"Resource Moderation"}),e.jsx($,{color:s,maxW:"720px",children:"Review new resources submitted by the community. Approve high-quality contributions or reject those that do not meet the guidelines."}),e.jsxs(de,{bg:i,borderRadius:"xl",border:"1px solid",borderColor:o,boxShadow:"sm",px:{base:4,md:6},py:6,children:[e.jsxs(dt,{spacing:3,mb:4,color:s,children:[e.jsx(fs,{size:20}),e.jsxs($,{fontSize:"sm",children:[b.total," pending ",b.total===1?"resource":"resources"," in queue"]})]}),_?e.jsx(vn,{py:16,children:e.jsx(qr,{size:"lg",color:"blue.400",thickness:"4px"})}):p.length===0?e.jsxs(vn,{py:20,flexDirection:"column",gap:3,children:[e.jsx(Di,{size:36,color:"#48BB78"}),e.jsx(ft,{size:"md",children:"All caught up!"}),e.jsx($,{color:s,children:"No resources are waiting for review right now."})]}):e.jsx(br,{spacing:5,children:p.map(L=>{var G,Q,ie,ce,le,xe;return e.jsx(de,{borderRadius:"lg",border:"1px solid",borderColor:o,bg:ae("white","gray.800"),p:{base:4,md:5},children:e.jsxs(ke,{direction:{base:"column",md:"row"},gap:5,children:[e.jsxs(de,{flex:"1",children:[e.jsxs(dt,{spacing:3,align:"flex-start",mb:3,children:[e.jsx(Fr,{size:"md",name:((G=L==null?void 0:L.user)==null?void 0:G.full_name)||((Q=L==null?void 0:L.user)==null?void 0:Q.username)||"User",src:((ie=L==null?void 0:L.user)==null?void 0:ie.avatar_url)||void 0}),e.jsxs(de,{children:[e.jsxs(dt,{spacing:3,align:"center",children:[e.jsx(ft,{size:"md",children:L.title||"Untitled"}),e.jsx(zr,{colorScheme:"yellow",textTransform:"capitalize",children:L.approval_status||"pending"})]}),e.jsxs($,{fontSize:"sm",color:s,mt:1,children:["Submitted by ",((ce=L==null?void 0:L.user)==null?void 0:ce.full_name)||((le=L==null?void 0:L.user)==null?void 0:le.username)||"Unknown"]}),e.jsx($,{fontSize:"xs",color:s,children:E(L.created_at)})]})]}),e.jsx($,{color:ae("gray.700","gray.200"),whiteSpace:"pre-wrap",children:L.description||"No description provided."}),e.jsx(an,{my:4,opacity:.4}),e.jsxs(br,{direction:{base:"column",md:"row"},spacing:3,fontSize:"sm",color:s,children:[e.jsxs(de,{bg:a,borderRadius:"md",px:3,py:2,children:["Course: ",((xe=L==null?void 0:L.course)==null?void 0:xe.name)||"General"]}),e.jsxs(de,{bg:a,borderRadius:"md",px:3,py:2,children:["Attachments: ",Array.isArray(L.attachments)?L.attachments.length:0]})]}),Array.isArray(L.attachments)&&L.attachments.length>0&&e.jsxs(de,{mt:4,children:[e.jsx($,{fontSize:"sm",fontWeight:"semibold",mb:2,children:"Attachments"}),e.jsx(br,{spacing:2,children:L.attachments.map(we=>{const ze=Z(we),De=ee(we==null?void 0:we.url);return e.jsxs(ke,{align:"center",border:"1px solid",borderColor:c,borderRadius:"md",px:3,py:2,gap:3,children:[e.jsx(ht,{as:ze,fontSize:"lg",color:"blue.400"}),e.jsxs(de,{flex:"1",minW:0,children:[e.jsx($,{noOfLines:1,fontWeight:"medium",children:(we==null?void 0:we.original_name)||(we==null?void 0:we.name)||"Attachment"}),e.jsx($,{fontSize:"xs",color:s,children:(we==null?void 0:we.mime_type)||(we==null?void 0:we.type)||"File"})]}),e.jsx(Te,{as:jc,href:De,isExternal:!0,variant:"ghost",size:"sm",leftIcon:e.jsx(Ci,{}),children:"Open"})]},we.id||we.url)})})]}),(()=>{const we=y(L);if(!we)return null;const ze=Array.isArray(we.options)?we.options:[],De=ze.reduce(($e,ve)=>$e+(ve.vote_count||0),0);return e.jsxs(de,{mt:6,border:"1px solid",borderColor:h,borderRadius:"lg",bg:u,p:4,children:[e.jsxs(dt,{spacing:2,mb:3,color:s,children:[e.jsx(ht,{as:ta}),e.jsx($,{fontWeight:"semibold",children:"Poll Question"})]}),e.jsx($,{fontWeight:"bold",mb:3,children:we.question||"Poll"}),e.jsx(br,{spacing:3,children:ze.length===0?e.jsx($,{fontSize:"sm",color:s,children:"No poll options provided."}):ze.map($e=>{const ve=$e.vote_count||0,te=De>0?Math.round(ve/De*100):0;return e.jsxs(de,{children:[e.jsxs(ke,{justify:"space-between",fontSize:"sm",mb:1,children:[e.jsx($,{fontWeight:"medium",children:$e.option_text}),e.jsxs($,{color:s,children:[ve," votes"]})]}),e.jsx(Is,{value:te,colorScheme:"blue",borderRadius:"md"}),e.jsxs($,{fontSize:"xs",color:s,mt:1,children:[te,"%"]})]},$e.id||$e.option_text)})}),e.jsxs($,{fontSize:"xs",color:s,mt:3,children:["Total votes: ",De]})]})})()]}),e.jsx(an,{orientation:"vertical",display:{base:"none",md:"block"}}),e.jsxs(br,{spacing:3,minW:{md:"220px"},children:[e.jsx(Te,{colorScheme:"green",leftIcon:e.jsx(Di,{}),isLoading:O===L.id,loadingText:"Approving",onClick:()=>Y(L.id),children:"Approve"}),e.jsx(Te,{variant:"outline",colorScheme:"red",leftIcon:e.jsx(co,{}),isLoading:O===L.id&&(M==null?void 0:M.id)===L.id&&U,onClick:()=>C(L),children:"Reject"})]})]})},L.id)})}),!_&&p.length>0&&e.jsx(Mc,{currentPage:b.current_page,totalPages:b.last_page,onPageChange:W,isLoading:_})]})]}),e.jsxs(wn,{isOpen:U,onClose:w,isCentered:!0,size:"lg",children:[e.jsx(Wr,{}),e.jsxs(jn,{children:[e.jsx(rn,{children:"Reject resource"}),e.jsx(cn,{disabled:O===(M==null?void 0:M.id),onClick:w}),e.jsx(Ur,{children:e.jsxs(mt,{isInvalid:!!D,children:[e.jsx(xt,{children:"Reason for rejection"}),e.jsx(ri,{placeholder:"Describe why this resource is being rejected",value:re,onChange:L=>{N(L.target.value),D&&B("")},rows:5}),D&&e.jsx($,{color:"red.500",fontSize:"sm",mt:2,children:D})]})}),e.jsxs(dn,{gap:3,children:[e.jsx(Te,{variant:"ghost",onClick:w,isDisabled:O===(M==null?void 0:M.id),children:"Cancel"}),e.jsx(Te,{colorScheme:"red",leftIcon:e.jsx(co,{}),onClick:q,isLoading:O===(M==null?void 0:M.id),loadingText:"Rejecting",children:"Reject resource"})]})]})]})]}):e.jsx(vn,{minH:"70vh",children:e.jsxs(br,{spacing:4,align:"center",children:[e.jsx(Ju,{size:48,color:"#DD6B20"}),e.jsx($,{color:s,children:"Redirecting..."})]})})},Bv=()=>e.jsxs(mm,{children:[e.jsx(Mr,{path:"/",element:e.jsxs(de,{bg:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",minH:"100vh",children:[e.jsx(h1,{}),e.jsx(p1,{}),e.jsx(g1,{}),e.jsx(m1,{}),e.jsx(u1,{})]})}),e.jsx(Mr,{path:"/login",element:e.jsx(t5,{})}),e.jsx(Mr,{path:"/register",element:e.jsx(i5,{})}),e.jsx(Mr,{path:"/google-callback",element:e.jsx(s5,{})}),e.jsx(Mr,{path:"/complete-google-registration",element:e.jsx(o5,{})}),e.jsx(Mr,{element:e.jsx(Nv,{}),children:e.jsxs(Mr,{element:e.jsx(_v,{}),children:[e.jsx(Mr,{path:"/dashboard",element:e.jsx(a5,{})}),e.jsx(Mr,{path:"/settings",element:e.jsx(Px,{})}),e.jsx(Mr,{path:"/user/:userId",element:e.jsx(Ox,{})}),e.jsx(Mr,{path:"/resources",element:e.jsx(kb,{})}),e.jsx(Mr,{path:"/resources/:id",element:e.jsx(Iv,{})}),e.jsx(Mr,{path:"/clubs",element:e.jsx(qy,{})}),e.jsx(Mr,{path:"/courses/:id",element:e.jsx(Uy,{})}),e.jsx(Mr,{path:"/study-groups",element:e.jsx(ev,{})}),e.jsx(Mr,{path:"/events",element:e.jsx(g5,{})}),e.jsx(Mr,{path:"/requests",element:e.jsx(wv,{})}),e.jsx(Mr,{path:"/document/:docId",element:e.jsx(tv,{})}),e.jsx(Mr,{path:"/notifications",element:e.jsx(av,{})}),e.jsx(Mr,{path:"/grade-calculator",element:e.jsx(Pv,{})}),e.jsx(Mr,{path:"/saved-resources",element:e.jsx(Dv,{})}),e.jsx(Mr,{path:"/resource-moderation",element:e.jsx(Mv,{})})]})}),e.jsx(Mr,{path:"*",element:e.jsx(kv,{})})]}),qv=()=>{const{pathname:t}=cl();return z.useEffect(()=>{window.scrollTo(0,0)},[t]),null},Wv=um({config:{initialColorMode:"light",useSystemColorMode:!1},colors:{brand:{navy:"#1e3669",navyDark:"#132347",gold:"#f2d944",goldDark:"#d9c226",white:"#ffffff"}},styles:{global:t=>({body:{bg:t.colorMode==="dark"?"gray.800":"#f0f4f8"}})},components:{Button:{variants:{primary:t=>({bg:t.colorMode==="dark"?"brand.navyDark":"brand.navy",color:"white",_hover:{bg:t.colorMode==="dark"?"#0c1930":"#182d5a"}}),secondary:t=>({bg:t.colorMode==="dark"?"brand.goldDark":"brand.gold",color:t.colorMode==="dark"?"white":"brand.navy",_hover:{bg:t.colorMode==="dark"?"#c4af22":"#e9d033"}})}}}});function Uv(){return e.jsx(hm,{theme:Wv,children:e.jsxs(xm,{children:[e.jsx(qv,{}),e.jsx(e5,{children:e.jsx(ov,{children:e.jsx(Bv,{})})})]})})}Lm.createRoot(document.getElementById("root")).render(e.jsx(z.StrictMode,{children:e.jsx(Uv,{})}));export{ho as _};
