import{u as a,a as U,U as q,j as e,B as t,L as E,F as l,H as G,m as C,I as v,K as k,n as R,c as b,C as p,d as o,V as A,A as K,a3 as Q,a4 as Y,D as J}from"./chakra-BFMGxYLr.js";import{P as O,Q as S,e as w,p as X,R as Z,S as ee,c as se,q as re}from"./index-Dge-MEAl.js";import{u as ae,L as z}from"./react-6s1XWRBU.js";const ne=()=>{const F=a("#f0f4f8","gray.900"),j=a("white","gray.800"),h=a("gray.200","gray.600"),n=a("brand.navy","white"),d=a("gray.600","gray.400"),r=a("brand.gold","brand.goldDark"),N=a("brand.navy","brand.navyDark"),D=a("0 4px 20px rgba(0, 0, 0, 0.1)","0 4px 20px rgba(0, 0, 0, 0.3)"),B=a("gray.50","gray.700");U({base:!0,md:!1});const c=q(),I=ae(),{notifications:m,loading:L,error:f,unreadCount:g,currentPage:x,totalPages:u,hasMore:oe,markAsRead:P,markAllAsRead:W,deleteNotification:_,fetchNotifications:H}=O(),M=async()=>{try{await W(),c({title:"All notifications marked as read",status:"success",duration:3e3,isClosable:!0,position:"top"})}catch{c({title:"Failed to mark all as read",status:"error",duration:3e3,isClosable:!0,position:"top"})}},T=async s=>{try{await P(s)}catch{}},$=async s=>{try{await _(s),c({title:"Notification deleted",status:"success",duration:3e3,isClosable:!0,position:"top"})}catch{c({title:"Failed to delete notification",status:"error",duration:3e3,isClosable:!0,position:"top"})}},y=s=>{s>=1&&s<=u&&H(s,!1)},V=async s=>{if(s.isRead||T(s.id),s.url)try{const i=new URL(s.url).pathname;I(i)}catch{console.error("Invalid URL for notification:",s.url),c({title:"Invalid notification link",status:"error",duration:3e3,isClosable:!0,position:"top"})}};return e.jsx(t,{minH:"100vh",bg:F,py:{base:4,md:8},px:{base:3,md:6},children:e.jsx(E,{maxW:"900px",children:e.jsxs(l,{direction:"column",mx:"auto",bg:j,borderRadius:"xl",overflow:"hidden",boxShadow:D,children:[e.jsxs(l,{p:4,align:"center",justify:"space-between",borderBottom:"1px solid",borderColor:h,bg:a("gray.50","gray.750"),children:[e.jsxs(G,{spacing:3,children:[e.jsx(C,{as:z,to:"/dashboard",icon:e.jsx(S,{size:18}),variant:"ghost","aria-label":"Go back",color:n,borderRadius:"full",size:"md",_hover:{bg:`${r}20`}}),e.jsx(v,{as:w,color:r,boxSize:5}),e.jsx(k,{size:"md",color:n,children:"Notifications"}),g>0&&e.jsxs(R,{px:2,py:1,bg:r,color:N,borderRadius:"full",fontWeight:"medium",children:[g," new"]})]}),e.jsx(b,{size:"sm",colorScheme:"gray",variant:"ghost",onClick:M,leftIcon:e.jsx(X,{}),isDisabled:g===0,_hover:{bg:`${r}20`},children:"Mark all as read"})]}),e.jsx(t,{children:L?e.jsx(p,{py:16,children:e.jsx(o,{color:d,children:"Loading notifications..."})}):f?e.jsx(p,{py:16,children:e.jsx(o,{color:"red.400",children:f})}):m.length>0?e.jsxs(e.Fragment,{children:[e.jsx(A,{spacing:0,align:"stretch",divider:e.jsx(J,{borderColor:h}),children:m.map(s=>e.jsx(t,{children:e.jsx(l,{p:5,position:"relative",bg:s.isRead?"transparent":`${r}10`,_hover:{bg:B},transition:"all 0.2s ease",borderLeft:"3px solid",borderLeftColor:s.isRead?"transparent":r,onClick:()=>V(s),cursor:s.url?"pointer":"default",direction:"column",children:e.jsxs(l,{align:"flex-start",gap:4,children:[e.jsxs(t,{position:"relative",flexShrink:0,children:[e.jsx(K,{size:"md",name:s.user,src:s.avatar,border:"2px solid",borderColor:s.isRead?h:r}),!s.isRead&&e.jsx(R,{position:"absolute",top:"-1",right:"-1",bg:r,boxSize:"10px",borderRadius:"full",border:"2px solid",borderColor:j})]}),e.jsxs(t,{ml:0,flex:"1",minW:0,children:[e.jsxs(l,{align:"baseline",justify:"space-between",children:[e.jsx(o,{fontWeight:s.isRead?"medium":"bold",color:n,children:s.user}),e.jsx(o,{fontSize:"sm",color:d,children:s.time})]}),e.jsx(o,{mt:1,color:s.isRead?d:n,children:s.content}),s.type==="resource_rejected"&&s.reason&&e.jsxs(Q,{mt:3,status:"warning",variant:"subtle",borderRadius:"md",fontSize:"sm",children:[e.jsx(Y,{as:Z}),e.jsxs(t,{children:[e.jsx(o,{fontWeight:"semibold",mb:1,children:"Rejection Reason:"}),e.jsx(o,{children:s.reason})]})]})]}),e.jsx(C,{icon:e.jsx(ee,{}),variant:"ghost",colorScheme:"red",size:"sm",onClick:i=>{i.stopPropagation(),$(s.id)},"aria-label":"Delete notification",alignSelf:"center",borderRadius:"full",opacity:.7,_hover:{opacity:1},flexShrink:0})]})})},s.id))}),u>1&&e.jsxs(l,{justify:"center",align:"center",p:4,borderTop:"1px solid",borderColor:h,children:[e.jsx(b,{onClick:()=>y(x-1),isDisabled:x===1,leftIcon:e.jsx(S,{}),mr:2,children:"Previous"}),e.jsxs(o,{color:d,children:["Page ",x," of ",u]}),e.jsx(b,{onClick:()=>y(x+1),isDisabled:x===u,rightIcon:e.jsx(se,{}),ml:2,children:"Next"})]})]}):e.jsx(p,{py:16,children:e.jsxs(A,{spacing:4,children:[e.jsx(t,{p:4,borderRadius:"full",bg:`${r}20`,children:e.jsx(v,{as:w,fontSize:"3xl",color:r})}),e.jsx(k,{size:"md",color:n,children:"No notifications"}),e.jsx(o,{color:d,textAlign:"center",maxW:"350px",children:"You're all caught up! Check back later for updates and activities from your courses and study groups."}),e.jsx(b,{as:z,to:"/dashboard",mt:2,leftIcon:e.jsx(re,{}),colorScheme:"gray",variant:"outline",_hover:{bg:`${r}20`,borderColor:r},children:"Return to Dashboard"})]})})})]})})})};export{ne as default};
