const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GoogleCallback-DTeiIKh7.js","assets/chakra-CQE3Mdfe.js","assets/react-DDk2FCmG.js","assets/charts-BQajcoWg.js","assets/CompleteGoogleRegistration-DSnULlwS.js","assets/ResourceContent-C2_okygn.js","assets/SavedResources-Cfzfl9rx.js","assets/ResourceModeration-tliZ8Is5.js","assets/DocumentView-BLXDGGDq.js","assets/NotFound-DcVGu2UW.js"])))=>i.map(i=>d[i]);
import{j as e,C as Gt,S as _t,u as R,a as Wr,F as N,B as E,b as mt,T as Ar,c as G,d as m,D as Et,M as Tt,e as Pt,H as Te,A as gt,I as Fe,f as At,g as Qe,k as uo,h as pt,i as ka,P as Oa,l as Ra,m as Ke,n as dt,o as za,p as Ea,q as Ta,r as Pa,s as Aa,V as de,t as Ma,v as Da,w as La,x as at,y as Fa,z as wt,E as lt,G as Jt,J as vt,K as Ee,L as ct,N as St,O as xe,Q as be,R as jt,U as Rt,W as We,X as Ms,Y as Wa,Z as En,_ as lr,$ as sr,a0 as Tn,a1 as Bn,a2 as Un,a3 as ot,a4 as et,a5 as Ht,a6 as Yt,a7 as Pn,a8 as Ia,a9 as Na,aa as ni,ab as Cr,ac as qa,ad as _r,ae as Ba,af as kt,ag as Ot,ah as ut,ai as xt,aj as ln,ak as Wt,al as It,am as Ir,an as cn,ao as dn,ap as yt,aq as Ua,ar as gn,as as xn,at as ds,au as $a,av as ho,aw as $r,ax as si,ay as Ha,az as $n,aA as Hn,aB as Zt,aC as Ga,aD as Ya,aE as Gn,aF as er,aG as Va,aH as $t,aI as bn,aJ as Ja,aK as Xa,aL as Ka,aM as us,aN as hs,aO as Qa,aP as Za,aQ as el}from"./chakra-CQE3Mdfe.js";import{e as tl,a as h,N as An,O as fo,b as tr,u as Lt,f as po,L as ir,h as mo,c as yn,r as vr,i as rl,g as nl,j as sl,k as ft,B as il}from"./react-DDk2FCmG.js";import{C as ol,a as al,L as ll,B as cl,p as dl,b as ul,c as hl,A as fl,D as pl,d as jn}from"./charts-BQajcoWg.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var vn={},ii;function ml(){if(ii)return vn;ii=1;var t=tl();return vn.createRoot=t.createRoot,vn.hydrateRoot=t.hydrateRoot,vn}var gl=ml();const xl="modulepreload",bl=function(t){return"/"+t},oi={},rr=function(r,n,s){let i=Promise.resolve();if(n&&n.length>0){let a=function(g){return Promise.all(g.map(u=>Promise.resolve(u).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),v=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=a(n.map(g=>{if(g=bl(g),g in oi)return;oi[g]=!0;const u=g.endsWith(".css"),y=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const O=document.createElement("link");if(O.rel=u?"stylesheet":xl,u||(O.as="script"),O.crossOrigin="",O.href=g,v&&O.setAttribute("nonce",v),document.head.appendChild(O),u)return new Promise((M,_)=>{O.addEventListener("load",M),O.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return i.then(a=>{for(const d of a||[])d.status==="rejected"&&o(d.reason);return r().catch(o)})};function go(t,r){return function(){return t.apply(r,arguments)}}const{toString:yl}=Object.prototype,{getPrototypeOf:Vs}=Object,{iterator:Yn,toStringTag:xo}=Symbol,Vn=(t=>r=>{const n=yl.call(r);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Xt=t=>(t=t.toLowerCase(),r=>Vn(r)===t),Jn=t=>r=>typeof r===t,{isArray:Nr}=Array,tn=Jn("undefined");function jl(t){return t!==null&&!tn(t)&&t.constructor!==null&&!tn(t.constructor)&&Nt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const bo=Xt("ArrayBuffer");function vl(t){let r;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&bo(t.buffer),r}const wl=Jn("string"),Nt=Jn("function"),yo=Jn("number"),Xn=t=>t!==null&&typeof t=="object",Sl=t=>t===!0||t===!1,_n=t=>{if(Vn(t)!=="object")return!1;const r=Vs(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(xo in t)&&!(Yn in t)},Cl=Xt("Date"),_l=Xt("File"),kl=Xt("Blob"),Ol=Xt("FileList"),Rl=t=>Xn(t)&&Nt(t.pipe),zl=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||Nt(t.append)&&((r=Vn(t))==="formdata"||r==="object"&&Nt(t.toString)&&t.toString()==="[object FormData]"))},El=Xt("URLSearchParams"),[Tl,Pl,Al,Ml]=["ReadableStream","Request","Response","Headers"].map(Xt),Dl=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function un(t,r,{allOwnKeys:n=!1}={}){if(t===null||typeof t=="undefined")return;let s,i;if(typeof t!="object"&&(t=[t]),Nr(t))for(s=0,i=t.length;s<i;s++)r.call(null,t[s],s,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let d;for(s=0;s<a;s++)d=o[s],r.call(null,t[d],d,t)}}function jo(t,r){r=r.toLowerCase();const n=Object.keys(t);let s=n.length,i;for(;s-- >0;)if(i=n[s],r===i.toLowerCase())return i;return null}const gr=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,vo=t=>!tn(t)&&t!==gr;function Ds(){const{caseless:t}=vo(this)&&this||{},r={},n=(s,i)=>{const o=t&&jo(r,i)||i;_n(r[o])&&_n(s)?r[o]=Ds(r[o],s):_n(s)?r[o]=Ds({},s):Nr(s)?r[o]=s.slice():r[o]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&un(arguments[s],n);return r}const Ll=(t,r,n,{allOwnKeys:s}={})=>(un(r,(i,o)=>{n&&Nt(i)?t[o]=go(i,n):t[o]=i},{allOwnKeys:s}),t),Fl=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Wl=(t,r,n,s)=>{t.prototype=Object.create(r.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),n&&Object.assign(t.prototype,n)},Il=(t,r,n,s)=>{let i,o,a;const d={};if(r=r||{},t==null)return r;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],(!s||s(a,t,r))&&!d[a]&&(r[a]=t[a],d[a]=!0);t=n!==!1&&Vs(t)}while(t&&(!n||n(t,r))&&t!==Object.prototype);return r},Nl=(t,r,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=r.length;const s=t.indexOf(r,n);return s!==-1&&s===n},ql=t=>{if(!t)return null;if(Nr(t))return t;let r=t.length;if(!yo(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=t[r];return n},Bl=(t=>r=>t&&r instanceof t)(typeof Uint8Array!="undefined"&&Vs(Uint8Array)),Ul=(t,r)=>{const s=(t&&t[Yn]).call(t);let i;for(;(i=s.next())&&!i.done;){const o=i.value;r.call(t,o[0],o[1])}},$l=(t,r)=>{let n;const s=[];for(;(n=t.exec(r))!==null;)s.push(n);return s},Hl=Xt("HTMLFormElement"),Gl=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),ai=(({hasOwnProperty:t})=>(r,n)=>t.call(r,n))(Object.prototype),Yl=Xt("RegExp"),wo=(t,r)=>{const n=Object.getOwnPropertyDescriptors(t),s={};un(n,(i,o)=>{let a;(a=r(i,o,t))!==!1&&(s[o]=a||i)}),Object.defineProperties(t,s)},Vl=t=>{wo(t,(r,n)=>{if(Nt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(Nt(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Jl=(t,r)=>{const n={},s=i=>{i.forEach(o=>{n[o]=!0})};return Nr(t)?s(t):s(String(t).split(r)),n},Xl=()=>{},Kl=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function Ql(t){return!!(t&&Nt(t.append)&&t[xo]==="FormData"&&t[Yn])}const Zl=t=>{const r=new Array(10),n=(s,i)=>{if(Xn(s)){if(r.indexOf(s)>=0)return;if(!("toJSON"in s)){r[i]=s;const o=Nr(s)?[]:{};return un(s,(a,d)=>{const v=n(a,i+1);!tn(v)&&(o[d]=v)}),r[i]=void 0,o}}return s};return n(t,0)},ec=Xt("AsyncFunction"),tc=t=>t&&(Xn(t)||Nt(t))&&Nt(t.then)&&Nt(t.catch),So=((t,r)=>t?setImmediate:r?((n,s)=>(gr.addEventListener("message",({source:i,data:o})=>{i===gr&&o===n&&s.length&&s.shift()()},!1),i=>{s.push(i),gr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Nt(gr.postMessage)),rc=typeof queueMicrotask!="undefined"?queueMicrotask.bind(gr):typeof process!="undefined"&&process.nextTick||So,nc=t=>t!=null&&Nt(t[Yn]),H={isArray:Nr,isArrayBuffer:bo,isBuffer:jl,isFormData:zl,isArrayBufferView:vl,isString:wl,isNumber:yo,isBoolean:Sl,isObject:Xn,isPlainObject:_n,isReadableStream:Tl,isRequest:Pl,isResponse:Al,isHeaders:Ml,isUndefined:tn,isDate:Cl,isFile:_l,isBlob:kl,isRegExp:Yl,isFunction:Nt,isStream:Rl,isURLSearchParams:El,isTypedArray:Bl,isFileList:Ol,forEach:un,merge:Ds,extend:Ll,trim:Dl,stripBOM:Fl,inherits:Wl,toFlatObject:Il,kindOf:Vn,kindOfTest:Xt,endsWith:Nl,toArray:ql,forEachEntry:Ul,matchAll:$l,isHTMLForm:Hl,hasOwnProperty:ai,hasOwnProp:ai,reduceDescriptors:wo,freezeMethods:Vl,toObjectSet:Jl,toCamelCase:Gl,noop:Xl,toFiniteNumber:Kl,findKey:jo,global:gr,isContextDefined:vo,isSpecCompliantForm:Ql,toJSONObject:Zl,isAsyncFn:ec,isThenable:tc,setImmediate:So,asap:rc,isIterable:nc};function Ye(t,r,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}H.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const Co=Ye.prototype,_o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{_o[t]={value:t}});Object.defineProperties(Ye,_o);Object.defineProperty(Co,"isAxiosError",{value:!0});Ye.from=(t,r,n,s,i,o)=>{const a=Object.create(Co);return H.toFlatObject(t,a,function(v){return v!==Error.prototype},d=>d!=="isAxiosError"),Ye.call(a,t.message,r,n,s,i),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};const sc=null;function Ls(t){return H.isPlainObject(t)||H.isArray(t)}function ko(t){return H.endsWith(t,"[]")?t.slice(0,-2):t}function li(t,r,n){return t?t.concat(r).map(function(i,o){return i=ko(i),!n&&o?"["+i+"]":i}).join(n?".":""):r}function ic(t){return H.isArray(t)&&!t.some(Ls)}const oc=H.toFlatObject(H,{},null,function(r){return/^is[A-Z]/.test(r)});function Kn(t,r,n){if(!H.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,z){return!H.isUndefined(z[w])});const s=n.metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,v=(n.Blob||typeof Blob!="undefined"&&Blob)&&H.isSpecCompliantForm(r);if(!H.isFunction(i))throw new TypeError("visitor must be a function");function g(_){if(_===null)return"";if(H.isDate(_))return _.toISOString();if(H.isBoolean(_))return _.toString();if(!v&&H.isBlob(_))throw new Ye("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(_)||H.isTypedArray(_)?v&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function u(_,w,z){let L=_;if(_&&!z&&typeof _=="object"){if(H.endsWith(w,"{}"))w=s?w:w.slice(0,-2),_=JSON.stringify(_);else if(H.isArray(_)&&ic(_)||(H.isFileList(_)||H.endsWith(w,"[]"))&&(L=H.toArray(_)))return w=ko(w),L.forEach(function(A,B){!(H.isUndefined(A)||A===null)&&r.append(a===!0?li([w],B,o):a===null?w:w+"[]",g(A))}),!1}return Ls(_)?!0:(r.append(li(z,w,o),g(_)),!1)}const y=[],O=Object.assign(oc,{defaultVisitor:u,convertValue:g,isVisitable:Ls});function M(_,w){if(!H.isUndefined(_)){if(y.indexOf(_)!==-1)throw Error("Circular reference detected in "+w.join("."));y.push(_),H.forEach(_,function(L,$){(!(H.isUndefined(L)||L===null)&&i.call(r,L,H.isString($)?$.trim():$,w,O))===!0&&M(L,w?w.concat($):[$])}),y.pop()}}if(!H.isObject(t))throw new TypeError("data must be an object");return M(t),r}function ci(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function Js(t,r){this._pairs=[],t&&Kn(t,this,r)}const Oo=Js.prototype;Oo.append=function(r,n){this._pairs.push([r,n])};Oo.toString=function(r){const n=r?function(s){return r.call(this,s,ci)}:ci;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function ac(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ro(t,r,n){if(!r)return t;const s=n&&n.encode||ac;H.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(r,n):o=H.isURLSearchParams(r)?r.toString():new Js(r,n).toString(s),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class di{constructor(){this.handlers=[]}use(r,n,s){return this.handlers.push({fulfilled:r,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){H.forEach(this.handlers,function(s){s!==null&&r(s)})}}const zo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lc=typeof URLSearchParams!="undefined"?URLSearchParams:Js,cc=typeof FormData!="undefined"?FormData:null,dc=typeof Blob!="undefined"?Blob:null,uc={isBrowser:!0,classes:{URLSearchParams:lc,FormData:cc,Blob:dc},protocols:["http","https","file","blob","url","data"]},Xs=typeof window!="undefined"&&typeof document!="undefined",Fs=typeof navigator=="object"&&navigator||void 0,hc=Xs&&(!Fs||["ReactNative","NativeScript","NS"].indexOf(Fs.product)<0),fc=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pc=Xs&&window.location.href||"http://localhost",mc=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xs,hasStandardBrowserEnv:hc,hasStandardBrowserWebWorkerEnv:fc,navigator:Fs,origin:pc},Symbol.toStringTag,{value:"Module"})),Dt={...mc,...uc};function gc(t,r){return Kn(t,new Dt.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,o){return Dt.isNode&&H.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},r))}function xc(t){return H.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function bc(t){const r={},n=Object.keys(t);let s;const i=n.length;let o;for(s=0;s<i;s++)o=n[s],r[o]=t[o];return r}function Eo(t){function r(n,s,i,o){let a=n[o++];if(a==="__proto__")return!0;const d=Number.isFinite(+a),v=o>=n.length;return a=!a&&H.isArray(i)?i.length:a,v?(H.hasOwnProp(i,a)?i[a]=[i[a],s]:i[a]=s,!d):((!i[a]||!H.isObject(i[a]))&&(i[a]=[]),r(n,s,i[a],o)&&H.isArray(i[a])&&(i[a]=bc(i[a])),!d)}if(H.isFormData(t)&&H.isFunction(t.entries)){const n={};return H.forEachEntry(t,(s,i)=>{r(xc(s),i,n,0)}),n}return null}function yc(t,r,n){if(H.isString(t))try{return(r||JSON.parse)(t),H.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const hn={transitional:zo,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,o=H.isObject(r);if(o&&H.isHTMLForm(r)&&(r=new FormData(r)),H.isFormData(r))return i?JSON.stringify(Eo(r)):r;if(H.isArrayBuffer(r)||H.isBuffer(r)||H.isStream(r)||H.isFile(r)||H.isBlob(r)||H.isReadableStream(r))return r;if(H.isArrayBufferView(r))return r.buffer;if(H.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let d;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return gc(r,this.formSerializer).toString();if((d=H.isFileList(r))||s.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Kn(d?{"files[]":r}:r,v&&new v,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),yc(r)):r}],transformResponse:[function(r){const n=this.transitional||hn.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(H.isResponse(r)||H.isReadableStream(r))return r;if(r&&H.isString(r)&&(s&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(r)}catch(d){if(a)throw d.name==="SyntaxError"?Ye.from(d,Ye.ERR_BAD_RESPONSE,this,null,this.response):d}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dt.classes.FormData,Blob:Dt.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],t=>{hn.headers[t]={}});const jc=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vc=t=>{const r={};let n,s,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),s=a.substring(i+1).trim(),!(!n||r[n]&&jc[n])&&(n==="set-cookie"?r[n]?r[n].push(s):r[n]=[s]:r[n]=r[n]?r[n]+", "+s:s)}),r},ui=Symbol("internals");function Hr(t){return t&&String(t).trim().toLowerCase()}function kn(t){return t===!1||t==null?t:H.isArray(t)?t.map(kn):String(t)}function wc(t){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)r[s[1]]=s[2];return r}const Sc=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function fs(t,r,n,s,i){if(H.isFunction(s))return s.call(this,r,n);if(i&&(r=n),!!H.isString(r)){if(H.isString(s))return r.indexOf(s)!==-1;if(H.isRegExp(s))return s.test(r)}}function Cc(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,s)=>n.toUpperCase()+s)}function _c(t,r){const n=H.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(i,o,a){return this[s].call(this,r,i,o,a)},configurable:!0})})}let qt=class{constructor(r){r&&this.set(r)}set(r,n,s){const i=this;function o(d,v,g){const u=Hr(v);if(!u)throw new Error("header name must be a non-empty string");const y=H.findKey(i,u);(!y||i[y]===void 0||g===!0||g===void 0&&i[y]!==!1)&&(i[y||v]=kn(d))}const a=(d,v)=>H.forEach(d,(g,u)=>o(g,u,v));if(H.isPlainObject(r)||r instanceof this.constructor)a(r,n);else if(H.isString(r)&&(r=r.trim())&&!Sc(r))a(vc(r),n);else if(H.isObject(r)&&H.isIterable(r)){let d={},v,g;for(const u of r){if(!H.isArray(u))throw TypeError("Object iterator must return a key-value pair");d[g=u[0]]=(v=d[g])?H.isArray(v)?[...v,u[1]]:[v,u[1]]:u[1]}a(d,n)}else r!=null&&o(n,r,s);return this}get(r,n){if(r=Hr(r),r){const s=H.findKey(this,r);if(s){const i=this[s];if(!n)return i;if(n===!0)return wc(i);if(H.isFunction(n))return n.call(this,i,s);if(H.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=Hr(r),r){const s=H.findKey(this,r);return!!(s&&this[s]!==void 0&&(!n||fs(this,this[s],s,n)))}return!1}delete(r,n){const s=this;let i=!1;function o(a){if(a=Hr(a),a){const d=H.findKey(s,a);d&&(!n||fs(s,s[d],d,n))&&(delete s[d],i=!0)}}return H.isArray(r)?r.forEach(o):o(r),i}clear(r){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const o=n[s];(!r||fs(this,this[o],o,r,!0))&&(delete this[o],i=!0)}return i}normalize(r){const n=this,s={};return H.forEach(this,(i,o)=>{const a=H.findKey(s,o);if(a){n[a]=kn(i),delete n[o];return}const d=r?Cc(o):String(o).trim();d!==o&&delete n[o],n[d]=kn(i),s[d]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return H.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=r&&H.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const s=new this(r);return n.forEach(i=>s.set(i)),s}static accessor(r){const s=(this[ui]=this[ui]={accessors:{}}).accessors,i=this.prototype;function o(a){const d=Hr(a);s[d]||(_c(i,a),s[d]=!0)}return H.isArray(r)?r.forEach(o):o(r),this}};qt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(qt.prototype,({value:t},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(s){this[n]=s}}});H.freezeMethods(qt);function ps(t,r){const n=this||hn,s=r||n,i=qt.from(s.headers);let o=s.data;return H.forEach(t,function(d){o=d.call(n,o,i.normalize(),r?r.status:void 0)}),i.normalize(),o}function To(t){return!!(t&&t.__CANCEL__)}function qr(t,r,n){Ye.call(this,t==null?"canceled":t,Ye.ERR_CANCELED,r,n),this.name="CanceledError"}H.inherits(qr,Ye,{__CANCEL__:!0});function Po(t,r,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):r(new Ye("Request failed with status code "+n.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function kc(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function Oc(t,r){t=t||10;const n=new Array(t),s=new Array(t);let i=0,o=0,a;return r=r!==void 0?r:1e3,function(v){const g=Date.now(),u=s[o];a||(a=g),n[i]=v,s[i]=g;let y=o,O=0;for(;y!==i;)O+=n[y++],y=y%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),g-a<r)return;const M=u&&g-u;return M?Math.round(O*1e3/M):void 0}}function Rc(t,r){let n=0,s=1e3/r,i,o;const a=(g,u=Date.now())=>{n=u,i=null,o&&(clearTimeout(o),o=null),t.apply(null,g)};return[(...g)=>{const u=Date.now(),y=u-n;y>=s?a(g,u):(i=g,o||(o=setTimeout(()=>{o=null,a(i)},s-y)))},()=>i&&a(i)]}const Mn=(t,r,n=3)=>{let s=0;const i=Oc(50,250);return Rc(o=>{const a=o.loaded,d=o.lengthComputable?o.total:void 0,v=a-s,g=i(v),u=a<=d;s=a;const y={loaded:a,total:d,progress:d?a/d:void 0,bytes:v,rate:g||void 0,estimated:g&&d&&u?(d-a)/g:void 0,event:o,lengthComputable:d!=null,[r?"download":"upload"]:!0};t(y)},n)},hi=(t,r)=>{const n=t!=null;return[s=>r[0]({lengthComputable:n,total:t,loaded:s}),r[1]]},fi=t=>(...r)=>H.asap(()=>t(...r)),zc=Dt.hasStandardBrowserEnv?((t,r)=>n=>(n=new URL(n,Dt.origin),t.protocol===n.protocol&&t.host===n.host&&(r||t.port===n.port)))(new URL(Dt.origin),Dt.navigator&&/(msie|trident)/i.test(Dt.navigator.userAgent)):()=>!0,Ec=Dt.hasStandardBrowserEnv?{write(t,r,n,s,i,o){const a=[t+"="+encodeURIComponent(r)];H.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),H.isString(s)&&a.push("path="+s),H.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Tc(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Pc(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function Ao(t,r,n){let s=!Tc(r);return t&&(s||n==!1)?Pc(t,r):r}const pi=t=>t instanceof qt?{...t}:t;function yr(t,r){r=r||{};const n={};function s(g,u,y,O){return H.isPlainObject(g)&&H.isPlainObject(u)?H.merge.call({caseless:O},g,u):H.isPlainObject(u)?H.merge({},u):H.isArray(u)?u.slice():u}function i(g,u,y,O){if(H.isUndefined(u)){if(!H.isUndefined(g))return s(void 0,g,y,O)}else return s(g,u,y,O)}function o(g,u){if(!H.isUndefined(u))return s(void 0,u)}function a(g,u){if(H.isUndefined(u)){if(!H.isUndefined(g))return s(void 0,g)}else return s(void 0,u)}function d(g,u,y){if(y in r)return s(g,u);if(y in t)return s(void 0,g)}const v={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:d,headers:(g,u,y)=>i(pi(g),pi(u),y,!0)};return H.forEach(Object.keys(Object.assign({},t,r)),function(u){const y=v[u]||i,O=y(t[u],r[u],u);H.isUndefined(O)&&y!==d||(n[u]=O)}),n}const Mo=t=>{const r=yr({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:d}=r;r.headers=a=qt.from(a),r.url=Ro(Ao(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&a.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let v;if(H.isFormData(n)){if(Dt.hasStandardBrowserEnv||Dt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((v=a.getContentType())!==!1){const[g,...u]=v?v.split(";").map(y=>y.trim()).filter(Boolean):[];a.setContentType([g||"multipart/form-data",...u].join("; "))}}if(Dt.hasStandardBrowserEnv&&(s&&H.isFunction(s)&&(s=s(r)),s||s!==!1&&zc(r.url))){const g=i&&o&&Ec.read(o);g&&a.set(i,g)}return r},Ac=typeof XMLHttpRequest!="undefined",Mc=Ac&&function(t){return new Promise(function(n,s){const i=Mo(t);let o=i.data;const a=qt.from(i.headers).normalize();let{responseType:d,onUploadProgress:v,onDownloadProgress:g}=i,u,y,O,M,_;function w(){M&&M(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let z=new XMLHttpRequest;z.open(i.method.toUpperCase(),i.url,!0),z.timeout=i.timeout;function L(){if(!z)return;const A=qt.from("getAllResponseHeaders"in z&&z.getAllResponseHeaders()),p={data:!d||d==="text"||d==="json"?z.responseText:z.response,status:z.status,statusText:z.statusText,headers:A,config:t,request:z};Po(function(k){n(k),w()},function(k){s(k),w()},p),z=null}"onloadend"in z?z.onloadend=L:z.onreadystatechange=function(){!z||z.readyState!==4||z.status===0&&!(z.responseURL&&z.responseURL.indexOf("file:")===0)||setTimeout(L)},z.onabort=function(){z&&(s(new Ye("Request aborted",Ye.ECONNABORTED,t,z)),z=null)},z.onerror=function(){s(new Ye("Network Error",Ye.ERR_NETWORK,t,z)),z=null},z.ontimeout=function(){let B=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const p=i.transitional||zo;i.timeoutErrorMessage&&(B=i.timeoutErrorMessage),s(new Ye(B,p.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,t,z)),z=null},o===void 0&&a.setContentType(null),"setRequestHeader"in z&&H.forEach(a.toJSON(),function(B,p){z.setRequestHeader(p,B)}),H.isUndefined(i.withCredentials)||(z.withCredentials=!!i.withCredentials),d&&d!=="json"&&(z.responseType=i.responseType),g&&([O,_]=Mn(g,!0),z.addEventListener("progress",O)),v&&z.upload&&([y,M]=Mn(v),z.upload.addEventListener("progress",y),z.upload.addEventListener("loadend",M)),(i.cancelToken||i.signal)&&(u=A=>{z&&(s(!A||A.type?new qr(null,t,z):A),z.abort(),z=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const $=kc(i.url);if($&&Dt.protocols.indexOf($)===-1){s(new Ye("Unsupported protocol "+$+":",Ye.ERR_BAD_REQUEST,t));return}z.send(o||null)})},Dc=(t,r)=>{const{length:n}=t=t?t.filter(Boolean):[];if(r||n){let s=new AbortController,i;const o=function(g){if(!i){i=!0,d();const u=g instanceof Error?g:this.reason;s.abort(u instanceof Ye?u:new qr(u instanceof Error?u.message:u))}};let a=r&&setTimeout(()=>{a=null,o(new Ye(`timeout ${r} of ms exceeded`,Ye.ETIMEDOUT))},r);const d=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(o):g.removeEventListener("abort",o)}),t=null)};t.forEach(g=>g.addEventListener("abort",o));const{signal:v}=s;return v.unsubscribe=()=>H.asap(d),v}},Lc=function*(t,r){let n=t.byteLength;if(n<r){yield t;return}let s=0,i;for(;s<n;)i=s+r,yield t.slice(s,i),s=i},Fc=async function*(t,r){for await(const n of Wc(t))yield*Lc(n,r)},Wc=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:n,value:s}=await r.read();if(n)break;yield s}}finally{await r.cancel()}},mi=(t,r,n,s)=>{const i=Fc(t,r);let o=0,a,d=v=>{a||(a=!0,s&&s(v))};return new ReadableStream({async pull(v){try{const{done:g,value:u}=await i.next();if(g){d(),v.close();return}let y=u.byteLength;if(n){let O=o+=y;n(O)}v.enqueue(new Uint8Array(u))}catch(g){throw d(g),g}},cancel(v){return d(v),i.return()}},{highWaterMark:2})},Qn=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Do=Qn&&typeof ReadableStream=="function",Ic=Qn&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Lo=(t,...r)=>{try{return!!t(...r)}catch{return!1}},Nc=Do&&Lo(()=>{let t=!1;const r=new Request(Dt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),gi=64*1024,Ws=Do&&Lo(()=>H.isReadableStream(new Response("").body)),Dn={stream:Ws&&(t=>t.body)};Qn&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Dn[r]&&(Dn[r]=H.isFunction(t[r])?n=>n[r]():(n,s)=>{throw new Ye(`Response type '${r}' is not supported`,Ye.ERR_NOT_SUPPORT,s)})})})(new Response);const qc=async t=>{if(t==null)return 0;if(H.isBlob(t))return t.size;if(H.isSpecCompliantForm(t))return(await new Request(Dt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(H.isArrayBufferView(t)||H.isArrayBuffer(t))return t.byteLength;if(H.isURLSearchParams(t)&&(t=t+""),H.isString(t))return(await Ic(t)).byteLength},Bc=async(t,r)=>{const n=H.toFiniteNumber(t.getContentLength());return n==null?qc(r):n},Uc=Qn&&(async t=>{let{url:r,method:n,data:s,signal:i,cancelToken:o,timeout:a,onDownloadProgress:d,onUploadProgress:v,responseType:g,headers:u,withCredentials:y="same-origin",fetchOptions:O}=Mo(t);g=g?(g+"").toLowerCase():"text";let M=Dc([i,o&&o.toAbortSignal()],a),_;const w=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let z;try{if(v&&Nc&&n!=="get"&&n!=="head"&&(z=await Bc(u,s))!==0){let p=new Request(r,{method:"POST",body:s,duplex:"half"}),j;if(H.isFormData(s)&&(j=p.headers.get("content-type"))&&u.setContentType(j),p.body){const[k,I]=hi(z,Mn(fi(v)));s=mi(p.body,gi,k,I)}}H.isString(y)||(y=y?"include":"omit");const L="credentials"in Request.prototype;_=new Request(r,{...O,signal:M,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:L?y:void 0});let $=await fetch(_,O);const A=Ws&&(g==="stream"||g==="response");if(Ws&&(d||A&&w)){const p={};["status","statusText","headers"].forEach(x=>{p[x]=$[x]});const j=H.toFiniteNumber($.headers.get("content-length")),[k,I]=d&&hi(j,Mn(fi(d),!0))||[];$=new Response(mi($.body,gi,k,()=>{I&&I(),w&&w()}),p)}g=g||"text";let B=await Dn[H.findKey(Dn,g)||"text"]($,t);return!A&&w&&w(),await new Promise((p,j)=>{Po(p,j,{data:B,headers:qt.from($.headers),status:$.status,statusText:$.statusText,config:t,request:_})})}catch(L){throw w&&w(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,t,_),{cause:L.cause||L}):Ye.from(L,L&&L.code,t,_)}}),Is={http:sc,xhr:Mc,fetch:Uc};H.forEach(Is,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const xi=t=>`- ${t}`,$c=t=>H.isFunction(t)||t===null||t===!1,Fo={getAdapter:t=>{t=H.isArray(t)?t:[t];const{length:r}=t;let n,s;const i={};for(let o=0;o<r;o++){n=t[o];let a;if(s=n,!$c(n)&&(s=Is[(a=String(n)).toLowerCase()],s===void 0))throw new Ye(`Unknown adapter '${a}'`);if(s)break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([d,v])=>`adapter ${d} `+(v===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(xi).join(`
`):" "+xi(o[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:Is};function ms(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new qr(null,t)}function bi(t){return ms(t),t.headers=qt.from(t.headers),t.data=ps.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Fo.getAdapter(t.adapter||hn.adapter)(t).then(function(s){return ms(t),s.data=ps.call(t,t.transformResponse,s),s.headers=qt.from(s.headers),s},function(s){return To(s)||(ms(t),s&&s.response&&(s.response.data=ps.call(t,t.transformResponse,s.response),s.response.headers=qt.from(s.response.headers))),Promise.reject(s)})}const Wo="1.10.0",Zn={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Zn[t]=function(s){return typeof s===t||"a"+(r<1?"n ":" ")+t}});const yi={};Zn.transitional=function(r,n,s){function i(o,a){return"[Axios v"+Wo+"] Transitional option '"+o+"'"+a+(s?". "+s:"")}return(o,a,d)=>{if(r===!1)throw new Ye(i(a," has been removed"+(n?" in "+n:"")),Ye.ERR_DEPRECATED);return n&&!yi[a]&&(yi[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(o,a,d):!0}};Zn.spelling=function(r){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function Hc(t,r,n){if(typeof t!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let i=s.length;for(;i-- >0;){const o=s[i],a=r[o];if(a){const d=t[o],v=d===void 0||a(d,o,t);if(v!==!0)throw new Ye("option "+o+" must be "+v,Ye.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ye("Unknown option "+o,Ye.ERR_BAD_OPTION)}}const On={assertOptions:Hc,validators:Zn},Qt=On.validators;let xr=class{constructor(r){this.defaults=r||{},this.interceptors={request:new di,response:new di}}async request(r,n){try{return await this._request(r,n)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=yr(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:o}=n;s!==void 0&&On.assertOptions(s,{silentJSONParsing:Qt.transitional(Qt.boolean),forcedJSONParsing:Qt.transitional(Qt.boolean),clarifyTimeoutError:Qt.transitional(Qt.boolean)},!1),i!=null&&(H.isFunction(i)?n.paramsSerializer={serialize:i}:On.assertOptions(i,{encode:Qt.function,serialize:Qt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),On.assertOptions(n,{baseUrl:Qt.spelling("baseURL"),withXsrfToken:Qt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&H.merge(o.common,o[n.method]);o&&H.forEach(["delete","get","head","post","put","patch","common"],_=>{delete o[_]}),n.headers=qt.concat(a,o);const d=[];let v=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(v=v&&w.synchronous,d.unshift(w.fulfilled,w.rejected))});const g=[];this.interceptors.response.forEach(function(w){g.push(w.fulfilled,w.rejected)});let u,y=0,O;if(!v){const _=[bi.bind(this),void 0];for(_.unshift.apply(_,d),_.push.apply(_,g),O=_.length,u=Promise.resolve(n);y<O;)u=u.then(_[y++],_[y++]);return u}O=d.length;let M=n;for(y=0;y<O;){const _=d[y++],w=d[y++];try{M=_(M)}catch(z){w.call(this,z);break}}try{u=bi.call(this,M)}catch(_){return Promise.reject(_)}for(y=0,O=g.length;y<O;)u=u.then(g[y++],g[y++]);return u}getUri(r){r=yr(this.defaults,r);const n=Ao(r.baseURL,r.url,r.allowAbsoluteUrls);return Ro(n,r.params,r.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(r){xr.prototype[r]=function(n,s){return this.request(yr(s||{},{method:r,url:n,data:(s||{}).data}))}});H.forEach(["post","put","patch"],function(r){function n(s){return function(o,a,d){return this.request(yr(d||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}xr.prototype[r]=n(),xr.prototype[r+"Form"]=n(!0)});let Gc=class Io{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(i=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](i);s._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(d=>{s.subscribe(d),o=d}).then(i);return a.cancel=function(){s.unsubscribe(o)},a},r(function(o,a,d){s.reason||(s.reason=new qr(o,a,d),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=s=>{r.abort(s)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new Io(function(i){r=i}),cancel:r}}};function Yc(t){return function(n){return t.apply(null,n)}}function Vc(t){return H.isObject(t)&&t.isAxiosError===!0}const Ns={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ns).forEach(([t,r])=>{Ns[r]=t});function No(t){const r=new xr(t),n=go(xr.prototype.request,r);return H.extend(n,xr.prototype,r,{allOwnKeys:!0}),H.extend(n,r,null,{allOwnKeys:!0}),n.create=function(i){return No(yr(t,i))},n}const it=No(hn);it.Axios=xr;it.CanceledError=qr;it.CancelToken=Gc;it.isCancel=To;it.VERSION=Wo;it.toFormData=Kn;it.AxiosError=Ye;it.Cancel=it.CanceledError;it.all=function(r){return Promise.all(r)};it.spread=Yc;it.isAxiosError=Vc;it.mergeConfig=yr;it.AxiosHeaders=qt;it.formToJSON=t=>Eo(H.isHTMLForm(t)?new FormData(t):t);it.getAdapter=Fo.getAdapter;it.HttpStatusCode=Ns;it.default=it;const{Axios:Lp,AxiosError:Fp,CanceledError:Wp,isCancel:Ip,CancelToken:Np,VERSION:qp,all:Bp,Cancel:Up,isAxiosError:$p,spread:Hp,toFormData:Gp,AxiosHeaders:Yp,HttpStatusCode:Vp,formToJSON:Jp,getAdapter:Xp,mergeConfig:Kp}=it,gs="https://mu-connect.me/api",Jc="https://cdn.mu-connect.me",es=gs==null?void 0:gs.replace(/\/$/,""),Ks=Jc.replace(/\/$/,"");es||console.warn("[env] VITE_API_BASE_URL is not defined. API calls will fail until it is set.");const we=it.create({baseURL:es,timeout:15e3,withCredentials:!1});we.interceptors.request.use(t=>{try{const r=localStorage.getItem("authToken");r&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${r}`)}catch{}return t});we.interceptors.response.use(t=>t,t=>{var n,s,i,o,a,d;const r={message:((s=(n=t.response)==null?void 0:n.data)==null?void 0:s.message)||t.message||"Request failed",status:(i=t.response)==null?void 0:i.status,data:(o=t.response)==null?void 0:o.data,url:(a=t.config)==null?void 0:a.url,method:(d=t.config)==null?void 0:d.method};return Promise.reject(r)});const qo=t=>{t&&localStorage.setItem("authToken",t)},Bo=es,ts=()=>localStorage.getItem("authToken");it.interceptors.request.use(t=>{const r=ts();return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const Qs=async t=>{var r;try{const n=await we.post("/register",t);return n.data.token&&qo(n.data.token),t.faculty&&localStorage.setItem("userFaculty",t.faculty),t.major&&localStorage.setItem("userMajor",t.major),n.data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Registration failed"}}},Uo=async t=>{try{const r=await we.post("/login",t);return r.data.token&&qo(r.data.token),r.data}catch(r){throw r.message?{message:r.message}:{message:"Login failed"}}},Zs=async()=>{try{ts()&&await we.post("/logout")}catch{}localStorage.clear(),sessionStorage.clear(),window.location.reload()},Er=async()=>{if(!ts()){const r=sessionStorage.getItem("currentUser");return r?(console.log("Using cached user data from Google authentication"),JSON.parse(r)):null}try{const r=await we.get("/users/me");return r.data&&!r.data.id&&r.data.user_id&&(r.data.id=r.data.user_id),r.data&&!r.data.avatar_url&&r.data.avatar&&(r.data.avatar.startsWith("http")?r.data.avatar_url=r.data.avatar:r.data.avatar_url=`${Ks}/avatars/${r.data.avatar}`),r.data.faculty&&r.data.faculty.name&&(localStorage.setItem("userFaculty",r.data.faculty.name),localStorage.setItem("faculty_id",r.data.faculty.id)),r.data.major&&r.data.major.name&&(localStorage.setItem("userMajor",r.data.major.name),localStorage.setItem("major_id",r.data.major.id)),r.data.roles&&r.data.roles.length>0?localStorage.setItem("role",r.data.roles[0]):r.data.role_names&&r.data.role_names.length>0&&localStorage.setItem("role",r.data.role_names[0]),r.data&&r.data.id&&localStorage.setItem("user_id",r.data.id),sessionStorage.setItem("currentUser",JSON.stringify(r.data)),r.data}catch(r){console.error("Error fetching current user:",r);const n=sessionStorage.getItem("currentUser");return n?JSON.parse(n):null}},$o=()=>{try{const t=sessionStorage.getItem("currentUser");if(t){const n=JSON.parse(t);return n.id||(n.id=localStorage.getItem("user_id")||null),!n.role&&localStorage.getItem("role")&&(n.role=localStorage.getItem("role")),n}const r=localStorage.getItem("user_id");return r?{id:r,first_name:localStorage.getItem("first_name")||"User",last_name:localStorage.getItem("last_name")||"",role:localStorage.getItem("role")}:null}catch(t){return console.error("Error getting cached user:",t),null}},Xc=async()=>{var t;try{return(await it.get(`${Bo}/registration/faculties`,{withCredentials:!0})).data}catch(r){throw((t=r.response)==null?void 0:t.data)||{message:"Failed to load faculties"}}},Kc=async t=>{var r;try{return(await it.get(`${Bo}/registration/faculties/${t}/majors`,{withCredentials:!0})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to load majors"}}},ji=Object.freeze(Object.defineProperty({__proto__:null,getCurrentUser:Er,getCurrentUserSync:$o,getFaculties:Xc,getMajors:Kc,getToken:ts,login:Uo,logout:Zs,register:Qs},Symbol.toStringTag,{value:"Module"})),Qc=async t=>{var r,n,s,i;try{const o=await we.post("/auth/google/complete-registration",t);return o.data.token&&(localStorage.setItem("authToken",o.data.token),(r=o.data.user)!=null&&r.faculty&&(localStorage.setItem("userFaculty",o.data.user.faculty.name),localStorage.setItem("faculty_id",o.data.user.faculty.id)),(n=o.data.user)!=null&&n.major&&(localStorage.setItem("userMajor",o.data.user.major.name),localStorage.setItem("major_id",o.data.user.major.id)),(s=o.data.user)!=null&&s.roles&&o.data.user.roles[0]&&localStorage.setItem("role",o.data.user.roles[0])),o.data}catch(o){throw((i=o.response)==null?void 0:i.data)||{message:"Registration completion failed"}}},Qp=()=>localStorage.getItem("googleTempToken"),Zp=t=>{localStorage.setItem("googleTempToken",t)},Ho=h.createContext(),Zc=({children:t})=>{const[r,n]=h.useState(null),[s,i]=h.useState(!0),[o,a]=h.useState(null);h.useEffect(()=>{Er().then(n).catch(()=>n(null)).finally(()=>i(!1))},[]);const d=h.useCallback(async O=>{i(!0),a(null);try{await Uo(O);const M=await Er();return n(M),a(null),M}catch(M){throw a(M.message||"Login failed"),n(null),M}finally{i(!1)}},[]),v=h.useCallback(async()=>{i(!0);try{await Zs(),n(null)}finally{i(!1)}},[]),g=h.useCallback(async O=>{i(!0),a(null);try{await Qs(O);const M=await Er();return n(M),a(null),M}catch(M){throw a(M.message||"Registration failed"),n(null),M}finally{i(!1)}},[]),u=h.useCallback(async O=>{i(!0),a(null);try{await Qc(O);const M=await Er();return n(M),a(null),M}catch(M){throw a(M.message||"Google registration failed"),n(null),M}finally{i(!1)}},[]),y=h.useCallback(async O=>{i(!0);try{if(!localStorage.getItem("authToken")){const _="google_auth_"+Math.random().toString(36).substring(2,15);localStorage.setItem("authToken",_)}return n(O),sessionStorage.setItem("currentUser",JSON.stringify(O)),await Er(),O}catch(M){throw console.error("Google auth error:",M),a(M.message||"Failed to process Google authentication"),n(null),M}finally{i(!1)}},[]);return e.jsx(Ho.Provider,{value:{user:r,loading:s,authError:o,login:d,logout:v,register:g,completeGoogleSignUp:u,handleGoogleAuthSuccess:y},children:t})},ar=()=>{const t=h.useContext(Ho);return t||(console.warn("useAuth must be used within an AuthProvider. Falling back to default context."),{user:null,loading:!1,authError:null,login:async()=>{},logout:async()=>{},register:async()=>{},completeGoogleSignUp:async()=>{},handleGoogleAuthSuccess:async()=>{}})},ed=({roles:t=[]})=>{const{user:r,loading:n}=ar();return n?e.jsx(Gt,{minH:"80vh",children:e.jsx(_t,{size:"xl",color:"blue.500"})}):r?t.length>0&&(!r.roles||!t.some(s=>r.roles.includes(s)))?e.jsx(An,{to:"/unauthorized",replace:!0}):e.jsx(fo,{}):e.jsx(An,{to:"/login",replace:!0})};var Go={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vi=tr.createContext&&tr.createContext(Go),td=["attr","size","title"];function rd(t,r){if(t==null)return{};var n=nd(t,r),s,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)s=o[i],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function nd(t,r){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;n[s]=t[s]}return n}function Ln(){return Ln=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ln.apply(this,arguments)}function wi(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,s)}return n}function Fn(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?wi(Object(n),!0).forEach(function(s){sd(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function sd(t,r,n){return r=id(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function id(t){var r=od(t,"string");return typeof r=="symbol"?r:r+""}function od(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Yo(t){return t&&t.map((r,n)=>tr.createElement(r.tag,Fn({key:n},r.attr),Yo(r.child)))}function ke(t){return r=>tr.createElement(ad,Ln({attr:Fn({},t.attr)},r),Yo(t.child))}function ad(t){var r=n=>{var{attr:s,size:i,title:o}=t,a=rd(t,td),d=i||n.size||"1em",v;return n.className&&(v=n.className),t.className&&(v=(v?v+" ":"")+t.className),tr.createElement("svg",Ln({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,a,{className:v,style:Fn(Fn({color:t.color||n.color},n.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&tr.createElement("title",null,o),t.children)};return vi!==void 0?tr.createElement(vi.Consumer,null,n=>r(n)):r(Go)}function ld(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function Vo(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function Vt(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function Tr(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function en(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function Pr(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function jr(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(t)}function rs(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(t)}function rn(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Jo(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(t)}function Bt(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function wr(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function ur(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function or(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function Sr(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function em(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function nn(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function cd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 18 22 12 16 6"},child:[]},{tag:"polyline",attr:{points:"8 6 2 12 8 18"},child:[]}]})(t)}function dd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"7.5 4.21 12 6.81 16.5 4.21"},child:[]},{tag:"polyline",attr:{points:"7.5 19.79 7.5 14.6 3 12"},child:[]},{tag:"polyline",attr:{points:"21 12 16.5 14.6 16.5 19.79"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function tm(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function ud(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function hd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function Mr(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function rm(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(t)}function fd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function pd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function br(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function nm(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"},child:[]},{tag:"polyline",attr:{points:"13 2 13 9 20 9"},child:[]}]})(t)}function ns(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function qs(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"},child:[]},{tag:"line",attr:{x1:"4",y1:"22",x2:"4",y2:"15"},child:[]}]})(t)}function sm(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function im(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function md(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function Wn(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(t)}function gd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 16 12 14 15 10 15 8 12 2 12"},child:[]},{tag:"path",attr:{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"},child:[]}]})(t)}function Xo(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function om(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function Bs(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function xd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function Ko(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function Zr(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function bd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function am(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(t)}function Us(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function yd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(t)}function Qo(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(t)}function ei(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(t)}function lm(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"},child:[]}]})(t)}function Ut(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function cm(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 6 2 18 2 18 9"},child:[]},{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"},child:[]},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8"},child:[]}]})(t)}function jd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function Dr(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function vd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function wd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function ss(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"},child:[]}]})(t)}function Sd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(t)}function Cd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(t)}function _d(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(t)}function Si(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},child:[]}]})(t)}function fn(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function is(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]}]})(t)}function kd(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function ti(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(t)}function Od(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(t)}function Ci(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function Rn(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function Ft(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function ri(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(t)}function sn(t){return ke({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const Lr="/assets/maaref-logo-CWYUoBqw.png",_i=({textColor:t,mutedText:r,isCollapsed:n,onClose:s})=>{const{user:i}=ar(),o=R("rgba(250, 202, 21, 0.3)","rgba(202, 162, 18, 0.3)"),a=Lt(),d=po(),v=localStorage.getItem("role"),g=(v||"").toLowerCase(),u=g==="admin"||g==="moderator",y=Wr({base:!0,md:!1}),O=[{icon:md,label:"Home",path:"/dashboard"},{icon:rs,label:"Resources",path:"/resources"},{icon:Ft,label:"Study Groups",path:"/study-groups"},{icon:Bt,label:"Events",path:"/events"},{icon:qs,label:"Clubs",path:"/clubs"},{icon:dd,label:"Grade Calculator",path:"/grade-calculator",hideOnMobile:!0},{icon:gd,label:"Section Swap",path:"/requests"},...u?[{icon:Sd,label:"Moderate Resources",path:"/resource-moderation"}]:[]],M=w=>{a(w),s&&s()},_=w=>d.pathname===w||d.pathname.startsWith(w+"/");return e.jsxs(N,{direction:"column",h:"100%",justify:"space-between",children:[e.jsxs(E,{children:[e.jsx(Gt,{py:4,mb:2,children:e.jsx("img",{src:Lr,alt:"maaref Logo",style:{maxWidth:n?"40px":"60px",height:"auto",transition:"max-width 0.3s ease",cursor:"pointer"},onClick:()=>M("/dashboard")})}),e.jsx(mt,{spacing:3,px:n?1:3,children:O.filter(w=>!(w.hideOnMobile&&y)).map(w=>e.jsx(Ar,{label:w.label,placement:"right",isDisabled:!n,hasArrow:!0,children:e.jsxs(G,{leftIcon:n?null:e.jsx(w.icon,{}),justifyContent:n?"center":"flex-start",variant:"ghost",color:t,bg:_(w.path)?o:"transparent",onClick:()=>M(w.path),_hover:{bg:o},px:n?2:4,w:"full",size:"md",children:[!n&&w.label,n&&e.jsx(w.icon,{})]})},w.path))}),e.jsxs(E,{mt:6,children:[!n&&e.jsx(m,{px:3,fontSize:"xs",fontWeight:"medium",textTransform:"uppercase",color:r,mb:2,children:"Personal"}),e.jsx(Et,{mb:3,opacity:.3}),e.jsx(mt,{spacing:3,px:n?1:3,children:e.jsx(Ar,{label:"Saved",placement:"right",isDisabled:!n,hasArrow:!0,children:e.jsxs(G,{leftIcon:n?null:e.jsx(rn,{}),justifyContent:n?"center":"flex-start",variant:"ghost",color:t,bg:_("/saved-resources")?o:"transparent",onClick:()=>M("/saved-resources"),_hover:{bg:o},px:n?2:4,w:"full",size:"md",children:[!n&&"Saved",n&&e.jsx(rn,{})]})})})]})]}),e.jsxs(E,{px:n?1:3,py:4,mt:"auto",children:[e.jsx(Et,{mb:4}),e.jsxs(Tt,{placement:"top-end",strategy:"fixed",offset:[0,10],children:[e.jsx(Pt,{as:G,variant:"ghost",w:"full",py:2,borderRadius:"md",textAlign:"left",_hover:{bg:o},children:e.jsxs(Te,{spacing:3,justify:n?"center":"flex-start",children:[e.jsx(gt,{size:"sm",name:i?`${i.first_name} ${i.last_name}`:"User",src:(i==null?void 0:i.avatar_url)||(i==null?void 0:i.avatar)}),!n&&e.jsxs(E,{children:[e.jsx(m,{fontSize:"sm",fontWeight:"medium",color:t,children:i?`${i.first_name} ${i.last_name}`:"Guest"}),e.jsx(m,{fontSize:"xs",color:r,children:v})]}),!n&&e.jsx(Fe,{as:ur,ml:"auto",fontSize:"sm",color:t})]})}),e.jsxs(At,{zIndex:1500,shadow:"xl",children:[e.jsx(Qe,{icon:e.jsx(wd,{}),onClick:()=>M("/settings"),children:"Settings"}),e.jsx(Et,{}),e.jsx(Qe,{icon:e.jsx(xd,{}),onClick:()=>{Zs()},children:"Sign Out"})]})]})]})]})},Rd=async(t=1)=>{try{return(await we.get("/notifications",{params:{page:t}})).data}catch(r){throw r}},zd=async t=>{try{return(await we.patch(`/notifications/${t}/read`,{})).data}catch(r){throw r}},Ed=async t=>{try{return(await we.delete(`/notifications/${t}`)).data}catch(r){throw r}},Td=async()=>{try{return(await we.put("/notifications",{})).data}catch(t){throw t}},Zo=h.createContext(),Pd=({children:t})=>{const[r,n]=h.useState([]),[s,i]=h.useState(!0),[o,a]=h.useState(null),[d,v]=h.useState(0),[g,u]=h.useState(1),[y,O]=h.useState(1),[M,_]=h.useState(!1),w=h.useCallback(x=>{var f,S,P;return{id:x.id,user:x.sender_name||"System",avatar:x.sender_avatar,content:((f=x.data)==null?void 0:f.message)||"",isRead:!!x.read,time:z(x.created_at),url:x.url||((S=x.data)==null?void 0:S.url),created_at:x.created_at,type:x.type,reason:(P=x.data)==null?void 0:P.reason}},[]),z=h.useCallback(x=>{if(!x)return"";const f=new Date,S=new Date(x),P=(f-S)/1e3;return P<60?`${Math.floor(P)}s ago`:P<3600?`${Math.floor(P/60)}m ago`:P<86400?`${Math.floor(P/3600)}h ago`:P<604800?`${Math.floor(P/86400)}d ago`:S.toLocaleDateString()},[]),L=h.useCallback(async(x=1,f=!1)=>{try{f||i(!0),a(null);const S=await Rd(x);let P=[];Array.isArray(S)?P=S:Array.isArray(S.data)?(P=S.data,u(S.current_page||x),O(S.last_page||1),_((S.current_page||x)<(S.last_page||1))):Array.isArray(S.notifications)&&(P=S.notifications);const T=P.map(w);f&&x>1?n(Z=>[...Z,...T]):n(T);const D=T.filter(Z=>!Z.isRead);f||v(D.length)}catch(S){a("Failed to load notifications"),console.error("Error fetching notifications:",S)}finally{i(!1)}},[w]),$=h.useCallback(()=>r.filter(x=>!x.isRead).sort((x,f)=>new Date(f.created_at)-new Date(x.created_at)).slice(0,3),[r]),A=h.useCallback(async x=>{n(S=>S.map(P=>P.id===x?{...P,isRead:!0}:P));const f=Math.max(0,d-1);v(f);try{await zd(x)}catch(S){console.error("Error marking notification as read:",S),n(P=>P.map(T=>T.id===x?{...T,isRead:!1}:T)),v(P=>P+1)}},[d]),B=h.useCallback(async()=>{const x=r.filter(f=>!f.isRead);n(f=>f.map(S=>({...S,isRead:!0}))),v(0);try{await Td()}catch(f){console.error("Error marking all notifications as read:",f),n(S=>S.map(P=>x.find(D=>D.id===P.id)?{...P,isRead:!1}:P)),v(x.length)}},[r]),p=h.useCallback(async x=>{const f=r.find(S=>S.id===x);n(S=>S.filter(P=>P.id!==x)),f&&!f.isRead&&v(S=>Math.max(0,S-1));try{await Ed(x)}catch(S){throw console.error("Error deleting notification:",S),n(P=>[...P,f].sort((T,D)=>new Date(D.created_at)-new Date(T.created_at))),f&&!f.isRead&&v(P=>P+1),S}},[r]),j=h.useCallback(()=>{L(1,!1)},[L]),k=h.useCallback(()=>{M&&!s&&g<y&&L(g+1,!0)},[M,s,g,y,L]);h.useEffect(()=>{L(1,!1)},[L]),h.useEffect(()=>{const x=setInterval(()=>{document.visibilityState==="visible"&&j()},3e4);return()=>clearInterval(x)},[j]);const I={notifications:r,loading:s,error:o,unreadCount:d,currentPage:g,totalPages:y,hasMore:M,unreadNotifications:$(),fetchNotifications:L,markAsRead:A,markAllAsRead:B,deleteNotification:p,refreshNotifications:j,loadMoreNotifications:k};return e.jsx(Zo.Provider,{value:I,children:t})},ea=()=>{const t=h.useContext(Zo);if(!t)throw new Error("useNotifications must be used within a NotificationsProvider");return t},Ad=uo`
  0% { transform: rotate(0); }
  10% { transform: rotate(15deg); }
  20% { transform: rotate(-15deg); }
  30% { transform: rotate(7deg); }
  40% { transform: rotate(-7deg); }
  50% { transform: rotate(0); }
  100% { transform: rotate(0); }
`,Md=()=>{var k,I;const{isOpen:t,onOpen:r,onClose:n}=pt(),{unreadNotifications:s,unreadCount:i,loading:o,error:a,markAsRead:d,markAllAsRead:v}=ea(),g=ka(),u=R("white","gray.800"),y=R("gray.200","gray.600"),O=R("gray.50","gray.700"),M=R("brand.navy","white"),_=R("gray.600","gray.400"),w=R("brand.gold","brand.goldDark"),z=R("brand.navy","brand.navyDark"),L=R("0 4px 20px rgba(0, 0, 0, 0.1)","0 4px 20px rgba(0, 0, 0, 0.3)"),$=`${Ad} 1s ease-in-out`,A=R(`0 0 8px ${((k=g.colors.brand)==null?void 0:k.gold)||"#F2D944"}`,`0 0 8px ${((I=g.colors.brand)==null?void 0:I.goldDark)||"#D9C226"}`),B=h.useRef(),[p,j]=h.useState(!1);return h.useEffect(()=>{if(i>0){j(!0);const x=setTimeout(()=>j(!1),1e3);return()=>clearTimeout(x)}},[i]),e.jsxs(Oa,{isOpen:t,onOpen:r,onClose:n,placement:"bottom-end",initialFocusRef:B,closeOnBlur:!0,gutter:1,strategy:"fixed",children:[e.jsx(Ra,{children:e.jsxs(E,{position:"relative",display:"inline-block",children:[e.jsx(Ke,{icon:e.jsx(Pr,{size:20}),"aria-label":"Notifications",variant:"ghost",position:"relative",animation:p?$:void 0,_hover:{transform:"scale(1.05)",bg:`${w}20`,transition:"all 0.2s ease-in-out"},transition:"all 0.2s ease-in-out",borderRadius:"full"}),i>0&&e.jsx(dt,{position:"absolute",top:"-2px",right:"-2px",bg:w,color:z,borderRadius:"full",boxSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"xs",fontWeight:"bold",boxShadow:p?A:"none",transition:"box-shadow 0.3s ease-in-out",border:"2px solid",borderColor:u,zIndex:2,children:i})]})}),e.jsxs(za,{w:{base:"300px",sm:"350px"},maxH:"450px",bg:u,borderColor:y,boxShadow:L,borderRadius:"xl",_focus:{outline:"none"},overflow:"hidden",children:[e.jsx(Ea,{bg:u}),e.jsx(Ta,{color:M,size:"md"}),e.jsx(Pa,{borderBottom:"1px solid",borderColor:y,p:4,fontWeight:"bold",color:M,bg:R("gray.50","gray.750"),children:e.jsx(N,{justify:"space-between",align:"center",children:e.jsxs(Te,{spacing:2,children:[e.jsx(Fe,{as:Pr,color:w}),e.jsx(m,{fontSize:"md",children:"Notifications"})]})})}),e.jsx(Aa,{p:0,overflowY:"auto",maxH:"300px",children:o?e.jsx(Gt,{py:10,children:e.jsx(m,{color:_,children:"Loading notifications..."})}):a?e.jsx(Gt,{py:10,children:e.jsx(m,{color:"red.400",children:a})}):s.length>0?e.jsx(de,{spacing:0,align:"stretch",divider:e.jsx(Et,{borderColor:y}),children:s.map(x=>e.jsx(E,{p:4,position:"relative",bg:x.isRead?"transparent":`${w}10`,_hover:{bg:O},transition:"all 0.2s",cursor:"pointer",onClick:()=>d(x.id),borderLeft:"3px solid",borderLeftColor:x.isRead?"transparent":w,children:e.jsxs(N,{align:"center",children:[e.jsxs(E,{position:"relative",children:[e.jsx(gt,{size:"md",name:x.user,border:"2px solid",borderColor:x.isRead?y:w}),!x.isRead&&e.jsx(dt,{position:"absolute",top:"-1",right:"-1",bg:w,boxSize:"8px",borderRadius:"full",border:"2px solid",borderColor:u})]}),e.jsxs(E,{ml:4,flex:"1",children:[e.jsxs(N,{align:"baseline",justify:"space-between",children:[e.jsx(m,{fontWeight:x.isRead?"medium":"bold",fontSize:"sm",color:M,noOfLines:1,children:x.user}),e.jsx(m,{fontSize:"xs",color:_,children:x.time})]}),e.jsx(m,{fontSize:"sm",color:x.isRead?_:M,mt:1,noOfLines:2,children:x.content})]})]})},x.id))}):e.jsx(Gt,{py:10,children:e.jsxs(de,{spacing:2,children:[e.jsx(E,{p:3,borderRadius:"full",bg:`${w}20`,children:e.jsx(Fe,{as:Pr,fontSize:"xl",color:w})}),e.jsx(m,{fontWeight:"medium",color:M,children:"No notifications"}),e.jsx(m,{fontSize:"sm",color:_,textAlign:"center",children:"You're all caught up!"})]})})}),e.jsx(Ma,{p:0,borderTop:"1px solid",borderColor:y,children:e.jsx(G,{as:ir,to:"/notifications",ref:B,variant:"ghost",size:"md",color:M,_hover:{bg:`${w}20`},fontWeight:"medium",width:"100%",height:"50px",borderRadius:"0",rightIcon:e.jsx(Sr,{}),onClick:n,children:"See All Notifications"})})]})]})},Dd=({isMobile:t,onLeftOpen:r,colorMode:n,toggleColorMode:s})=>(Lt(),R("white","gray.800"),R("gray.200","gray.700"),R("rgba(250, 202, 21, 0.3)","rgba(202, 162, 18, 0.3)"),e.jsxs(N,{align:"center",gap:2,ml:"auto",children:[e.jsx(Ar,{label:n==="light"?"Dark mode":"Light mode",children:e.jsx(Ke,{size:"md",variant:"ghost",icon:n==="light"?e.jsx(yd,{}):e.jsx(_d,{}),onClick:s,"aria-label":`Toggle ${n==="light"?"Dark":"Light"} Mode`})}),e.jsx(Md,{})]})),Ld=()=>{const{colorMode:t,toggleColorMode:r}=Da(),n=Wr({base:!0,lg:!1}),s=R("white","gray.800"),i=R("gray.800","whiteAlpha.900"),o=R("gray.600","gray.400"),a=R("gray.200","gray.700"),d=R("gray.50","gray.900");R("blue.600","blue.400"),R("yellow.400","yellow.500");const v=R("gray.100","gray.700"),[g,u]=h.useState(!1),y=()=>u(!g),{isOpen:O,onOpen:M,onClose:_}=pt();return pt(),e.jsxs(N,{direction:{base:"column",lg:"row"},width:"100%",bg:d,minH:"100vh",children:[!n&&e.jsxs(E,{bg:s,borderRight:"1px solid",borderColor:a,width:g?"70px":"240px",flexShrink:0,display:{base:"none",lg:"block"},position:"fixed",left:0,top:0,transition:"width 0.3s ease",height:"100vh",overflowY:"auto",overflowX:"hidden",zIndex:20,px:g?2:4,py:4,css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px"},"&::-webkit-scrollbar-thumb":{background:"gray.300",borderRadius:"24px"}},children:[e.jsx(Ke,{icon:g?e.jsx(Sr,{}):e.jsx(or,{}),position:"absolute",right:"-12px",top:"20px",size:"sm",borderRadius:"full",bg:s,borderWidth:"1px",borderColor:a,zIndex:30,onClick:y,"aria-label":g?"Expand sidebar":"Collapse sidebar",boxShadow:"sm"}),e.jsx(_i,{textColor:i,mutedText:o,highlightBg:v,isCollapsed:g})]}),e.jsxs(E,{flexGrow:1,overflowY:"auto",ml:{base:0,lg:g?"70px":"240px"},transition:"margin-left 0.3s ease",children:[e.jsxs(N,{align:"center",justify:"space-between",mb:4,px:{base:4,md:6},py:4,bg:s,borderBottom:"1px solid",borderColor:a,children:[e.jsx(N,{align:"center",children:n&&e.jsx(Ke,{icon:e.jsx(bd,{}),variant:"ghost",onClick:M,"aria-label":"Open menu"})}),e.jsx(Dd,{isMobile:n,onLeftOpen:M,colorMode:t,toggleColorMode:r})]}),e.jsx(E,{p:{base:4,md:6},children:e.jsx(fo,{})})]}),e.jsxs(La,{isOpen:O,placement:"left",onClose:_,children:[e.jsx(at,{}),e.jsxs(Fa,{bg:s,children:[e.jsx(wt,{}),e.jsx(lt,{p:4,pt:12,children:e.jsx(_i,{textColor:i,mutedText:o,highlightBg:v,isCollapsed:!1,onClose:_})})]})]})]})},Fd=()=>e.jsx(E,{bg:"blue.900",color:"white",py:[8,12],children:e.jsxs(Jt,{maxW:"container.lg",children:[e.jsx(de,{spacing:6,pb:[4,8],children:e.jsxs(de,{align:"center",spacing:4,children:[e.jsxs(N,{align:"center",gap:2,direction:["column","row"],children:[e.jsx(vt,{src:Lr,boxSize:"40px"}),e.jsx(Ee,{size:"md",children:"MU Connect"})]}),e.jsx(m,{opacity:.9,fontSize:"sm",children:"Connecting every learner at Maaraf University"})]})}),e.jsx(m,{textAlign:"center",pt:[4,8],borderTop:"1px",borderColor:"blue.700",opacity:.8,fontSize:"sm",children:" 2025 MU Connect"})]})});uo`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
  100% { transform: translateY(0px); }
`;const Wd=()=>{const t=Lt();return e.jsx(E,{as:"section","aria-label":"Hero section",children:e.jsx(Jt,{maxW:"container.xl",centerContent:!0,py:[12,20],children:e.jsxs(mt,{direction:{base:"column",md:"row"},spacing:[8,10],align:"center",children:[e.jsxs(de,{align:["center","start"],spacing:6,maxW:"2xl",textAlign:["center","left"],children:[e.jsxs(Ee,{as:"h1",color:"blue.900",size:["2xl","3xl"],lineHeight:"1.1",fontWeight:"extrabold",px:[2,0],children:["Empower Your Learning Journey with"," ",e.jsx(E,{as:"span",bgGradient:"linear(to-r, blue.500, teal.500)",bgClip:"text",children:"MUConnect"})]}),e.jsx(m,{as:"p",fontSize:["md","xl"],color:"gray.600",lineHeight:"1.7",children:"Your all-in-one student hub: find study resources, swap course sections, join study groups, track grades, and never miss a deadline."}),e.jsxs(N,{as:"nav",gap:4,align:"center",direction:["column","row"],w:"full",justify:["center","start"],children:[e.jsx(G,{size:["md","lg"],colorScheme:"blue",px:[6,10],rightIcon:e.jsx(Sr,{}),w:["full","auto"],onClick:()=>t("/register"),"aria-label":"Sign up for MU Connect",children:"Sign Up"}),e.jsx(G,{size:["md","lg"],variant:"outline",colorScheme:"blue",px:[6,10],w:["full","auto"],onClick:()=>t("/login"),"aria-label":"Login to MU Connect",children:"Login"})]})]}),e.jsx(vt,{src:Lr,boxSize:{base:"250px",sm:"300px",md:"600px"},alt:"MU Connect logo illustration - My University Connect platform",loading:"eager"})]})})})};function Id(t){return ke({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"},child:[]}]})(t)}const kr=({icon:t,title:r,description:n,color:s="blue"})=>e.jsxs(de,{bg:"white",p:[4,8],borderRadius:"2xl",boxShadow:"xl",align:"start",spacing:4,transition:"all 0.3s",_hover:{transform:"translateY(-8px)"},position:"relative",overflow:"hidden",textAlign:["center","left"],children:[e.jsx(E,{position:"absolute",top:"-20px",right:"-20px",w:"100px",h:"100px",bg:`${s}.100`,borderRadius:"full"}),e.jsx(Fe,{as:t,boxSize:[6,8],color:`${s}.600`,mx:["auto","0"]}),e.jsx(Ee,{size:["md","lg"],color:"blue.900",textAlign:["center","left"],children:r}),e.jsx(m,{color:"gray.600",lineHeight:"1.7",fontSize:["sm","md"],children:n})]}),Nd=()=>e.jsx(E,{py:[12,20],bg:"white",children:e.jsxs(Jt,{maxW:"container.lg",children:[e.jsxs(de,{spacing:3,mb:[8,12],children:[e.jsx(m,{color:"blue.500",fontWeight:"bold",fontSize:["sm","md"],children:"WHAT YOU GET"}),e.jsx(Ee,{textAlign:"center",size:["xl","2xl"],color:"blue.900",maxW:"2xl",children:"Solve Your Biggest Student Challenges"}),e.jsx(m,{textAlign:"center",fontSize:["md","lg"],color:"gray.600",maxW:"3xl",children:"From finding study materials to swapping sections, MU Connect has everything you need in one place."})]}),e.jsxs(ct,{templateColumns:{base:"1fr",md:"repeat(3, 1fr)"},gap:[4,8],children:[e.jsx(kr,{icon:jr,title:"Study Resources",description:"Access lecture notes, past exams, and student-shared materials for all your courses",color:"blue"}),e.jsx(kr,{icon:Pr,title:"Section Swapping",description:"Stuck with a bad schedule? Post a section swap request and find matches instantly",color:"purple"}),e.jsx(kr,{icon:Ft,title:"Study Groups",description:"Find study partners, join group discussions, and collaborate on assignments",color:"teal"}),e.jsx(kr,{icon:Id,title:"Grade Calculator",description:"Calculate what you need to score on finals and track your semester progress",color:"orange"}),e.jsx(kr,{icon:Ft,title:"Clubs",description:"Discover student clubs, connect with like-minded peers, and participate in club activities",color:"red"}),e.jsx(kr,{icon:Bt,title:"Campus Events",description:"Discover club activities, academic events, and never miss important deadlines",color:"green"})]})]})}),qd=()=>{const t="white",r="gray.700",n="blue.500";return e.jsxs(E,{bg:"gray.50",py:[16,24],position:"relative",children:[e.jsx(E,{position:"absolute",top:"10%",right:"5%",width:"150px",height:"150px",borderRadius:"full",bg:"blue.50",opacity:.5}),e.jsx(E,{position:"absolute",bottom:"15%",left:"8%",width:"120px",height:"120px",borderRadius:"full",bg:"purple.50",opacity:.5}),e.jsx(Jt,{maxW:"container.md",position:"relative",zIndex:1,children:e.jsxs(de,{spacing:8,children:[e.jsxs(de,{spacing:3,children:[e.jsx(m,{color:n,fontWeight:"semibold",fontSize:["sm","md"],letterSpacing:"wide",children:"A MESSAGE FROM THE CREATOR"}),e.jsx(Ee,{textAlign:"center",size:["xl","2xl"],color:"gray.800",fontWeight:"800",children:"Built with Purpose"})]}),e.jsx(E,{bg:t,borderRadius:"2xl",boxShadow:"2xl",p:[6,10],w:"full",transform:"translateY(0)",transition:"all 0.3s",_hover:{transform:"translateY(-5px)",boxShadow:"3xl"},children:e.jsxs(N,{direction:{base:"column",md:"row"},align:"center",gap:6,children:[e.jsxs(de,{spacing:3,flexShrink:0,children:[e.jsx(gt,{size:"2xl",name:"Kamel Faour",src:"https://cdn.mu-connect.me/avatars/default.png",border:"4px solid",borderColor:n,boxShadow:"lg"}),e.jsxs(de,{spacing:0,children:[e.jsx(m,{fontWeight:"bold",fontSize:"lg",color:r,children:"Kamel Faour"}),e.jsxs(N,{align:"center",gap:1,mt:1,children:[e.jsx(Fe,{as:cd,boxSize:3,color:n}),e.jsx(m,{fontSize:"xs",color:r,children:"Maaref University Graduate"})]})]})]}),e.jsxs(de,{align:"start",spacing:4,flex:1,children:[e.jsx(m,{fontSize:["md","lg"],color:r,lineHeight:"tall",fontStyle:"italic",children:'"MU Connect was born from a simple observation: students needed a better way to collaborate, share knowledge, and support each other. What started as a capstone project has grown into a platform that brings our university community closer together."'}),e.jsx(E,{w:"full",h:"1px",bg:"gray.200",my:2})]})]})}),e.jsx(m,{color:r,fontSize:["sm","md"],textAlign:"center",maxW:"600px",fontWeight:"medium",children:"Thank you for being part of this journey. Together, we're building a stronger, more connected university."})]})})]})},Bd=()=>e.jsx(E,{py:[12,20],bg:"white",children:e.jsx(Jt,{maxW:"container.lg",textAlign:"center",children:e.jsxs(E,{bgGradient:"linear(to-br, blue.600, blue.800)",borderRadius:["xl","3xl"],p:[8,16],boxShadow:"2xl",position:"relative",overflow:"hidden",color:"white",children:[e.jsx(E,{position:"absolute",top:"-50px",left:"-50px",w:"200px",h:"200px",bg:"whiteAlpha.100",borderRadius:"full"}),e.jsx(E,{position:"absolute",bottom:"-50px",right:"-50px",w:"300px",h:"300px",bg:"whiteAlpha.100",borderRadius:"full"}),e.jsxs(de,{spacing:6,position:"relative",zIndex:"1",children:[e.jsx(m,{color:"blue.200",fontWeight:"bold",fontSize:["sm","md"],letterSpacing:"wider",children:"READY TO GET STARTED?"}),e.jsx(Ee,{size:["xl","2xl"],mb:2,children:"Join Our Academic Community"}),e.jsx(m,{fontSize:["md","xl"],color:"blue.100",maxW:"2xl",mx:"auto",children:"Sign up free with your university email and instantly access study resources, section swaps, and study groups."}),e.jsx(N,{justify:"center",w:"full",pt:4,children:e.jsx(G,{as:ir,to:"/register",colorScheme:"orange",size:"lg",borderRadius:"full",px:8,h:"3.5rem",rightIcon:e.jsx(Tr,{}),boxShadow:"lg",_hover:{transform:"translateY(-2px)",boxShadow:"xl"},children:"Join Free"})})]})]})})}),Ud=()=>e.jsxs(E,{bg:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",minH:"100vh",children:[e.jsx(Wd,{}),e.jsx(Nd,{}),e.jsx(qd,{}),e.jsx(Bd,{}),e.jsx(Fd,{})]}),zt={NETWORK:"network",VALIDATION:"validation",AUTHENTICATION:"authentication",AUTHORIZATION:"authorization",NOT_FOUND:"not_found",SERVER:"server",UNKNOWN:"unknown"},ki={[zt.NETWORK]:"Unable to connect to the server. Please check your internet connection and try again.",[zt.VALIDATION]:"Please check your input and try again.",[zt.AUTHENTICATION]:"Your session has expired. Please log in again.",[zt.AUTHORIZATION]:"You don't have permission to perform this action.",[zt.NOT_FOUND]:"The requested resource was not found.",[zt.SERVER]:"Something went wrong on our end. Please try again later.",[zt.UNKNOWN]:"An unexpected error occurred. Please try again later."},$d=t=>{var r;if(!t.status&&(t.code==="NETWORK_ERROR"||(r=t.message)!=null&&r.includes("Network Error")))return zt.NETWORK;switch(t.status){case 400:return zt.VALIDATION;case 401:return zt.AUTHENTICATION;case 403:return zt.AUTHORIZATION;case 404:return zt.NOT_FOUND;case 422:return zt.VALIDATION;case 500:case 502:case 503:case 504:return zt.SERVER;default:return zt.UNKNOWN}},Hd=(t,r=null)=>{var o,a;const n=$d(t);let s="Error",i=r||ki[n];if(n===zt.VALIDATION&&((o=t.data)!=null&&o.errors)){const d=Object.values(t.data.errors).flat();d.length>0&&(i=d[0],s="Validation Error")}else(a=t.data)!=null&&a.message&&Gd(t.data.message)?i=t.data.message:n===zt.SERVER&&(i=ki[zt.SERVER],s="Server Error");return{title:s,description:i,type:n}},Gd=t=>!t||typeof t!="string"?!1:![/database/i,/sql/i,/connection/i,/internal server/i,/stack trace/i,/exception/i,/error at line/i,/query failed/i,/undefined method/i,/class not found/i].some(n=>n.test(t)),dr=(t,r=null)=>{const n=Hd(t,r);return{title:n.title,description:n.description,status:"error",duration:5e3,isClosable:!0}},xs=(t,r=null,n=3e3)=>({title:t,description:r,status:"success",duration:n,isClosable:!0}),nr=(t,r)=>{console.error(`[${t}]`,{message:r.message,status:r.status,url:r.url,method:r.method})},Yd=()=>{const[t,r]=h.useState({login:"",password:""}),[n,s]=h.useState({}),i=St();Lt();const{user:o,loading:a,login:d}=ar(),v=y=>{r({...t,[y.target.name]:y.target.value}),s({...n,[y.target.name]:""})},g=()=>{const y={};return t.login||(y.login="Username/Email is required"),t.password||(y.password="Password is required"),s(y),Object.keys(y).length===0},u=async y=>{if(y.preventDefault(),!!g())try{await d(t),i({title:"Login successful",status:"success",duration:3e3})}catch(O){nr("handleSubmit",O);const M=(O==null?void 0:O.message)||(O==null?void 0:O.error)||"Login failedddd";i({title:"Error",description:M,status:"error",duration:5e3,isClosable:!0})}};return a?e.jsx(Gt,{minH:"100vh",children:e.jsx(_t,{size:"xl",color:"blue.500"})}):o?e.jsx(An,{to:"/dashboard",replace:!0}):e.jsx(N,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",align:"center",justify:"center",children:e.jsx(Jt,{maxW:"container.md",px:[4,8],children:e.jsxs(E,{bg:"white",p:[6,12],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:"linear(to-r, blue.500, teal.400)",borderRadius:"2xl",zIndex:-1},children:[e.jsxs(N,{align:"center",mb:8,gap:3,justify:"center",children:[e.jsx(vt,{src:Lr,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(Ee,{size:"xl",bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"MU Connect"})]}),e.jsxs(mt,{spacing:8,children:[e.jsx(E,{textAlign:"center",children:e.jsx(Ee,{size:"2xl",mb:2,bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"Welcome Back!"})}),e.jsx("form",{onSubmit:u,children:e.jsxs(mt,{spacing:6,children:[e.jsxs(xe,{isRequired:!0,isInvalid:!!n.login,children:[e.jsx(be,{color:"gray.600",children:"Username/Email"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Rn,color:"blue.500","aria-label":"Username icon"})}),e.jsx(We,{name:"login",placeholder:"id@mu.edu.lb",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800",value:t.login,onChange:v})]}),n.login&&e.jsx(m,{color:"red.500",fontSize:"sm",mt:1,children:n.login})]}),e.jsxs(xe,{isRequired:!0,isInvalid:!!n.password,children:[e.jsx(be,{color:"gray.600",children:"Password"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Bs,color:"blue.500","aria-label":"Password icon"})}),e.jsx(We,{type:"password",placeholder:"",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800",name:"password",value:t.password,onChange:v})]}),n.password&&e.jsx(m,{color:"red.500",fontSize:"sm",mt:1,children:n.password})]}),e.jsx(N,{justify:"space-between",align:"center",children:e.jsx(Ms,{as:ir,to:"/forgot-password",color:"blue.500",fontSize:"sm",_hover:{textDecoration:"underline"},children:"Forgot Password?"})}),e.jsx(G,{type:"submit",colorScheme:"blue",size:"lg",height:"60px",fontSize:"lg",rightIcon:e.jsx(Fe,{as:Tr,"aria-label":"Sign in"}),isLoading:a,bgGradient:"linear(to-r, blue.500, teal.400)",_hover:{bgGradient:"linear(to-r, blue.600, teal.500)"},_active:{transform:"scale(0.98)"},w:"full",children:"Sign In"})]})}),e.jsxs(m,{textAlign:"center",color:"gray.600",children:["New to MU Connect?"," ",e.jsx(Ms,{as:ir,to:"/register",color:"blue.500",fontWeight:"600",_hover:{textDecoration:"underline"},children:"Create account"})]})]})]})})})},Vd=()=>{var X,ie;const[t,r]=h.useState(0),[n,s]=h.useState({first_name:"",last_name:"",username:"",email:"",password:"",password_confirmation:"",faculty_id:"",major_id:""}),[i,o]=h.useState([]),[a,d]=h.useState([]),[v,g]=h.useState(!0),[u,y]=h.useState(!1),[O,M]=h.useState(""),[_,w]=h.useState(""),[z,L]=h.useState({}),[$,A]=h.useState(!1),[B,p]=h.useState(0),j=St(),k=Lt(),I="linear(to-br, blue.50 0%, white 50%, blue.50 100%)",x="white",f="linear(to-r, blue.500, teal.400)",S="linear(to-r, blue.600, teal.500)",P="gray.700",T="gray.200",D=[{id:"welcome",title:"Welcome"},{id:"name",title:"Your Name"},{id:"username",title:"Create Username"},{id:"email",title:"Your Email"},{id:"password",title:"Set Password"},{id:"faculty",title:"Your Faculty"},{id:"major",title:"Your Major"},{id:"complete",title:"Complete"}],Z=he=>{const{name:le,value:ue}=he.target;s(Pe=>({...Pe,[le]:ue})),le==="username"&&z.username&&L(Pe=>({...Pe,username:void 0}))},re=he=>{const le=he.target.value;s(ue=>({...ue,faculty_id:le,major_id:""}))},c=he=>{const le=he.target.value;s(ue=>({...ue,major_id:le}))},fe=(he=t)=>{const le={};switch(he){case 1:n.first_name.trim()||(le.first_name="First name is required."),n.last_name.trim()||(le.last_name="Last name is required.");break;case 2:n.username.trim()||(le.username="Username is required.");break;case 3:n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.email.endsWith("@mu.edu.lb")||(le.email="Email must be a university email (@mu.edu.lb)."):le.email="Invalid email address format.":le.email="Email is required.";break;case 4:n.password?n.password.length<6&&(le.password="Password must be at least 6 characters."):le.password="Password is required.",n.password_confirmation?n.password!==n.password_confirmation&&(le.password_confirmation="Passwords do not match."):le.password_confirmation="Please confirm your password.";break;case 5:n.faculty_id||(le.faculty_id="Faculty is required.");break;case 6:n.major_id||(le.major_id="Major is required.");break}return L(le),Object.keys(le).length===0},C=()=>fe(t),l=()=>{if(t===2&&z.username){j({title:z.username,status:"error",duration:3e3});return}C()?t<D.length-1&&r(t+1):j({title:"Please correct the errors",status:"error",duration:2500})},b=he=>{he.key==="Enter"&&C()&&t<7&&(he.preventDefault(),l())},F=()=>{t>0&&r(t-1)},se=async he=>{he&&he.preventDefault();for(let ue=1;ue<=6;ue++)if(!fe(ue)){j({title:"Incomplete Information",description:"Please fill out all required fields correctly.",status:"error",duration:3e3}),r(ue);return}A(!0),p(0);const le=setInterval(()=>{p(ue=>Math.min(ue+Math.random()*15,90))},400);try{const ue={first_name:n.first_name,last_name:n.last_name,username:n.username,email:n.email,password:n.password,password_confirmation:n.password_confirmation,faculty_id:n.faculty_id,major_id:n.major_id};await Qs(ue),clearInterval(le),p(100),j({title:"Registration successful!",description:"Welcome to Maaref. We're glad to have you.",status:"success",duration:3e3,isClosable:!0}),setTimeout(()=>{k("/dashboard")},500)}catch(ue){if(clearInterval(le),A(!1),ue&&typeof ue=="object"&&ue.errors){L(De=>({...De,...ue.errors}));const Pe={first_name:1,last_name:1,username:2,email:3,password:4,password_confirmation:4,faculty_id:5,major_id:6},Ae=Object.keys(ue.errors).reduce((De,Oe)=>Math.min(De,Pe[Oe]||8),8);r(Ae),j({title:"Please correct the highlighted error(s).",status:"error",duration:3e3})}else j({title:ue.message||"An unexpected error occurred.",description:"Please try again later.",status:"error",duration:4e3})}};h.useEffect(()=>{g(!0),rr(async()=>{const{getFaculties:he}=await Promise.resolve().then(()=>ji);return{getFaculties:he}},void 0).then(({getFaculties:he})=>{he().then(le=>{o(le),g(!1),M("")}).catch(le=>{o([]),g(!1),M("Failed to load faculties. Please try again later."),j({title:"Failed to load faculties",description:(le==null?void 0:le.message)||"Please check your connection and try again.",status:"error",duration:5e3})})})},[]),h.useEffect(()=>{n.faculty_id?(y(!0),d([]),rr(async()=>{const{getMajors:he}=await Promise.resolve().then(()=>ji);return{getMajors:he}},void 0).then(({getMajors:he})=>{he(n.faculty_id).then(le=>{d(le),y(!1),w("")}).catch(le=>{d([]),y(!1),w("Failed to load majors. Please try again later."),j({title:"Failed to load majors",description:(le==null?void 0:le.message)||"Please check your connection and try again.",status:"error",duration:5e3})})})):d([]),s(he=>({...he,major_id:""}))},[n.faculty_id]);const{user:V,loading:ae}=ar();return ae?e.jsx(Gt,{minH:"100vh",children:e.jsx(_t,{size:"xl",color:"blue.500"})}):V?e.jsx(An,{to:"/dashboard",replace:!0}):e.jsx(N,{minH:"100vh",bgGradient:I,align:"center",justify:"center",children:$?e.jsx(E,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1000",bg:I,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:e.jsx(Wa,{initialScale:.9,in:$,children:e.jsxs(de,{spacing:8,maxW:"500px",textAlign:"center",p:4,children:[e.jsx(vt,{src:Lr,boxSize:"80px",alt:"Maaref Logo"}),e.jsx(Ee,{fontSize:"3xl",bgGradient:"linear(to-r, blue.500, teal.400)",bgClip:"text",letterSpacing:"tight",children:"Setting up your personalized experience"}),e.jsxs(E,{w:"full",children:[e.jsx(m,{mb:2,fontWeight:"medium",color:P,children:B<30?"Analyzing your academic profile...":B<60?"Finding relevant resources...":B<90?"Preparing your personalized feed...":"Almost done!"}),e.jsx(En,{value:B,colorScheme:"blue",h:"10px",rounded:"full",mb:3,hasStripe:!0,isAnimated:!0})]}),e.jsxs(m,{color:"gray.500",fontSize:"md",children:["Customizing your campus experience based on your major.",e.jsx("br",{}),"This will only take a moment..."]})]})})}):e.jsx(Jt,{maxW:"container.md",py:8,children:e.jsxs(E,{bg:x,p:[6,8],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:f,borderRadius:"2xl",zIndex:-1},children:[e.jsxs(N,{align:"center",mb:6,gap:3,justify:"center",children:[e.jsx(vt,{src:Lr,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(Ee,{size:"xl",bgGradient:f,bgClip:"text",children:"MU Connect"})]}),t>0&&t<D.length-1&&e.jsxs(E,{mb:6,children:[e.jsx(En,{value:t/(D.length-2)*100,size:"sm",colorScheme:"blue",borderRadius:"full"}),e.jsxs(N,{justify:"space-between",mt:2,children:[e.jsxs(m,{fontSize:"sm",color:"gray.500",children:["Step ",t," of ",D.length-2]}),e.jsx(m,{fontSize:"sm",color:"gray.500",children:D[t].title})]})]}),e.jsxs(E,{minH:"320px",display:"flex",flexDirection:"column",justifyContent:"center",children:[t===0&&e.jsx(lr,{in:t===0,offsetY:"20px",children:e.jsxs(de,{spacing:6,textAlign:"center",py:4,children:[e.jsx(Ee,{bgGradient:f,bgClip:"text",size:"xl",children:"Welcome to MU Connect"}),e.jsx(m,{fontSize:"lg",color:P,children:"Let's set up your personalized academic experience."}),e.jsx(m,{color:"gray.500",children:"We'll ask you a few questions to customize your campus experience and show you resources relevant to your academic interests."}),e.jsx(G,{colorScheme:"blue",size:"lg",rightIcon:e.jsx(Tr,{}),onClick:l,bgGradient:f,_hover:{bgGradient:S},mt:4,children:"Get Started"})]})}),t===1&&e.jsx(lr,{in:t===1,offsetY:"20px",children:e.jsxs(de,{spacing:8,py:4,children:[e.jsx(Ee,{fontSize:"2xl",color:P,textAlign:"center",children:"What's your name?"}),e.jsxs(ct,{templateColumns:["1fr","1fr 1fr"],gap:6,width:"100%",children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{color:"gray.600",children:"First Name"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Rn,color:"blue.500"})}),e.jsx(We,{name:"first_name",placeholder:"John",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.first_name,onChange:Z,onKeyDown:b})]})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{color:"gray.600",children:"Last Name"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Rn,color:"blue.500"})}),e.jsx(We,{name:"last_name",placeholder:"Doe",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.last_name,onChange:Z,onKeyDown:b})]})]})]})]})}),t===2&&e.jsx(lr,{in:t===2,offsetY:"20px",children:e.jsxs(de,{spacing:8,py:4,children:[e.jsx(Ee,{fontSize:"2xl",color:P,textAlign:"center",children:"Create a username"}),e.jsxs(xe,{isRequired:!0,width:"100%",children:[e.jsx(be,{color:"gray.600",children:"Username"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Rn,color:"blue.500"})}),e.jsx(We,{name:"username",placeholder:"@johndoe",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.username,onChange:Z,onKeyDown:b,_placeholder:{color:"gray.400"}})]}),e.jsx(m,{fontSize:"sm",color:"gray.500",mt:2,children:"This will be your unique identifier on MU Connect"})]})]})}),t===3&&e.jsx(lr,{in:t===3,offsetY:"20px",children:e.jsxs(de,{spacing:8,py:4,children:[e.jsx(Ee,{fontSize:"2xl",color:P,textAlign:"center",children:"What's your email address?"}),e.jsxs(xe,{isRequired:!0,width:"100%",isInvalid:!!z.email,children:[e.jsx(be,{color:"gray.600",children:"Email"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Ko,color:"blue.500"})}),e.jsx(We,{type:"email",name:"email",placeholder:"id@mu.edu.lb",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.email,onChange:Z,onKeyDown:b,_placeholder:{color:"gray.400"}})]}),z.email&&e.jsx(m,{color:"red.500",fontSize:"sm",mt:1,children:z.email}),e.jsx(m,{fontSize:"sm",color:"gray.500",mt:2,children:"We'll use this to verify your account"})]})]})}),t===4&&e.jsx(lr,{in:t===4,offsetY:"20px",children:e.jsxs(de,{spacing:8,py:4,children:[e.jsx(Ee,{fontSize:"2xl",color:P,textAlign:"center",children:"Create a secure password"}),e.jsxs(ct,{templateColumns:["1fr","1fr 1fr"],gap:6,width:"100%",children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{color:"gray.600",children:"Password"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Bs,color:"blue.500"})}),e.jsx(We,{type:"password",name:"password",placeholder:"",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.password,onChange:Z,onKeyDown:b,_placeholder:{color:"gray.400"}})]})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{color:"gray.600",children:"Confirm Password"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Bs,color:"blue.500"})}),e.jsx(We,{type:"password",name:"password_confirmation",placeholder:"",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.password_confirmation,onChange:Z,onKeyDown:b,_placeholder:{color:"gray.400"}})]})]})]})]})}),t===5&&e.jsx(lr,{in:t===5,offsetY:"20px",children:e.jsxs(de,{spacing:8,py:4,children:[e.jsx(Ee,{fontSize:"2xl",color:P,textAlign:"center",children:"What faculty are you in?"}),e.jsxs(xe,{isRequired:!0,width:"100%",isInvalid:!!z.faculty_id,children:[e.jsx(be,{color:"gray.600",children:"Select your faculty"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:jr,color:"blue.500"})}),e.jsx(sr,{name:"faculty_id",placeholder:v?"Loading...":"Choose a faculty",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.faculty_id,onChange:re,pl:10,isDisabled:v,_placeholder:{color:"gray.400"},children:i.map(he=>e.jsx("option",{value:he.id,children:he.name},he.id))})]}),O&&e.jsx(m,{color:"red.500",fontSize:"sm",mt:1,children:O}),z.faculty_id&&e.jsx(m,{color:"red.500",fontSize:"sm",mt:1,children:z.faculty_id}),e.jsx(m,{fontSize:"sm",color:"gray.500",mt:2,children:"This helps us show you relevant resources"})]})]})}),t===6&&e.jsx(lr,{in:t===6,offsetY:"20px",children:e.jsxs(de,{spacing:8,py:4,children:[e.jsx(Ee,{fontSize:"2xl",color:P,textAlign:"center",children:"What's your major?"}),e.jsxs(xe,{isRequired:!0,width:"100%",isInvalid:!!z.major_id,children:[e.jsx(be,{color:"gray.600",children:"Select your major"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:rn,color:"blue.500"})}),e.jsx(sr,{name:"major_id",placeholder:u?"Loading...":n.faculty_id?"Choose a major":"Choose a faculty first",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.major_id,onChange:c,pl:10,isDisabled:!n.faculty_id||u,_placeholder:{color:"gray.400"},children:a.map(he=>e.jsx("option",{value:he.id,children:he.name},he.id))})]}),_&&e.jsx(m,{color:"red.500",fontSize:"sm",mt:1,children:_}),z.major_id&&e.jsx(m,{color:"red.500",fontSize:"sm",mt:1,children:z.major_id}),e.jsx(m,{fontSize:"sm",color:"gray.500",mt:2,children:"We'll personalize your experience based on your major"})]})]})}),t===7&&e.jsx(lr,{in:t===7,offsetY:"20px",children:e.jsxs(de,{spacing:8,py:6,textAlign:"center",children:[e.jsx(Tn,{size:"80px",bg:"green.100",color:"green.500",children:e.jsx(Fe,{as:wr,boxSize:"40px"})}),e.jsx(Ee,{fontSize:"2xl",color:P,children:"Ready to create your account"}),e.jsx(E,{borderWidth:"1px",borderColor:T,borderRadius:"lg",p:6,w:"full",bg:"white",boxShadow:"lg",children:e.jsxs(ct,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)"},gap:6,w:"100%",children:[e.jsxs(de,{spacing:1,align:"start",children:[e.jsx(m,{fontSize:"sm",color:"gray.500",children:"First Name"}),e.jsx(m,{fontWeight:"bold",fontSize:"lg",children:n.first_name})]}),e.jsxs(de,{spacing:1,align:"start",children:[e.jsx(m,{fontSize:"sm",color:"gray.500",children:"Last Name"}),e.jsx(m,{fontWeight:"bold",fontSize:"lg",children:n.last_name})]}),e.jsxs(de,{spacing:1,align:"start",children:[e.jsx(m,{fontSize:"sm",color:"gray.500",children:"Username"}),e.jsx(m,{fontWeight:"bold",fontSize:"lg",children:n.username})]}),e.jsxs(de,{spacing:1,align:"start",children:[e.jsx(m,{fontSize:"sm",color:"gray.500",children:"Email"}),e.jsx(m,{fontWeight:"bold",fontSize:"lg",children:n.email})]}),e.jsxs(de,{spacing:1,align:"start",children:[e.jsx(m,{fontSize:"sm",color:"gray.500",children:"Faculty"}),e.jsx(m,{fontWeight:"bold",fontSize:"lg",children:((X=i.find(he=>he.id===parseInt(n.faculty_id)))==null?void 0:X.name)||"N/A"})]}),e.jsxs(de,{spacing:1,align:"start",children:[e.jsx(m,{fontSize:"sm",color:"gray.500",children:"Major"}),e.jsx(m,{fontWeight:"bold",fontSize:"lg",children:((ie=a.find(he=>he.id===parseInt(n.major_id)))==null?void 0:ie.name)||"N/A"})]})]})}),e.jsxs(mt,{spacing:4,children:[e.jsx(G,{w:"full",colorScheme:"blue",bgGradient:f,_hover:{bgGradient:S},rightIcon:e.jsx(Tr,{}),onClick:se,isLoading:$,loadingText:"Personalizing your feed...",children:"Confirm & Create Account"}),e.jsx(G,{variant:"outline",colorScheme:"blue",size:"md",leftIcon:e.jsx(Vt,{}),onClick:F,children:"Go Back"})]})]})})]}),t>0&&t<7&&e.jsxs(N,{justify:"space-between",mt:6,children:[e.jsx(G,{leftIcon:e.jsx(Vt,{}),onClick:F,variant:"outline",colorScheme:"blue",color:"blue.600",children:"Back"}),e.jsx(G,{rightIcon:e.jsx(Tr,{}),onClick:l,colorScheme:"blue",bgGradient:f,_hover:{bgGradient:S},children:"Next"})]}),t!==7&&e.jsxs(E,{mt:8,textAlign:"center",children:[e.jsxs(N,{align:"center",gap:4,justify:"center",mb:2,children:[e.jsx(Et,{flex:"1",maxW:"100px"}),e.jsx(m,{color:"gray.500",fontSize:"sm",fontWeight:"medium",children:"OR"}),e.jsx(Et,{flex:"1",maxW:"100px"})]}),e.jsxs(m,{color:"gray.500",fontWeight:"medium",children:["Already part of MU Connect?"," ",e.jsx(Ms,{as:ir,to:"/login",color:"blue.500",fontWeight:"600",_hover:{textDecoration:"underline"},children:"Sign in here"})]})]})]})})})},Jd=()=>{var $,A,B;const t=R("white","gray.800"),r=R("gray.800","whiteAlpha.900"),n=R("gray.600","gray.400"),s=R("gray.200","gray.700"),i=R("blue.600","blue.400"),o=R("yellow.400","yellow.500"),[a,d]=h.useState(null),[v,g]=h.useState(!0),[u,y]=h.useState(null);h.useEffect(()=>{(async()=>{try{const j=await we.get("/overview");d(j.data)}catch(j){y(j.message||"Failed to fetch dashboard data."),console.error(j)}finally{g(!1)}})()},[]);const O=()=>{const p=new Date().getHours();return p<12?"Good morning":p<18?"Good afternoon":"Good evening"};if(v)return e.jsx(N,{justify:"center",align:"center",minH:"50vh",children:e.jsx(_t,{size:"xl"})});if(u)return e.jsxs(Bn,{status:"error",borderRadius:"md",children:[e.jsx(Un,{}),e.jsx(m,{children:"There was an error fetching your dashboard data. Please try again later."})]});if(!a)return null;const{user:M,overview:_,general:w}=a,z={events:{count:_.events.registered,label:"Registered Events",link:"/events",icon:Bt},clubs:{count:_.clubs.total,label:"Active Clubs",link:"/clubs",icon:qs},resources:{count:w.latest_resources.length,label:"Latest Resources",link:"/resources",icon:jr},studyGroups:{count:_.study_groups.total,label:"Study Groups",link:"/study-groups",icon:Ft}},L=[{title:"Resources",description:"Access study materials, guides, and educational resources.",icon:jr,link:"/resources",stat:`${_.resources.saved} saved`,preview:w.latest_resources.length>0?`Latest: ${(($=w.latest_resources[0])==null?void 0:$.title)||"Untitled"}`:"No new resources"},{title:"Events",description:"See upcoming campus events and register.",icon:Bt,link:"/events",stat:`${_.events.upcoming} upcoming`,preview:w.upcoming_events.length>0?`Next: ${((A=w.upcoming_events[0])==null?void 0:A.title)||"Untitled"}`:"No upcoming events"},{title:"Clubs",description:"Discover, join, and interact with campus clubs.",icon:qs,link:"/clubs",stat:`${_.clubs.total} active clubs`,preview:"Check out the latest club activities and news."},{title:"Study Groups",description:"Collaborate with peers and excel in your courses.",icon:Ft,link:"/study-groups",stat:`${_.study_groups.leading} led by you`,preview:"Find or create a study group for your classes."}];return e.jsxs(E,{children:[e.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(et,{mb:6,p:6,borderRadius:"xl",borderWidth:"1px",borderColor:s,bg:t,boxShadow:"md",children:e.jsx(N,{direction:{base:"column",md:"row"},alignItems:"center",justifyContent:"space-between",children:e.jsxs(Te,{spacing:4,mb:{base:4,md:0},children:[e.jsx(gt,{size:"lg",src:M.avatar,name:`${M.first_name||""} ${M.last_name||""}`.trim()||"User"}),e.jsxs(de,{align:"start",spacing:1,children:[e.jsxs(Ee,{size:"md",color:r,children:[O(),", ",M.first_name,"!"]}),e.jsx(m,{fontSize:"sm",color:n,children:((B=M.major)==null?void 0:B.name)||"Major not specified"})]})]})})})}),e.jsxs(E,{mb:6,children:[e.jsx(Ee,{size:"md",mb:4,color:i,children:"My Overview"}),e.jsx(Ht,{columns:{base:2,md:4},spacing:4,children:Object.values(z).map(p=>e.jsx(ot.div,{whileHover:{y:-3,scale:1.03},transition:{duration:.15},children:e.jsx(et,{bg:t,borderRadius:"lg",borderWidth:"1px",borderColor:s,p:4,variant:"outline",as:ir,to:p.link,_hover:{textDecoration:"none",shadow:"md",bg:`${o}10`},children:e.jsx(Ar,{label:p.label,placement:"top",hasArrow:!0,children:e.jsxs(Te,{spacing:3,align:"center",children:[e.jsx(Fe,{as:p.icon,boxSize:6,color:o}),e.jsxs(de,{align:"start",spacing:0,children:[e.jsx(m,{fontSize:"xl",fontWeight:"bold",color:r,children:p.count}),e.jsx(m,{fontSize:"xs",color:n,whiteSpace:"nowrap",children:p.label})]})]})})})},p.label))})]}),e.jsxs(E,{mb:6,children:[e.jsx(Ee,{size:"md",mb:4,color:i,children:"Explore Sections"}),e.jsx(Ht,{columns:{base:1,md:2},spacing:6,children:L.map(p=>e.jsx(ir,{to:p.link,style:{textDecoration:"none"},children:e.jsx(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:{scale:1.02,y:-4},children:e.jsx(et,{bg:t,borderColor:s,borderWidth:"1px",borderRadius:"xl",boxShadow:"sm",p:6,_hover:{bg:`${o}10`},transition:"all 0.2s ease",h:"100%",children:e.jsxs(N,{direction:"column",h:"100%",children:[e.jsxs(N,{align:"center",mb:3,gap:3,children:[e.jsx(E,{fontSize:"2xl",as:p.icon,color:o}),e.jsx(Ee,{size:"md",color:i,children:p.title})]}),e.jsx(m,{color:n,mb:4,flexGrow:1,children:p.description}),e.jsx(m,{fontWeight:"bold",color:o,mb:2,children:p.stat}),e.jsxs(Te,{mt:"auto",pt:3,borderTopWidth:"1px",borderColor:s,spacing:2,children:[e.jsx(m,{fontSize:"xs",color:n,noOfLines:1,children:p.preview}),e.jsx(Fe,{as:Tr,boxSize:4,color:n,ml:"auto"})]})]})})})},p.title))})]})]})},ta="/assets/mu-connect-BLtXghlQ.png",$s=es,Xd=async()=>{try{return(await it.get(`${$s}/my-profile`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}})).data}catch(t){throw console.error("Error fetching user profile:",t),t}},Kd=async(t,r)=>{try{const n=r.avatarFile instanceof File;let s;if(n){const i=new FormData;i.append("avatar",r.avatarFile),i.append("_method","PUT"),Object.keys(r).forEach(o=>{o!=="avatarFile"&&o!=="avatar"&&r[o]!==void 0&&i.append(o,r[o])}),s=await it.post(`${$s}/user/${t}`,i,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"multipart/form-data"}})}else s=await it.put(`${$s}/user/${t}`,r,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});return s.data}catch(n){throw console.error("Error updating user profile:",n),n}},Qd=async(t="")=>{try{const r=t?`/users?search=${encodeURIComponent(t)}`:"/users";return(await we.get(r)).data}catch(r){throw console.error("Error fetching users:",r),r}},Zd=async t=>{try{return(await we.patch(`/users/${t}/toggle-active`,{})).data}catch(r){throw console.error("Error toggling user active status:",r),r}},eu=async(t="me")=>{try{return(await we.get(`/users/${t}`)).data}catch(r){throw console.error("Error fetching visitor profile:",r),r}},tu=async(t,r)=>{try{return(await we.put(`/users/${t}/roles`,{role:r})).data}catch(n){throw console.error("Error updating user role:",n),n}},ra=6048e5,ru=864e5,Oi=Symbol.for("constructDateFrom");function hr(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&Oi in t?t[Oi](r):t instanceof Date?new t.constructor(r):new Date(r)}function Kt(t,r){return hr(r||t,t)}let nu={};function os(){return nu}function on(t,r){var d,v,g,u,y,O,M,_;const n=os(),s=(_=(M=(u=(g=r==null?void 0:r.weekStartsOn)!=null?g:(v=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:v.weekStartsOn)!=null?u:n.weekStartsOn)!=null?M:(O=(y=n.locale)==null?void 0:y.options)==null?void 0:O.weekStartsOn)!=null?_:0,i=Kt(t,r==null?void 0:r.in),o=i.getDay(),a=(o<s?7:0)+o-s;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function In(t,r){return on(t,{...r,weekStartsOn:1})}function na(t,r){const n=Kt(t,r==null?void 0:r.in),s=n.getFullYear(),i=hr(n,0);i.setFullYear(s+1,0,4),i.setHours(0,0,0,0);const o=In(i),a=hr(n,0);a.setFullYear(s,0,4),a.setHours(0,0,0,0);const d=In(a);return n.getTime()>=o.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function Ri(t){const r=Kt(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function su(t,...r){const n=hr.bind(null,r.find(s=>typeof s=="object"));return r.map(n)}function zi(t,r){const n=Kt(t,r==null?void 0:r.in);return n.setHours(0,0,0,0),n}function iu(t,r,n){const[s,i]=su(n==null?void 0:n.in,t,r),o=zi(s),a=zi(i),d=+o-Ri(o),v=+a-Ri(a);return Math.round((d-v)/ru)}function ou(t,r){const n=na(t,r),s=hr(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),In(s)}function au(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function lu(t){return!(!au(t)&&typeof t!="number"||isNaN(+Kt(t)))}function cu(t,r){const n=Kt(t,r==null?void 0:r.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const du={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uu=(t,r,n)=>{let s;const i=du[t];return typeof i=="string"?s=i:r===1?s=i.one:s=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function bs(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const hu={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fu={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pu={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mu={date:bs({formats:hu,defaultWidth:"full"}),time:bs({formats:fu,defaultWidth:"full"}),dateTime:bs({formats:pu,defaultWidth:"full"})},gu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xu=(t,r,n,s)=>gu[t];function Gr(t){return(r,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,d=n!=null&&n.width?String(n.width):a;i=t.formattingValues[d]||t.formattingValues[a]}else{const a=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[d]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(r):r;return i[o]}}const bu={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yu={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ju={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vu={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Su={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Cu=(t,r)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_u={ordinalNumber:Cu,era:Gr({values:bu,defaultWidth:"wide"}),quarter:Gr({values:yu,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Gr({values:ju,defaultWidth:"wide"}),day:Gr({values:vu,defaultWidth:"wide"}),dayPeriod:Gr({values:wu,defaultWidth:"wide",formattingValues:Su,defaultFormattingWidth:"wide"})};function Yr(t){return(r,n={})=>{const s=n.width,i=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],o=r.match(i);if(!o)return null;const a=o[0],d=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],v=Array.isArray(d)?Ou(d,y=>y.test(a)):ku(d,y=>y.test(a));let g;g=t.valueCallback?t.valueCallback(v):v,g=n.valueCallback?n.valueCallback(g):g;const u=r.slice(a.length);return{value:g,rest:u}}}function ku(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function Ou(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function Ru(t){return(r,n={})=>{const s=r.match(t.matchPattern);if(!s)return null;const i=s[0],o=r.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const d=r.slice(i.length);return{value:a,rest:d}}}const zu=/^(\d+)(th|st|nd|rd)?/i,Eu=/\d+/i,Tu={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Pu={any:[/^b/i,/^(a|c)/i]},Au={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Mu={any:[/1/i,/2/i,/3/i,/4/i]},Du={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Lu={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Fu={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Wu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Iu={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Nu={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qu={ordinalNumber:Ru({matchPattern:zu,parsePattern:Eu,valueCallback:t=>parseInt(t,10)}),era:Yr({matchPatterns:Tu,defaultMatchWidth:"wide",parsePatterns:Pu,defaultParseWidth:"any"}),quarter:Yr({matchPatterns:Au,defaultMatchWidth:"wide",parsePatterns:Mu,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Yr({matchPatterns:Du,defaultMatchWidth:"wide",parsePatterns:Lu,defaultParseWidth:"any"}),day:Yr({matchPatterns:Fu,defaultMatchWidth:"wide",parsePatterns:Wu,defaultParseWidth:"any"}),dayPeriod:Yr({matchPatterns:Iu,defaultMatchWidth:"any",parsePatterns:Nu,defaultParseWidth:"any"})},Bu={code:"en-US",formatDistance:uu,formatLong:mu,formatRelative:xu,localize:_u,match:qu,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Uu(t,r){const n=Kt(t,r==null?void 0:r.in);return iu(n,cu(n))+1}function $u(t,r){const n=Kt(t,r==null?void 0:r.in),s=+In(n)-+ou(n);return Math.round(s/ra)+1}function sa(t,r){var u,y,O,M,_,w,z,L;const n=Kt(t,r==null?void 0:r.in),s=n.getFullYear(),i=os(),o=(L=(z=(M=(O=r==null?void 0:r.firstWeekContainsDate)!=null?O:(y=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:y.firstWeekContainsDate)!=null?M:i.firstWeekContainsDate)!=null?z:(w=(_=i.locale)==null?void 0:_.options)==null?void 0:w.firstWeekContainsDate)!=null?L:1,a=hr((r==null?void 0:r.in)||t,0);a.setFullYear(s+1,0,o),a.setHours(0,0,0,0);const d=on(a,r),v=hr((r==null?void 0:r.in)||t,0);v.setFullYear(s,0,o),v.setHours(0,0,0,0);const g=on(v,r);return+n>=+d?s+1:+n>=+g?s:s-1}function Hu(t,r){var d,v,g,u,y,O,M,_;const n=os(),s=(_=(M=(u=(g=r==null?void 0:r.firstWeekContainsDate)!=null?g:(v=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:v.firstWeekContainsDate)!=null?u:n.firstWeekContainsDate)!=null?M:(O=(y=n.locale)==null?void 0:y.options)==null?void 0:O.firstWeekContainsDate)!=null?_:1,i=sa(t,r),o=hr((r==null?void 0:r.in)||t,0);return o.setFullYear(i,0,s),o.setHours(0,0,0,0),on(o,r)}function Gu(t,r){const n=Kt(t,r==null?void 0:r.in),s=+on(n,r)-+Hu(n,r);return Math.round(s/ra)+1}function nt(t,r){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(r,"0");return n+s}const cr={y(t,r){const n=t.getFullYear(),s=n>0?n:1-n;return nt(r==="yy"?s%100:s,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):nt(n+1,2)},d(t,r){return nt(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return nt(t.getHours()%12||12,r.length)},H(t,r){return nt(t.getHours(),r.length)},m(t,r){return nt(t.getMinutes(),r.length)},s(t,r){return nt(t.getSeconds(),r.length)},S(t,r){const n=r.length,s=t.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return nt(i,r.length)}},Or={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ei={G:function(t,r,n){const s=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const s=t.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return cr.y(t,r)},Y:function(t,r,n,s){const i=sa(t,s),o=i>0?i:1-i;if(r==="YY"){const a=o%100;return nt(a,2)}return r==="Yo"?n.ordinalNumber(o,{unit:"year"}):nt(o,r.length)},R:function(t,r){const n=na(t);return nt(n,r.length)},u:function(t,r){const n=t.getFullYear();return nt(n,r.length)},Q:function(t,r,n){const s=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return nt(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,r,n){const s=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return nt(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,r,n){const s=t.getMonth();switch(r){case"M":case"MM":return cr.M(t,r);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,r,n){const s=t.getMonth();switch(r){case"L":return String(s+1);case"LL":return nt(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,r,n,s){const i=Gu(t,s);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):nt(i,r.length)},I:function(t,r,n){const s=$u(t);return r==="Io"?n.ordinalNumber(s,{unit:"week"}):nt(s,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):cr.d(t,r)},D:function(t,r,n){const s=Uu(t);return r==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):nt(s,r.length)},E:function(t,r,n){const s=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,r,n,s){const i=t.getDay(),o=(i-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return nt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,s){const i=t.getDay(),o=(i-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return nt(o,r.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){const s=t.getDay(),i=s===0?7:s;switch(r){case"i":return String(i);case"ii":return nt(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,r,n){const i=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){const s=t.getHours();let i;switch(s===12?i=Or.noon:s===0?i=Or.midnight:i=s/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){const s=t.getHours();let i;switch(s>=17?i=Or.evening:s>=12?i=Or.afternoon:s>=4?i=Or.morning:i=Or.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return cr.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):cr.H(t,r)},K:function(t,r,n){const s=t.getHours()%12;return r==="Ko"?n.ordinalNumber(s,{unit:"hour"}):nt(s,r.length)},k:function(t,r,n){let s=t.getHours();return s===0&&(s=24),r==="ko"?n.ordinalNumber(s,{unit:"hour"}):nt(s,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):cr.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):cr.s(t,r)},S:function(t,r){return cr.S(t,r)},X:function(t,r,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(r){case"X":return Pi(s);case"XXXX":case"XX":return mr(s);case"XXXXX":case"XXX":default:return mr(s,":")}},x:function(t,r,n){const s=t.getTimezoneOffset();switch(r){case"x":return Pi(s);case"xxxx":case"xx":return mr(s);case"xxxxx":case"xxx":default:return mr(s,":")}},O:function(t,r,n){const s=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Ti(s,":");case"OOOO":default:return"GMT"+mr(s,":")}},z:function(t,r,n){const s=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Ti(s,":");case"zzzz":default:return"GMT"+mr(s,":")}},t:function(t,r,n){const s=Math.trunc(+t/1e3);return nt(s,r.length)},T:function(t,r,n){return nt(+t,r.length)}};function Ti(t,r=""){const n=t>0?"-":"+",s=Math.abs(t),i=Math.trunc(s/60),o=s%60;return o===0?n+String(i):n+String(i)+r+nt(o,2)}function Pi(t,r){return t%60===0?(t>0?"-":"+")+nt(Math.abs(t)/60,2):mr(t,r)}function mr(t,r=""){const n=t>0?"-":"+",s=Math.abs(t),i=nt(Math.trunc(s/60),2),o=nt(s%60,2);return n+i+r+o}const Ai=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},ia=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},Yu=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return Ai(t,r);let o;switch(s){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",Ai(s,r)).replace("{{time}}",ia(i,r))},Vu={p:ia,P:Yu},Ju=/^D+$/,Xu=/^Y+$/,Ku=["D","DD","YY","YYYY"];function Qu(t){return Ju.test(t)}function Zu(t){return Xu.test(t)}function eh(t,r,n){const s=th(t,r,n);if(console.warn(s),Ku.includes(t))throw new RangeError(s)}function th(t,r,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const rh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sh=/^'([^]*?)'?$/,ih=/''/g,oh=/[a-zA-Z]/;function Mi(t,r,n){var u,y,O,M,_,w,z,L,$;const s=os(),i=(u=s.locale)!=null?u:Bu,o=(_=(M=s.firstWeekContainsDate)!=null?M:(O=(y=s.locale)==null?void 0:y.options)==null?void 0:O.firstWeekContainsDate)!=null?_:1,a=($=(L=s.weekStartsOn)!=null?L:(z=(w=s.locale)==null?void 0:w.options)==null?void 0:z.weekStartsOn)!=null?$:0,d=Kt(t,n==null?void 0:n.in);if(!lu(d))throw new RangeError("Invalid time value");let v=r.match(nh).map(A=>{const B=A[0];if(B==="p"||B==="P"){const p=Vu[B];return p(A,i.formatLong)}return A}).join("").match(rh).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const B=A[0];if(B==="'")return{isToken:!1,value:ah(A)};if(Ei[B])return{isToken:!0,value:A};if(B.match(oh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return{isToken:!1,value:A}});i.localize.preprocessor&&(v=i.localize.preprocessor(d,v));const g={firstWeekContainsDate:o,weekStartsOn:a,locale:i};return v.map(A=>{if(!A.isToken)return A.value;const B=A.value;(Zu(B)||Qu(B))&&eh(B,r,String(t));const p=Ei[B[0]];return p(d,B,i.localize,g)}).join("")}function ah(t){const r=t.match(sh);return r?r[1].replace(ih,"'"):t}ol.register(al,ll,cl,dl,ul,hl,fl);const lh=()=>{var pe,ve,ge,ye,tt,$e,Se,Be,Ue,rt,Mt,q,ce,Ie,Ce,Re,Ne,Je,oe,Me,He,je;const t=Lt(),r=St(),[n,s]=h.useState(!1),[i,o]=h.useState(!0),[a,d]=h.useState(null),[v,g]=h.useState(null),[u,y]=h.useState(null),[O,M]=h.useState(!1),[_,w]=h.useState(""),[z,L]=h.useState([]),[$,A]=h.useState(!1),[B,p]=h.useState(""),j=localStorage.getItem("role"),[k,I]=h.useState("overview"),{isOpen:x,onOpen:f,onClose:S}=pt(),[P,T]=h.useState(null),[D,Z]=h.useState(""),[re,c]=h.useState(!1);h.useEffect(()=>{ae()},[r]);const fe=R("white","gray.700"),C=R("gray.800","white"),l=R("gray.500","gray.400"),b=W=>{const{name:Xe,value:ht}=W.target;d(Ct=>({...Ct,[Xe]:ht})),c(!0)},F=W=>{const Xe=W.target.files[0];if(Xe){const ht=new FileReader;ht.onloadend=()=>{d(Ct=>({...Ct,avatar:ht.result,avatarFile:Xe})),c(!0)},ht.readAsDataURL(Xe)}},se=async()=>{try{const W={username:a.username,first_name:a.first_name,last_name:a.last_name,email:a.email,bio:a.bio};_&&(W.password=_),a.avatarFile&&(W.avatarFile=a.avatarFile),await Kd(a.id,W),await ae(),r({title:"Profile updated",description:"Your profile has been updated successfully.",status:"success",duration:5e3,isClosable:!0}),w(""),s(!1),c(!1)}catch(W){nr("handleSave",W),r(dr(W,"There was an error updating your profile"))}},V=()=>{n&&!window.confirm("Are you sure you want to leave? Your changes will be lost.")||(n?(s(!1),w(""),ae()):t(-1))},ae=async()=>{try{o(!0);const W=await Xd();d(W.user),y(W.analytics),o(!1)}catch(W){nr("fetchProfileData",W),r(dr(W,"There was an error loading your profile data")),o(!1)}},X=async(W="")=>{var Xe;try{A(!0);const ht=await Qd(W),Ct=ht.data?ht.data:((Xe=ht.data)==null?void 0:Xe.data)||ht.users||ht;L(Ct),A(!1)}catch(ht){nr("fetchUsers",ht),r(dr(ht,"There was an error loading the users list")),A(!1)}},ie=()=>{p(""),X("")},he=async W=>{try{const Xe=await Zd(W);L(ht=>ht.map(Ct=>Ct.id===W?{...Ct,is_active:Xe.is_active}:Ct)),r({title:"Updated",description:`User is now ${Xe.is_active?"active":"inactive"}.`,status:"success",duration:4e3,isClosable:!0})}catch{r({title:"Error",description:"Failed to update user status.",status:"error",duration:4e3,isClosable:!0})}},le=W=>{T(W),Z(W.primary_role),f()},ue=async()=>{if(!(!P||!D))try{await tu(P.id,D),L(W=>W.map(Xe=>Xe.id===P.id?{...Xe,primary_role:D}:Xe)),r({title:"Role Updated",description:`${P.username}'s role has been updated to ${D}.`,status:"success",duration:4e3,isClosable:!0}),S()}catch{r({title:"Error",description:"Failed to update user role.",status:"error",duration:4e3,isClosable:!0})}},Pe=W=>W?W.avatar&&W.avatar.startsWith("data:")?W.avatar:W.avatar_url||null:null,Ae=W=>W?`${W.first_name||""} ${W.last_name||""}`.trim():"",De=[{key:"resources_shared",label:"Resources Shared",icon:br,value:((pe=u==null?void 0:u.resources)==null?void 0:pe.shared)||0},{key:"study_groups_total",label:"Study Groups",icon:Ft,value:((ve=u==null?void 0:u.study_groups)==null?void 0:ve.total)||0},{key:"events_registered",label:"Events Registered",icon:Bt,value:((ge=u==null?void 0:u.events)==null?void 0:ge.registered)||0},{key:"applications_total",label:"Applications",icon:Jo,value:((ye=u==null?void 0:u.applications)==null?void 0:ye.total)||0}],Oe={labels:["Comments Made","Upvotes Given","Upvotes Received"],datasets:[{label:"Contributions",data:[(u==null?void 0:u.contributions.comments_made)||0,(u==null?void 0:u.contributions.upvotes_given)||0,(u==null?void 0:u.contributions.upvotes_received)||0],backgroundColor:["#3498db","#2ecc71","#e74c3c"],borderWidth:1}]},qe={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(W){return`${W.label}: ${W.raw}`}}}}},Ge={labels:(($e=(tt=u==null?void 0:u.charts)==null?void 0:tt.top_posting_users)==null?void 0:$e.map(W=>W.username))||[],datasets:[{label:"Resources Shared",data:((Be=(Se=u==null?void 0:u.charts)==null?void 0:Se.top_posting_users)==null?void 0:Be.map(W=>W.resources_count))||[],backgroundColor:"#3498db",borderColor:"#2980b9",borderWidth:1}]},Q={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Resources Shared"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Posting Users",font:{size:18}}}},ee={labels:((rt=(Ue=u==null?void 0:u.charts)==null?void 0:Ue.top_commenting_users)==null?void 0:rt.map(W=>W.username))||[],datasets:[{label:"Comments Made",data:((q=(Mt=u==null?void 0:u.charts)==null?void 0:Mt.top_commenting_users)==null?void 0:q.map(W=>W.comments_count))||[],backgroundColor:"#2ecc71",borderColor:"#27ae60",borderWidth:1}]},ze={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Comments Made"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Commenting Users",font:{size:18}}}},Le={labels:((Ie=(ce=u==null?void 0:u.charts)==null?void 0:ce.top_upvoting_users)==null?void 0:Ie.map(W=>W.username))||[],datasets:[{label:"Upvotes Given",data:((Re=(Ce=u==null?void 0:u.charts)==null?void 0:Ce.top_upvoting_users)==null?void 0:Re.map(W=>W.upvotes_given))||[],backgroundColor:"#e74c3c",borderColor:"#c0392b",borderWidth:1}]},Ve={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Upvotes Given"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Upvoting Users",font:{size:18}}}},Ze={labels:((Je=(Ne=u==null?void 0:u.charts)==null?void 0:Ne.top_courses)==null?void 0:Je.map(W=>W.code))||[],datasets:[{label:"Resources Posted",data:((Me=(oe=u==null?void 0:u.charts)==null?void 0:oe.top_courses)==null?void 0:Me.map(W=>W.resources_count))||[],backgroundColor:"#f39c12",borderColor:"#d35400",borderWidth:1}]},st={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Resources Posted"}},y:{title:{display:!0,text:"Course"}}},plugins:{title:{display:!0,text:"Top Courses",font:{size:18}}}},me=(W=[],Xe,ht)=>{var mn;if(!a)return"";const Ct=((mn=W[0])==null?void 0:mn[Xe])||0,fr=W.find(_a=>_a.username===a.username),bt=fr?fr[Xe]:0,Ur=Ct-bt;return Ur>0?`You're ${Ur} ${ht} away from the top spot!`:bt===Ct&&Ct!==0?`You're the top ${ht.toLowerCase()}!`:""},Y=u!=null&&u.charts?me(u==null?void 0:u.charts.top_posting_users,"resources_count","resources"):"",U=u!=null&&u.charts?me(u==null?void 0:u.charts.top_commenting_users,"comments_count","comments"):"",J=u!=null&&u.charts?me(u==null?void 0:u.charts.top_upvoting_users,"upvotes_given","upvotes"):"",K=(W=>{const Xe=[];return W>=5&&Xe.push({name:"Helpful",color:"bg-green-100 text-green-800"}),W>=10&&Xe.push({name:"Insightful",color:"bg-blue-100 text-blue-800"}),W>=20&&Xe.push({name:"Expert",color:"bg-purple-100 text-purple-800"}),Xe})((u==null?void 0:u.contributions.upvotes_received)||0),te=W=>{I(W),W==="users"&&(X(B),X())};return i?e.jsx(N,{height:"100vh",width:"100%",align:"center",justify:"center",children:e.jsx(_t,{size:"xl"})}):e.jsx(N,{minH:"100vh",p:4,bg:R("gray.50","gray.800"),justify:"center",children:e.jsx(E,{w:{base:"full",md:"90%",lg:"80%"},children:e.jsxs(et,{bg:fe,p:0,overflow:"hidden",children:[e.jsxs(E,{position:"relative",h:"180px",mb:"60px",children:[e.jsx(vt,{src:ta,alt:"Cover Photo",objectFit:"cover",w:"full",h:"full"}),e.jsx(N,{position:"absolute",top:4,left:{base:2,md:4},right:{base:2,md:4},justify:"flex-start",zIndex:1,children:e.jsx(Ke,{icon:e.jsx(Vt,{}),"aria-label":"Go back",onClick:V,bg:R("white","gray.800"),color:C,_hover:{bg:R("gray.100","gray.700")},boxShadow:"md",title:"Go back",size:{base:"sm",md:"md"}})}),n?e.jsx(E,{position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},cursor:"pointer",children:e.jsxs("label",{htmlFor:"avatar-upload",style:{cursor:"pointer"},children:[e.jsx(gt,{size:"xl",src:Pe(a),name:Ae(a),boxShadow:"lg",border:"4px solid",borderColor:R("white","gray.800"),_hover:{opacity:.8,boxShadow:"xl"}}),e.jsx(E,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"rgba(0,0,0,0.3)",color:"white",borderRadius:"full",p:2,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(ti,{})}),e.jsx("input",{type:"file",id:"avatar-upload",name:"avatar",accept:"image/jpeg,image/png,image/gif",style:{display:"none"},onChange:F})]})}):e.jsx(gt,{size:"xl",src:Pe(a),name:Ae(a),position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},boxShadow:"lg",border:"4px solid",borderColor:R("white","gray.800")})]}),e.jsx(E,{px:{base:4,md:6},children:e.jsxs(N,{justify:{base:"center",md:"flex-start"},align:"center",mb:6,mt:{base:5,md:0},flexWrap:"wrap",gap:2,children:[e.jsx(Ee,{size:{base:"md",sm:"lg",md:"xl"},color:C,textAlign:{base:"center",md:"left"},children:!n&&Ae(a)}),e.jsx(dt,{ml:{base:0,sm:3},fontSize:{base:"0.7em",md:"0.8em"},colorScheme:(a==null?void 0:a.primary_role)==="moderator"?"purple":(a==null?void 0:a.primary_role)==="admin"?"red":"blue",textTransform:"capitalize",children:(a==null?void 0:a.primary_role)||"Student"})]})}),e.jsxs(E,{mx:{base:2,md:6},mt:{base:0,md:6},children:[e.jsxs(Te,{spacing:0,mb:8,borderBottom:"1px solid",borderColor:"gray.200",justify:{base:"flex-start",md:"center"},overflowX:"auto",overflowY:"hidden",css:{"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:R("gray.300","gray.600"),borderRadius:"2px"}},children:[e.jsx(G,{variant:k==="overview"?"solid":"ghost",borderRadius:0,borderBottom:k==="overview"?"2px solid":"none",borderColor:"blue.500",color:k==="overview"?"blue.500":"gray.500",onClick:()=>te("overview"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Overview"}),e.jsx(G,{variant:k==="activity"?"solid":"ghost",borderRadius:0,borderBottom:k==="activity"?"2px solid":"none",borderColor:"blue.500",color:k==="activity"?"blue.500":"gray.500",onClick:()=>te("activity"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Activity"}),j==="admin"&&e.jsx(G,{variant:k==="analytics"?"solid":"ghost",borderRadius:0,borderBottom:k==="analytics"?"2px solid":"none",borderColor:"blue.500",color:k==="analytics"?"blue.500":"gray.500",onClick:()=>te("analytics"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Analytics"}),j==="admin"&&e.jsx(G,{variant:k==="users"?"solid":"ghost",borderRadius:0,borderBottom:k==="users"?"2px solid":"none",borderColor:"blue.500",color:k==="users"?"blue.500":"gray.500",onClick:()=>te("users"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Users"})]}),k==="overview"&&e.jsxs(de,{spacing:8,align:"stretch",children:[e.jsxs(et,{p:6,shadow:"md",bg:fe,children:[e.jsxs(N,{justify:"space-between",align:"center",mb:4,flexWrap:"wrap",gap:2,children:[e.jsx(Ee,{size:"md",color:C,children:"Personal Information"}),e.jsx(N,{gap:2,children:n?e.jsxs(e.Fragment,{children:[e.jsx(G,{leftIcon:e.jsx(jd,{}),colorScheme:"green",onClick:se,size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},isDisabled:!re&&!_,children:"Save"}),e.jsx(G,{colorScheme:"red",leftIcon:e.jsx(sn,{}),onClick:()=>{v&&d(v),s(!1),w(""),c(!1)},size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Cancel"})]}):e.jsx(G,{leftIcon:e.jsx(Mr,{}),colorScheme:"blue",onClick:()=>{g(a),s(!0),c(!1)},size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Edit Profile"})})]}),n?e.jsxs(mt,{spacing:4,children:[e.jsxs(xe,{children:[e.jsx(be,{children:"First Name"}),e.jsx(We,{name:"first_name",value:(a==null?void 0:a.first_name)||"",onChange:b})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Last Name"}),e.jsx(We,{name:"last_name",value:(a==null?void 0:a.last_name)||"",onChange:b})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Email"}),e.jsx(We,{name:"email",value:(a==null?void 0:a.email)||"",onChange:b})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Username"}),e.jsx(We,{name:"username",value:(a==null?void 0:a.username)||"",onChange:b})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Bio"}),e.jsx(Yt,{name:"bio",value:(a==null?void 0:a.bio)||"",onChange:b,rows:3})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Password (leave blank to keep current)"}),e.jsxs(jt,{children:[e.jsx(We,{type:O?"text":"password",value:_,onChange:W=>{w(W.target.value),W.target.value&&c(!0)},placeholder:"Enter new password"}),e.jsx(Pn,{children:e.jsx(Ke,{h:"1.75rem",size:"sm",onClick:()=>M(!O),icon:O?e.jsx(fd,{}):e.jsx(pd,{}),"aria-label":O?"Hide password":"Show password"})})]})]})]}):e.jsxs(ct,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(E,{children:[e.jsx(m,{fontWeight:"bold",color:l,children:"First Name"}),e.jsx(m,{color:C,children:(a==null?void 0:a.first_name)||"-"})]}),e.jsxs(E,{children:[e.jsx(m,{fontWeight:"bold",color:l,children:"Last Name"}),e.jsx(m,{color:C,children:(a==null?void 0:a.last_name)||"-"})]}),e.jsxs(E,{children:[e.jsx(m,{fontWeight:"bold",color:l,children:"Email"}),e.jsx(m,{color:C,children:(a==null?void 0:a.email)||"-"})]}),e.jsxs(E,{children:[e.jsx(m,{fontWeight:"bold",color:l,children:"Username"}),e.jsx(m,{color:C,children:(a==null?void 0:a.username)||"-"})]}),e.jsxs(E,{gridColumn:{md:"span 2"},children:[e.jsx(m,{fontWeight:"bold",color:l,children:"Bio"}),e.jsx(m,{color:C,children:(a==null?void 0:a.bio)||"No bio provided."})]})]})]}),e.jsxs(et,{p:6,shadow:"md",bg:fe,children:[e.jsx(Ee,{size:"md",mb:4,color:C,children:"Academic Information"}),e.jsxs(ct,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(E,{children:[e.jsx(m,{fontWeight:"bold",color:l,children:"Faculty"}),e.jsx(m,{color:C,children:((He=a==null?void 0:a.faculty)==null?void 0:He.name)||"Not specified"})]}),e.jsxs(E,{children:[e.jsx(m,{fontWeight:"bold",color:l,children:"Major"}),e.jsx(m,{color:C,children:((je=a==null?void 0:a.major)==null?void 0:je.name)||"Not specified"})]})]})]}),e.jsx(Ht,{columns:{base:1,sm:2,lg:4},spacing:4,children:De.map(W=>e.jsx(et,{p:4,shadow:"sm",bg:fe,borderLeft:"4px solid",borderColor:"blue.500",children:e.jsxs(N,{align:"center",children:[e.jsx(Fe,{as:W.icon,boxSize:6,color:"blue.500",mr:3}),e.jsxs(E,{children:[e.jsx(m,{fontSize:"sm",color:l,children:W.label}),e.jsx(m,{fontSize:"2xl",fontWeight:"bold",color:C,children:W.value})]})]})},W.key))}),e.jsxs(et,{p:6,shadow:"md",bg:fe,children:[e.jsx(Ee,{size:"md",mb:4,color:C,children:"Contribution Mix"}),e.jsx(E,{h:"300px",w:"100%",maxW:"500px",mx:"auto",children:e.jsx(pl,{data:Oe,options:qe})})]}),K.length>0&&e.jsxs(et,{p:6,shadow:"md",bg:fe,children:[e.jsx(Ee,{size:"md",mb:4,color:C,children:"Achievements"}),e.jsx(N,{flexWrap:"wrap",gap:2,children:K.map((W,Xe)=>e.jsx(dt,{px:3,py:1,borderRadius:"full",fontSize:"sm",fontWeight:"medium",colorScheme:W.color.split("-")[1],children:W.name},Xe))})]}),e.jsxs(et,{p:6,shadow:"md",bgGradient:R("linear(to-r, blue.50, indigo.50)","linear(to-r, blue.900, indigo.900)"),children:[e.jsx(Ee,{size:"md",mb:4,color:C,children:"Community Standing"}),e.jsxs(de,{align:"start",spacing:2,children:[Y&&e.jsx(m,{color:R("blue.700","blue.200"),fontWeight:"medium",children:Y}),U&&e.jsx(m,{color:R("blue.700","blue.200"),fontWeight:"medium",children:U}),J&&e.jsx(m,{color:R("blue.700","blue.200"),fontWeight:"medium",children:J})]})]})]}),k==="users"&&j==="admin"&&e.jsx(de,{spacing:8,align:"stretch",children:e.jsxs(et,{p:6,shadow:"md",bg:fe,children:[e.jsx(Ee,{size:"md",mb:4,color:C,children:"User Management"}),e.jsxs(jt,{mb:4,maxW:{base:"100%",md:"400px"},size:{base:"sm",md:"md"},children:[e.jsx(We,{placeholder:"Search users...",value:B,onChange:W=>p(W.target.value),bg:R("white","gray.700"),fontSize:{base:"xs",md:"sm"}}),e.jsxs(Pn,{width:{base:"6rem",md:"7rem"},display:"flex",justifyContent:"flex-end",alignItems:"center",children:[B&&e.jsx(Ke,{"aria-label":"Clear",icon:e.jsx(sn,{}),size:"xs",mr:1,onClick:ie}),e.jsx(G,{h:"100%",size:"xs",onClick:()=>X(B),fontSize:{base:"xs",sm:"sm"},children:"Search"})]})]}),$?e.jsx(N,{justify:"center",children:e.jsx(_t,{})}):e.jsx(E,{overflowX:"auto",overflowY:"hidden",w:"100%",children:e.jsxs(Ia,{variant:"simple",size:{base:"sm",md:"md"},children:[e.jsx(Na,{children:e.jsxs(ni,{children:[e.jsx(Cr,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Username"}),e.jsx(Cr,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Name"}),e.jsx(Cr,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Email"}),e.jsx(Cr,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Role"}),e.jsx(Cr,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Status"}),e.jsx(Cr,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Action"})]})}),e.jsx(qa,{children:z.map(W=>e.jsxs(ni,{children:[e.jsx(_r,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:W.username}),e.jsx(_r,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:`${W.first_name} ${W.last_name}`}),e.jsx(_r,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:W.email}),e.jsx(_r,{textTransform:"capitalize",whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:W.primary_role}),e.jsx(_r,{whiteSpace:"nowrap",children:e.jsx(dt,{colorScheme:W.is_active?"green":"red",variant:"solid",fontSize:{base:"xs",md:"sm"},px:2,py:1,borderRadius:"md",children:W.is_active?"Active":"Inactive"})}),e.jsx(_r,{whiteSpace:"nowrap",children:e.jsxs(Tt,{children:[e.jsx(Pt,{as:Ke,icon:e.jsx(ei,{}),variant:"ghost",size:"sm","aria-label":"Options"}),e.jsxs(At,{children:[e.jsx(Qe,{icon:e.jsx(Od,{}),onClick:()=>le(W),fontSize:{base:"xs",md:"sm"},children:"Update Role"}),e.jsx(Ba,{}),e.jsx(Qe,{color:W.is_active?"red.500":"green.500",onClick:()=>he(W.id),fontSize:{base:"xs",md:"sm"},children:W.is_active?"Deactivate User":"Activate User"})]})]})})]},W.id))})]})})]})}),k==="activity"&&e.jsx(de,{spacing:8,align:"stretch",children:e.jsxs(et,{p:6,shadow:"md",bg:fe,children:[e.jsx(Ee,{size:"md",mb:4,color:C,children:"Recent Activity"}),e.jsxs(E,{position:"relative",children:[e.jsx(E,{position:"absolute",left:{base:"20px",md:"50%"},transform:{base:"none",md:"translateX(-50%)"},h:"100%",w:"2px",bg:"gray.200"}),u!=null&&u.activity&&u.activity.length>0?u.activity.map((W,Xe)=>{const ht=Xe%2===0,Ct=W.type==="event_registration"?Bt:W.type==="study_group_join"?Ft:ld,fr=W.type==="event_registration"?"blue":W.type==="study_group_join"?"green":"purple";return e.jsxs(N,{mb:8,justify:{base:"flex-start",md:"space-between"},align:"center",w:"100%",direction:{base:"row",md:ht?"row-reverse":"row"},position:"relative",pl:{base:"50px",md:0},children:[e.jsx(E,{w:{base:"100%",md:"45%"},textAlign:{base:"left",md:"center"},p:3,borderRadius:"lg",display:{base:"none",md:"block"},children:e.jsx(m,{fontWeight:"medium",color:C,fontSize:{base:"xs",md:"sm"},children:Mi(new Date(W.date),"MMM d, yyyy HH:mm")})}),e.jsx(E,{position:"absolute",left:{base:"10px",md:"50%"},transform:{base:"none",md:"translateX(-50%)"},w:{base:8,md:10},h:{base:8,md:10},borderRadius:"full",zIndex:10,bg:`${fr}.100`,color:`${fr}.600`,display:"flex",alignItems:"center",justifyContent:"center",shadow:"lg",border:"4px solid white",children:e.jsx(Fe,{as:Ct,boxSize:{base:3,md:4}})}),e.jsxs(E,{w:{base:"100%",md:"45%"},bg:fe,p:{base:2,md:3},borderRadius:"lg",shadow:"sm",border:"1px solid",borderColor:"gray.100",children:[e.jsx(m,{fontWeight:"medium",color:C,textTransform:"capitalize",fontSize:{base:"xs",md:"sm"},children:W.type==="event_registration"?"Event Registration":W.type==="study_group_join"?"Joined Study Group":"Task Completed"}),e.jsx(m,{fontSize:{base:"xs",md:"sm"},color:l,children:W.type==="event_registration"?"Registered for an event":W.type==="study_group_join"?`Joined: ${W.data.group_name}`:"Completed a task"}),e.jsx(m,{fontSize:"xs",color:l,mt:1,display:{base:"block",md:"none"},children:Mi(new Date(W.date),"MMM d, yyyy HH:mm")})]})]},Xe)}):e.jsx(m,{color:l,textAlign:"center",py:4,fontSize:{base:"xs",md:"sm"},children:"No recent activity to display."})]})]})}),k==="analytics"&&j==="admin"&&(u==null?void 0:u.charts)&&e.jsx(de,{spacing:8,align:"stretch",children:e.jsx(Ht,{columns:{base:1,md:2},spacing:6,children:e.jsxs(et,{p:6,shadow:"md",bg:fe,gridColumn:{lg:j==="admin"?"span 4":"span 3"},children:[e.jsx(Ee,{size:"md",mb:4,color:C,children:"Community Leaderboards"}),e.jsx(m,{color:l,mb:4,children:"Track your standing in the community based on your contributions."}),e.jsxs(Ht,{columns:{base:1,md:2},spacing:6,children:[e.jsxs(et,{p:4,shadow:"sm",bg:fe,border:"1px solid",borderColor:"gray.100",children:[e.jsx(Ee,{size:"sm",mb:2,color:C,children:"Top Posters"}),e.jsx(E,{h:"400px",w:"100%",children:e.jsx(jn,{data:Ge,options:Q})})]}),e.jsxs(et,{p:4,shadow:"sm",bg:fe,border:"1px solid",borderColor:"gray.100",children:[e.jsx(Ee,{size:"sm",mb:2,color:C,children:"Top Commenters"}),e.jsx(E,{h:"400px",w:"100%",children:e.jsx(jn,{data:ee,options:ze})})]}),e.jsxs(et,{p:4,shadow:"sm",bg:fe,border:"1px solid",borderColor:"gray.100",children:[e.jsx(Ee,{size:"sm",mb:2,color:C,children:"Top Upvoters"}),e.jsx(E,{h:"400px",w:"100%",children:e.jsx(jn,{data:Le,options:Ve})})]}),j==="admin"&&e.jsxs(et,{p:4,shadow:"sm",bg:fe,border:"1px solid",borderColor:"gray.100",children:[e.jsx(Ee,{size:"sm",mb:2,color:C,children:"Top Courses"}),e.jsx(E,{h:"400px",w:"100%",children:e.jsx(jn,{data:Ze,options:st})})]})]})]})})}),e.jsxs(kt,{isOpen:x,onClose:S,children:[e.jsx(at,{}),e.jsxs(Ot,{children:[e.jsx(ut,{children:"Update User Role"}),e.jsx(wt,{}),e.jsx(lt,{children:P&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{mb:4,children:["Update role for ",e.jsx("strong",{children:P.username})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Select Role"}),e.jsxs(sr,{value:D,onChange:W=>Z(W.target.value),children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]})}),e.jsxs(xt,{children:[e.jsx(G,{variant:"ghost",mr:3,onClick:S,children:"Cancel"}),e.jsx(G,{colorScheme:"blue",onClick:ue,children:"Update Role"})]})]})]})]})]})})})},Di="https://via.placeholder.com/150";ot(E);const ch=()=>{const t=Lt(),{userId:r}=mo(),[n,s]=h.useState(!0),[i,o]=h.useState(null),a=R("white","gray.700"),d=R("gray.800","white"),v=R("gray.500","gray.400");R("gray.50","gray.900"),R("gray.200","gray.700"),h.useEffect(()=>{(async()=>{var O,M;s(!0);try{const _=await eu(r||"me"),w={id:_.id,name:`${_.first_name||""} ${_.last_name||""}`.trim()||_.username,username:_.username,email:_.email,bio:_.bio,major:((O=_.major)==null?void 0:O.name)||"N/A",faculty:((M=_.faculty)==null?void 0:M.name)||"N/A",roles:(_.roles||[]).map(z=>typeof z=="string"?z:z.name),verified:_.is_admin||_.is_moderator,avatar:_.avatar_url||Di,joinDate:_.created_at};console.log("UserProfile - Avatar URL:",w.avatar),o(w)}catch(_){console.error("Failed to load visitor profile",_),o(null)}finally{s(!1)}})()},[r]);const g=()=>t(-1);if(n)return e.jsx(N,{height:"100vh",width:"100%",align:"center",justify:"center",children:e.jsx(_t,{size:"xl",thickness:"4px",color:"blue.500"})});if(!i)return e.jsxs(Jt,{maxW:"container.xl",py:8,textAlign:"center",children:[e.jsx(Ee,{children:"User Not Found"}),e.jsx(m,{children:"The user profile you are looking for does not exist."}),e.jsx(Ke,{icon:e.jsx(Vt,{}),onClick:g,"aria-label":"Go back",mt:4})]});const u=({icon:y,title:O,value:M})=>e.jsxs(Te,{spacing:4,p:4,bg:R("gray.50","gray.800"),borderRadius:"lg",w:"full",children:[e.jsx(E,{as:y,color:"blue.500",boxSize:6}),e.jsxs(de,{align:"start",spacing:0,children:[e.jsx(m,{fontSize:"sm",color:v,children:O}),e.jsx(m,{fontWeight:"medium",color:d,children:M})]})]});return e.jsx(N,{minH:"100vh",p:4,bg:R("gray.50","gray.800"),justify:"center",children:e.jsx(E,{w:{base:"full",md:"90%",lg:"80%"},children:e.jsxs(et,{bg:a,p:0,overflow:"hidden",children:[e.jsxs(E,{position:"relative",h:"180px",mb:"60px",children:[e.jsx(vt,{src:ta,alt:"Cover Photo",objectFit:"cover",w:"full",h:"full"}),e.jsx(N,{position:"absolute",top:4,left:4,right:4,justify:"space-between",zIndex:1,children:e.jsx(Ke,{icon:e.jsx(Vt,{}),"aria-label":"Go back",onClick:g,bg:R("white","gray.800"),color:d,_hover:{bg:R("gray.100","gray.700")},boxShadow:"md",title:"Go back"})}),e.jsx(gt,{size:"xl",src:i.avatar,name:i.name,position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},boxShadow:"lg",border:"4px solid",borderColor:R("white","gray.800"),onError:y=>{console.error("Avatar failed to load:",i.avatar),y.target.src=Di}})]}),e.jsxs(E,{px:{base:4,md:6},children:[e.jsxs(N,{justify:{base:"center",md:"flex-start"},align:"center",mb:6,mt:{base:5,md:0},children:[e.jsxs(Ee,{size:{base:"lg",md:"xl"},color:d,textAlign:{base:"center",md:"left"},children:[i.name,i.verified&&e.jsx(Tn,{size:"24px",bg:"blue.500",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",ml:2,verticalAlign:"middle",children:e.jsx(wr,{size:"16px"})})]}),e.jsxs(m,{color:v,fontSize:"md",ml:3,children:["@",i.username]})]}),e.jsx(N,{mb:4,flexWrap:"wrap",gap:2,justify:{base:"center",md:"flex-start"},children:i.roles.map(y=>e.jsx(dt,{colorScheme:y==="moderator"?"purple":y==="admin"?"red":"blue",textTransform:"capitalize",children:y},y))}),i.email&&e.jsx(u,{icon:Ko,title:"Email",value:i.email})]}),e.jsxs(E,{p:6,borderTop:"1px solid",borderColor:R("gray.100","gray.700"),children:[e.jsx(Ee,{size:"md",mb:4,children:"About"}),e.jsx(m,{color:d,children:i.bio||"No bio available."})]}),e.jsxs(Ht,{columns:{base:1,md:3},spacing:{base:3,md:6},p:6,bg:a,borderTop:"1px solid",borderColor:R("gray.100","gray.700"),children:[e.jsxs(de,{spacing:1,alignItems:"flex-start",children:[e.jsxs(Te,{children:[e.jsx(Fe,{as:Jo,color:"blue.500"}),e.jsx(m,{fontSize:"sm",color:v,children:"Major"})]}),e.jsx(m,{fontWeight:"bold",fontSize:"md",children:i.major})]}),e.jsxs(de,{spacing:1,alignItems:"flex-start",children:[e.jsxs(Te,{children:[e.jsx(Fe,{as:jr,color:"blue.500"}),e.jsx(m,{fontSize:"sm",color:v,children:"Faculty"})]}),e.jsx(m,{fontWeight:"bold",fontSize:"md",children:i.faculty})]}),e.jsxs(de,{spacing:1,alignItems:"flex-start",children:[e.jsxs(Te,{children:[e.jsx(Fe,{as:Bt,color:"blue.500"}),e.jsx(m,{fontSize:"sm",color:v,children:"Joined"})]}),e.jsx(m,{fontWeight:"bold",fontSize:"md",children:new Date(i.joinDate).toLocaleDateString()})]})]})]})})})},Li={whatsapp:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32px" height="32px"><path fill="#fff" d="M4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98c-0.001,0,0,0,0,0h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303z"/><path fill="#fff" d="M4.868,43.803c-0.132,0-0.26-0.052-0.355-0.148c-0.125-0.127-0.174-0.312-0.127-0.483l2.639-9.636c-1.636-2.906-2.499-6.206-2.497-9.556C4.532,13.238,13.273,4.5,24.014,4.5c5.21,0.002,10.105,2.031,13.784,5.713c3.679,3.683,5.704,8.577,5.702,13.781c-0.004,10.741-8.746,19.48-19.486,19.48c-3.189-0.001-6.344-0.788-9.144-2.277l-9.875,2.589C4.953,43.798,4.911,43.803,4.868,43.803z"/><path fill="#cfd8dc" d="M24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,4C24.014,4,24.014,4,24.014,4C12.998,4,4.032,12.962,4.027,23.979c-0.001,3.367,0.849,6.685,2.461,9.622l-2.585,9.439c-0.094,0.345,0.002,0.713,0.254,0.967c0.19,0.192,0.447,0.297,0.711,0.297c0.085,0,0.17-0.011,0.254-0.033l9.687-2.54c2.828,1.468,5.998,2.243,9.197,2.244c11.024,0,19.99-8.963,19.995-19.98c0.002-5.339-2.075-10.359-5.848-14.135C34.378,6.083,29.357,4.002,24.014,4L24.014,4z"/><path fill="#40c351" d="M35.176,12.832c-2.98-2.982-6.941-4.625-11.157-4.626c-8.704,0-15.783,7.076-15.787,15.774c-0.001,2.981,0.833,5.883,2.413,8.396l0.376,0.597l-1.595,5.821l5.973-1.566l0.577,0.342c2.422,1.438,5.2,2.198,8.032,2.199h0.006c8.698,0,15.777-7.077,15.78-15.776C39.795,19.778,38.156,15.814,35.176,12.832z"/><path fill="#fff" fill-rule="evenodd" d="M19.268,16.045c-0.355-0.79-0.729-0.806-1.068-0.82c-0.277-0.012-0.593-0.011-0.909-0.011c-0.316,0-0.83,0.119-1.265,0.594c-0.435,0.475-1.661,1.622-1.661,3.956c0,2.334,1.7,4.59,1.937,4.906c0.237,0.316,3.282,5.259,8.104,7.161c4.007,1.58,4.823,1.266,5.693,1.187c0.87-0.079,2.807-1.147,3.202-2.255c0.395-1.108,0.395-2.057,0.277-2.255c-0.119-0.198-0.435-0.316-0.909-0.554s-2.807-1.385-3.242-1.543c-0.435-0.158-0.751-0.237-1.068,0.238c-0.316,0.474-1.225,1.543-1.502,1.859c-0.277,0.317-0.554,0.357-1.028,0.119c-0.474-0.238-2.002-0.738-3.815-2.354c-1.41-1.257-2.362-2.81-2.639-3.285c-0.277-0.474-0.03-0.731,0.208-0.968c0.213-0.213,0.474-0.554,0.712-0.831c0.237-0.277,0.316-0.475,0.474-0.791c0.158-0.317,0.079-0.594-0.04-0.831C20.612,19.329,19.69,16.983,19.268,16.045z" clip-rule="evenodd"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32px" height="32px"><path fill="#90CAF9" d="M40 45H16c-1.1 0-2-.9-2-2V13c0-1.1.9-2 2-2h24c1.1 0 2 .9 2 2v30c0 1.1-.9 2-2 2z"/><path fill="#E1F5FE" d="M38 17H18v24h20V17z"/><path fill="#1976D2" d="M25 13h-9V5c0-1.1.9-2 2-2h24c1.1 0 2 .9 2 2v30c0 1.1-.9 2-2 2h-8v-9c0-2.2-1.8-4-4-4h-5v-5c0-2.2-1.8-4-4-4z"/><path fill="#E1F5FE" d="M34 9H20v4h14V9zm0 7H20v14h14V16z"/></svg>'},Br=()=>localStorage.getItem("authToken"),oa=async(t={})=>{var r;try{const n={...t};if(!n.faculty_id||!n.major_id){const i=JSON.parse(localStorage.getItem("user")||"{}");n.faculty_id||(n.faculty_id=i.faculty_id||localStorage.getItem("faculty_id")),n.major_id||(n.major_id=i.major_id||localStorage.getItem("major_id"))}const s=await we.get("/resources",{params:n});if(Array.isArray(s.data))return s.data;if(s.data&&Array.isArray(s.data.data)){const i=s.data.data;return i.pagination=s.data.pagination||null,i}return[]}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch resources"}}},dh=async t=>{var r;try{const n=await we.get(`/resources/${t}`);return console.log("Resource fetched successfully:",n.data),n.data}catch(n){throw console.error("Error fetching resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch resource"}}},aa=async({title:t,description:r,attachments:n,course_id:s,major_id:i,faculty_id:o,type:a,poll:d})=>{var v;try{const g=new FormData;if(t&&g.append("title",t),r&&g.append("description",r),s&&g.append("course_id",s),i&&g.append("major_id",i),o&&g.append("faculty_id",o),a&&g.append("type",a),n&&n.length)for(let y=0;y<n.length;y++)g.append("attachments[]",n[y]);d&&d.question&&d.options&&d.options.length>0&&(g.append("poll[question]",d.question),d.options.forEach(y=>{const O=typeof y=="string"?y.trim():"";O&&g.append("poll[options][]",O)}),console.log("Poll data added to FormData for creation:",d));const u=await we.post("/resources",g,{headers:{"Content-Type":"multipart/form-data"}});return u.data.resource||u.data}catch(g){throw((v=g.response)==null?void 0:v.data)||{message:"Failed to create resource"}}},la=async(t,{title:r,description:n,newAttachments:s,removeAttachmentIds:i,poll:o})=>{var a,d;try{console.log("Updating resource with ID:",t);const v=new FormData;if(v.append("_method","PUT"),r!==void 0&&(console.log("Setting title:",r),v.append("title",r)),n!==void 0&&(console.log("Setting description:",n),v.append("description",n)),s&&s.length){console.log(`Adding ${s.length} new attachment(s)`);for(let u=0;u<s.length;u++)v.append("attachments[]",s[u]),console.log(`Added attachment: ${s[u].name}`)}if(i){const u=Array.isArray(i)?i:[i];u.length&&(console.log(`Removing ${u.length} attachment(s)`),u.forEach(y=>{y&&(console.log(`Marking attachment for removal: ${y}`),v.append("remove_attachments[]",y.toString()))}))}o&&o.question&&o.options&&o.options.length>0&&(v.append("poll[question]",o.question),o.options.forEach(u=>{const y=typeof u=="string"?u.trim():"";y&&v.append("poll[options][]",y)}),console.log("Poll data added to FormData for update:",o));const g=await we.post(`/resources/${t}`,v);return console.log("Resource updated successfully:",g.data),g.data.resource||g.data}catch(v){throw console.error("Error updating resource:",v),console.error("Error details:",((a=v.response)==null?void 0:a.data)||"Unknown error"),((d=v.response)==null?void 0:d.data)||{message:"Failed to update resource"}}},ca=async t=>{try{return(await we.post(`/resources/${t}/toggle-upvote`,{},{headers:{Authorization:`Bearer ${Br()}`}})).data}catch(r){throw console.error("Error toggling upvote:",r),r}},uh=async(t,r)=>{try{return(await we.post(`/resources/${t}/comments`,{body:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Br()}`}})).data}catch(n){throw console.error("Error adding comment:",n),n}},hh=async(t,r)=>{try{return(await we.put(`/comments/${t}`,{body:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Br()}`}})).data}catch(n){throw console.error("Error updating comment:",n),n}},fh=async t=>{try{return(await we.delete(`/comments/${t}`,{headers:{Authorization:`Bearer ${Br()}`}})).data}catch(r){throw console.error("Error deleting comment:",r),r}},da=async t=>{var r;try{return(await we.post(`/poll-options/${t}/vote`,{},{headers:{Authorization:`Bearer ${Br()}`}})).data}catch(n){throw console.error("Error voting poll option:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to record vote"}}},ph=async t=>{try{return(await we.post(`/comments/${t}/toggle-upvote`,{},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Br()}`}})).data}catch(r){throw console.error("Error toggling comment upvote:",r),r}},ua=async t=>{var r;try{return(await we.delete(`/resources/${t}`)).data}catch(n){throw console.error("Error deleting resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to delete resource"}}},ha=async t=>{var r;try{return(await we.post(`/resources/${t}/toggleSave`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to save resource"}}},mh=async(t={})=>{var r;try{return(await we.get("/saved-items",{params:t})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch saved items"}}},fa=async t=>{var r;try{return(await we.get("/top-contributors",{params:{limit:t}})).data}catch(n){throw console.error("Error fetching top contributors:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch top contributors"}}},gh=async(t={})=>{var r;try{return(await we.get("/admin/resources/pending",{params:t})).data}catch(n){throw console.error("Error fetching pending resources:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch pending resources"}}},xh=async t=>{var r;try{return(await we.post(`/admin/resources/${t}/approve`)).data}catch(n){throw console.error("Error approving resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to approve resource"}}},bh=async(t,r)=>{var n;try{const s=r?{reason:r.trim()}:{};return(await we.post(`/admin/resources/${t}/reject`,s)).data}catch(s){throw console.error("Error rejecting resource:",s),((n=s.response)==null?void 0:n.data)||{message:"Failed to reject resource"}}},yh=Object.freeze(Object.defineProperty({__proto__:null,addComment:uh,approveResource:xh,createResource:aa,deleteComment:fh,deleteResource:ua,getAllResources:oa,getPendingResources:gh,getResourceById:dh,getSavedItems:mh,getTopContributors:fa,rejectResource:bh,toggleCommentUpvote:ph,toggleSaveResource:ha,toggleUpvote:ca,updateComment:hh,updateResource:la,votePollOption:da},Symbol.toStringTag,{value:"Module"}));var ys={},js={},Vr={},vs={},Fi;function jh(){return Fi||(Fi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};t.default=r}(vs)),vs}var ws,Wi;function vh(){if(Wi)return ws;Wi=1;var t="Expected a function",r=NaN,n="[object Symbol]",s=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,d=parseInt,v=typeof yn=="object"&&yn&&yn.Object===Object&&yn,g=typeof self=="object"&&self&&self.Object===Object&&self,u=v||g||Function("return this")(),y=Object.prototype,O=y.toString,M=Math.max,_=Math.min,w=function(){return u.Date.now()};function z(p,j,k){var I,x,f,S,P,T,D=0,Z=!1,re=!1,c=!0;if(typeof p!="function")throw new TypeError(t);j=B(j)||0,L(k)&&(Z=!!k.leading,re="maxWait"in k,f=re?M(B(k.maxWait)||0,j):f,c="trailing"in k?!!k.trailing:c);function fe(ie){var he=I,le=x;return I=x=void 0,D=ie,S=p.apply(le,he),S}function C(ie){return D=ie,P=setTimeout(F,j),Z?fe(ie):S}function l(ie){var he=ie-T,le=ie-D,ue=j-he;return re?_(ue,f-le):ue}function b(ie){var he=ie-T,le=ie-D;return T===void 0||he>=j||he<0||re&&le>=f}function F(){var ie=w();if(b(ie))return se(ie);P=setTimeout(F,l(ie))}function se(ie){return P=void 0,c&&I?fe(ie):(I=x=void 0,S)}function V(){P!==void 0&&clearTimeout(P),D=0,I=T=x=P=void 0}function ae(){return P===void 0?S:se(w())}function X(){var ie=w(),he=b(ie);if(I=arguments,x=this,T=ie,he){if(P===void 0)return C(T);if(re)return P=setTimeout(F,j),fe(T)}return P===void 0&&(P=setTimeout(F,j)),S}return X.cancel=V,X.flush=ae,X}function L(p){var j=typeof p;return!!p&&(j=="object"||j=="function")}function $(p){return!!p&&typeof p=="object"}function A(p){return typeof p=="symbol"||$(p)&&O.call(p)==n}function B(p){if(typeof p=="number")return p;if(A(p))return r;if(L(p)){var j=typeof p.valueOf=="function"?p.valueOf():p;p=L(j)?j+"":j}if(typeof p!="string")return p===0?p:+p;p=p.replace(s,"");var k=o.test(p);return k||a.test(p)?d(p.slice(2),k?2:8):i.test(p)?r:+p}return ws=z,ws}var Ss={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Ii;function as(){return Ii||(Ii=1,function(t){(function(){var r={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var d=arguments[a];d&&(o=i(o,s(d)))}return o}function s(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var d in o)r.call(o,d)&&o[d]&&(a=i(a,d));return a}function i(o,a){return a?o?o+" "+a:o+a:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(Ss)),Ss.exports}var _e={},Cs={},Ni;function pa(){return Ni||(Ni=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(vr());function n(i){return i&&i.__esModule?i:{default:i}}var s={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(o){return r.default.createElement("ul",{style:{display:"block"}},o)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(o){return r.default.createElement("button",null,o+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null,unslick:!1};t.default=s}(Cs)),Cs}var qi;function pn(){if(qi)return _e;qi=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.checkSpecKeys=_e.checkNavigable=_e.changeSlide=_e.canUseDOM=_e.canGoNext=void 0,_e.clamp=g,_e.extractObject=void 0,_e.filterSettings=fe,_e.validSettings=_e.swipeStart=_e.swipeMove=_e.swipeEnd=_e.slidesOnRight=_e.slidesOnLeft=_e.slideHandler=_e.siblingDirection=_e.safePreventDefault=_e.lazyStartIndex=_e.lazySlidesOnRight=_e.lazySlidesOnLeft=_e.lazyEndIndex=_e.keyHandler=_e.initializedState=_e.getWidth=_e.getTrackLeft=_e.getTrackCSS=_e.getTrackAnimateCSS=_e.getTotalSlides=_e.getSwipeDirection=_e.getSlideCount=_e.getRequiredLazySlides=_e.getPreClones=_e.getPostClones=_e.getOnDemandLazySlides=_e.getNavigableIndexes=_e.getHeight=void 0;var t=n(vr()),r=n(pa());function n(C){return C&&C.__esModule?C:{default:C}}function s(C){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},s(C)}function i(C,l){var b=Object.keys(C);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(C);l&&(F=F.filter(function(se){return Object.getOwnPropertyDescriptor(C,se).enumerable})),b.push.apply(b,F)}return b}function o(C){for(var l=1;l<arguments.length;l++){var b=arguments[l]!=null?arguments[l]:{};l%2?i(Object(b),!0).forEach(function(F){a(C,F,b[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(b)):i(Object(b)).forEach(function(F){Object.defineProperty(C,F,Object.getOwnPropertyDescriptor(b,F))})}return C}function a(C,l,b){return l=d(l),l in C?Object.defineProperty(C,l,{value:b,enumerable:!0,configurable:!0,writable:!0}):C[l]=b,C}function d(C){var l=v(C,"string");return s(l)=="symbol"?l:String(l)}function v(C,l){if(s(C)!="object"||!C)return C;var b=C[Symbol.toPrimitive];if(b!==void 0){var F=b.call(C,l);if(s(F)!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(C)}function g(C,l,b){return Math.max(l,Math.min(C,b))}var u=_e.safePreventDefault=function(l){var b=["onTouchStart","onTouchMove","onWheel"];b.includes(l._reactName)||l.preventDefault()},y=_e.getOnDemandLazySlides=function(l){for(var b=[],F=O(l),se=M(l),V=F;V<se;V++)l.lazyLoadedList.indexOf(V)<0&&b.push(V);return b};_e.getRequiredLazySlides=function(l){for(var b=[],F=O(l),se=M(l),V=F;V<se;V++)b.push(V);return b};var O=_e.lazyStartIndex=function(l){return l.currentSlide-_(l)},M=_e.lazyEndIndex=function(l){return l.currentSlide+w(l)},_=_e.lazySlidesOnLeft=function(l){return l.centerMode?Math.floor(l.slidesToShow/2)+(parseInt(l.centerPadding)>0?1:0):0},w=_e.lazySlidesOnRight=function(l){return l.centerMode?Math.floor((l.slidesToShow-1)/2)+1+(parseInt(l.centerPadding)>0?1:0):l.slidesToShow},z=_e.getWidth=function(l){return l&&l.offsetWidth||0},L=_e.getHeight=function(l){return l&&l.offsetHeight||0},$=_e.getSwipeDirection=function(l){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,F,se,V,ae;return F=l.startX-l.curX,se=l.startY-l.curY,V=Math.atan2(se,F),ae=Math.round(V*180/Math.PI),ae<0&&(ae=360-Math.abs(ae)),ae<=45&&ae>=0||ae<=360&&ae>=315?"left":ae>=135&&ae<=225?"right":b===!0?ae>=35&&ae<=135?"up":"down":"vertical"},A=_e.canGoNext=function(l){var b=!0;return l.infinite||(l.centerMode&&l.currentSlide>=l.slideCount-1||l.slideCount<=l.slidesToShow||l.currentSlide>=l.slideCount-l.slidesToShow)&&(b=!1),b};_e.extractObject=function(l,b){var F={};return b.forEach(function(se){return F[se]=l[se]}),F},_e.initializedState=function(l){var b=t.default.Children.count(l.children),F=l.listRef,se=Math.ceil(z(F)),V=l.trackRef&&l.trackRef.node,ae=Math.ceil(z(V)),X;if(l.vertical)X=se;else{var ie=l.centerMode&&parseInt(l.centerPadding)*2;typeof l.centerPadding=="string"&&l.centerPadding.slice(-1)==="%"&&(ie*=se/100),X=Math.ceil((se-ie)/l.slidesToShow)}var he=F&&L(F.querySelector('[data-index="0"]')),le=he*l.slidesToShow,ue=l.currentSlide===void 0?l.initialSlide:l.currentSlide;l.rtl&&l.currentSlide===void 0&&(ue=b-1-l.initialSlide);var Pe=l.lazyLoadedList||[],Ae=y(o(o({},l),{},{currentSlide:ue,lazyLoadedList:Pe}));Pe=Pe.concat(Ae);var De={slideCount:b,slideWidth:X,listWidth:se,trackWidth:ae,currentSlide:ue,slideHeight:he,listHeight:le,lazyLoadedList:Pe};return l.autoplaying===null&&l.autoplay&&(De.autoplaying="playing"),De},_e.slideHandler=function(l){var b=l.waitForAnimate,F=l.animating,se=l.fade,V=l.infinite,ae=l.index,X=l.slideCount,ie=l.lazyLoad,he=l.currentSlide,le=l.centerMode,ue=l.slidesToScroll,Pe=l.slidesToShow,Ae=l.useCSS,De=l.lazyLoadedList;if(b&&F)return{};var Oe=ae,qe,Ge,Q,ee={},ze={},Le=V?ae:g(ae,0,X-1);if(se){if(!V&&(ae<0||ae>=X))return{};ae<0?Oe=ae+X:ae>=X&&(Oe=ae-X),ie&&De.indexOf(Oe)<0&&(De=De.concat(Oe)),ee={animating:!0,currentSlide:Oe,lazyLoadedList:De,targetSlide:Oe},ze={animating:!1,targetSlide:Oe}}else qe=Oe,Oe<0?(qe=Oe+X,V?X%ue!==0&&(qe=X-X%ue):qe=0):!A(l)&&Oe>he?Oe=qe=he:le&&Oe>=X?(Oe=V?X:X-1,qe=V?0:X-1):Oe>=X&&(qe=Oe-X,V?X%ue!==0&&(qe=0):qe=X-Pe),!V&&Oe+Pe>=X&&(qe=X-Pe),Ge=f(o(o({},l),{},{slideIndex:Oe})),Q=f(o(o({},l),{},{slideIndex:qe})),V||(Ge===Q&&(Oe=qe),Ge=Q),ie&&(De=De.concat(y(o(o({},l),{},{currentSlide:Oe})))),Ae?(ee={animating:!0,currentSlide:qe,trackStyle:x(o(o({},l),{},{left:Ge})),lazyLoadedList:De,targetSlide:Le},ze={animating:!1,currentSlide:qe,trackStyle:I(o(o({},l),{},{left:Q})),swipeLeft:null,targetSlide:Le}):ee={currentSlide:qe,trackStyle:I(o(o({},l),{},{left:Q})),lazyLoadedList:De,targetSlide:Le};return{state:ee,nextState:ze}},_e.changeSlide=function(l,b){var F,se,V,ae,X,ie=l.slidesToScroll,he=l.slidesToShow,le=l.slideCount,ue=l.currentSlide,Pe=l.targetSlide,Ae=l.lazyLoad,De=l.infinite;if(ae=le%ie!==0,F=ae?0:(le-ue)%ie,b.message==="previous")V=F===0?ie:he-F,X=ue-V,Ae&&!De&&(se=ue-V,X=se===-1?le-1:se),De||(X=Pe-ie);else if(b.message==="next")V=F===0?ie:F,X=ue+V,Ae&&!De&&(X=(ue+ie)%le+F),De||(X=Pe+ie);else if(b.message==="dots")X=b.index*b.slidesToScroll;else if(b.message==="children"){if(X=b.index,De){var Oe=D(o(o({},l),{},{targetSlide:X}));X>b.currentSlide&&Oe==="left"?X=X-le:X<b.currentSlide&&Oe==="right"&&(X=X+le)}}else b.message==="index"&&(X=Number(b.index));return X},_e.keyHandler=function(l,b,F){return l.target.tagName.match("TEXTAREA|INPUT|SELECT")||!b?"":l.keyCode===37?F?"next":"previous":l.keyCode===39?F?"previous":"next":""},_e.swipeStart=function(l,b,F){return l.target.tagName==="IMG"&&u(l),!b||!F&&l.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:l.touches?l.touches[0].pageX:l.clientX,startY:l.touches?l.touches[0].pageY:l.clientY,curX:l.touches?l.touches[0].pageX:l.clientX,curY:l.touches?l.touches[0].pageY:l.clientY}}},_e.swipeMove=function(l,b){var F=b.scrolling,se=b.animating,V=b.vertical,ae=b.swipeToSlide,X=b.verticalSwiping,ie=b.rtl,he=b.currentSlide,le=b.edgeFriction,ue=b.edgeDragged,Pe=b.onEdge,Ae=b.swiped,De=b.swiping,Oe=b.slideCount,qe=b.slidesToScroll,Ge=b.infinite,Q=b.touchObject,ee=b.swipeEvent,ze=b.listHeight,Le=b.listWidth;if(!F){if(se)return u(l);V&&ae&&X&&u(l);var Ve,Ze={},st=f(b);Q.curX=l.touches?l.touches[0].pageX:l.clientX,Q.curY=l.touches?l.touches[0].pageY:l.clientY,Q.swipeLength=Math.round(Math.sqrt(Math.pow(Q.curX-Q.startX,2)));var me=Math.round(Math.sqrt(Math.pow(Q.curY-Q.startY,2)));if(!X&&!De&&me>10)return{scrolling:!0};X&&(Q.swipeLength=me);var Y=(ie?-1:1)*(Q.curX>Q.startX?1:-1);X&&(Y=Q.curY>Q.startY?1:-1);var U=Math.ceil(Oe/qe),J=$(b.touchObject,X),ne=Q.swipeLength;return Ge||(he===0&&(J==="right"||J==="down")||he+1>=U&&(J==="left"||J==="up")||!A(b)&&(J==="left"||J==="up"))&&(ne=Q.swipeLength*le,ue===!1&&Pe&&(Pe(J),Ze.edgeDragged=!0)),!Ae&&ee&&(ee(J),Ze.swiped=!0),V?Ve=st+ne*(ze/Le)*Y:ie?Ve=st-ne*Y:Ve=st+ne*Y,X&&(Ve=st+ne*Y),Ze=o(o({},Ze),{},{touchObject:Q,swipeLeft:Ve,trackStyle:I(o(o({},b),{},{left:Ve}))}),Math.abs(Q.curX-Q.startX)<Math.abs(Q.curY-Q.startY)*.8||Q.swipeLength>10&&(Ze.swiping=!0,u(l)),Ze}},_e.swipeEnd=function(l,b){var F=b.dragging,se=b.swipe,V=b.touchObject,ae=b.listWidth,X=b.touchThreshold,ie=b.verticalSwiping,he=b.listHeight,le=b.swipeToSlide,ue=b.scrolling,Pe=b.onSwipe,Ae=b.targetSlide,De=b.currentSlide,Oe=b.infinite;if(!F)return se&&u(l),{};var qe=ie?he/X:ae/X,Ge=$(V,ie),Q={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(ue||!V.swipeLength)return Q;if(V.swipeLength>qe){u(l),Pe&&Pe(Ge);var ee,ze,Le=Oe?De:Ae;switch(Ge){case"left":case"up":ze=Le+j(b),ee=le?p(b,ze):ze,Q.currentDirection=0;break;case"right":case"down":ze=Le-j(b),ee=le?p(b,ze):ze,Q.currentDirection=1;break;default:ee=Le}Q.triggerSlideHandler=ee}else{var Ve=f(b);Q.trackStyle=x(o(o({},b),{},{left:Ve}))}return Q};var B=_e.getNavigableIndexes=function(l){for(var b=l.infinite?l.slideCount*2:l.slideCount,F=l.infinite?l.slidesToShow*-1:0,se=l.infinite?l.slidesToShow*-1:0,V=[];F<b;)V.push(F),F=se+l.slidesToScroll,se+=Math.min(l.slidesToScroll,l.slidesToShow);return V},p=_e.checkNavigable=function(l,b){var F=B(l),se=0;if(b>F[F.length-1])b=F[F.length-1];else for(var V in F){if(b<F[V]){b=se;break}se=F[V]}return b},j=_e.getSlideCount=function(l){var b=l.centerMode?l.slideWidth*Math.floor(l.slidesToShow/2):0;if(l.swipeToSlide){var F,se=l.listRef,V=se.querySelectorAll&&se.querySelectorAll(".slick-slide")||[];if(Array.from(V).every(function(ie){if(l.vertical){if(ie.offsetTop+L(ie)/2>l.swipeLeft*-1)return F=ie,!1}else if(ie.offsetLeft-b+z(ie)/2>l.swipeLeft*-1)return F=ie,!1;return!0}),!F)return 0;var ae=l.rtl===!0?l.slideCount-l.currentSlide:l.currentSlide,X=Math.abs(F.dataset.index-ae)||1;return X}else return l.slidesToScroll},k=_e.checkSpecKeys=function(l,b){return b.reduce(function(F,se){return F&&l.hasOwnProperty(se)},!0)?null:console.error("Keys Missing:",l)},I=_e.getTrackCSS=function(l){k(l,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var b,F,se=l.slideCount+2*l.slidesToShow;l.vertical?F=se*l.slideHeight:b=T(l)*l.slideWidth;var V={opacity:1,transition:"",WebkitTransition:""};if(l.useTransform){var ae=l.vertical?"translate3d(0px, "+l.left+"px, 0px)":"translate3d("+l.left+"px, 0px, 0px)",X=l.vertical?"translate3d(0px, "+l.left+"px, 0px)":"translate3d("+l.left+"px, 0px, 0px)",ie=l.vertical?"translateY("+l.left+"px)":"translateX("+l.left+"px)";V=o(o({},V),{},{WebkitTransform:ae,transform:X,msTransform:ie})}else l.vertical?V.top=l.left:V.left=l.left;return l.fade&&(V={opacity:1}),b&&(V.width=b),F&&(V.height=F),window&&!window.addEventListener&&window.attachEvent&&(l.vertical?V.marginTop=l.left+"px":V.marginLeft=l.left+"px"),V},x=_e.getTrackAnimateCSS=function(l){k(l,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var b=I(l);return l.useTransform?(b.WebkitTransition="-webkit-transform "+l.speed+"ms "+l.cssEase,b.transition="transform "+l.speed+"ms "+l.cssEase):l.vertical?b.transition="top "+l.speed+"ms "+l.cssEase:b.transition="left "+l.speed+"ms "+l.cssEase,b},f=_e.getTrackLeft=function(l){if(l.unslick)return 0;k(l,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var b=l.slideIndex,F=l.trackRef,se=l.infinite,V=l.centerMode,ae=l.slideCount,X=l.slidesToShow,ie=l.slidesToScroll,he=l.slideWidth,le=l.listWidth,ue=l.variableWidth,Pe=l.slideHeight,Ae=l.fade,De=l.vertical,Oe=0,qe,Ge,Q=0;if(Ae||l.slideCount===1)return 0;var ee=0;if(se?(ee=-S(l),ae%ie!==0&&b+ie>ae&&(ee=-(b>ae?X-(b-ae):ae%ie)),V&&(ee+=parseInt(X/2))):(ae%ie!==0&&b+ie>ae&&(ee=X-ae%ie),V&&(ee=parseInt(X/2))),Oe=ee*he,Q=ee*Pe,De?qe=b*Pe*-1+Q:qe=b*he*-1+Oe,ue===!0){var ze,Le=F&&F.node;if(ze=b+S(l),Ge=Le&&Le.childNodes[ze],qe=Ge?Ge.offsetLeft*-1:0,V===!0){ze=se?b+S(l):b,Ge=Le&&Le.children[ze],qe=0;for(var Ve=0;Ve<ze;Ve++)qe-=Le&&Le.children[Ve]&&Le.children[Ve].offsetWidth;qe-=parseInt(l.centerPadding),qe+=Ge&&(le-Ge.offsetWidth)/2}}return qe},S=_e.getPreClones=function(l){return l.unslick||!l.infinite?0:l.variableWidth?l.slideCount:l.slidesToShow+(l.centerMode?1:0)},P=_e.getPostClones=function(l){return l.unslick||!l.infinite?0:l.slideCount},T=_e.getTotalSlides=function(l){return l.slideCount===1?1:S(l)+l.slideCount+P(l)},D=_e.siblingDirection=function(l){return l.targetSlide>l.currentSlide?l.targetSlide>l.currentSlide+Z(l)?"left":"right":l.targetSlide<l.currentSlide-re(l)?"right":"left"},Z=_e.slidesOnRight=function(l){var b=l.slidesToShow,F=l.centerMode,se=l.rtl,V=l.centerPadding;if(F){var ae=(b-1)/2+1;return parseInt(V)>0&&(ae+=1),se&&b%2===0&&(ae+=1),ae}return se?0:b-1},re=_e.slidesOnLeft=function(l){var b=l.slidesToShow,F=l.centerMode,se=l.rtl,V=l.centerPadding;if(F){var ae=(b-1)/2+1;return parseInt(V)>0&&(ae+=1),!se&&b%2===0&&(ae+=1),ae}return se?b-1:0};_e.canUseDOM=function(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)};var c=_e.validSettings=Object.keys(r.default);function fe(C){return c.reduce(function(l,b){return C.hasOwnProperty(b)&&(l[b]=C[b]),l},{})}return _e}var Jr={},Bi;function wh(){if(Bi)return Jr;Bi=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Track=void 0;var t=s(vr()),r=s(as()),n=pn();function s(x){return x&&x.__esModule?x:{default:x}}function i(x){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},i(x)}function o(){return o=Object.assign?Object.assign.bind():function(x){for(var f=1;f<arguments.length;f++){var S=arguments[f];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},o.apply(this,arguments)}function a(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}function d(x,f){for(var S=0;S<f.length;S++){var P=f[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,A(P.key),P)}}function v(x,f,S){return f&&d(x.prototype,f),Object.defineProperty(x,"prototype",{writable:!1}),x}function g(x,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(f&&f.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),f&&u(x,f)}function u(x,f){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(P,T){return P.__proto__=T,P},u(x,f)}function y(x){var f=_();return function(){var P=w(x),T;if(f){var D=w(this).constructor;T=Reflect.construct(P,arguments,D)}else T=P.apply(this,arguments);return O(this,T)}}function O(x,f){if(f&&(i(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(x)}function M(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function _(){try{var x=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_=function(){return!!x})()}function w(x){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},w(x)}function z(x,f){var S=Object.keys(x);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(x);f&&(P=P.filter(function(T){return Object.getOwnPropertyDescriptor(x,T).enumerable})),S.push.apply(S,P)}return S}function L(x){for(var f=1;f<arguments.length;f++){var S=arguments[f]!=null?arguments[f]:{};f%2?z(Object(S),!0).forEach(function(P){$(x,P,S[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(S)):z(Object(S)).forEach(function(P){Object.defineProperty(x,P,Object.getOwnPropertyDescriptor(S,P))})}return x}function $(x,f,S){return f=A(f),f in x?Object.defineProperty(x,f,{value:S,enumerable:!0,configurable:!0,writable:!0}):x[f]=S,x}function A(x){var f=B(x,"string");return i(f)=="symbol"?f:String(f)}function B(x,f){if(i(x)!="object"||!x)return x;var S=x[Symbol.toPrimitive];if(S!==void 0){var P=S.call(x,f);if(i(P)!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(x)}var p=function(f){var S,P,T,D,Z;f.rtl?Z=f.slideCount-1-f.index:Z=f.index,T=Z<0||Z>=f.slideCount,f.centerMode?(D=Math.floor(f.slidesToShow/2),P=(Z-f.currentSlide)%f.slideCount===0,Z>f.currentSlide-D-1&&Z<=f.currentSlide+D&&(S=!0)):S=f.currentSlide<=Z&&Z<f.currentSlide+f.slidesToShow;var re;f.targetSlide<0?re=f.targetSlide+f.slideCount:f.targetSlide>=f.slideCount?re=f.targetSlide-f.slideCount:re=f.targetSlide;var c=Z===re;return{"slick-slide":!0,"slick-active":S,"slick-center":P,"slick-cloned":T,"slick-current":c}},j=function(f){var S={};return(f.variableWidth===void 0||f.variableWidth===!1)&&(S.width=f.slideWidth),f.fade&&(S.position="relative",f.vertical?S.top=-f.index*parseInt(f.slideHeight):S.left=-f.index*parseInt(f.slideWidth),S.opacity=f.currentSlide===f.index?1:0,S.zIndex=f.currentSlide===f.index?999:998,f.useCSS&&(S.transition="opacity "+f.speed+"ms "+f.cssEase+", visibility "+f.speed+"ms "+f.cssEase)),S},k=function(f,S){return f.key||S},I=function(f){var S,P=[],T=[],D=[],Z=t.default.Children.count(f.children),re=(0,n.lazyStartIndex)(f),c=(0,n.lazyEndIndex)(f);return t.default.Children.forEach(f.children,function(fe,C){var l,b={message:"children",index:C,slidesToScroll:f.slidesToScroll,currentSlide:f.currentSlide};!f.lazyLoad||f.lazyLoad&&f.lazyLoadedList.indexOf(C)>=0?l=fe:l=t.default.createElement("div",null);var F=j(L(L({},f),{},{index:C})),se=l.props.className||"",V=p(L(L({},f),{},{index:C}));if(P.push(t.default.cloneElement(l,{key:"original"+k(l,C),"data-index":C,className:(0,r.default)(V,se),tabIndex:"-1","aria-hidden":!V["slick-active"],style:L(L({outline:"none"},l.props.style||{}),F),onClick:function(ie){l.props&&l.props.onClick&&l.props.onClick(ie),f.focusOnSelect&&f.focusOnSelect(b)}})),f.infinite&&f.fade===!1){var ae=Z-C;ae<=(0,n.getPreClones)(f)&&(S=-ae,S>=re&&(l=fe),V=p(L(L({},f),{},{index:S})),T.push(t.default.cloneElement(l,{key:"precloned"+k(l,S),"data-index":S,tabIndex:"-1",className:(0,r.default)(V,se),"aria-hidden":!V["slick-active"],style:L(L({},l.props.style||{}),F),onClick:function(ie){l.props&&l.props.onClick&&l.props.onClick(ie),f.focusOnSelect&&f.focusOnSelect(b)}}))),S=Z+C,S<c&&(l=fe),V=p(L(L({},f),{},{index:S})),D.push(t.default.cloneElement(l,{key:"postcloned"+k(l,S),"data-index":S,tabIndex:"-1",className:(0,r.default)(V,se),"aria-hidden":!V["slick-active"],style:L(L({},l.props.style||{}),F),onClick:function(ie){l.props&&l.props.onClick&&l.props.onClick(ie),f.focusOnSelect&&f.focusOnSelect(b)}}))}}),f.rtl?T.concat(P,D).reverse():T.concat(P,D)};return Jr.Track=function(x){g(S,x);var f=y(S);function S(){var P;a(this,S);for(var T=arguments.length,D=new Array(T),Z=0;Z<T;Z++)D[Z]=arguments[Z];return P=f.call.apply(f,[this].concat(D)),$(M(P),"node",null),$(M(P),"handleRef",function(re){P.node=re}),P}return v(S,[{key:"render",value:function(){var T=I(this.props),D=this.props,Z=D.onMouseEnter,re=D.onMouseOver,c=D.onMouseLeave,fe={onMouseEnter:Z,onMouseOver:re,onMouseLeave:c};return t.default.createElement("div",o({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},fe),T)}}]),S}(t.default.PureComponent),Jr}var Xr={},Ui;function Sh(){if(Ui)return Xr;Ui=1;function t(p){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},t(p)}Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.Dots=void 0;var r=i(vr()),n=i(as()),s=pn();function i(p){return p&&p.__esModule?p:{default:p}}function o(p,j){var k=Object.keys(p);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(p);j&&(I=I.filter(function(x){return Object.getOwnPropertyDescriptor(p,x).enumerable})),k.push.apply(k,I)}return k}function a(p){for(var j=1;j<arguments.length;j++){var k=arguments[j]!=null?arguments[j]:{};j%2?o(Object(k),!0).forEach(function(I){d(p,I,k[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(k)):o(Object(k)).forEach(function(I){Object.defineProperty(p,I,Object.getOwnPropertyDescriptor(k,I))})}return p}function d(p,j,k){return j=y(j),j in p?Object.defineProperty(p,j,{value:k,enumerable:!0,configurable:!0,writable:!0}):p[j]=k,p}function v(p,j){if(!(p instanceof j))throw new TypeError("Cannot call a class as a function")}function g(p,j){for(var k=0;k<j.length;k++){var I=j[k];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(p,y(I.key),I)}}function u(p,j,k){return j&&g(p.prototype,j),Object.defineProperty(p,"prototype",{writable:!1}),p}function y(p){var j=O(p,"string");return t(j)=="symbol"?j:String(j)}function O(p,j){if(t(p)!="object"||!p)return p;var k=p[Symbol.toPrimitive];if(k!==void 0){var I=k.call(p,j);if(t(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}function M(p,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(j&&j.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),j&&_(p,j)}function _(p,j){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,x){return I.__proto__=x,I},_(p,j)}function w(p){var j=$();return function(){var I=A(p),x;if(j){var f=A(this).constructor;x=Reflect.construct(I,arguments,f)}else x=I.apply(this,arguments);return z(this,x)}}function z(p,j){if(j&&(t(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(p)}function L(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function $(){try{var p=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($=function(){return!!p})()}function A(p){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},A(p)}var B=function(j){var k;return j.infinite?k=Math.ceil(j.slideCount/j.slidesToScroll):k=Math.ceil((j.slideCount-j.slidesToShow)/j.slidesToScroll)+1,k};return Xr.Dots=function(p){M(k,p);var j=w(k);function k(){return v(this,k),j.apply(this,arguments)}return u(k,[{key:"clickHandler",value:function(x,f){f.preventDefault(),this.props.clickHandler(x)}},{key:"render",value:function(){for(var x=this.props,f=x.onMouseEnter,S=x.onMouseOver,P=x.onMouseLeave,T=x.infinite,D=x.slidesToScroll,Z=x.slidesToShow,re=x.slideCount,c=x.currentSlide,fe=B({slideCount:re,slidesToScroll:D,slidesToShow:Z,infinite:T}),C={onMouseEnter:f,onMouseOver:S,onMouseLeave:P},l=[],b=0;b<fe;b++){var F=(b+1)*D-1,se=T?F:(0,s.clamp)(F,0,re-1),V=se-(D-1),ae=T?V:(0,s.clamp)(V,0,re-1),X=(0,n.default)({"slick-active":T?c>=ae&&c<=se:c===ae}),ie={message:"dots",index:b,slidesToScroll:D,currentSlide:c},he=this.clickHandler.bind(this,ie);l=l.concat(r.default.createElement("li",{key:b,className:X},r.default.cloneElement(this.props.customPaging(b),{onClick:he})))}return r.default.cloneElement(this.props.appendDots(l),a({className:this.props.dotsClass},C))}}]),k}(r.default.PureComponent),Xr}var pr={},$i;function Ch(){if($i)return pr;$i=1;function t(p){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},t(p)}Object.defineProperty(pr,"__esModule",{value:!0}),pr.PrevArrow=pr.NextArrow=void 0;var r=i(vr()),n=i(as()),s=pn();function i(p){return p&&p.__esModule?p:{default:p}}function o(){return o=Object.assign?Object.assign.bind():function(p){for(var j=1;j<arguments.length;j++){var k=arguments[j];for(var I in k)Object.prototype.hasOwnProperty.call(k,I)&&(p[I]=k[I])}return p},o.apply(this,arguments)}function a(p,j){var k=Object.keys(p);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(p);j&&(I=I.filter(function(x){return Object.getOwnPropertyDescriptor(p,x).enumerable})),k.push.apply(k,I)}return k}function d(p){for(var j=1;j<arguments.length;j++){var k=arguments[j]!=null?arguments[j]:{};j%2?a(Object(k),!0).forEach(function(I){v(p,I,k[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(k)):a(Object(k)).forEach(function(I){Object.defineProperty(p,I,Object.getOwnPropertyDescriptor(k,I))})}return p}function v(p,j,k){return j=O(j),j in p?Object.defineProperty(p,j,{value:k,enumerable:!0,configurable:!0,writable:!0}):p[j]=k,p}function g(p,j){if(!(p instanceof j))throw new TypeError("Cannot call a class as a function")}function u(p,j){for(var k=0;k<j.length;k++){var I=j[k];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(p,O(I.key),I)}}function y(p,j,k){return j&&u(p.prototype,j),Object.defineProperty(p,"prototype",{writable:!1}),p}function O(p){var j=M(p,"string");return t(j)=="symbol"?j:String(j)}function M(p,j){if(t(p)!="object"||!p)return p;var k=p[Symbol.toPrimitive];if(k!==void 0){var I=k.call(p,j);if(t(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}function _(p,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(j&&j.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),j&&w(p,j)}function w(p,j){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,x){return I.__proto__=x,I},w(p,j)}function z(p){var j=A();return function(){var I=B(p),x;if(j){var f=B(this).constructor;x=Reflect.construct(I,arguments,f)}else x=I.apply(this,arguments);return L(this,x)}}function L(p,j){if(j&&(t(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $(p)}function $(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function A(){try{var p=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A=function(){return!!p})()}function B(p){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},B(p)}return pr.PrevArrow=function(p){_(k,p);var j=z(k);function k(){return g(this,k),j.apply(this,arguments)}return y(k,[{key:"clickHandler",value:function(x,f){f&&f.preventDefault(),this.props.clickHandler(x,f)}},{key:"render",value:function(){var x={"slick-arrow":!0,"slick-prev":!0},f=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(x["slick-disabled"]=!0,f=null);var S={key:"0","data-role":"none",className:(0,n.default)(x),style:{display:"block"},onClick:f},P={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},T;return this.props.prevArrow?T=r.default.cloneElement(this.props.prevArrow,d(d({},S),P)):T=r.default.createElement("button",o({key:"0",type:"button"},S)," ","Previous"),T}}]),k}(r.default.PureComponent),pr.NextArrow=function(p){_(k,p);var j=z(k);function k(){return g(this,k),j.apply(this,arguments)}return y(k,[{key:"clickHandler",value:function(x,f){f&&f.preventDefault(),this.props.clickHandler(x,f)}},{key:"render",value:function(){var x={"slick-arrow":!0,"slick-next":!0},f=this.clickHandler.bind(this,{message:"next"});(0,s.canGoNext)(this.props)||(x["slick-disabled"]=!0,f=null);var S={key:"1","data-role":"none",className:(0,n.default)(x),style:{display:"block"},onClick:f},P={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},T;return this.props.nextArrow?T=r.default.cloneElement(this.props.nextArrow,d(d({},S),P)):T=r.default.createElement("button",o({key:"1",type:"button"},S)," ","Next"),T}}]),k}(r.default.PureComponent),pr}var ma=function(){if(typeof Map!="undefined")return Map;function t(r,n){var s=-1;return r.some(function(i,o){return i[0]===n?(s=o,!0):!1}),s}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(n){var s=t(this.__entries__,n),i=this.__entries__[s];return i&&i[1]},r.prototype.set=function(n,s){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=s:this.__entries__.push([n,s])},r.prototype.delete=function(n){var s=this.__entries__,i=t(s,n);~i&&s.splice(i,1)},r.prototype.has=function(n){return!!~t(this.__entries__,n)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(n,s){s===void 0&&(s=null);for(var i=0,o=this.__entries__;i<o.length;i++){var a=o[i];n.call(s,a[1],a[0])}},r}()}(),Hs=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Nn=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),_h=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Nn):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),kh=2;function Oh(t,r){var n=!1,s=!1,i=0;function o(){n&&(n=!1,t()),s&&d()}function a(){_h(o)}function d(){var v=Date.now();if(n){if(v-i<kh)return;s=!0}else n=!0,s=!1,setTimeout(a,r);i=v}return d}var Rh=20,zh=["top","right","bottom","left","width","height","size","weight"],Eh=typeof MutationObserver!="undefined",Th=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Oh(this.refresh.bind(this),Rh)}return t.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},t.prototype.removeObserver=function(r){var n=this.observers_,s=n.indexOf(r);~s&&n.splice(s,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},t.prototype.updateObservers_=function(){var r=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return r.forEach(function(n){return n.broadcastActive()}),r.length>0},t.prototype.connect_=function(){!Hs||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Eh?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!Hs||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(r){var n=r.propertyName,s=n===void 0?"":n,i=zh.some(function(o){return!!~s.indexOf(o)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),ga=function(t,r){for(var n=0,s=Object.keys(r);n<s.length;n++){var i=s[n];Object.defineProperty(t,i,{value:r[i],enumerable:!1,writable:!1,configurable:!0})}return t},Fr=function(t){var r=t&&t.ownerDocument&&t.ownerDocument.defaultView;return r||Nn},xa=ls(0,0,0,0);function qn(t){return parseFloat(t)||0}function Hi(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return r.reduce(function(s,i){var o=t["border-"+i+"-width"];return s+qn(o)},0)}function Ph(t){for(var r=["top","right","bottom","left"],n={},s=0,i=r;s<i.length;s++){var o=i[s],a=t["padding-"+o];n[o]=qn(a)}return n}function Ah(t){var r=t.getBBox();return ls(0,0,r.width,r.height)}function Mh(t){var r=t.clientWidth,n=t.clientHeight;if(!r&&!n)return xa;var s=Fr(t).getComputedStyle(t),i=Ph(s),o=i.left+i.right,a=i.top+i.bottom,d=qn(s.width),v=qn(s.height);if(s.boxSizing==="border-box"&&(Math.round(d+o)!==r&&(d-=Hi(s,"left","right")+o),Math.round(v+a)!==n&&(v-=Hi(s,"top","bottom")+a)),!Lh(t)){var g=Math.round(d+o)-r,u=Math.round(v+a)-n;Math.abs(g)!==1&&(d-=g),Math.abs(u)!==1&&(v-=u)}return ls(i.left,i.top,d,v)}var Dh=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof Fr(t).SVGGraphicsElement}:function(t){return t instanceof Fr(t).SVGElement&&typeof t.getBBox=="function"}}();function Lh(t){return t===Fr(t).document.documentElement}function Fh(t){return Hs?Dh(t)?Ah(t):Mh(t):xa}function Wh(t){var r=t.x,n=t.y,s=t.width,i=t.height,o=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(o.prototype);return ga(a,{x:r,y:n,width:s,height:i,top:n,right:r+s,bottom:i+n,left:r}),a}function ls(t,r,n,s){return{x:t,y:r,width:n,height:s}}var Ih=function(){function t(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ls(0,0,0,0),this.target=r}return t.prototype.isActive=function(){var r=Fh(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},t}(),Nh=function(){function t(r,n){var s=Wh(n);ga(this,{target:r,contentRect:s})}return t}(),qh=function(){function t(r,n,s){if(this.activeObservations_=[],this.observations_=new ma,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=n,this.callbackCtx_=s}return t.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(r instanceof Fr(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(r)||(n.set(r,new Ih(r)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(r instanceof Fr(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(r)&&(n.delete(r),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&r.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,n=this.activeObservations_.map(function(s){return new Nh(s.target,s.broadcastRect())});this.callback_.call(r,n,r),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),ba=typeof WeakMap!="undefined"?new WeakMap:new ma,ya=function(){function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Th.getInstance(),s=new qh(r,n,this);ba.set(this,s)}return t}();["observe","unobserve","disconnect"].forEach(function(t){ya.prototype[t]=function(){var r;return(r=ba.get(this))[t].apply(r,arguments)}});var Bh=function(){return typeof Nn.ResizeObserver!="undefined"?Nn.ResizeObserver:ya}();const Uh=Object.freeze(Object.defineProperty({__proto__:null,default:Bh},Symbol.toStringTag,{value:"Module"})),$h=rl(Uh);var Gi;function Hh(){if(Gi)return Vr;Gi=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.InnerSlider=void 0;var t=g(vr()),r=g(jh()),n=g(vh()),s=g(as()),i=pn(),o=wh(),a=Sh(),d=Ch(),v=g($h);function g(T){return T&&T.__esModule?T:{default:T}}function u(T){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},u(T)}function y(){return y=Object.assign?Object.assign.bind():function(T){for(var D=1;D<arguments.length;D++){var Z=arguments[D];for(var re in Z)Object.prototype.hasOwnProperty.call(Z,re)&&(T[re]=Z[re])}return T},y.apply(this,arguments)}function O(T,D){if(T==null)return{};var Z=M(T,D),re,c;if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(T);for(c=0;c<fe.length;c++)re=fe[c],!(D.indexOf(re)>=0)&&Object.prototype.propertyIsEnumerable.call(T,re)&&(Z[re]=T[re])}return Z}function M(T,D){if(T==null)return{};var Z={},re=Object.keys(T),c,fe;for(fe=0;fe<re.length;fe++)c=re[fe],!(D.indexOf(c)>=0)&&(Z[c]=T[c]);return Z}function _(T,D){var Z=Object.keys(T);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(T);D&&(re=re.filter(function(c){return Object.getOwnPropertyDescriptor(T,c).enumerable})),Z.push.apply(Z,re)}return Z}function w(T){for(var D=1;D<arguments.length;D++){var Z=arguments[D]!=null?arguments[D]:{};D%2?_(Object(Z),!0).forEach(function(re){f(T,re,Z[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(Z)):_(Object(Z)).forEach(function(re){Object.defineProperty(T,re,Object.getOwnPropertyDescriptor(Z,re))})}return T}function z(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")}function L(T,D){for(var Z=0;Z<D.length;Z++){var re=D[Z];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(T,S(re.key),re)}}function $(T,D,Z){return D&&L(T.prototype,D),Object.defineProperty(T,"prototype",{writable:!1}),T}function A(T,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(D&&D.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),D&&B(T,D)}function B(T,D){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(re,c){return re.__proto__=c,re},B(T,D)}function p(T){var D=I();return function(){var re=x(T),c;if(D){var fe=x(this).constructor;c=Reflect.construct(re,arguments,fe)}else c=re.apply(this,arguments);return j(this,c)}}function j(T,D){if(D&&(u(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(T)}function k(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function I(){try{var T=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I=function(){return!!T})()}function x(T){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},x(T)}function f(T,D,Z){return D=S(D),D in T?Object.defineProperty(T,D,{value:Z,enumerable:!0,configurable:!0,writable:!0}):T[D]=Z,T}function S(T){var D=P(T,"string");return u(D)=="symbol"?D:String(D)}function P(T,D){if(u(T)!="object"||!T)return T;var Z=T[Symbol.toPrimitive];if(Z!==void 0){var re=Z.call(T,D);if(u(re)!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(T)}return Vr.InnerSlider=function(T){A(Z,T);var D=p(Z);function Z(re){var c;z(this,Z),c=D.call(this,re),f(k(c),"listRefHandler",function(C){return c.list=C}),f(k(c),"trackRefHandler",function(C){return c.track=C}),f(k(c),"adaptHeight",function(){if(c.props.adaptiveHeight&&c.list){var C=c.list.querySelector('[data-index="'.concat(c.state.currentSlide,'"]'));c.list.style.height=(0,i.getHeight)(C)+"px"}}),f(k(c),"componentDidMount",function(){if(c.props.onInit&&c.props.onInit(),c.props.lazyLoad){var C=(0,i.getOnDemandLazySlides)(w(w({},c.props),c.state));C.length>0&&(c.setState(function(b){return{lazyLoadedList:b.lazyLoadedList.concat(C)}}),c.props.onLazyLoad&&c.props.onLazyLoad(C))}var l=w({listRef:c.list,trackRef:c.track},c.props);c.updateState(l,!0,function(){c.adaptHeight(),c.props.autoplay&&c.autoPlay("update")}),c.props.lazyLoad==="progressive"&&(c.lazyLoadTimer=setInterval(c.progressiveLazyLoad,1e3)),c.ro=new v.default(function(){c.state.animating?(c.onWindowResized(!1),c.callbackTimers.push(setTimeout(function(){return c.onWindowResized()},c.props.speed))):c.onWindowResized()}),c.ro.observe(c.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(b){b.onfocus=c.props.pauseOnFocus?c.onSlideFocus:null,b.onblur=c.props.pauseOnFocus?c.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",c.onWindowResized):window.attachEvent("onresize",c.onWindowResized)}),f(k(c),"componentWillUnmount",function(){c.animationEndCallback&&clearTimeout(c.animationEndCallback),c.lazyLoadTimer&&clearInterval(c.lazyLoadTimer),c.callbackTimers.length&&(c.callbackTimers.forEach(function(C){return clearTimeout(C)}),c.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",c.onWindowResized):window.detachEvent("onresize",c.onWindowResized),c.autoplayTimer&&clearInterval(c.autoplayTimer),c.ro.disconnect()}),f(k(c),"componentDidUpdate",function(C){if(c.checkImagesLoad(),c.props.onReInit&&c.props.onReInit(),c.props.lazyLoad){var l=(0,i.getOnDemandLazySlides)(w(w({},c.props),c.state));l.length>0&&(c.setState(function(se){return{lazyLoadedList:se.lazyLoadedList.concat(l)}}),c.props.onLazyLoad&&c.props.onLazyLoad(l))}c.adaptHeight();var b=w(w({listRef:c.list,trackRef:c.track},c.props),c.state),F=c.didPropsChange(C);F&&c.updateState(b,F,function(){c.state.currentSlide>=t.default.Children.count(c.props.children)&&c.changeSlide({message:"index",index:t.default.Children.count(c.props.children)-c.props.slidesToShow,currentSlide:c.state.currentSlide}),c.props.autoplay?c.autoPlay("update"):c.pause("paused")})}),f(k(c),"onWindowResized",function(C){c.debouncedResize&&c.debouncedResize.cancel(),c.debouncedResize=(0,n.default)(function(){return c.resizeWindow(C)},50),c.debouncedResize()}),f(k(c),"resizeWindow",function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,l=!!(c.track&&c.track.node);if(l){var b=w(w({listRef:c.list,trackRef:c.track},c.props),c.state);c.updateState(b,C,function(){c.props.autoplay?c.autoPlay("update"):c.pause("paused")}),c.setState({animating:!1}),clearTimeout(c.animationEndCallback),delete c.animationEndCallback}}),f(k(c),"updateState",function(C,l,b){var F=(0,i.initializedState)(C);C=w(w(w({},C),F),{},{slideIndex:F.currentSlide});var se=(0,i.getTrackLeft)(C);C=w(w({},C),{},{left:se});var V=(0,i.getTrackCSS)(C);(l||t.default.Children.count(c.props.children)!==t.default.Children.count(C.children))&&(F.trackStyle=V),c.setState(F,b)}),f(k(c),"ssrInit",function(){if(c.props.variableWidth){var C=0,l=0,b=[],F=(0,i.getPreClones)(w(w(w({},c.props),c.state),{},{slideCount:c.props.children.length})),se=(0,i.getPostClones)(w(w(w({},c.props),c.state),{},{slideCount:c.props.children.length}));c.props.children.forEach(function(Ge){b.push(Ge.props.style.width),C+=Ge.props.style.width});for(var V=0;V<F;V++)l+=b[b.length-1-V],C+=b[b.length-1-V];for(var ae=0;ae<se;ae++)C+=b[ae];for(var X=0;X<c.state.currentSlide;X++)l+=b[X];var ie={width:C+"px",left:-l+"px"};if(c.props.centerMode){var he="".concat(b[c.state.currentSlide],"px");ie.left="calc(".concat(ie.left," + (100% - ").concat(he,") / 2 ) ")}return{trackStyle:ie}}var le=t.default.Children.count(c.props.children),ue=w(w(w({},c.props),c.state),{},{slideCount:le}),Pe=(0,i.getPreClones)(ue)+(0,i.getPostClones)(ue)+le,Ae=100/c.props.slidesToShow*Pe,De=100/Pe,Oe=-De*((0,i.getPreClones)(ue)+c.state.currentSlide)*Ae/100;c.props.centerMode&&(Oe+=(100-De*Ae/100)/2);var qe={width:Ae+"%",left:Oe+"%"};return{slideWidth:De+"%",trackStyle:qe}}),f(k(c),"checkImagesLoad",function(){var C=c.list&&c.list.querySelectorAll&&c.list.querySelectorAll(".slick-slide img")||[],l=C.length,b=0;Array.prototype.forEach.call(C,function(F){var se=function(){return++b&&b>=l&&c.onWindowResized()};if(!F.onclick)F.onclick=function(){return F.parentNode.focus()};else{var V=F.onclick;F.onclick=function(ae){V(ae),F.parentNode.focus()}}F.onload||(c.props.lazyLoad?F.onload=function(){c.adaptHeight(),c.callbackTimers.push(setTimeout(c.onWindowResized,c.props.speed))}:(F.onload=se,F.onerror=function(){se(),c.props.onLazyLoadError&&c.props.onLazyLoadError()}))})}),f(k(c),"progressiveLazyLoad",function(){for(var C=[],l=w(w({},c.props),c.state),b=c.state.currentSlide;b<c.state.slideCount+(0,i.getPostClones)(l);b++)if(c.state.lazyLoadedList.indexOf(b)<0){C.push(b);break}for(var F=c.state.currentSlide-1;F>=-(0,i.getPreClones)(l);F--)if(c.state.lazyLoadedList.indexOf(F)<0){C.push(F);break}C.length>0?(c.setState(function(se){return{lazyLoadedList:se.lazyLoadedList.concat(C)}}),c.props.onLazyLoad&&c.props.onLazyLoad(C)):c.lazyLoadTimer&&(clearInterval(c.lazyLoadTimer),delete c.lazyLoadTimer)}),f(k(c),"slideHandler",function(C){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=c.props,F=b.asNavFor,se=b.beforeChange,V=b.onLazyLoad,ae=b.speed,X=b.afterChange,ie=c.state.currentSlide,he=(0,i.slideHandler)(w(w(w({index:C},c.props),c.state),{},{trackRef:c.track,useCSS:c.props.useCSS&&!l})),le=he.state,ue=he.nextState;if(le){se&&se(ie,le.currentSlide);var Pe=le.lazyLoadedList.filter(function(Ae){return c.state.lazyLoadedList.indexOf(Ae)<0});V&&Pe.length>0&&V(Pe),!c.props.waitForAnimate&&c.animationEndCallback&&(clearTimeout(c.animationEndCallback),X&&X(ie),delete c.animationEndCallback),c.setState(le,function(){F&&c.asNavForIndex!==C&&(c.asNavForIndex=C,F.innerSlider.slideHandler(C)),ue&&(c.animationEndCallback=setTimeout(function(){var Ae=ue.animating,De=O(ue,["animating"]);c.setState(De,function(){c.callbackTimers.push(setTimeout(function(){return c.setState({animating:Ae})},10)),X&&X(le.currentSlide),delete c.animationEndCallback})},ae))})}}),f(k(c),"changeSlide",function(C){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=w(w({},c.props),c.state),F=(0,i.changeSlide)(b,C);if(!(F!==0&&!F)&&(l===!0?c.slideHandler(F,l):c.slideHandler(F),c.props.autoplay&&c.autoPlay("update"),c.props.focusOnSelect)){var se=c.list.querySelectorAll(".slick-current");se[0]&&se[0].focus()}}),f(k(c),"clickHandler",function(C){c.clickable===!1&&(C.stopPropagation(),C.preventDefault()),c.clickable=!0}),f(k(c),"keyHandler",function(C){var l=(0,i.keyHandler)(C,c.props.accessibility,c.props.rtl);l!==""&&c.changeSlide({message:l})}),f(k(c),"selectHandler",function(C){c.changeSlide(C)}),f(k(c),"disableBodyScroll",function(){var C=function(b){b=b||window.event,b.preventDefault&&b.preventDefault(),b.returnValue=!1};window.ontouchmove=C}),f(k(c),"enableBodyScroll",function(){window.ontouchmove=null}),f(k(c),"swipeStart",function(C){c.props.verticalSwiping&&c.disableBodyScroll();var l=(0,i.swipeStart)(C,c.props.swipe,c.props.draggable);l!==""&&c.setState(l)}),f(k(c),"swipeMove",function(C){var l=(0,i.swipeMove)(C,w(w(w({},c.props),c.state),{},{trackRef:c.track,listRef:c.list,slideIndex:c.state.currentSlide}));l&&(l.swiping&&(c.clickable=!1),c.setState(l))}),f(k(c),"swipeEnd",function(C){var l=(0,i.swipeEnd)(C,w(w(w({},c.props),c.state),{},{trackRef:c.track,listRef:c.list,slideIndex:c.state.currentSlide}));if(l){var b=l.triggerSlideHandler;delete l.triggerSlideHandler,c.setState(l),b!==void 0&&(c.slideHandler(b),c.props.verticalSwiping&&c.enableBodyScroll())}}),f(k(c),"touchEnd",function(C){c.swipeEnd(C),c.clickable=!0}),f(k(c),"slickPrev",function(){c.callbackTimers.push(setTimeout(function(){return c.changeSlide({message:"previous"})},0))}),f(k(c),"slickNext",function(){c.callbackTimers.push(setTimeout(function(){return c.changeSlide({message:"next"})},0))}),f(k(c),"slickGoTo",function(C){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(C=Number(C),isNaN(C))return"";c.callbackTimers.push(setTimeout(function(){return c.changeSlide({message:"index",index:C,currentSlide:c.state.currentSlide},l)},0))}),f(k(c),"play",function(){var C;if(c.props.rtl)C=c.state.currentSlide-c.props.slidesToScroll;else if((0,i.canGoNext)(w(w({},c.props),c.state)))C=c.state.currentSlide+c.props.slidesToScroll;else return!1;c.slideHandler(C)}),f(k(c),"autoPlay",function(C){c.autoplayTimer&&clearInterval(c.autoplayTimer);var l=c.state.autoplaying;if(C==="update"){if(l==="hovered"||l==="focused"||l==="paused")return}else if(C==="leave"){if(l==="paused"||l==="focused")return}else if(C==="blur"&&(l==="paused"||l==="hovered"))return;c.autoplayTimer=setInterval(c.play,c.props.autoplaySpeed+50),c.setState({autoplaying:"playing"})}),f(k(c),"pause",function(C){c.autoplayTimer&&(clearInterval(c.autoplayTimer),c.autoplayTimer=null);var l=c.state.autoplaying;C==="paused"?c.setState({autoplaying:"paused"}):C==="focused"?(l==="hovered"||l==="playing")&&c.setState({autoplaying:"focused"}):l==="playing"&&c.setState({autoplaying:"hovered"})}),f(k(c),"onDotsOver",function(){return c.props.autoplay&&c.pause("hovered")}),f(k(c),"onDotsLeave",function(){return c.props.autoplay&&c.state.autoplaying==="hovered"&&c.autoPlay("leave")}),f(k(c),"onTrackOver",function(){return c.props.autoplay&&c.pause("hovered")}),f(k(c),"onTrackLeave",function(){return c.props.autoplay&&c.state.autoplaying==="hovered"&&c.autoPlay("leave")}),f(k(c),"onSlideFocus",function(){return c.props.autoplay&&c.pause("focused")}),f(k(c),"onSlideBlur",function(){return c.props.autoplay&&c.state.autoplaying==="focused"&&c.autoPlay("blur")}),f(k(c),"render",function(){var C=(0,s.default)("slick-slider",c.props.className,{"slick-vertical":c.props.vertical,"slick-initialized":!0}),l=w(w({},c.props),c.state),b=(0,i.extractObject)(l,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),F=c.props.pauseOnHover;b=w(w({},b),{},{onMouseEnter:F?c.onTrackOver:null,onMouseLeave:F?c.onTrackLeave:null,onMouseOver:F?c.onTrackOver:null,focusOnSelect:c.props.focusOnSelect&&c.clickable?c.selectHandler:null});var se;if(c.props.dots===!0&&c.state.slideCount>=c.props.slidesToShow){var V=(0,i.extractObject)(l,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),ae=c.props.pauseOnDotsHover;V=w(w({},V),{},{clickHandler:c.changeSlide,onMouseEnter:ae?c.onDotsLeave:null,onMouseOver:ae?c.onDotsOver:null,onMouseLeave:ae?c.onDotsLeave:null}),se=t.default.createElement(a.Dots,V)}var X,ie,he=(0,i.extractObject)(l,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);he.clickHandler=c.changeSlide,c.props.arrows&&(X=t.default.createElement(d.PrevArrow,he),ie=t.default.createElement(d.NextArrow,he));var le=null;c.props.vertical&&(le={height:c.state.listHeight});var ue=null;c.props.vertical===!1?c.props.centerMode===!0&&(ue={padding:"0px "+c.props.centerPadding}):c.props.centerMode===!0&&(ue={padding:c.props.centerPadding+" 0px"});var Pe=w(w({},le),ue),Ae=c.props.touchMove,De={className:"slick-list",style:Pe,onClick:c.clickHandler,onMouseDown:Ae?c.swipeStart:null,onMouseMove:c.state.dragging&&Ae?c.swipeMove:null,onMouseUp:Ae?c.swipeEnd:null,onMouseLeave:c.state.dragging&&Ae?c.swipeEnd:null,onTouchStart:Ae?c.swipeStart:null,onTouchMove:c.state.dragging&&Ae?c.swipeMove:null,onTouchEnd:Ae?c.touchEnd:null,onTouchCancel:c.state.dragging&&Ae?c.swipeEnd:null,onKeyDown:c.props.accessibility?c.keyHandler:null},Oe={className:C,dir:"ltr",style:c.props.style};return c.props.unslick&&(De={className:"slick-list"},Oe={className:C}),t.default.createElement("div",Oe,c.props.unslick?"":X,t.default.createElement("div",y({ref:c.listRefHandler},De),t.default.createElement(o.Track,y({ref:c.trackRefHandler},b),c.props.children)),c.props.unslick?"":ie,c.props.unslick?"":se)}),c.list=null,c.track=null,c.state=w(w({},r.default),{},{currentSlide:c.props.initialSlide,targetSlide:c.props.initialSlide?c.props.initialSlide:0,slideCount:t.default.Children.count(c.props.children)}),c.callbackTimers=[],c.clickable=!0,c.debouncedResize=null;var fe=c.ssrInit();return c.state=w(w({},c.state),fe),c}return $(Z,[{key:"didPropsChange",value:function(c){for(var fe=!1,C=0,l=Object.keys(this.props);C<l.length;C++){var b=l[C];if(!c.hasOwnProperty(b)){fe=!0;break}if(!(u(c[b])==="object"||typeof c[b]=="function"||isNaN(c[b]))&&c[b]!==this.props[b]){fe=!0;break}}return fe||t.default.Children.count(this.props.children)!==t.default.Children.count(c.children)}}]),Z}(t.default.Component),Vr}var _s,Yi;function Gh(){if(Yi)return _s;Yi=1;var t=function(r){return r.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()}).toLowerCase()};return _s=t,_s}var ks,Vi;function Yh(){if(Vi)return ks;Vi=1;var t=Gh(),r=function(i){var o=/[height|width]$/;return o.test(i)},n=function(i){var o="",a=Object.keys(i);return a.forEach(function(d,v){var g=i[d];d=t(d),r(d)&&typeof g=="number"&&(g=g+"px"),g===!0?o+=d:g===!1?o+="not "+d:o+="("+d+": "+g+")",v<a.length-1&&(o+=" and ")}),o},s=function(i){var o="";return typeof i=="string"?i:i instanceof Array?(i.forEach(function(a,d){o+=n(a),d<i.length-1&&(o+=", ")}),o):n(i)};return ks=s,ks}var Os,Ji;function Vh(){if(Ji)return Os;Ji=1;function t(r){this.options=r,!r.deferSetup&&this.setup()}return t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(r){return this.options===r||this.options.match===r}},Os=t,Os}var Rs,Xi;function ja(){if(Xi)return Rs;Xi=1;function t(s,i){var o=0,a=s.length,d;for(o;o<a&&(d=i(s[o],o),d!==!1);o++);}function r(s){return Object.prototype.toString.apply(s)==="[object Array]"}function n(s){return typeof s=="function"}return Rs={isFunction:n,isArray:r,each:t},Rs}var zs,Ki;function Jh(){if(Ki)return zs;Ki=1;var t=Vh(),r=ja().each;function n(s,i){this.query=s,this.isUnconditional=i,this.handlers=[],this.mql=window.matchMedia(s);var o=this;this.listener=function(a){o.mql=a.currentTarget||a,o.assess()},this.mql.addListener(this.listener)}return n.prototype={constuctor:n,addHandler:function(s){var i=new t(s);this.handlers.push(i),this.matches()&&i.on()},removeHandler:function(s){var i=this.handlers;r(i,function(o,a){if(o.equals(s))return o.destroy(),!i.splice(a,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){r(this.handlers,function(s){s.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var s=this.matches()?"on":"off";r(this.handlers,function(i){i[s]()})}},zs=n,zs}var Es,Qi;function Xh(){if(Qi)return Es;Qi=1;var t=Jh(),r=ja(),n=r.each,s=r.isFunction,i=r.isArray;function o(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return o.prototype={constructor:o,register:function(a,d,v){var g=this.queries,u=v&&this.browserIsIncapable;return g[a]||(g[a]=new t(a,u)),s(d)&&(d={match:d}),i(d)||(d=[d]),n(d,function(y){s(y)&&(y={match:y}),g[a].addHandler(y)}),this},unregister:function(a,d){var v=this.queries[a];return v&&(d?v.removeHandler(d):(v.clear(),delete this.queries[a])),this}},Es=o,Es}var Ts,Zi;function Kh(){if(Zi)return Ts;Zi=1;var t=Xh();return Ts=new t,Ts}var eo;function Qh(){return eo||(eo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(vr()),n=Hh(),s=a(Yh()),i=a(pa()),o=pn();function a(x){return x&&x.__esModule?x:{default:x}}function d(x){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},d(x)}function v(){return v=Object.assign?Object.assign.bind():function(x){for(var f=1;f<arguments.length;f++){var S=arguments[f];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},v.apply(this,arguments)}function g(x,f){var S=Object.keys(x);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(x);f&&(P=P.filter(function(T){return Object.getOwnPropertyDescriptor(x,T).enumerable})),S.push.apply(S,P)}return S}function u(x){for(var f=1;f<arguments.length;f++){var S=arguments[f]!=null?arguments[f]:{};f%2?g(Object(S),!0).forEach(function(P){p(x,P,S[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(S)):g(Object(S)).forEach(function(P){Object.defineProperty(x,P,Object.getOwnPropertyDescriptor(S,P))})}return x}function y(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}function O(x,f){for(var S=0;S<f.length;S++){var P=f[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,j(P.key),P)}}function M(x,f,S){return f&&O(x.prototype,f),Object.defineProperty(x,"prototype",{writable:!1}),x}function _(x,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(f&&f.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),f&&w(x,f)}function w(x,f){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(P,T){return P.__proto__=T,P},w(x,f)}function z(x){var f=A();return function(){var P=B(x),T;if(f){var D=B(this).constructor;T=Reflect.construct(P,arguments,D)}else T=P.apply(this,arguments);return L(this,T)}}function L(x,f){if(f&&(d(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $(x)}function $(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function A(){try{var x=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A=function(){return!!x})()}function B(x){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},B(x)}function p(x,f,S){return f=j(f),f in x?Object.defineProperty(x,f,{value:S,enumerable:!0,configurable:!0,writable:!0}):x[f]=S,x}function j(x){var f=k(x,"string");return d(f)=="symbol"?f:String(f)}function k(x,f){if(d(x)!="object"||!x)return x;var S=x[Symbol.toPrimitive];if(S!==void 0){var P=S.call(x,f);if(d(P)!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(x)}var I=(0,o.canUseDOM)()&&Kh();t.default=function(x){_(S,x);var f=z(S);function S(P){var T;return y(this,S),T=f.call(this,P),p($(T),"innerSliderRefHandler",function(D){return T.innerSlider=D}),p($(T),"slickPrev",function(){return T.innerSlider.slickPrev()}),p($(T),"slickNext",function(){return T.innerSlider.slickNext()}),p($(T),"slickGoTo",function(D){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return T.innerSlider.slickGoTo(D,Z)}),p($(T),"slickPause",function(){return T.innerSlider.pause("paused")}),p($(T),"slickPlay",function(){return T.innerSlider.autoPlay("play")}),T.state={breakpoint:null},T._responsiveMediaHandlers=[],T}return M(S,[{key:"media",value:function(T,D){I.register(T,D),this._responsiveMediaHandlers.push({query:T,handler:D})}},{key:"componentDidMount",value:function(){var T=this;if(this.props.responsive){var D=this.props.responsive.map(function(re){return re.breakpoint});D.sort(function(re,c){return re-c}),D.forEach(function(re,c){var fe;c===0?fe=(0,s.default)({minWidth:0,maxWidth:re}):fe=(0,s.default)({minWidth:D[c-1]+1,maxWidth:re}),(0,o.canUseDOM)()&&T.media(fe,function(){T.setState({breakpoint:re})})});var Z=(0,s.default)({minWidth:D.slice(-1)[0]});(0,o.canUseDOM)()&&this.media(Z,function(){T.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(T){I.unregister(T.query,T.handler)})}},{key:"render",value:function(){var T=this,D,Z;this.state.breakpoint?(Z=this.props.responsive.filter(function(ae){return ae.breakpoint===T.state.breakpoint}),D=Z[0].settings==="unslick"?"unslick":u(u(u({},i.default),this.props),Z[0].settings)):D=u(u({},i.default),this.props),D.centerMode&&(D.slidesToScroll>1,D.slidesToScroll=1),D.fade&&(D.slidesToShow>1,D.slidesToScroll>1,D.slidesToShow=1,D.slidesToScroll=1);var re=r.default.Children.toArray(this.props.children);re=re.filter(function(ae){return typeof ae=="string"?!!ae.trim():!!ae}),D.variableWidth&&(D.rows>1||D.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),D.variableWidth=!1);for(var c=[],fe=null,C=0;C<re.length;C+=D.rows*D.slidesPerRow){for(var l=[],b=C;b<C+D.rows*D.slidesPerRow;b+=D.slidesPerRow){for(var F=[],se=b;se<b+D.slidesPerRow&&(D.variableWidth&&re[se].props.style&&(fe=re[se].props.style.width),!(se>=re.length));se+=1)F.push(r.default.cloneElement(re[se],{key:100*C+10*b+se,tabIndex:-1,style:{width:"".concat(100/D.slidesPerRow,"%"),display:"inline-block"}}));l.push(r.default.createElement("div",{key:10*C+b},F))}D.variableWidth?c.push(r.default.createElement("div",{key:C,style:{width:fe}},l)):c.push(r.default.createElement("div",{key:C},l))}if(D==="unslick"){var V="regular slider "+(this.props.className||"");return r.default.createElement("div",{className:V},re)}else c.length<=D.slidesToShow&&!D.infinite&&(D.unslick=!0);return r.default.createElement(n.InnerSlider,v({style:this.props.style,ref:this.innerSliderRefHandler},(0,o.filterSettings)(D)),c)}}]),S}(r.default.Component)}(js)),js}var to;function Zh(){return to||(to=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(Qh());function n(s){return s&&s.__esModule?s:{default:s}}t.default=r.default}(ys)),ys}var ef=Zh();const tf=nl(ef),ro=ot(et);ot(E);ot(N);ot(m);ot(vt);ot(dt);ot(gt);const rf=t=>{const r=[],n=[],s=[],i=[];if(t.attachments&&Array.isArray(t.attachments)&&t.attachments.forEach(o=>{const a=o.url||o.file_path;switch(o.file_type){case"image":n.push({id:o.id,url:a,mediaType:"image",original_name:o.original_name||o.original_filename||"Image"});break;case"video":r.push({id:o.id,url:a,mediaType:"video",original_name:o.original_name||o.original_filename||"Video"});break;default:s.push({id:o.id,url:a,name:o.original_name||o.original_filename||"Document",size:o.size||o.file_size||0,mediaType:"document",mime_type:o.mime_type})}}),t.videos&&Array.isArray(t.videos)?r.push(...t.videos.map(o=>({...o,mediaType:"video"}))):t.media&&t.mediaType==="video"&&r.push({id:"main-video",url:t.media,mediaType:"video"}),t.images&&Array.isArray(t.images))n.push(...t.images.map(o=>({...o,mediaType:"image"})));else if(t.imageUrl||t.media&&t.mediaType!=="video"){const o=t.imageUrl||t.media;o&&!n.some(a=>a.url===o)&&n.push({id:"main-image",url:o,mediaType:"image"})}if(t.documents&&Array.isArray(t.documents)?s.push(...t.documents.map(o=>({...o,mediaType:"document"}))):t.file&&s.push({id:"main-doc",url:t.file,name:t.original_name||"Document",size:t.fileSize||0,mediaType:"document"}),t.polls){const o=Array.isArray(t.polls)?t.polls:[t.polls];i.push(...o.map(a=>({id:a.id,question:a.question,options:(a.options||[]).map(d=>{var v,g,u,y;return{id:d.id,text:(g=(v=d.option_text)!=null?v:d.text)!=null?g:"",votes:(y=(u=d.vote_count)!=null?u:d.votes)!=null?y:0}}),mediaType:"poll"})))}else t.hasPoll&&i.push({id:"main-poll",question:t.pollQuestion||"Poll",options:(t.pollOptions||[]).map((o,a)=>{var d,v,g,u,y;return{id:(d=o.id)!=null?d:a,text:(g=(v=o.option_text)!=null?v:o.text)!=null?g:String(o),votes:(y=(u=o.vote_count)!=null?u:o.votes)!=null?y:0}}),mediaType:"poll"});return{videos:r,images:n,documents:s,polls:i,all:[...r,...n,...s,...i]}},nf=t=>{const{className:r,style:n,onClick:s}=t;return e.jsx(E,{className:r,style:{...n,left:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:s})},sf=t=>{const{className:r,style:n,onClick:s}=t;return e.jsx(E,{className:r,style:{...n,right:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:s})},no=h.memo(({resource:t,onCardClick:r,onBookmark:n,onUpvote:s,onEdit:i,onDelete:o,currentUser:a,cardBg:d,textColor:v,mutedText:g,borderColor:u})=>{var De,Oe,qe,Ge;if(!t)return e.jsx(ro,{p:5,borderWidth:"1px",borderRadius:"lg",borderColor:u,bg:d,textAlign:"center",h:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(m,{color:g,children:"This saved resource is no longer available."})});const y=St(),[O,M]=h.useState(0),[_,w]=h.useState(!1),[z,L]=h.useState(t.is_upvoted||!1),[$,A]=h.useState(t.upvote_count||0),[B,p]=h.useState(!1),[j,k]=h.useState({}),[I,x]=h.useState({}),[f,S]=h.useState(!1),[P,T]=h.useState([]),D=Q=>{var ee;return{id:Q.id,question:Q.question,options:(Q.options||[]).map(ze=>{var Le,Ve,Ze,st,me;return{id:ze.id,text:(Ve=(Le=ze.option_text)!=null?Le:ze.text)!=null?Ve:"",votes:(st=(Ze=ze.vote_count)!=null?Ze:ze.votes)!=null?st:0,is_selected:(me=ze.is_selected)!=null?me:!1}}),user_option_id:(ee=Q.user_option_id)!=null?ee:null}};h.useEffect(()=>{if(!t)return;let Q=[];Array.isArray(t.polls)?Q=t.polls.map(D):t.polls&&(Q=[D(t.polls)]),T(Q);const ee={},ze={};Q.forEach(Le=>{var Ze;const Ve=Le.user_option_id||((Ze=Le.options.find(st=>st.is_selected))==null?void 0:Ze.id);Ve&&(ee[Le.id]=Ve,ze[Le.id]=!0)}),k(ee),x(ze)},[t]);const[Z,re]=h.useState(!1),c=Lt();h.useEffect(()=>{const Q=$o(),ee=Q&&t.user&&Q.id&&String(Q.id)===String(t.user.id),ze=Q&&["admin","moderator"].includes(Q.primary_role||Q.role);re(ee||ze)},[t]);const[fe,C]=h.useState(null),l=h.useRef(),[b,F]=h.useState(!1);pt();const se=async()=>{var Q,ee;if(t.id){p(!0);try{await ua(t.id),S(!1),y({title:"Resource deleted",description:"The resource has been successfully deleted.",status:"success",duration:3e3,isClosable:!0}),o&&o(t.id)}catch(ze){console.error("Error deleting resource:",ze),y({title:"Delete failed",description:((ee=(Q=ze.response)==null?void 0:Q.data)==null?void 0:ee.message)||"Failed to delete the resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}finally{p(!1)}}},{videos:V,images:ae,documents:X,polls:ie,all:he}=h.useMemo(()=>rf(t),[t]),le={dots:!0,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:V.length+ae.length>1,prevArrow:V.length+ae.length>1?e.jsx(nf,{}):null,nextArrow:V.length+ae.length>1?e.jsx(sf,{}):null},ue=V.length+ae.length+X.length+ie.length,Pe=Q=>!Q||isNaN(Q)?"":Q<1024?Q+" B":Q<1048576?(Q/1024).toFixed(1)+" KB":(Q/1048576).toFixed(1)+" MB",Ae=Q=>{if(!Q)return"Just now";const ee=new Date,ze=new Date(Q);if(isNaN(ze.getTime()))return"Just now";const Le=Math.floor((ee-ze)/1e3),Ve=Math.floor(Le/60),Ze=Math.floor(Ve/60),st=Math.floor(Ze/24),me=ze.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(Le<60)return"Just now";if(Ve<60)return`${Ve} ${Ve===1?"minute":"minutes"} ago`;if(Ze<24)return`${Ze} ${Ze===1?"hour":"hours"} ago`;if(st===1)return`Yesterday at ${me}`;if(st<7)return`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][ze.getDay()]} at ${me}`;const Y=ee.getFullYear(),U=ze.getFullYear();return Y===U?`${["January","February","March","April","May","June","July","August","September","October","November","December"][ze.getMonth()]} ${ze.getDate()} at ${me}`:`${ze.toLocaleDateString([],{month:"long",day:"numeric",year:"numeric"})} at ${me}`};return e.jsxs(ro,{bg:R("white","gray.800"),borderRadius:"2xl",borderWidth:"1px",borderColor:R("rgba(226, 232, 240, 0.8)","gray.700"),overflow:"hidden",width:"100%",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.05)",_hover:{boxShadow:"0px 8px 24px rgba(0, 0, 0, 0.08)",transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx(ln,{p:4,pb:0,children:e.jsxs(N,{align:"center",justify:"space-between",children:[e.jsxs(N,{align:"center",gap:3,children:[e.jsx(gt,{size:"md",src:(De=t.user)==null?void 0:De.avatar_url,name:t.user?`${t.user.first_name} ${t.user.last_name}`:"Anonymous",cursor:"pointer",onClick:Q=>{Q.stopPropagation(),t.user&&t.user.id&&c(`/user/${t.user.id}`)}}),e.jsxs(E,{children:[e.jsxs(N,{align:"center",gap:2,mb:1,children:[e.jsx(m,{fontWeight:"bold",fontSize:"md",cursor:"pointer",onClick:Q=>{Q.stopPropagation(),t.user&&t.user.id&&c(`/user/${t.user.id}`)},children:t.user?t.user.id===a.id?"You":`${t.user.first_name} ${t.user.last_name}`:"Anonymous"}),(((Oe=t.user)==null?void 0:Oe.primary_role)==="admin"||((qe=t.user)==null?void 0:qe.primary_role)==="moderator")&&e.jsx(Tn,{size:"16px",bg:"blue.500",color:"white",children:e.jsx(wr,{size:"10px"})})]}),e.jsxs(N,{align:"center",gap:2,fontSize:"sm",color:g,children:[e.jsx(m,{children:Ae(t.created_at||t.dateAdded)}),((Ge=t.course)==null?void 0:Ge.code)&&e.jsx(Wt,{size:"sm",colorScheme:"blue",variant:"subtle",borderRadius:"full",children:t.course.code})]})]})]}),Z&&e.jsxs(Tt,{placement:"bottom-end",onClick:Q=>Q.stopPropagation(),children:[e.jsx(Pt,{as:Ke,icon:e.jsx(Qo,{}),variant:"ghost",size:"sm",borderRadius:"full"}),e.jsxs(At,{shadow:"lg",borderRadius:"xl",children:[e.jsx(Qe,{icon:e.jsx(hd,{}),onClick:Q=>{if(Q.stopPropagation(),console.log("Editing resource with attachments:",t.attachments),C({title:t.title,description:t.description,attachments:t.attachments||[]}),i){const ee={...t,attachments:t.attachments||[]};i(ee)}},children:"Edit resource"}),e.jsx(Qe,{icon:e.jsx(is,{}),onClick:Q=>{Q.stopPropagation(),S(!0)},children:"Delete resource"})]})]})]})}),e.jsxs(It,{p:4,pt:3,children:[e.jsxs(E,{mb:3,lineHeight:"1.5",children:[e.jsx(Ee,{as:"h3",fontSize:"lg",fontWeight:"semibold",mb:2,color:R("blue.700","blue.300"),cursor:"pointer",onClick:()=>r(t.id),_hover:{textDecoration:"underline"},children:t.title}),e.jsx(m,{fontSize:"md",cursor:"pointer",onClick:()=>r(t.id),children:t.description})]}),ue>0&&e.jsxs(E,{mb:4,borderRadius:"xl",overflow:"hidden",children:[(V.length>0||ae.length>0)&&e.jsx(E,{mb:3,maxH:"400px",overflow:"hidden",children:e.jsx(tf,{...le,style:{position:"relative",zIndex:0},children:[...V,...ae].map((Q,ee)=>e.jsx(E,{position:"relative",height:"400px",children:Q.mediaType==="video"?e.jsx(E,{height:"400px",width:"100%",bg:"black",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx("video",{src:Q.url,controls:!0,style:{maxWidth:"100%",maxHeight:"400px",objectFit:"contain"}})}):e.jsx(E,{height:"400px",width:"100%",bg:"gray.100",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",children:e.jsx(vt,{src:Q.url,alt:Q.original_name||`Image ${ee+1}`,maxH:"400px",maxW:"100%",objectFit:"contain"})})},Q.id||ee))})}),X.length>0&&e.jsxs(de,{spacing:2,mb:3,align:"stretch",children:[X.slice(0,2).map((Q,ee)=>e.jsxs(N,{p:3,bg:R("gray.50","gray.700"),borderRadius:"lg",align:"center",cursor:"pointer",_hover:{bg:R("gray.100","gray.600")},children:[e.jsx(Tn,{size:"40px",bg:"blue.100",color:"blue.600",mr:3,children:e.jsx(br,{size:20})}),e.jsxs(E,{flex:"1",children:[e.jsx(m,{fontWeight:"medium",fontSize:"sm",children:Q.name||`Document ${ee+1}`}),e.jsx(m,{fontSize:"xs",color:g,children:Pe(Q.size)})]})]},Q.id||`doc-${ee}`)),X.length>2&&e.jsxs(m,{fontSize:"sm",color:g,textAlign:"center",children:["+",X.length-2," more"]})]}),P.length>0&&e.jsx(E,{children:P.slice(0,1).map((Q,ee)=>{var st,me;const ze=Q.id||`poll-${ee}`,Le=((st=Q.options)==null?void 0:st.reduce((Y,U)=>Y+(U.votes||0),0))||0;I[ze];const Ve=j[ze],Ze=async Y=>{try{const{message:U,poll:J}=await da(Y),ne={id:J.id,question:J.question,options:(J.options||[]).map(K=>{var te,pe,ve,ge;return{id:K.id,text:(pe=(te=K.option_text)!=null?te:K.text)!=null?pe:"",votes:(ge=(ve=K.vote_count)!=null?ve:K.votes)!=null?ge:0}})};T(K=>K.map(te=>te.id===ne.id?ne:te)),U.startsWith("Vote removed")?(k(K=>({...K,[J.id]:null})),x(K=>({...K,[J.id]:!1}))):(k(K=>({...K,[J.id]:Y})),x(K=>({...K,[J.id]:!0}))),y({title:U,status:"success",duration:2e3,isClosable:!0})}catch(U){console.error("Vote error",U),y({title:"Failed to record vote",description:U.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}};return e.jsxs(E,{bg:R("gray.50","gray.700"),p:4,borderRadius:"xl",onClick:Y=>Y.stopPropagation(),children:[e.jsx(m,{fontWeight:"semibold",mb:3,children:Q.question}),e.jsx(de,{spacing:2,align:"stretch",children:(me=Q.options)==null?void 0:me.map((Y,U)=>{const J=Y.id||`option-${U}`,ne=Ve===J,K=Y.votes||0,te=Le>0?Math.round(K/Le*100):0;return e.jsxs(E,{position:"relative",p:3,borderRadius:"lg",cursor:"pointer",onClick:()=>Ze(J),bg:R("white","gray.800"),border:"2px solid",borderColor:ne?"blue.400":"transparent",_hover:{borderColor:ne?"blue.500":R("gray.200","gray.600")},children:[e.jsx(E,{position:"absolute",left:0,top:0,bottom:0,width:`${te}%`,bg:ne?"blue.100":R("gray.100","gray.700"),opacity:.3,borderRadius:"lg"}),e.jsxs(N,{justify:"space-between",align:"center",position:"relative",children:[e.jsx(m,{children:Y.text}),e.jsxs(m,{fontWeight:"bold",color:ne?"blue.500":g,children:[te,"%"]})]})]},J)})}),e.jsxs(m,{fontSize:"sm",color:g,mt:2,textAlign:"center",children:[Le," ",Le===1?"vote":"votes"]})]},ze)})})]})]}),e.jsx(Ir,{p:4,pt:0,children:e.jsxs(de,{width:"100%",spacing:2,align:"stretch",children:[e.jsxs(N,{justify:"space-between",align:"center",width:"100%",children:[e.jsxs(Te,{spacing:4,children:[e.jsxs(Te,{spacing:1.5,align:"center",children:[e.jsx(Fe,{as:kd,boxSize:5,color:t.is_upvoted?"red.500":"inherit",fill:t.is_upvoted?"currentColor":"none",cursor:"pointer",onClick:Q=>{Q.stopPropagation(),s(t.id)}}),e.jsx(m,{fontSize:"sm",fontWeight:"medium",children:t.upvote_count||0})]}),e.jsxs(Te,{spacing:1.5,align:"center",children:[e.jsx(Fe,{as:Us,boxSize:5}),e.jsx(m,{fontSize:"sm",fontWeight:"medium",children:t.comment_count||0})]}),e.jsxs(Tt,{placement:"top",isLazy:!0,children:[e.jsx(Pt,{as:Ke,icon:e.jsx(ss,{}),variant:"ghost",size:"sm",p:0,minW:"auto","aria-label":"Share options",onClick:Q=>Q.stopPropagation()}),e.jsxs(At,{shadow:"lg",borderRadius:"xl",p:4,children:[e.jsx(m,{fontWeight:"semibold",mb:3,children:"Share this post"}),e.jsxs(Ht,{columns:2,spacing:3,children:[e.jsxs(de,{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/resources/${t.id}`),y({title:"Link copied!",status:"success",duration:2e3})},cursor:"pointer",p:2,borderRadius:"lg",_hover:{bg:R("gray.100","gray.700")},children:[e.jsx(E,{dangerouslySetInnerHTML:{__html:Li.copy}}),e.jsx(m,{fontSize:"xs",children:"Copy Link"})]}),e.jsxs(de,{onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(`Check out: ${t.title} ${window.location.origin}/resources/${t.id}`)}`,"_blank"),cursor:"pointer",p:2,borderRadius:"lg",_hover:{bg:R("gray.100","gray.700")},children:[e.jsx(E,{dangerouslySetInnerHTML:{__html:Li.whatsapp}}),e.jsx(m,{fontSize:"xs",children:"WhatsApp"})]})]})]})]})]}),e.jsx(Ke,{icon:e.jsx(rn,{fill:t.is_saved?"currentColor":"none"}),variant:"ghost",size:"lg",p:0,minW:"auto",color:t.is_saved?"blue.500":g,onClick:Q=>{Q.stopPropagation(),n(t.id,t.title)},"aria-label":"Bookmark"})]}),e.jsx(cn,{isOpen:f,leastDestructiveRef:l,onClose:()=>S(!1),children:e.jsx(at,{children:e.jsxs(dn,{children:[e.jsx(ut,{fontSize:"lg",fontWeight:"bold",children:"Delete Resource"}),e.jsx(lt,{children:"Are you sure you want to delete this resource? This action cannot be undone."}),e.jsxs(xt,{children:[e.jsx(G,{ref:l,onClick:()=>S(!1),children:"Cancel"}),e.jsx(G,{colorScheme:"red",onClick:se,ml:3,isLoading:B,loadingText:"Deleting",children:"Delete"})]})]})})}),t.viewCount&&e.jsxs(m,{fontSize:"sm",color:g,children:[t.viewCount," views"]})]})})]})}),of=({resources:t,onBookmark:r,onUpvote:n,currentUser:s,onShare:i,onAddComment:o,onFollow:a,onCardClick:d,onEdit:v,onDelete:g,cardBg:u,textColor:y,mutedText:O,borderColor:M,isLoading:_,feedType:w})=>{if(_)return e.jsx(de,{spacing:6,align:"stretch",w:"full",children:[1,2,3].map(A=>e.jsxs(E,{as:ot.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{delay:A*.1}},bg:R("rgba(255, 255, 255, 0.7)","rgba(45, 55, 72, 0.7)"),backdropFilter:"blur(10px)",borderRadius:"24px",borderWidth:"1px",borderColor:R("brand.navy","rgba(74, 85, 104, 0.3)"),p:6,w:"full",overflow:"hidden",boxShadow:"0 10px 30px -15px rgba(0, 0, 0, 0.1)",children:[e.jsxs(Te,{mb:4,children:[e.jsx(yt,{height:"40px",width:"40px",borderRadius:"full"}),e.jsxs(de,{align:"start",spacing:2,flex:1,children:[e.jsx(yt,{height:"10px",width:"120px"}),e.jsx(yt,{height:"8px",width:"80px"})]})]}),e.jsx(yt,{height:"16px",width:"70%",mb:4}),e.jsx(yt,{height:"12px",width:"90%",mb:2}),e.jsx(yt,{height:"12px",width:"60%",mb:4}),e.jsx(yt,{height:"200px",width:"100%",borderRadius:"xl",mb:4}),e.jsxs(Te,{spacing:4,justify:"space-between",children:[e.jsxs(Te,{children:[e.jsx(yt,{height:"30px",width:"30px",borderRadius:"full"}),e.jsx(yt,{height:"30px",width:"30px",borderRadius:"full"}),e.jsx(yt,{height:"30px",width:"30px",borderRadius:"full"})]}),e.jsx(yt,{height:"10px",width:"60px"})]})]},A))});const z={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1,duration:.5}}},L={hidden:{opacity:0,y:20,scale:.98},show:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:260,damping:20,duration:.5}}},$=w==="grid"?e.jsx(E,{w:"full",position:"relative",as:ot.div,variants:z,initial:"hidden",animate:"show",children:e.jsx(Ht,{columns:{base:1,sm:2,lg:3},spacing:"20px",children:t&&t.map((A,B)=>e.jsx(E,{as:ot.div,variants:L,gridRow:B%5===0?"span 2":"span 1",gridColumn:B%7===0?"span 2":"span 1",zIndex:100-B,transformOrigin:"center",children:e.jsx(no,{resource:A,onBookmark:r,onUpvote:n,currentUser:s,onCardClick:d,onEdit:v,onDelete:g,onShare:i,onAddComment:o,onFollow:a,cardBg:u,textColor:y,mutedText:O,borderColor:M})},A.id))})}):e.jsx(de,{spacing:8,align:"stretch",w:"full",as:ot.div,variants:z,initial:"hidden",animate:"show",children:t&&t.map((A,B)=>e.jsx(E,{as:ot.div,variants:L,transformOrigin:"center",children:e.jsx(no,{resource:A,onBookmark:r,onUpvote:n,currentUser:s,onCardClick:d,onEdit:v,onDelete:g,onAddComment:o,onFollow:a,cardBg:u,textColor:y,mutedText:O,borderColor:M})},A.id))});return e.jsx(E,{w:"full",children:_?e.jsx(E,{}):t&&t.length>0?$:e.jsx(E,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:R("rgba(226, 232, 240, 0.8)","rgba(74, 85, 104, 0.3)"),borderRadius:"2xl",bg:R("rgba(255, 255, 255, 0.6)","rgba(45, 55, 72, 0.6)"),backdropFilter:"blur(8px)",boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.05)",as:ot.div,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(de,{spacing:4,children:[e.jsx(E,{p:4,borderRadius:"full",bg:R("gray.50","gray.700"),boxShadow:"inner",children:e.jsx(Dr,{size:30,color:R("#A0AEC0","#718096")})}),e.jsx(m,{color:O,fontSize:"lg",children:"No resources found matching your filters"}),e.jsx(m,{color:O,fontSize:"sm",children:"Try adjusting your search or filters"})]})})})},af=({searchQuery:t,facultyFilter:r,setFacultyFilter:n,courseFilter:s,setCourseFilter:i,majorFilter:o,setMajorFilter:a,faculties:d,majors:v,courses:g,coursePagination:u,onCoursePageChange:y,isLoadingFilters:O,onClearFilters:M,mutedText:_})=>{R("blue.50","blue.900"),R("blue.100","blue.800"),R("gray.100","gray.700");const w=t!==""||r!=="All"||s!=="All"||o!=="All",z=A=>{var B;return((B=d.find(p=>p.id===A))==null?void 0:B.name)||"Faculty"},L=A=>{var B;return((B=v.find(p=>p.id===A))==null?void 0:B.name)||"Major"},$=A=>{var B;return((B=g.find(p=>p.id===A))==null?void 0:B.title)||"Course"};return e.jsxs(N,{direction:"column",w:"full",gap:3,children:[e.jsxs(N,{justify:"space-between",align:"center",w:"full",mb:2,children:[e.jsxs(Te,{children:[e.jsx(Fe,{as:ns}),e.jsx(m,{fontWeight:"medium",children:"Filters"}),O&&e.jsx(_t,{size:"sm",ml:2}),w&&!O&&e.jsx(dt,{ml:1,colorScheme:"blue",borderRadius:"full",px:2,children:(t?1:0)+(r!=="All"?1:0)+(s!=="All"?1:0)+(o!=="All"?1:0)})]}),w&&e.jsx(G,{size:"xs",variant:"ghost",colorScheme:"blue",onClick:M,children:"Clear All"})]}),e.jsxs(N,{direction:{base:"column",md:"row"},gap:3,mb:2,children:[e.jsxs(Tt,{children:[e.jsx(Pt,{as:G,rightIcon:e.jsx(ur,{}),w:"full",isDisabled:O,children:r==="All"?"Faculty":z(r)}),e.jsxs(At,{children:[e.jsx(Qe,{onClick:()=>n("All"),children:"All Faculties"}),d&&d.map(A=>e.jsx(Qe,{onClick:()=>n(A.id),children:A.name},A.id))]})]}),e.jsxs(Tt,{children:[e.jsx(Pt,{as:G,rightIcon:e.jsx(ur,{}),w:"full",isDisabled:O||r==="All",children:o==="All"?"Major":L(o)}),e.jsxs(At,{children:[e.jsx(Qe,{onClick:()=>a("All"),children:"All Majors"}),v&&v.map(A=>e.jsx(Qe,{onClick:()=>a(A.id),children:A.name},A.id))]})]}),e.jsxs(Tt,{children:[e.jsx(Pt,{as:G,rightIcon:e.jsx(ur,{}),w:"full",isDisabled:O||o==="All",children:s==="All"?"Course":$(s)}),e.jsxs(At,{children:[e.jsx(Qe,{onClick:()=>i("All"),children:"All Courses"}),g&&g.map(A=>e.jsx(Qe,{onClick:()=>i(A.id),children:A.title},A.id)),u&&u.last_page>1&&e.jsx(E,{px:3,py:2,children:e.jsxs(N,{justify:"space-between",align:"center",children:[e.jsx(G,{size:"sm",onClick:()=>y(u.current_page-1),isDisabled:u.current_page===1,children:"Prev"}),e.jsxs(m,{fontSize:"sm",children:["Page ",u.current_page," of ",u.last_page]}),e.jsx(G,{size:"sm",onClick:()=>y(u.current_page+1),isDisabled:u.current_page===u.last_page,children:"Next"})]})})]})]})]}),w&&e.jsx(E,{mt:3,children:e.jsxs(Ua,{spacing:2,children:[r!=="All"&&e.jsx(gn,{children:e.jsxs(Wt,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"green",children:[e.jsx(xn,{children:e.jsxs(Te,{spacing:1,children:[e.jsx(m,{fontSize:"xs",children:"Faculty:"}),e.jsx(m,{fontSize:"sm",fontWeight:"medium",children:z(r)})]})}),e.jsx(ds,{onClick:()=>n("All")})]})}),o!=="All"&&e.jsx(gn,{children:e.jsxs(Wt,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"purple",children:[e.jsx(xn,{children:e.jsxs(Te,{spacing:1,children:[e.jsx(m,{fontSize:"xs",children:"Major:"}),e.jsx(m,{fontSize:"sm",fontWeight:"medium",children:L(o)})]})}),e.jsx(ds,{onClick:()=>a("All")})]})}),s!=="All"&&e.jsx(gn,{children:e.jsxs(Wt,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"orange",children:[e.jsx(xn,{children:e.jsxs(Te,{spacing:1,children:[e.jsx(m,{fontSize:"xs",children:"Course:"}),e.jsx(m,{fontSize:"sm",fontWeight:"medium",children:$(s)})]})}),e.jsx(ds,{onClick:()=>i("All")})]})}),t&&e.jsx(gn,{children:e.jsx(Wt,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"purple",children:e.jsx(xn,{children:e.jsxs(Te,{spacing:1,children:[e.jsx(m,{fontSize:"xs",children:"Search:"}),e.jsxs(m,{fontSize:"sm",fontWeight:"medium",children:['"',t,'"']})]})})})})]})})]})},lf=({limit:t})=>{const[r,n]=h.useState([]),[s,i]=h.useState(!0),[o,a]=h.useState(null);Lt();const{isOpen:d,onOpen:v,onClose:g}=pt(),u=R("white","gray.800"),y=R("brand.navy","gray.700"),O=R("brand.navy","blue.300"),M=R("gray.700","gray.300"),_=R("linear-gradient(to bottom, white, blue.50)","linear-gradient(to bottom, gray.800, gray.900)");return h.useEffect(()=>{(async()=>{i(!0);try{const L=(await fa(t)).data||[];n(L)}catch(z){console.error("Error fetching top contributors:",z),a("Failed to load top contributors")}finally{i(!1)}})()},[t]),o?e.jsxs(E,{p:4,bg:u,borderRadius:"md",boxShadow:"sm",border:"1px",borderColor:y,children:[e.jsx(Ee,{size:"sm",mb:3,color:"red.500",children:"Error"}),e.jsx(m,{fontSize:"sm",children:o})]}):e.jsxs(E,{p:4,bg:_,borderRadius:"lg",boxShadow:"md",border:"1px",borderColor:y,position:"sticky",top:"20px",children:[e.jsxs(N,{align:"center",justify:"center",mb:4,gap:2,children:[e.jsx(Ee,{size:"md",color:O,children:"Top Contributors"}),e.jsx(Ar,{label:"How scoring works",children:e.jsx(Ke,{icon:e.jsx(Xo,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:v,"aria-label":"Contribution scoring info"})})]}),s?e.jsx(de,{spacing:4,align:"stretch",children:[...Array(t)].map((w,z)=>e.jsxs(Te,{spacing:3,children:[e.jsx($a,{size:"10"}),e.jsx(E,{flex:"1",children:e.jsx(ho,{noOfLines:2,spacing:"2"})})]},z))}):e.jsx(de,{spacing:3,align:"stretch",children:r.length===0?e.jsx(m,{fontSize:"sm",textAlign:"center",color:M,children:"No contributors found"}):r.map((w,z)=>e.jsxs(E,{p:3,borderRadius:"md",bg:z===0?"yellow.100":z===1?"gray.100":z===2?"orange.100":"transparent",_dark:{bg:z===0?"yellow.900":z===1?"gray.700":z===2?"orange.900":"transparent"},_hover:{transform:"translateY(-2px)",transition:"transform 0.2s"},children:[e.jsxs(Te,{spacing:3,children:[e.jsx(gt,{size:"sm",name:`${w.first_name} ${w.last_name}`,src:w.avatar_url,border:z<3?"2px solid":"none",borderColor:z===0?"yellow.500":z===1?"gray.400":z===2?"orange.500":"transparent"}),e.jsxs(de,{spacing:1,align:"start",flex:"1",children:[e.jsxs(Te,{children:[e.jsxs(m,{fontWeight:"medium",fontSize:"sm",children:[w.first_name," ",w.last_name]}),z<3&&e.jsxs(dt,{colorScheme:z===0?"yellow":z===1?"gray":"orange",variant:"solid",fontSize:"xs",children:["#",z+1]})]}),e.jsx(m,{fontSize:"xs",color:"gray.500",_dark:{color:"gray.400"},children:w.major_name?` ${w.major_name}`:""})]})]}),e.jsx(Te,{mt:2,spacing:4,fontSize:"xs",color:"gray.500",children:e.jsxs(dt,{colorScheme:"blue",variant:"outline",ml:"auto",children:["Score: ",w.contribution_score]})})]},w.id))}),e.jsxs(kt,{isOpen:d,onClose:g,size:"lg",children:[e.jsx(at,{}),e.jsxs(Ot,{children:[e.jsx(ut,{color:O,children:" Contribution Scoring System"}),e.jsx(wt,{}),e.jsx(lt,{pb:6,children:e.jsxs(de,{align:"stretch",spacing:4,children:[e.jsxs(E,{children:[e.jsx(m,{fontWeight:"bold",mb:3,children:"How Points Are Earned:"}),e.jsxs(de,{align:"stretch",spacing:0,children:[e.jsxs(N,{justify:"space-between",py:2,children:[e.jsx(m,{children:"Approved Resource"}),e.jsx(m,{fontWeight:"bold",color:"blue.500",children:"+5 pts"})]}),e.jsx(Et,{}),e.jsxs(N,{justify:"space-between",py:2,children:[e.jsx(m,{children:"Resource Upvote"}),e.jsx(m,{fontWeight:"bold",color:"blue.500",children:"+3 pts"})]}),e.jsx(Et,{}),e.jsxs(N,{justify:"space-between",py:2,children:[e.jsx(m,{children:"Comment Posted"}),e.jsx(m,{fontWeight:"bold",color:"blue.500",children:"+2 pts"})]}),e.jsx(Et,{}),e.jsxs(N,{justify:"space-between",py:2,children:[e.jsx(m,{children:"Comment Upvote"}),e.jsx(m,{fontWeight:"bold",color:"blue.500",children:"+1 pt"})]}),e.jsx(Et,{}),e.jsxs(N,{justify:"space-between",py:2,children:[e.jsx(m,{children:"Profile Upvote"}),e.jsx(m,{fontWeight:"bold",color:"blue.500",children:"+5 pts"})]})]})]}),e.jsxs(E,{children:[e.jsx(m,{fontWeight:"bold",mb:2,children:" Tips to Rank Higher:"}),e.jsxs(de,{align:"stretch",spacing:1,fontSize:"sm",children:[e.jsxs(m,{children:[" ",e.jsx("b",{children:"Share"})," high-quality, helpful resources"]}),e.jsxs(m,{children:[" ",e.jsx("b",{children:"Engage"})," with the community through comments"]}),e.jsxs(m,{children:[" ",e.jsx("b",{children:"Build"})," your reputation with valuable contributions"]})]})]}),e.jsx(E,{bg:"blue.50",_dark:{bg:"blue.900"},p:3,borderRadius:"md",children:e.jsx(m,{fontSize:"sm",textAlign:"center",children:"The best contributors combine quality content with active community engagement! "})})]})})]})]})]})},an=async(t={})=>(await we.get("/courses",{params:t})).data,cf=({handleImageUpload:t,handleVideoUpload:r,handleDocumentUpload:n,handlePollAdd:s})=>{const i=h.useRef(null),o=h.useRef(null),a=h.useRef(null),d=R("gray.200","gray.600"),v=R("gray.50","gray.700");R("blue.500","blue.200");const g=[{type:"images",icon:Wn,label:"Photo",ref:i,accept:"image/*",handler:t},{type:"videos",icon:ri,label:"Video",ref:o,accept:"video/*",handler:r},{type:"documents",icon:br,label:"Document",ref:a,accept:".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx",handler:n},{type:"poll",icon:en,label:"Poll",handler:s}];return e.jsxs(e.Fragment,{children:[e.jsx(Et,{my:4,borderColor:d}),e.jsx(Te,{spacing:2,justify:"space-between",children:e.jsx(N,{children:g.map(u=>e.jsx(tr.Fragment,{children:u.ref?e.jsxs(e.Fragment,{children:[e.jsx(G,{size:"sm",leftIcon:e.jsx(Fe,{as:u.icon}),variant:"ghost",colorScheme:"blue",onClick:()=>{var y;return(y=u.ref.current)==null?void 0:y.click()},_hover:{bg:v},px:3,children:u.label}),e.jsx("input",{type:"file",multiple:!0,hidden:!0,ref:u.ref,accept:u.accept,onChange:u.handler})]}):e.jsx(G,{size:"sm",leftIcon:e.jsx(Fe,{as:u.icon}),variant:"ghost",colorScheme:"blue",onClick:u.handler,_hover:{bg:v},px:3,children:u.label})},u.type))})})]})},Rr=t=>{const r=t.images||[],n=t.videos||[],s=t.documents||[],i=t.polls||[];return[...r.map(a=>({...a,mediaType:"image"})),...n.map(a=>({...a,mediaType:"video"})),...s.map(a=>({...a,mediaType:"document"})),...i.map(a=>({...a,mediaType:"poll"}))].sort((a,d)=>{if(!a.id||!d.id)return 0;let v=0,g=0;try{typeof a.id=="string"&&a.id.includes("-")&&(v=parseInt(a.id.split("-")[1])||0),typeof d.id=="string"&&d.id.includes("-")&&(g=parseInt(d.id.split("-")[1])||0)}catch(u){console.error("Error parsing attachment ID:",u)}return g-v})},so=t=>t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB",df=({attachments:t,removeAttachment:r})=>{const n=R("gray.200","gray.600"),s=R("gray.50","gray.700"),i=tr.useMemo(()=>{var a;return[t.images.length>0,t.videos.length>0,t.documents.length>0,((a=t.polls)==null?void 0:a.length)>0].filter(Boolean).length>1},[t]);return t.images.length===0&&t.videos.length===0&&t.documents.length===0&&(!t.polls||t.polls.length===0)?null:e.jsxs(E,{borderWidth:"1px",borderRadius:"lg",p:3,borderColor:n,bg:s,children:[e.jsxs(N,{justify:"space-between",align:"center",mb:2,children:[e.jsx(m,{fontSize:"sm",fontWeight:"medium",children:"Attachments:"}),i&&e.jsx(dt,{colorScheme:"purple",px:2,py:1,borderRadius:"full",fontSize:"xs",children:"Mixed Content"})]}),i&&e.jsxs(N,{mb:3,gap:3,justify:"flex-start",children:[t.images.length>0&&e.jsxs(N,{align:"center",gap:1,children:[e.jsx(Fe,{as:Wn,color:"green.500"}),e.jsxs(m,{fontSize:"xs",children:[t.images.length," image",t.images.length!==1?"s":""]})]}),t.videos.length>0&&e.jsxs(N,{align:"center",gap:1,children:[e.jsx(Fe,{as:ri,color:"red.500"}),e.jsxs(m,{fontSize:"xs",children:[t.videos.length," video",t.videos.length!==1?"s":""]})]}),t.documents.length>0&&e.jsxs(N,{align:"center",gap:1,children:[e.jsx(Fe,{as:br,color:"blue.500"}),e.jsxs(m,{fontSize:"xs",children:[t.documents.length," document",t.documents.length!==1?"s":""]})]}),t.polls&&t.polls.length>0&&e.jsxs(N,{align:"center",gap:1,children:[e.jsx(Fe,{as:en,color:"teal.500"}),e.jsxs(m,{fontSize:"xs",children:[t.polls.length," poll",t.polls.length!==1?"s":""]})]})]}),Rr({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length>0&&e.jsx(E,{children:Rr({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length===1?e.jsxs(E,{position:"relative",borderRadius:"md",overflow:"hidden",children:[(()=>{const o=Rr({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls})[0];if(o.mediaType==="poll")return e.jsxs(E,{p:4,bg:"blackAlpha.50",borderRadius:"md",children:[e.jsx(N,{justifyContent:"space-between",alignItems:"flex-start",mb:3,children:e.jsxs(N,{alignItems:"center",gap:2,children:[e.jsx(Fe,{as:en,color:"teal.500"}),e.jsx(m,{fontWeight:"semibold",children:o.question})]})}),e.jsx(de,{spacing:3,align:"stretch",children:o.options.map((a,d)=>e.jsxs(E,{borderRadius:"md",borderWidth:"1px",p:2,children:[e.jsx(m,{fontSize:"sm",mb:1,children:a.text}),e.jsx(En,{value:0,size:"sm",colorScheme:"teal",borderRadius:"full"})]},a.id))})]});if(o.mediaType==="video")return e.jsx($r,{ratio:16/9,children:e.jsx(E,{as:"video",src:o.url,controls:!0,borderRadius:"md"})});if(o.mediaType==="image")return e.jsx($r,{ratio:4/3,children:e.jsx(vt,{src:o.url,alt:o.name,borderRadius:"md",objectFit:"cover"})});if(o.mediaType==="document")return e.jsx(N,{p:4,borderRadius:"md",bg:"blackAlpha.50",align:"center",justify:"space-between",height:"100px",children:e.jsxs(N,{align:"center",children:[e.jsx(Fe,{as:br,boxSize:10,mr:3,color:"blue.500"}),e.jsxs(E,{children:[e.jsx(m,{fontSize:"md",fontWeight:"medium",noOfLines:1,children:o.name}),e.jsx(m,{fontSize:"sm",color:"gray.500",children:so(o.size)})]})]})})})(),e.jsx(si,{position:"absolute",top:1,right:1,size:"sm",bg:"blackAlpha.700",color:"white",onClick:()=>{const o=Rr({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls})[0],a=o.mediaType==="image"?"images":o.mediaType==="video"?"videos":o.mediaType==="poll"?"polls":"documents";r(a,o.id)},_hover:{bg:"blackAlpha.800"}})]}):e.jsx(Ht,{columns:Math.min(Rr({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length,3),spacing:2,children:Rr({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).map(o=>e.jsxs(E,{position:"relative",borderRadius:"md",overflow:"hidden",children:[o.mediaType==="poll"?e.jsxs(E,{p:3,bg:"blackAlpha.50",borderRadius:"md",height:"100%",children:[e.jsx(N,{justifyContent:"space-between",alignItems:"flex-start",mb:2,children:e.jsxs(N,{alignItems:"center",gap:1,children:[e.jsx(Fe,{as:en,color:"teal.500",boxSize:4}),e.jsx(m,{fontWeight:"semibold",fontSize:"sm",noOfLines:1,children:o.question})]})}),e.jsxs(m,{fontSize:"xs",color:"gray.500",children:[o.options.length," options"]})]}):o.mediaType==="video"?e.jsx($r,{ratio:1,children:e.jsx(E,{as:"video",src:o.url,controls:!0,borderRadius:"md"})}):o.mediaType==="image"?e.jsx($r,{ratio:1,children:e.jsx(vt,{src:o.url,alt:o.name,borderRadius:"md",objectFit:"cover"})}):e.jsx($r,{ratio:1,children:e.jsxs(N,{direction:"column",p:3,bg:"blackAlpha.50",align:"center",justify:"center",borderRadius:"md",height:"100%",width:"100%",children:[e.jsx(Fe,{as:br,boxSize:10,mb:2,color:"blue.500"}),e.jsx(m,{fontSize:"sm",fontWeight:"medium",noOfLines:1,textAlign:"center",children:o.name}),e.jsx(m,{fontSize:"xs",color:"gray.500",children:so(o.size)})]})}),e.jsx(si,{position:"absolute",top:1,right:1,size:"sm",bg:"blackAlpha.700",color:"white",onClick:()=>{const a=o.mediaType==="image"?"images":o.mediaType==="video"?"videos":"documents";r(a,o.id)},_hover:{bg:"blackAlpha.800"}})]},o.id))})})]})},Ps=t=>new Promise((r,n)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>r(s.result),s.onerror=i=>n(i)}),uf=({isOpen:t,onClose:r,addNewPost:n,updateResource:s,editResource:i,user:o})=>{var ne,K;const{user:a}=ar(),d=o||a,v=R("blue.500","blue.200"),g=R("gray.200","gray.600");R("gray.50","gray.700");const u=R("blue.500","blue.200"),y=St(),[O,M]=h.useState(""),[_,w]=h.useState(""),[z,L]=h.useState(""),[$,A]=h.useState(!1),[B,p]=h.useState(""),[j,k]=h.useState(""),[I,x]=h.useState(""),[f,S]=h.useState(""),[P,T]=h.useState(!1),[D,Z]=h.useState([]),[re,c]=h.useState(!1),[fe,C]=h.useState(1),[l,b]=h.useState(1),[F,se]=h.useState(!1),[V,ae]=h.useState(""),[X,ie]=h.useState(["",""]),[he,le]=h.useState(!1),[ue,Pe]=h.useState({images:[],videos:[],documents:[],polls:[]}),[Ae,De]=h.useState([]),[Oe,qe]=h.useState([]),Ge=h.useMemo(()=>[ue.images.length>0,ue.videos.length>0,ue.documents.length>0,ue.polls.length>0].filter(Boolean).length>1,[ue]);h.useRef(null),h.useEffect(()=>{if(i&&t){if(A(!0),M(i.title||""),w(i.description||""),i.attachments&&Array.isArray(i.attachments)){const te={images:[],videos:[],documents:[],polls:[]};i.attachments.forEach(pe=>{const ve=pe.url||pe.file_path,ge={id:pe.id,url:ve,name:pe.original_name||"File",preview:ve};switch(pe.file_type){case"image":te.images.push(ge);break;case"video":te.videos.push(ge);break;case"document":te.documents.push(ge);break}}),Pe(te)}}else A(!1),M(""),w(""),L(""),p(""),k(""),x(""),S(""),Pe({images:[],videos:[],documents:[],polls:[]}),De([])},[i,t]),h.useRef(null),h.useRef(null),h.useEffect(()=>{t&&(async(pe=1)=>{var ve,ge;c(!0);try{const ye=localStorage.getItem("major_id"),tt=localStorage.getItem("faculty_id"),$e={...ye?{major_id:ye}:tt?{faculty_id:tt}:{},page:pe,per_page:10},Se=await an($e);Z(Se.data||[]),C(Se.current_page||1),b(Se.last_page||1)}catch(ye){y({title:"Failed to fetch courses",description:((ge=(ve=ye.response)==null?void 0:ve.data)==null?void 0:ge.message)||ye.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})}finally{c(!1)}})(1)},[t]);const Q=async te=>{var pe,ve;if(!(te<1||te>l)){c(!0);try{const ge=localStorage.getItem("major_id"),ye=localStorage.getItem("faculty_id"),tt={...ge?{major_id:ge}:ye?{faculty_id:ye}:{},page:te,per_page:10},$e=await an(tt);Z($e.data||[]),C($e.current_page||te),b($e.last_page||1)}catch(ge){y({title:"Failed to fetch courses",description:((ve=(pe=ge.response)==null?void 0:pe.data)==null?void 0:ve.message)||ge.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})}finally{c(!1)}}},ee=()=>{M(""),w(""),L(""),p(""),k(""),x(""),S(""),ae(""),ie(["",""]),le(!1),Pe({images:[],videos:[],documents:[],polls:[]}),De([])},ze=async()=>{var te,pe,ve,ge,ye,tt;if(!O.trim()){y({title:"Title required",description:"Please add a title for your post",status:"error",duration:3e3,isClosable:!0});return}T(!0);try{const $e={};if($e.content=_,$e.title=O,$e.type=z||"Default",!z&&Ge?$e.type="Mixed Content":ue.images.length>0&&!z&&!Ge||ue.videos.length>0&&!z&&!Ge?$e.type="Media":ue.documents.length>0&&!z&&!Ge?$e.type="Course Material":ue.polls.length>0&&!z&&!Ge&&($e.type="Poll"),$&&i)try{console.log("Updating resource with ID:",i.id);const Se=new FormData;if(O.trim()&&Se.append("title",O.trim()),_.trim()&&Se.append("description",_.trim()),Ae&&Ae.length>0?(console.log(`Adding ${Ae.length} new attachment(s)`),console.log("Attachment files to add:",Ae),Ae.forEach(Be=>{Se.append("attachments[]",Be),console.log("Added file to form data:",Be.name)})):console.log("No new attachment files to add"),Oe&&Oe.length>0&&(console.log(`Removing ${Oe.length} attachment(s):`,Oe),Oe.forEach(Be=>{Se.append("remove_attachments[]",Be)})),console.log("Resource ID for update:",i.id),!i.id)throw new Error("Cannot update resource: Missing resource ID");if(typeof s=="function"){const Be={id:i.id,title:O.trim(),description:_.trim(),newAttachments:Ae,removeAttachmentIds:Oe};he&&V.trim()&&(Be.poll={question:V,options:X.filter(Ue=>Ue.trim()!=="")},console.log("[CreatePostModal.jsx] Adding poll to update:",Be.poll)),console.log("[CreatePostModal.jsx] Calling props.updateResource with:",JSON.stringify(Be,(Ue,rt)=>rt instanceof File?rt.name:rt,2)),await s(Be)}else{const Be={title:O.trim(),description:_.trim(),newAttachments:Ae,removeAttachmentIds:Oe};he&&V.trim()&&(Be.poll={question:V,options:X.filter(Ue=>Ue.trim()!=="")},console.log("Adding poll data to service update:",Be.poll)),console.log(`Updating resource ${i.id} with:`,Be),console.log(`Attachment files count: ${Ae.length}`),console.log(`Attachments to remove count: ${Oe.length}`),await la(i.id,Be)}y({title:"Resource updated",description:"Your resource has been successfully updated with attachment changes",status:"success",duration:3e3,isClosable:!0}),r()}catch(Se){console.error("Error updating resource with attachments:",Se),y({title:"Update failed",description:((pe=(te=Se.response)==null?void 0:te.data)==null?void 0:pe.message)||"Failed to update the resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}else{const Se=localStorage.getItem("major_id")||o&&(o.major_id||((ve=o.major)==null?void 0:ve.id)),Be=localStorage.getItem("faculty_id")||o&&(o.faculty_id||((ge=o.faculty)==null?void 0:ge.id));if(!Se||!Be){y({title:"Missing profile information",description:"Your major or faculty information is missing. Please re-login or complete your profile before posting.",status:"error",duration:4e3,isClosable:!0}),T(!1);return}const Ue=new FormData;if(Ue.append("title",O.trim()),Ue.append("description",_.trim()),Ue.append("type",$e.type),Ue.append("major_id",Se),Ue.append("faculty_id",Be),B&&Ue.append("course_id",B),z==="event"?(Ue.append("event_date",j),Ue.append("location",I)):z==="study_group"&&Ue.append("study_date",f),he&&(Ue.append("poll[question]",V),X.forEach(rt=>{rt.trim()&&Ue.append("poll[options][]",rt.trim())})),Ae.forEach(rt=>{Ue.append("attachments[]",rt)}),typeof n=="function"){const rt=localStorage.getItem("major_id"),Mt=localStorage.getItem("faculty_id"),q={title:$e.title,type:$e.type,attachments:Ae,course_id:B,major_id:rt,faculty_id:Mt};he&&(q.poll={question:V,options:X.filter(ce=>ce.trim()!=="")}),await n($e.content,q.type,q)}else await n(Ue);ee(),r()}}catch($e){console.error("Error with resource:",$e),y({title:"Error",description:((tt=(ye=$e.response)==null?void 0:ye.data)==null?void 0:tt.message)||"Failed to process resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}finally{T(!1)}},Le=async te=>{const pe=Array.from(te.target.files);if(pe.length!==0)try{y({title:"Uploading images...",status:"info",duration:2e3,isClosable:!0});const ve=[],ge=[];for(const ye of pe){if(!ye.type.startsWith("image/")){y({title:"Invalid file type",description:`${ye.name} is not an image file.`,status:"error",duration:3e3,isClosable:!0});continue}if(ge.push(ye),ye.size>5*1024*1024){y({title:"File too large",description:`${ye.name} exceeds the 5MB limit.`,status:"error",duration:3e3,isClosable:!0});continue}const tt=Date.now(),$e=Math.random().toString(36).substring(2,9),Se=`img-${tt}-${$e}`,Be=await Ps(ye);ve.push({id:Se,name:ye.name,type:ye.type,size:ye.size,url:Be})}De(ye=>[...ye,...ge]),Pe(ye=>{const tt=ye.videos.length>0||ye.documents.length>0;return tt&&!z?L("Mixed Content"):!tt&&!z&&L("Media"),{...ye,images:[...ye.images,...ve]}}),ve.length>0&&y({title:"Images uploaded successfully",status:"success",duration:3e3,isClosable:!0})}catch(ve){y({title:"Error uploading images",description:ve.message,status:"error",duration:3e3,isClosable:!0})}},Ve=async te=>{const pe=Array.from(te.target.files);if(pe.length!==0)try{T(!0);const ve=pe.filter(Se=>Se.type.startsWith("video/")||Se.name.match(/\.(mp4|mov|avi|wmv|flv|webm|mkv)$/i));ve.length!==pe.length&&y({title:"Invalid file type",description:"Only video files are allowed for video upload",status:"warning",duration:3e3,isClosable:!0});const ge=20*1024*1024,ye=ve.filter(Se=>Se.size<=ge);ye.length!==ve.length&&y({title:"File too large",description:"Some videos exceed the 20MB size limit and will be skipped",status:"warning",duration:3e3,isClosable:!0});const $e=(await Promise.all(ye.map(async Se=>{try{const Be=await Ps(Se);return{id:`video-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:Se.name,url:Be,size:Se.size,type:"video",mimeType:Se.type||"video/mp4"}}catch(Be){return console.error(`Error processing video ${Se.name}:`,Be),null}}))).filter(Se=>Se!==null);$e.length>0?(Pe(Se=>{const Be=Se.images.length>0||Se.documents.length>0;return z!=="Media"&&!Be?L("Media"):Be&&!z&&L("Mixed Content"),{...Se,videos:[...Se.videos,...$e].slice(0,2)}}),De(Se=>[...Se,...ye]),y({title:"Videos uploaded",description:`Successfully added ${$e.length} videos`,status:"success",duration:3e3,isClosable:!0})):y({title:"Upload failed",description:"Failed to process any videos. Please try different files.",status:"error",duration:3e3,isClosable:!0}),te.target.value=null}catch(ve){console.error("Error processing videos:",ve),y({title:"Error uploading videos",description:"Please try again with different videos",status:"error",duration:3e3,isClosable:!0})}finally{T(!1)}},Ze=async te=>{const pe=Array.from(te.target.files);if(pe.length!==0)try{T(!0);const ve=pe.filter(Se=>Se.name.match(/\.(pdf|doc|docx|xls|xlsx|ppt|pptx|txt)$/i));ve.length!==pe.length&&y({title:"Invalid file type",description:"Only document file types (PDF, Word, Excel, PowerPoint, etc.) are allowed",status:"warning",duration:3e3,isClosable:!0});const ge=10*1024*1024,ye=ve.filter(Se=>Se.size<=ge);ye.length!==ve.length&&y({title:"File too large",description:"Some documents exceed the 10MB size limit and will be skipped",status:"warning",duration:3e3,isClosable:!0});const $e=(await Promise.all(ye.map(async Se=>{try{const Be=await Ps(Se),Ue=Se.name.split(".").pop().toLowerCase();let rt=Se.type||"application/octet-stream";return(!Se.type||Se.type==="application/octet-stream")&&(Ue==="pdf"?rt="application/pdf":["doc","docx"].includes(Ue)?rt="application/msword":["xls","xlsx"].includes(Ue)?rt="application/vnd.ms-excel":["ppt","pptx"].includes(Ue)?rt="application/vnd.ms-powerpoint":Ue==="txt"&&(rt="text/plain")),{id:`doc-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:Se.name,url:Be,size:Se.size,type:"document",mimeType:rt}}catch(Be){return console.error(`Error processing document ${Se.name}:`,Be),null}}))).filter(Se=>Se!==null);$e.length>0?(Pe(Se=>{const Be=Se.images.length>0||Se.videos.length>0;return z!=="Course Material"&&!Be?L("Course Material"):Be&&!z&&L("Mixed Content"),{...Se,documents:[...Se.documents,...$e].slice(0,4)}}),De(Se=>[...Se,...ye]),y({title:"Documents uploaded",description:`Successfully added ${$e.length} documents`,status:"success",duration:3e3,isClosable:!0})):y({title:"Upload failed",description:"Failed to process any documents. Please try different files.",status:"error",duration:3e3,isClosable:!0}),te.target.value=null}catch(ve){console.error("Error processing documents:",ve),y({title:"Error uploading documents",description:"Please try again with different documents",status:"error",duration:3e3,isClosable:!0})}finally{T(!1)}},st=(te,pe)=>{const ve=ue[te].find(ge=>ge.id===pe);Pe(ge=>{const ye={...ge};return ye[te]=ge[te].filter(tt=>tt.id!==pe),ye}),$&&ve&&!isNaN(parseInt(ve.id))&&(console.log(`Adding attachment ${ve.id} to removal list`),qe(ge=>[...ge,ve.id])),ve&&De(ge=>ge.filter(ye=>ye.name!==ve.name))},me=()=>{se(!0)},Y=()=>{X.length<6?ie([...X,""]):y({title:"Maximum poll options reached",description:"You can add up to 6 options",status:"warning",duration:2e3,isClosable:!0})},U=te=>{if(X.length>1){const pe=[...X];pe.splice(te,1),ie(pe)}else y({title:"Minimum poll options required",description:"You need at least 1 option for a poll",status:"warning",duration:2e3,isClosable:!0})},J=()=>{if(!V.trim()){y({title:"Poll question is required",status:"error",duration:2e3,isClosable:!0});return}const te=X.filter(ge=>ge.trim()!=="");if(te.length<1){y({title:"At least 1 poll option is required",status:"error",duration:2e3,isClosable:!0});return}const pe=`poll-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,ve={id:pe,question:V,options:te.map((ge,ye)=>({id:`option-${ye}-${pe}`,text:ge,votes:0})),createdAt:new Date().toISOString(),voters:[]};Pe(ge=>{const ye=ge.images.length>0||ge.videos.length>0||ge.documents.length>0;return ye&&!z?L("Mixed Content"):!ye&&!z&&L("Poll"),{...ge,polls:[ve]}}),le(!0),se(!1),y({title:"Poll added successfully",status:"success",duration:2e3,isClosable:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs(kt,{isOpen:t,onClose:r,size:"lg",children:[e.jsx(at,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),e.jsxs(Ot,{borderRadius:"2xl",mx:4,overflow:"hidden",children:[e.jsx(ut,{bg:R("gray.50","gray.800"),borderBottomWidth:"1px",borderColor:g,pb:4,pt:3,children:e.jsxs(N,{align:"center",gap:3,children:[e.jsx(gt,{src:(d==null?void 0:d.avatar_url)||(d==null?void 0:d.avatar)||"https://i.pravatar.cc/150?img=12",size:"md",name:`${(d==null?void 0:d.first_name)||""} ${(d==null?void 0:d.last_name)||""}`.trim()||"You",border:"2px solid",borderColor:v}),e.jsxs(de,{align:"start",spacing:0,children:[e.jsx(m,{fontWeight:"bold",lineHeight:"short",color:u,children:`${(d==null?void 0:d.first_name)||""} ${(d==null?void 0:d.last_name)||""}`.trim()||"You"}),e.jsx(Te,{spacing:1,mt:1,children:e.jsx(m,{fontSize:"xs",color:R("gray.500","gray.400"),children:"Visible to everyone"})})]})]})}),e.jsx(wt,{size:"lg",mt:1}),e.jsx(lt,{pt:5,pb:2,children:e.jsxs(de,{spacing:5,align:"stretch",children:[e.jsxs(xe,{children:[e.jsx(be,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,color:R("gray.700","gray.300"),children:"Title"}),e.jsx(We,{placeholder:"Enter a title for your post...",value:O,onChange:te=>M(te.target.value),size:"md",borderRadius:"md",borderWidth:"2px",bg:R("white","gray.700"),p:3,_placeholder:{color:R("gray.400","gray.400")},_focus:{borderColor:v,boxShadow:`0 0 0 1px ${v}`}})]}),e.jsxs(xe,{children:[e.jsx(be,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,color:R("gray.700","gray.300"),children:"Content"}),e.jsx(Yt,{placeholder:"Share your knowledge, resources, or ask a question...",value:_,onChange:te=>w(te.target.value),size:"md",borderRadius:"md",borderWidth:"2px",bg:R("white","gray.700"),minHeight:"140px",p:3,_placeholder:{color:R("gray.400","gray.400")},_focus:{borderColor:v,boxShadow:`0 0 0 1px ${v}`}}),e.jsx(N,{justify:"flex-end",mt:1.5,children:e.jsxs(m,{fontSize:"xs",color:_.length>480?"orange.500":"gray.500",children:[_.length,"/500 characters"]})})]}),e.jsxs(xe,{children:[e.jsx(be,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,children:"Course"}),e.jsxs(Tt,{children:[e.jsx(Pt,{as:G,rightIcon:e.jsx(ur,{}),w:"100%",variant:"outline",textAlign:"left",fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:B&&D.length>0?`${(ne=D.find(te=>te.id===Number(B)))==null?void 0:ne.code} - ${(K=D.find(te=>te.id===Number(B)))==null?void 0:K.title}`:"Select course"}),e.jsxs(At,{maxH:"320px",overflowY:"auto",children:[re?e.jsx(N,{justify:"center",align:"center",h:"100px",children:e.jsx(_t,{})}):D.map(te=>{var pe;return e.jsx(Qe,{onClick:()=>p(te.id),children:e.jsxs(E,{children:[e.jsxs(m,{fontWeight:"medium",children:[te.code," - ",te.title]}),e.jsx(m,{fontSize:"sm",color:"gray.500",children:(pe=te.major)==null?void 0:pe.name})]})},te.id)}),l>1&&e.jsx(E,{borderTop:"1px solid",borderColor:g,mt:2,pt:2,px:2,children:e.jsxs(N,{justify:"space-between",align:"center",children:[e.jsx(G,{size:"xs",variant:"outline",onClick:te=>{te.stopPropagation(),Q(fe-1)},isDisabled:fe<=1||re,children:"Prev"}),e.jsxs(m,{fontSize:"xs",color:"gray.500",children:["Page ",fe," of ",l]}),e.jsx(G,{size:"xs",variant:"outline",onClick:te=>{te.stopPropagation(),Q(fe+1)},isDisabled:fe>=l||re,children:"Next"})]})})]})]})]}),e.jsx(df,{attachments:ue,removeAttachment:st}),e.jsx(cf,{handleImageUpload:Le,handleVideoUpload:Ve,handleDocumentUpload:Ze,handlePollAdd:me})]})}),e.jsx(xt,{justifyContent:"end",px:4,py:3,borderTopWidth:"1px",borderColor:g,children:e.jsx(G,{colorScheme:"blue",leftIcon:e.jsx(vd,{}),isLoading:P,onClick:ze,children:"Post"})})]})]}),e.jsxs(kt,{isOpen:F,onClose:()=>se(!1),size:"md",children:[e.jsx(at,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),e.jsxs(Ot,{borderRadius:"xl",children:[e.jsx(ut,{children:"Create Poll"}),e.jsx(wt,{}),e.jsx(lt,{pb:6,children:e.jsxs(de,{spacing:4,align:"stretch",children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Poll Question"}),e.jsx(We,{placeholder:"Enter your question",value:V,onChange:te=>ae(te.target.value),autoFocus:!0})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Poll Options"}),e.jsx(de,{spacing:2,align:"stretch",children:X.map((te,pe)=>e.jsxs(N,{alignItems:"center",children:[e.jsx(We,{placeholder:`Option ${pe+1}`,value:te,onChange:ve=>{const ge=[...X];ge[pe]=ve.target.value,ie(ge)},mr:2}),X.length>2&&e.jsx(G,{size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>U(pe),children:e.jsx(Fe,{as:fn})})]},pe))})]}),e.jsx(G,{leftIcon:e.jsx(Fe,{as:Ut}),variant:"outline",colorScheme:"blue",size:"sm",onClick:Y,isDisabled:X.length>=6,children:"Add Option"})]})}),e.jsxs(xt,{children:[e.jsx(G,{colorScheme:"blue",mr:3,leftIcon:e.jsx(Fe,{as:en}),onClick:J,children:"Create Poll"}),e.jsx(G,{onClick:()=>{ae(""),ie(["",""]),se(!1)},children:"Cancel"})]})]})]})]})},hf=async()=>{try{return(await we.get("/registration/faculties")).data}catch(t){return console.error("Error fetching faculties:",t),[]}},ff=async t=>{if(!t)return[];try{return(await we.get(`/registration/faculties/${t}/majors`)).data}catch(r){return console.error("Error fetching majors:",r),[]}},pf=async(t,r=1)=>{if(!t)return{data:[],current_page:1,last_page:1};try{return(await we.get("/courses",{params:{major_id:t,page:r}})).data}catch(n){return console.error("Error fetching courses:",n),{data:[],current_page:1,last_page:1}}},mf=()=>{const t=R("rgba(255, 255, 255, 0.8)","rgba(45, 55, 72, 0.8)"),r=R("gray.800","white"),n=R("gray.500","gray.400"),s=R("blue.500","blue.200"),i=R("brand.navy","rgba(74, 85, 104, 0.3)");R("gray.50","gray.800"),R("blue.50","blue.900");const o=R("linear-gradient(135deg, #f0f4f8 0%, #eff6ff 50%, #f0f4f8 100%)","linear-gradient(135deg, #1a202c 0%, #2d3748 50%, #1a202c 100%)"),a=St(),d=Lt();pt();const{isOpen:v,onOpen:g,onClose:u}=pt(),y=()=>{qe(null),u()},[O,M]=h.useState("feed"),[_,w]=h.useState(!0),[z,L]=h.useState("All"),[$,A]=h.useState("All"),[B,p]=h.useState("All"),[j,k]=h.useState(""),[I,x]=h.useState(!1),[f,S]=h.useState([]),[P,T]=h.useState([]),[D,Z]=h.useState({data:[],current_page:1,last_page:1}),[re,c]=h.useState(1),[fe,C]=h.useState(!1),{user:l}=ar(),[b,F]=h.useState([]),[se,V]=h.useState(1),[ae,X]=h.useState(1),[ie,he]=h.useState(!1),[le,ue]=h.useState(0),[Pe,Ae]=h.useState(!0),De=h.useRef(null),[Oe,qe]=h.useState(null);h.useEffect(()=>{(async()=>{C(!0);const Y=await hf();S(Y);const U=JSON.parse(localStorage.getItem("user"));U!=null&&U.faculty_id&&L(U.faculty_id),C(!1)})()},[]),h.useEffect(()=>{if(!z||z==="All"){T([]),p("All");return}(async()=>{C(!0);const Y=await ff(z);T(Y);const U=JSON.parse(localStorage.getItem("user"));U!=null&&U.major_id&&parseInt(U.faculty_id)===parseInt(z)?p(U.major_id):p("All"),C(!1)})()},[z]),h.useEffect(()=>{if(!B||B==="All"){Z({data:[],current_page:1,last_page:1}),A("All"),c(1);return}(async Y=>{C(!0);const U=await pf(B,Y);Z(U),C(!1)})(re)},[B,re]);const Ge=h.useCallback(async(me=1,Y=!1)=>{var U,J;me===1?w(!0):he(!0);try{const ne={page:me,per_page:10,faculty_id:z!=="All"?z:void 0,major_id:B!=="All"?B:void 0,course_id:$!=="All"?$:void 0,search:j||void 0};Object.keys(ne).forEach(ve=>ne[ve]===void 0&&delete ne[ve]);const K=await oa(ne,!0),te=Array.isArray(K)?K:K.data||[],pe=K.pagination||{};Y&&me>1?F(ve=>[...ve,...te]):F(te),V(pe.current_page||me),X(pe.last_page||1),Ae(pe.current_page<pe.last_page)}catch(ne){console.error("Error loading resource data:",ne),a({title:"Error loading resources",description:((J=(U=ne.response)==null?void 0:U.data)==null?void 0:J.message)||"There was a problem loading the API resource data.",status:"error",duration:3e3,isClosable:!0})}finally{w(!1),he(!1)}},[z,B,$,j,a]);h.useEffect(()=>{Ge(1,!1),V(1),Ae(!0)},[Ge]),h.useEffect(()=>{const me=new IntersectionObserver(U=>{const[J]=U;J.isIntersecting&&Pe&&!ie&&!_&&Ge(se+1,!0)},{threshold:1}),Y=De.current;return Y&&me.observe(Y),()=>{Y&&me.unobserve(Y)}},[se,Pe,ie,_,Ge]);const Q=h.useCallback(me=>{d(`/resources/${me}`)},[d]),ee=h.useCallback((me,Y)=>{const U=b.findIndex(te=>te.id===me);if(U===-1)return;const J=b[U],ne=J.is_saved,K=[...b];K[U]={...J,is_saved:!ne},F(K),ha(me).then(te=>{a(xs(`${ne?"Removed from":"Added to"} bookmarks: ${Y}`,null,2e3));const pe=typeof(te==null?void 0:te.is_saved)=="boolean"?te.is_saved:!ne,ve=[...b];ve[U]={...ve[U],is_saved:pe},F(ve)}).catch(te=>{nr("handleBookmark",te);const pe=[...b];pe[U]={...J,is_saved:ne},F(pe),a(dr(te,`Failed to ${ne?"remove from":"add to"} bookmarks`))})},[b,a]),ze=h.useCallback(me=>{const Y=b.findIndex(K=>K.id===me);if(Y===-1)return;const U=b[Y],J={...U,is_upvoted:!U.is_upvoted,upvote_count:U.upvote_count+(U.is_upvoted?-1:1)},ne=[...b];ne[Y]=J,F(ne),ca(me).then(K=>{const te=b.findIndex(ve=>ve.id===me);if(te===-1)return;const pe=[...b];pe[te]={...pe[te],is_upvoted:K.upvoted,upvote_count:K.upvote_count},F(pe)}).catch(K=>{nr("toggleUpvote",K);const te=b.findIndex(ge=>ge.id===me);if(te===-1)return;const pe={...b[te],is_upvoted:U.is_upvoted,upvote_count:U.upvote_count},ve=[...b];ve[te]=pe,F(ve),a(dr(K,"Failed to update upvote"))})},[b,a]);h.useCallback(async(me,Y)=>{try{const U=await addComment(me,Y),J=b.findIndex(K=>K.id===me);if(J===-1)return;const ne=[...b];return ne[J]={...ne[J],comment_count:U.comment_count},F(ne),a(xs("Comment added",null,2e3)),U.comment}catch(U){nr("handleAddComment",U),a(dr(U,"Failed to add comment"))}},[b,a]);const Le=h.useCallback((me,Y)=>{console.log(`Resource ${me} shared via ${Y||"general"}`),(!Y||Y==="general")&&a({title:`Shared resource #${me}`,status:"info",duration:1500,isClosable:!0})},[a]),Ve=(me,Y,U)=>{w(!0);const J=U.title||"New Resource",ne=me,K=U.attachments||[];K.length>0&&console.log(`Uploading ${K.length} attachments with resource`);const te={title:J,description:ne,attachments:K,course_id:U.course_id,major_id:U.major_id,faculty_id:U.faculty_id,type:Y};U.poll&&U.poll.question&&U.poll.options&&(te.poll={question:U.poll.question,options:U.poll.options},console.log("Adding poll data to createResource payload:",te.poll)),aa(te).then(pe=>{a({title:"Resource submitted successfully",description:"Your resource has been submitted and is pending approval. You will be notified once it is reviewed.",status:"success",duration:5e3,isClosable:!0})}).catch(pe=>{var ve,ge;console.error("Error creating resource:",pe),a({title:"Failed to create resource",description:pe.message||((ge=(ve=pe.response)==null?void 0:ve.data)==null?void 0:ge.message)||"Please try again later",status:"error",duration:3e3,isClosable:!0})}).finally(()=>{w(!1)})},Ze=h.useCallback(me=>{qe({id:me.id,title:me.title,description:me.description,attachments:me.attachments||[]}),g()},[g]),st=h.useCallback(async me=>{try{F(Y=>Y.filter(U=>U.id!==me))}catch(Y){nr("handleDelete",Y),a(dr(Y,"There was a problem updating the UI after deletion"))}},[a]);return e.jsxs(E,{position:"relative",bg:o,minH:"calc(100vh - 60px)",py:5,px:{base:4,md:6,lg:8},overflow:"hidden",children:[e.jsx(E,{position:"absolute",top:"5%",right:"5%",width:"300px",height:"300px",borderRadius:"full",bg:"brand.navy",opacity:"0.05",filter:"blur(70px)",zIndex:0}),e.jsx(E,{position:"absolute",bottom:"10%",left:"5%",width:"250px",height:"250px",borderRadius:"full",bg:"brand.gold",opacity:"0.08",filter:"blur(60px)",zIndex:0}),_&&le<100&&e.jsx(E,{position:"fixed",top:"0",left:"0",right:"0",zIndex:"1000",children:e.jsx(En,{size:"xs",value:le,colorScheme:"blue",isAnimated:!0})}),e.jsxs(N,{maxW:"1400px",mx:"auto",gap:{base:2,md:4,lg:6},px:{base:2,md:4},children:[e.jsx(uf,{isOpen:v,onClose:y,user:l,addNewPost:Ve,editResource:Oe,updateResource:async me=>{var Y,U;try{const{updateResource:J}=await rr(async()=>{const{updateResource:te}=await Promise.resolve().then(()=>yh);return{updateResource:te}},void 0);console.log("Updating resource with full data:",me),console.log("Attachments data received:",{newAttachments:me.newAttachments||[],attachmentFiles:me.attachmentFiles||[],removeAttachmentIds:me.removeAttachmentIds||[],attachmentsToRemove:me.attachmentsToRemove||[]});const ne={title:me.title,description:me.description,newAttachments:me.attachmentFiles||me.newAttachments||[],removeAttachmentIds:me.attachmentsToRemove||me.removeAttachmentIds||[]};me.poll&&(ne.poll=me.poll,console.log("Adding poll data to update:",ne.poll));const K=await J(me.id,ne);return F(te=>te.map(pe=>pe.id===me.id?{...pe,...K}:pe)),a(xs("Resource updated",((Y=me.attachmentsToRemove)==null?void 0:Y.length)>0||((U=me.newAttachments)==null?void 0:U.length)>0?"Resource and attachments updated successfully":"Resource updated successfully",3e3)),K}catch(J){throw nr("updateResource",J),a(dr(J,"Failed to update the resource")),J}}}),e.jsx(E,{flex:"1",maxW:{base:"100%",lg:"calc(100% - 340px)"},order:{base:1,lg:1},children:e.jsxs(de,{spacing:6,align:"stretch",children:[e.jsxs(Te,{spacing:4,children:[e.jsx(Ke,{icon:e.jsx(Vt,{}),"aria-label":"Go back",onClick:()=>d(-1),variant:"ghost",borderRadius:"full"}),e.jsx(Ee,{size:"xl",color:r,fontWeight:"700",children:"Resources Feed"})]}),e.jsxs(E,{position:"sticky",top:"0",zIndex:"10",py:4,backdropFilter:"blur(10px)",mb:4,children:[e.jsxs(N,{align:"center",gap:4,maxW:"1000px",mx:"auto",children:[e.jsxs(jt,{size:"lg",flex:"1",children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Dr,{color:"gray.400"})}),e.jsx(We,{placeholder:"Search resources...",bg:R("white","gray.700"),borderRadius:"full",boxShadow:"0px 3px 10px rgba(0, 0, 0, 0.05)",value:j,onChange:me=>k(me.target.value),borderColor:R("rgba(226, 232, 240, 0.8)","gray.600"),_focus:{boxShadow:"0px 4px 12px rgba(66, 153, 225, 0.15)",borderColor:R("blue.300","blue.400")},_hover:{borderColor:R("blue.200","blue.500")}}),j&&e.jsx(Pn,{children:e.jsx(Ke,{size:"sm",variant:"ghost",icon:e.jsx(Vt,{}),onClick:()=>k(""),"aria-label":"Clear search",borderRadius:"full"})})]}),e.jsx(G,{leftIcon:e.jsx(ns,{}),onClick:()=>x(!I),bg:I?"blue.500":R("white","gray.700"),color:I?"white":r,borderRadius:"full",boxShadow:"0px 3px 10px rgba(0, 0, 0, 0.05)",borderColor:R("rgba(226, 232, 240, 0.8)","gray.600"),border:"1px solid",_hover:{bg:I?"blue.600":R("gray.50","gray.600"),transform:"translateY(-2px)",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.08)"},transition:"all 0.2s ease-in-out",children:e.jsx(m,{as:"span",children:"Filter"})})]}),I&&e.jsx(E,{mt:4,bg:t,p:4,borderRadius:"lg",boxShadow:"md",children:e.jsx(af,{searchQuery:j,facultyFilter:z,setFacultyFilter:L,courseFilter:$,setCourseFilter:A,majorFilter:B,setMajorFilter:p,faculties:f,majors:P,courses:D.data,coursePagination:D,onCoursePageChange:c,isLoadingFilters:fe,showFilters:I,onToggleFilters:()=>x(!I),onClearFilters:()=>{L("All"),A("All"),p("All")}})})]}),e.jsx(G,{bg:t,borderRadius:"xl",boxShadow:"sm",p:3,mb:6,border:"1px solid",borderColor:i,onClick:g,_hover:{boxShadow:"md",transform:"translateY(-1px)",bg:t},_active:{bg:t},transition:"all 0.2s ease",w:"full",h:"auto",variant:"unstyled",display:"flex",alignItems:"center",children:e.jsxs(Te,{spacing:3,w:"full",children:[e.jsx(gt,{size:"md",name:l?`${l.first_name} ${l.last_name}`:"User",src:(l==null?void 0:l.avatar_url)||(l==null?void 0:l.avatar),border:"2px solid",borderColor:R("blue.200","blue.700")}),e.jsx(E,{flex:"1",bg:R("gray.50","gray.700"),borderRadius:"full",px:4,py:2.5,border:"1px solid",borderColor:R("gray.200","gray.600"),textAlign:"left",children:e.jsx(m,{color:n,fontSize:"sm",children:"What's on your mind?"})})]})}),e.jsxs(E,{w:"full",maxW:{base:"100%",md:"650px",lg:"100%"},mx:"auto",position:"relative",children:[e.jsx(of,{resources:b,cardBg:t,textColor:r,mutedText:n,borderColor:i,isLoading:_,feedType:O,currentUser:l,onCardClick:Q,onBookmark:ee,onUpvote:ze,onShare:Le,onEdit:Ze,onDelete:st}),Pe&&e.jsx(E,{ref:De,py:6,textAlign:"center",children:ie?e.jsx(_t,{size:"md",color:s,thickness:"3px",speed:"0.65s"}):e.jsx(m,{fontSize:"sm",color:n,children:"Scroll for more"})}),!Pe&&b.length>10&&e.jsx(E,{py:6,textAlign:"center",children:e.jsx(m,{fontSize:"sm",color:n,children:"No more resources to load."})})]})]})}),e.jsx(E,{display:{base:"none",lg:"block"},order:{base:2,lg:2},width:"320px",flexShrink:"0",children:e.jsx(E,{position:"sticky",top:"20px",width:"320px",maxHeight:"calc(100vh - 40px)",overflowY:"auto",paddingRight:"2",css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{background:R("rgba(0,0,0,0.1)","rgba(255,255,255,0.1)"),borderRadius:"24px"}},children:e.jsx(lf,{limit:5})})})]})]})},Gs=t=>t?t.startsWith("http")?t:`${Ks}/${t}`:null,io=async(t=1,r="")=>{var n;try{const s=await we.get("/clubs",{params:{page:t,query:r||void 0},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});return s.data&&s.data.data&&(s.data.data=s.data.data.map(i=>({...i,logo:Gs(i.logo)}))),s.data}catch(s){throw((n=s.response)==null?void 0:n.data)||{message:"Failed to fetch clubs"}}},gf=async t=>{var r;try{const n=await we.get(`/clubs/${t}`);return n.data&&(n.data.logo=Gs(n.data.logo),n.data.club_members&&Array.isArray(n.data.club_members)&&(n.data.club_members=n.data.club_members.map(s=>({...s,picture:Gs(s.picture)})))),n.data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch club details"}}},xf=async(t,r)=>{var n;try{return(await we.post(`/clubs/${t}/members`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw((n=s.response)==null?void 0:n.data)||{message:"Failed to add club member"}}},bf=async(t,r,n)=>{var s;try{const i={};let o=`/clubs/${t}/members/${r}`;return n instanceof FormData&&(o+="?_method=PUT",i.headers={"Content-Type":"multipart/form-data"}),(await we.post(o,n,i)).data}catch(i){throw((s=i.response)==null?void 0:s.data)||{message:"Failed to update club member"}}},yf=async(t,r)=>{var n;try{return(await we.delete(`/clubs/${t}/members/${r}`)).data}catch(s){throw((n=s.response)==null?void 0:n.data)||{message:"Failed to delete club member"}}},jf=async t=>{var r;try{return(await we.post("/clubs",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to create club"}}},vf=async(t,r)=>{var n;try{return(await we.post(`/clubs/${t}/events`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw((n=s.response)==null?void 0:n.data)||{message:"Failed to create club event"}}},wf=async(t,r)=>{var n;try{const s={};let i=`/clubs/${t}`;return r instanceof FormData&&(i+="?_method=PUT",s.headers={"Content-Type":"multipart/form-data"}),(await we.post(i,r,s)).data}catch(s){throw((n=s.response)==null?void 0:n.data)||{message:"Failed to update club"}}},Sf=async t=>{var r;try{return(await we.delete(`/clubs/${t}`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to delete club"}}},Cf=({isOpen:t,onClose:r,onClubCreated:n})=>{const[s,i]=h.useState(""),[o,a]=h.useState(""),[d,v]=h.useState(null),[g,u]=h.useState(!1),y=St(),O=_=>{v(_.target.files[0])},M=async _=>{_.preventDefault(),u(!0);const w=new FormData;w.append("name",s),w.append("description",o),d&&w.append("logo",d);try{await jf(w),y({title:"Club created.",description:"The new club has been successfully created.",status:"success",duration:5e3,isClosable:!0}),n(),r()}catch(z){y({title:"Creation failed.",description:z.message||"Could not create the club.",status:"error",duration:5e3,isClosable:!0})}finally{u(!1)}};return e.jsxs(kt,{isOpen:t,onClose:r,children:[e.jsx(at,{}),e.jsxs(Ot,{as:"form",onSubmit:M,children:[e.jsx(ut,{children:"Create a New Club"}),e.jsx(wt,{}),e.jsx(lt,{children:e.jsxs(de,{spacing:4,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Club Name"}),e.jsx(We,{value:s,onChange:_=>i(_.target.value),placeholder:"Enter club name"})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Description"}),e.jsx(Yt,{value:o,onChange:_=>a(_.target.value),placeholder:"Tell us about the club"})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Club Logo"}),e.jsx(We,{type:"file",onChange:O,accept:"image/*"})]})]})}),e.jsxs(xt,{children:[e.jsx(G,{variant:"ghost",mr:3,onClick:r,children:"Cancel"}),e.jsx(G,{colorScheme:"blue",type:"submit",isLoading:g,children:"Create Club"})]})]})]})},_f=({isOpen:t,onClose:r,club:n,onEventCreated:s})=>{const[i,o]=h.useState(""),[a,d]=h.useState(""),[v,g]=h.useState(""),[u,y]=h.useState(""),[O,M]=h.useState(""),[_,w]=h.useState(null),[z,L]=h.useState(!1),$=St(),A=p=>{w(p.target.files[0])},B=async p=>{if(p.preventDefault(),!n)return;L(!0);const j=new FormData;j.append("title",i),j.append("event_datetime",a),j.append("location",v),j.append("description",u),j.append("speaker_names",O),_&&j.append("image_path",_);try{await vf(n.id,j),$({title:"Event created.",description:`The event for ${n.name} has been successfully created.`,status:"success",duration:5e3,isClosable:!0}),s(),r()}catch(k){$({title:"Creation failed.",description:k.message||"Could not create the event.",status:"error",duration:5e3,isClosable:!0})}finally{L(!1)}};return e.jsxs(kt,{isOpen:t,onClose:r,children:[e.jsx(at,{}),e.jsxs(Ot,{as:"form",onSubmit:B,children:[e.jsxs(ut,{children:["Create Event for ",n==null?void 0:n.name]}),e.jsx(wt,{}),e.jsx(lt,{children:e.jsxs(de,{spacing:4,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Event Title"}),e.jsx(We,{value:i,onChange:p=>o(p.target.value),placeholder:"Enter event title"})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Date and Time"}),e.jsx(We,{type:"datetime-local",value:a,onChange:p=>d(p.target.value)})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Location"}),e.jsx(We,{value:v,onChange:p=>g(p.target.value),placeholder:"Enter event location"})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Description"}),e.jsx(Yt,{value:u,onChange:p=>y(p.target.value),placeholder:"Event details"})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Speaker Names"}),e.jsx(We,{value:O,onChange:p=>M(p.target.value),placeholder:"e.g., John Doe, Jane Smith"})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Event Image"}),e.jsx(We,{type:"file",onChange:A,accept:"image/*"})]})]})}),e.jsxs(xt,{children:[e.jsx(G,{variant:"ghost",mr:3,onClick:r,children:"Cancel"}),e.jsx(G,{colorScheme:"blue",type:"submit",isLoading:z,children:"Create Event"})]})]})]})},kf=({isOpen:t,onClose:r,club:n,onClubUpdated:s})=>{const[i,o]=h.useState(""),[a,d]=h.useState(""),[v,g]=h.useState(null),[u,y]=h.useState(null),[O,M]=h.useState(!1),_=St();h.useEffect(()=>{n&&(o(n.name||""),d(n.description||""),g(null),y(n.logo))},[n,t]);const w=L=>{const $=L.target.files[0];if($){g($);const A=new FileReader;A.onloadend=()=>{y(A.result)},A.readAsDataURL($)}},z=async L=>{if(L.preventDefault(),!n)return;M(!0);const $=new FormData;$.append("name",i),$.append("description",a),v&&$.append("logo",v);try{await wf(n.id,$),_({title:"Club updated",description:"The club has been successfully updated.",status:"success",duration:5e3,isClosable:!0}),s(),r()}catch(A){_({title:"Update failed",description:A.message||"Could not update the club.",status:"error",duration:5e3,isClosable:!0})}finally{M(!1)}};return e.jsxs(kt,{isOpen:t,onClose:r,size:"lg",isCentered:!0,children:[e.jsx(at,{}),e.jsxs(Ot,{as:"form",onSubmit:z,children:[e.jsx(ut,{children:"Edit Club"}),e.jsx(wt,{}),e.jsx(lt,{children:e.jsxs(de,{spacing:4,align:"stretch",children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Club Name"}),e.jsx(We,{value:i,onChange:L=>o(L.target.value)})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Description"}),e.jsx(Yt,{value:a,onChange:L=>d(L.target.value)})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Club Logo"}),u&&e.jsxs(E,{mb:3,children:[e.jsx(vt,{src:u,alt:"Club logo preview",maxH:"200px",maxW:"100%",objectFit:"cover",borderRadius:"md",border:"1px solid",borderColor:"gray.200"}),e.jsx(m,{fontSize:"xs",color:"gray.500",mt:1,children:"Current logo"})]}),e.jsx(We,{type:"file",onChange:w,accept:"image/*"}),e.jsx(m,{fontSize:"xs",color:"gray.500",mt:1,children:"Upload a new logo to replace the current one (optional)"})]})]})}),e.jsxs(xt,{children:[e.jsx(G,{variant:"ghost",mr:3,onClick:r,isDisabled:O,children:"Cancel"}),e.jsx(G,{colorScheme:"blue",type:"submit",isLoading:O,children:"Save Changes"})]})]})]})},Of=({isOpen:t,onClose:r,clubId:n,onMemberAdded:s})=>{const[i,o]=h.useState(""),[a,d]=h.useState(null),[v,g]=h.useState(null),[u,y]=h.useState(!1),O=St(),M=R("gray.200","gray.600"),_=L=>{const $=L.target.files[0];if($){d($);const A=new FileReader;A.onloadend=()=>{g(A.result)},A.readAsDataURL($)}},w=async L=>{if(L.preventDefault(),!i.trim()){O({title:"Error",description:"Please enter member name",status:"error",duration:3e3,isClosable:!0});return}if(!a){O({title:"Error",description:"Please select a member picture",status:"error",duration:3e3,isClosable:!0});return}y(!0);try{const $=new FormData;$.append("name",i),$.append("picture",a),await xf(n,$),O({title:"Success",description:"Member added successfully",status:"success",duration:3e3,isClosable:!0}),o(""),d(null),g(null),s(),r()}catch($){O({title:"Error",description:$.message||"Failed to add member",status:"error",duration:5e3,isClosable:!0})}finally{y(!1)}},z=()=>{o(""),d(null),g(null),r()};return e.jsxs(kt,{isOpen:t,onClose:z,size:"md",children:[e.jsx(at,{backdropFilter:"blur(4px)"}),e.jsxs(Ot,{children:[e.jsx(ut,{children:"Add New Member"}),e.jsx(wt,{}),e.jsxs("form",{onSubmit:w,children:[e.jsx(lt,{children:e.jsxs(de,{spacing:4,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Member Name"}),e.jsx(We,{value:i,onChange:L=>o(L.target.value),placeholder:"Enter member name"})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Member Picture"}),e.jsx(E,{borderWidth:"2px",borderStyle:"dashed",borderColor:M,borderRadius:"lg",p:4,textAlign:"center",cursor:"pointer",_hover:{borderColor:"blue.500"},onClick:()=>document.getElementById("member-picture-input").click(),children:v?e.jsx(vt,{src:v,alt:"Preview",maxH:"200px",mx:"auto",borderRadius:"md"}):e.jsxs(de,{spacing:2,children:[e.jsx(ti,{size:40}),e.jsx(m,{fontSize:"sm",children:"Click to upload member picture"})]})}),e.jsx(We,{id:"member-picture-input",type:"file",accept:"image/*",onChange:_,display:"none"})]})]})}),e.jsxs(xt,{children:[e.jsx(G,{variant:"ghost",mr:3,onClick:z,children:"Cancel"}),e.jsx(G,{colorScheme:"blue",type:"submit",isLoading:u,loadingText:"Adding...",children:"Add Member"})]})]})]})]})},Rf=({isOpen:t,onClose:r,clubId:n,member:s,onMemberUpdated:i})=>{const[o,a]=h.useState(""),[d,v]=h.useState(null),[g,u]=h.useState(null),[y,O]=h.useState(!1),M=St(),_=R("gray.200","gray.600");h.useEffect(()=>{s&&(a(s.name||""),u(s.picture))},[s]);const w=$=>{const A=$.target.files[0];if(A){v(A);const B=new FileReader;B.onloadend=()=>{u(B.result)},B.readAsDataURL(A)}},z=async $=>{if($.preventDefault(),!o.trim()){M({title:"Error",description:"Please enter member name",status:"error",duration:3e3,isClosable:!0});return}O(!0);try{const A=new FormData;A.append("name",o),d&&A.append("picture",d),await bf(n,s.id,A),M({title:"Success",description:"Member updated successfully",status:"success",duration:3e3,isClosable:!0}),i(),r()}catch(A){M({title:"Error",description:A.message||"Failed to update member",status:"error",duration:5e3,isClosable:!0})}finally{O(!1)}},L=()=>{a(""),v(null),u(null),r()};return e.jsxs(kt,{isOpen:t,onClose:L,size:"md",children:[e.jsx(at,{backdropFilter:"blur(4px)"}),e.jsxs(Ot,{children:[e.jsx(ut,{children:"Edit Member"}),e.jsx(wt,{}),e.jsxs("form",{onSubmit:z,children:[e.jsx(lt,{children:e.jsxs(de,{spacing:4,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Member Name"}),e.jsx(We,{value:o,onChange:$=>a($.target.value),placeholder:"Enter member name"})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Member Picture"}),e.jsx(E,{borderWidth:"2px",borderStyle:"dashed",borderColor:_,borderRadius:"lg",p:4,textAlign:"center",cursor:"pointer",_hover:{borderColor:"blue.500"},onClick:()=>document.getElementById("edit-member-picture-input").click(),children:g?e.jsx(vt,{src:g,alt:"Preview",maxH:"200px",mx:"auto",borderRadius:"md"}):e.jsxs(de,{spacing:2,children:[e.jsx(ti,{size:40}),e.jsx(m,{fontSize:"sm",children:"Click to upload member picture"})]})}),e.jsx(We,{id:"edit-member-picture-input",type:"file",accept:"image/*",onChange:w,display:"none"}),e.jsx(m,{fontSize:"xs",color:"gray.500",mt:2,children:"Leave empty to keep current picture"})]})]})}),e.jsxs(xt,{children:[e.jsx(G,{variant:"ghost",mr:3,onClick:L,children:"Cancel"}),e.jsx(G,{colorScheme:"blue",type:"submit",isLoading:y,loadingText:"Updating...",children:"Update Member"})]})]})]})]})},zf=({members:t,textColor:r,mutedText:n,accentColor:s,borderColor:i,formatDate:o})=>{const[a,d]=h.useState(0),[v,g]=h.useState(0),[u,y]=h.useState(0),O=R("gray.50","gray.800"),M=()=>{d(A=>A===0?t.length-1:A-1)},_=()=>{d(A=>A===t.length-1?0:A+1)},w=A=>{g(A.targetTouches[0].clientX)},z=A=>{y(A.targetTouches[0].clientX)},L=()=>{if(!v||!u)return;const A=v-u,B=A>50,p=A<-50;B&&_(),p&&M(),g(0),y(0)},$=t[a];return e.jsxs(E,{position:"relative",py:4,children:[e.jsx(E,{onTouchStart:w,onTouchMove:z,onTouchEnd:L,cursor:"pointer",children:e.jsx(et,{bg:O,borderWidth:"2px",borderColor:s,borderRadius:"2xl",overflow:"hidden",boxShadow:"xl",maxW:"400px",mx:"auto",children:e.jsx(It,{p:8,children:e.jsxs(de,{spacing:6,children:[e.jsxs(E,{position:"relative",children:[e.jsx(gt,{size:"2xl",src:$.picture,name:$.name,borderWidth:"4px",borderColor:s,boxShadow:"lg"}),e.jsxs(dt,{position:"absolute",bottom:"-2",right:"-2",colorScheme:"blue",fontSize:"xs",px:2,py:1,borderRadius:"full",children:[a+1," / ",t.length]})]}),e.jsxs(de,{spacing:2,w:"full",children:[e.jsx(m,{fontWeight:"bold",fontSize:"2xl",color:r,textAlign:"center",children:$.name}),(localStorage.getItem("role")==="admin"||localStorage.getItem("role")==="moderator")&&e.jsxs(Te,{spacing:2,mt:2,children:[e.jsx(Ke,{icon:e.jsx(Mr,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>window.handleEditMember($),"aria-label":"Edit member"}),e.jsx(Ke,{icon:e.jsx(is,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>window.handleDeleteMember($),"aria-label":"Delete member"})]})]})]})})})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(Ke,{icon:e.jsx(or,{}),position:"absolute",left:{base:0,md:-4},top:"50%",transform:"translateY(-50%)",onClick:M,colorScheme:"blue",variant:"solid",borderRadius:"full",size:"lg",boxShadow:"lg","aria-label":"Previous member",zIndex:2}),e.jsx(Ke,{icon:e.jsx(Sr,{}),position:"absolute",right:{base:0,md:-4},top:"50%",transform:"translateY(-50%)",onClick:_,colorScheme:"blue",variant:"solid",borderRadius:"full",size:"lg",boxShadow:"lg","aria-label":"Next member",zIndex:2})]}),t.length>1&&e.jsx(Te,{justify:"center",spacing:2,mt:6,children:t.map((A,B)=>e.jsx(E,{w:a===B?"24px":"8px",h:"8px",borderRadius:"full",bg:a===B?s:i,transition:"all 0.3s",cursor:"pointer",onClick:()=>d(B)},B))}),t.length>1&&e.jsx(m,{textAlign:"center",fontSize:"xs",color:n,mt:4,fontStyle:"italic",children:"Swipe or use arrows to navigate"})]})},Ef=({isOpen:t,onClose:r,clubId:n})=>{const[s,i]=h.useState(null),[o,a]=h.useState(!1),[d,v]=h.useState(null),[g,u]=h.useState(null),[y,O]=h.useState(null),{isOpen:M,onOpen:_,onClose:w}=pt(),{isOpen:z,onOpen:L,onClose:$}=pt(),{isOpen:A,onOpen:B,onClose:p}=pt(),j=tr.useRef(),k=St(),I=localStorage.getItem("role"),x=I==="admin"||I==="moderator",f=R("white","gray.700"),S=R("gray.800","white"),P=R("gray.600","gray.400"),T=R("gray.200","gray.600"),D=R("blue.500","blue.300"),Z=R("linear(to-br, blue.50, purple.50)","linear(to-br, gray.800, gray.900)");h.useEffect(()=>{t&&n&&re()},[t,n]);const re=async()=>{a(!0),v(null);try{const b=await gf(n);i(b)}catch(b){v(b.message||"Failed to fetch club details")}finally{a(!1)}},c=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),fe=b=>{u(b),L()},C=b=>{O(b),B()},l=async()=>{if(y)try{await yf(n,y.id),k({title:"Success",description:"Member removed successfully",status:"success",duration:3e3,isClosable:!0}),p(),O(null),re()}catch(b){k({title:"Error",description:b.message||"Failed to remove member",status:"error",duration:5e3,isClosable:!0})}};return h.useEffect(()=>(window.handleEditMember=fe,window.handleDeleteMember=C,()=>{delete window.handleEditMember,delete window.handleDeleteMember}),[n]),e.jsxs(kt,{isOpen:t,onClose:r,size:"4xl",scrollBehavior:"inside",children:[e.jsx(at,{backdropFilter:"blur(4px)"}),e.jsxs(Ot,{maxH:"90vh",children:[e.jsx(ut,{bgGradient:Z,borderTopRadius:"md",pb:4,children:e.jsx(m,{fontSize:"2xl",fontWeight:"bold",color:S,children:"Club Details"})}),e.jsx(wt,{top:4}),e.jsx(lt,{p:6,children:o?e.jsx(N,{justify:"center",align:"center",minH:"300px",children:e.jsx(_t,{size:"xl",color:D,thickness:"4px"})}):d?e.jsx(E,{textAlign:"center",py:10,children:e.jsx(m,{color:"red.500",fontSize:"lg",children:d})}):s?e.jsxs(de,{spacing:6,align:"stretch",children:[e.jsx(et,{bg:f,boxShadow:"md",borderRadius:"xl",overflow:"hidden",children:e.jsx(It,{p:0,children:e.jsxs(N,{direction:{base:"column",md:"row"},align:"center",gap:6,p:6,children:[e.jsx(vt,{src:s.logo,alt:s.name,boxSize:{base:"120px",md:"150px"},objectFit:"cover",borderRadius:"xl",boxShadow:"lg"}),e.jsxs(de,{align:{base:"center",md:"flex-start"},flex:1,spacing:3,children:[e.jsx(Ee,{size:"lg",color:S,textAlign:{base:"center",md:"left"},children:s.name}),e.jsx(m,{color:P,fontSize:"md",textAlign:{base:"center",md:"left"},children:s.description}),e.jsxs(Te,{spacing:4,flexWrap:"wrap",justify:{base:"center",md:"flex-start"},children:[e.jsx(dt,{colorScheme:"blue",px:3,py:1,borderRadius:"full",fontSize:"sm",children:e.jsxs(Te,{spacing:1,children:[e.jsx(Ft,{}),e.jsxs(m,{children:[s.members," members"]})]})}),s.upcoming_event&&e.jsx(dt,{colorScheme:"purple",px:3,py:1,borderRadius:"full",fontSize:"sm",children:e.jsxs(Te,{spacing:1,children:[e.jsx(Bt,{}),e.jsx(m,{children:"Upcoming Event"})]})})]})]})]})})}),s.upcoming_event&&e.jsx(et,{bg:f,boxShadow:"md",borderRadius:"xl",children:e.jsxs(It,{children:[e.jsx(Ee,{size:"md",mb:4,color:S,children:"Upcoming Event"}),e.jsxs(de,{align:"stretch",spacing:2,children:[e.jsx(m,{fontSize:"lg",fontWeight:"semibold",color:D,children:s.upcoming_event.title}),e.jsx(m,{color:P,children:s.upcoming_event.description||"No description available"})]})]})}),e.jsx(et,{bg:f,boxShadow:"md",borderRadius:"xl",children:e.jsxs(It,{children:[e.jsxs(N,{justify:"space-between",align:"center",mb:4,children:[e.jsx(Ee,{size:"md",color:S,children:"Meet the Members"}),x&&e.jsx(G,{leftIcon:e.jsx(Ut,{}),colorScheme:"blue",size:"sm",onClick:_,children:"Add Member"})]}),e.jsx(Et,{mb:4,borderColor:T}),s.club_members&&s.club_members.length>0?e.jsx(zf,{members:s.club_members,textColor:S,mutedText:P,accentColor:D,borderColor:T,formatDate:c}):e.jsxs(E,{textAlign:"center",py:8,children:[e.jsx(Ft,{size:50,style:{margin:"0 auto 16px",opacity:.3}}),e.jsx(m,{color:P,fontSize:"lg",children:"No members found"})]})]})})]}):null}),e.jsx(xt,{borderTop:"1px solid",borderColor:T,children:e.jsx(G,{colorScheme:"blue",onClick:r,children:"Close"})})]}),e.jsx(Of,{isOpen:M,onClose:w,clubId:n,onMemberAdded:re}),e.jsx(Rf,{isOpen:z,onClose:$,clubId:n,member:g,onMemberUpdated:re}),e.jsx(cn,{isOpen:A,leastDestructiveRef:j,onClose:p,children:e.jsx(at,{children:e.jsxs(dn,{children:[e.jsx(ut,{fontSize:"lg",fontWeight:"bold",children:"Remove Member"}),e.jsxs(lt,{children:["Are you sure you want to remove ",e.jsx("strong",{children:y==null?void 0:y.name})," from the club? This action cannot be undone."]}),e.jsxs(xt,{children:[e.jsx(G,{ref:j,onClick:p,children:"Cancel"}),e.jsx(G,{colorScheme:"red",onClick:l,ml:3,children:"Remove"})]})]})})})]})},Tf=ot(et),Pf=()=>{const[t,r]=h.useState([]),[n,s]=h.useState(!0),[i,o]=h.useState(null),[a,d]=h.useState(1),[v,g]=h.useState(1),[u,y]=h.useState(""),O=localStorage.getItem("role"),M=O==="admin"||O==="moderator",_=R("white","gray.700"),w=R("gray.800","white"),z=R("gray.500","gray.400"),L=R("blue.500","blue.200"),$=R("gray.200","gray.700"),A=Lt(),B=Wr({base:!0,md:!1}),p=St(),{isOpen:j,onOpen:k,onClose:I}=pt(),{isOpen:x,onOpen:f,onClose:S}=pt(),[P,T]=h.useState(null),{isOpen:D,onOpen:Z,onClose:re}=pt(),[c,fe]=h.useState(null),{isOpen:C,onOpen:l,onClose:b}=pt(),[F,se]=h.useState(null),{isOpen:V,onOpen:ae,onClose:X}=pt(),[ie,he]=h.useState(null),le=h.useRef(),ue=h.useCallback(async(ee,ze)=>{s(!0),o(null);try{const Le=await io(ee,ze);if(!Le||!Le.data){r([]);return}r(Le.data),g(Le.last_page||1),d(Le.current_page||1)}catch(Le){o(Le.message||"Failed to fetch clubs."),p({title:"Error",description:Le.message,status:"error",duration:5e3,isClosable:!0})}finally{s(!1)}},[p,io]);h.useEffect(()=>{const ee=setTimeout(()=>{ue(a,u)},300);return()=>clearTimeout(ee)},[a,u,ue]);const Pe=ee=>{T(ee),f()},Ae=ee=>{fe(ee),Z()},De=ee=>{se(ee),l()},Oe=ee=>{he(ee),ae()},qe=async()=>{if(ie)try{await Sf(ie.id),p({title:"Club deleted",status:"success",duration:3e3,isClosable:!0}),X(),he(null),ue(a,u)}catch(ee){p({title:"Error",description:ee.message,status:"error",duration:5e3,isClosable:!0})}},Ge=ee=>e.jsxs(Tf,{bg:_,boxShadow:"md",borderRadius:"lg",overflow:"hidden",whileHover:{y:-5},transition:{duration:.2},children:[e.jsx(E,{position:"relative",children:e.jsx(vt,{src:ee.logo,alt:`${ee.name} logo`,height:"130px",width:"100%",objectFit:"cover"})}),e.jsxs(It,{pt:3,children:[e.jsx(Ee,{size:"md",mb:2,color:w,children:ee.name}),e.jsx(m,{fontSize:"sm",color:z,noOfLines:2,mb:3,children:ee.description}),e.jsxs(mt,{spacing:2,mb:4,children:[e.jsxs(Te,{children:[e.jsx(Ft,{size:14,color:L}),e.jsxs(m,{fontSize:"sm",color:w,children:[ee.members," members"]})]}),ee.upcoming_event&&e.jsxs(Te,{children:[e.jsx(Bt,{size:14,color:L}),e.jsxs(m,{fontSize:"sm",color:w,children:["Upcoming: ",ee.upcoming_event.title]})]})]})]}),e.jsx(Ir,{pt:0,borderTop:"1px solid",borderColor:$,children:e.jsxs(N,{justify:"space-between",align:"center",w:"full",children:[e.jsx(G,{leftIcon:e.jsx(Xo,{}),variant:"ghost",colorScheme:"blue",size:"sm",onClick:()=>De(ee),children:"View Members"}),(O==="admin"||O==="moderator")&&e.jsxs(Tt,{children:[e.jsx(Pt,{as:Ke,icon:e.jsx(ei,{}),size:"sm",variant:"ghost"}),e.jsxs(At,{children:[e.jsx(Qe,{icon:e.jsx(Ut,{}),onClick:()=>Pe(ee),children:"Create Event"}),e.jsx(Qe,{icon:e.jsx(Mr,{}),onClick:()=>Ae(ee),children:"Edit Club"}),e.jsx(Qe,{icon:e.jsx(is,{}),onClick:()=>Oe(ee),color:"red.500",children:"Delete Club"})]})]})]})})]},ee.id),Q=ee=>{d(1),y(ee.target.value)};return e.jsx(N,{minH:"100vh",p:{base:4,md:8},bg:R("gray.50","gray.800"),children:e.jsxs(E,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsxs(N,{justify:"space-between",align:"center",mb:6,direction:B?"column":"row",gap:4,children:[e.jsxs(Te,{spacing:4,children:[e.jsx(Ke,{icon:e.jsx(Vt,{}),"aria-label":"Go back",onClick:()=>A("/dashboard"),variant:"ghost",borderRadius:"full"}),e.jsx(Ee,{size:"xl",color:w,fontWeight:"800",letterSpacing:"tight",children:"Students Clubs"})]}),M&&e.jsx(G,{leftIcon:e.jsx(Ut,{}),colorScheme:"blue",onClick:k,size:"sm",children:"Create Club"})]}),e.jsx(N,{justify:"space-between",align:B?"flex-start":"center",direction:B?"column":"row",gap:4,mb:6,children:e.jsxs(jt,{maxW:"250px",children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Dr,{color:z})}),e.jsx(We,{placeholder:"Search clubs...",size:"sm",borderRadius:"full",value:u,onChange:Q,_focus:{boxShadow:`0 0 0 2px ${L}`}})]})}),n?e.jsx(N,{justify:"center",py:10,children:e.jsx(_t,{size:"xl"})}):i?e.jsx(m,{color:"red.500",children:i}):t.length>0?e.jsx(Ht,{columns:{base:1,md:2,lg:3},spacing:6,children:t.map(ee=>Ge(ee))}):e.jsx(N,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(E,{textAlign:"center",maxW:"400px",children:[e.jsx(Dr,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),e.jsx(Ee,{size:"md",mb:2,color:w,children:"No clubs found"}),e.jsx(m,{color:z,children:u?`No clubs match your search "${u}". Try a different search term.`:"No clubs are available at the moment."})]})}),t.length>0&&e.jsx(N,{justify:"center",mt:8,children:e.jsxs(Te,{children:[e.jsx(G,{onClick:()=>d(ee=>Math.max(1,ee-1)),isDisabled:a<=1,children:"Previous"}),e.jsxs(m,{children:["Page ",a," of ",v]}),e.jsx(G,{onClick:()=>d(ee=>Math.min(v,ee+1)),isDisabled:a>=v,children:"Next"})]})}),e.jsx(Cf,{isOpen:j,onClose:I,onClubCreated:()=>ue(1,"")}),e.jsx(_f,{isOpen:x,onClose:S,club:P,onEventCreated:()=>ue(a,u)}),e.jsx(kf,{isOpen:D,onClose:re,club:c,onClubUpdated:()=>ue(a,u)}),e.jsx(Ef,{isOpen:C,onClose:b,clubId:F==null?void 0:F.id}),e.jsx(cn,{isOpen:V,leastDestructiveRef:le,onClose:X,children:e.jsx(at,{children:e.jsxs(dn,{children:[e.jsx(ut,{fontSize:"lg",fontWeight:"bold",children:"Delete Club"}),e.jsxs(lt,{children:["Are you sure you want to delete ",e.jsx("strong",{children:ie==null?void 0:ie.name}),"? This action cannot be undone."]}),e.jsxs(xt,{children:[e.jsx(G,{ref:le,onClick:X,children:"Cancel"}),e.jsx(G,{colorScheme:"red",onClick:qe,ml:3,children:"Delete"})]})]})})})]})})},wn=async(t={})=>(await we.get("/study-groups",{params:t})).data,Af=async t=>(await we.post("/study-groups",t)).data,Mf=async t=>(await we.post(`/study-groups/${t}/join`)).data,Df=async t=>(await we.post(`/study-groups/${t}/leave`)).data,As=async(t={})=>(await we.get("/study-groups/my-groups",{params:t})).data,Lf=async(t,r)=>(await we.put(`/study-groups/${t}`,r)).data,Ff=async t=>(await we.delete(`/study-groups/${t}`)).data,Wf=ot(et),If=({group:t,onJoinLeave:r,onEdit:n,onDelete:s,currentUser:i})=>{const o=R("white","gray.700"),a=R("gray.800","white"),d=R("gray.500","gray.400"),v=R("gray.100","gray.600"),g=R("gray.200","gray.700"),u=St(),y=i&&t.creator&&i.id===t.creator.id,O=()=>{const M=`${window.location.origin}/study-groups/${t.id}`;navigator.share?navigator.share({title:`Join "${t.name}" Study Group`,text:`Join our study group for ${t.course}`,url:M}).catch(()=>{navigator.clipboard.writeText(M),u({title:"Link copied to clipboard",status:"success",duration:2e3})}):(navigator.clipboard.writeText(M),u({title:"Group link copied to clipboard",status:"success",duration:2e3}))};return e.jsxs(Wf,{bg:o,boxShadow:"md",borderRadius:"lg",overflow:"hidden",whileHover:{y:-5},transition:{duration:.2},children:[e.jsx(ln,{children:e.jsxs(N,{justify:"space-between",align:"center",children:[e.jsx(Ee,{size:"md",color:a,children:t.name||"Untitled Group"}),e.jsx(Wt,{colorScheme:"blue",children:t.course||"Unknown Course"})]})}),e.jsxs(It,{children:[e.jsx(m,{color:a,mb:3,noOfLines:2,children:t.description}),e.jsx(Te,{spacing:2,mb:4,flexWrap:"wrap",children:(t.tags||[]).map((M,_)=>e.jsx(Wt,{size:"sm",colorScheme:"gray",borderRadius:"full",children:M},_))}),e.jsx(Et,{my:4,borderColor:g}),e.jsxs(mt,{spacing:3,children:[e.jsxs(N,{align:"center",color:d,children:[e.jsx(Ft,{style:{marginRight:"8px"}}),e.jsxs(m,{children:[t.members||0," / ",t.capacity||15," Members"]})]}),e.jsxs(N,{align:"center",color:d,children:[e.jsx(nn,{style:{marginRight:"8px"}}),e.jsxs(m,{children:["Session: ",t.formattedTime||"TBD"]})]}),e.jsxs(N,{align:"center",color:d,children:[e.jsx(Zr,{style:{marginRight:"8px"}}),e.jsx(m,{noOfLines:1,children:t.location||"TBD"})]})]})]}),e.jsx(Ir,{pt:0,borderTop:"1px solid",borderColor:g,children:e.jsxs(N,{justify:"space-between",align:"center",w:"full",children:[e.jsxs(Tt,{children:[e.jsx(Pt,{as:Ke,"aria-label":"Options",icon:e.jsx(Qo,{}),variant:"ghost",size:"sm",borderRadius:"full",_hover:{bg:v}}),e.jsxs(At,{children:[y&&e.jsxs(e.Fragment,{children:[e.jsx(Qe,{icon:e.jsx(Mr,{}),onClick:()=>n&&n(t),children:"Edit Group"}),e.jsx(Qe,{icon:e.jsx(fn,{}),onClick:()=>s&&s(t),color:"red.500",_hover:{bg:"red.50"},children:"Delete Group"})]}),e.jsx(Qe,{icon:e.jsx(ss,{}),onClick:O,children:"Share Group Link"})]})]}),e.jsx(G,{colorScheme:t.isJoined?"red":"blue",variant:t.isJoined?"outline":"solid",size:"sm",borderRadius:"full",onClick:()=>r(t.id),leftIcon:t.isJoined?void 0:e.jsx(Ut,{}),children:t.isJoined?"Leave Group":"Join Group"})]})})]})},Nf=({type:t="filter",title:r,message:n})=>{const s=R("gray.500","gray.400"),i={filter:"No study groups found",myGroups:"You haven't joined any study groups yet"},o={filter:"Try changing your search terms or filters",myGroups:"Join a study group to collaborate with others and improve your learning"},a=r||i[t],d=n||o[t];return e.jsx(N,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(E,{textAlign:"center",maxW:"400px",children:[t==="filter"?e.jsx(rs,{size:50,style:{margin:"0 auto 20px",opacity:.3}}):e.jsx(Ft,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),e.jsx(Ee,{size:"md",mb:2,children:a}),e.jsx(m,{color:s,mb:6,children:d})]})})},qf=({groups:t,onJoinLeave:r,onEdit:n,onDelete:s,currentUser:i,emptyStateType:o})=>t.length===0?e.jsx(Nf,{type:o}):e.jsx(Ht,{columns:{base:1,md:2},spacing:6,children:t.map(a=>e.jsx(If,{group:a,onJoinLeave:r,onEdit:n,onDelete:s,currentUser:i},a.id))}),Bf=({isOpen:t,onClose:r,newGroup:n,onInputChange:s,onCreateGroup:i,courses:o=[],coursesLoading:a=!1,currentCoursePage:d=1,totalCoursePages:v=1,onCoursePageChange:g=()=>{}})=>{const u=R("gray.200","gray.700"),y=R("gray.500","gray.400");return e.jsxs(kt,{isOpen:t,onClose:r,size:"lg",isCentered:!0,children:[e.jsx(at,{}),e.jsxs(Ot,{borderRadius:"xl",children:[e.jsx(ut,{borderBottomWidth:"1px",borderColor:u,pb:4,children:e.jsx(Ee,{size:"md",children:"Create a New Study Group"})}),e.jsx(wt,{}),e.jsx(lt,{py:6,children:e.jsxs(mt,{spacing:5,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{fontWeight:"medium",children:"Group Name"}),e.jsx(We,{name:"name",value:n.name,onChange:s,placeholder:"e.g., Calculus II Problem Solvers",borderRadius:"md"})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{fontWeight:"medium",children:"Course"}),e.jsxs(Tt,{children:[e.jsx(Pt,{as:G,rightIcon:e.jsx(ur,{}),w:"100%",textAlign:"left",fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:n.course_id&&o.length>0&&o.find(O=>O.id===Number(n.course_id))?`${o.find(O=>O.id===Number(n.course_id)).code} - ${o.find(O=>O.id===Number(n.course_id)).title}`:"Select course"}),e.jsxs(At,{maxH:"320px",overflowY:"auto",minW:"400px",children:[a?e.jsx(N,{justify:"center",align:"center",h:"100px",children:e.jsx(_t,{})}):o.map(O=>{var M;return e.jsx(Qe,{onClick:()=>s({target:{name:"course_id",value:O.id}}),children:e.jsxs(E,{children:[e.jsxs(m,{fontWeight:"medium",children:[O.code," - ",O.title]}),e.jsx(m,{fontSize:"sm",color:y,children:(M=O.major)==null?void 0:M.name})]})},O.id)}),v>1&&e.jsx(E,{borderTop:"1px solid",borderColor:u,mt:2,pt:2,px:2,children:e.jsxs(N,{justify:"space-between",align:"center",children:[e.jsx(G,{size:"xs",onClick:O=>{O.stopPropagation(),g(d-1)},isDisabled:d<=1||a,variant:"outline",borderRadius:"md",children:"Prev"}),e.jsxs(m,{fontSize:"xs",color:y,mx:2,children:["Page ",d," of ",v]}),e.jsx(G,{size:"xs",onClick:O=>{O.stopPropagation(),g(d+1)},isDisabled:d>=v||a,variant:"outline",borderRadius:"md",children:"Next"})]})})]})]})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{fontWeight:"medium",children:"Description"}),e.jsx(Yt,{name:"description",value:n.description,onChange:s,placeholder:"Describe the purpose, goals, and activities of your study group...",borderRadius:"md",minHeight:"120px"})]}),e.jsxs(ct,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{fontWeight:"medium",children:"Meeting Time"}),e.jsx(We,{type:"datetime-local",name:"meeting_time",value:n.meeting_time,onChange:s,borderRadius:"md"})]}),e.jsxs(xe,{children:[e.jsx(be,{fontWeight:"medium",children:"Location"}),e.jsx(We,{name:"location",value:n.location,onChange:s,placeholder:"e.g., Library Room 201",borderRadius:"md",isDisabled:n.isOnline})]})]}),e.jsx(xe,{children:e.jsx(Ha,{name:"isOnline",isChecked:n.isOnline,onChange:s,children:"This is an online meeting"})})]})}),e.jsxs(xt,{borderTopWidth:"1px",borderColor:u,pt:4,children:[e.jsx(G,{variant:"ghost",mr:3,onClick:r,borderRadius:"md",children:"Cancel"}),e.jsx(G,{colorScheme:"blue",leftIcon:e.jsx(wr,{}),onClick:i,isDisabled:!n.name||!n.course_id||!n.description||!n.meeting_time||!n.isOnline&&!n.location,borderRadius:"md",children:"Create Group"})]})]})]})};ot(et);const Kr=(t,r)=>{if(!t)return"Unknown Course";if(typeof t=="string")return t;if(t.code)return`${t.code}`;const n=r.find(s=>s.id===t);return n?`${n.code} - ${n.title}`:"Unknown Course"},zr=t=>t?new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"TBD",Uf=()=>{const t=Lt(),r=St(),{isOpen:n,onOpen:s,onClose:i}=pt(),{user:o}=ar(),{isOpen:a,onOpen:d,onClose:v}=pt(),[g,u]=h.useState(null),y=h.useRef(),{isOpen:O,onOpen:M,onClose:_}=pt(),[w,z]=h.useState(null),[L,$]=h.useState({}),A=R("white","gray.700"),B=R("gray.800","white"),p=R("gray.500","gray.400"),j=R("blue.500","blue.300");R("gray.100","gray.600");const k=R("gray.200","gray.700"),[I,x]=h.useState(""),[f,S]=h.useState(0),[P,T]=h.useState(!1),[D,Z]=h.useState([]),[re,c]=h.useState([]),[fe,C]=h.useState([]),[l,b]=h.useState(!1),[F,se]=h.useState(1),[V,ae]=h.useState(1),[X,ie]=h.useState(!0),[he,le]=h.useState(!1),[ue,Pe]=h.useState(!1),[Ae,De]=h.useState(1),[Oe,qe]=h.useState(1),[Ge,Q]=h.useState(0),[ee,ze]=h.useState({is_online:null,is_complete:null,course_id:""}),[Le,Ve]=h.useState({name:"",course_id:"",description:"",meeting_time:"",location:"",isOnline:!1}),Ze=async q=>{if(!(q<1||q>V)){b(!0);try{const ce=localStorage.getItem("major_id"),Ie=localStorage.getItem("faculty_id"),Ce={...ce?{major_id:ce}:Ie?{faculty_id:Ie}:{},page:q,per_page:10},Re=await an(Ce);C(Re.data||[]),se(Re.current_page||q),ae(Re.last_page||1)}catch(ce){Y("Failed to fetch courses",ce)}finally{b(!1)}}},st=q=>{Ve(ce=>({...ce,isOnline:q.target.checked,location:q.target.checked?"":ce.location}))},me=q=>{const{name:ce,value:Ie,type:Ce,checked:Re}=q.target;Ve(Ne=>({...Ne,[ce]:Ce==="checkbox"?Re:Ie}))};h.useEffect(()=>{(async()=>{ie(!0),le(!0),b(!0);try{const ce=localStorage.getItem("major_id"),Ie=localStorage.getItem("faculty_id");let Ce={};ce?Ce.major_id=ce:Ie&&(Ce.faculty_id=Ie);const[Re,Ne,Je]=await Promise.all([wn(Ce),As(),an({...ce?{major_id:ce}:Ie?{faculty_id:Ie}:{},page:1,per_page:10})]);C(Je.data||[]),se(Je.current_page||1),ae(Je.last_page||1);const oe=je=>({...je,meetings:je.meeting_time?[je.meeting_time]:[],members:je.members_count||1,tags:je.major?[je.major.name]:[],leader:je.creator||{},course:Kr(je.course,Je.data||[]),formattedTime:zr(je.meeting_time),isPast:je.meeting_time?new Date(je.meeting_time)<new Date:!1}),Me=Array.isArray(Ne)?Ne:Ne.data||[],He=new Set(Me.map(je=>je.id));Z(Re.data.map(je=>({...oe(je),isJoined:He.has(je.id)}))),Re.current_page!==void 0&&(De(Re.current_page),qe(Re.last_page||1),Q(Re.total||0)),c(Me.map(je=>({...oe(je),isJoined:!0})))}catch(ce){Y("Failed to load data",ce)}finally{ie(!1),le(!1),b(!1)}})()},[]);const Y=(q,ce)=>{var Ie,Ce;r({title:q,description:((Ce=(Ie=ce==null?void 0:ce.response)==null?void 0:Ie.data)==null?void 0:Ce.message)||ce.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})},U=h.useCallback(async(q=I,ce=ee,Ie=1)=>{Pe(!0);try{const Ce=localStorage.getItem("major_id"),Re=localStorage.getItem("faculty_id"),Ne={...q.trim()&&{q:q.trim()},...ce,...Ce&&{major_id:Ce},...Re&&{faculty_id:Re},page:Ie,per_page:4};Object.keys(Ne).forEach(W=>{(Ne[W]===""||Ne[W]===null)&&delete Ne[W]});const Je=await wn(Ne),oe=W=>({...W,meetings:W.meeting_time?[W.meeting_time]:[],members:W.members_count||1,tags:W.major?[W.major.name]:[],leader:W.creator||{},course:Kr(W.course,fe),formattedTime:zr(W.meeting_time),isPast:W.meeting_time?new Date(W.meeting_time)<new Date:!1}),Me=Array.isArray(re)?re:[],He=new Set(Me.map(W=>W.id)),je=(Je.data||Je).map(W=>({...oe(W),isJoined:He.has(W.id)}));Z(je),Je.current_page!==void 0&&(De(Je.current_page),qe(Je.last_page||1),Q(Je.total||0))}catch(Ce){Y("Search failed",Ce)}finally{Pe(!1)}},[I,ee,fe,re]),J=h.useCallback((q,ce)=>{const Ie={...ee,[q]:ce};ze(Ie),De(1),U(I,Ie,1)},[ee,I,U]),ne=h.useCallback(()=>{const q={is_online:null,is_complete:null,course_id:""};ze(q),De(1),U(I,q,1)},[I,U]),K=h.useCallback(q=>{De(q),U(I,ee,q)},[I,ee,U]);h.useEffect(()=>{const q=setTimeout(()=>{U()},500);return()=>clearTimeout(q)},[I,U]);const te=h.useMemo(()=>D,[D]),pe=h.useMemo(()=>{if(!I)return re;const q=I.toLowerCase();return re.filter(ce=>ce.name.toLowerCase().includes(q)||ce.course.toLowerCase().includes(q)||ce.description.toLowerCase().includes(q))},[re,I]),ve=h.useCallback(async q=>{try{const ce=D.find(W=>W.id===q);if(ce.isPast){r({title:"Cannot join past session",status:"error",duration:3e3});return}await Mf(q),le(!0);const Ie=localStorage.getItem("major_id"),Ce=localStorage.getItem("faculty_id");let Re={};Ie?Re.major_id=Ie:Ce&&(Re.faculty_id=Ce);const[Ne,Je]=await Promise.all([wn(Re),As()]),oe={};Ne.data.forEach(W=>{oe[W.id]={...W,members_count:W.members_count}});const Me=W=>{const Xe=oe[W.id];return{...W,meetings:W.meeting_time?[W.meeting_time]:[],members:Xe?Xe.members_count||1:W.members_count||1,tags:W.major?[W.major.name]:[],leader:W.creator||{},course:Kr(W.course,fe),formattedTime:zr(W.meeting_time),isPast:W.meeting_time?new Date(W.meeting_time)<new Date:!1}},He=Array.isArray(Je)?Je:Je.data||[],je=new Set(He.map(W=>W.id));Z(Ne.data.map(W=>({...Me(W),isJoined:je.has(W.id)}))),c(He.map(W=>{const Xe=oe[W.id];return{...Me(W),members:Xe?Xe.members_count||1:W.members_count||1,isJoined:!0}})),le(!1),r({title:`Joined ${ce.name}`,status:"success"})}catch(ce){Y("Failed to join group",ce),le(!1)}},[D,fe]),ge=h.useCallback(async q=>{try{const ce=await Df(q);ie(!0),le(!0);const Ie=localStorage.getItem("major_id"),Ce=localStorage.getItem("faculty_id");let Re={};Ie?Re.major_id=Ie:Ce&&(Re.faculty_id=Ce);const[Ne,Je]=await Promise.all([wn(Re),As()]),oe=je=>({...je,meetings:je.meeting_time?[je.meeting_time]:[],members:je.members_count||1,tags:je.major?[je.major.name]:[],leader:je.creator||{},course:Kr(je.course,fe),formattedTime:zr(je.meeting_time),isPast:je.meeting_time?new Date(je.meeting_time)<new Date:!1}),Me=Array.isArray(Je)?Je:Je.data||[],He=new Set(Me.map(je=>je.id));Z(Ne.data.map(je=>({...oe(je),isJoined:He.has(je.id)}))),c(Me.map(je=>({...oe(je),isJoined:!0}))),ie(!1),le(!1),ce&&ce.message&&ce.message.includes("The group has been deleted")?r({title:"Group deleted",description:ce.message,status:"info",duration:4e3}):r({title:"Left group",description:(ce==null?void 0:ce.message)||void 0,status:"info",duration:3e3})}catch(ce){Y("Failed to leave group",ce),ie(!1),le(!1)}},[fe]),ye=h.useCallback(async()=>{try{const q=localStorage.getItem("major_id"),ce=localStorage.getItem("faculty_id");if(!q||!ce){r({title:"Missing Profile Information",description:"Please complete your profile (major and faculty) before creating a group.",status:"error",duration:4e3});return}const Ie={...Le,course_id:parseInt(Le.course_id),meeting_time:Le.meeting_time,capacity:15,is_online:Le.isOnline,location:Le.isOnline?"Online":Le.location,major_id:parseInt(q),faculty_id:parseInt(ce)},Ce=await Af(Ie);r({title:"Group created!",status:"success"}),i(),Ve({name:"",course_id:"",description:"",meeting_time:"",location:"",isOnline:!1});const Re={...Ce,meetings:Ce.meeting_time?[Ce.meeting_time]:[],tags:Ce.major?[Ce.major.name]:[],formattedTime:zr(Ce.meeting_time),isPast:Ce.meeting_time?new Date(Ce.meeting_time)<new Date:!1,isJoined:!0,members:1,course:Kr(Ce.course,fe),capacity:Ce.capacity||15};Z(Ne=>[Re,...Ne]),c(Ne=>[Re,...Ne])}catch(q){Y("Failed to create group",q)}},[Le,fe]),tt=h.useCallback(q=>{z(q),$({name:q.name,description:q.description,meeting_time:q.meeting_time?new Date(q.meeting_time).toISOString().slice(0,16):"",location:q.location||"",isOnline:q.isOnline||!1}),M()},[M]),$e=h.useCallback(q=>{u(q),d()},[d]),Se=h.useCallback(async()=>{if(g)try{await Ff(g.id),Z(q=>q.filter(ce=>ce.id!==g.id)),c(q=>q.filter(ce=>ce.id!==g.id)),r({title:"Group deleted",description:"The study group has been successfully deleted.",status:"success",duration:3e3})}catch(q){Y("Failed to delete group",q)}finally{v(),u(null)}},[g,v,r]),Be=h.useCallback(async()=>{if(!w||!L.name||!L.description){r({title:"Please fill in all required fields",status:"error",duration:3e3});return}try{const q={name:L.name,description:L.description,meeting_time:L.meeting_time||null,location:L.isOnline?"Online":L.location,is_online:L.isOnline};await Lf(w.id,q);const ce={...w,...q,formattedTime:zr(L.meeting_time)};Z(Ie=>Ie.map(Ce=>Ce.id===w.id?ce:Ce)),c(Ie=>Ie.map(Ce=>Ce.id===w.id?ce:Ce)),r({title:"Group updated",description:"The study group has been successfully updated.",status:"success",duration:3e3}),_(),z(null),$({})}catch(q){Y("Failed to update group",q)}},[w,L,_,r]),Ue=(q,ce=!1)=>e.jsx(qf,{groups:q,onJoinLeave:Ie=>{const Ce=q.find(Re=>Re.id===Ie);Ce&&Ce.isJoined?ge(Ie):ve(Ie)},onEdit:tt,onDelete:$e,currentUser:o,emptyStateType:ce?"myGroups":"allGroups"}),rt=(q,ce,Ie)=>e.jsx(N,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(E,{textAlign:"center",maxW:"400px",children:[q,e.jsx(Ee,{size:"md",mb:2,children:ce}),e.jsx(m,{color:p,mb:6,children:Ie}),f===0&&e.jsx(G,{colorScheme:"blue",onClick:s,children:"Create Your First Group"})]})}),Mt=()=>e.jsx(Ht,{columns:{base:1,md:2},spacing:6,children:[...Array(4)].map((q,ce)=>e.jsxs(E,{p:6,bg:A,borderRadius:"lg",boxShadow:"md",children:[e.jsx(yt,{height:"32px",mb:4}),e.jsx(ho,{noOfLines:3,spacing:"4"}),e.jsxs(Te,{mt:4,spacing:2,children:[e.jsx(yt,{height:"24px",width:"60px"}),e.jsx(yt,{height:"24px",width:"60px"})]}),e.jsx(Et,{my:4}),e.jsxs(mt,{spacing:3,children:[e.jsx(yt,{height:"20px"}),e.jsx(yt,{height:"20px"}),e.jsx(yt,{height:"20px"})]}),e.jsx(Et,{my:4}),e.jsxs(N,{justify:"space-between",mt:4,children:[e.jsx(yt,{height:"32px",width:"100px"}),e.jsx(yt,{height:"32px",width:"100px"})]})]},ce))});return e.jsxs(N,{minH:"100vh",p:{base:4,md:8},bg:R("gray.50","gray.800"),children:[e.jsxs(E,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsxs(N,{justify:"space-between",align:"center",mb:6,flexWrap:"wrap",gap:4,children:[e.jsxs(Te,{spacing:4,children:[e.jsx(Ke,{icon:e.jsx(Vt,{}),"aria-label":"Go back",onClick:()=>t(-1),variant:"ghost",borderRadius:"full"}),e.jsx(Ee,{size:"xl",color:B,fontWeight:"700",children:"Study Groups"})]}),e.jsx(G,{leftIcon:e.jsx(Ut,{}),colorScheme:"blue",onClick:s,borderRadius:"full",children:"Create Group"})]}),e.jsxs($n,{colorScheme:"blue",mb:6,variant:"soft-rounded",index:f,onChange:S,children:[e.jsxs(N,{justify:"space-between",align:"center",gap:4,mb:4,flexWrap:"wrap",children:[e.jsxs(Hn,{children:[e.jsx(Zt,{children:"All Groups"}),e.jsx(Zt,{children:"My Groups"})]}),e.jsxs(Te,{spacing:2,children:[e.jsxs(G,{leftIcon:e.jsx(ns,{}),variant:"outline",size:"sm",onClick:()=>T(!P),colorScheme:Object.values(ee).some(q=>q!==null&&q!=="")?"blue":"gray",children:["Filters",Object.values(ee).some(q=>q!==null&&q!=="")&&e.jsx(dt,{ml:2,colorScheme:"blue",variant:"solid",children:Object.values(ee).filter(q=>q!==null&&q!=="").length})]}),e.jsxs(jt,{maxW:{base:"250px",md:"300px"},children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Dr,{color:p})}),e.jsx(We,{placeholder:"Search study sessions...",size:"md",borderRadius:"lg",value:I,onChange:q=>x(q.target.value),_focus:{borderColor:j,boxShadow:`0 0 0 1px ${j}`},bg:R("white","gray.700")}),(I||ue)&&e.jsx(Pn,{children:ue?e.jsx(_t,{size:"sm"}):e.jsx(Ke,{icon:e.jsx(sn,{}),size:"sm",variant:"ghost","aria-label":"Clear search",onClick:()=>x("")})})]})]})]}),e.jsx(Ga,{in:P,animateOpacity:!0,children:e.jsx(E,{p:4,bg:R("gray.50","gray.700"),borderRadius:"lg",mb:4,border:"1px solid",borderColor:k,children:e.jsxs(de,{spacing:4,align:"stretch",children:[e.jsxs(Te,{justify:"space-between",align:"center",children:[e.jsx(m,{fontWeight:"medium",fontSize:"sm",color:B,children:"Filter Groups"}),e.jsx(G,{size:"xs",variant:"ghost",onClick:ne,disabled:!Object.values(ee).some(q=>q!==null&&q!==""),children:"Clear All"})]}),"                ",e.jsxs(ct,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:4,children:[e.jsxs(xe,{children:[e.jsx(be,{fontSize:"sm",mb:1,children:"Course"}),e.jsxs(Tt,{children:[e.jsx(Pt,{as:G,size:"sm",w:"100%",rightIcon:e.jsx(ur,{}),textAlign:"left",fontWeight:"normal",bg:R("white","gray.600"),overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:ee.course_id&&fe.find(q=>q.id===Number(ee.course_id))?`${fe.find(q=>q.id===Number(ee.course_id)).code} - ${fe.find(q=>q.id===Number(ee.course_id)).title}`:"Any course"}),e.jsx(Ya,{children:e.jsxs(At,{maxH:"320px",overflowY:"auto",minW:"400px",children:[e.jsx(Qe,{onClick:()=>J("course_id",""),children:"Any course"}),l?e.jsx(N,{justify:"center",align:"center",h:"100px",children:e.jsx(_t,{})}):fe.map(q=>{var ce;return e.jsx(Qe,{onClick:()=>J("course_id",q.id),children:e.jsxs(E,{children:[e.jsxs(m,{fontWeight:"medium",children:[q.code," - ",q.title]}),e.jsx(m,{fontSize:"sm",color:p,children:(ce=q.major)==null?void 0:ce.name})]})},q.id)}),V>1&&e.jsx(E,{borderTop:"1px solid",borderColor:k,mt:2,pt:2,px:2,children:e.jsxs(N,{justify:"space-between",align:"center",children:[e.jsx(G,{size:"xs",onClick:q=>{q.stopPropagation(),Ze(F-1)},isDisabled:F<=1||l,variant:"outline",borderRadius:"md",children:"Prev"}),e.jsxs(m,{fontSize:"xs",color:p,mx:2,children:["Page ",F," of ",V]}),e.jsx(G,{size:"xs",onClick:q=>{q.stopPropagation(),Ze(F+1)},isDisabled:F>=V||l,variant:"outline",borderRadius:"md",children:"Next"})]})})]})})]})]}),e.jsxs(xe,{children:[e.jsx(be,{fontSize:"sm",mb:1,children:"Meeting Type"}),e.jsxs(sr,{size:"sm",value:ee.is_online===null?"":ee.is_online.toString(),onChange:q=>J("is_online",q.target.value===""?null:q.target.value==="true"),placeholder:"Any type",bg:R("white","gray.600"),children:[e.jsx("option",{value:"true",children:"Online"}),e.jsx("option",{value:"false",children:"In-person"})]})]}),e.jsxs(xe,{children:[e.jsx(be,{fontSize:"sm",mb:1,children:"Status"}),e.jsxs(sr,{size:"sm",value:ee.is_complete===null?"":ee.is_complete.toString(),onChange:q=>J("is_complete",q.target.value===""?null:q.target.value==="true"),placeholder:"Any status",bg:R("white","gray.600"),children:[e.jsx("option",{value:"false",children:"Active"}),e.jsx("option",{value:"true",children:"Completed"})]})]})]}),Object.entries(ee).some(([q,ce])=>ce!==null&&ce!=="")&&e.jsxs(E,{children:[e.jsx(m,{fontSize:"xs",color:p,mb:2,children:"Active Filters:"}),e.jsx(Te,{spacing:2,flexWrap:"wrap",children:Object.entries(ee).map(([q,ce])=>{if(ce===null||ce==="")return null;let Ie="",Ce=ce;switch(q){case"course_id":const Re=fe.find(Ne=>Ne.id.toString()===ce.toString());Ie="Course",Ce=Re?Re.code:ce;break;case"is_online":Ie="Type",Ce=ce?"Online":"In-person";break;case"is_complete":Ie="Status",Ce=ce?"Completed":"Active";break}return e.jsxs(Wt,{size:"sm",colorScheme:"blue",variant:"solid",cursor:"pointer",onClick:()=>J(q,q==="is_online"||q==="is_complete"?null:""),children:[Ie,": ",Ce,e.jsx(sn,{style:{marginLeft:"4px"}})]},q)})})]})]})})}),e.jsxs(Gn,{children:[e.jsx(er,{px:0,children:X?Mt():te.length>0?e.jsxs(e.Fragment,{children:[Ue(te),Oe>1&&e.jsxs(E,{mt:8,children:[e.jsx(N,{justify:"center",mb:4,display:{base:"flex",md:"none"},children:e.jsxs(m,{fontSize:"sm",color:p,textAlign:"center",px:4,children:["Page ",Ae," of ",Oe]})}),e.jsxs(N,{justify:"space-between",align:"center",p:6,bg:R("white","gray.700"),borderRadius:"xl",borderWidth:"1px",borderColor:k,shadow:"sm",_hover:{shadow:"md",borderColor:R("gray.300","gray.600")},transition:"all 0.2s",flexDirection:{base:"column",md:"row"},gap:{base:4,md:0},children:[e.jsxs(m,{fontSize:"sm",color:p,fontWeight:"medium",display:{base:"none",md:"block"},children:["Showing page ",Ae," of ",Oe,"  ",Ge," total groups"]}),e.jsxs(Te,{spacing:2,children:[e.jsx(G,{leftIcon:e.jsx(or,{}),onClick:()=>K(Ae-1),isDisabled:Ae===1||ue,variant:"outline",size:"md",borderRadius:"lg",_hover:{bg:R("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",isLoading:ue,loadingText:"Previous",children:"Previous"}),e.jsx(Te,{spacing:1,mx:2,children:(()=>{const q=[],ce=window.innerWidth<768?3:5;let Ie=Math.max(1,Ae-Math.floor(ce/2)),Ce=Math.min(Oe,Ie+ce-1);Ce-Ie+1<ce&&(Ie=Math.max(1,Ce-ce+1)),Ie>1&&(q.push(e.jsx(G,{onClick:()=>K(1),isDisabled:ue,variant:"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",_hover:{bg:R("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"1"},1)),Ie>2&&q.push(e.jsx(m,{color:p,px:2,fontSize:"lg",children:"..."},"ellipsis1")));for(let Re=Ie;Re<=Ce;Re++){const Ne=Re===Ae;q.push(e.jsx(G,{onClick:()=>K(Re),isDisabled:ue,colorScheme:Ne?"blue":void 0,variant:Ne?"solid":"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",fontWeight:Ne?"bold":"medium",_hover:Ne?{}:{bg:R("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",shadow:Ne?"md":"sm",children:Re},Re))}return Ce<Oe&&(Ce<Oe-1&&q.push(e.jsx(m,{color:p,px:2,fontSize:"lg",children:"..."},"ellipsis2")),q.push(e.jsx(G,{onClick:()=>K(Oe),isDisabled:ue,variant:"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",_hover:{bg:R("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:Oe},Oe))),q})()}),e.jsx(G,{rightIcon:e.jsx(Sr,{}),onClick:()=>K(Ae+1),isDisabled:Ae===Oe||ue,variant:"outline",size:"md",borderRadius:"lg",_hover:{bg:R("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",isLoading:ue,loadingText:"Next",children:"Next"})]})]})]})]}):rt(e.jsx(rs,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),"No study groups found","Try changing your search terms or create a new group")}),e.jsx(er,{px:0,children:he?Mt():pe.length>0?Ue(pe,!0):rt(e.jsx(Ft,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),"You haven't joined any groups yet","Join a study group to collaborate with others")})]})]})]}),e.jsx(Bf,{isOpen:n,onClose:i,newGroup:Le,onInputChange:me,onCreateGroup:ye,onToggleOnline:st,subjects:["All",...new Set(fe.map(q=>{var ce;return(ce=q.major)==null?void 0:ce.name}).filter(Boolean))],courses:fe,coursesLoading:l,currentCoursePage:F,totalCoursePages:V,onCoursePageChange:Ze}),e.jsxs(kt,{isOpen:O,onClose:_,size:"lg",isCentered:!0,children:[e.jsx(at,{}),e.jsxs(Ot,{borderRadius:"xl",children:[e.jsx(ut,{borderBottomWidth:"1px",borderColor:k,pb:4,children:"Edit Study Group"}),e.jsx(wt,{}),e.jsx(lt,{py:6,children:e.jsxs(mt,{spacing:4,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Group Name"}),e.jsx(We,{value:L.name||"",onChange:q=>$(ce=>({...ce,name:q.target.value})),placeholder:"Enter group name"})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Description"}),e.jsx(Yt,{value:L.description||"",onChange:q=>$(ce=>({...ce,description:q.target.value})),placeholder:"Describe your study group",rows:3})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Meeting Time"}),e.jsx(We,{type:"datetime-local",value:L.meeting_time||"",onChange:q=>$(ce=>({...ce,meeting_time:q.target.value}))})]}),e.jsxs(xe,{display:"flex",alignItems:"center",children:[e.jsx(be,{mb:"0",children:"Online Meeting"}),e.jsx(Va,{isChecked:L.isOnline||!1,onChange:q=>$(ce=>({...ce,isOnline:q.target.checked}))})]}),!L.isOnline&&e.jsxs(xe,{children:[e.jsx(be,{children:"Location"}),e.jsx(We,{value:L.location||"",onChange:q=>$(ce=>({...ce,location:q.target.value})),placeholder:"Enter meeting location"})]})]})}),e.jsxs(xt,{borderTopWidth:"1px",borderColor:k,pt:4,children:[e.jsx(G,{variant:"ghost",mr:3,onClick:_,children:"Cancel"}),e.jsx(G,{colorScheme:"blue",onClick:Be,isDisabled:!L.name||!L.description,children:"Update Group"})]})]})]}),e.jsx(cn,{isOpen:a,leastDestructiveRef:y,onClose:v,isCentered:!0,children:e.jsx(at,{children:e.jsxs(dn,{borderRadius:"xl",children:[e.jsx(ut,{fontSize:"lg",fontWeight:"bold",children:"Delete Study Group"}),e.jsxs(lt,{children:['Are you sure you want to delete "',g==null?void 0:g.name,'"? This action cannot be undone and will remove all group data.']}),e.jsxs(xt,{children:[e.jsx(G,{ref:y,onClick:v,children:"Cancel"}),e.jsx(G,{colorScheme:"red",onClick:Se,ml:3,children:"Delete"})]})]})})})]})},va=Ks,Sn=async(t={})=>{const r=await we.get("/events",{params:t});return r.data&&Array.isArray(r.data.data)&&(r.data.data=r.data.data.map(n=>({...n,media:n.image_path?n.image_path.startsWith("http")?n.image_path:`${va}/${n.image_path}`:void 0}))),r.data},$f=async t=>(await we.post(`/events/${t}/register`)).data,Hf=async t=>(await we.post(`/events/${t}/unregister`)).data,Gf=async(t={})=>{const r=await we.get("/events/my-events",{params:t});return r.data&&Array.isArray(r.data.data)&&(r.data.data=r.data.data.map(n=>({...n,media:n.image_path?n.image_path.startsWith("http")?n.image_path:`${va}/${n.image_path}`:void 0}))),r.data},Yf=async t=>{var r;try{let n=t,s={};if(!(t instanceof FormData)){const o=new FormData;Object.entries(t||{}).forEach(([a,d])=>{d!=null&&(Array.isArray(d)?d.forEach(v=>o.append(`${a}[]`,v)):o.append(a,d))}),n=o}return s["Content-Type"]="multipart/form-data",(await we.post("/events",n,{headers:s})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to create event"}}},Vf=async(t,r)=>{var n;try{let s=r,i={};if(!(r instanceof FormData)){const a=new FormData;return Object.entries(r||{}).forEach(([v,g])=>{g!=null&&(Array.isArray(g)?g.forEach(u=>a.append(`${v}[]`,u)):a.append(v,g))}),a.append("_method","PUT"),s=a,i["Content-Type"]="multipart/form-data",(await we.post(`/events/${t}`,s,{headers:i})).data}return i["Content-Type"]="multipart/form-data",(await we.put(`/events/${t}`,s,{headers:i})).data}catch(s){throw((n=s.response)==null?void 0:n.data)||{message:"Failed to update event"}}},Jf=async t=>(await we.delete(`/events/${t}`)).data,Xf=async t=>(await we.post(`/events/${t}/toggleSave`)).data,Kf=ot(et),Qf=()=>{const t=localStorage.getItem("role"),r=t==="admin"||t==="moderator",n=Lt(),s=St(),i=R("gray.50","gray.900"),o=R("white","gray.800"),a=R("gray.800","white"),d=R("gray.500","gray.400"),v=R("purple.500","purple.300"),g=R("gray.200","gray.700"),u=Wr({base:!0,md:!1}),{isOpen:y,onOpen:O,onClose:M}=pt(),[_,w]=h.useState(null),{isOpen:z,onOpen:L,onClose:$}=pt(),[A,B]=h.useState(!1),[p,j]=h.useState(null),[k,I]=h.useState(""),[x,f]=h.useState("All"),[S,P]=h.useState([]),[T,D]=h.useState(!1),[Z,re]=h.useState(!1),[c,fe]=h.useState(!1),[C,l]=h.useState([]),[b,F]=h.useState([]),[se,V]=h.useState(!0),[ae,X]=h.useState(null),[ie,he]=h.useState(1),[le,ue]=h.useState(1);h.useEffect(()=>{(async()=>{try{const J=((await Gf()).data||[]).map(ne=>ne.id);P(J)}catch{}})()},[]),h.useEffect(()=>{(async()=>{V(!0),X(null);try{const U={page:ie};k&&(U.search=k),x&&x!=="All"&&(x==="Today"?U.time_filter="today":x==="This Week"?U.time_filter="this_week":x==="This Month"&&(U.time_filter="this_month"));const J=await Sn(U),ne=(J.data||[]).map(K=>({id:K.id,title:K.title,date:K.event_datetime,location:K.location,organizer:K.organizer,description:K.description,attendees:K.attendees_count||0,media:K.media,mediaType:K.media?K.media.endsWith(".mp4")?"video":"image":void 0,speakers:K.speaker_names?K.speaker_names.split(",").map(te=>({name:te.trim(),title:""})):[]}));F(ne),he(J.current_page||1),ue(J.last_page||1)}catch(U){X(U.message||"Failed to fetch events")}finally{V(!1)}})()},[ie,k,x]);const Pe=b,Ae=async Y=>{if(S.includes(Y)){re(!0);try{await Hf(Y),P(U=>U.filter(J=>J!==Y)),s({title:"Registration canceled",description:"You've been removed from the event",status:"info",duration:3e3,isClosable:!0})}catch(U){s({title:"Failed to unregister",description:U.message||"Could not unregister from event.",status:"error",duration:3e3,isClosable:!0})}finally{re(!1),M()}}else{D(!0);try{await $f(Y),P(U=>[...U,Y]),s({title:"Registration successful!",description:"You're now registered for this event",status:"success",duration:3e3,isClosable:!0})}catch(U){s({title:"Failed to register",description:U.message||"Could not register for event.",status:"error",duration:3e3,isClosable:!0})}finally{D(!1),M()}}},De=async Y=>{try{await Xf(Y),l(U=>{const J=U.includes(Y),ne=J?U.filter(K=>K!==Y):[...U,Y];return s({title:J?"Event unsaved":"Event saved",description:J?"Removed from your bookmarks":"Added to your bookmarks",status:"success",duration:2e3,isClosable:!0}),ne})}catch(U){s({title:"Failed to toggle save",description:(U==null?void 0:U.message)||"Could not update bookmark.",status:"error",duration:2e3,isClosable:!0})}},Oe=async Y=>{fe(!0);try{await Yf(Y);const J=((await Sn()).data||[]).map(ne=>({id:ne.id,title:ne.title,date:ne.event_datetime,location:ne.location,organizer:ne.organizer,description:ne.description,attendees:ne.attendees_count||0,maxAttendees:ne.max_attendees||0,media:ne.media,mediaType:ne.image_path?ne.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:ne.speaker_names?ne.speaker_names.split(",").map(K=>({name:K.trim(),title:""})):[]}));F(J),s({title:"Event created!",description:"Your event has been successfully created",status:"success",duration:3e3,isClosable:!0})}catch(U){s({title:"Failed to create event",description:U.message||"Could not create event.",status:"error",duration:3e3,isClosable:!0})}finally{fe(!1)}},qe=Y=>{j(Y),B(!0)},Ge=()=>{B(!1),j(null)},Q=async(Y,U)=>{try{await Vf(Y,U);const ne=((await Sn()).data||[]).map(K=>({id:K.id,title:K.title,date:K.event_datetime,location:K.location,organizer:K.organizer,description:K.description,attendees:K.attendees_count||0,maxAttendees:K.max_attendees||0,media:K.media,mediaType:K.image_path?K.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:K.speaker_names?K.speaker_names.split(",").map(te=>({name:te.trim(),title:""})):[]}));F(ne),s({title:"Event updated!",description:"The event has been updated.",status:"success",duration:2e3,isClosable:!0}),Ge()}catch(J){s({title:"Failed to update event",description:(J==null?void 0:J.message)||"Could not update event.",status:"error",duration:2e3,isClosable:!0})}},ee=async Y=>{try{await Jf(Y);const J=((await Sn()).data||[]).map(ne=>({id:ne.id,title:ne.title,date:ne.event_datetime,location:ne.location,organizer:ne.organizer,description:ne.description,attendees:ne.attendees_count||0,maxAttendees:ne.max_attendees||0,media:ne.media,mediaType:ne.image_path?ne.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:ne.speaker_names?ne.speaker_names.split(",").map(K=>({name:K.trim(),title:""})):[]}));F(J),s({title:"Event deleted!",description:"The event has been removed.",status:"success",duration:2e3,isClosable:!0})}catch(U){s({title:"Failed to delete event",description:(U==null?void 0:U.message)||"Could not delete event.",status:"error",duration:2e3,isClosable:!0})}},ze=Y=>{w(Y),O()},Le=()=>{n(-1)},Ve=({event:Y})=>e.jsx(Kf,{onClick:()=>ze(Y),cursor:"pointer",bg:o,position:"relative",whileHover:{y:-5},transition:{duration:.2},boxShadow:"md",borderRadius:"xl",overflow:"hidden",borderWidth:"1px",borderColor:g,children:e.jsx(It,{p:0,children:e.jsxs(mt,{spacing:0,children:[e.jsxs(E,{position:"relative",height:"180px",overflow:"hidden",children:[e.jsx(vt,{src:Y.media,alt:Y.title,objectFit:"cover",width:"100%",height:"100%",filter:"brightness(0.9)"}),e.jsxs(E,{position:"absolute",top:3,left:3,bg:"rgba(0,0,0,0.7)",py:1,px:2,borderRadius:"md",color:"white",textAlign:"center",children:[e.jsx(m,{fontSize:"xs",fontWeight:"bold",children:new Date(Y.date).toLocaleDateString("en-US",{month:"short"}).toUpperCase()}),e.jsx(m,{fontSize:"xl",fontWeight:"bold",children:new Date(Y.date).getDate()})]}),e.jsx(Ke,{"aria-label":C.includes(Y.id)?"Unsave event":"Bookmark event",icon:e.jsx(rn,{fill:C.includes(Y.id)?"currentColor":"none"}),position:"absolute",top:3,right:12,colorScheme:"purple",variant:"ghost",size:"lg",borderRadius:"full",onClick:U=>{U.stopPropagation(),De(Y.id)}}),e.jsxs(Tt,{placement:"bottom-end",children:[e.jsx(Pt,{as:Ke,"aria-label":"Event options",icon:e.jsx(ei,{}),position:"absolute",top:3,right:3,size:"lg",variant:"ghost",borderRadius:"full",zIndex:1,onClick:U=>U.stopPropagation()}),e.jsxs(At,{minW:"140px",zIndex:2,children:[e.jsx(Qe,{icon:e.jsx(ss,{}),onClick:U=>{U.stopPropagation();const J=`${window.location.origin}/events/${Y.id}`;navigator.clipboard.writeText(J),s({title:"Link copied!",description:"Event link copied to clipboard.",status:"info",duration:2e3,isClosable:!0})},children:"Share"}),(localStorage.getItem("role")==="admin"||localStorage.getItem("role")==="moderator")&&e.jsxs(e.Fragment,{children:[e.jsx(Qe,{icon:e.jsx(Mr,{}),onClick:U=>{U.stopPropagation(),qe(Y)},children:"Edit"}),e.jsx(Qe,{icon:e.jsx(fn,{}),color:"red.500",onClick:async U=>{U.stopPropagation(),await ee(Y.id)},children:"Delete"})]})]})]})]}),e.jsxs(mt,{p:4,spacing:3,children:[e.jsx(Ee,{size:"md",color:a,noOfLines:1,children:Y.title}),e.jsxs(N,{direction:"column",gap:2,children:[e.jsxs(N,{align:"center",gap:2,children:[e.jsx(Fe,{as:Zr,color:v,boxSize:4}),e.jsx(m,{fontSize:"sm",color:d,noOfLines:1,children:Y.location})]}),e.jsxs(N,{align:"center",gap:2,children:[e.jsx(Fe,{as:Bt,color:v,boxSize:4}),e.jsx(m,{fontSize:"sm",color:d,children:new Date(Y.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]}),S.includes(Y.id)&&e.jsx(dt,{colorScheme:"green",alignSelf:"flex-start",px:2,py:1,borderRadius:"full",children:e.jsxs(N,{align:"center",gap:1,children:[e.jsx(Fe,{as:wr}),e.jsx(m,{children:"Registered"})]})})]})]})})},Y.id),Ze=h.memo(({isOpen:Y,onClose:U,event:J,onEventUpdate:ne})=>{var Ie,Ce;const[K,te]=h.useState({title:(J==null?void 0:J.title)||"",date:J?(Ie=J.date)==null?void 0:Ie.split("T")[0]:"",time:J&&J.date?new Date(J.date).toISOString().slice(11,16):"",location:(J==null?void 0:J.location)||"",organizer:(J==null?void 0:J.organizer)||"",description:(J==null?void 0:J.description)||"",speakerNames:((Ce=J==null?void 0:J.speakers)==null?void 0:Ce.map(Re=>Re.name).join(", "))||"",mediaUrl:(J==null?void 0:J.media)||"",imageFile:null}),[pe,ve]=h.useState((J==null?void 0:J.media)||null),ge=h.useRef(null),[ye,tt]=h.useState({}),$e=R("white","gray.800"),Se=R("gray.800","white"),Be=R("gray.500","gray.400");h.useEffect(()=>{var Re,Ne;J&&(te({title:J.title||"",date:((Re=J.date)==null?void 0:Re.split("T")[0])||"",time:J.date?new Date(J.date).toISOString().slice(11,16):"",location:J.location||"",organizer:J.organizer||"",description:J.description||"",speakerNames:((Ne=J.speakers)==null?void 0:Ne.map(Je=>Je.name).join(", "))||"",mediaUrl:J.media||"",imageFile:null}),ve(J.media||null))},[J]);const Ue=Re=>{const{name:Ne,value:Je}=Re.target;te(oe=>({...oe,[Ne]:Je})),ye[Ne]&&tt(oe=>({...oe,[Ne]:null}))},rt=Re=>{const Ne=Re.target.files[0];if(!Ne)return;te(oe=>({...oe,imageFile:Ne}));const Je=new FileReader;Je.onload=()=>ve(Je.result),Je.readAsDataURL(Ne)},Mt=()=>ge.current.click(),q=()=>{tt({}),U()},ce=()=>{const Re={};if(K.title.trim()||(Re.title="Title is required"),K.date||(Re.date="Date is required"),K.time||(Re.time="Time is required"),K.location.trim()||(Re.location="Location is required"),K.organizer.trim()||(Re.organizer="Organizer is required"),K.description.trim()||(Re.description="Description is required"),Object.keys(Re).length>0){tt(Re);return}const Ne={title:K.title,event_datetime:`${K.date} ${K.time}:00`,location:K.location,organizer:K.organizer,description:K.description,speaker_names:K.speakerNames,image_path:K.imageFile};ne(J.id,Ne)};return e.jsxs(kt,{isOpen:Y,onClose:q,size:"xl",children:[e.jsx(at,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(Ot,{bg:$e,borderRadius:"xl",children:[e.jsx(ut,{color:Se,children:"Edit Event"}),e.jsx(wt,{}),e.jsx(lt,{pb:6,children:e.jsxs(ct,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:6,children:[e.jsxs(xe,{isRequired:!0,isInvalid:ye.title,children:[e.jsx(be,{children:"Event Title"}),e.jsx(We,{name:"title",value:K.title,onChange:Ue,placeholder:"Enter event title"}),ye.title&&e.jsx($t,{children:ye.title})]}),e.jsxs(xe,{isRequired:!0,isInvalid:ye.date,children:[e.jsx(be,{children:"Date"}),e.jsx(We,{name:"date",type:"date",value:K.date,onChange:Ue}),ye.date&&e.jsx($t,{children:ye.date})]}),e.jsxs(xe,{isRequired:!0,isInvalid:ye.time,children:[e.jsx(be,{children:"Time"}),e.jsx(We,{name:"time",type:"time",value:K.time,onChange:Ue}),ye.time&&e.jsx($t,{children:ye.time})]}),e.jsxs(xe,{isRequired:!0,isInvalid:ye.location,children:[e.jsx(be,{children:"Location"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Zr,color:Be})}),e.jsx(We,{name:"location",value:K.location,onChange:Ue,placeholder:"Event location"})]}),ye.location&&e.jsx($t,{children:ye.location})]}),e.jsxs(xe,{isRequired:!0,isInvalid:ye.organizer,children:[e.jsx(be,{children:"Organizer"}),e.jsx(We,{name:"organizer",value:K.organizer,onChange:Ue,placeholder:"Organizing department or group"}),ye.organizer&&e.jsx($t,{children:ye.organizer})]}),e.jsxs(xe,{gridColumn:{md:"span 2"},isRequired:!0,isInvalid:ye.description,children:[e.jsx(be,{children:"Description"}),e.jsx(Yt,{name:"description",value:K.description,onChange:Ue,placeholder:"Provide details about your event",rows:5}),ye.description&&e.jsx($t,{children:ye.description})]}),e.jsxs(xe,{gridColumn:{md:"span 2"},children:[e.jsx(be,{children:"Speaker Names"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Ci,color:Be})}),e.jsx(We,{name:"speakerNames",value:K.speakerNames,onChange:Ue,placeholder:"Names separated by commas"})]}),e.jsx(bn,{children:"If applicable, add featured speakers"})]}),e.jsxs(xe,{gridColumn:{md:"span 2"},children:[e.jsx(be,{children:"Event Image"}),e.jsxs(E,{position:"relative",children:[pe?e.jsxs(E,{position:"relative",onClick:Mt,cursor:"pointer",borderRadius:"md",overflow:"hidden",mb:3,children:[e.jsx(vt,{src:pe,alt:"Event preview",height:"200px",width:"100%",objectFit:"cover"}),e.jsx(E,{position:"absolute",top:0,left:0,right:0,bottom:0,bg:"blackAlpha.400",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx(m,{color:"white",fontWeight:"bold",children:"Change Image"})})]}):e.jsx(G,{leftIcon:e.jsx(Wn,{}),onClick:Mt,width:"100%",height:"200px",variant:"outline",mb:3,py:10,children:e.jsxs(de,{spacing:2,children:[e.jsx(m,{children:"Click to upload event image"}),e.jsx(m,{fontSize:"xs",color:Be,children:"JPEG, PNG or GIF, recommended size 1200630px"})]})}),e.jsx(We,{type:"file",accept:"image/*",display:"none",ref:ge,onChange:rt})]}),e.jsx(bn,{children:"A default image will be used if not provided"})]})]})}),e.jsxs(xt,{children:[e.jsx(G,{variant:"outline",mr:3,onClick:q,children:"Cancel"}),e.jsx(G,{colorScheme:"purple",onClick:ce,leftIcon:e.jsx(Mr,{}),children:"Update Event"})]})]})]})}),st=h.memo(({isOpen:Y,onClose:U,onEventCreate:J})=>{const[ne,K]=h.useState({title:"",date:"",time:"",location:"",organizer:"",description:"",speakerNames:"",mediaUrl:""}),[te,pe]=h.useState(null),ve=h.useRef(null),[ge,ye]=h.useState({}),tt=R("white","gray.800"),$e=R("gray.800","white"),Se=R("gray.500","gray.400"),{user:Be}=ar(),Ue=Ce=>{const{name:Re,value:Ne}=Ce.target;K(Je=>({...Je,[Re]:Ne})),ge[Re]&&ye(Je=>({...Je,[Re]:null}))},rt=Ce=>{const Re=Ce.target.files[0];if(!Re)return;K(Je=>({...Je,imageFile:Re}));const Ne=new FileReader;Ne.onload=()=>{pe(Ne.result),K(Je=>({...Je,mediaUrl:Ne.result}))},Ne.readAsDataURL(Re)},Mt=()=>{ve.current.click()},q=()=>{K({title:"",date:"",time:"",location:"",organizer:"",description:"",speakerNames:"",mediaUrl:""}),pe(null),ye({})},ce=()=>{q(),U()},Ie=()=>{const Ce={};if(ne.title.trim()||(Ce.title="Title is required"),ne.date||(Ce.date="Date is required"),ne.time||(Ce.time="Time is required"),ne.location.trim()||(Ce.location="Location is required"),ne.organizer.trim()||(Ce.organizer="Organizer is required"),ne.description.trim()||(Ce.description="Description is required"),Object.keys(Ce).length>0){ye(Ce);return}const Re={user_id:Be==null?void 0:Be.id,title:ne.title,event_datetime:`${ne.date} ${ne.time}:00`,location:ne.location,organizer:ne.organizer,description:ne.description,speaker_names:ne.speakerNames,image_path:ne.imageFile};J(Re),q(),U()};return e.jsxs(kt,{isOpen:Y,onClose:ce,size:"xl",children:[e.jsx(at,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(Ot,{bg:tt,borderRadius:"xl",children:[e.jsx(ut,{color:$e,children:"Create New Event"}),e.jsx(wt,{}),e.jsx(lt,{pb:6,children:e.jsxs(ct,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:6,children:[e.jsxs(xe,{isRequired:!0,isInvalid:ge.title,children:[e.jsx(be,{children:"Event Title"}),e.jsx(We,{name:"title",value:ne.title,onChange:Ue,placeholder:"Enter event title"}),ge.title&&e.jsx($t,{children:ge.title})]}),e.jsxs(xe,{isRequired:!0,isInvalid:ge.date,children:[e.jsx(be,{children:"Date"}),e.jsx(We,{name:"date",type:"date",value:ne.date,onChange:Ue}),ge.date&&e.jsx($t,{children:ge.date})]}),e.jsxs(xe,{isRequired:!0,isInvalid:ge.time,children:[e.jsx(be,{children:"Time"}),e.jsx(We,{name:"time",type:"time",value:ne.time,onChange:Ue}),ge.time&&e.jsx($t,{children:ge.time})]}),e.jsxs(xe,{isRequired:!0,isInvalid:ge.location,children:[e.jsx(be,{children:"Location"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Zr,color:Se})}),e.jsx(We,{name:"location",value:ne.location,onChange:Ue,placeholder:"Event location"})]}),ge.location&&e.jsx($t,{children:ge.location})]}),e.jsxs(xe,{isRequired:!0,isInvalid:ge.organizer,children:[e.jsx(be,{children:"Organizer"}),e.jsx(We,{name:"organizer",value:ne.organizer,onChange:Ue,placeholder:"Organizing department or group"}),ge.organizer&&e.jsx($t,{children:ge.organizer})]}),e.jsxs(xe,{gridColumn:{md:"span 2"},isRequired:!0,isInvalid:ge.description,children:[e.jsx(be,{children:"Description"}),e.jsx(Yt,{name:"description",value:ne.description,onChange:Ue,placeholder:"Provide details about your event",rows:5}),ge.description&&e.jsx($t,{children:ge.description})]}),e.jsxs(xe,{gridColumn:{md:"span 2"},children:[e.jsx(be,{children:"Speaker Names"}),e.jsxs(jt,{children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Ci,color:Se})}),e.jsx(We,{name:"speakerNames",value:ne.speakerNames,onChange:Ue,placeholder:"Names separated by commas"})]}),e.jsx(bn,{children:"If applicable, add featured speakers"})]}),e.jsxs(xe,{gridColumn:{md:"span 2"},children:[e.jsx(be,{children:"Event Image"}),e.jsxs(E,{position:"relative",children:[te?e.jsxs(E,{position:"relative",onClick:Mt,cursor:"pointer",borderRadius:"md",overflow:"hidden",mb:3,children:[e.jsx(vt,{src:te,alt:"Event preview",height:"200px",width:"100%",objectFit:"cover"}),e.jsx(E,{position:"absolute",top:0,left:0,right:0,bottom:0,bg:"blackAlpha.400",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx(m,{color:"white",fontWeight:"bold",children:"Change Image"})})]}):e.jsx(G,{leftIcon:e.jsx(Wn,{}),onClick:Mt,width:"100%",height:"200px",variant:"outline",mb:3,py:10,children:e.jsxs(de,{spacing:2,children:[e.jsx(m,{children:"Click to upload event image"}),e.jsx(m,{fontSize:"xs",color:Se,children:"JPEG, PNG or GIF, recommended size 1200630px"})]})}),e.jsx(We,{type:"file",accept:"image/*",display:"none",ref:ve,onChange:rt})]}),e.jsx(bn,{children:"A default image will be used if not provided"})]})]})}),e.jsxs(xt,{children:[e.jsx(G,{variant:"outline",mr:3,onClick:ce,children:"Cancel"}),e.jsx(G,{colorScheme:"purple",onClick:Ie,leftIcon:e.jsx(Ut,{}),children:"Create Event"})]})]})]})}),me=()=>{if(!_)return null;const Y=new Date(_.date),U=Y<new Date,J=S.includes(_.id);return e.jsxs(kt,{isOpen:y,onClose:M,size:"xl",children:[e.jsx(at,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(Ot,{bg:o,borderRadius:"xl",children:[e.jsx(ut,{color:a,children:_.title}),e.jsx(wt,{}),e.jsxs(lt,{pb:6,children:[e.jsx(E,{position:"relative",mb:6,children:e.jsx(vt,{src:_.media,alt:_.title,w:"100%",h:"250px",objectFit:"cover",borderRadius:"lg"})}),e.jsxs(ct,{templateColumns:{base:"1fr",md:"2fr 1fr"},gap:6,children:[e.jsxs(E,{children:[e.jsx(Ee,{size:"md",mb:3,color:a,children:"About This Event"}),e.jsx(m,{color:a,mb:4,children:_.description}),_.speakers&&_.speakers.length>0&&e.jsxs(E,{mt:5,children:[e.jsx(Ee,{size:"sm",mb:3,color:a,children:"Featured Speakers"}),e.jsx(de,{align:"start",spacing:3,children:_.speakers.map((ne,K)=>e.jsxs(Te,{spacing:3,children:[e.jsx(gt,{size:"sm",name:ne.name}),e.jsx(E,{children:e.jsx(m,{fontWeight:"bold",fontSize:"sm",children:ne.name})})]},K))})]})]}),e.jsx(E,{children:e.jsxs(de,{align:"start",spacing:4,p:4,bg:R("gray.50","gray.700"),borderRadius:"lg",children:[e.jsx(Ee,{size:"sm",color:a,children:"Event Details"}),e.jsxs(Te,{children:[e.jsx(Fe,{as:Bt,color:v}),e.jsxs(de,{align:"start",spacing:0,children:[e.jsx(m,{fontSize:"sm",fontWeight:"bold",children:"Date & Time"}),e.jsx(m,{fontSize:"sm",children:Y.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx(m,{fontSize:"sm",children:Y.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]}),e.jsxs(Te,{children:[e.jsx(Fe,{as:Zr,color:v}),e.jsxs(de,{align:"start",spacing:0,children:[e.jsx(m,{fontSize:"sm",fontWeight:"bold",children:"Location"}),e.jsx(m,{fontSize:"sm",children:_.location})]})]}),e.jsxs(Te,{children:[e.jsx(Fe,{as:nn,color:v}),e.jsxs(de,{align:"start",spacing:0,children:[e.jsx(m,{fontSize:"sm",fontWeight:"bold",children:"Organizer"}),e.jsx(m,{fontSize:"sm",children:_.organizer})]})]})]})})]})]}),e.jsxs(xt,{children:[e.jsx(G,{variant:"outline",mr:3,onClick:M,children:"Close"}),U?e.jsx(m,{color:d,children:"Event Finished"}):e.jsx(G,{colorScheme:J?"red":"purple",onClick:()=>Ae(_.id),isLoading:T,children:J?"Cancel Registration":"Register Now"})]})]})]})};return e.jsxs(E,{minH:"100vh",bg:i,py:6,px:{base:4,md:6},children:[e.jsxs(Jt,{maxW:"1200px",children:[e.jsxs(N,{mb:8,align:"center",justify:"space-between",children:[e.jsxs(N,{align:"center",children:[e.jsx(Ke,{icon:e.jsx(or,{}),onClick:Le,"aria-label":"Go back",variant:"ghost",color:a,size:"lg",mr:3,_hover:{bg:R("gray.100","gray.700")}}),e.jsxs(de,{align:"start",spacing:1,children:[e.jsx(Ee,{size:"lg",color:a,children:"Campus Events"}),e.jsx(m,{fontSize:"sm",color:d,children:"Discover and register for upcoming events"})]})]}),r&&e.jsx(G,{onClick:L,colorScheme:"purple",leftIcon:e.jsx(Ut,{}),size:u?"sm":"md",display:{base:"none",md:"flex"},children:"Create Event"})]}),e.jsx(E,{bg:o,p:5,borderRadius:"xl",boxShadow:"sm",mb:8,borderWidth:"1px",borderColor:g,children:e.jsxs(N,{direction:{base:"column",md:"row"},gap:4,justify:"space-between",align:{base:"stretch",md:"center"},children:[e.jsxs(jt,{maxW:{base:"100%",md:"400px"},children:[e.jsx(Rt,{pointerEvents:"none",children:e.jsx(Fe,{as:Dr,color:d})}),e.jsx(We,{placeholder:"Search for events...",value:k,onChange:Y=>I(Y.target.value),focusBorderColor:v})]}),e.jsx(Te,{spacing:3,children:e.jsxs(Tt,{children:[e.jsx(Pt,{as:G,rightIcon:e.jsx(ur,{}),variant:"outline",size:"md",children:e.jsxs(N,{align:"center",children:[e.jsx(Fe,{as:Bt,mr:2}),e.jsx(m,{children:x})]})}),e.jsxs(At,{children:[e.jsx(Qe,{onClick:()=>f("All"),fontWeight:x==="All"?"bold":"normal",children:"All"}),e.jsx(Qe,{onClick:()=>f("Today"),fontWeight:x==="Today"?"bold":"normal",children:"Today"}),e.jsx(Qe,{onClick:()=>f("This Week"),fontWeight:x==="This Week"?"bold":"normal",children:"This Week"}),e.jsx(Qe,{onClick:()=>f("This Month"),fontWeight:x==="This Month"?"bold":"normal",children:"This Month"})]})]})})]})}),e.jsxs($n,{variant:"soft-rounded",colorScheme:"purple",children:[e.jsxs(Hn,{mb:6,children:[e.jsxs(Zt,{_selected:{bg:`${v}20`,color:v,fontWeight:"semibold"},children:["All Events (",Pe.length,")"]}),e.jsxs(Zt,{_selected:{bg:`${v}20`,color:v,fontWeight:"semibold"},children:["My Events (",S.length,")"]})]}),e.jsxs(Gn,{children:[e.jsx(er,{p:0,children:se?e.jsx(ct,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:[...Array(6)].map((Y,U)=>e.jsx(yt,{height:"300px",borderRadius:"xl"},U))}):Pe.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ct,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:Pe.map(Y=>e.jsx(Ve,{event:Y},Y.id))}),e.jsxs(N,{justify:"center",mt:8,gap:2,align:"center",children:[e.jsx(G,{onClick:()=>he(Y=>Math.max(1,Y-1)),disabled:ie===1,variant:"outline",children:"Previous"}),e.jsxs(m,{px:3,fontWeight:"medium",children:["Page ",ie," of ",le]}),e.jsx(G,{onClick:()=>he(Y=>Math.min(le,Y+1)),disabled:ie===le,variant:"outline",children:"Next"})]})]}):e.jsx(E,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:g,borderRadius:"lg",children:e.jsx(m,{color:d,children:"No Events Found!"})})}),e.jsx(er,{p:0,children:S.length>0?e.jsx(ct,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:b.filter(Y=>S.includes(Y.id)).map(Y=>e.jsx(Ve,{event:Y},Y.id))}):e.jsx(E,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:g,borderRadius:"lg",children:e.jsx(m,{color:d,children:"You haven't registered for any events yet"})})})]})]})]}),e.jsx(Ke,{position:"fixed",bottom:"24px",right:"24px","aria-label":"Create event",icon:e.jsx(Ut,{}),colorScheme:"purple",isRound:!0,boxShadow:"lg",size:"lg",onClick:L,display:{base:"flex",md:"none"},zIndex:2}),e.jsx(me,{}),A&&e.jsx(Ze,{isOpen:A,onClose:Ge,event:p,onEventUpdate:Q}),e.jsx(st,{isOpen:z,onClose:$,onEventCreate:Oe})]})},zn=ot(et),Zf=ot(Ja),ep=()=>{const{id:t}=mo(),r=Lt(),n=R("white","gray.700");R("gray.800","white");const s=R("gray.500","gray.400"),i=R("blue.500","blue.300"),o=R("gray.50","gray.600");Wr({base:!0,md:!1});const a={code:"CS 301",title:"Computer Architecture",members:142,activeGroups:8,resources:23,discussions:45,recentMaterials:[{type:"notes",title:"Midterm Prep Notes",author:"Sarah M",votes:15},{type:"video",title:"Cache Memory Explained",author:"Ali H",votes:9},{type:"notes",title:"Practice Problem Set",author:"Noura K",votes:22}],studyGroups:[{name:"Digital Logic Study Group",members:12,active:"2h ago"},{name:"Weekly Problem Solving",members:8,active:"5h ago"}]};return e.jsx(N,{minH:"100vh",p:{base:4,md:8},bg:R("gray.50","gray.800"),children:e.jsxs(E,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsx(G,{leftIcon:e.jsx(Vt,{}),onClick:()=>r(-1),mb:8,variant:"ghost",color:i,borderRadius:"full",_hover:{bg:o},children:"Back to Courses"}),e.jsxs(zn,{bg:n,boxShadow:"xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsx(ln,{px:{base:4,md:8},py:8,bgGradient:`linear(to-r, ${i}, blue.400)`,color:"white",children:e.jsxs(mt,{spacing:4,children:[e.jsxs(Te,{spacing:3,children:[e.jsx(dt,{variant:"solid",fontSize:"lg",px:3,py:1,borderRadius:"full",children:a.code}),e.jsxs(Ee,{size:"xl",children:[a.title," Community"]})]}),e.jsxs(N,{gap:6,flexWrap:"wrap",children:[e.jsxs(Te,{spacing:2,children:[e.jsx(Fe,{as:Ft,boxSize:5}),e.jsxs(m,{fontWeight:"500",children:[a.members," Members"]})]}),e.jsxs(Te,{spacing:2,children:[e.jsx(Fe,{as:jr,boxSize:5}),e.jsxs(m,{fontWeight:"500",children:[a.activeGroups," Active Groups"]})]}),e.jsxs(Te,{spacing:2,children:[e.jsx(Fe,{as:Us,boxSize:5}),e.jsxs(m,{fontWeight:"500",children:[a.discussions," Discussions"]})]})]})]})}),e.jsx(It,{px:{base:4,md:8},py:8,children:e.jsxs($n,{variant:"enclosed-colored",colorScheme:"blue",children:[e.jsxs(Hn,{children:[e.jsxs(Zt,{_selected:{color:"white",bg:i},borderRadius:"md",children:["Resources (",a.resources,")"]}),e.jsxs(Zt,{_selected:{color:"white",bg:i},borderRadius:"md",children:["Study Groups (",a.activeGroups,")"]}),e.jsxs(Zt,{_selected:{color:"white",bg:i},borderRadius:"md",children:["Discussions (",a.discussions,")"]})]}),e.jsxs(Gn,{mt:6,children:[e.jsx(er,{p:0,children:e.jsxs(mt,{spacing:6,children:[e.jsx(G,{leftIcon:e.jsx(Ut,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Share New Material"}),e.jsx(ct,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:6,children:a.recentMaterials.map((d,v)=>e.jsx(zn,{variant:"outline",whileHover:{y:-5},transition:{duration:.2},cursor:"pointer",onClick:()=>r(`/courses/${t}/resource/${d.id}`),children:e.jsxs(It,{children:[e.jsxs(N,{align:"center",mb:3,children:[e.jsx(Fe,{as:d.type==="notes"?br:ri,boxSize:6,color:i,mr:3}),e.jsx(m,{fontWeight:"700",fontSize:"lg",children:d.title})]}),e.jsxs(N,{justify:"space-between",align:"center",children:[e.jsxs(N,{align:"center",children:[e.jsx(gt,{size:"sm",name:d.author,mr:2}),e.jsx(m,{fontSize:"sm",color:s,children:d.author})]}),e.jsxs(dt,{colorScheme:"green",px:3,py:1,borderRadius:"full",display:"flex",alignItems:"center",children:[e.jsx(Fe,{as:Si,mr:1})," ",d.votes]})]})]})},v))})]})}),e.jsx(er,{p:0,children:e.jsxs(mt,{spacing:6,children:[e.jsx(G,{leftIcon:e.jsx(Ut,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Create New Group"}),e.jsx(Xa,{spacing:4,children:a.studyGroups.map((d,v)=>e.jsx(Zf,{p:4,borderWidth:"1px",borderRadius:"lg",_hover:{borderColor:i},whileHover:{x:5},transition:{duration:.2},children:e.jsxs(N,{justify:"space-between",align:"center",children:[e.jsxs(E,{flex:1,children:[e.jsx(m,{fontWeight:"700",mb:1,children:d.name}),e.jsxs(Te,{spacing:2,children:[e.jsx(Fe,{as:nn,color:s,boxSize:4}),e.jsxs(m,{fontSize:"sm",color:s,children:["Active ",d.active]})]})]}),e.jsxs(Te,{spacing:2,children:[e.jsx(Ka,{size:"sm",max:4,children:[...Array(d.members)].map((g,u)=>e.jsx(gt,{name:`Member ${u+1}`,src:`https://i.pravatar.cc/150?img=${u}`},u))}),e.jsx(m,{color:s,children:d.members})]})]})},v))})]})}),e.jsx(er,{p:0,children:e.jsxs(mt,{spacing:6,children:[e.jsx(G,{leftIcon:e.jsx(Ut,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Start New Discussion"}),[1,2,3].map(d=>e.jsx(zn,{variant:"outline",whileHover:{x:5},transition:{duration:.2},children:e.jsxs(It,{children:[e.jsxs(N,{align:"center",mb:2,children:[e.jsx(gt,{size:"sm",name:"Omar K",mr:3}),e.jsxs(E,{flex:1,children:[e.jsx(m,{fontWeight:"700",children:"Understanding Pipeline Hazards"}),e.jsxs(Te,{mt:1,spacing:2,children:[e.jsx(Wt,{colorScheme:"blue",size:"sm",children:"Help Needed"}),e.jsx(Wt,{colorScheme:"purple",size:"sm",children:"CS 301"})]})]})]}),e.jsx(m,{color:s,noOfLines:2,mb:4,children:"Can someone explain the different types of pipeline hazards? I'm having trouble with this concept..."}),e.jsxs(N,{justify:"space-between",align:"center",children:[e.jsxs(Te,{spacing:4,children:[e.jsx(G,{variant:"ghost",size:"sm",leftIcon:e.jsx(Si,{}),children:"24 Helpful"}),e.jsx(G,{variant:"ghost",size:"sm",leftIcon:e.jsx(Vo,{}),children:"5 Answers"})]}),e.jsx(m,{fontSize:"sm",color:s,children:"3h ago"})]})]})},d))]})})]})]})}),e.jsx(Ir,{px:{base:4,md:8},py:6,borderTopWidth:"1px",children:e.jsxs(mt,{w:"full",spacing:4,children:[e.jsx(m,{fontWeight:"700",fontSize:"xl",children:"Community Actions"}),e.jsxs(ct,{templateColumns:{base:"1fr",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:4,children:[e.jsx(Cn,{icon:ss,title:"Share Community",description:"Invite classmates to join"}),e.jsx(Cn,{icon:Us,title:"Discussions",description:"Browse all conversations"}),e.jsx(Cn,{icon:Ft,title:"Members",description:"Connect with peers"}),e.jsx(Cn,{icon:rs,title:"Resources",description:"View all materials"})]})]})})]})]})})},Cn=({icon:t,title:r,description:n})=>(R("white","gray.700"),R("gray.50","gray.600"),e.jsx(zn,{p:4,variant:"outline",whileHover:{scale:1.02},transition:{duration:.2},cursor:"pointer",children:e.jsxs(mt,{spacing:3,children:[e.jsx(Fe,{as:t,boxSize:6,color:"blue.500"}),e.jsx(m,{fontWeight:"700",children:r}),e.jsx(m,{fontSize:"sm",color:"gray.500",children:n})]})}));function tp(t){return ke({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm32 160a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM96 352a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM64 416c0-17.7 14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32zM192 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zm64-64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM288 448a32 32 0 1 1 0-64 32 32 0 1 1 0 64z"},child:[]}]})(t)}const oo=[{id:1,name:"Partial Exam 1",weight:15,grade:""},{id:2,name:"Partial Exam 2",weight:15,grade:""},{id:3,name:"Quizzes (Avg)",weight:15,grade:""},{id:4,name:"Assignment",weight:10,grade:""},{id:5,name:"Attendance",weight:5,grade:""},{id:6,name:"Participation",weight:5,grade:""},{id:7,name:"Final Exam",weight:35,grade:""}],rp=t=>t>=95?"A+":t>=90?"A":t>=85?"B+":t>=80?"B":t>=75?"C+":t>=70?"C":t>=65?"D+":t>=60?"D":"F",np=()=>{const t=St(),[r,n]=h.useState(oo),[s,i]=h.useState(70),[o,a]=h.useState(null),[d,v]=h.useState(7),[g,u]=h.useState(7),y=h.useMemo(()=>r.reduce((p,j)=>p+Number(j.weight||0),0),[r]),O=(p,j,k)=>{let I=k;if((j==="weight"||j==="grade")&&k!==""){const x=Number(k);if(isNaN(x)||x<0||x>100)return;I=x}n(r.map(x=>x.id===p?{...x,[j]:I}:x)),a(null)},M=()=>{n([...r,{id:d,name:"",weight:0,grade:""}]),v(d+1)},_=p=>{p===g&&u(null),n(r.filter(j=>j.id!==p)),a(null)},w=()=>{if(y!==100){t({title:"Invalid Weights",description:`Total weight must be 100%, but it is currently ${y}%.`,status:"error",duration:5e3,isClosable:!0});return}const p=g?r.find(k=>k.id===g):null;if(p&&p.grade!==""){let k=0;r.forEach(x=>{const f=parseFloat(x.grade),S=parseFloat(x.weight);!isNaN(f)&&!isNaN(S)&&(k+=f*S/100)});const I=rp(k);a({overall:k.toFixed(2),passed:k>=s,letterGrade:I})}else{if(!p){t({title:"Final Exam Not Set",description:"Please select which component is the final exam to calculate the required score.",status:"info",duration:5e3,isClosable:!0});return}let k=0;r.forEach(f=>{if(f.id!==g){const S=parseFloat(f.grade),P=parseFloat(f.weight);!isNaN(S)&&!isNaN(P)&&(k+=S*P/100)}});const I=parseFloat(p.weight);if(isNaN(I)||I===0){t({title:"Invalid Final Weight",description:"The final exam must have a weight greater than 0.",status:"error",duration:5e3,isClosable:!0});return}const x=(s-k)*100/I;a({currentTotal:k.toFixed(2),neededFinal:x})}},z=()=>{n(oo),i(70),a(null)},L=R("white","gray.800"),$=R("gray.800","whiteAlpha.900"),A=R("gray.600","gray.400"),B=R("gray.200","gray.700");return e.jsxs(E,{children:[e.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(et,{mb:6,p:6,borderRadius:"xl",borderWidth:"1px",borderColor:B,bg:L,children:e.jsxs(N,{alignItems:"center",gap:4,children:[e.jsx(Fe,{as:jr,w:10,h:10,color:R("blue.600","blue.400")}),e.jsxs(E,{children:[e.jsx(Ee,{size:"lg",color:$,children:"Dynamic Grade Calculator"}),e.jsx(m,{color:A,children:"Add, remove, and edit grade components to match any course structure."})]})]})})}),e.jsx(et,{bg:L,borderWidth:"1px",borderColor:B,borderRadius:"lg",children:e.jsx(It,{children:e.jsxs(de,{spacing:6,align:"stretch",children:[e.jsxs(de,{spacing:4,align:"stretch",p:4,borderWidth:"1px",borderRadius:"md",children:[e.jsx(Ee,{size:"sm",children:"Settings"}),e.jsxs(xe,{children:[e.jsx(be,{children:"Passing Grade (%)"}),e.jsx(us,{value:s,onChange:p=>i(Number(p)),min:0,max:100,children:e.jsx(hs,{})})]}),e.jsxs(E,{children:[e.jsxs(m,{fontWeight:"bold",children:["Total Weight: ",y,"%"]}),y!==100&&e.jsxs(Bn,{status:"warning",mt:2,borderRadius:"md",children:[e.jsx(Un,{}),"Must equal 100%."]})]})]}),e.jsx(de,{spacing:4,align:"stretch",children:r.map((p,j)=>e.jsx(ot.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:j*.05},children:e.jsxs(Te,{spacing:3,p:3,borderWidth:"1px",borderRadius:"md",bg:R("gray.50","gray.700"),children:[e.jsx(Ar,{label:"Set as Final Exam",placement:"top",children:e.jsx(Ke,{"aria-label":"Set as Final Exam",icon:e.jsx(Cd,{}),isRound:!0,variant:g===p.id?"solid":"ghost",colorScheme:g===p.id?"yellow":"gray",onClick:()=>u(p.id)})}),e.jsx(We,{placeholder:"Component Name (e.g., Midterm)",value:p.name,onChange:k=>O(p.id,"name",k.target.value),fontWeight:"bold"}),e.jsx(us,{value:p.weight,onChange:k=>O(p.id,"weight",k),min:0,max:100,w:"120px",children:e.jsx(hs,{placeholder:"Weight %"})}),e.jsx(us,{value:p.grade,onChange:k=>O(p.id,"grade",k),min:0,max:100,w:"120px",children:e.jsx(hs,{placeholder:"/100"})}),e.jsx(Ke,{"aria-label":"Delete component",icon:e.jsx(fn,{}),colorScheme:"red",variant:"ghost",onClick:()=>_(p.id)})]})},p.id))}),e.jsx(Te,{spacing:4,mt:4,w:"full",children:e.jsx(G,{leftIcon:e.jsx(Ut,{}),onClick:M,w:"full",children:"Add Component"})}),e.jsxs(Te,{spacing:4,mt:2,w:"full",children:[e.jsx(G,{leftIcon:e.jsx(tp,{}),colorScheme:"blue",onClick:w,w:"full",children:"Calculate"}),e.jsx(G,{onClick:z,w:"full",children:"Reset"})]})]})})}),(()=>{if(!o)return null;let p="info",j="";o.overall?p=o.passed?"success":"error":o.neededFinal&&(o.neededFinal<=0?(p="success",j="You have already secured a passing grade! "):o.neededFinal>100?(p="error",j="It is impossible to reach the passing grade."):(p="info",j="This is the minimum score required on the final to pass."));const I={success:{bg:R("green.50","green.900"),borderColor:R("green.200","green.700")},error:{bg:R("red.50","red.900"),borderColor:R("red.200","red.700")},info:{bg:R("blue.50","blue.900"),borderColor:R("blue.200","blue.700")}}[p];return e.jsx(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(et,{mt:6,bg:I.bg,borderWidth:"1px",borderColor:I.borderColor,borderRadius:"lg",p:6,children:e.jsxs(de,{spacing:2,textAlign:"center",children:[o.overall&&e.jsxs(e.Fragment,{children:[e.jsx(Ee,{size:"lg",children:"Result"}),e.jsxs(m,{fontSize:"4xl",fontWeight:"bold",children:[o.overall," ",e.jsxs(m,{as:"span",fontSize:"3xl",fontWeight:"medium",children:["(",o.letterGrade,")"]})]}),e.jsx(m,{fontSize:"md",color:A,mt:-2,children:"Overall Grade"}),e.jsx(Et,{my:3}),e.jsx(m,{fontSize:"lg",fontWeight:"semibold",children:o.passed?"Congratulations, you passed!":"You did not pass."})]}),o.currentTotal!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(Ee,{size:"lg",children:"Calculation"}),e.jsxs(m,{fontSize:"lg",children:["Your current grade (without the final) is ",e.jsxs("strong",{children:[o.currentTotal,"%"]}),"."]}),e.jsx(Et,{my:3}),e.jsx(m,{fontSize:"lg",children:"To pass, you need at least:"}),e.jsxs(m,{fontSize:"4xl",fontWeight:"bold",children:[o.neededFinal.toFixed(2),"%"]}),e.jsx(m,{fontSize:"md",color:A,mt:-2,children:"on the Final Exam"}),e.jsx(m,{fontSize:"sm",mt:2,children:j})]})]})})})})()]})},sp=async(t={})=>(await we.get("/requests",{params:t})).data,ip=async(t={})=>{const r={};return t.course_name&&(r.course_name=t.course_name),t.current_day&&(r.current_day=t.current_day),t.desired_day&&(r.desired_day=t.desired_day),(await we.get("/requests",{params:r})).data},op=async(t={})=>(await we.get("/my-requests",{params:t})).data,ap=async()=>(await we.get("/my-applications")).data,lp=async t=>(await we.post("/requests",t)).data,cp=async t=>(await we.get(`/requests/${t}`)).data,wa=async(t,r)=>(await we.put(`/requests/${t}`,r)).data,dp=async t=>(await we.delete(`/requests/${t}`)).data,up=async(t,r={})=>(await we.post(`/requests/${t}/apply`,r)).data,hp=async t=>(await we.get(`/requests/${t}/applications`)).data,ao=async(t,r)=>(await we.put(`/applications/${t}`,r)).data,fp=async t=>(await we.put(`/applications/${t}/withdraw`)).data,Ys=({currentPage:t,totalPages:r,onPageChange:n,isLoading:s})=>e.jsxs(Te,{spacing:2,justify:"center",mt:4,children:[e.jsx(G,{size:"sm",onClick:()=>n(t-1),isDisabled:s||t<=1,children:"Prev"}),e.jsxs(m,{fontSize:"sm",children:["Page ",t," of ",r]}),e.jsx(G,{size:"sm",onClick:()=>n(t+1),isDisabled:s||t>=r,children:"Next"})]}),pp=5;function Sa({perPage:t=pp,trigger:r=!0}={}){const[n,s]=h.useState([]),[i,o]=h.useState(!1),[a,d]=h.useState(null),[v,g]=h.useState(1),[u,y]=h.useState(1),O=h.useCallback(async(M=1)=>{o(!0),d(null);try{const _=localStorage.getItem("major_id"),w=localStorage.getItem("faculty_id"),z={..._?{major_id:_}:{},...w?{faculty_id:w}:{},page:M,per_page:t},L=await an(z);s(L.data||[]),y(L.last_page||1),g(L.current_page||1)}catch(_){d(_.message||"Failed to load courses")}finally{o(!1)}},[t]);return h.useEffect(()=>{r&&O(v)},[v,r]),{courses:n,coursesLoading:i,coursesError:a,coursesPage:v,coursesTotalPages:u,setCoursesPage:g,fetchPaginatedCourses:O}}const cs="https://bit.ly/dan-abramov",lo=t=>t?{id:t.id,userId:t.user_id,userName:t.user&&t.user.first_name&&t.user.last_name?`${t.user.first_name} ${t.user.last_name}`:t.user&&t.user.username||t.userName||"You",userAvatar:t.user&&t.user.avatar_url||t.userAvatar||cs,reason:t.reason,createdAt:t.created_at||t.createdAt,status:t.status,request:t.request}:{},Qr=(t,r)=>{if(!t)return{};const n=t.requester||r||{};return{id:t.id,courseName:t.course_name,currentSection:t.current_section,desiredSection:t.desired_section,currentDay:t.current_day,currentTime:t.current_time,desiredDay:t.desired_day,desiredTime:t.desired_time,reason:t.reason,status:t.status,requesterId:n.id,requesterName:n.first_name&&n.last_name?`${n.first_name} ${n.last_name}`:n.name||"You",requesterAvatar:n.avatar_url||cs,createdAt:t.created_at,applications:Array.isArray(t.applications)?t.applications.map(s=>({id:s.id,requestId:t.id,userId:s.user_id||(s.user?s.user.id:void 0),status:s.status,user:s.user?{id:s.user.id,name:`${s.user.first_name} ${s.user.last_name}`}:{}})):[]}},co=({request:t,userId:r,onApply:n,onCancel:s,onDelete:i,onViewApplications:o,onUpdateApplication:a,onUpdateApplicationStatus:d,onEdit:v})=>{var $;typeof window!="undefined"&&localStorage.getItem("role");const g=t.requesterId===r,u=R("white","gray.800"),y=R("gray.800","white"),O=R("gray.600","gray.400"),M=R("yellow.400","yellow.500"),_=R("gray.100","gray.700"),w=($=t.applications)==null?void 0:$.some(A=>A.userId===r&&(A.status==="pending"||A.status==="accepted")),z={pending:"orange",accepted:"green",declined:"red",cancelled:"gray"},L=A=>{if(!A)return"";try{const[B,p]=A.split(":"),j=parseInt(B,10),k=j>=12?"PM":"AM";return`${j%12||12}:${p} ${k}`}catch{return A}};return e.jsxs(et,{bg:u,boxShadow:"sm",border:"1px solid",borderColor:_,borderRadius:"lg",overflow:"hidden",transition:"all 0.2s",_hover:{transform:"translateY(-2px)",boxShadow:"md"},children:[t.status!=="pending"&&e.jsx(dt,{position:"absolute",top:2,right:2,colorScheme:z[t.status],variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:t.status}),e.jsx(ln,{pb:3,pt:{base:8,md:4},children:e.jsxs(N,{justify:"space-between",align:"start",direction:{base:"column",sm:"row"},gap:{base:3,sm:0},children:[e.jsxs(de,{align:"start",spacing:1,children:[e.jsx(Ee,{size:{base:"xs",sm:"sm"},color:y,children:t.courseName}),e.jsxs(m,{fontSize:"xs",color:O,children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsxs(Te,{spacing:2,flexShrink:0,children:[e.jsx(Wt,{size:{base:"sm",md:"sm"},colorScheme:"blue",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:t.currentSection}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:"gray.500",children:""}),e.jsx(Wt,{size:{base:"sm",md:"sm"},colorScheme:"green",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:t.desiredSection})]})]})}),e.jsxs(It,{py:0,children:[e.jsxs(ct,{templateColumns:{base:"1fr",sm:"repeat(2, 1fr)"},gap:{base:3,sm:4},py:3,children:[e.jsxs(de,{align:"start",spacing:2,children:[e.jsxs(N,{align:"center",children:[e.jsx(E,{as:Bt,mr:2,color:M}),e.jsxs(de,{spacing:0,align:"start",children:[e.jsx(m,{fontSize:"xs",color:O,children:"Current Day"}),e.jsx(m,{fontSize:"sm",color:y,children:t.currentDay})]})]}),e.jsxs(N,{align:"center",children:[e.jsx(E,{as:nn,mr:2,color:M}),e.jsxs(de,{spacing:0,align:"start",children:[e.jsx(m,{fontSize:"xs",color:O,children:"Time"}),e.jsx(m,{fontSize:"sm",color:y,children:L(t.currentTime)})]})]})]}),e.jsxs(de,{align:"start",spacing:2,children:[e.jsxs(N,{align:"center",children:[e.jsx(E,{as:Bt,mr:2,color:M}),e.jsxs(de,{spacing:0,align:"start",children:[e.jsx(m,{fontSize:"xs",color:O,children:"Desired Day"}),e.jsx(m,{fontSize:"sm",color:y,children:t.desiredDay})]})]}),e.jsxs(N,{align:"center",children:[e.jsx(E,{as:nn,mr:2,color:M}),e.jsxs(de,{spacing:0,align:"start",children:[e.jsx(m,{fontSize:"xs",color:O,children:"Time"}),e.jsx(m,{fontSize:"sm",color:y,children:L(t.desiredTime)})]})]})]})]}),t.reason&&e.jsxs(E,{mt:2,p:3,bg:R("gray.50","gray.700"),borderRadius:"md",children:[e.jsx(m,{fontSize:"sm",color:O,noOfLines:2,children:t.reason}),d&&t.applications&&t.applications.length>0&&e.jsxs(E,{pt:4,mt:4,borderTopWidth:"1px",borderColor:_,children:[e.jsx(Ee,{size:"sm",mb:3,color:y,children:"Applicants"}),e.jsx(de,{spacing:4,align:"stretch",children:t.applications.map(A=>e.jsxs(N,{justify:"space-between",align:"center",children:[e.jsxs(N,{align:"center",children:[e.jsx(gt,{size:"sm",name:A.user.username,src:A.user.avatar}),e.jsxs(E,{ml:3,children:[e.jsx(m,{fontWeight:"bold",color:y,children:A.user.username}),e.jsx(m,{fontSize:"sm",color:O,children:A.reason})]})]}),e.jsx(E,{textAlign:"right",children:A.status==="pending"?e.jsxs(Te,{spacing:2,children:[e.jsx(G,{size:"xs",colorScheme:"green",onClick:()=>d(A.id,"approved"),children:"Approve"}),e.jsx(G,{size:"xs",colorScheme:"red",onClick:()=>d(A.id,"declined"),children:"Decline"})]}):e.jsx(dt,{colorScheme:A.status==="approved"?"green":"red",children:A.status.charAt(0).toUpperCase()+A.status.slice(1)})})]},A.id))})]})]})]}),e.jsx(Ir,{pt:3,children:e.jsxs(N,{w:"100%",justify:"space-between",align:"center",direction:{base:"column",sm:"row"},gap:{base:3,sm:0},children:[e.jsxs(Te,{spacing:2,children:[e.jsx(gt,{size:"xs",src:t.requesterAvatar,name:t.requesterName}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:y,fontWeight:"medium",children:t.requesterName})]}),t.status==="pending"&&e.jsxs(Te,{spacing:2,flexWrap:"wrap",justify:{base:"center",sm:"flex-end"},children:[g&&e.jsxs(e.Fragment,{children:[e.jsx(G,{size:{base:"xs",sm:"sm"},variant:"solid",colorScheme:"blue",onClick:()=>o(t.id),fontSize:{base:"xs",sm:"sm"},children:t.applications&&t.applications.length>0?`Applicants (${t.applications.length})`:"No Applicants"}),e.jsxs(Tt,{children:[e.jsx(Pt,{as:Ke,"aria-label":"More actions",icon:e.jsx(or,{style:{transform:"rotate(-90deg)"}}),size:"sm",variant:"ghost"}),e.jsxs(At,{children:[e.jsx(Qe,{icon:e.jsx(sn,{}),onClick:()=>s(t.id),children:"Cancel"}),e.jsx(Qe,{icon:e.jsx(ud,{}),onClick:()=>v(t),children:"Edit"}),e.jsx(Qe,{icon:e.jsx(is,{}),color:"red.500",onClick:()=>i(t.id),children:"Delete"})]})]})]}),!g&&w&&e.jsx(G,{size:{base:"xs",sm:"sm"},colorScheme:"gray",variant:"solid",isDisabled:!0,fontSize:{base:"xs",sm:"sm"},children:"Applied"}),!g&&!w&&typeof n=="function"&&e.jsx(G,{size:{base:"xs",sm:"sm"},colorScheme:"green",variant:"solid",leftIcon:e.jsx(wr,{}),onClick:()=>n(t.id),fontSize:{base:"xs",sm:"sm"},children:"Apply"})]})]})})]})},mp=({application:t,onWithdraw:r})=>{const[n,s]=h.useState(!1),i=h.useRef(),o=R("white","gray.800"),a=R("gray.800","white"),d=R("gray.600","gray.400"),v=R("gray.100","gray.700"),g={pending:"orange",accepted:"green",declined:"red",cancelled:"gray"},u=t.request,y=(u==null?void 0:u.courseName)||`Request #${t.request_id}`,O=(u==null?void 0:u.currentSection)||"-",M=(u==null?void 0:u.desiredSection)||"-",_=(u==null?void 0:u.currentDay)||"-",w=(u==null?void 0:u.desiredDay)||"-",z=(u==null?void 0:u.currentTime)||"-",L=(u==null?void 0:u.desiredTime)||"-";return u!=null&&u.requesterAvatar,u!=null&&u.requesterName,e.jsxs(et,{bg:o,boxShadow:"sm",border:"1px solid",borderColor:v,borderRadius:"lg",overflow:"hidden",transition:"all 0.2s",_hover:{transform:"translateY(-2px)",boxShadow:"md"},children:[e.jsx(dt,{position:"absolute",top:2,right:2,colorScheme:g[t.status],variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:t.status}),e.jsx(ln,{pb:3,pt:{base:8,md:4},children:e.jsx(N,{justify:"space-between",align:"start",children:e.jsxs(de,{align:"start",spacing:1,children:[e.jsx(Ee,{size:{base:"xs",sm:"sm"},color:a,children:y}),e.jsxs(m,{fontSize:"xs",color:d,children:["Applied: ",new Date(t.createdAt).toLocaleDateString()]})]})})}),e.jsxs(It,{py:0,children:[e.jsxs(ct,{templateColumns:{base:"1fr",sm:"repeat(2, 1fr)"},gap:{base:3,sm:4},py:3,children:[e.jsxs(de,{align:"start",spacing:2,children:[e.jsx(m,{fontSize:{base:"xs",sm:"sm"},fontWeight:"medium",color:a,children:"Current Section"}),e.jsx(Wt,{size:{base:"sm",sm:"md"},colorScheme:"blue",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:O}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:d,mt:2,children:"Current Day"}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:a,children:_}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:d,mt:2,children:"Current Time"}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:a,children:z})]}),e.jsxs(de,{align:"start",spacing:2,children:[e.jsx(m,{fontSize:{base:"xs",sm:"sm"},fontWeight:"medium",color:a,children:"Desired Section"}),e.jsx(Wt,{size:{base:"sm",sm:"md"},colorScheme:"green",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:M}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:d,mt:2,children:"Desired Day"}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:a,children:w}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:d,mt:2,children:"Desired Time"}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:a,children:L})]})]}),e.jsxs(E,{mt:2,p:{base:2,sm:3},bg:R("gray.50","gray.700"),borderRadius:"md",children:[e.jsx(m,{fontSize:{base:"xs",sm:"sm"},fontWeight:"medium",color:a,children:"Your Reason:"}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:d,children:t.reason})]})]}),e.jsx(Ir,{pt:3,children:e.jsx(N,{w:"100%",justify:"space-between",align:"center",children:r&&t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(G,{size:{base:"xs",sm:"sm"},colorScheme:"red",variant:"outline",onClick:()=>s(!0),"aria-label":"Withdraw Application",fontSize:{base:"xs",sm:"sm"},children:"Withdraw"}),e.jsx(cn,{isOpen:n,leastDestructiveRef:i,onClose:()=>s(!1),children:e.jsx(at,{children:e.jsxs(dn,{children:[e.jsx(ut,{fontSize:"lg",fontWeight:"bold",children:"Withdraw Application"}),e.jsx(lt,{children:"Are you sure you want to withdraw this application? This action cannot be undone."}),e.jsxs(xt,{children:[e.jsx(G,{ref:i,onClick:()=>s(!1),children:"Cancel"}),e.jsx(G,{colorScheme:"red",ml:3,onClick:()=>{s(!1),r(t.id)},children:"Confirm"})]})]})})})]})})})]})},gp=h.forwardRef(({onEditRequest:t},r)=>{const{isOpen:n,onOpen:s,onClose:i}=pt(),o=St(),a=Lt(),{user:d}=ar(),{isOpen:v,onOpen:g,onClose:u}=pt(),{courses:y,coursesLoading:O,coursesError:M,coursesPage:_,coursesTotalPages:w,setCoursesPage:z}=Sa({trigger:n||v}),L=R("gray.50","gray.900"),$=R("white","gray.800"),A=R("gray.800","white"),B=R("gray.600","gray.400"),p=R("yellow.400","yellow.500"),j=R("gray.100","gray.700"),[k,I]=h.useState([]),[x,f]=h.useState(1),[S,P]=h.useState(1),[T,D]=h.useState("created_at"),[Z,re]=h.useState("desc"),[c,fe]=h.useState([]),[C,l]=h.useState(1),[b,F]=h.useState(1),[se,V]=h.useState("created_at"),[ae,X]=h.useState("desc"),[ie,he]=h.useState([]),[le,ue]=h.useState(1),[Pe,Ae]=h.useState(1),[De,Oe]=h.useState("created_at"),[qe,Ge]=h.useState("desc"),[Q,ee]=h.useState(!0),[ze,Le]=h.useState({course_code:"",current_day:"",desired_day:""}),[Ve,Ze]=h.useState(!1);h.useImperativeHandle(r,()=>({fetchAvailableRequestsPaginated:tt,fetchMyRequestsPaginated:$e,fetchMyApplicationsPaginated:Se}));const[st,me]=h.useState(!1),[Y,U]=h.useState(!1),[J,ne]=h.useState(null),[K,te]=h.useState(""),[pe,ve]=h.useState(!1),[ge,ye]=h.useState([]),tt=async(oe=1,Me=T,He=Z)=>{ee(!0);try{const je=await sp({page:oe,sort_by:Me,sort_order:He});I(Array.isArray(je.data)?je.data.map(Qr):[]),P(je.last_page||1),f(je.current_page||1)}catch(je){o({title:"Failed to load available requests",description:je.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{ee(!1)}},$e=async(oe=1,Me=se,He=ae)=>{ee(!0);try{const je=await op({page:oe,sort_by:Me,sort_order:He});let W=[];Array.isArray(je.data)&&(W=je.data.map(Xe=>Qr(Xe,d))),fe(W),F(je.last_page||1),l(je.current_page||1)}catch(je){o({title:"Failed to load your requests",description:je.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{ee(!1)}},Se=async(oe=1,Me=De,He=qe)=>{ee(!0);try{const je=await ap({page:oe,sort_by:Me,sort_order:He});Ae(je.last_page||1),ue(je.current_page||1);const W=je.data||[],Xe=Array.isArray(W)?W.map(bt=>bt&&bt.request_id).filter(Boolean):[],ht=await Promise.all(Xe.map(bt=>cp(bt).catch(()=>null))),Ct={};ht.forEach((bt,Ur)=>{bt&&bt.id&&(Ct[bt.id]=bt)});const fr=Array.isArray(W)?W.map(bt=>{const Ur=lo(bt),mn=bt&&bt.request?Qr(bt.request):bt&&Ct[bt.request_id]?Qr(Ct[bt.request_id]):void 0;return{...Ur,request:mn}}):[];he(fr)}catch(je){o({title:"Failed to load applications",description:je.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{ee(!1)}};h.useEffect(()=>{tt(x,T,Z)},[x,T,Z]),h.useEffect(()=>{$e(C,se,ae)},[C,se,ae]),h.useEffect(()=>{Se(le,De,qe)},[le,De,qe]);const Be=oe=>{const{name:Me,value:He}=oe.target;Le(je=>({...je,[Me]:He}))},Ue=async()=>{Ze(!0);try{const oe=await ip({course_name:ze.course_code,current_day:ze.current_day,desired_day:ze.desired_day});I(Array.isArray(oe.data)?oe.data.map(Qr):[]),u()}catch(oe){o({title:"Failed to apply filters",description:oe.message||"Please try again later",status:"error",duration:4e3,isClosable:!0})}finally{Ze(!1)}},rt=async oe=>{try{await fp(oe),he(Me=>Me.filter(He=>He.id!==oe)),tt(),o({title:"Application withdrawn",description:"Your application has been successfully withdrawn.",status:"info",duration:3e3,isClosable:!0})}catch(Me){o({title:"Failed to withdraw application",description:Me.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},Mt=async oe=>{if(window.confirm("Are you sure you want to delete this request? This cannot be undone."))try{await dp(oe),fe(Me=>Me.filter(He=>He.id!==oe)),o({title:"Request deleted",status:"info",duration:3e3,isClosable:!0})}catch(Me){o({title:"Failed to delete request",description:Me.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},q=oe=>{ne(oe),te(""),me(!0)},ce=async()=>{if(!pe){ve(!0);try{await up(J,{reason:K}),I(oe=>oe.map(Me=>Me.id===J?{...Me,applications:[...Me.applications||[],{id:Date.now().toString(),userId:d.id,userName:"You",userAvatar:cs,reason:K,createdAt:new Date().toISOString(),status:"pending"}]}:Me)),await Se(),o({title:"Application submitted",description:"Your application has been submitted to the request owner.",status:"success",duration:3e3,isClosable:!0}),me(!1),te(""),ne(null)}catch(oe){o({title:"Failed to submit application",description:oe.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{ve(!1)}}},Ie=async oe=>{try{const Me=await hp(oe);ne(oe),ye(Me.map(lo)),U(!0)}catch(Me){o({title:"Failed to load applications",description:Me.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},Ce=async oe=>{try{await ao(oe,{status:"accepted"});const Me=ge.map(He=>He.id===oe?{...He,status:"accepted"}:{...He,status:He.status==="pending"?"declined":He.status});ye(Me),fe(He=>He.map(je=>je.id===J?{...je,status:"accepted",applications:Me}:je)),U(!1),o({title:"Application accepted",description:"You have accepted the application for your class exchange request.",status:"success",duration:3e3,isClosable:!0})}catch(Me){o({title:"Failed to accept application",description:Me.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},Re=async oe=>{try{await ao(oe,{status:"declined"});const Me=ge.map(He=>He.id===oe?{...He,status:"declined"}:He);ye(Me),fe(He=>He.map(je=>je.id===J?{...je,applications:Me}:je)),o({title:"Application declined",description:"You have declined the application for your class exchange request.",status:"info",duration:3e3,isClosable:!0})}catch(Me){o({title:"Failed to decline application",description:Me.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},Ne=async oe=>{try{await wa(oe,{status:"cancelled"}),fe(Me=>Me.map(He=>He.id===oe?{...He,status:"cancelled"}:He)),o({title:"Request cancelled",description:"Your class exchange request has been cancelled.",status:"info",duration:3e3,isClosable:!0})}catch(Me){o({title:"Failed to cancel request",description:Me.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},Je=()=>{a(-1)};return e.jsxs(E,{minH:"100vh",bg:L,p:{base:2,sm:4,md:6},children:[e.jsxs(Jt,{maxW:"7xl",children:[e.jsxs(N,{mb:{base:4,md:8},align:"center",children:[e.jsx(Ke,{icon:e.jsx(or,{}),onClick:Je,"aria-label":"Go back",variant:"ghost",color:A,size:{base:"md",md:"lg"},mr:{base:2,md:3},_hover:{bg:R("gray.100","gray.700")}}),e.jsxs(de,{align:"start",spacing:1,children:[e.jsx(Ee,{size:{base:"md",md:"lg"},color:A,children:"Class Exchange Requests"}),e.jsx(m,{fontSize:{base:"xs",sm:"sm"},color:B,display:{base:"none",sm:"block"},children:"Manage your class time exchange requests"})]})]}),e.jsxs(E,{bg:$,borderRadius:"xl",boxShadow:"sm",borderWidth:"1px",borderColor:j,children:[e.jsxs(N,{justify:"flex-end",p:{base:3,md:6},borderBottomWidth:"1px",borderColor:j,gap:{base:2,md:3},flexWrap:"wrap",children:[e.jsx(G,{colorScheme:"yellow",leftIcon:e.jsx(ns,{}),onClick:g,size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Filters"}),e.jsx(G,{leftIcon:e.jsx(Ut,{}),onClick:s,colorScheme:"yellow",size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"New Request"})]}),e.jsxs(kt,{isOpen:v,onClose:u,isCentered:!0,children:[e.jsx(at,{}),e.jsxs(Ot,{children:[e.jsx(ut,{children:"Filter Requests"}),e.jsx(wt,{}),e.jsx(lt,{children:e.jsxs(mt,{spacing:4,children:[e.jsxs(xe,{children:[e.jsx(be,{children:"Course"}),e.jsxs(Tt,{isLazy:!0,children:[e.jsx(Pt,{as:G,width:"100%",rightIcon:e.jsx("span",{style:{marginLeft:8},children:""}),isLoading:O,isDisabled:O||!!M,textAlign:"left",children:ze.course_code?(()=>{const oe=y.find(Me=>Me.code===ze.course_code);return oe?`${oe.code} - ${oe.title}`:ze.course_code})():O?"Loading courses...":"Select course"}),e.jsxs(At,{maxH:"250px",overflowY:"auto",minW:"250px",px:0,children:[M?e.jsx(Qe,{isDisabled:!0,children:"Failed to load courses"}):y.length===0&&!O?e.jsx(Qe,{isDisabled:!0,children:"No courses found"}):y.map(oe=>e.jsx(Qe,{value:oe.title,onClick:()=>Le(Me=>({...Me,course_code:oe.code})),_active:{bg:"gray.100"},_selected:{fontWeight:"bold",bg:"gray.200"},style:ze.course_code===oe.code?{fontWeight:"bold",background:"#f7fafc"}:{},children:oe.code?`${oe.code} - ${oe.title}`:oe.title},oe.id)),e.jsx(E,{borderTop:"1px solid #eee",mt:2,pt:2,px:2,children:e.jsxs(N,{justify:"space-between",align:"center",children:[e.jsx(G,{size:"xs",onClick:oe=>{oe.stopPropagation(),z(Me=>Math.max(1,Me-1))},isDisabled:O||_<=1,children:"Prev"}),e.jsxs(m,{fontSize:"xs",children:["Page ",_," of ",w]}),e.jsx(G,{size:"xs",onClick:oe=>{oe.stopPropagation(),z(Me=>Math.min(w,Me+1))},isDisabled:O||_>=w,children:"Next"})]})})]})]})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Current Day"}),e.jsxs(sr,{placeholder:"Select current day",name:"current_day",value:ze.current_day,onChange:Be,children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Desired Day"}),e.jsxs(sr,{placeholder:"Select desired day",name:"desired_day",value:ze.desired_day,onChange:Be,children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]})]})}),e.jsxs(xt,{children:[e.jsx(G,{onClick:u,mr:3,variant:"ghost",children:"Cancel"}),e.jsx(G,{colorScheme:"yellow",onClick:Ue,isLoading:Ve,children:"Apply Filters"})]})]})]}),e.jsxs($n,{variant:"soft-rounded",colorScheme:"yellow",children:[e.jsxs(Hn,{px:{base:2,md:6},pt:4,pb:2,mb:4,overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",css:{"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:R("gray.300","gray.600"),borderRadius:"2px"}},children:[e.jsx(Zt,{fontSize:{base:"xs",sm:"sm"},px:{base:3,sm:4},_selected:{fontWeight:"semibold",color:A,bg:`${p}20`},children:"Available"}),e.jsxs(Zt,{fontSize:{base:"xs",sm:"sm"},px:{base:3,sm:4},_selected:{fontWeight:"semibold",color:A,bg:`${p}20`},children:["My Requests (",c.length,")"]}),e.jsx(Zt,{fontSize:{base:"xs",sm:"sm"},px:{base:3,sm:4},_selected:{fontWeight:"semibold",color:A,bg:`${p}20`},children:"My Applications"})]}),e.jsxs(Gn,{px:{base:2,md:6},py:0,children:[e.jsx(er,{p:0,children:Q?e.jsx(N,{justify:"center",py:10,children:e.jsx(_t,{size:"xl"})}):k.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ct,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:{base:4,md:6},children:k.map(oe=>e.jsx(co,{request:oe,userId:d.id,onApply:q,onViewApplications:Ie,onEdit:t,onDelete:Mt},oe.id))}),e.jsx(Ys,{currentPage:x,totalPages:S,onPageChange:f,isLoading:Q})]}):e.jsx(E,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:j,borderRadius:"lg",children:e.jsx(m,{color:B,children:"No available requests at this time"})})}),e.jsx(er,{p:0,children:Q?e.jsx(N,{justify:"center",py:10,children:e.jsx(_t,{size:"xl"})}):c.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ct,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:{base:4,md:6},children:c.map(oe=>e.jsx(co,{request:oe,userId:d.id,onCancel:Ne,onDelete:Mt,onViewApplications:Ie,onEdit:t},oe.id))}),e.jsx(Ys,{currentPage:C,totalPages:b,onPageChange:l,isLoading:Q})]}):e.jsx(E,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:j,borderRadius:"lg",children:e.jsx(m,{color:B,children:"No personal requests found"})})}),e.jsx(er,{p:0,children:Q?e.jsx(N,{justify:"center",py:10,children:e.jsx(_t,{size:"xl"})}):ie.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ct,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:{base:4,md:6},mb:6,children:ie.map(oe=>e.jsx(mp,{application:oe,onWithdraw:rt},oe.id))}),e.jsx(N,{justify:"center",mt:6,mb:4,children:e.jsxs(Qa,{isAttached:!0,variant:"outline",size:"sm",children:[e.jsx(Ke,{icon:e.jsx(or,{}),isDisabled:le<=1,onClick:()=>ue(oe=>Math.max(oe-1,1)),"aria-label":"Previous page"}),e.jsxs(G,{isDisabled:!0,children:["Page ",le," of ",Pe]}),e.jsx(Ke,{icon:e.jsx(Sr,{}),isDisabled:le>=Pe,onClick:()=>ue(oe=>Math.min(oe+1,Pe)),"aria-label":"Next page"})]})})]}):e.jsx(E,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:j,borderRadius:"lg",children:e.jsx(m,{color:B,children:"No applications submitted yet"})})})]})]})]})]}),e.jsx(Ca,{isOpen:n,onClose:i,mode:"create",initialData:{},onSubmit:async oe=>{var Me,He;try{const je=await lp({course_name:oe.courseName,current_section:oe.currentSection,desired_section:oe.desiredSection,current_day:oe.currentDay,current_time:oe.currentTime,desired_day:oe.desiredDay,desired_time:oe.desiredTime,reason:oe.reason});await tt(),await $e(),o({title:"Request created",description:"Your class exchange request has been submitted.",status:"success",duration:3e3,isClosable:!0}),i()}catch(je){throw o({title:"Failed to create request",description:((He=(Me=je.response)==null?void 0:Me.data)==null?void 0:He.message)||"Please try again later",status:"error",duration:5e3,isClosable:!0}),je}},courses:y,coursesLoading:O,coursesError:M,coursesPage:_,coursesTotalPages:w,onCoursePageChange:z}),e.jsxs(kt,{isOpen:st,onClose:()=>me(!1),size:"md",children:[e.jsx(at,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(Ot,{bg:$,borderRadius:"xl",children:[e.jsx(ut,{color:A,children:"Apply for Class Exchange"}),e.jsx(wt,{}),e.jsxs(lt,{children:[e.jsxs(de,{spacing:4,align:"stretch",children:[e.jsx(m,{fontSize:"sm",color:B,children:"Submit your application to exchange class times with the requester. The requester will review all applications and select one to accept."}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{color:A,children:"Why do you want to exchange?"}),e.jsx(Yt,{value:K,onChange:oe=>te(oe.target.value),placeholder:"Explain why this exchange works for you...",color:A,resize:"vertical",rows:3})]})]}),e.jsxs(N,{justify:"flex-end",mt:6,gap:3,children:[e.jsx(G,{variant:"ghost",onClick:()=>me(!1),children:"Cancel"}),e.jsx(G,{type:"button",colorScheme:"green",isDisabled:!K.trim()||pe,isLoading:pe,onClick:ce,children:"Submit Application"})]})]})]})]}),e.jsxs(kt,{isOpen:Y,onClose:()=>U(!1),size:"xl",children:[e.jsx(at,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(Ot,{bg:$,borderRadius:"xl",children:[e.jsx(ut,{color:A,children:"Applications for Your Request"}),e.jsx(wt,{}),e.jsx(lt,{children:ge.length>0?e.jsx(de,{spacing:4,align:"stretch",children:ge.map(oe=>{var Me;return e.jsxs(et,{p:4,borderRadius:"md",borderWidth:"1px",borderColor:j,position:"relative",children:[oe.status!=="pending"&&e.jsx(dt,{position:"absolute",top:2,right:2,colorScheme:oe.status==="accepted"?"green":"red",variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:oe.status}),e.jsxs(N,{mb:3,children:[e.jsx(gt,{size:"sm",src:oe.userAvatar,name:(Me=oe.user)==null?void 0:Me.name,mr:3}),e.jsxs(de,{align:"start",spacing:0,children:[e.jsx(m,{fontWeight:"medium",color:A,children:oe.userName}),e.jsxs(m,{fontSize:"xs",color:B,children:["Applied: ",new Date(oe.createdAt).toLocaleDateString()]})]})]}),e.jsx(E,{p:3,bg:R("gray.50","gray.700"),borderRadius:"md",mb:3,children:e.jsx(m,{fontSize:"sm",color:B,children:oe.reason})}),oe.status==="pending"&&e.jsxs(N,{justifyContent:"flex-end",gap:2,children:[e.jsx(G,{size:"sm",colorScheme:"green",onClick:()=>Ce(oe.id),children:"Accept"}),e.jsx(G,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>Re(oe.id),children:"Decline"})]})]},oe.id)})}):e.jsx(E,{p:8,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:j,borderRadius:"lg",children:e.jsx(m,{color:B,children:"No applications received yet"})})}),e.jsx(xt,{children:e.jsx(G,{onClick:()=>U(!1),children:"Close"})})]})]})]})});function Ca({isOpen:t,onClose:r,mode:n="create",initialData:s={},onSubmit:i,courses:o=[],coursesLoading:a=!1,coursesError:d=null,coursesPage:v=1,coursesTotalPages:g=1,onCoursePageChange:u}){var $,A,B,p;const y={id:"",courseName:"",currentSection:"",desiredSection:"",currentDay:"",currentTime:"",desiredDay:"",desiredTime:"",reason:""},[O,M]=h.useState({...y,...s}),[_,w]=h.useState(!1);h.useEffect(()=>{M({...y,...s})},[s]);const z=j=>{const{name:k,value:I}=j.target;M(x=>({...x,[k]:I}))},L=async j=>{j.preventDefault(),w(!0);try{await i(O)}catch{}finally{w(!1)}};return e.jsxs(kt,{isOpen:t,onClose:r,size:"lg",children:[e.jsx(at,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(Ot,{borderRadius:"xl",children:[e.jsx(ut,{children:n==="edit"?"Edit Exchange Request":"Create Exchange Request"}),e.jsx(wt,{}),e.jsxs(lt,{children:[e.jsxs(Bn,{status:"info",variant:"left-accent",mb:4,borderRadius:"md",children:[e.jsx(Un,{}),e.jsx(m,{fontSize:"sm",children:"You can only make up to 2 exchange requests per day."})]}),e.jsxs("form",{onSubmit:L,children:[e.jsxs(mt,{spacing:4,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Course"}),e.jsxs(Tt,{isLazy:!0,children:[e.jsx(Pt,{as:G,w:"100%",rightIcon:e.jsx("span",{style:{marginLeft:8},children:""}),isLoading:a,isDisabled:a,variant:"outline",textAlign:"left",children:O.courseName?($=o.find(j=>(j.code||j.name)===O.courseName))!=null&&$.code?`${(A=o.find(j=>(j.code||j.name)===O.courseName))==null?void 0:A.code} - ${(B=o.find(j=>(j.code||j.name)===O.courseName))==null?void 0:B.title}`:(p=o.find(j=>(j.code||j.name)===O.courseName))==null?void 0:p.name:a?"Loading courses...":"Select course"}),e.jsxs(At,{maxH:"320px",overflowY:"auto",minW:"320px",px:0,children:[d&&e.jsx(E,{px:4,py:2,children:e.jsx(m,{color:"red.500",fontSize:"sm",children:d})}),a?e.jsx(E,{px:4,py:2,children:e.jsx(m,{fontSize:"sm",children:"Loading..."})}):o.length===0?e.jsx(E,{px:4,py:2,children:e.jsx(m,{fontSize:"sm",color:"gray.500",children:"No courses found."})}):o.map(j=>e.jsx(Qe,{value:j.code||j.name,onClick:()=>M(k=>({...k,courseName:j.code||j.name})),bg:(j.code||j.name)===O.courseName?"blue.50":void 0,fontWeight:(j.code||j.name)===O.courseName?"bold":"normal",children:j.code?`${j.code} - ${j.title}`:j.name},j.id||j.code)),e.jsx(E,{borderTop:"1px solid",borderColor:"gray.100",mt:2,px:2,py:1,children:e.jsx(Ys,{currentPage:v,totalPages:g,onPageChange:u,isLoading:a})})]})]})]}),e.jsxs(ct,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Current Section"}),e.jsx(We,{name:"currentSection",value:O.currentSection,onChange:z,placeholder:"e.g., A, B, C"})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Desired Section"}),e.jsx(We,{name:"desiredSection",value:O.desiredSection,onChange:z,placeholder:"e.g., B, C, D"})]})]}),e.jsxs(ct,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Current Day"}),e.jsxs(sr,{name:"currentDay",value:O.currentDay,onChange:z,placeholder:"Select day",children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Current Time"}),e.jsx(We,{name:"currentTime",value:O.currentTime,onChange:z,type:"time"})]})]}),e.jsxs(ct,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Desired Day"}),e.jsxs(sr,{name:"desiredDay",value:O.desiredDay,onChange:z,placeholder:"Select day",children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(xe,{isRequired:!0,children:[e.jsx(be,{children:"Desired Time"}),e.jsx(We,{name:"desiredTime",value:O.desiredTime,onChange:z,type:"time"})]})]}),e.jsxs(xe,{children:[e.jsx(be,{children:"Reason (Optional)"}),e.jsx(Yt,{name:"reason",value:O.reason,onChange:z,placeholder:"Explain why you need to exchange class times...",resize:"vertical",rows:2})]})]}),e.jsxs(N,{justify:"flex-end",mt:6,gap:3,children:[e.jsx(G,{variant:"ghost",onClick:r,children:"Cancel"}),e.jsx(G,{type:"submit",colorScheme:n==="edit"?"blue":"yellow",isLoading:_,children:n==="edit"?"Update":"Create Request"})]})]})]})]})]})}function xp(t){const r=h.useRef(),n=St(),{courses:s,coursesLoading:i,coursesError:o,coursesPage:a,coursesTotalPages:d,setCoursesPage:v}=Sa({trigger:t.editRequestModalOpen}),[g,u]=h.useState(!1),[y,O]=h.useState(null),[M,_]=h.useState(!1),w=L=>{O(L),u(!0)},z=async L=>{_(!0);try{const $={course_name:L.courseName,current_section:L.currentSection,desired_section:L.desiredSection,current_day:L.currentDay,desired_day:L.desiredDay,current_time:L.currentTime,desired_time:L.desiredTime,reason:L.reason};await wa(L.id,$),u(!1),O(null),r.current&&(r.current.fetchAvailableRequestsPaginated(),r.current.fetchMyRequestsPaginated()),n({title:"Request updated",status:"success",duration:3e3,isClosable:!0})}catch($){n({title:"Failed to update request",description:$.message,status:"error",duration:4e3,isClosable:!0})}finally{_(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(gp,{ref:r,onEditRequest:w}),e.jsx(Ca,{isOpen:g,onClose:()=>u(!1),mode:"edit",initialData:y||{},onSubmit:z,isLoading:M,courses:s,coursesLoading:i,coursesError:o,coursesPage:a,coursesTotalPages:d,onCoursePageChange:v})]})}const bp=()=>{const t=R("#f0f4f8","gray.900"),r=R("white","gray.800"),n=R("gray.200","gray.600"),s=R("brand.navy","white"),i=R("gray.600","gray.400"),o=R("brand.gold","brand.goldDark"),a=R("brand.navy","brand.navyDark"),d=R("0 4px 20px rgba(0, 0, 0, 0.1)","0 4px 20px rgba(0, 0, 0, 0.3)"),v=R("gray.50","gray.700");Wr({base:!0,md:!1});const g=St(),u=Lt(),{notifications:y,loading:O,error:M,unreadCount:_,currentPage:w,totalPages:z,hasMore:L,markAsRead:$,markAllAsRead:A,deleteNotification:B,fetchNotifications:p}=ea(),j=async()=>{try{await A(),g({title:"All notifications marked as read",status:"success",duration:3e3,isClosable:!0,position:"top"})}catch{g({title:"Failed to mark all as read",status:"error",duration:3e3,isClosable:!0,position:"top"})}},k=async S=>{try{await $(S)}catch{}},I=async S=>{try{await B(S),g({title:"Notification deleted",status:"success",duration:3e3,isClosable:!0,position:"top"})}catch{g({title:"Failed to delete notification",status:"error",duration:3e3,isClosable:!0,position:"top"})}},x=S=>{S>=1&&S<=z&&p(S,!1)},f=async S=>{if(S.isRead||k(S.id),S.url)try{const P=new URL(S.url).pathname;u(P)}catch{console.error("Invalid URL for notification:",S.url),g({title:"Invalid notification link",status:"error",duration:3e3,isClosable:!0,position:"top"})}};return e.jsx(E,{minH:"100vh",bg:t,py:{base:4,md:8},px:{base:3,md:6},children:e.jsx(Jt,{maxW:"900px",children:e.jsxs(N,{direction:"column",mx:"auto",bg:r,borderRadius:"xl",overflow:"hidden",boxShadow:d,children:[e.jsxs(N,{p:4,align:"center",justify:"space-between",borderBottom:"1px solid",borderColor:n,bg:R("gray.50","gray.750"),children:[e.jsxs(Te,{spacing:3,children:[e.jsx(Ke,{as:ir,to:"/dashboard",icon:e.jsx(or,{size:18}),variant:"ghost","aria-label":"Go back",color:s,borderRadius:"full",size:"md",_hover:{bg:`${o}20`}}),e.jsx(Fe,{as:Pr,color:o,boxSize:5}),e.jsx(Ee,{size:"md",color:s,children:"Notifications"}),_>0&&e.jsxs(dt,{px:2,py:1,bg:o,color:a,borderRadius:"full",fontWeight:"medium",children:[_," new"]})]}),e.jsx(G,{size:"sm",colorScheme:"gray",variant:"ghost",onClick:j,leftIcon:e.jsx(wr,{}),isDisabled:_===0,_hover:{bg:`${o}20`},children:"Mark all as read"})]}),e.jsx(E,{children:O?e.jsx(Gt,{py:16,children:e.jsx(m,{color:i,children:"Loading notifications..."})}):M?e.jsx(Gt,{py:16,children:e.jsx(m,{color:"red.400",children:M})}):y.length>0?e.jsxs(e.Fragment,{children:[e.jsx(de,{spacing:0,align:"stretch",divider:e.jsx(Et,{borderColor:n}),children:y.map(S=>e.jsx(E,{children:e.jsx(N,{p:5,position:"relative",bg:S.isRead?"transparent":`${o}10`,_hover:{bg:v},transition:"all 0.2s ease",borderLeft:"3px solid",borderLeftColor:S.isRead?"transparent":o,onClick:()=>f(S),cursor:S.url?"pointer":"default",direction:"column",children:e.jsxs(N,{align:"flex-start",gap:4,children:[e.jsxs(E,{position:"relative",flexShrink:0,children:[e.jsx(gt,{size:"md",name:S.user,src:S.avatar,border:"2px solid",borderColor:S.isRead?n:o}),!S.isRead&&e.jsx(dt,{position:"absolute",top:"-1",right:"-1",bg:o,boxSize:"10px",borderRadius:"full",border:"2px solid",borderColor:r})]}),e.jsxs(E,{ml:0,flex:"1",minW:0,children:[e.jsxs(N,{align:"baseline",justify:"space-between",children:[e.jsx(m,{fontWeight:S.isRead?"medium":"bold",color:s,children:S.user}),e.jsx(m,{fontSize:"sm",color:i,children:S.time})]}),e.jsx(m,{mt:1,color:S.isRead?i:s,children:S.content}),S.type==="resource_rejected"&&S.reason&&e.jsxs(Bn,{mt:3,status:"warning",variant:"subtle",borderRadius:"md",fontSize:"sm",children:[e.jsx(Un,{as:Vo}),e.jsxs(E,{children:[e.jsx(m,{fontWeight:"semibold",mb:1,children:"Rejection Reason:"}),e.jsx(m,{children:S.reason})]})]})]}),e.jsx(Ke,{icon:e.jsx(fn,{}),variant:"ghost",colorScheme:"red",size:"sm",onClick:P=>{P.stopPropagation(),I(S.id)},"aria-label":"Delete notification",alignSelf:"center",borderRadius:"full",opacity:.7,_hover:{opacity:1},flexShrink:0})]})})},S.id))}),z>1&&e.jsxs(N,{justify:"center",align:"center",p:4,borderTop:"1px solid",borderColor:n,children:[e.jsx(G,{onClick:()=>x(w-1),isDisabled:w===1,leftIcon:e.jsx(or,{}),mr:2,children:"Previous"}),e.jsxs(m,{color:i,children:["Page ",w," of ",z]}),e.jsx(G,{onClick:()=>x(w+1),isDisabled:w===z,rightIcon:e.jsx(Sr,{}),ml:2,children:"Next"})]})]}):e.jsx(Gt,{py:16,children:e.jsxs(de,{spacing:4,children:[e.jsx(E,{p:4,borderRadius:"full",bg:`${o}20`,children:e.jsx(Fe,{as:Pr,fontSize:"3xl",color:o})}),e.jsx(Ee,{size:"md",color:s,children:"No notifications"}),e.jsx(m,{color:i,textAlign:"center",maxW:"350px",children:"You're all caught up! Check back later for updates and activities from your courses and study groups."}),e.jsx(G,{as:ir,to:"/dashboard",mt:2,leftIcon:e.jsx(Vt,{}),colorScheme:"gray",variant:"outline",_hover:{bg:`${o}20`,borderColor:o},children:"Return to Dashboard"})]})})})]})})})},yp=h.lazy(()=>rr(()=>import("./GoogleCallback-DTeiIKh7.js"),__vite__mapDeps([0,1,2,3]))),jp=h.lazy(()=>rr(()=>import("./CompleteGoogleRegistration-DSnULlwS.js"),__vite__mapDeps([4,1,2,3]))),vp=h.lazy(()=>rr(()=>import("./ResourceContent-C2_okygn.js"),__vite__mapDeps([5,1,2,3]))),wp=h.lazy(()=>rr(()=>import("./SavedResources-Cfzfl9rx.js"),__vite__mapDeps([6,1,2,3]))),Sp=h.lazy(()=>rr(()=>import("./ResourceModeration-tliZ8Is5.js"),__vite__mapDeps([7,1,2,3]))),Cp=h.lazy(()=>rr(()=>import("./DocumentView-BLXDGGDq.js"),__vite__mapDeps([8,1,2,3]))),_p=h.lazy(()=>rr(()=>import("./NotFound-DcVGu2UW.js"),__vite__mapDeps([9,1,2,3]))),kp=()=>e.jsx(Gt,{h:"100vh",children:e.jsx(_t,{size:"xl",thickness:"4px",speed:"0.65s",color:"blue.500"})}),Op=()=>e.jsx(h.Suspense,{fallback:e.jsx(kp,{}),children:e.jsxs(sl,{children:[e.jsx(ft,{path:"/",element:e.jsx(Ud,{})}),e.jsx(ft,{path:"/login",element:e.jsx(Yd,{})}),e.jsx(ft,{path:"/register",element:e.jsx(Vd,{})}),e.jsx(ft,{path:"/google-callback",element:e.jsx(yp,{})}),e.jsx(ft,{path:"/complete-google-registration",element:e.jsx(jp,{})}),e.jsx(ft,{element:e.jsx(ed,{}),children:e.jsxs(ft,{element:e.jsx(Ld,{}),children:[e.jsx(ft,{path:"/dashboard",element:e.jsx(Jd,{})}),e.jsx(ft,{path:"/settings",element:e.jsx(lh,{})}),e.jsx(ft,{path:"/user/:userId",element:e.jsx(ch,{})}),e.jsx(ft,{path:"/resources",element:e.jsx(mf,{})}),e.jsx(ft,{path:"/clubs",element:e.jsx(Pf,{})}),e.jsx(ft,{path:"/study-groups",element:e.jsx(Uf,{})}),e.jsx(ft,{path:"/events",element:e.jsx(Qf,{})}),e.jsx(ft,{path:"/requests",element:e.jsx(xp,{})}),e.jsx(ft,{path:"/notifications",element:e.jsx(bp,{})}),e.jsx(ft,{path:"/courses/:id",element:e.jsx(ep,{})}),e.jsx(ft,{path:"/grade-calculator",element:e.jsx(np,{})}),e.jsx(ft,{path:"/resources/:id",element:e.jsx(vp,{})}),e.jsx(ft,{path:"/document/:docId",element:e.jsx(Cp,{})}),e.jsx(ft,{path:"/saved-resources",element:e.jsx(wp,{})}),e.jsx(ft,{path:"/resource-moderation",element:e.jsx(Sp,{})})]})}),e.jsx(ft,{path:"*",element:e.jsx(_p,{})})]})}),Rp=()=>{const{pathname:t}=po();return h.useEffect(()=>{window.scrollTo(0,0)},[t]),null},zp=Za({config:{initialColorMode:"light",useSystemColorMode:!1},colors:{brand:{navy:"#1e3669",navyDark:"#132347",gold:"#f2d944",goldDark:"#d9c226",white:"#ffffff"}},styles:{global:t=>({body:{bg:t.colorMode==="dark"?"gray.800":"#f0f4f8"}})},components:{Button:{variants:{primary:t=>({bg:t.colorMode==="dark"?"brand.navyDark":"brand.navy",color:"white",_hover:{bg:t.colorMode==="dark"?"#0c1930":"#182d5a"}}),secondary:t=>({bg:t.colorMode==="dark"?"brand.goldDark":"brand.gold",color:t.colorMode==="dark"?"white":"brand.navy",_hover:{bg:t.colorMode==="dark"?"#c4af22":"#e9d033"}})}}}});function Ep(){return e.jsx(el,{theme:zp,children:e.jsxs(il,{children:[e.jsx(Rp,{}),e.jsx(Zc,{children:e.jsx(Pd,{children:e.jsx(Op,{})})})]})})}gl.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(Ep,{})}));export{Ys as $,ph as A,hh as B,ca as C,ha as D,fh as E,Ko as F,Ks as G,Bt as H,nn as I,Zr as J,Ft as K,Dr as L,im as M,om as N,sm as O,br as P,Er as Q,mh as R,tf as S,no as T,Xf as U,gh as V,Vo as W,tm as X,en as Y,sn as Z,rr as _,Xc as a,Wn as a0,lm as a1,xh as a2,bh as a3,cm as a4,Cd as a5,Kc as b,Rn as c,jr as d,rn as e,Tr as f,Qp as g,kd as h,am as i,Vt as j,wr as k,Lr as l,ri as m,nm as n,rm as o,em as p,ur as q,vd as r,Zp as s,Mr as t,ar as u,is as v,ss as w,dh as x,da as y,uh as z};
