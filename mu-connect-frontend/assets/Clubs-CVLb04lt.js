import{U as H,j as e,ai as K,x as _,aj as Z,ak as W,z as ee,E as B,V as T,W as M,X as F,R,a9 as Se,al as U,c as v,u as z,B as A,O as ce,d as w,h as $,F as L,S as Ee,a7 as ae,ax as oe,K as J,H as P,n as je,D as qe,aF as Me,aG as Fe,A as He,m as Y,a as Ve,Q as Ge,Y as Qe,a8 as Xe,a6 as Ye,b as Je,aK as Ke,M as Ze,e as et,f as tt,g as ge}from"./chakra-BFMGxYLr.js";import{a as r,b as st,u as rt}from"./react-6s1XWRBU.js";import{y as N,D as ze,f as Ce,h as Re,a0 as fe,I as ke,a8 as Oe,Q as nt,c as at,q as ot,T as we,W as lt,L as it}from"./index-Dge-MEAl.js";const De=async(a=1,n="")=>{var t;try{return(await N.get("/clubs",{params:{page:a,query:n||void 0},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Failed to fetch clubs"}}},ct=async a=>{var n;try{return(await N.get(`/clubs/${a}`)).data}catch(t){throw((n=t.response)==null?void 0:n.data)||{message:"Failed to fetch club details"}}},dt=async(a,n)=>{var t;try{return(await N.post(`/clubs/${a}/members`,n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Failed to add club member"}}},ut=async(a,n,t)=>{var s;try{const c={};let p=`/clubs/${a}/members/${n}`;return t instanceof FormData&&(p+="?_method=PUT",c.headers={"Content-Type":"multipart/form-data"}),(await N.post(p,t,c)).data}catch(c){throw((s=c.response)==null?void 0:s.data)||{message:"Failed to update club member"}}},ht=async(a,n)=>{var t;try{return(await N.delete(`/clubs/${a}/members/${n}`)).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Failed to delete club member"}}},mt=async a=>{var n;try{return(await N.post("/clubs",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw((n=t.response)==null?void 0:n.data)||{message:"Failed to create club"}}},pt=async(a,n)=>{var t;try{return(await N.post(`/clubs/${a}/events`,n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Failed to create club event"}}},xt=async(a,n)=>{var t;try{const s={};let c=`/clubs/${a}`;return n instanceof FormData&&(c+="?_method=PUT",s.headers={"Content-Type":"multipart/form-data"}),(await N.post(c,n,s)).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Failed to update club"}}},bt=async a=>{var n;try{return(await N.delete(`/clubs/${a}`)).data}catch(t){throw((n=t.response)==null?void 0:n.data)||{message:"Failed to delete club"}}},gt=({isOpen:a,onClose:n,onClubCreated:t})=>{const[s,c]=r.useState(""),[p,i]=r.useState(""),[m,g]=r.useState(null),[y,d]=r.useState(!1),j=H(),x=C=>{g(C.target.files[0])},D=async C=>{C.preventDefault(),d(!0);const u=new FormData;u.append("name",s),u.append("description",p),m&&u.append("logo",m);try{await mt(u),j({title:"Club created.",description:"The new club has been successfully created.",status:"success",duration:5e3,isClosable:!0}),t(),n()}catch(f){j({title:"Creation failed.",description:f.message||"Could not create the club.",status:"error",duration:5e3,isClosable:!0})}finally{d(!1)}};return e.jsxs(K,{isOpen:a,onClose:n,children:[e.jsx(_,{}),e.jsxs(Z,{as:"form",onSubmit:D,children:[e.jsx(W,{children:"Create a New Club"}),e.jsx(ee,{}),e.jsx(B,{children:e.jsxs(T,{spacing:4,children:[e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Club Name"}),e.jsx(R,{value:s,onChange:C=>c(C.target.value),placeholder:"Enter club name"})]}),e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Description"}),e.jsx(Se,{value:p,onChange:C=>i(C.target.value),placeholder:"Tell us about the club"})]}),e.jsxs(M,{children:[e.jsx(F,{children:"Club Logo"}),e.jsx(R,{type:"file",onChange:x,accept:"image/*"})]})]})}),e.jsxs(U,{children:[e.jsx(v,{variant:"ghost",mr:3,onClick:n,children:"Cancel"}),e.jsx(v,{colorScheme:"blue",type:"submit",isLoading:y,children:"Create Club"})]})]})]})},jt=({isOpen:a,onClose:n,club:t,onEventCreated:s})=>{const[c,p]=r.useState(""),[i,m]=r.useState(""),[g,y]=r.useState(""),[d,j]=r.useState(""),[x,D]=r.useState(""),[C,u]=r.useState(null),[f,S]=r.useState(!1),h=H(),l=b=>{u(b.target.files[0])},E=async b=>{if(b.preventDefault(),!t)return;S(!0);const O=new FormData;O.append("title",c),O.append("event_datetime",i),O.append("location",g),O.append("description",d),O.append("speaker_names",x),C&&O.append("image_path",C);try{await pt(t.id,O),h({title:"Event created.",description:`The event for ${t.name} has been successfully created.`,status:"success",duration:5e3,isClosable:!0}),s(),n()}catch(V){h({title:"Creation failed.",description:V.message||"Could not create the event.",status:"error",duration:5e3,isClosable:!0})}finally{S(!1)}};return e.jsxs(K,{isOpen:a,onClose:n,children:[e.jsx(_,{}),e.jsxs(Z,{as:"form",onSubmit:E,children:[e.jsxs(W,{children:["Create Event for ",t==null?void 0:t.name]}),e.jsx(ee,{}),e.jsx(B,{children:e.jsxs(T,{spacing:4,children:[e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Event Title"}),e.jsx(R,{value:c,onChange:b=>p(b.target.value),placeholder:"Enter event title"})]}),e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Date and Time"}),e.jsx(R,{type:"datetime-local",value:i,onChange:b=>m(b.target.value)})]}),e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Location"}),e.jsx(R,{value:g,onChange:b=>y(b.target.value),placeholder:"Enter event location"})]}),e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Description"}),e.jsx(Se,{value:d,onChange:b=>j(b.target.value),placeholder:"Event details"})]}),e.jsxs(M,{children:[e.jsx(F,{children:"Speaker Names"}),e.jsx(R,{value:x,onChange:b=>D(b.target.value),placeholder:"e.g., John Doe, Jane Smith"})]}),e.jsxs(M,{children:[e.jsx(F,{children:"Event Image"}),e.jsx(R,{type:"file",onChange:l,accept:"image/*"})]})]})}),e.jsxs(U,{children:[e.jsx(v,{variant:"ghost",mr:3,onClick:n,children:"Cancel"}),e.jsx(v,{colorScheme:"blue",type:"submit",isLoading:f,children:"Create Event"})]})]})]})},Ct=({isOpen:a,onClose:n,club:t,onClubUpdated:s})=>{const[c,p]=r.useState(""),[i,m]=r.useState(""),[g,y]=r.useState(null),[d,j]=r.useState(!1),x=H();r.useEffect(()=>{t&&(p(t.name||""),m(t.description||""),y(null))},[t,a]);const D=u=>{y(u.target.files[0])},C=async u=>{if(u.preventDefault(),!t)return;j(!0);const f=new FormData;f.append("name",c),f.append("description",i),g&&f.append("logo",g);try{await xt(t.id,f),x({title:"Club updated",description:"The club has been successfully updated.",status:"success",duration:5e3,isClosable:!0}),s(),n()}catch(S){x({title:"Update failed",description:S.message||"Could not update the club.",status:"error",duration:5e3,isClosable:!0})}finally{j(!1)}};return e.jsxs(K,{isOpen:a,onClose:n,size:"lg",isCentered:!0,children:[e.jsx(_,{}),e.jsxs(Z,{as:"form",onSubmit:C,children:[e.jsx(W,{children:"Edit Club"}),e.jsx(ee,{}),e.jsx(B,{children:e.jsxs(T,{spacing:4,align:"stretch",children:[e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Club Name"}),e.jsx(R,{value:c,onChange:u=>p(u.target.value)})]}),e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Description"}),e.jsx(Se,{value:i,onChange:u=>m(u.target.value)})]}),e.jsxs(M,{children:[e.jsx(F,{children:"Club Logo (optional)"}),e.jsx(R,{type:"file",onChange:D,accept:"image/*"})]})]})}),e.jsxs(U,{children:[e.jsx(v,{variant:"ghost",mr:3,onClick:n,isDisabled:d,children:"Cancel"}),e.jsx(v,{colorScheme:"blue",type:"submit",isLoading:d,children:"Save Changes"})]})]})]})},ft=({isOpen:a,onClose:n,clubId:t,onMemberAdded:s})=>{const[c,p]=r.useState(""),[i,m]=r.useState(null),[g,y]=r.useState(null),[d,j]=r.useState(!1),x=H(),D=z("gray.200","gray.600"),C=S=>{const h=S.target.files[0];if(h){m(h);const l=new FileReader;l.onloadend=()=>{y(l.result)},l.readAsDataURL(h)}},u=async S=>{if(S.preventDefault(),!c.trim()){x({title:"Error",description:"Please enter member name",status:"error",duration:3e3,isClosable:!0});return}if(!i){x({title:"Error",description:"Please select a member picture",status:"error",duration:3e3,isClosable:!0});return}j(!0);try{const h=new FormData;h.append("name",c),h.append("picture",i),await dt(t,h),x({title:"Success",description:"Member added successfully",status:"success",duration:3e3,isClosable:!0}),p(""),m(null),y(null),s(),n()}catch(h){x({title:"Error",description:h.message||"Failed to add member",status:"error",duration:5e3,isClosable:!0})}finally{j(!1)}},f=()=>{p(""),m(null),y(null),n()};return e.jsxs(K,{isOpen:a,onClose:f,size:"md",children:[e.jsx(_,{backdropFilter:"blur(4px)"}),e.jsxs(Z,{children:[e.jsx(W,{children:"Add New Member"}),e.jsx(ee,{}),e.jsxs("form",{onSubmit:u,children:[e.jsx(B,{children:e.jsxs(T,{spacing:4,children:[e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Member Name"}),e.jsx(R,{value:c,onChange:S=>p(S.target.value),placeholder:"Enter member name"})]}),e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Member Picture"}),e.jsx(A,{borderWidth:"2px",borderStyle:"dashed",borderColor:D,borderRadius:"lg",p:4,textAlign:"center",cursor:"pointer",_hover:{borderColor:"blue.500"},onClick:()=>document.getElementById("member-picture-input").click(),children:g?e.jsx(ce,{src:g,alt:"Preview",maxH:"200px",mx:"auto",borderRadius:"md"}):e.jsxs(T,{spacing:2,children:[e.jsx(ze,{size:40}),e.jsx(w,{fontSize:"sm",children:"Click to upload member picture"})]})}),e.jsx(R,{id:"member-picture-input",type:"file",accept:"image/*",onChange:C,display:"none"})]})]})}),e.jsxs(U,{children:[e.jsx(v,{variant:"ghost",mr:3,onClick:f,children:"Cancel"}),e.jsx(v,{colorScheme:"blue",type:"submit",isLoading:d,loadingText:"Adding...",children:"Add Member"})]})]})]})]})},St=({isOpen:a,onClose:n,clubId:t,member:s,onMemberUpdated:c})=>{const[p,i]=r.useState(""),[m,g]=r.useState(null),[y,d]=r.useState(null),[j,x]=r.useState(!1),D=H(),C=z("gray.200","gray.600");r.useEffect(()=>{s&&(i(s.name||""),d(`https://mu-connect.me/api/storage/${s.picture}`))},[s]);const u=h=>{const l=h.target.files[0];if(l){g(l);const E=new FileReader;E.onloadend=()=>{d(E.result)},E.readAsDataURL(l)}},f=async h=>{if(h.preventDefault(),!p.trim()){D({title:"Error",description:"Please enter member name",status:"error",duration:3e3,isClosable:!0});return}x(!0);try{const l=new FormData;l.append("name",p),m&&l.append("picture",m),await ut(t,s.id,l),D({title:"Success",description:"Member updated successfully",status:"success",duration:3e3,isClosable:!0}),c(),n()}catch(l){D({title:"Error",description:l.message||"Failed to update member",status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}},S=()=>{i(""),g(null),d(null),n()};return e.jsxs(K,{isOpen:a,onClose:S,size:"md",children:[e.jsx(_,{backdropFilter:"blur(4px)"}),e.jsxs(Z,{children:[e.jsx(W,{children:"Edit Member"}),e.jsx(ee,{}),e.jsxs("form",{onSubmit:f,children:[e.jsx(B,{children:e.jsxs(T,{spacing:4,children:[e.jsxs(M,{isRequired:!0,children:[e.jsx(F,{children:"Member Name"}),e.jsx(R,{value:p,onChange:h=>i(h.target.value),placeholder:"Enter member name"})]}),e.jsxs(M,{children:[e.jsx(F,{children:"Member Picture"}),e.jsx(A,{borderWidth:"2px",borderStyle:"dashed",borderColor:C,borderRadius:"lg",p:4,textAlign:"center",cursor:"pointer",_hover:{borderColor:"blue.500"},onClick:()=>document.getElementById("edit-member-picture-input").click(),children:y?e.jsx(ce,{src:y,alt:"Preview",maxH:"200px",mx:"auto",borderRadius:"md"}):e.jsxs(T,{spacing:2,children:[e.jsx(ze,{size:40}),e.jsx(w,{fontSize:"sm",children:"Click to upload member picture"})]})}),e.jsx(R,{id:"edit-member-picture-input",type:"file",accept:"image/*",onChange:u,display:"none"}),e.jsx(w,{fontSize:"xs",color:"gray.500",mt:2,children:"Leave empty to keep current picture"})]})]})}),e.jsxs(U,{children:[e.jsx(v,{variant:"ghost",mr:3,onClick:S,children:"Cancel"}),e.jsx(v,{colorScheme:"blue",type:"submit",isLoading:j,loadingText:"Updating...",children:"Update Member"})]})]})]})]})},yt=({members:a,textColor:n,mutedText:t,accentColor:s,borderColor:c,formatDate:p})=>{const[i,m]=r.useState(0),[g,y]=r.useState(0),[d,j]=r.useState(0),x=z("gray.50","gray.800"),D=()=>{m(l=>l===0?a.length-1:l-1)},C=()=>{m(l=>l===a.length-1?0:l+1)},u=l=>{y(l.targetTouches[0].clientX)},f=l=>{j(l.targetTouches[0].clientX)},S=()=>{if(!g||!d)return;const l=g-d,E=l>50,b=l<-50;E&&C(),b&&D(),y(0),j(0)},h=a[i];return e.jsxs(A,{position:"relative",py:4,children:[e.jsx(A,{onTouchStart:u,onTouchMove:f,onTouchEnd:S,cursor:"pointer",children:e.jsx(ae,{bg:x,borderWidth:"2px",borderColor:s,borderRadius:"2xl",overflow:"hidden",boxShadow:"xl",maxW:"400px",mx:"auto",children:e.jsx(oe,{p:8,children:e.jsxs(T,{spacing:6,children:[e.jsxs(A,{position:"relative",children:[e.jsx(He,{size:"2xl",src:`https://mu-connect.me/api/storage/${h.picture}`,name:h.name,borderWidth:"4px",borderColor:s,boxShadow:"lg"}),e.jsxs(je,{position:"absolute",bottom:"-2",right:"-2",colorScheme:"blue",fontSize:"xs",px:2,py:1,borderRadius:"full",children:[i+1," / ",a.length]})]}),e.jsxs(T,{spacing:2,w:"full",children:[e.jsx(w,{fontWeight:"bold",fontSize:"2xl",color:n,textAlign:"center",children:h.name}),(localStorage.getItem("role")==="admin"||localStorage.getItem("role")==="moderator")&&e.jsxs(P,{spacing:2,mt:2,children:[e.jsx(Y,{icon:e.jsx(ke,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>window.handleEditMember(h),"aria-label":"Edit member"}),e.jsx(Y,{icon:e.jsx(Oe,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>window.handleDeleteMember(h),"aria-label":"Delete member"})]})]})]})})})}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{icon:e.jsx(nt,{}),position:"absolute",left:{base:0,md:-4},top:"50%",transform:"translateY(-50%)",onClick:D,colorScheme:"blue",variant:"solid",borderRadius:"full",size:"lg",boxShadow:"lg","aria-label":"Previous member",zIndex:2}),e.jsx(Y,{icon:e.jsx(at,{}),position:"absolute",right:{base:0,md:-4},top:"50%",transform:"translateY(-50%)",onClick:C,colorScheme:"blue",variant:"solid",borderRadius:"full",size:"lg",boxShadow:"lg","aria-label":"Next member",zIndex:2})]}),a.length>1&&e.jsx(P,{justify:"center",spacing:2,mt:6,children:a.map((l,E)=>e.jsx(A,{w:i===E?"24px":"8px",h:"8px",borderRadius:"full",bg:i===E?s:c,transition:"all 0.3s",cursor:"pointer",onClick:()=>m(E)},E))}),a.length>1&&e.jsx(w,{textAlign:"center",fontSize:"xs",color:t,mt:4,fontStyle:"italic",children:"Swipe or use arrows to navigate"})]})},vt=({isOpen:a,onClose:n,clubId:t})=>{const[s,c]=r.useState(null),[p,i]=r.useState(!1),[m,g]=r.useState(null),[y,d]=r.useState(null),[j,x]=r.useState(null),{isOpen:D,onOpen:C,onClose:u}=$(),{isOpen:f,onOpen:S,onClose:h}=$(),{isOpen:l,onOpen:E,onClose:b}=$(),O=st.useRef(),V=H(),le=localStorage.getItem("role"),de=le==="admin"||le==="moderator",te=z("white","gray.700"),q=z("gray.800","white"),G=z("gray.600","gray.400"),se=z("gray.200","gray.600"),re=z("blue.500","blue.300"),ue=z("linear(to-br, blue.50, purple.50)","linear(to-br, gray.800, gray.900)");r.useEffect(()=>{a&&t&&Q()},[a,t]);const Q=async()=>{i(!0),g(null);try{const k=await ct(t);c(k)}catch(k){g(k.message||"Failed to fetch club details")}finally{i(!1)}},he=k=>new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),me=k=>{d(k),S()},pe=k=>{x(k),E()},xe=async()=>{if(j)try{await ht(t,j.id),V({title:"Success",description:"Member removed successfully",status:"success",duration:3e3,isClosable:!0}),b(),x(null),Q()}catch(k){V({title:"Error",description:k.message||"Failed to remove member",status:"error",duration:5e3,isClosable:!0})}};return r.useEffect(()=>(window.handleEditMember=me,window.handleDeleteMember=pe,()=>{delete window.handleEditMember,delete window.handleDeleteMember}),[t]),e.jsxs(K,{isOpen:a,onClose:n,size:"4xl",scrollBehavior:"inside",children:[e.jsx(_,{backdropFilter:"blur(4px)"}),e.jsxs(Z,{maxH:"90vh",children:[e.jsx(W,{bgGradient:ue,borderTopRadius:"md",pb:4,children:e.jsx(w,{fontSize:"2xl",fontWeight:"bold",color:q,children:"Club Details"})}),e.jsx(ee,{top:4}),e.jsx(B,{p:6,children:p?e.jsx(L,{justify:"center",align:"center",minH:"300px",children:e.jsx(Ee,{size:"xl",color:re,thickness:"4px"})}):m?e.jsx(A,{textAlign:"center",py:10,children:e.jsx(w,{color:"red.500",fontSize:"lg",children:m})}):s?e.jsxs(T,{spacing:6,align:"stretch",children:[e.jsx(ae,{bg:te,boxShadow:"md",borderRadius:"xl",overflow:"hidden",children:e.jsx(oe,{p:0,children:e.jsxs(L,{direction:{base:"column",md:"row"},align:"center",gap:6,p:6,children:[e.jsx(ce,{src:`https://mu-connect.me/api/storage/${s.logo}`,alt:s.name,boxSize:{base:"120px",md:"150px"},objectFit:"cover",borderRadius:"xl",boxShadow:"lg"}),e.jsxs(T,{align:{base:"center",md:"flex-start"},flex:1,spacing:3,children:[e.jsx(J,{size:"lg",color:q,textAlign:{base:"center",md:"left"},children:s.name}),e.jsx(w,{color:G,fontSize:"md",textAlign:{base:"center",md:"left"},children:s.description}),e.jsxs(P,{spacing:4,flexWrap:"wrap",justify:{base:"center",md:"flex-start"},children:[e.jsx(je,{colorScheme:"blue",px:3,py:1,borderRadius:"full",fontSize:"sm",children:e.jsxs(P,{spacing:1,children:[e.jsx(Ce,{}),e.jsxs(w,{children:[s.members," members"]})]})}),s.upcoming_event&&e.jsx(je,{colorScheme:"purple",px:3,py:1,borderRadius:"full",fontSize:"sm",children:e.jsxs(P,{spacing:1,children:[e.jsx(Re,{}),e.jsx(w,{children:"Upcoming Event"})]})})]})]})]})})}),s.upcoming_event&&e.jsx(ae,{bg:te,boxShadow:"md",borderRadius:"xl",children:e.jsxs(oe,{children:[e.jsx(J,{size:"md",mb:4,color:q,children:"Upcoming Event"}),e.jsxs(T,{align:"stretch",spacing:2,children:[e.jsx(w,{fontSize:"lg",fontWeight:"semibold",color:re,children:s.upcoming_event.title}),e.jsx(w,{color:G,children:s.upcoming_event.description||"No description available"})]})]})}),e.jsx(ae,{bg:te,boxShadow:"md",borderRadius:"xl",children:e.jsxs(oe,{children:[e.jsxs(L,{justify:"space-between",align:"center",mb:4,children:[e.jsx(J,{size:"md",color:q,children:"Meet the Members"}),de&&e.jsx(v,{leftIcon:e.jsx(fe,{}),colorScheme:"blue",size:"sm",onClick:C,children:"Add Member"})]}),e.jsx(qe,{mb:4,borderColor:se}),s.club_members&&s.club_members.length>0?e.jsx(yt,{members:s.club_members,textColor:q,mutedText:G,accentColor:re,borderColor:se,formatDate:he}):e.jsxs(A,{textAlign:"center",py:8,children:[e.jsx(Ce,{size:50,style:{margin:"0 auto 16px",opacity:.3}}),e.jsx(w,{color:G,fontSize:"lg",children:"No members found"})]})]})})]}):null}),e.jsx(U,{borderTop:"1px solid",borderColor:se,children:e.jsx(v,{colorScheme:"blue",onClick:n,children:"Close"})})]}),e.jsx(ft,{isOpen:D,onClose:u,clubId:t,onMemberAdded:Q}),e.jsx(St,{isOpen:f,onClose:h,clubId:t,member:y,onMemberUpdated:Q}),e.jsx(Me,{isOpen:l,leastDestructiveRef:O,onClose:b,children:e.jsx(_,{children:e.jsxs(Fe,{children:[e.jsx(W,{fontSize:"lg",fontWeight:"bold",children:"Remove Member"}),e.jsxs(B,{children:["Are you sure you want to remove ",e.jsx("strong",{children:j==null?void 0:j.name})," from the club? This action cannot be undone."]}),e.jsxs(U,{children:[e.jsx(v,{ref:O,onClick:b,children:"Cancel"}),e.jsx(v,{colorScheme:"red",onClick:xe,ml:3,children:"Remove"})]})]})})})]})},wt=Ye(ae),Ft=()=>{const[a,n]=r.useState([]),[t,s]=r.useState(!0),[c,p]=r.useState(null),[i,m]=r.useState(1),[g,y]=r.useState(1),[d,j]=r.useState(""),x=localStorage.getItem("role"),D=x==="admin"||x==="moderator",C=z("white","gray.700"),u=z("gray.800","white"),f=z("gray.500","gray.400"),S=z("blue.500","blue.200"),h=z("gray.200","gray.700"),l=rt(),E=Ve({base:!0,md:!1}),b=H(),{isOpen:O,onOpen:V,onClose:le}=$(),{isOpen:de,onOpen:te,onClose:q}=$(),[G,se]=r.useState(null),{isOpen:re,onOpen:ue,onClose:Q}=$(),[he,me]=r.useState(null),{isOpen:pe,onOpen:xe,onClose:k}=$(),[ie,Te]=r.useState(null),{isOpen:Ae,onOpen:Le,onClose:be}=$(),[ne,ye]=r.useState(null),ve=r.useRef(),X=r.useCallback(async(o,Ue)=>{s(!0),p(null);try{const I=await De(o,Ue);if(!I||!I.data){n([]);return}n(I.data),y(I.last_page||1),m(I.current_page||1)}catch(I){p(I.message||"Failed to fetch clubs."),b({title:"Error",description:I.message,status:"error",duration:5e3,isClosable:!0})}finally{s(!1)}},[b,De]);r.useEffect(()=>{const o=setTimeout(()=>{X(i,d)},300);return()=>clearTimeout(o)},[i,d,X]);const Pe=o=>{se(o),te()},Ne=o=>{me(o),ue()},Ie=o=>{Te(o),xe()},$e=o=>{ye(o),Le()},_e=async()=>{if(ne)try{await bt(ne.id),b({title:"Club deleted",status:"success",duration:3e3,isClosable:!0}),be(),ye(null),X(i,d)}catch(o){b({title:"Error",description:o.message,status:"error",duration:5e3,isClosable:!0})}},We=o=>e.jsxs(wt,{bg:C,boxShadow:"md",borderRadius:"lg",overflow:"hidden",whileHover:{y:-5},transition:{duration:.2},children:[e.jsx(A,{position:"relative",children:e.jsx(ce,{src:`https://mu-connect.me/api/storage/${o.logo}`,alt:`${o.name} logo`,height:"130px",width:"100%",objectFit:"cover"})}),e.jsxs(oe,{pt:3,children:[e.jsx(J,{size:"md",mb:2,color:u,children:o.name}),e.jsx(w,{fontSize:"sm",color:f,noOfLines:2,mb:3,children:o.description}),e.jsxs(Je,{spacing:2,mb:4,children:[e.jsxs(P,{children:[e.jsx(Ce,{size:14,color:S}),e.jsxs(w,{fontSize:"sm",color:u,children:[o.members," members"]})]}),o.upcoming_event&&e.jsxs(P,{children:[e.jsx(Re,{size:14,color:S}),e.jsxs(w,{fontSize:"sm",color:u,children:["Upcoming: ",o.upcoming_event.title]})]})]})]}),e.jsx(Ke,{pt:0,borderTop:"1px solid",borderColor:h,children:e.jsxs(L,{justify:"space-between",align:"center",w:"full",children:[e.jsx(v,{leftIcon:e.jsx(lt,{}),variant:"ghost",colorScheme:"blue",size:"sm",onClick:()=>Ie(o),children:"View Members"}),(x==="admin"||x==="moderator")&&e.jsxs(Ze,{children:[e.jsx(et,{as:Y,icon:e.jsx(it,{}),size:"sm",variant:"ghost"}),e.jsxs(tt,{children:[e.jsx(ge,{icon:e.jsx(fe,{}),onClick:()=>Pe(o),children:"Create Event"}),e.jsx(ge,{icon:e.jsx(ke,{}),onClick:()=>Ne(o),children:"Edit Club"}),e.jsx(ge,{icon:e.jsx(Oe,{}),onClick:()=>$e(o),color:"red.500",children:"Delete Club"})]})]})]})})]},o.id),Be=o=>{m(1),j(o.target.value)};return e.jsx(L,{minH:"100vh",p:{base:4,md:8},bg:z("gray.50","gray.800"),children:e.jsxs(A,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsxs(L,{justify:"space-between",align:"center",mb:6,direction:E?"column":"row",gap:4,children:[e.jsxs(P,{spacing:4,children:[e.jsx(Y,{icon:e.jsx(ot,{}),"aria-label":"Go back",onClick:()=>l("/dashboard"),variant:"ghost",borderRadius:"full"}),e.jsx(J,{size:"xl",color:u,fontWeight:"800",letterSpacing:"tight",children:"Students Clubs"})]}),D&&e.jsx(v,{leftIcon:e.jsx(fe,{}),colorScheme:"blue",onClick:V,size:"sm",children:"Create Club"})]}),e.jsx(L,{justify:"space-between",align:E?"flex-start":"center",direction:E?"column":"row",gap:4,mb:6,children:e.jsxs(Ge,{maxW:"250px",children:[e.jsx(Qe,{pointerEvents:"none",children:e.jsx(we,{color:f})}),e.jsx(R,{placeholder:"Search clubs...",size:"sm",borderRadius:"full",value:d,onChange:Be,_focus:{boxShadow:`0 0 0 2px ${S}`}})]})}),t?e.jsx(L,{justify:"center",py:10,children:e.jsx(Ee,{size:"xl"})}):c?e.jsx(w,{color:"red.500",children:c}):a.length>0?e.jsx(Xe,{columns:{base:1,md:2,lg:3},spacing:6,children:a.map(o=>We(o))}):e.jsx(L,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(A,{textAlign:"center",maxW:"400px",children:[e.jsx(we,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),e.jsx(J,{size:"md",mb:2,color:u,children:"No clubs found"}),e.jsx(w,{color:f,children:d?`No clubs match your search "${d}". Try a different search term.`:"No clubs are available at the moment."})]})}),a.length>0&&e.jsx(L,{justify:"center",mt:8,children:e.jsxs(P,{children:[e.jsx(v,{onClick:()=>m(o=>Math.max(1,o-1)),isDisabled:i<=1,children:"Previous"}),e.jsxs(w,{children:["Page ",i," of ",g]}),e.jsx(v,{onClick:()=>m(o=>Math.min(g,o+1)),isDisabled:i>=g,children:"Next"})]})}),e.jsx(gt,{isOpen:O,onClose:le,onClubCreated:()=>X(1,"")}),e.jsx(jt,{isOpen:de,onClose:q,club:G,onEventCreated:()=>X(i,d)}),e.jsx(Ct,{isOpen:re,onClose:Q,club:he,onClubUpdated:()=>X(i,d)}),e.jsx(vt,{isOpen:pe,onClose:k,clubId:ie==null?void 0:ie.id}),e.jsx(Me,{isOpen:Ae,leastDestructiveRef:ve,onClose:be,children:e.jsx(_,{children:e.jsxs(Fe,{children:[e.jsx(W,{fontSize:"lg",fontWeight:"bold",children:"Delete Club"}),e.jsxs(B,{children:["Are you sure you want to delete ",e.jsx("strong",{children:ne==null?void 0:ne.name}),"? This action cannot be undone."]}),e.jsxs(U,{children:[e.jsx(v,{ref:ve,onClick:be,children:"Cancel"}),e.jsx(v,{colorScheme:"red",onClick:_e,ml:3,children:"Delete"})]})]})})})]})})};export{Ft as default};
