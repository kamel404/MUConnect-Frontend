const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dge-MEAl.js","assets/chakra-BFMGxYLr.js","assets/react-6s1XWRBU.js"])))=>i.map(i=>d[i]);
import{_ as ie,u as we,l as ae,j as B,k as N,n as ze,m as ne,d as ve,o as Ce,p as Fe,q as le,r as Ie}from"./index-Dge-MEAl.js";import{U as ke,j as e,C as Ee,S as We,F as C,B as y,_ as Le,V as n,O as ce,K as d,d as i,$ as de,L as Pe,a0 as x,c as F,N as Y,W as f,X as g,Q as j,Y as p,I as m,R as w,a1 as ue,a2 as Ae,b as De,D as me,Z as qe}from"./chakra-BFMGxYLr.js";import{a as l,u as Me,N as Re,L as Ge}from"./react-6s1XWRBU.js";const Te=()=>{var oe,te;const[t,I]=l.useState(0),[r,k]=l.useState({first_name:"",last_name:"",username:"",email:"",password:"",password_confirmation:"",faculty_id:"",major_id:""}),[T,U]=l.useState([]),[K,E]=l.useState([]),[O,L]=l.useState(!0),[H,P]=l.useState(!1),[V,$]=l.useState(""),[J,Q]=l.useState(""),[c,A]=l.useState({}),[D,X]=l.useState(!1),[W,q]=l.useState(0),h=ke(),he=Me(),Z="linear(to-br, blue.50 0%, white 50%, blue.50 100%)",xe="white",b="linear(to-r, blue.500, teal.400)",M="linear(to-r, blue.600, teal.500)",u="gray.700",fe="gray.200",z=[{id:"welcome",title:"Welcome"},{id:"name",title:"Your Name"},{id:"username",title:"Create Username"},{id:"email",title:"Your Email"},{id:"password",title:"Set Password"},{id:"faculty",title:"Your Faculty"},{id:"major",title:"Your Major"},{id:"complete",title:"Complete"}],_=o=>{const{name:s,value:a}=o.target;k(v=>({...v,[s]:a})),s==="username"&&c.username&&A(v=>({...v,username:void 0}))},ge=o=>{const s=o.target.value;k(a=>({...a,faculty_id:s,major_id:""}))},je=o=>{const s=o.target.value;k(a=>({...a,major_id:s}))},ee=(o=t)=>{const s={};switch(o){case 1:r.first_name.trim()||(s.first_name="First name is required."),r.last_name.trim()||(s.last_name="Last name is required.");break;case 2:r.username.trim()||(s.username="Username is required.");break;case 3:r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)?r.email.endsWith("@mu.edu.lb")||(s.email="Email must be a university email (@mu.edu.lb)."):s.email="Invalid email address format.":s.email="Email is required.";break;case 4:r.password?r.password.length<6&&(s.password="Password must be at least 6 characters."):s.password="Password is required.",r.password_confirmation?r.password!==r.password_confirmation&&(s.password_confirmation="Passwords do not match."):s.password_confirmation="Please confirm your password.";break;case 5:r.faculty_id||(s.faculty_id="Faculty is required.");break;case 6:r.major_id||(s.major_id="Major is required.");break}return A(s),Object.keys(s).length===0},re=()=>ee(t),R=()=>{if(t===2&&c.username){h({title:c.username,status:"error",duration:3e3});return}re()?t<z.length-1&&I(t+1):h({title:"Please correct the errors",status:"error",duration:2500})},S=o=>{o.key==="Enter"&&re()&&t<7&&(o.preventDefault(),R())},se=()=>{t>0&&I(t-1)},pe=async o=>{o&&o.preventDefault();for(let a=1;a<=6;a++)if(!ee(a)){h({title:"Incomplete Information",description:"Please fill out all required fields correctly.",status:"error",duration:3e3}),I(a);return}X(!0),q(0);const s=setInterval(()=>{q(a=>Math.min(a+Math.random()*15,90))},400);try{const a={first_name:r.first_name,last_name:r.last_name,username:r.username,email:r.email,password:r.password,password_confirmation:r.password_confirmation,faculty_id:r.faculty_id,major_id:r.major_id};await Ie(a),clearInterval(s),q(100),h({title:"Registration successful!",description:"Welcome to Maaref. We're glad to have you.",status:"success",duration:3e3,isClosable:!0}),setTimeout(()=>{he("/dashboard")},500)}catch(a){if(clearInterval(s),X(!1),a&&typeof a=="object"&&a.errors){A(G=>({...G,...a.errors}));const v={first_name:1,last_name:1,username:2,email:3,password:4,password_confirmation:4,faculty_id:5,major_id:6},_e=Object.keys(a.errors).reduce((G,Se)=>Math.min(G,v[Se]||8),8);I(_e),h({title:"Please correct the highlighted error(s).",status:"error",duration:3e3})}else h({title:a.message||"An unexpected error occurred.",description:"Please try again later.",status:"error",duration:4e3})}};l.useEffect(()=>{L(!0),ie(async()=>{const{getFaculties:o}=await import("./index-Dge-MEAl.js").then(s=>s.ap);return{getFaculties:o}},__vite__mapDeps([0,1,2])).then(({getFaculties:o})=>{o().then(s=>{U(s),L(!1),$("")}).catch(s=>{U([]),L(!1),$("Failed to load faculties. Please try again later."),h({title:"Failed to load faculties",description:(s==null?void 0:s.message)||"Please check your connection and try again.",status:"error",duration:5e3})})})},[]),l.useEffect(()=>{r.faculty_id?(P(!0),E([]),ie(async()=>{const{getMajors:o}=await import("./index-Dge-MEAl.js").then(s=>s.ap);return{getMajors:o}},__vite__mapDeps([0,1,2])).then(({getMajors:o})=>{o(r.faculty_id).then(s=>{E(s),P(!1),Q("")}).catch(s=>{E([]),P(!1),Q("Failed to load majors. Please try again later."),h({title:"Failed to load majors",description:(s==null?void 0:s.message)||"Please check your connection and try again.",status:"error",duration:5e3})})})):E([]),k(o=>({...o,major_id:""}))},[r.faculty_id]);const{user:ye,loading:be}=we();return be?e.jsx(Ee,{minH:"100vh",children:e.jsx(We,{size:"xl",color:"blue.500"})}):ye?e.jsx(Re,{to:"/dashboard",replace:!0}):e.jsx(C,{minH:"100vh",bgGradient:Z,align:"center",justify:"center",children:D?e.jsx(y,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1000",bg:Z,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:e.jsx(Le,{initialScale:.9,in:D,children:e.jsxs(n,{spacing:8,maxW:"500px",textAlign:"center",p:4,children:[e.jsx(ce,{src:ae,boxSize:"80px",alt:"Maaref Logo"}),e.jsx(d,{fontSize:"3xl",bgGradient:"linear(to-r, blue.500, teal.400)",bgClip:"text",letterSpacing:"tight",children:"Setting up your personalized experience"}),e.jsxs(y,{w:"full",children:[e.jsx(i,{mb:2,fontWeight:"medium",color:u,children:W<30?"Analyzing your academic profile...":W<60?"Finding relevant resources...":W<90?"Preparing your personalized feed...":"Almost done!"}),e.jsx(de,{value:W,colorScheme:"blue",h:"10px",rounded:"full",mb:3,hasStripe:!0,isAnimated:!0})]}),e.jsxs(i,{color:"gray.500",fontSize:"md",children:["Customizing your campus experience based on your major.",e.jsx("br",{}),"This will only take a moment..."]})]})})}):e.jsx(Pe,{maxW:"container.md",py:8,children:e.jsxs(y,{bg:xe,p:[6,8],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:b,borderRadius:"2xl",zIndex:-1},children:[e.jsxs(C,{align:"center",mb:6,gap:3,justify:"center",children:[e.jsx(ce,{src:ae,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(d,{size:"xl",bgGradient:b,bgClip:"text",children:"MU Connect"})]}),t>0&&t<z.length-1&&e.jsxs(y,{mb:6,children:[e.jsx(de,{value:t/(z.length-2)*100,size:"sm",colorScheme:"blue",borderRadius:"full"}),e.jsxs(C,{justify:"space-between",mt:2,children:[e.jsxs(i,{fontSize:"sm",color:"gray.500",children:["Step ",t," of ",z.length-2]}),e.jsx(i,{fontSize:"sm",color:"gray.500",children:z[t].title})]})]}),e.jsxs(y,{minH:"320px",display:"flex",flexDirection:"column",justifyContent:"center",children:[t===0&&e.jsx(x,{in:t===0,offsetY:"20px",children:e.jsxs(n,{spacing:6,textAlign:"center",py:4,children:[e.jsx(d,{bgGradient:b,bgClip:"text",size:"xl",children:"Welcome to MU Connect"}),e.jsx(i,{fontSize:"lg",color:u,children:"Let's set up your personalized academic experience."}),e.jsx(i,{color:"gray.500",children:"We'll ask you a few questions to customize your campus experience and show you resources relevant to your academic interests."}),e.jsx(F,{colorScheme:"blue",size:"lg",rightIcon:e.jsx(B,{}),onClick:R,bgGradient:b,_hover:{bgGradient:M},mt:4,children:"Get Started"})]})}),t===1&&e.jsx(x,{in:t===1,offsetY:"20px",children:e.jsxs(n,{spacing:8,py:4,children:[e.jsx(d,{fontSize:"2xl",color:u,textAlign:"center",children:"What's your name?"}),e.jsxs(Y,{templateColumns:["1fr","1fr 1fr"],gap:6,width:"100%",children:[e.jsxs(f,{isRequired:!0,children:[e.jsx(g,{color:"gray.600",children:"First Name"}),e.jsxs(j,{children:[e.jsx(p,{pointerEvents:"none",children:e.jsx(m,{as:N,color:"blue.500"})}),e.jsx(w,{name:"first_name",placeholder:"John",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:r.first_name,onChange:_,onKeyDown:S})]})]}),e.jsxs(f,{isRequired:!0,children:[e.jsx(g,{color:"gray.600",children:"Last Name"}),e.jsxs(j,{children:[e.jsx(p,{pointerEvents:"none",children:e.jsx(m,{as:N,color:"blue.500"})}),e.jsx(w,{name:"last_name",placeholder:"Doe",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:r.last_name,onChange:_,onKeyDown:S})]})]})]})]})}),t===2&&e.jsx(x,{in:t===2,offsetY:"20px",children:e.jsxs(n,{spacing:8,py:4,children:[e.jsx(d,{fontSize:"2xl",color:u,textAlign:"center",children:"Create a username"}),e.jsxs(f,{isRequired:!0,width:"100%",children:[e.jsx(g,{color:"gray.600",children:"Username"}),e.jsxs(j,{children:[e.jsx(p,{pointerEvents:"none",children:e.jsx(m,{as:N,color:"blue.500"})}),e.jsx(w,{name:"username",placeholder:"@johndoe",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:r.username,onChange:_,onKeyDown:S,_placeholder:{color:"gray.400"}})]}),e.jsx(i,{fontSize:"sm",color:"gray.500",mt:2,children:"This will be your unique identifier on MU Connect"})]})]})}),t===3&&e.jsx(x,{in:t===3,offsetY:"20px",children:e.jsxs(n,{spacing:8,py:4,children:[e.jsx(d,{fontSize:"2xl",color:u,textAlign:"center",children:"What's your email address?"}),e.jsxs(f,{isRequired:!0,width:"100%",isInvalid:!!c.email,children:[e.jsx(g,{color:"gray.600",children:"Email"}),e.jsxs(j,{children:[e.jsx(p,{pointerEvents:"none",children:e.jsx(m,{as:ze,color:"blue.500"})}),e.jsx(w,{type:"email",name:"email",placeholder:"id@mu.edu.lb",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:r.email,onChange:_,onKeyDown:S,_placeholder:{color:"gray.400"}})]}),c.email&&e.jsx(i,{color:"red.500",fontSize:"sm",mt:1,children:c.email}),e.jsx(i,{fontSize:"sm",color:"gray.500",mt:2,children:"We'll use this to verify your account"})]})]})}),t===4&&e.jsx(x,{in:t===4,offsetY:"20px",children:e.jsxs(n,{spacing:8,py:4,children:[e.jsx(d,{fontSize:"2xl",color:u,textAlign:"center",children:"Create a secure password"}),e.jsxs(Y,{templateColumns:["1fr","1fr 1fr"],gap:6,width:"100%",children:[e.jsxs(f,{isRequired:!0,children:[e.jsx(g,{color:"gray.600",children:"Password"}),e.jsxs(j,{children:[e.jsx(p,{pointerEvents:"none",children:e.jsx(m,{as:ne,color:"blue.500"})}),e.jsx(w,{type:"password",name:"password",placeholder:"••••••••",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:r.password,onChange:_,onKeyDown:S,_placeholder:{color:"gray.400"}})]})]}),e.jsxs(f,{isRequired:!0,children:[e.jsx(g,{color:"gray.600",children:"Confirm Password"}),e.jsxs(j,{children:[e.jsx(p,{pointerEvents:"none",children:e.jsx(m,{as:ne,color:"blue.500"})}),e.jsx(w,{type:"password",name:"password_confirmation",placeholder:"••••••••",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:r.password_confirmation,onChange:_,onKeyDown:S,_placeholder:{color:"gray.400"}})]})]})]})]})}),t===5&&e.jsx(x,{in:t===5,offsetY:"20px",children:e.jsxs(n,{spacing:8,py:4,children:[e.jsx(d,{fontSize:"2xl",color:u,textAlign:"center",children:"What faculty are you in?"}),e.jsxs(f,{isRequired:!0,width:"100%",isInvalid:!!c.faculty_id,children:[e.jsx(g,{color:"gray.600",children:"Select your faculty"}),e.jsxs(j,{children:[e.jsx(p,{pointerEvents:"none",children:e.jsx(m,{as:ve,color:"blue.500"})}),e.jsx(ue,{name:"faculty_id",placeholder:O?"Loading...":"Choose a faculty",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:r.faculty_id,onChange:ge,pl:10,isDisabled:O,_placeholder:{color:"gray.400"},children:T.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))})]}),V&&e.jsx(i,{color:"red.500",fontSize:"sm",mt:1,children:V}),c.faculty_id&&e.jsx(i,{color:"red.500",fontSize:"sm",mt:1,children:c.faculty_id}),e.jsx(i,{fontSize:"sm",color:"gray.500",mt:2,children:"This helps us show you relevant resources"})]})]})}),t===6&&e.jsx(x,{in:t===6,offsetY:"20px",children:e.jsxs(n,{spacing:8,py:4,children:[e.jsx(d,{fontSize:"2xl",color:u,textAlign:"center",children:"What's your major?"}),e.jsxs(f,{isRequired:!0,width:"100%",isInvalid:!!c.major_id,children:[e.jsx(g,{color:"gray.600",children:"Select your major"}),e.jsxs(j,{children:[e.jsx(p,{pointerEvents:"none",children:e.jsx(m,{as:Ce,color:"blue.500"})}),e.jsx(ue,{name:"major_id",placeholder:H?"Loading...":r.faculty_id?"Choose a major":"Choose a faculty first",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:r.major_id,onChange:je,pl:10,isDisabled:!r.faculty_id||H,_placeholder:{color:"gray.400"},children:K.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))})]}),J&&e.jsx(i,{color:"red.500",fontSize:"sm",mt:1,children:J}),c.major_id&&e.jsx(i,{color:"red.500",fontSize:"sm",mt:1,children:c.major_id}),e.jsx(i,{fontSize:"sm",color:"gray.500",mt:2,children:"We'll personalize your experience based on your major"})]})]})}),t===7&&e.jsx(x,{in:t===7,offsetY:"20px",children:e.jsxs(n,{spacing:8,py:6,textAlign:"center",children:[e.jsx(Ae,{size:"80px",bg:"green.100",color:"green.500",children:e.jsx(m,{as:Fe,boxSize:"40px"})}),e.jsx(d,{fontSize:"2xl",color:u,children:"Ready to create your account"}),e.jsx(y,{borderWidth:"1px",borderColor:fe,borderRadius:"lg",p:6,w:"full",bg:"white",boxShadow:"lg",children:e.jsxs(Y,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)"},gap:6,w:"100%",children:[e.jsxs(n,{spacing:1,align:"start",children:[e.jsx(i,{fontSize:"sm",color:"gray.500",children:"First Name"}),e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:r.first_name})]}),e.jsxs(n,{spacing:1,align:"start",children:[e.jsx(i,{fontSize:"sm",color:"gray.500",children:"Last Name"}),e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:r.last_name})]}),e.jsxs(n,{spacing:1,align:"start",children:[e.jsx(i,{fontSize:"sm",color:"gray.500",children:"Username"}),e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:r.username})]}),e.jsxs(n,{spacing:1,align:"start",children:[e.jsx(i,{fontSize:"sm",color:"gray.500",children:"Email"}),e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:r.email})]}),e.jsxs(n,{spacing:1,align:"start",children:[e.jsx(i,{fontSize:"sm",color:"gray.500",children:"Faculty"}),e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:((oe=T.find(o=>o.id===parseInt(r.faculty_id)))==null?void 0:oe.name)||"N/A"})]}),e.jsxs(n,{spacing:1,align:"start",children:[e.jsx(i,{fontSize:"sm",color:"gray.500",children:"Major"}),e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:((te=K.find(o=>o.id===parseInt(r.major_id)))==null?void 0:te.name)||"N/A"})]})]})}),e.jsxs(De,{spacing:4,children:[e.jsx(F,{w:"full",colorScheme:"blue",bgGradient:b,_hover:{bgGradient:M},rightIcon:e.jsx(B,{}),onClick:pe,isLoading:D,loadingText:"Personalizing your feed...",children:"Confirm & Create Account"}),e.jsx(F,{variant:"outline",colorScheme:"blue",size:"md",leftIcon:e.jsx(le,{}),onClick:se,children:"Go Back"})]})]})})]}),t>0&&t<7&&e.jsxs(C,{justify:"space-between",mt:6,children:[e.jsx(F,{leftIcon:e.jsx(le,{}),onClick:se,variant:"outline",colorScheme:"blue",color:"blue.600",children:"Back"}),e.jsx(F,{rightIcon:e.jsx(B,{}),onClick:R,colorScheme:"blue",bgGradient:b,_hover:{bgGradient:M},children:"Next"})]}),t!==7&&e.jsxs(y,{mt:8,textAlign:"center",children:[e.jsxs(C,{align:"center",gap:4,justify:"center",mb:2,children:[e.jsx(me,{flex:"1",maxW:"100px"}),e.jsx(i,{color:"gray.500",fontSize:"sm",fontWeight:"medium",children:"OR"}),e.jsx(me,{flex:"1",maxW:"100px"})]}),e.jsxs(i,{color:"gray.500",fontWeight:"medium",children:["Already part of MU Connect?"," ",e.jsx(qe,{as:Ge,to:"/login",color:"blue.500",fontWeight:"600",_hover:{textDecoration:"underline"},children:"Sign in here"})]})]})]})})})};export{Te as default};
