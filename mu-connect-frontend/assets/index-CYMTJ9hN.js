const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CXh8elN4.js","assets/react-DDk2FCmG.js","assets/chakra-BAryzRmN.js","assets/index-D4Tnlpqn.js"])))=>i.map(i=>d[i]);
import{j as e,V as et,H as ut,T as G,B as ce,C as Si,G as pr,F as Ce,I as Ar,a as ct,k as cp,S as yr,b as Te,A as zr,c as Tr,d as Rt,u as qr,e as vn,f as nn,g as ft,h as pt,i as $r,L as Sc,l as zm,P as io,m as Ps,n as Ti,o as Cc,D as sn,p as so,q as oo,r as Bn,s as oe,t as hr,v as Zt,w as at,x as di,y as wi,z as ca,E as Br,M as hn,J as Fr,K as fn,N as Wr,O as on,Q as Ir,R as ti,U as ec,W as Jr,X as Bt,Y as wn,Z as jn,_ as Sn,$ as er,a0 as da,a1 as ua,a2 as Kn,a3 as al,a4 as ui,a5 as kr,a6 as un,a7 as Pr,a8 as _c,a9 as Fm,aa as Im,ab as Th,ac as Bo,ad as Mm,ae as qo,af as Dm,ag as fo,ah as Xn,ai as Es,aj as ha,ak as ll,al as cl,am as Bm,an as tc,ao as rc,ap as qd,aq as qm,ar as Zo,as as zh,at as Yo,au as wu,av as Wm,aw as Um,ax as Hm,ay as $m,az as Gm,aA as kc,aB as nc,aC as Vm,aD as Ym,aE as Jm,aF as Xm,aG as Km,aH as Qm,aI as Zm,aJ as eg,aK as tg,aL as rg,aM as dp,aN as ng,aO as ig,aP as Wd,aQ as Ud,aR as Lr,aS as sg,aT as og,aU as ag,aV as lg,aW as cg}from"./chakra-BAryzRmN.js";import{e as dg,b as Vi,u as Xr,a as q,N as Ac,L as Ji,f as dl,h as Bc,c as ic,r as po,i as ug,g as hg,O as up,j as fg,k as Hr,B as pg}from"./react-DDk2FCmG.js";import{C as mg,a as gg,L as xg,B as bg,p as yg,b as vg,c as wg,A as jg,D as Sg,d as sc}from"./charts-BQajcoWg.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var oc={},Fh;function Cg(){if(Fh)return oc;Fh=1;var t=dg();return oc.createRoot=t.createRoot,oc.hydrateRoot=t.hydrateRoot,oc}var _g=Cg(),hp={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ih=Vi.createContext&&Vi.createContext(hp),kg=["attr","size","title"];function Ag(t,r){if(t==null)return{};var n=Lg(t,r),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)i=s[o],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Lg(t,r){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(r.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Lc(){return Lc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Lc.apply(this,arguments)}function Mh(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function Pc(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Mh(Object(n),!0).forEach(function(i){Pg(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mh(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Pg(t,r,n){return r=Ng(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Ng(t){var r=Og(t,"string");return typeof r=="symbol"?r:r+""}function Og(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function fp(t){return t&&t.map((r,n)=>Vi.createElement(r.tag,Pc({key:n},r.attr),fp(r.child)))}function St(t){return r=>Vi.createElement(Rg,Lc({attr:Pc({},t.attr)},r),fp(t.child))}function Rg(t){var r=n=>{var{attr:i,size:o,title:s}=t,a=Ag(t,kg),c=o||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Vi.createElement("svg",Lc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:u,style:Pc(Pc({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&Vi.createElement("title",null,s),t.children)};return Ih!==void 0?Vi.createElement(Ih.Consumer,null,n=>r(n)):r(hp)}function Eg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function Gu(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function Wn(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function ea(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function ta(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function ra(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function zs(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(t)}function qc(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(t)}function Xi(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Tg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(t)}function An(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function zi(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function ds(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function us(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function mo(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function zg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function hs(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function Fg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"7.5 4.21 12 6.81 16.5 4.21"},child:[]},{tag:"polyline",attr:{points:"7.5 19.79 7.5 14.6 3 12"},child:[]},{tag:"polyline",attr:{points:"21 12 16.5 14.6 16.5 19.79"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function Ei(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function Ig(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function Mg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function ao(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function Dg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(t)}function Bg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function qg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function Wg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"},child:[]}]})(t)}function qn(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function Ug(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"},child:[]},{tag:"polyline",attr:{points:"13 2 13 9 20 9"},child:[]}]})(t)}function Wc(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function ju(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"},child:[]},{tag:"line",attr:{x1:"4",y1:"22",x2:"4",y2:"15"},child:[]}]})(t)}function pp(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Hg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function $g(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function rl(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(t)}function Gg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 16 12 14 15 10 15 8 12 2 12"},child:[]},{tag:"path",attr:{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"},child:[]}]})(t)}function Vg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function Yg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"},child:[]},{tag:"path",attr:{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"},child:[]},{tag:"line",attr:{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"},child:[]}]})(t)}function mp(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function Su(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function Jg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function Vu(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function Ko(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function Xg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function Kg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(t)}function Cu(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Qg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(t)}function gp(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(t)}function Uc(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(t)}function Zg(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"},child:[]}]})(t)}function e1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(t)}function Qn(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function t1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 6 2 18 2 18 9"},child:[]},{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"},child:[]},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8"},child:[]}]})(t)}function r1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function lo(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function xp(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function n1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function fa(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"},child:[]}]})(t)}function i1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(t)}function Yu(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(t)}function s1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(t)}function _u(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},child:[]}]})(t)}function ul(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function hl(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]}]})(t)}function Nc(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function o1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"},child:[]}]})(t)}function Ju(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(t)}function a1(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(t)}function Dh(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function na(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function Un(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function Xu(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(t)}function co(t){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const Hd=({title:t,items:r})=>e.jsxs(et,{align:["center","start"],spacing:3,children:[e.jsx(ut,{size:"sm",mb:2,children:t}),r.map(n=>e.jsx(G,{fontSize:"sm",_hover:{color:"blue.300"},children:n},n))]}),ji="/assets/maaref-logo-CWYUoBqw.png",l1=()=>e.jsx(ce,{bg:"blue.900",color:"white",py:[8,12],children:e.jsxs(Si,{maxW:"container.lg",children:[e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(4, 1fr)"},gap:[8,8],pb:[4,8],textAlign:["center","left"],children:[e.jsxs(et,{align:["center","start"],spacing:4,children:[e.jsxs(Ce,{align:"center",gap:2,direction:["column","row"],children:[e.jsx(Ar,{src:ji,boxSize:"40px"}),e.jsx(ut,{size:"md",children:"MU Connect"})]}),e.jsx(G,{opacity:.9,fontSize:"sm",children:"Connecting every learner at Maaraf University"}),e.jsxs(Ce,{gap:4,mt:4,children:[e.jsx(ct,{as:o1,boxSize:5}),e.jsx(ct,{as:Wg,boxSize:5}),e.jsx(ct,{as:Yg,boxSize:5})]})]}),e.jsx(Hd,{title:"Product",items:["Overview","Features","Pricing","Roadmap"]}),e.jsx(Hd,{title:"Support",items:["Help Center","Contact Us","Status","Feedback"]}),e.jsx(Hd,{title:"Legal",items:["Terms","Privacy","Cookies","Accessibility"]})]}),e.jsx(G,{textAlign:"center",pt:[4,8],borderTop:"1px",borderColor:"blue.700",opacity:.8,fontSize:"sm",children:"© 2025 MU Connect"})]})});cp`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
  100% { transform: translateY(0px); }
`;const c1=()=>{const t=Xr();return e.jsx(Si,{maxW:"container.xl",centerContent:!0,py:[12,20],children:e.jsxs(yr,{direction:{base:"column",md:"row"},spacing:[8,10],align:"center",children:[e.jsxs(et,{align:["center","start"],spacing:6,maxW:"2xl",textAlign:["center","left"],children:[e.jsxs(ut,{color:"blue.900",size:["2xl","3xl"],lineHeight:"1.1",fontWeight:"extrabold",px:[2,0],children:["Empower Your Learning Journey with"," ",e.jsx(ce,{as:"span",bgGradient:"linear(to-r, blue.500, teal.500)",bgClip:"text",children:"MU Connect"})]}),e.jsx(G,{fontSize:["md","xl"],color:"gray.600",lineHeight:"1.7",children:"Centralize your courses, collaborate with peers, and stay on top of every deadline — all at Maaraf University."}),e.jsxs(Ce,{gap:4,align:"center",direction:["column","row"],w:"full",justify:["center","start"],children:[e.jsx(Te,{size:["md","lg"],colorScheme:"blue",px:[6,10],rightIcon:e.jsx(mo,{}),w:["full","auto"],onClick:()=>t("/register"),children:"Sign Up"}),e.jsx(Te,{size:["md","lg"],variant:"outline",colorScheme:"blue",px:[6,10],w:["full","auto"],onClick:()=>t("/login"),children:"Login"})]})]}),e.jsx(Ar,{src:ji,boxSize:{base:"250px",sm:"300px",md:"600px"},alt:"Collaboration illustration"})]})})};function d1(t){return St({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"},child:[]}]})(t)}const Wo=({icon:t,title:r,description:n,color:i="blue"})=>e.jsxs(et,{bg:"white",p:[4,8],borderRadius:"2xl",boxShadow:"xl",align:"start",spacing:4,transition:"all 0.3s",_hover:{transform:"translateY(-8px)"},position:"relative",overflow:"hidden",textAlign:["center","left"],children:[e.jsx(ce,{position:"absolute",top:"-20px",right:"-20px",w:"100px",h:"100px",bg:`${i}.100`,borderRadius:"full"}),e.jsx(ct,{as:t,boxSize:[6,8],color:`${i}.600`,mx:["auto","0"]}),e.jsx(ut,{size:["md","lg"],color:"blue.900",textAlign:["center","left"],children:r}),e.jsx(G,{color:"gray.600",lineHeight:"1.7",fontSize:["sm","md"],children:n})]}),u1=()=>e.jsx(ce,{py:[12,20],bg:"white",children:e.jsxs(Si,{maxW:"container.lg",children:[e.jsxs(et,{spacing:3,mb:[8,12],children:[e.jsx(G,{color:"blue.500",fontWeight:"bold",fontSize:["sm","md"],children:"CORE FEATURES"}),e.jsx(ut,{textAlign:"center",size:["xl","2xl"],color:"blue.900",maxW:"2xl",children:"Everything You Need for Academic Success"})]}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(3, 1fr)"},gap:[4,8],children:[e.jsx(Wo,{icon:Un,title:"Peer Collaboration",description:"Group discussions, file sharing, and real-time whiteboard sessions",color:"blue"}),e.jsx(Wo,{icon:zs,title:"Course Resources",description:"Organized lecture notes, past exams, and curated study guides",color:"teal"}),e.jsx(Wo,{icon:ra,title:"Section Requests",description:"Post your desired section swap and get matched with classmates instantly",color:"purple"}),e.jsx(Wo,{icon:d1,title:"Grade Calculator",description:"Estimate required scores and track your progress",color:"orange"}),e.jsx(Wo,{icon:An,title:"Events & Deadlines",description:"Stay updated with courses and campus activities",color:"green"}),e.jsx(Wo,{icon:e1,title:"Degree Planner",description:"Visualize requirements and plan your academic journey",color:"red"})]})]})}),Bh=({name:t,role:r,text:n,avatar:i,rating:o})=>e.jsxs(et,{bg:"white",p:[4,8],borderRadius:"2xl",align:"start",spacing:4,boxShadow:"xl",textAlign:["center","left"],children:[e.jsx(Ce,{gap:1,justify:["center","start"],children:[...Array(o)].map((s,a)=>e.jsx(ct,{as:Yu,color:"yellow.400",boxSize:5},a))}),e.jsxs(G,{color:"gray.600",fontSize:["md","lg"],lineHeight:"1.7",children:['"',n,'"']}),e.jsxs(Ce,{align:"center",gap:4,direction:["column","row"],w:"full",children:[e.jsx(zr,{src:i,size:["md","lg"]}),e.jsxs(ce,{textAlign:["center","left"],children:[e.jsx(G,{fontWeight:"bold",color:"blue.900",children:t}),e.jsx(G,{color:"gray.500",fontSize:"sm",children:r})]})]})]}),h1=()=>e.jsx(ce,{bg:"blue.50",py:[12,20],children:e.jsxs(Si,{maxW:"container.lg",children:[e.jsxs(et,{spacing:3,mb:[8,12],children:[e.jsx(G,{color:"blue.500",fontWeight:"bold",fontSize:["sm","md"],children:"SUCCESS STORIES"}),e.jsx(ut,{textAlign:"center",size:["xl","2xl"],color:"blue.900",children:"Stories from Our Community"})]}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)"},gap:[4,8],children:[e.jsx(Bh,{name:"Ali Ghoul",role:"Mechanical Engineer",text:"I once get the same questions from in my exam that I found on the platform and it helped me a lot.",avatar:ji,rating:5}),e.jsx(Bh,{name:"Mahdi Alayan",role:"Computer Science",text:"I submitted a section change request and multiple seniors shared curated resources within the hour.",avatar:ji,rating:5})]})]})}),f1=()=>e.jsx(ce,{py:[12,20],bg:"white",children:e.jsx(Si,{maxW:"container.md",textAlign:"center",children:e.jsxs(ce,{bg:"blue.50",borderRadius:["xl","3xl"],p:[6,12],boxShadow:"lg",children:[e.jsx(G,{color:"blue.500",fontWeight:"bold",mb:4,fontSize:["sm","md"],children:"START LEARNING TODAY"}),e.jsx(ut,{size:["xl","2xl"],color:"blue.900",mb:[4,6],children:"Join Our Academic Community"}),e.jsx(G,{fontSize:["md","xl"],color:"gray.600",mb:[4,8],children:"Sign in with your MU email and explore unlimited resources"}),e.jsx(Ce,{justify:"center",children:e.jsxs(Tr,{maxW:["100%","400px"],flexDirection:["column","row"],gap:4,children:[e.jsx(Rt,{placeholder:"you@stu.maaraf.edu",size:["md","lg"],borderRadius:"xl",mb:[2,0]}),e.jsx(Te,{colorScheme:"blue",size:["md","lg"],borderRadius:"xl",px:[6,8],w:["full","auto"],children:"Join Free"})]})})]})})});function bp(t,r){return function(){return t.apply(r,arguments)}}const{toString:p1}=Object.prototype,{getPrototypeOf:Ku}=Object,{iterator:Hc,toStringTag:yp}=Symbol,$c=(t=>r=>{const n=p1.call(r);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fi=t=>(t=t.toLowerCase(),r=>$c(r)===t),Gc=t=>r=>typeof r===t,{isArray:pa}=Array,nl=Gc("undefined");function m1(t){return t!==null&&!nl(t)&&t.constructor!==null&&!nl(t.constructor)&&Zn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vp=Fi("ArrayBuffer");function g1(t){let r;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&vp(t.buffer),r}const x1=Gc("string"),Zn=Gc("function"),wp=Gc("number"),Vc=t=>t!==null&&typeof t=="object",b1=t=>t===!0||t===!1,pc=t=>{if($c(t)!=="object")return!1;const r=Ku(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(yp in t)&&!(Hc in t)},y1=Fi("Date"),v1=Fi("File"),w1=Fi("Blob"),j1=Fi("FileList"),S1=t=>Vc(t)&&Zn(t.pipe),C1=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||Zn(t.append)&&((r=$c(t))==="formdata"||r==="object"&&Zn(t.toString)&&t.toString()==="[object FormData]"))},_1=Fi("URLSearchParams"),[k1,A1,L1,P1]=["ReadableStream","Request","Response","Headers"].map(Fi),N1=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fl(t,r,{allOwnKeys:n=!1}={}){if(t===null||typeof t=="undefined")return;let i,o;if(typeof t!="object"&&(t=[t]),pa(t))for(i=0,o=t.length;i<o;i++)r.call(null,t[i],i,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let c;for(i=0;i<a;i++)c=s[i],r.call(null,t[c],c,t)}}function jp(t,r){r=r.toLowerCase();const n=Object.keys(t);let i=n.length,o;for(;i-- >0;)if(o=n[i],r===o.toLowerCase())return o;return null}const to=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,Sp=t=>!nl(t)&&t!==to;function ku(){const{caseless:t}=Sp(this)&&this||{},r={},n=(i,o)=>{const s=t&&jp(r,o)||o;pc(r[s])&&pc(i)?r[s]=ku(r[s],i):pc(i)?r[s]=ku({},i):pa(i)?r[s]=i.slice():r[s]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&fl(arguments[i],n);return r}const O1=(t,r,n,{allOwnKeys:i}={})=>(fl(r,(o,s)=>{n&&Zn(o)?t[s]=bp(o,n):t[s]=o},{allOwnKeys:i}),t),R1=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),E1=(t,r,n,i)=>{t.prototype=Object.create(r.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),n&&Object.assign(t.prototype,n)},T1=(t,r,n,i)=>{let o,s,a;const c={};if(r=r||{},t==null)return r;do{for(o=Object.getOwnPropertyNames(t),s=o.length;s-- >0;)a=o[s],(!i||i(a,t,r))&&!c[a]&&(r[a]=t[a],c[a]=!0);t=n!==!1&&Ku(t)}while(t&&(!n||n(t,r))&&t!==Object.prototype);return r},z1=(t,r,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=r.length;const i=t.indexOf(r,n);return i!==-1&&i===n},F1=t=>{if(!t)return null;if(pa(t))return t;let r=t.length;if(!wp(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=t[r];return n},I1=(t=>r=>t&&r instanceof t)(typeof Uint8Array!="undefined"&&Ku(Uint8Array)),M1=(t,r)=>{const i=(t&&t[Hc]).call(t);let o;for(;(o=i.next())&&!o.done;){const s=o.value;r.call(t,s[0],s[1])}},D1=(t,r)=>{let n;const i=[];for(;(n=t.exec(r))!==null;)i.push(n);return i},B1=Fi("HTMLFormElement"),q1=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),qh=(({hasOwnProperty:t})=>(r,n)=>t.call(r,n))(Object.prototype),W1=Fi("RegExp"),Cp=(t,r)=>{const n=Object.getOwnPropertyDescriptors(t),i={};fl(n,(o,s)=>{let a;(a=r(o,s,t))!==!1&&(i[s]=a||o)}),Object.defineProperties(t,i)},U1=t=>{Cp(t,(r,n)=>{if(Zn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Zn(i)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},H1=(t,r)=>{const n={},i=o=>{o.forEach(s=>{n[s]=!0})};return pa(t)?i(t):i(String(t).split(r)),n},$1=()=>{},G1=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function V1(t){return!!(t&&Zn(t.append)&&t[yp]==="FormData"&&t[Hc])}const Y1=t=>{const r=new Array(10),n=(i,o)=>{if(Vc(i)){if(r.indexOf(i)>=0)return;if(!("toJSON"in i)){r[o]=i;const s=pa(i)?[]:{};return fl(i,(a,c)=>{const u=n(a,o+1);!nl(u)&&(s[c]=u)}),r[o]=void 0,s}}return i};return n(t,0)},J1=Fi("AsyncFunction"),X1=t=>t&&(Vc(t)||Zn(t))&&Zn(t.then)&&Zn(t.catch),_p=((t,r)=>t?setImmediate:r?((n,i)=>(to.addEventListener("message",({source:o,data:s})=>{o===to&&s===n&&i.length&&i.shift()()},!1),o=>{i.push(o),to.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Zn(to.postMessage)),K1=typeof queueMicrotask!="undefined"?queueMicrotask.bind(to):typeof process!="undefined"&&process.nextTick||_p,Q1=t=>t!=null&&Zn(t[Hc]),Be={isArray:pa,isArrayBuffer:vp,isBuffer:m1,isFormData:C1,isArrayBufferView:g1,isString:x1,isNumber:wp,isBoolean:b1,isObject:Vc,isPlainObject:pc,isReadableStream:k1,isRequest:A1,isResponse:L1,isHeaders:P1,isUndefined:nl,isDate:y1,isFile:v1,isBlob:w1,isRegExp:W1,isFunction:Zn,isStream:S1,isURLSearchParams:_1,isTypedArray:I1,isFileList:j1,forEach:fl,merge:ku,extend:O1,trim:N1,stripBOM:R1,inherits:E1,toFlatObject:T1,kindOf:$c,kindOfTest:Fi,endsWith:z1,toArray:F1,forEachEntry:M1,matchAll:D1,isHTMLForm:B1,hasOwnProperty:qh,hasOwnProp:qh,reduceDescriptors:Cp,freezeMethods:U1,toObjectSet:H1,toCamelCase:q1,noop:$1,toFiniteNumber:G1,findKey:jp,global:to,isContextDefined:Sp,isSpecCompliantForm:V1,toJSONObject:Y1,isAsyncFn:J1,isThenable:X1,setImmediate:_p,asap:K1,isIterable:Q1};function Qt(t,r,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}Be.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.status}}});const kp=Qt.prototype,Ap={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ap[t]={value:t}});Object.defineProperties(Qt,Ap);Object.defineProperty(kp,"isAxiosError",{value:!0});Qt.from=(t,r,n,i,o,s)=>{const a=Object.create(kp);return Be.toFlatObject(t,a,function(u){return u!==Error.prototype},c=>c!=="isAxiosError"),Qt.call(a,t.message,r,n,i,o),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const Z1=null;function Au(t){return Be.isPlainObject(t)||Be.isArray(t)}function Lp(t){return Be.endsWith(t,"[]")?t.slice(0,-2):t}function Wh(t,r,n){return t?t.concat(r).map(function(o,s){return o=Lp(o),!n&&s?"["+o+"]":o}).join(n?".":""):r}function e2(t){return Be.isArray(t)&&!t.some(Au)}const t2=Be.toFlatObject(Be,{},null,function(r){return/^is[A-Z]/.test(r)});function Yc(t,r,n){if(!Be.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,n=Be.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,O){return!Be.isUndefined(O[w])});const i=n.metaTokens,o=n.visitor||p,s=n.dots,a=n.indexes,u=(n.Blob||typeof Blob!="undefined"&&Blob)&&Be.isSpecCompliantForm(r);if(!Be.isFunction(o))throw new TypeError("visitor must be a function");function h(_){if(_===null)return"";if(Be.isDate(_))return _.toISOString();if(Be.isBoolean(_))return _.toString();if(!u&&Be.isBlob(_))throw new Qt("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(_)||Be.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,w,O){let k=_;if(_&&!O&&typeof _=="object"){if(Be.endsWith(w,"{}"))w=i?w:w.slice(0,-2),_=JSON.stringify(_);else if(Be.isArray(_)&&e2(_)||(Be.isFileList(_)||Be.endsWith(w,"[]"))&&(k=Be.toArray(_)))return w=Lp(w),k.forEach(function(H,Z){!(Be.isUndefined(H)||H===null)&&r.append(a===!0?Wh([w],Z,s):a===null?w:w+"[]",h(H))}),!1}return Au(_)?!0:(r.append(Wh(O,w,s),h(_)),!1)}const x=[],b=Object.assign(t2,{defaultVisitor:p,convertValue:h,isVisitable:Au});function m(_,w){if(!Be.isUndefined(_)){if(x.indexOf(_)!==-1)throw Error("Circular reference detected in "+w.join("."));x.push(_),Be.forEach(_,function(k,T){(!(Be.isUndefined(k)||k===null)&&o.call(r,k,Be.isString(T)?T.trim():T,w,b))===!0&&m(k,w?w.concat(T):[T])}),x.pop()}}if(!Be.isObject(t))throw new TypeError("data must be an object");return m(t),r}function Uh(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return r[i]})}function Qu(t,r){this._pairs=[],t&&Yc(t,this,r)}const Pp=Qu.prototype;Pp.append=function(r,n){this._pairs.push([r,n])};Pp.toString=function(r){const n=r?function(i){return r.call(this,i,Uh)}:Uh;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function r2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Np(t,r,n){if(!r)return t;const i=n&&n.encode||r2;Be.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let s;if(o?s=o(r,n):s=Be.isURLSearchParams(r)?r.toString():new Qu(r,n).toString(i),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Hh{constructor(){this.handlers=[]}use(r,n,i){return this.handlers.push({fulfilled:r,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Be.forEach(this.handlers,function(i){i!==null&&r(i)})}}const Op={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},n2=typeof URLSearchParams!="undefined"?URLSearchParams:Qu,i2=typeof FormData!="undefined"?FormData:null,s2=typeof Blob!="undefined"?Blob:null,o2={isBrowser:!0,classes:{URLSearchParams:n2,FormData:i2,Blob:s2},protocols:["http","https","file","blob","url","data"]},Zu=typeof window!="undefined"&&typeof document!="undefined",Lu=typeof navigator=="object"&&navigator||void 0,a2=Zu&&(!Lu||["ReactNative","NativeScript","NS"].indexOf(Lu.product)<0),l2=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",c2=Zu&&window.location.href||"http://localhost",d2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Zu,hasStandardBrowserEnv:a2,hasStandardBrowserWebWorkerEnv:l2,navigator:Lu,origin:c2},Symbol.toStringTag,{value:"Module"})),zn={...d2,...o2};function u2(t,r){return Yc(t,new zn.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,s){return zn.isNode&&Be.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},r))}function h2(t){return Be.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function f2(t){const r={},n=Object.keys(t);let i;const o=n.length;let s;for(i=0;i<o;i++)s=n[i],r[s]=t[s];return r}function Rp(t){function r(n,i,o,s){let a=n[s++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),u=s>=n.length;return a=!a&&Be.isArray(o)?o.length:a,u?(Be.hasOwnProp(o,a)?o[a]=[o[a],i]:o[a]=i,!c):((!o[a]||!Be.isObject(o[a]))&&(o[a]=[]),r(n,i,o[a],s)&&Be.isArray(o[a])&&(o[a]=f2(o[a])),!c)}if(Be.isFormData(t)&&Be.isFunction(t.entries)){const n={};return Be.forEachEntry(t,(i,o)=>{r(h2(i),o,n,0)}),n}return null}function p2(t,r,n){if(Be.isString(t))try{return(r||JSON.parse)(t),Be.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const pl={transitional:Op,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,s=Be.isObject(r);if(s&&Be.isHTMLForm(r)&&(r=new FormData(r)),Be.isFormData(r))return o?JSON.stringify(Rp(r)):r;if(Be.isArrayBuffer(r)||Be.isBuffer(r)||Be.isStream(r)||Be.isFile(r)||Be.isBlob(r)||Be.isReadableStream(r))return r;if(Be.isArrayBufferView(r))return r.buffer;if(Be.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return u2(r,this.formSerializer).toString();if((c=Be.isFileList(r))||i.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Yc(c?{"files[]":r}:r,u&&new u,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),p2(r)):r}],transformResponse:[function(r){const n=this.transitional||pl.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Be.isResponse(r)||Be.isReadableStream(r))return r;if(r&&Be.isString(r)&&(i&&!this.responseType||o)){const a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(c){if(a)throw c.name==="SyntaxError"?Qt.from(c,Qt.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zn.classes.FormData,Blob:zn.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],t=>{pl.headers[t]={}});const m2=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),g2=t=>{const r={};let n,i,o;return t&&t.split(`
`).forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),i=a.substring(o+1).trim(),!(!n||r[n]&&m2[n])&&(n==="set-cookie"?r[n]?r[n].push(i):r[n]=[i]:r[n]=r[n]?r[n]+", "+i:i)}),r},$h=Symbol("internals");function $a(t){return t&&String(t).trim().toLowerCase()}function mc(t){return t===!1||t==null?t:Be.isArray(t)?t.map(mc):String(t)}function x2(t){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)r[i[1]]=i[2];return r}const b2=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function $d(t,r,n,i,o){if(Be.isFunction(i))return i.call(this,r,n);if(o&&(r=n),!!Be.isString(r)){if(Be.isString(i))return r.indexOf(i)!==-1;if(Be.isRegExp(i))return i.test(r)}}function y2(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,i)=>n.toUpperCase()+i)}function v2(t,r){const n=Be.toCamelCase(" "+r);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(o,s,a){return this[i].call(this,r,o,s,a)},configurable:!0})})}let ei=class{constructor(r){r&&this.set(r)}set(r,n,i){const o=this;function s(c,u,h){const p=$a(u);if(!p)throw new Error("header name must be a non-empty string");const x=Be.findKey(o,p);(!x||o[x]===void 0||h===!0||h===void 0&&o[x]!==!1)&&(o[x||u]=mc(c))}const a=(c,u)=>Be.forEach(c,(h,p)=>s(h,p,u));if(Be.isPlainObject(r)||r instanceof this.constructor)a(r,n);else if(Be.isString(r)&&(r=r.trim())&&!b2(r))a(g2(r),n);else if(Be.isObject(r)&&Be.isIterable(r)){let c={},u,h;for(const p of r){if(!Be.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[h=p[0]]=(u=c[h])?Be.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}a(c,n)}else r!=null&&s(n,r,i);return this}get(r,n){if(r=$a(r),r){const i=Be.findKey(this,r);if(i){const o=this[i];if(!n)return o;if(n===!0)return x2(o);if(Be.isFunction(n))return n.call(this,o,i);if(Be.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=$a(r),r){const i=Be.findKey(this,r);return!!(i&&this[i]!==void 0&&(!n||$d(this,this[i],i,n)))}return!1}delete(r,n){const i=this;let o=!1;function s(a){if(a=$a(a),a){const c=Be.findKey(i,a);c&&(!n||$d(i,i[c],c,n))&&(delete i[c],o=!0)}}return Be.isArray(r)?r.forEach(s):s(r),o}clear(r){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const s=n[i];(!r||$d(this,this[s],s,r,!0))&&(delete this[s],o=!0)}return o}normalize(r){const n=this,i={};return Be.forEach(this,(o,s)=>{const a=Be.findKey(i,s);if(a){n[a]=mc(o),delete n[s];return}const c=r?y2(s):String(s).trim();c!==s&&delete n[s],n[c]=mc(o),i[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return Be.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=r&&Be.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const i=new this(r);return n.forEach(o=>i.set(o)),i}static accessor(r){const i=(this[$h]=this[$h]={accessors:{}}).accessors,o=this.prototype;function s(a){const c=$a(a);i[c]||(v2(o,a),i[c]=!0)}return Be.isArray(r)?r.forEach(s):s(r),this}};ei.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(ei.prototype,({value:t},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(i){this[n]=i}}});Be.freezeMethods(ei);function Gd(t,r){const n=this||pl,i=r||n,o=ei.from(i.headers);let s=i.data;return Be.forEach(t,function(c){s=c.call(n,s,o.normalize(),r?r.status:void 0)}),o.normalize(),s}function Ep(t){return!!(t&&t.__CANCEL__)}function ma(t,r,n){Qt.call(this,t==null?"canceled":t,Qt.ERR_CANCELED,r,n),this.name="CanceledError"}Be.inherits(ma,Qt,{__CANCEL__:!0});function Tp(t,r,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):r(new Qt("Request failed with status code "+n.status,[Qt.ERR_BAD_REQUEST,Qt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function w2(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function j2(t,r){t=t||10;const n=new Array(t),i=new Array(t);let o=0,s=0,a;return r=r!==void 0?r:1e3,function(u){const h=Date.now(),p=i[s];a||(a=h),n[o]=u,i[o]=h;let x=s,b=0;for(;x!==o;)b+=n[x++],x=x%t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),h-a<r)return;const m=p&&h-p;return m?Math.round(b*1e3/m):void 0}}function S2(t,r){let n=0,i=1e3/r,o,s;const a=(h,p=Date.now())=>{n=p,o=null,s&&(clearTimeout(s),s=null),t.apply(null,h)};return[(...h)=>{const p=Date.now(),x=p-n;x>=i?a(h,p):(o=h,s||(s=setTimeout(()=>{s=null,a(o)},i-x)))},()=>o&&a(o)]}const Oc=(t,r,n=3)=>{let i=0;const o=j2(50,250);return S2(s=>{const a=s.loaded,c=s.lengthComputable?s.total:void 0,u=a-i,h=o(u),p=a<=c;i=a;const x={loaded:a,total:c,progress:c?a/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&p?(c-a)/h:void 0,event:s,lengthComputable:c!=null,[r?"download":"upload"]:!0};t(x)},n)},Gh=(t,r)=>{const n=t!=null;return[i=>r[0]({lengthComputable:n,total:t,loaded:i}),r[1]]},Vh=t=>(...r)=>Be.asap(()=>t(...r)),C2=zn.hasStandardBrowserEnv?((t,r)=>n=>(n=new URL(n,zn.origin),t.protocol===n.protocol&&t.host===n.host&&(r||t.port===n.port)))(new URL(zn.origin),zn.navigator&&/(msie|trident)/i.test(zn.navigator.userAgent)):()=>!0,_2=zn.hasStandardBrowserEnv?{write(t,r,n,i,o,s){const a=[t+"="+encodeURIComponent(r)];Be.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Be.isString(i)&&a.push("path="+i),Be.isString(o)&&a.push("domain="+o),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function k2(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function A2(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function zp(t,r,n){let i=!k2(r);return t&&(i||n==!1)?A2(t,r):r}const Yh=t=>t instanceof ei?{...t}:t;function uo(t,r){r=r||{};const n={};function i(h,p,x,b){return Be.isPlainObject(h)&&Be.isPlainObject(p)?Be.merge.call({caseless:b},h,p):Be.isPlainObject(p)?Be.merge({},p):Be.isArray(p)?p.slice():p}function o(h,p,x,b){if(Be.isUndefined(p)){if(!Be.isUndefined(h))return i(void 0,h,x,b)}else return i(h,p,x,b)}function s(h,p){if(!Be.isUndefined(p))return i(void 0,p)}function a(h,p){if(Be.isUndefined(p)){if(!Be.isUndefined(h))return i(void 0,h)}else return i(void 0,p)}function c(h,p,x){if(x in r)return i(h,p);if(x in t)return i(void 0,h)}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(h,p,x)=>o(Yh(h),Yh(p),x,!0)};return Be.forEach(Object.keys(Object.assign({},t,r)),function(p){const x=u[p]||o,b=x(t[p],r[p],p);Be.isUndefined(b)&&x!==c||(n[p]=b)}),n}const Fp=t=>{const r=uo({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:c}=r;r.headers=a=ei.from(a),r.url=Np(zp(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let u;if(Be.isFormData(n)){if(zn.hasStandardBrowserEnv||zn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[h,...p]=u?u.split(";").map(x=>x.trim()).filter(Boolean):[];a.setContentType([h||"multipart/form-data",...p].join("; "))}}if(zn.hasStandardBrowserEnv&&(i&&Be.isFunction(i)&&(i=i(r)),i||i!==!1&&C2(r.url))){const h=o&&s&&_2.read(s);h&&a.set(o,h)}return r},L2=typeof XMLHttpRequest!="undefined",P2=L2&&function(t){return new Promise(function(n,i){const o=Fp(t);let s=o.data;const a=ei.from(o.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=o,p,x,b,m,_;function w(){m&&m(),_&&_(),o.cancelToken&&o.cancelToken.unsubscribe(p),o.signal&&o.signal.removeEventListener("abort",p)}let O=new XMLHttpRequest;O.open(o.method.toUpperCase(),o.url,!0),O.timeout=o.timeout;function k(){if(!O)return;const H=ei.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),N={data:!c||c==="text"||c==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:H,config:t,request:O};Tp(function(B){n(B),w()},function(B){i(B),w()},N),O=null}"onloadend"in O?O.onloadend=k:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(k)},O.onabort=function(){O&&(i(new Qt("Request aborted",Qt.ECONNABORTED,t,O)),O=null)},O.onerror=function(){i(new Qt("Network Error",Qt.ERR_NETWORK,t,O)),O=null},O.ontimeout=function(){let Z=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const N=o.transitional||Op;o.timeoutErrorMessage&&(Z=o.timeoutErrorMessage),i(new Qt(Z,N.clarifyTimeoutError?Qt.ETIMEDOUT:Qt.ECONNABORTED,t,O)),O=null},s===void 0&&a.setContentType(null),"setRequestHeader"in O&&Be.forEach(a.toJSON(),function(Z,N){O.setRequestHeader(N,Z)}),Be.isUndefined(o.withCredentials)||(O.withCredentials=!!o.withCredentials),c&&c!=="json"&&(O.responseType=o.responseType),h&&([b,_]=Oc(h,!0),O.addEventListener("progress",b)),u&&O.upload&&([x,m]=Oc(u),O.upload.addEventListener("progress",x),O.upload.addEventListener("loadend",m)),(o.cancelToken||o.signal)&&(p=H=>{O&&(i(!H||H.type?new ma(null,t,O):H),O.abort(),O=null)},o.cancelToken&&o.cancelToken.subscribe(p),o.signal&&(o.signal.aborted?p():o.signal.addEventListener("abort",p)));const T=w2(o.url);if(T&&zn.protocols.indexOf(T)===-1){i(new Qt("Unsupported protocol "+T+":",Qt.ERR_BAD_REQUEST,t));return}O.send(s||null)})},N2=(t,r)=>{const{length:n}=t=t?t.filter(Boolean):[];if(r||n){let i=new AbortController,o;const s=function(h){if(!o){o=!0,c();const p=h instanceof Error?h:this.reason;i.abort(p instanceof Qt?p:new ma(p instanceof Error?p.message:p))}};let a=r&&setTimeout(()=>{a=null,s(new Qt(`timeout ${r} of ms exceeded`,Qt.ETIMEDOUT))},r);const c=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),t=null)};t.forEach(h=>h.addEventListener("abort",s));const{signal:u}=i;return u.unsubscribe=()=>Be.asap(c),u}},O2=function*(t,r){let n=t.byteLength;if(n<r){yield t;return}let i=0,o;for(;i<n;)o=i+r,yield t.slice(i,o),i=o},R2=async function*(t,r){for await(const n of E2(t))yield*O2(n,r)},E2=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:n,value:i}=await r.read();if(n)break;yield i}}finally{await r.cancel()}},Jh=(t,r,n,i)=>{const o=R2(t,r);let s=0,a,c=u=>{a||(a=!0,i&&i(u))};return new ReadableStream({async pull(u){try{const{done:h,value:p}=await o.next();if(h){c(),u.close();return}let x=p.byteLength;if(n){let b=s+=x;n(b)}u.enqueue(new Uint8Array(p))}catch(h){throw c(h),h}},cancel(u){return c(u),o.return()}},{highWaterMark:2})},Jc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ip=Jc&&typeof ReadableStream=="function",T2=Jc&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Mp=(t,...r)=>{try{return!!t(...r)}catch{return!1}},z2=Ip&&Mp(()=>{let t=!1;const r=new Request(zn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),Xh=64*1024,Pu=Ip&&Mp(()=>Be.isReadableStream(new Response("").body)),Rc={stream:Pu&&(t=>t.body)};Jc&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Rc[r]&&(Rc[r]=Be.isFunction(t[r])?n=>n[r]():(n,i)=>{throw new Qt(`Response type '${r}' is not supported`,Qt.ERR_NOT_SUPPORT,i)})})})(new Response);const F2=async t=>{if(t==null)return 0;if(Be.isBlob(t))return t.size;if(Be.isSpecCompliantForm(t))return(await new Request(zn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Be.isArrayBufferView(t)||Be.isArrayBuffer(t))return t.byteLength;if(Be.isURLSearchParams(t)&&(t=t+""),Be.isString(t))return(await T2(t)).byteLength},I2=async(t,r)=>{const n=Be.toFiniteNumber(t.getContentLength());return n==null?F2(r):n},M2=Jc&&(async t=>{let{url:r,method:n,data:i,signal:o,cancelToken:s,timeout:a,onDownloadProgress:c,onUploadProgress:u,responseType:h,headers:p,withCredentials:x="same-origin",fetchOptions:b}=Fp(t);h=h?(h+"").toLowerCase():"text";let m=N2([o,s&&s.toAbortSignal()],a),_;const w=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let O;try{if(u&&z2&&n!=="get"&&n!=="head"&&(O=await I2(p,i))!==0){let N=new Request(r,{method:"POST",body:i,duplex:"half"}),D;if(Be.isFormData(i)&&(D=N.headers.get("content-type"))&&p.setContentType(D),N.body){const[B,V]=Gh(O,Oc(Vh(u)));i=Jh(N.body,Xh,B,V)}}Be.isString(x)||(x=x?"include":"omit");const k="credentials"in Request.prototype;_=new Request(r,{...b,signal:m,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:i,duplex:"half",credentials:k?x:void 0});let T=await fetch(_,b);const H=Pu&&(h==="stream"||h==="response");if(Pu&&(c||H&&w)){const N={};["status","statusText","headers"].forEach(R=>{N[R]=T[R]});const D=Be.toFiniteNumber(T.headers.get("content-length")),[B,V]=c&&Gh(D,Oc(Vh(c),!0))||[];T=new Response(Jh(T.body,Xh,B,()=>{V&&V(),w&&w()}),N)}h=h||"text";let Z=await Rc[Be.findKey(Rc,h)||"text"](T,t);return!H&&w&&w(),await new Promise((N,D)=>{Tp(N,D,{data:Z,headers:ei.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:_})})}catch(k){throw w&&w(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Qt("Network Error",Qt.ERR_NETWORK,t,_),{cause:k.cause||k}):Qt.from(k,k&&k.code,t,_)}}),Nu={http:Z1,xhr:P2,fetch:M2};Be.forEach(Nu,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const Kh=t=>`- ${t}`,D2=t=>Be.isFunction(t)||t===null||t===!1,Dp={getAdapter:t=>{t=Be.isArray(t)?t:[t];const{length:r}=t;let n,i;const o={};for(let s=0;s<r;s++){n=t[s];let a;if(i=n,!D2(n)&&(i=Nu[(a=String(n)).toLowerCase()],i===void 0))throw new Qt(`Unknown adapter '${a}'`);if(i)break;o[a||"#"+s]=i}if(!i){const s=Object.entries(o).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=r?s.length>1?`since :
`+s.map(Kh).join(`
`):" "+Kh(s[0]):"as no adapter specified";throw new Qt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:Nu};function Vd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ma(null,t)}function Qh(t){return Vd(t),t.headers=ei.from(t.headers),t.data=Gd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Dp.getAdapter(t.adapter||pl.adapter)(t).then(function(i){return Vd(t),i.data=Gd.call(t,t.transformResponse,i),i.headers=ei.from(i.headers),i},function(i){return Ep(i)||(Vd(t),i&&i.response&&(i.response.data=Gd.call(t,t.transformResponse,i.response),i.response.headers=ei.from(i.response.headers))),Promise.reject(i)})}const Bp="1.10.0",Xc={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Xc[t]=function(i){return typeof i===t||"a"+(r<1?"n ":" ")+t}});const Zh={};Xc.transitional=function(r,n,i){function o(s,a){return"[Axios v"+Bp+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,c)=>{if(r===!1)throw new Qt(o(a," has been removed"+(n?" in "+n:"")),Qt.ERR_DEPRECATED);return n&&!Zh[a]&&(Zh[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(s,a,c):!0}};Xc.spelling=function(r){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${r}`),!0)};function B2(t,r,n){if(typeof t!="object")throw new Qt("options must be an object",Qt.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const s=i[o],a=r[s];if(a){const c=t[s],u=c===void 0||a(c,s,t);if(u!==!0)throw new Qt("option "+s+" must be "+u,Qt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Qt("Unknown option "+s,Qt.ERR_BAD_OPTION)}}const gc={assertOptions:B2,validators:Xc},Hi=gc.validators;let ro=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Hh,response:new Hh}}async request(r,n){try{return await this._request(r,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=uo(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:s}=n;i!==void 0&&gc.assertOptions(i,{silentJSONParsing:Hi.transitional(Hi.boolean),forcedJSONParsing:Hi.transitional(Hi.boolean),clarifyTimeoutError:Hi.transitional(Hi.boolean)},!1),o!=null&&(Be.isFunction(o)?n.paramsSerializer={serialize:o}:gc.assertOptions(o,{encode:Hi.function,serialize:Hi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),gc.assertOptions(n,{baseUrl:Hi.spelling("baseURL"),withXsrfToken:Hi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&Be.merge(s.common,s[n.method]);s&&Be.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=ei.concat(a,s);const c=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(u=u&&w.synchronous,c.unshift(w.fulfilled,w.rejected))});const h=[];this.interceptors.response.forEach(function(w){h.push(w.fulfilled,w.rejected)});let p,x=0,b;if(!u){const _=[Qh.bind(this),void 0];for(_.unshift.apply(_,c),_.push.apply(_,h),b=_.length,p=Promise.resolve(n);x<b;)p=p.then(_[x++],_[x++]);return p}b=c.length;let m=n;for(x=0;x<b;){const _=c[x++],w=c[x++];try{m=_(m)}catch(O){w.call(this,O);break}}try{p=Qh.call(this,m)}catch(_){return Promise.reject(_)}for(x=0,b=h.length;x<b;)p=p.then(h[x++],h[x++]);return p}getUri(r){r=uo(this.defaults,r);const n=zp(r.baseURL,r.url,r.allowAbsoluteUrls);return Np(n,r.params,r.paramsSerializer)}};Be.forEach(["delete","get","head","options"],function(r){ro.prototype[r]=function(n,i){return this.request(uo(i||{},{method:r,url:n,data:(i||{}).data}))}});Be.forEach(["post","put","patch"],function(r){function n(i){return function(s,a,c){return this.request(uo(c||{},{method:r,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}ro.prototype[r]=n(),ro.prototype[r+"Form"]=n(!0)});let q2=class qp{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(o=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](o);i._listeners=null}),this.promise.then=o=>{let s;const a=new Promise(c=>{i.subscribe(c),s=c}).then(o);return a.cancel=function(){i.unsubscribe(s)},a},r(function(s,a,c){i.reason||(i.reason=new ma(s,a,c),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=i=>{r.abort(i)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new qp(function(o){r=o}),cancel:r}}};function W2(t){return function(n){return t.apply(null,n)}}function U2(t){return Be.isObject(t)&&t.isAxiosError===!0}const Ou={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ou).forEach(([t,r])=>{Ou[r]=t});function Wp(t){const r=new ro(t),n=bp(ro.prototype.request,r);return Be.extend(n,ro.prototype,r,{allOwnKeys:!0}),Be.extend(n,r,null,{allOwnKeys:!0}),n.create=function(o){return Wp(uo(t,o))},n}const Nr=Wp(pl);Nr.Axios=ro;Nr.CanceledError=ma;Nr.CancelToken=q2;Nr.isCancel=Ep;Nr.VERSION=Bp;Nr.toFormData=Yc;Nr.AxiosError=Qt;Nr.Cancel=Nr.CanceledError;Nr.all=function(r){return Promise.all(r)};Nr.spread=W2;Nr.isAxiosError=U2;Nr.mergeConfig=uo;Nr.AxiosHeaders=ei;Nr.formToJSON=t=>Rp(Be.isHTMLForm(t)?new FormData(t):t);Nr.getAdapter=Dp.getAdapter;Nr.HttpStatusCode=Ou;Nr.default=Nr;const{Axios:Hv,AxiosError:$v,CanceledError:Gv,isCancel:Vv,CancelToken:Yv,VERSION:Jv,all:Xv,Cancel:Kv,isAxiosError:Qv,spread:Zv,toFormData:ew,AxiosHeaders:tw,HttpStatusCode:rw,formToJSON:nw,getAdapter:iw,mergeConfig:sw}=Nr,Yd="https://mu-connect.me/api",H2="https://mu-connect.me",Ds=Yd==null?void 0:Yd.replace(/\/$/,""),fs=H2.replace(/\/$/,"");Ds||console.warn("[env] VITE_API_BASE_URL is not defined. API calls will fail until it is set.");const yt=Nr.create({baseURL:Ds,timeout:15e3,withCredentials:!1});yt.interceptors.request.use(t=>{try{const r=localStorage.getItem("authToken");r&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${r}`)}catch{}return t});yt.interceptors.response.use(t=>t,t=>{var n,i,o,s,a,c;const r={message:((i=(n=t.response)==null?void 0:n.data)==null?void 0:i.message)||t.message||"Request failed",status:(o=t.response)==null?void 0:o.status,data:(s=t.response)==null?void 0:s.data,url:(a=t.config)==null?void 0:a.url,method:(c=t.config)==null?void 0:c.method};return Promise.reject(r)});const Up=t=>{t&&localStorage.setItem("authToken",t)},$2=async t=>{var r,n,i,o;try{const s=await yt.post("/auth/google/complete-registration",t);return s.data.token&&(localStorage.setItem("authToken",s.data.token),(r=s.data.user)!=null&&r.faculty&&(localStorage.setItem("userFaculty",s.data.user.faculty.name),localStorage.setItem("faculty_id",s.data.user.faculty.id)),(n=s.data.user)!=null&&n.major&&(localStorage.setItem("userMajor",s.data.user.major.name),localStorage.setItem("major_id",s.data.user.major.id)),(i=s.data.user)!=null&&i.roles&&s.data.user.roles[0]&&localStorage.setItem("role",s.data.user.roles[0])),s.data}catch(s){throw((o=s.response)==null?void 0:o.data)||{message:"Registration completion failed"}}},G2=()=>localStorage.getItem("googleTempToken"),V2=t=>{localStorage.setItem("googleTempToken",t)},bn={NETWORK:"network",VALIDATION:"validation",AUTHENTICATION:"authentication",AUTHORIZATION:"authorization",NOT_FOUND:"not_found",SERVER:"server",UNKNOWN:"unknown"},ef={[bn.NETWORK]:"Unable to connect to the server. Please check your internet connection and try again.",[bn.VALIDATION]:"Please check your input and try again.",[bn.AUTHENTICATION]:"Your session has expired. Please log in again.",[bn.AUTHORIZATION]:"You don't have permission to perform this action.",[bn.NOT_FOUND]:"The requested resource was not found.",[bn.SERVER]:"Something went wrong on our end. Please try again later.",[bn.UNKNOWN]:"An unexpected error occurred. Please try again later."},Y2=t=>{var r;if(!t.status&&(t.code==="NETWORK_ERROR"||(r=t.message)!=null&&r.includes("Network Error")))return bn.NETWORK;switch(t.status){case 400:return bn.VALIDATION;case 401:return bn.AUTHENTICATION;case 403:return bn.AUTHORIZATION;case 404:return bn.NOT_FOUND;case 422:return bn.VALIDATION;case 500:case 502:case 503:case 504:return bn.SERVER;default:return bn.UNKNOWN}},J2=(t,r=null)=>{var s,a;const n=Y2(t);let i="Error",o=r||ef[n];if(n===bn.VALIDATION&&((s=t.data)!=null&&s.errors)){const c=Object.values(t.data.errors).flat();c.length>0&&(o=c[0],i="Validation Error")}else(a=t.data)!=null&&a.message&&X2(t.data.message)?o=t.data.message:n===bn.SERVER&&(o=ef[bn.SERVER],i="Server Error");return{title:i,description:o,type:n}},X2=t=>!t||typeof t!="string"?!1:![/database/i,/sql/i,/connection/i,/internal server/i,/stack trace/i,/exception/i,/error at line/i,/query failed/i,/undefined method/i,/class not found/i].some(n=>n.test(t)),ls=(t,r=null)=>{const n=J2(t,r);return{title:n.title,description:n.description,status:"error",duration:5e3,isClosable:!0}},Jd=(t,r=null,n=3e3)=>({title:t,description:r,status:"success",duration:n,isClosable:!0}),cs=(t,r)=>{console.error(`[${t}]`,{message:r.message,status:r.status,url:r.url,method:r.method})},Hp=Ds,Kc=()=>localStorage.getItem("authToken");Nr.interceptors.request.use(t=>{const r=Kc();return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const eh=async t=>{var r;try{const n=await yt.post("/register",t);return n.data.token&&Up(n.data.token),t.faculty&&localStorage.setItem("userFaculty",t.faculty),t.major&&localStorage.setItem("userMajor",t.major),n.data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Registration failed"}}},$p=async t=>{var r;try{const n=await yt.post("/login",t);return n.data.token&&Up(n.data.token),n.data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Login failed"}}},th=async()=>{try{Kc()&&await yt.post("/logout")}catch{}localStorage.clear(),sessionStorage.clear(),window.location.reload()},Zs=async()=>{if(!Kc()){const r=sessionStorage.getItem("currentUser");return r?(console.log("Using cached user data from Google authentication"),JSON.parse(r)):null}try{const r=await yt.get("/users/me");return r.data&&!r.data.id&&r.data.user_id&&(r.data.id=r.data.user_id),r.data&&r.data.avatar&&!r.data.avatar.startsWith("http")?r.data.avatar_url=`${fs}/storage/avatars/${r.data.avatar}`:r.data&&r.data.avatar&&(r.data.avatar_url=r.data.avatar),r.data.faculty&&r.data.faculty.name&&(localStorage.setItem("userFaculty",r.data.faculty.name),localStorage.setItem("faculty_id",r.data.faculty.id)),r.data.major&&r.data.major.name&&(localStorage.setItem("userMajor",r.data.major.name),localStorage.setItem("major_id",r.data.major.id)),r.data.roles&&r.data.roles.length>0?localStorage.setItem("role",r.data.roles[0]):r.data.role_names&&r.data.role_names.length>0&&localStorage.setItem("role",r.data.role_names[0]),r.data&&r.data.id&&localStorage.setItem("user_id",r.data.id),sessionStorage.setItem("currentUser",JSON.stringify(r.data)),r.data}catch(r){console.error("Error fetching current user:",r);const n=sessionStorage.getItem("currentUser");return n?JSON.parse(n):null}},Gp=()=>{try{const t=sessionStorage.getItem("currentUser");if(t){const n=JSON.parse(t);return n.id||(n.id=localStorage.getItem("user_id")||null),!n.role&&localStorage.getItem("role")&&(n.role=localStorage.getItem("role")),n}const r=localStorage.getItem("user_id");return r?{id:r,first_name:localStorage.getItem("first_name")||"User",last_name:localStorage.getItem("last_name")||"",role:localStorage.getItem("role")}:null}catch(t){return console.error("Error getting cached user:",t),null}},Vp=async()=>{var t;try{return(await Nr.get(`${Hp}/registration/faculties`,{withCredentials:!0})).data}catch(r){throw((t=r.response)==null?void 0:t.data)||{message:"Failed to load faculties"}}},Yp=async t=>{var r;try{return(await Nr.get(`${Hp}/registration/faculties/${t}/majors`,{withCredentials:!0})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to load majors"}}},tf=Object.freeze(Object.defineProperty({__proto__:null,getCurrentUser:Zs,getCurrentUserSync:Gp,getFaculties:Vp,getMajors:Yp,getToken:Kc,login:$p,logout:th,register:eh},Symbol.toStringTag,{value:"Module"})),Jp=q.createContext(),K2=({children:t})=>{const[r,n]=q.useState(null),[i,o]=q.useState(!0),[s,a]=q.useState(null);q.useEffect(()=>{Zs().then(n).catch(()=>n(null)).finally(()=>o(!1))},[]);const c=q.useCallback(async b=>{o(!0),a(null);try{await $p(b);const m=await Zs();return n(m),a(null),m}catch(m){throw a(m.message||"Login failed"),n(null),m}finally{o(!1)}},[]),u=q.useCallback(async()=>{o(!0);try{await th(),n(null)}finally{o(!1)}},[]),h=q.useCallback(async b=>{o(!0),a(null);try{await eh(b);const m=await Zs();return n(m),a(null),m}catch(m){throw a(m.message||"Registration failed"),n(null),m}finally{o(!1)}},[]),p=q.useCallback(async b=>{o(!0),a(null);try{await $2(b);const m=await Zs();return n(m),a(null),m}catch(m){throw a(m.message||"Google registration failed"),n(null),m}finally{o(!1)}},[]),x=q.useCallback(async b=>{o(!0);try{if(!localStorage.getItem("authToken")){const _="google_auth_"+Math.random().toString(36).substring(2,15);localStorage.setItem("authToken",_)}return n(b),sessionStorage.setItem("currentUser",JSON.stringify(b)),await Zs(),b}catch(m){throw console.error("Google auth error:",m),a(m.message||"Failed to process Google authentication"),n(null),m}finally{o(!1)}},[]);return e.jsx(Jp.Provider,{value:{user:r,loading:i,authError:s,login:c,logout:u,register:h,completeGoogleSignUp:p,handleGoogleAuthSuccess:x},children:t})},hi=()=>{const t=q.useContext(Jp);return t||(console.warn("useAuth must be used within an AuthProvider. Falling back to default context."),{user:null,loading:!1,authError:null,login:async()=>{},logout:async()=>{},register:async()=>{},completeGoogleSignUp:async()=>{},handleGoogleAuthSuccess:async()=>{}})},Q2=()=>{const[t,r]=q.useState({login:"",password:""}),[n,i]=q.useState({}),o=qr();Xr();const{user:s,loading:a,login:c}=hi(),u=x=>{r({...t,[x.target.name]:x.target.value}),i({...n,[x.target.name]:""})},h=()=>{const x={};return t.login||(x.login="Username/Email is required"),t.password||(x.password="Password is required"),i(x),Object.keys(x).length===0},p=async x=>{if(x.preventDefault(),!!h())try{await c(t),o({title:"Login successful",status:"success",duration:3e3})}catch(b){cs("handleSubmit",b),o(ls(b,"Login failed"))}};return a?e.jsx(vn,{minH:"100vh",children:e.jsx(nn,{size:"xl",color:"blue.500"})}):s?e.jsx(Ac,{to:"/dashboard",replace:!0}):e.jsx(Ce,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",align:"center",justify:"center",children:e.jsx(Si,{maxW:"container.md",px:[4,8],children:e.jsxs(ce,{bg:"white",p:[6,12],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:"linear(to-r, blue.500, teal.400)",borderRadius:"2xl",zIndex:-1},children:[e.jsxs(Ce,{align:"center",mb:8,gap:3,justify:"center",children:[e.jsx(Ar,{src:ji,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(ut,{size:"xl",bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"MU Connect"})]}),e.jsxs(yr,{spacing:8,children:[e.jsx(ce,{textAlign:"center",children:e.jsx(ut,{size:"2xl",mb:2,bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"Welcome Back!"})}),e.jsx("form",{onSubmit:p,children:e.jsxs(yr,{spacing:6,children:[e.jsxs(ft,{isRequired:!0,isInvalid:!!n.login,children:[e.jsx(pt,{color:"gray.600",children:"Username/Email"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:na,color:"blue.500","aria-label":"Username icon"})}),e.jsx(Rt,{name:"login",placeholder:"id@mu.edu.lb",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800",value:t.login,onChange:u})]}),n.login&&e.jsx(G,{color:"red.500",fontSize:"sm",mt:1,children:n.login})]}),e.jsxs(ft,{isRequired:!0,isInvalid:!!n.password,children:[e.jsx(pt,{color:"gray.600",children:"Password"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Su,color:"blue.500","aria-label":"Password icon"})}),e.jsx(Rt,{type:"password",placeholder:"••••••••",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800",name:"password",value:t.password,onChange:u})]}),n.password&&e.jsx(G,{color:"red.500",fontSize:"sm",mt:1,children:n.password})]}),e.jsx(Ce,{justify:"space-between",align:"center",children:e.jsx(Sc,{as:Ji,to:"/forgot-password",color:"blue.500",fontSize:"sm",_hover:{textDecoration:"underline"},children:"Forgot Password?"})}),e.jsx(Te,{type:"submit",colorScheme:"blue",size:"lg",height:"60px",fontSize:"lg",rightIcon:e.jsx(ct,{as:ea,"aria-label":"Sign in"}),isLoading:a,bgGradient:"linear(to-r, blue.500, teal.400)",_hover:{bgGradient:"linear(to-r, blue.600, teal.500)"},_active:{transform:"scale(0.98)"},w:"full",children:"Sign In"})]})}),e.jsxs(G,{textAlign:"center",color:"gray.600",children:["New to MU Connect?"," ",e.jsx(Sc,{as:Ji,to:"/register",color:"blue.500",fontWeight:"600",_hover:{textDecoration:"underline"},children:"Create account"})]})]})]})})})},Z2="modulepreload",ex=function(t){return"/"+t},rf={},ho=function(r,n,i){let o=Promise.resolve();if(n&&n.length>0){let a=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=a(n.map(h=>{if(h=ex(h),h in rf)return;rf[h]=!0;const p=h.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${x}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":Z2,p||(b.as="script"),b.crossOrigin="",b.href=h,u&&b.setAttribute("nonce",u),document.head.appendChild(b),p)return new Promise((m,_)=>{b.addEventListener("load",m),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return o.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return r().catch(s)})},tx=()=>{var Q,ie;const[t,r]=q.useState(0),[n,i]=q.useState({first_name:"",last_name:"",username:"",email:"",password:"",password_confirmation:"",faculty_id:"",major_id:""}),[o,s]=q.useState([]),[a,c]=q.useState([]),[u,h]=q.useState(!0),[p,x]=q.useState(!1),[b,m]=q.useState(""),[_,w]=q.useState(""),[O,k]=q.useState({}),[T,H]=q.useState(!1),[Z,N]=q.useState(0),D=qr(),B=Xr(),V="linear(to-br, blue.50 0%, white 50%, blue.50 100%)",R="white",P="linear(to-r, blue.500, teal.400)",j="linear(to-r, blue.600, teal.500)",A="gray.700",E="gray.200",z=[{id:"welcome",title:"Welcome"},{id:"name",title:"Your Name"},{id:"username",title:"Create Username"},{id:"email",title:"Your Email"},{id:"password",title:"Set Password"},{id:"faculty",title:"Your Faculty"},{id:"major",title:"Your Major"},{id:"complete",title:"Complete"}],se=de=>{const{name:le,value:be}=de.target;i(fe=>({...fe,[le]:be})),le==="username"&&O.username&&k(fe=>({...fe,username:void 0}))},re=de=>{const le=de.target.value;i(be=>({...be,faculty_id:le,major_id:""}))},v=de=>{const le=de.target.value;i(be=>({...be,major_id:le}))},ne=(de=t)=>{const le={};switch(de){case 1:n.first_name.trim()||(le.first_name="First name is required."),n.last_name.trim()||(le.last_name="Last name is required.");break;case 2:n.username.trim()||(le.username="Username is required.");break;case 3:n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.email.endsWith("@mu.edu.lb")||(le.email="Email must be a university email (@mu.edu.lb)."):le.email="Invalid email address format.":le.email="Email is required.";break;case 4:n.password?n.password.length<6&&(le.password="Password must be at least 6 characters."):le.password="Password is required.",n.password_confirmation?n.password!==n.password_confirmation&&(le.password_confirmation="Passwords do not match."):le.password_confirmation="Please confirm your password.";break;case 5:n.faculty_id||(le.faculty_id="Faculty is required.");break;case 6:n.major_id||(le.major_id="Major is required.");break}return k(le),Object.keys(le).length===0},M=()=>ne(t),y=()=>{if(t===2&&O.username){D({title:O.username,status:"error",duration:3e3});return}M()?t<z.length-1&&r(t+1):D({title:"Please correct the errors",status:"error",duration:2500})},Y=de=>{de.key==="Enter"&&M()&&t<7&&(de.preventDefault(),y())},C=()=>{t>0&&r(t-1)},W=async de=>{de&&de.preventDefault();for(let be=1;be<=6;be++)if(!ne(be)){D({title:"Incomplete Information",description:"Please fill out all required fields correctly.",status:"error",duration:3e3}),r(be);return}H(!0),N(0);const le=setInterval(()=>{N(be=>Math.min(be+Math.random()*15,90))},400);try{const be={first_name:n.first_name,last_name:n.last_name,username:n.username,email:n.email,password:n.password,password_confirmation:n.password_confirmation,faculty_id:n.faculty_id,major_id:n.major_id};await eh(be),clearInterval(le),N(100),D({title:"Registration successful!",description:"Welcome to Maaref. We're glad to have you.",status:"success",duration:3e3,isClosable:!0}),setTimeout(()=>{B("/dashboard")},500)}catch(be){if(clearInterval(le),H(!1),be&&typeof be=="object"&&be.errors){k(Oe=>({...Oe,...be.errors}));const fe={first_name:1,last_name:1,username:2,email:3,password:4,password_confirmation:4,faculty_id:5,major_id:6},Fe=Object.keys(be.errors).reduce((Oe,Ue)=>Math.min(Oe,fe[Ue]||8),8);r(Fe),D({title:"Please correct the highlighted error(s).",status:"error",duration:3e3})}else D({title:be.message||"An unexpected error occurred.",description:"Please try again later.",status:"error",duration:4e3})}};q.useEffect(()=>{h(!0),ho(async()=>{const{getFaculties:de}=await Promise.resolve().then(()=>tf);return{getFaculties:de}},void 0).then(({getFaculties:de})=>{de().then(le=>{s(le),h(!1),m("")}).catch(le=>{s([]),h(!1),m("Failed to load faculties. Please try again later."),D({title:"Failed to load faculties",description:(le==null?void 0:le.message)||"Please check your connection and try again.",status:"error",duration:5e3})})})},[]),q.useEffect(()=>{n.faculty_id?(x(!0),c([]),ho(async()=>{const{getMajors:de}=await Promise.resolve().then(()=>tf);return{getMajors:de}},void 0).then(({getMajors:de})=>{de(n.faculty_id).then(le=>{c(le),x(!1),w("")}).catch(le=>{c([]),x(!1),w("Failed to load majors. Please try again later."),D({title:"Failed to load majors",description:(le==null?void 0:le.message)||"Please check your connection and try again.",status:"error",duration:5e3})})})):c([]),i(de=>({...de,major_id:""}))},[n.faculty_id]);const{user:L,loading:$}=hi();return $?e.jsx(vn,{minH:"100vh",children:e.jsx(nn,{size:"xl",color:"blue.500"})}):L?e.jsx(Ac,{to:"/dashboard",replace:!0}):e.jsx(Ce,{minH:"100vh",bgGradient:V,align:"center",justify:"center",children:T?e.jsx(ce,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1000",bg:V,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:e.jsx(zm,{initialScale:.9,in:T,children:e.jsxs(et,{spacing:8,maxW:"500px",textAlign:"center",p:4,children:[e.jsx(Ar,{src:ji,boxSize:"80px",alt:"Maaref Logo"}),e.jsx(ut,{fontSize:"3xl",bgGradient:"linear(to-r, blue.500, teal.400)",bgClip:"text",letterSpacing:"tight",children:"Setting up your personalized experience"}),e.jsxs(ce,{w:"full",children:[e.jsx(G,{mb:2,fontWeight:"medium",color:A,children:Z<30?"Analyzing your academic profile...":Z<60?"Finding relevant resources...":Z<90?"Preparing your personalized feed...":"Almost done!"}),e.jsx(io,{value:Z,colorScheme:"blue",h:"10px",rounded:"full",mb:3,hasStripe:!0,isAnimated:!0})]}),e.jsxs(G,{color:"gray.500",fontSize:"md",children:["Customizing your campus experience based on your major.",e.jsx("br",{}),"This will only take a moment..."]})]})})}):e.jsx(Si,{maxW:"container.md",py:8,children:e.jsxs(ce,{bg:R,p:[6,8],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:P,borderRadius:"2xl",zIndex:-1},children:[e.jsxs(Ce,{align:"center",mb:6,gap:3,justify:"center",children:[e.jsx(Ar,{src:ji,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(ut,{size:"xl",bgGradient:P,bgClip:"text",children:"MU Connect"})]}),t>0&&t<z.length-1&&e.jsxs(ce,{mb:6,children:[e.jsx(io,{value:t/(z.length-2)*100,size:"sm",colorScheme:"blue",borderRadius:"full"}),e.jsxs(Ce,{justify:"space-between",mt:2,children:[e.jsxs(G,{fontSize:"sm",color:"gray.500",children:["Step ",t," of ",z.length-2]}),e.jsx(G,{fontSize:"sm",color:"gray.500",children:z[t].title})]})]}),e.jsxs(ce,{minH:"320px",display:"flex",flexDirection:"column",justifyContent:"center",children:[t===0&&e.jsx(Ps,{in:t===0,offsetY:"20px",children:e.jsxs(et,{spacing:6,textAlign:"center",py:4,children:[e.jsx(ut,{bgGradient:P,bgClip:"text",size:"xl",children:"Welcome to MU Connect"}),e.jsx(G,{fontSize:"lg",color:A,children:"Let's set up your personalized academic experience."}),e.jsx(G,{color:"gray.500",children:"We'll ask you a few questions to customize your campus experience and show you resources relevant to your academic interests."}),e.jsx(Te,{colorScheme:"blue",size:"lg",rightIcon:e.jsx(ea,{}),onClick:y,bgGradient:P,_hover:{bgGradient:j},mt:4,children:"Get Started"})]})}),t===1&&e.jsx(Ps,{in:t===1,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"What's your name?"}),e.jsxs(pr,{templateColumns:["1fr","1fr 1fr"],gap:6,width:"100%",children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{color:"gray.600",children:"First Name"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:na,color:"blue.500"})}),e.jsx(Rt,{name:"first_name",placeholder:"John",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.first_name,onChange:se,onKeyDown:Y})]})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{color:"gray.600",children:"Last Name"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:na,color:"blue.500"})}),e.jsx(Rt,{name:"last_name",placeholder:"Doe",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.last_name,onChange:se,onKeyDown:Y})]})]})]})]})}),t===2&&e.jsx(Ps,{in:t===2,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"Create a username"}),e.jsxs(ft,{isRequired:!0,width:"100%",children:[e.jsx(pt,{color:"gray.600",children:"Username"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:na,color:"blue.500"})}),e.jsx(Rt,{name:"username",placeholder:"@johndoe",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.username,onChange:se,onKeyDown:Y,_placeholder:{color:"gray.400"}})]}),e.jsx(G,{fontSize:"sm",color:"gray.500",mt:2,children:"This will be your unique identifier on MU Connect"})]})]})}),t===3&&e.jsx(Ps,{in:t===3,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"What's your email address?"}),e.jsxs(ft,{isRequired:!0,width:"100%",isInvalid:!!O.email,children:[e.jsx(pt,{color:"gray.600",children:"Email"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Vu,color:"blue.500"})}),e.jsx(Rt,{type:"email",name:"email",placeholder:"id@mu.edu.lb",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.email,onChange:se,onKeyDown:Y,_placeholder:{color:"gray.400"}})]}),O.email&&e.jsx(G,{color:"red.500",fontSize:"sm",mt:1,children:O.email}),e.jsx(G,{fontSize:"sm",color:"gray.500",mt:2,children:"We'll use this to verify your account"})]})]})}),t===4&&e.jsx(Ps,{in:t===4,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"Create a secure password"}),e.jsxs(pr,{templateColumns:["1fr","1fr 1fr"],gap:6,width:"100%",children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{color:"gray.600",children:"Password"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Su,color:"blue.500"})}),e.jsx(Rt,{type:"password",name:"password",placeholder:"••••••••",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.password,onChange:se,onKeyDown:Y,_placeholder:{color:"gray.400"}})]})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{color:"gray.600",children:"Confirm Password"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Su,color:"blue.500"})}),e.jsx(Rt,{type:"password",name:"password_confirmation",placeholder:"••••••••",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.password_confirmation,onChange:se,onKeyDown:Y,_placeholder:{color:"gray.400"}})]})]})]})]})}),t===5&&e.jsx(Ps,{in:t===5,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"What faculty are you in?"}),e.jsxs(ft,{isRequired:!0,width:"100%",isInvalid:!!O.faculty_id,children:[e.jsx(pt,{color:"gray.600",children:"Select your faculty"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:zs,color:"blue.500"})}),e.jsx(Ti,{name:"faculty_id",placeholder:u?"Loading...":"Choose a faculty",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.faculty_id,onChange:re,pl:10,isDisabled:u,_placeholder:{color:"gray.400"},children:o.map(de=>e.jsx("option",{value:de.id,children:de.name},de.id))})]}),b&&e.jsx(G,{color:"red.500",fontSize:"sm",mt:1,children:b}),O.faculty_id&&e.jsx(G,{color:"red.500",fontSize:"sm",mt:1,children:O.faculty_id}),e.jsx(G,{fontSize:"sm",color:"gray.500",mt:2,children:"This helps us show you relevant resources"})]})]})}),t===6&&e.jsx(Ps,{in:t===6,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"What's your major?"}),e.jsxs(ft,{isRequired:!0,width:"100%",isInvalid:!!O.major_id,children:[e.jsx(pt,{color:"gray.600",children:"Select your major"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Xi,color:"blue.500"})}),e.jsx(Ti,{name:"major_id",placeholder:p?"Loading...":n.faculty_id?"Choose a major":"Choose a faculty first",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.major_id,onChange:v,pl:10,isDisabled:!n.faculty_id||p,_placeholder:{color:"gray.400"},children:a.map(de=>e.jsx("option",{value:de.id,children:de.name},de.id))})]}),_&&e.jsx(G,{color:"red.500",fontSize:"sm",mt:1,children:_}),O.major_id&&e.jsx(G,{color:"red.500",fontSize:"sm",mt:1,children:O.major_id}),e.jsx(G,{fontSize:"sm",color:"gray.500",mt:2,children:"We'll personalize your experience based on your major"})]})]})}),t===7&&e.jsx(Ps,{in:t===7,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:6,textAlign:"center",children:[e.jsx(Cc,{size:"80px",bg:"green.100",color:"green.500",children:e.jsx(ct,{as:zi,boxSize:"40px"})}),e.jsx(ut,{fontSize:"2xl",color:A,children:"Ready to create your account"}),e.jsx(ce,{borderWidth:"1px",borderColor:E,borderRadius:"lg",p:6,w:"full",bg:"white",boxShadow:"lg",children:e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)"},gap:6,w:"100%",children:[e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(G,{fontSize:"sm",color:"gray.500",children:"First Name"}),e.jsx(G,{fontWeight:"bold",fontSize:"lg",children:n.first_name})]}),e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(G,{fontSize:"sm",color:"gray.500",children:"Last Name"}),e.jsx(G,{fontWeight:"bold",fontSize:"lg",children:n.last_name})]}),e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(G,{fontSize:"sm",color:"gray.500",children:"Username"}),e.jsx(G,{fontWeight:"bold",fontSize:"lg",children:n.username})]}),e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(G,{fontSize:"sm",color:"gray.500",children:"Email"}),e.jsx(G,{fontWeight:"bold",fontSize:"lg",children:n.email})]}),e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(G,{fontSize:"sm",color:"gray.500",children:"Faculty"}),e.jsx(G,{fontWeight:"bold",fontSize:"lg",children:((Q=o.find(de=>de.id===parseInt(n.faculty_id)))==null?void 0:Q.name)||"N/A"})]}),e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(G,{fontSize:"sm",color:"gray.500",children:"Major"}),e.jsx(G,{fontWeight:"bold",fontSize:"lg",children:((ie=a.find(de=>de.id===parseInt(n.major_id)))==null?void 0:ie.name)||"N/A"})]})]})}),e.jsxs(yr,{spacing:4,children:[e.jsx(Te,{w:"full",colorScheme:"blue",bgGradient:P,_hover:{bgGradient:j},rightIcon:e.jsx(ea,{}),onClick:W,isLoading:T,loadingText:"Personalizing your feed...",children:"Confirm & Create Account"}),e.jsx(Te,{variant:"outline",colorScheme:"blue",size:"md",leftIcon:e.jsx(Wn,{}),onClick:C,children:"Go Back"})]})]})})]}),t>0&&t<7&&e.jsxs(Ce,{justify:"space-between",mt:6,children:[e.jsx(Te,{leftIcon:e.jsx(Wn,{}),onClick:C,variant:"outline",colorScheme:"blue",color:"blue.600",children:"Back"}),e.jsx(Te,{rightIcon:e.jsx(ea,{}),onClick:y,colorScheme:"blue",bgGradient:P,_hover:{bgGradient:j},children:"Next"})]}),t!==7&&e.jsxs(ce,{mt:8,textAlign:"center",children:[e.jsxs(Ce,{align:"center",gap:4,justify:"center",mb:2,children:[e.jsx(sn,{flex:"1",maxW:"100px"}),e.jsx(G,{color:"gray.500",fontSize:"sm",fontWeight:"medium",children:"OR"}),e.jsx(sn,{flex:"1",maxW:"100px"})]}),e.jsxs(G,{color:"gray.500",fontWeight:"medium",children:["Already part of MU Connect?"," ",e.jsx(Sc,{as:Ji,to:"/login",color:"blue.500",fontWeight:"600",_hover:{textDecoration:"underline"},children:"Sign in here"})]})]})]})})})},rx=()=>{const[t,r]=q.useState("processing"),n=Xr(),i=dl(),o=qr(),{handleGoogleAuthSuccess:s}=hi();return q.useEffect(()=>{(async()=>{const c=new URLSearchParams(i.search);if(c.get("error")){o({title:"Authentication Error",description:c.get("error")||"Failed to authenticate with Google",status:"error",duration:5e3,isClosable:!0}),r("error"),setTimeout(()=>n("/login"),2e3);return}try{const u=c.get("data");console.log("Raw data from URL:",u);const h=JSON.parse(u||"{}");if(console.log("Parsed response data:",h),h.is_new_user)r("new-user"),V2(h.temp_token),setTimeout(()=>{n("/complete-google-registration",{state:{email:h.email,name:h.name,temp_token:h.temp_token}})},1e3);else if(r("success"),console.log("Processing existing user login:",h),h.user){console.log("Token from response:",h.token);const p=h.token;p?(console.log("Sanctum token received from backend"),localStorage.setItem("authToken",p)):(console.error("No Sanctum token found in response - authentication may fail"),console.log("Response structure:",Object.keys(h))),h.user.faculty&&(localStorage.setItem("userFaculty",h.user.faculty.name),localStorage.setItem("faculty_id",h.user.faculty.id)),h.user.major&&(localStorage.setItem("userMajor",h.user.major.name),localStorage.setItem("major_id",h.user.major.id)),h.user.role_names&&h.user.role_names.length>0?localStorage.setItem("role",h.user.role_names[0]):h.user.roles&&h.user.roles.length>0&&localStorage.setItem("role",h.user.roles[0]);try{console.log("Updating auth context with user data"),await s(h.user),o({title:"Login Successful",description:h.message||"You have been logged in with Google",status:"success",duration:3e3,isClosable:!0}),console.log("Authentication successful, redirecting to dashboard"),setTimeout(()=>{const x=localStorage.getItem("authToken");console.log("Before redirect - Auth token exists:",!!x),n("/dashboard")},1500)}catch(x){console.error("Error updating auth context:",x),o({title:"Authentication Error",description:"Error setting up your user profile",status:"error",duration:5e3}),setTimeout(()=>n("/login"),2e3)}}else throw new Error("User data not found in response")}catch(u){console.error("Error processing Google callback:",u),r("error"),o({title:"Authentication Error",description:"Failed to process Google authentication",status:"error",duration:5e3,isClosable:!0}),setTimeout(()=>n("/login"),2e3)}})()},[i.search,n,o,s]),e.jsx(vn,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",children:e.jsxs(et,{spacing:6,children:[e.jsx(Ar,{src:ji,boxSize:"80px",alt:"Maaref Logo"}),e.jsxs(ut,{size:"xl",bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:[t==="processing"&&"Processing Authentication",t==="success"&&"Authentication Successful",t==="new-user"&&"Almost There!",t==="error"&&"Authentication Error"]}),e.jsxs(ce,{children:[t==="processing"&&e.jsx(nn,{size:"xl",color:"blue.500"}),t==="success"&&e.jsx(G,{children:"You will be redirected to the dashboard momentarily..."}),t==="new-user"&&e.jsx(G,{children:"Redirecting to complete your registration..."}),t==="error"&&e.jsx(G,{children:"Redirecting back to login page..."})]})]})})},nx=()=>{const[t,r]=q.useState({username:"",faculty_id:"",major_id:"",temp_token:"",email:"",name:""}),[n,i]=q.useState({}),[o,s]=q.useState([]),[a,c]=q.useState([]),[u,h]=q.useState(!0),[p,x]=q.useState(!1),[b,m]=q.useState(!1),[_,w]=q.useState(!1),[O,k]=q.useState(!1),[T,H]=q.useState(null),[Z,N]=q.useState(null),D=qr(),B=Xr(),V=dl(),{completeGoogleSignUp:R,user:P}=hi();q.useEffect(()=>{var se;if((se=V.state)!=null&&se.temp_token)r(re=>({...re,temp_token:V.state.temp_token,email:V.state.email||"",name:V.state.name||""}));else{const re=G2();if(!re){D({title:"Session expired",description:"Your registration session has expired or is invalid. Please start over.",status:"error",duration:5e3}),w(!0),setTimeout(()=>B("/login"),2e3);return}r(v=>({...v,temp_token:re}))}const E=1800*1e3,z=setInterval(()=>{const re=Math.max(0,E-(Date.now()-new Date().getTime()));if(re<=0){clearInterval(z),w(!0),D({title:"Session expired",description:"Your registration token has expired. Please start over.",status:"warning",duration:5e3}),B("/login");return}N(Math.floor(re/1e3/60))},6e4);return()=>clearInterval(z)},[V.state,B,D]),q.useEffect(()=>{h(!0),Vp().then(E=>{s(E),h(!1)}).catch(()=>{h(!1),D({title:"Failed to load faculties",description:"Please try refreshing the page.",status:"error",duration:5e3})})},[D]),q.useEffect(()=>{t.faculty_id?(x(!0),Yp(t.faculty_id).then(E=>{c(E),x(!1)}).catch(()=>{x(!1),D({title:"Failed to load majors",description:"Please try selecting a different faculty.",status:"error",duration:5e3})})):c([])},[t.faculty_id,D]),q.useEffect(()=>{P&&B("/dashboard",{replace:!0})},[P,B]);const j=E=>{const{name:z,value:se}=E.target;r(re=>({...re,[z]:se})),n[z]&&i(re=>({...re,[z]:void 0}))},A=async E=>{var z,se,re,v;E.preventDefault(),k(!0),H(null);try{if(!t.username)throw new Error("Username is required");if(!t.faculty_id)throw new Error("Faculty selection is required");if(!t.major_id)throw new Error("Major selection is required");const ne=((z=V.state)==null?void 0:z.temp_token)||localStorage.getItem("googleTempToken");if(!ne)throw new Error("Registration token not found. Please try signing in with Google again.");const M=await R({temp_token:ne,username:t.username,faculty_id:parseInt(t.faculty_id),major_id:parseInt(t.major_id)});console.log("Registration completed, response:",M),M&&M.token?(console.log("Sanctum token received from backend after registration"),localStorage.setItem("authToken",M.token)):console.warn("No Sanctum token found in registration response"),D({title:"Registration Complete!",description:"Your account has been created successfully.",status:"success",duration:5e3,isClosable:!0}),localStorage.removeItem("googleTempToken"),localStorage.removeItem("googleTokenExpiry"),B("/dashboard")}catch(ne){console.error("Registration error:",ne);const M=((re=(se=ne.response)==null?void 0:se.data)==null?void 0:re.message)||ne.message||"Failed to complete registration. Please try again.";H(M),(M.includes("expired")||M.includes("invalid")||((v=ne.response)==null?void 0:v.status)===400)&&w(!0)}finally{k(!1)}};return _?e.jsx(vn,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",children:e.jsxs(et,{spacing:6,children:[e.jsx(Ar,{src:ji,boxSize:"80px",alt:"Maaref Logo"}),e.jsx(ut,{size:"xl",color:"red.500",children:"Session Expired"}),e.jsx(G,{children:"Redirecting to login page..."}),e.jsx(nn,{size:"md",color:"blue.500"})]})}):e.jsx(Ce,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",align:"center",justify:"center",children:e.jsx(Si,{maxW:"container.md",px:[4,8],children:e.jsxs(ce,{bg:"white",p:[6,12],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:"linear(to-r, blue.500, teal.400)",borderRadius:"2xl",zIndex:-1},children:[e.jsxs(Ce,{align:"center",mb:8,gap:3,justify:"center",children:[e.jsx(Ar,{src:ji,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(ut,{size:"xl",bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"Complete Your Registration"})]}),Z!==null&&e.jsxs(so,{status:"info",mb:6,borderRadius:"md",children:[e.jsx(oo,{}),"Please complete your registration within ",Z," minutes."]}),e.jsx("form",{onSubmit:A,children:e.jsxs(yr,{spacing:6,children:[e.jsxs(ft,{isReadOnly:!0,children:[e.jsx(pt,{color:"gray.600",children:"Email"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Vu,color:"blue.500","aria-label":"Email icon"})}),e.jsx(Rt,{name:"email",value:t.email,placeholder:"your.email@mu.edu.lb",size:"lg",bg:"gray.50",focusBorderColor:"blue.500",color:"gray.600"})]})]}),e.jsxs(ft,{isRequired:!0,isInvalid:!!n.username,children:[e.jsx(pt,{color:"gray.600",children:"Username"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:na,color:"blue.500","aria-label":"Username icon"})}),e.jsx(Rt,{name:"username",value:t.username,onChange:j,placeholder:"Choose a unique username",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800"})]}),n.username&&e.jsx(Bn,{children:n.username})]}),e.jsxs(ft,{isRequired:!0,isInvalid:!!n.faculty_id,children:[e.jsx(pt,{color:"gray.600",children:"Faculty"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:zs,color:"blue.500","aria-label":"Faculty icon"})}),e.jsx(Ti,{name:"faculty_id",value:t.faculty_id,onChange:j,placeholder:u?"Loading faculties...":"Select your faculty",size:"lg",focusBorderColor:"blue.500",color:"gray.800",isDisabled:u,children:o.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))})]}),n.faculty_id&&e.jsx(Bn,{children:n.faculty_id})]}),e.jsxs(ft,{isRequired:!0,isInvalid:!!n.major_id,children:[e.jsx(pt,{color:"gray.600",children:"Major"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Xi,color:"blue.500","aria-label":"Major icon"})}),e.jsx(Ti,{name:"major_id",value:t.major_id,onChange:j,placeholder:t.faculty_id?p?"Loading majors...":"Select your major":"Select a faculty first",size:"lg",focusBorderColor:"blue.500",color:"gray.800",isDisabled:!t.faculty_id||p,children:a.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))})]}),n.major_id&&e.jsx(Bn,{children:n.major_id})]}),T&&e.jsxs(so,{status:"error",borderRadius:"md",children:[e.jsx(oo,{}),T]}),e.jsx(Te,{type:"submit",colorScheme:"blue",size:"lg",height:"60px",fontSize:"lg",rightIcon:e.jsx(ct,{as:ea,"aria-label":"Complete"}),isLoading:O,loadingText:"Submitting",bgGradient:"linear(to-r, blue.500, teal.400)",_hover:{bgGradient:"linear(to-r, blue.600, teal.500)"},_active:{transform:"scale(0.98)"},children:"Complete Registration"})]})})]})})})},ix=()=>{var T,H,Z;const t=oe("white","gray.800"),r=oe("gray.800","whiteAlpha.900"),n=oe("gray.600","gray.400"),i=oe("gray.200","gray.700"),o=oe("blue.600","blue.400"),s=oe("yellow.400","yellow.500"),[a,c]=q.useState(null),[u,h]=q.useState(!0),[p,x]=q.useState(null);q.useEffect(()=>{(async()=>{try{const D=await yt.get("/overview");c(D.data)}catch(D){x(D.message||"Failed to fetch dashboard data."),console.error(D)}finally{h(!1)}})()},[]);const b=()=>{const N=new Date().getHours();return N<12?"Good morning":N<18?"Good afternoon":"Good evening"};if(u)return e.jsx(Ce,{justify:"center",align:"center",minH:"50vh",children:e.jsx(nn,{size:"xl"})});if(p)return e.jsxs(so,{status:"error",borderRadius:"md",children:[e.jsx(oo,{}),e.jsx(G,{children:"There was an error fetching your dashboard data. Please try again later."})]});if(!a)return null;const{user:m,overview:_,general:w}=a,O={events:{count:_.events.registered,label:"Registered Events",link:"/events",icon:An},clubs:{count:_.clubs.total,label:"Active Clubs",link:"/clubs",icon:ju},resources:{count:w.latest_resources.length,label:"Latest Resources",link:"/resources",icon:zs},studyGroups:{count:_.study_groups.total,label:"Study Groups",link:"/study-groups",icon:Un}},k=[{title:"Resources",description:"Access study materials, guides, and educational resources.",icon:zs,link:"/resources",stat:`${_.resources.saved} saved`,preview:w.latest_resources.length>0?`Latest: ${((T=w.latest_resources[0])==null?void 0:T.title)||"Untitled"}`:"No new resources"},{title:"Events",description:"See upcoming campus events and register.",icon:An,link:"/events",stat:`${_.events.upcoming} upcoming`,preview:w.upcoming_events.length>0?`Next: ${((H=w.upcoming_events[0])==null?void 0:H.title)||"Untitled"}`:"No upcoming events"},{title:"Clubs",description:"Discover, join, and interact with campus clubs.",icon:ju,link:"/clubs",stat:`${_.clubs.total} active clubs`,preview:"Check out the latest club activities and news."},{title:"Study Groups",description:"Collaborate with peers and excel in your courses.",icon:Un,link:"/study-groups",stat:`${_.study_groups.leading} led by you`,preview:"Find or create a study group for your classes."}];return e.jsxs(ce,{children:[e.jsx(hr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(Zt,{mb:6,p:6,borderRadius:"xl",borderWidth:"1px",borderColor:i,bg:t,boxShadow:"md",children:e.jsx(Ce,{direction:{base:"column",md:"row"},alignItems:"center",justifyContent:"space-between",children:e.jsxs(at,{spacing:4,mb:{base:4,md:0},children:[e.jsx(zr,{size:"lg",src:m.avatar,name:`${m.first_name||""} ${m.last_name||""}`.trim()||"User"}),e.jsxs(et,{align:"start",spacing:1,children:[e.jsxs(ut,{size:"md",color:r,children:[b(),", ",m.first_name,"!"]}),e.jsx(G,{fontSize:"sm",color:n,children:((Z=m.major)==null?void 0:Z.name)||"Major not specified"})]})]})})})}),e.jsxs(ce,{mb:6,children:[e.jsx(ut,{size:"md",mb:4,color:o,children:"My Overview"}),e.jsx(di,{columns:{base:2,md:4},spacing:4,children:Object.values(O).map(N=>e.jsx(hr.div,{whileHover:{y:-3,scale:1.03},transition:{duration:.15},children:e.jsx(Zt,{bg:t,borderRadius:"lg",borderWidth:"1px",borderColor:i,p:4,variant:"outline",as:Ji,to:N.link,_hover:{textDecoration:"none",shadow:"md",bg:`${s}10`},children:e.jsx(wi,{label:N.label,placement:"top",hasArrow:!0,children:e.jsxs(at,{spacing:3,align:"center",children:[e.jsx(ct,{as:N.icon,boxSize:6,color:s}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(G,{fontSize:"xl",fontWeight:"bold",color:r,children:N.count}),e.jsx(G,{fontSize:"xs",color:n,whiteSpace:"nowrap",children:N.label})]})]})})})},N.label))})]}),e.jsxs(ce,{mb:6,children:[e.jsx(ut,{size:"md",mb:4,color:o,children:"Explore Sections"}),e.jsx(di,{columns:{base:1,md:2},spacing:6,children:k.map(N=>e.jsx(Ji,{to:N.link,style:{textDecoration:"none"},children:e.jsx(hr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:{scale:1.02,y:-4},children:e.jsx(Zt,{bg:t,borderColor:i,borderWidth:"1px",borderRadius:"xl",boxShadow:"sm",p:6,_hover:{bg:`${s}10`},transition:"all 0.2s ease",h:"100%",children:e.jsxs(Ce,{direction:"column",h:"100%",children:[e.jsxs(Ce,{align:"center",mb:3,gap:3,children:[e.jsx(ce,{fontSize:"2xl",as:N.icon,color:s}),e.jsx(ut,{size:"md",color:o,children:N.title})]}),e.jsx(G,{color:n,mb:4,flexGrow:1,children:N.description}),e.jsx(G,{fontWeight:"bold",color:s,mb:2,children:N.stat}),e.jsxs(at,{mt:"auto",pt:3,borderTopWidth:"1px",borderColor:i,spacing:2,children:[e.jsx(G,{fontSize:"xs",color:n,noOfLines:1,children:N.preview}),e.jsx(ct,{as:ea,boxSize:4,color:n,ml:"auto"})]})]})})})},N.title))})]})]})},Xp=fs,ac=async(t={})=>{const r=await yt.get("/events",{params:t});return r.data&&Array.isArray(r.data.data)&&(r.data.data=r.data.data.map(n=>({...n,media:n.image_path?`${Xp}/api/storage/${n.image_path.replace(/^events[\\\/]/,"events/")}`:void 0}))),r.data},sx=async t=>(await yt.post(`/events/${t}/register`)).data,ox=async t=>(await yt.post(`/events/${t}/unregister`)).data,ax=async(t={})=>{const r=await yt.get("/events/my-events",{params:t});return r.data&&Array.isArray(r.data.data)&&(r.data.data=r.data.data.map(n=>({...n,media:n.image_path?`${Xp}/api/storage/${n.image_path.replace(/^events[\\\/]/,"events/")}`:void 0}))),r.data},lx=async t=>{var r;try{let n=t,i={};if(!(t instanceof FormData)){const s=new FormData;Object.entries(t||{}).forEach(([a,c])=>{c!=null&&(Array.isArray(c)?c.forEach(u=>s.append(`${a}[]`,u)):s.append(a,c))}),n=s}return i["Content-Type"]="multipart/form-data",(await yt.post("/events",n,{headers:i})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to create event"}}},cx=async(t,r)=>{var n;try{let i=r,o={};if(!(r instanceof FormData)){const a=new FormData;return Object.entries(r||{}).forEach(([u,h])=>{h!=null&&(Array.isArray(h)?h.forEach(p=>a.append(`${u}[]`,p)):a.append(u,h))}),a.append("_method","PUT"),i=a,o["Content-Type"]="multipart/form-data",(await yt.post(`/events/${t}`,i,{headers:o})).data}return o["Content-Type"]="multipart/form-data",(await yt.put(`/events/${t}`,i,{headers:o})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to update event"}}},dx=async t=>(await yt.delete(`/events/${t}`)).data,Kp=async t=>(await yt.post(`/events/${t}/toggleSave`)).data,ux=hr(Zt),hx=()=>{const t=localStorage.getItem("role"),r=t==="admin"||t==="moderator",n=Xr(),i=qr(),o=oe("gray.50","gray.900"),s=oe("white","gray.800"),a=oe("gray.800","white"),c=oe("gray.500","gray.400"),u=oe("purple.500","purple.300"),h=oe("gray.200","gray.700"),p=ca({base:!0,md:!1}),{isOpen:x,onOpen:b,onClose:m}=Br(),[_,w]=q.useState(null),{isOpen:O,onOpen:k,onClose:T}=Br(),[H,Z]=q.useState(!1),[N,D]=q.useState(null),[B,V]=q.useState(""),[R,P]=q.useState("All"),[j,A]=q.useState([]),[E,z]=q.useState(!1),[se,re]=q.useState(!1),[v,ne]=q.useState(!1),[M,y]=q.useState([]),[Y,C]=q.useState([]),[W,L]=q.useState(!0),[$,Q]=q.useState(null),[ie,de]=q.useState(1),[le,be]=q.useState(1);q.useEffect(()=>{(async()=>{try{const Pe=((await ax()).data||[]).map(De=>De.id);A(Pe)}catch{}})()},[]),q.useEffect(()=>{(async()=>{L(!0),Q(null);try{const ve={page:ie};B&&(ve.search=B),R&&R!=="All"&&(R==="Today"?ve.time_filter="today":R==="This Week"?ve.time_filter="this_week":R==="This Month"&&(ve.time_filter="this_month"));const Pe=await ac(ve),De=(Pe.data||[]).map(Se=>({id:Se.id,title:Se.title,date:Se.event_datetime,location:Se.location,organizer:Se.organizer,description:Se.description,attendees:Se.attendees_count||0,media:Se.media,mediaType:Se.media?Se.media.endsWith(".mp4")?"video":"image":void 0,speakers:Se.speaker_names?Se.speaker_names.split(",").map(Ie=>({name:Ie.trim(),title:""})):[]}));C(De),de(Pe.current_page||1),be(Pe.last_page||1)}catch(ve){Q(ve.message||"Failed to fetch events")}finally{L(!1)}})()},[ie,B,R]);const fe=Y,Fe=async je=>{if(j.includes(je)){re(!0);try{await ox(je),A(ve=>ve.filter(Pe=>Pe!==je)),i({title:"Registration canceled",description:"You've been removed from the event",status:"info",duration:3e3,isClosable:!0})}catch(ve){i({title:"Failed to unregister",description:ve.message||"Could not unregister from event.",status:"error",duration:3e3,isClosable:!0})}finally{re(!1),m()}}else{z(!0);try{await sx(je),A(ve=>[...ve,je]),i({title:"Registration successful!",description:"You're now registered for this event",status:"success",duration:3e3,isClosable:!0})}catch(ve){i({title:"Failed to register",description:ve.message||"Could not register for event.",status:"error",duration:3e3,isClosable:!0})}finally{z(!1),m()}}},Oe=async je=>{try{await Kp(je),y(ve=>{const Pe=ve.includes(je),De=Pe?ve.filter(Se=>Se!==je):[...ve,je];return i({title:Pe?"Event unsaved":"Event saved",description:Pe?"Removed from your bookmarks":"Added to your bookmarks",status:"success",duration:2e3,isClosable:!0}),De})}catch(ve){i({title:"Failed to toggle save",description:(ve==null?void 0:ve.message)||"Could not update bookmark.",status:"error",duration:2e3,isClosable:!0})}},Ue=async je=>{ne(!0);try{await lx(je);const Pe=((await ac()).data||[]).map(De=>({id:De.id,title:De.title,date:De.event_datetime,location:De.location,organizer:De.organizer,description:De.description,attendees:De.attendees_count||0,maxAttendees:De.max_attendees||0,media:De.media,mediaType:De.image_path?De.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:De.speaker_names?De.speaker_names.split(",").map(Se=>({name:Se.trim(),title:""})):[]}));C(Pe),i({title:"Event created!",description:"Your event has been successfully created",status:"success",duration:3e3,isClosable:!0})}catch(ve){i({title:"Failed to create event",description:ve.message||"Could not create event.",status:"error",duration:3e3,isClosable:!0})}finally{ne(!1)}},ye=je=>{D(je),Z(!0)},ee=()=>{Z(!1),D(null)},_e=async(je,ve)=>{try{await cx(je,ve);const De=((await ac()).data||[]).map(Se=>({id:Se.id,title:Se.title,date:Se.event_datetime,location:Se.location,organizer:Se.organizer,description:Se.description,attendees:Se.attendees_count||0,maxAttendees:Se.max_attendees||0,media:Se.media,mediaType:Se.image_path?Se.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:Se.speaker_names?Se.speaker_names.split(",").map(Ie=>({name:Ie.trim(),title:""})):[]}));C(De),i({title:"Event updated!",description:"The event has been updated.",status:"success",duration:2e3,isClosable:!0}),ee()}catch(Pe){i({title:"Failed to update event",description:(Pe==null?void 0:Pe.message)||"Could not update event.",status:"error",duration:2e3,isClosable:!0})}},Me=async je=>{try{await dx(je);const Pe=((await ac()).data||[]).map(De=>({id:De.id,title:De.title,date:De.event_datetime,location:De.location,organizer:De.organizer,description:De.description,attendees:De.attendees_count||0,maxAttendees:De.max_attendees||0,media:De.media,mediaType:De.image_path?De.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:De.speaker_names?De.speaker_names.split(",").map(Se=>({name:Se.trim(),title:""})):[]}));C(Pe),i({title:"Event deleted!",description:"The event has been removed.",status:"success",duration:2e3,isClosable:!0})}catch(ve){i({title:"Failed to delete event",description:(ve==null?void 0:ve.message)||"Could not delete event.",status:"error",duration:2e3,isClosable:!0})}},Le=je=>{w(je),b()},ue=()=>{n(-1)},Ye=({event:je})=>e.jsx(ux,{onClick:()=>Le(je),cursor:"pointer",bg:s,position:"relative",whileHover:{y:-5},transition:{duration:.2},boxShadow:"md",borderRadius:"xl",overflow:"hidden",borderWidth:"1px",borderColor:h,children:e.jsx(un,{p:0,children:e.jsxs(yr,{spacing:0,children:[e.jsxs(ce,{position:"relative",height:"180px",overflow:"hidden",children:[e.jsx(Ar,{src:je.media,alt:je.title,objectFit:"cover",width:"100%",height:"100%",filter:"brightness(0.9)"}),e.jsxs(ce,{position:"absolute",top:3,left:3,bg:"rgba(0,0,0,0.7)",py:1,px:2,borderRadius:"md",color:"white",textAlign:"center",children:[e.jsx(G,{fontSize:"xs",fontWeight:"bold",children:new Date(je.date).toLocaleDateString("en-US",{month:"short"}).toUpperCase()}),e.jsx(G,{fontSize:"xl",fontWeight:"bold",children:new Date(je.date).getDate()})]}),e.jsx(Bt,{"aria-label":M.includes(je.id)?"Unsave event":"Bookmark event",icon:e.jsx(Xi,{fill:M.includes(je.id)?"currentColor":"none"}),position:"absolute",top:3,right:12,colorScheme:"purple",variant:"ghost",size:"lg",borderRadius:"full",onClick:ve=>{ve.stopPropagation(),Oe(je.id)}}),e.jsxs(wn,{placement:"bottom-end",children:[e.jsx(jn,{as:Bt,"aria-label":"Event options",icon:e.jsx(Uc,{}),position:"absolute",top:3,right:3,size:"lg",variant:"ghost",borderRadius:"full",zIndex:1,onClick:ve=>ve.stopPropagation()}),e.jsxs(Sn,{minW:"140px",zIndex:2,children:[e.jsx(er,{icon:e.jsx(fa,{}),onClick:ve=>{ve.stopPropagation();const Pe=`${window.location.origin}/events/${je.id}`;navigator.clipboard.writeText(Pe),i({title:"Link copied!",description:"Event link copied to clipboard.",status:"info",duration:2e3,isClosable:!0})},children:"Share"}),(localStorage.getItem("role")==="admin"||localStorage.getItem("role")==="moderator")&&e.jsxs(e.Fragment,{children:[e.jsx(er,{icon:e.jsx(ao,{}),onClick:ve=>{ve.stopPropagation(),ye(je)},children:"Edit"}),e.jsx(er,{icon:e.jsx(ul,{}),color:"red.500",onClick:async ve=>{ve.stopPropagation(),await Me(je.id)},children:"Delete"})]})]})]})]}),e.jsxs(yr,{p:4,spacing:3,children:[e.jsx(ut,{size:"md",color:a,noOfLines:1,children:je.title}),e.jsxs(Ce,{direction:"column",gap:2,children:[e.jsxs(Ce,{align:"center",gap:2,children:[e.jsx(ct,{as:Ko,color:u,boxSize:4}),e.jsx(G,{fontSize:"sm",color:c,noOfLines:1,children:je.location})]}),e.jsxs(Ce,{align:"center",gap:2,children:[e.jsx(ct,{as:An,color:u,boxSize:4}),e.jsx(G,{fontSize:"sm",color:c,children:new Date(je.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]}),j.includes(je.id)&&e.jsx(Pr,{colorScheme:"green",alignSelf:"flex-start",px:2,py:1,borderRadius:"full",children:e.jsxs(Ce,{align:"center",gap:1,children:[e.jsx(ct,{as:zi}),e.jsx(G,{children:"Registered"})]})})]})]})})},je.id),Ze=q.memo(({isOpen:je,onClose:ve,event:Pe,onEventUpdate:De})=>{var nt,tt;const[Se,Ie]=q.useState({title:(Pe==null?void 0:Pe.title)||"",date:Pe?(nt=Pe.date)==null?void 0:nt.split("T")[0]:"",time:Pe&&Pe.date?new Date(Pe.date).toISOString().slice(11,16):"",location:(Pe==null?void 0:Pe.location)||"",organizer:(Pe==null?void 0:Pe.organizer)||"",description:(Pe==null?void 0:Pe.description)||"",speakerNames:((tt=Pe==null?void 0:Pe.speakers)==null?void 0:tt.map(gt=>gt.name).join(", "))||"",mediaUrl:(Pe==null?void 0:Pe.media)||"",imageFile:null}),[ze,it]=q.useState((Pe==null?void 0:Pe.media)||null),Ge=q.useRef(null),[ot,Nt]=q.useState({}),At=oe("white","gray.800"),ht=oe("gray.800","white"),bt=oe("gray.500","gray.400");q.useEffect(()=>{var gt,Ct;Pe&&(Ie({title:Pe.title||"",date:((gt=Pe.date)==null?void 0:gt.split("T")[0])||"",time:Pe.date?new Date(Pe.date).toISOString().slice(11,16):"",location:Pe.location||"",organizer:Pe.organizer||"",description:Pe.description||"",speakerNames:((Ct=Pe.speakers)==null?void 0:Ct.map(Ut=>Ut.name).join(", "))||"",mediaUrl:Pe.media||"",imageFile:null}),it(Pe.media||null))},[Pe]);const Ne=gt=>{const{name:Ct,value:Ut}=gt.target;Ie(Ve=>({...Ve,[Ct]:Ut})),ot[Ct]&&Nt(Ve=>({...Ve,[Ct]:null}))},lt=gt=>{const Ct=gt.target.files[0];if(!Ct)return;Ie(Ve=>({...Ve,imageFile:Ct}));const Ut=new FileReader;Ut.onload=()=>it(Ut.result),Ut.readAsDataURL(Ct)},zt=()=>Ge.current.click(),Ae=()=>{Nt({}),ve()},We=()=>{const gt={};if(Se.title.trim()||(gt.title="Title is required"),Se.date||(gt.date="Date is required"),Se.time||(gt.time="Time is required"),Se.location.trim()||(gt.location="Location is required"),Se.organizer.trim()||(gt.organizer="Organizer is required"),Se.description.trim()||(gt.description="Description is required"),Object.keys(gt).length>0){Nt(gt);return}const Ct={title:Se.title,event_datetime:`${Se.date} ${Se.time}:00`,location:Se.location,organizer:Se.organizer,description:Se.description,speaker_names:Se.speakerNames,image_path:Se.imageFile};De(Pe.id,Ct)};return e.jsxs(hn,{isOpen:je,onClose:Ae,size:"xl",children:[e.jsx(Fr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(fn,{bg:At,borderRadius:"xl",children:[e.jsx(Wr,{color:ht,children:"Edit Event"}),e.jsx(on,{}),e.jsx(Ir,{pb:6,children:e.jsxs(pr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:6,children:[e.jsxs(ft,{isRequired:!0,isInvalid:ot.title,children:[e.jsx(pt,{children:"Event Title"}),e.jsx(Rt,{name:"title",value:Se.title,onChange:Ne,placeholder:"Enter event title"}),ot.title&&e.jsx(Bn,{children:ot.title})]}),e.jsxs(ft,{isRequired:!0,isInvalid:ot.date,children:[e.jsx(pt,{children:"Date"}),e.jsx(Rt,{name:"date",type:"date",value:Se.date,onChange:Ne}),ot.date&&e.jsx(Bn,{children:ot.date})]}),e.jsxs(ft,{isRequired:!0,isInvalid:ot.time,children:[e.jsx(pt,{children:"Time"}),e.jsx(Rt,{name:"time",type:"time",value:Se.time,onChange:Ne}),ot.time&&e.jsx(Bn,{children:ot.time})]}),e.jsxs(ft,{isRequired:!0,isInvalid:ot.location,children:[e.jsx(pt,{children:"Location"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Ko,color:bt})}),e.jsx(Rt,{name:"location",value:Se.location,onChange:Ne,placeholder:"Event location"})]}),ot.location&&e.jsx(Bn,{children:ot.location})]}),e.jsxs(ft,{isRequired:!0,isInvalid:ot.organizer,children:[e.jsx(pt,{children:"Organizer"}),e.jsx(Rt,{name:"organizer",value:Se.organizer,onChange:Ne,placeholder:"Organizing department or group"}),ot.organizer&&e.jsx(Bn,{children:ot.organizer})]}),e.jsxs(ft,{gridColumn:{md:"span 2"},isRequired:!0,isInvalid:ot.description,children:[e.jsx(pt,{children:"Description"}),e.jsx(ti,{name:"description",value:Se.description,onChange:Ne,placeholder:"Provide details about your event",rows:5}),ot.description&&e.jsx(Bn,{children:ot.description})]}),e.jsxs(ft,{gridColumn:{md:"span 2"},children:[e.jsx(pt,{children:"Speaker Names"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Dh,color:bt})}),e.jsx(Rt,{name:"speakerNames",value:Se.speakerNames,onChange:Ne,placeholder:"Names separated by commas"})]}),e.jsx(ec,{children:"If applicable, add featured speakers"})]}),e.jsxs(ft,{gridColumn:{md:"span 2"},children:[e.jsx(pt,{children:"Event Image"}),e.jsxs(ce,{position:"relative",children:[ze?e.jsxs(ce,{position:"relative",onClick:zt,cursor:"pointer",borderRadius:"md",overflow:"hidden",mb:3,children:[e.jsx(Ar,{src:ze,alt:"Event preview",height:"200px",width:"100%",objectFit:"cover"}),e.jsx(ce,{position:"absolute",top:0,left:0,right:0,bottom:0,bg:"blackAlpha.400",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx(G,{color:"white",fontWeight:"bold",children:"Change Image"})})]}):e.jsx(Te,{leftIcon:e.jsx(rl,{}),onClick:zt,width:"100%",height:"200px",variant:"outline",mb:3,py:10,children:e.jsxs(et,{spacing:2,children:[e.jsx(G,{children:"Click to upload event image"}),e.jsx(G,{fontSize:"xs",color:bt,children:"JPEG, PNG or GIF, recommended size 1200×630px"})]})}),e.jsx(Rt,{type:"file",accept:"image/*",display:"none",ref:Ge,onChange:lt})]}),e.jsx(ec,{children:"A default image will be used if not provided"})]})]})}),e.jsxs(Jr,{children:[e.jsx(Te,{variant:"outline",mr:3,onClick:Ae,children:"Cancel"}),e.jsx(Te,{colorScheme:"purple",onClick:We,leftIcon:e.jsx(ao,{}),children:"Update Event"})]})]})]})}),mt=q.memo(({isOpen:je,onClose:ve,onEventCreate:Pe})=>{const[De,Se]=q.useState({title:"",date:"",time:"",location:"",organizer:"",description:"",speakerNames:"",mediaUrl:""}),[Ie,ze]=q.useState(null),it=q.useRef(null),[Ge,ot]=q.useState({}),Nt=oe("white","gray.800"),At=oe("gray.800","white"),ht=oe("gray.500","gray.400"),{user:bt}=hi(),Ne=tt=>{const{name:gt,value:Ct}=tt.target;Se(Ut=>({...Ut,[gt]:Ct})),Ge[gt]&&ot(Ut=>({...Ut,[gt]:null}))},lt=tt=>{const gt=tt.target.files[0];if(!gt)return;Se(Ut=>({...Ut,imageFile:gt}));const Ct=new FileReader;Ct.onload=()=>{ze(Ct.result),Se(Ut=>({...Ut,mediaUrl:Ct.result}))},Ct.readAsDataURL(gt)},zt=()=>{it.current.click()},Ae=()=>{Se({title:"",date:"",time:"",location:"",organizer:"",description:"",speakerNames:"",mediaUrl:""}),ze(null),ot({})},We=()=>{Ae(),ve()},nt=()=>{const tt={};if(De.title.trim()||(tt.title="Title is required"),De.date||(tt.date="Date is required"),De.time||(tt.time="Time is required"),De.location.trim()||(tt.location="Location is required"),De.organizer.trim()||(tt.organizer="Organizer is required"),De.description.trim()||(tt.description="Description is required"),Object.keys(tt).length>0){ot(tt);return}const gt={user_id:bt==null?void 0:bt.id,title:De.title,event_datetime:`${De.date} ${De.time}:00`,location:De.location,organizer:De.organizer,description:De.description,speaker_names:De.speakerNames,image_path:De.imageFile};Pe(gt),Ae(),ve()};return e.jsxs(hn,{isOpen:je,onClose:We,size:"xl",children:[e.jsx(Fr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(fn,{bg:Nt,borderRadius:"xl",children:[e.jsx(Wr,{color:At,children:"Create New Event"}),e.jsx(on,{}),e.jsx(Ir,{pb:6,children:e.jsxs(pr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:6,children:[e.jsxs(ft,{isRequired:!0,isInvalid:Ge.title,children:[e.jsx(pt,{children:"Event Title"}),e.jsx(Rt,{name:"title",value:De.title,onChange:Ne,placeholder:"Enter event title"}),Ge.title&&e.jsx(Bn,{children:Ge.title})]}),e.jsxs(ft,{isRequired:!0,isInvalid:Ge.date,children:[e.jsx(pt,{children:"Date"}),e.jsx(Rt,{name:"date",type:"date",value:De.date,onChange:Ne}),Ge.date&&e.jsx(Bn,{children:Ge.date})]}),e.jsxs(ft,{isRequired:!0,isInvalid:Ge.time,children:[e.jsx(pt,{children:"Time"}),e.jsx(Rt,{name:"time",type:"time",value:De.time,onChange:Ne}),Ge.time&&e.jsx(Bn,{children:Ge.time})]}),e.jsxs(ft,{isRequired:!0,isInvalid:Ge.location,children:[e.jsx(pt,{children:"Location"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Ko,color:ht})}),e.jsx(Rt,{name:"location",value:De.location,onChange:Ne,placeholder:"Event location"})]}),Ge.location&&e.jsx(Bn,{children:Ge.location})]}),e.jsxs(ft,{isRequired:!0,isInvalid:Ge.organizer,children:[e.jsx(pt,{children:"Organizer"}),e.jsx(Rt,{name:"organizer",value:De.organizer,onChange:Ne,placeholder:"Organizing department or group"}),Ge.organizer&&e.jsx(Bn,{children:Ge.organizer})]}),e.jsxs(ft,{gridColumn:{md:"span 2"},isRequired:!0,isInvalid:Ge.description,children:[e.jsx(pt,{children:"Description"}),e.jsx(ti,{name:"description",value:De.description,onChange:Ne,placeholder:"Provide details about your event",rows:5}),Ge.description&&e.jsx(Bn,{children:Ge.description})]}),e.jsxs(ft,{gridColumn:{md:"span 2"},children:[e.jsx(pt,{children:"Speaker Names"}),e.jsxs(Tr,{children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:Dh,color:ht})}),e.jsx(Rt,{name:"speakerNames",value:De.speakerNames,onChange:Ne,placeholder:"Names separated by commas"})]}),e.jsx(ec,{children:"If applicable, add featured speakers"})]}),e.jsxs(ft,{gridColumn:{md:"span 2"},children:[e.jsx(pt,{children:"Event Image"}),e.jsxs(ce,{position:"relative",children:[Ie?e.jsxs(ce,{position:"relative",onClick:zt,cursor:"pointer",borderRadius:"md",overflow:"hidden",mb:3,children:[e.jsx(Ar,{src:Ie,alt:"Event preview",height:"200px",width:"100%",objectFit:"cover"}),e.jsx(ce,{position:"absolute",top:0,left:0,right:0,bottom:0,bg:"blackAlpha.400",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx(G,{color:"white",fontWeight:"bold",children:"Change Image"})})]}):e.jsx(Te,{leftIcon:e.jsx(rl,{}),onClick:zt,width:"100%",height:"200px",variant:"outline",mb:3,py:10,children:e.jsxs(et,{spacing:2,children:[e.jsx(G,{children:"Click to upload event image"}),e.jsx(G,{fontSize:"xs",color:ht,children:"JPEG, PNG or GIF, recommended size 1200×630px"})]})}),e.jsx(Rt,{type:"file",accept:"image/*",display:"none",ref:it,onChange:lt})]}),e.jsx(ec,{children:"A default image will be used if not provided"})]})]})}),e.jsxs(Jr,{children:[e.jsx(Te,{variant:"outline",mr:3,onClick:We,children:"Cancel"}),e.jsx(Te,{colorScheme:"purple",onClick:nt,leftIcon:e.jsx(Qn,{}),children:"Create Event"})]})]})]})}),$e=()=>{if(!_)return null;const je=new Date(_.date),ve=je<new Date,Pe=j.includes(_.id);return e.jsxs(hn,{isOpen:x,onClose:m,size:"xl",children:[e.jsx(Fr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(fn,{bg:s,borderRadius:"xl",children:[e.jsx(Wr,{color:a,children:_.title}),e.jsx(on,{}),e.jsxs(Ir,{pb:6,children:[e.jsx(ce,{position:"relative",mb:6,children:e.jsx(Ar,{src:_.media,alt:_.title,w:"100%",h:"250px",objectFit:"cover",borderRadius:"lg"})}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"2fr 1fr"},gap:6,children:[e.jsxs(ce,{children:[e.jsx(ut,{size:"md",mb:3,color:a,children:"About This Event"}),e.jsx(G,{color:a,mb:4,children:_.description}),_.speakers&&_.speakers.length>0&&e.jsxs(ce,{mt:5,children:[e.jsx(ut,{size:"sm",mb:3,color:a,children:"Featured Speakers"}),e.jsx(et,{align:"start",spacing:3,children:_.speakers.map((De,Se)=>e.jsxs(at,{spacing:3,children:[e.jsx(zr,{size:"sm",name:De.name}),e.jsx(ce,{children:e.jsx(G,{fontWeight:"bold",fontSize:"sm",children:De.name})})]},Se))})]})]}),e.jsx(ce,{children:e.jsxs(et,{align:"start",spacing:4,p:4,bg:oe("gray.50","gray.700"),borderRadius:"lg",children:[e.jsx(ut,{size:"sm",color:a,children:"Event Details"}),e.jsxs(at,{children:[e.jsx(ct,{as:An,color:u}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(G,{fontSize:"sm",fontWeight:"bold",children:"Date & Time"}),e.jsx(G,{fontSize:"sm",children:je.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx(G,{fontSize:"sm",children:je.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]}),e.jsxs(at,{children:[e.jsx(ct,{as:Ko,color:u}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(G,{fontSize:"sm",fontWeight:"bold",children:"Location"}),e.jsx(G,{fontSize:"sm",children:_.location})]})]}),e.jsxs(at,{children:[e.jsx(ct,{as:hs,color:u}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(G,{fontSize:"sm",fontWeight:"bold",children:"Organizer"}),e.jsx(G,{fontSize:"sm",children:_.organizer})]})]})]})})]})]}),e.jsxs(Jr,{children:[e.jsx(Te,{variant:"outline",mr:3,onClick:m,children:"Close"}),ve?e.jsx(G,{color:c,children:"Event Finished"}):e.jsx(Te,{colorScheme:Pe?"red":"purple",onClick:()=>Fe(_.id),isLoading:E,children:Pe?"Cancel Registration":"Register Now"})]})]})]})};return e.jsxs(ce,{minH:"100vh",bg:o,py:6,px:{base:4,md:6},children:[e.jsxs(Si,{maxW:"1200px",children:[e.jsxs(Ce,{mb:8,align:"center",justify:"space-between",children:[e.jsxs(Ce,{align:"center",children:[e.jsx(Bt,{icon:e.jsx(us,{}),onClick:ue,"aria-label":"Go back",variant:"ghost",color:a,size:"lg",mr:3,_hover:{bg:oe("gray.100","gray.700")}}),e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(ut,{size:"lg",color:a,children:"Campus Events"}),e.jsx(G,{fontSize:"sm",color:c,children:"Discover and register for upcoming events"})]})]}),r&&e.jsx(Te,{onClick:k,colorScheme:"purple",leftIcon:e.jsx(Qn,{}),size:p?"sm":"md",display:{base:"none",md:"flex"},children:"Create Event"})]}),e.jsx(ce,{bg:s,p:5,borderRadius:"xl",boxShadow:"sm",mb:8,borderWidth:"1px",borderColor:h,children:e.jsxs(Ce,{direction:{base:"column",md:"row"},gap:4,justify:"space-between",align:{base:"stretch",md:"center"},children:[e.jsxs(Tr,{maxW:{base:"100%",md:"400px"},children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:lo,color:c})}),e.jsx(Rt,{placeholder:"Search for events...",value:B,onChange:je=>V(je.target.value),focusBorderColor:u})]}),e.jsx(at,{spacing:3,children:e.jsxs(wn,{children:[e.jsx(jn,{as:Te,rightIcon:e.jsx(ds,{}),variant:"outline",size:"md",children:e.jsxs(Ce,{align:"center",children:[e.jsx(ct,{as:An,mr:2}),e.jsx(G,{children:R})]})}),e.jsxs(Sn,{children:[e.jsx(er,{onClick:()=>P("All"),fontWeight:R==="All"?"bold":"normal",children:"All"}),e.jsx(er,{onClick:()=>P("Today"),fontWeight:R==="Today"?"bold":"normal",children:"Today"}),e.jsx(er,{onClick:()=>P("This Week"),fontWeight:R==="This Week"?"bold":"normal",children:"This Week"}),e.jsx(er,{onClick:()=>P("This Month"),fontWeight:R==="This Month"?"bold":"normal",children:"This Month"})]})]})})]})}),e.jsxs(da,{variant:"soft-rounded",colorScheme:"purple",children:[e.jsxs(ua,{mb:6,children:[e.jsxs(Kn,{_selected:{bg:`${u}20`,color:u,fontWeight:"semibold"},children:["All Events (",fe.length,")"]}),e.jsxs(Kn,{_selected:{bg:`${u}20`,color:u,fontWeight:"semibold"},children:["My Events (",j.length,")"]})]}),e.jsxs(al,{children:[e.jsx(ui,{p:0,children:W?e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:[...Array(6)].map((je,ve)=>e.jsx(kr,{height:"300px",borderRadius:"xl"},ve))}):fe.length>0?e.jsxs(e.Fragment,{children:[e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:fe.map(je=>e.jsx(Ye,{event:je},je.id))}),e.jsxs(Ce,{justify:"center",mt:8,gap:2,align:"center",children:[e.jsx(Te,{onClick:()=>de(je=>Math.max(1,je-1)),disabled:ie===1,variant:"outline",children:"Previous"}),e.jsxs(G,{px:3,fontWeight:"medium",children:["Page ",ie," of ",le]}),e.jsx(Te,{onClick:()=>de(je=>Math.min(le,je+1)),disabled:ie===le,variant:"outline",children:"Next"})]})]}):e.jsx(ce,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:h,borderRadius:"lg",children:e.jsx(G,{color:c,children:"No Events Found!"})})}),e.jsx(ui,{p:0,children:j.length>0?e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:Y.filter(je=>j.includes(je.id)).map(je=>e.jsx(Ye,{event:je},je.id))}):e.jsx(ce,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:h,borderRadius:"lg",children:e.jsx(G,{color:c,children:"You haven't registered for any events yet"})})})]})]})]}),e.jsx(Bt,{position:"fixed",bottom:"24px",right:"24px","aria-label":"Create event",icon:e.jsx(Qn,{}),colorScheme:"purple",isRound:!0,boxShadow:"lg",size:"lg",onClick:k,display:{base:"flex",md:"none"},zIndex:2}),e.jsx($e,{}),H&&e.jsx(Ze,{isOpen:H,onClose:ee,event:N,onEventUpdate:_e}),e.jsx(mt,{isOpen:O,onClose:T,onEventCreate:Ue})]})},Qp="/assets/mu-connect-COOGwVPu.png",Ru=Ds,fx=async()=>{try{return(await Nr.get(`${Ru}/my-profile`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}})).data}catch(t){throw console.error("Error fetching user profile:",t),t}},px=async(t,r)=>{try{const n=r.avatarFile instanceof File;let i;if(n){const o=new FormData;o.append("avatar",r.avatarFile),o.append("_method","PUT"),Object.keys(r).forEach(s=>{s!=="avatarFile"&&s!=="avatar"&&r[s]!==void 0&&o.append(s,r[s])}),i=await Nr.post(`${Ru}/user/${t}`,o,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"multipart/form-data"}})}else i=await Nr.put(`${Ru}/user/${t}`,r,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});return i.data}catch(n){throw console.error("Error updating user profile:",n),n}},mx=async(t="")=>{try{const r=t?`/users?search=${encodeURIComponent(t)}`:"/users";return(await yt.get(r)).data}catch(r){throw console.error("Error fetching users:",r),r}},gx=async t=>{try{return(await yt.patch(`/users/${t}/toggle-active`,{})).data}catch(r){throw console.error("Error toggling user active status:",r),r}},xx=async(t="me")=>{try{return(await yt.get(`/users/${t}`)).data}catch(r){throw console.error("Error fetching visitor profile:",r),r}},bx=async(t,r)=>{try{return(await yt.put(`/users/${t}/roles`,{role:r})).data}catch(n){throw console.error("Error updating user role:",n),n}},Zp=6048e5,yx=864e5,nf=Symbol.for("constructDateFrom");function Fs(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&nf in t?t[nf](r):t instanceof Date?new t.constructor(r):new Date(r)}function Ii(t,r){return Fs(r||t,t)}let vx={};function Qc(){return vx}function il(t,r){var c,u,h,p,x,b,m,_;const n=Qc(),i=(_=(m=(p=(h=r==null?void 0:r.weekStartsOn)!=null?h:(u=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)!=null?p:n.weekStartsOn)!=null?m:(b=(x=n.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)!=null?_:0,o=Ii(t,r==null?void 0:r.in),s=o.getDay(),a=(s<i?7:0)+s-i;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Ec(t,r){return il(t,{...r,weekStartsOn:1})}function e0(t,r){const n=Ii(t,r==null?void 0:r.in),i=n.getFullYear(),o=Fs(n,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);const s=Ec(o),a=Fs(n,0);a.setFullYear(i,0,4),a.setHours(0,0,0,0);const c=Ec(a);return n.getTime()>=s.getTime()?i+1:n.getTime()>=c.getTime()?i:i-1}function sf(t){const r=Ii(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function wx(t,...r){const n=Fs.bind(null,r.find(i=>typeof i=="object"));return r.map(n)}function of(t,r){const n=Ii(t,r==null?void 0:r.in);return n.setHours(0,0,0,0),n}function jx(t,r,n){const[i,o]=wx(n==null?void 0:n.in,t,r),s=of(i),a=of(o),c=+s-sf(s),u=+a-sf(a);return Math.round((c-u)/yx)}function Sx(t,r){const n=e0(t,r),i=Fs(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Ec(i)}function Cx(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function _x(t){return!(!Cx(t)&&typeof t!="number"||isNaN(+Ii(t)))}function kx(t,r){const n=Ii(t,r==null?void 0:r.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Ax={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Lx=(t,r,n)=>{let i;const o=Ax[t];return typeof o=="string"?i=o:r===1?i=o.one:i=o.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Xd(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Px={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nx={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ox={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Rx={date:Xd({formats:Px,defaultWidth:"full"}),time:Xd({formats:Nx,defaultWidth:"full"}),dateTime:Xd({formats:Ox,defaultWidth:"full"})},Ex={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Tx=(t,r,n,i)=>Ex[t];function Ga(t){return(r,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let o;if(i==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):a;o=t.formattingValues[c]||t.formattingValues[a]}else{const a=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[c]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(r):r;return o[s]}}const zx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ix={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mx={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Dx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Bx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qx=(t,r)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Wx={ordinalNumber:qx,era:Ga({values:zx,defaultWidth:"wide"}),quarter:Ga({values:Fx,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ga({values:Ix,defaultWidth:"wide"}),day:Ga({values:Mx,defaultWidth:"wide"}),dayPeriod:Ga({values:Dx,defaultWidth:"wide",formattingValues:Bx,defaultFormattingWidth:"wide"})};function Va(t){return(r,n={})=>{const i=n.width,o=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],s=r.match(o);if(!s)return null;const a=s[0],c=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?Hx(c,x=>x.test(a)):Ux(c,x=>x.test(a));let h;h=t.valueCallback?t.valueCallback(u):u,h=n.valueCallback?n.valueCallback(h):h;const p=r.slice(a.length);return{value:h,rest:p}}}function Ux(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function Hx(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function $x(t){return(r,n={})=>{const i=r.match(t.matchPattern);if(!i)return null;const o=i[0],s=r.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const c=r.slice(o.length);return{value:a,rest:c}}}const Gx=/^(\d+)(th|st|nd|rd)?/i,Vx=/\d+/i,Yx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Jx={any:[/^b/i,/^(a|c)/i]},Xx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Kx={any:[/1/i,/2/i,/3/i,/4/i]},Qx={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},e5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},t5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},r5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},n5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},i5={ordinalNumber:$x({matchPattern:Gx,parsePattern:Vx,valueCallback:t=>parseInt(t,10)}),era:Va({matchPatterns:Yx,defaultMatchWidth:"wide",parsePatterns:Jx,defaultParseWidth:"any"}),quarter:Va({matchPatterns:Xx,defaultMatchWidth:"wide",parsePatterns:Kx,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Va({matchPatterns:Qx,defaultMatchWidth:"wide",parsePatterns:Zx,defaultParseWidth:"any"}),day:Va({matchPatterns:e5,defaultMatchWidth:"wide",parsePatterns:t5,defaultParseWidth:"any"}),dayPeriod:Va({matchPatterns:r5,defaultMatchWidth:"any",parsePatterns:n5,defaultParseWidth:"any"})},s5={code:"en-US",formatDistance:Lx,formatLong:Rx,formatRelative:Tx,localize:Wx,match:i5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function o5(t,r){const n=Ii(t,r==null?void 0:r.in);return jx(n,kx(n))+1}function a5(t,r){const n=Ii(t,r==null?void 0:r.in),i=+Ec(n)-+Sx(n);return Math.round(i/Zp)+1}function t0(t,r){var p,x,b,m,_,w,O,k;const n=Ii(t,r==null?void 0:r.in),i=n.getFullYear(),o=Qc(),s=(k=(O=(m=(b=r==null?void 0:r.firstWeekContainsDate)!=null?b:(x=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)!=null?m:o.firstWeekContainsDate)!=null?O:(w=(_=o.locale)==null?void 0:_.options)==null?void 0:w.firstWeekContainsDate)!=null?k:1,a=Fs((r==null?void 0:r.in)||t,0);a.setFullYear(i+1,0,s),a.setHours(0,0,0,0);const c=il(a,r),u=Fs((r==null?void 0:r.in)||t,0);u.setFullYear(i,0,s),u.setHours(0,0,0,0);const h=il(u,r);return+n>=+c?i+1:+n>=+h?i:i-1}function l5(t,r){var c,u,h,p,x,b,m,_;const n=Qc(),i=(_=(m=(p=(h=r==null?void 0:r.firstWeekContainsDate)!=null?h:(u=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)!=null?p:n.firstWeekContainsDate)!=null?m:(b=(x=n.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)!=null?_:1,o=t0(t,r),s=Fs((r==null?void 0:r.in)||t,0);return s.setFullYear(o,0,i),s.setHours(0,0,0,0),il(s,r)}function c5(t,r){const n=Ii(t,r==null?void 0:r.in),i=+il(n,r)-+l5(n,r);return Math.round(i/Zp)+1}function br(t,r){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(r,"0");return n+i}const Ns={y(t,r){const n=t.getFullYear(),i=n>0?n:1-n;return br(r==="yy"?i%100:i,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):br(n+1,2)},d(t,r){return br(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return br(t.getHours()%12||12,r.length)},H(t,r){return br(t.getHours(),r.length)},m(t,r){return br(t.getMinutes(),r.length)},s(t,r){return br(t.getSeconds(),r.length)},S(t,r){const n=r.length,i=t.getMilliseconds(),o=Math.trunc(i*Math.pow(10,n-3));return br(o,r.length)}},Uo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},af={G:function(t,r,n){const i=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const i=t.getFullYear(),o=i>0?i:1-i;return n.ordinalNumber(o,{unit:"year"})}return Ns.y(t,r)},Y:function(t,r,n,i){const o=t0(t,i),s=o>0?o:1-o;if(r==="YY"){const a=s%100;return br(a,2)}return r==="Yo"?n.ordinalNumber(s,{unit:"year"}):br(s,r.length)},R:function(t,r){const n=e0(t);return br(n,r.length)},u:function(t,r){const n=t.getFullYear();return br(n,r.length)},Q:function(t,r,n){const i=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(i);case"QQ":return br(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,r,n){const i=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(i);case"qq":return br(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,r,n){const i=t.getMonth();switch(r){case"M":case"MM":return Ns.M(t,r);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,r,n){const i=t.getMonth();switch(r){case"L":return String(i+1);case"LL":return br(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,r,n,i){const o=c5(t,i);return r==="wo"?n.ordinalNumber(o,{unit:"week"}):br(o,r.length)},I:function(t,r,n){const i=a5(t);return r==="Io"?n.ordinalNumber(i,{unit:"week"}):br(i,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ns.d(t,r)},D:function(t,r,n){const i=o5(t);return r==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):br(i,r.length)},E:function(t,r,n){const i=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,r,n,i){const o=t.getDay(),s=(o-i.weekStartsOn+8)%7||7;switch(r){case"e":return String(s);case"ee":return br(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,r,n,i){const o=t.getDay(),s=(o-i.weekStartsOn+8)%7||7;switch(r){case"c":return String(s);case"cc":return br(s,r.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,r,n){const i=t.getDay(),o=i===0?7:i;switch(r){case"i":return String(o);case"ii":return br(o,r.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,r,n){const o=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,r,n){const i=t.getHours();let o;switch(i===12?o=Uo.noon:i===0?o=Uo.midnight:o=i/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,r,n){const i=t.getHours();let o;switch(i>=17?o=Uo.evening:i>=12?o=Uo.afternoon:i>=4?o=Uo.morning:o=Uo.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Ns.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ns.H(t,r)},K:function(t,r,n){const i=t.getHours()%12;return r==="Ko"?n.ordinalNumber(i,{unit:"hour"}):br(i,r.length)},k:function(t,r,n){let i=t.getHours();return i===0&&(i=24),r==="ko"?n.ordinalNumber(i,{unit:"hour"}):br(i,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ns.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ns.s(t,r)},S:function(t,r){return Ns.S(t,r)},X:function(t,r,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(r){case"X":return cf(i);case"XXXX":case"XX":return Ks(i);case"XXXXX":case"XXX":default:return Ks(i,":")}},x:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"x":return cf(i);case"xxxx":case"xx":return Ks(i);case"xxxxx":case"xxx":default:return Ks(i,":")}},O:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+lf(i,":");case"OOOO":default:return"GMT"+Ks(i,":")}},z:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+lf(i,":");case"zzzz":default:return"GMT"+Ks(i,":")}},t:function(t,r,n){const i=Math.trunc(+t/1e3);return br(i,r.length)},T:function(t,r,n){return br(+t,r.length)}};function lf(t,r=""){const n=t>0?"-":"+",i=Math.abs(t),o=Math.trunc(i/60),s=i%60;return s===0?n+String(o):n+String(o)+r+br(s,2)}function cf(t,r){return t%60===0?(t>0?"-":"+")+br(Math.abs(t)/60,2):Ks(t,r)}function Ks(t,r=""){const n=t>0?"-":"+",i=Math.abs(t),o=br(Math.trunc(i/60),2),s=br(i%60,2);return n+o+r+s}const df=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},r0=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},d5=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],o=n[2];if(!o)return df(t,r);let s;switch(i){case"P":s=r.dateTime({width:"short"});break;case"PP":s=r.dateTime({width:"medium"});break;case"PPP":s=r.dateTime({width:"long"});break;case"PPPP":default:s=r.dateTime({width:"full"});break}return s.replace("{{date}}",df(i,r)).replace("{{time}}",r0(o,r))},u5={p:r0,P:d5},h5=/^D+$/,f5=/^Y+$/,p5=["D","DD","YY","YYYY"];function m5(t){return h5.test(t)}function g5(t){return f5.test(t)}function x5(t,r,n){const i=b5(t,r,n);if(console.warn(i),p5.includes(t))throw new RangeError(i)}function b5(t,r,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const y5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,v5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,w5=/^'([^]*?)'?$/,j5=/''/g,S5=/[a-zA-Z]/;function uf(t,r,n){var p,x,b,m,_,w,O,k,T;const i=Qc(),o=(p=i.locale)!=null?p:s5,s=(_=(m=i.firstWeekContainsDate)!=null?m:(b=(x=i.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)!=null?_:1,a=(T=(k=i.weekStartsOn)!=null?k:(O=(w=i.locale)==null?void 0:w.options)==null?void 0:O.weekStartsOn)!=null?T:0,c=Ii(t,n==null?void 0:n.in);if(!_x(c))throw new RangeError("Invalid time value");let u=r.match(v5).map(H=>{const Z=H[0];if(Z==="p"||Z==="P"){const N=u5[Z];return N(H,o.formatLong)}return H}).join("").match(y5).map(H=>{if(H==="''")return{isToken:!1,value:"'"};const Z=H[0];if(Z==="'")return{isToken:!1,value:C5(H)};if(af[Z])return{isToken:!0,value:H};if(Z.match(S5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Z+"`");return{isToken:!1,value:H}});o.localize.preprocessor&&(u=o.localize.preprocessor(c,u));const h={firstWeekContainsDate:s,weekStartsOn:a,locale:o};return u.map(H=>{if(!H.isToken)return H.value;const Z=H.value;(g5(Z)||m5(Z))&&x5(Z,r,String(t));const N=af[Z[0]];return N(c,Z,o.localize,h)}).join("")}function C5(t){const r=t.match(w5);return r?r[1].replace(j5,"'"):t}mg.register(gg,xg,bg,yg,vg,wg,jg);const _5=()=>{var ze,it,Ge,ot,Nt,At,ht,bt;const t=Xr(),r=qr(),[n,i]=q.useState(!1),[o,s]=q.useState(!0),[a,c]=q.useState(null),[u,h]=q.useState(null),[p,x]=q.useState(null),[b,m]=q.useState(!1),[_,w]=q.useState(""),[O,k]=q.useState([]),[T,H]=q.useState(!1),[Z,N]=q.useState(""),D=localStorage.getItem("role"),[B,V]=q.useState("overview"),{isOpen:R,onOpen:P,onClose:j}=Br(),[A,E]=q.useState(null),[z,se]=q.useState(""),[re,v]=q.useState(!1);q.useEffect(()=>{$()},[r]);const ne=oe("white","gray.700"),M=oe("gray.800","white"),y=oe("gray.500","gray.400"),Y=Ne=>{const{name:lt,value:zt}=Ne.target;c(Ae=>({...Ae,[lt]:zt})),v(!0)},C=Ne=>{const lt=Ne.target.files[0];if(lt){const zt=new FileReader;zt.onloadend=()=>{c(Ae=>({...Ae,avatar:zt.result,avatarFile:lt})),v(!0)},zt.readAsDataURL(lt)}},W=async()=>{try{const Ne={username:a.username,first_name:a.first_name,last_name:a.last_name,email:a.email,bio:a.bio};_&&(Ne.password=_),a.avatarFile&&(Ne.avatarFile=a.avatarFile),await px(a.id,Ne),await $(),r({title:"Profile updated",description:"Your profile has been updated successfully.",status:"success",duration:5e3,isClosable:!0}),w(""),i(!1),v(!1)}catch(Ne){cs("handleSave",Ne),r(ls(Ne,"There was an error updating your profile"))}},L=()=>{n&&!window.confirm("Are you sure you want to leave? Your changes will be lost.")||(n?(i(!1),w(""),$()):t(-1))},$=async()=>{try{s(!0);const Ne=await fx();c(Ne.user),x(Ne.analytics),s(!1)}catch(Ne){cs("fetchProfileData",Ne),r(ls(Ne,"There was an error loading your profile data")),s(!1)}},Q=async(Ne="")=>{var lt;try{H(!0);const zt=await mx(Ne),Ae=zt.data?zt.data:((lt=zt.data)==null?void 0:lt.data)||zt.users||zt;k(Ae),H(!1)}catch(zt){cs("fetchUsers",zt),r(ls(zt,"There was an error loading the users list")),H(!1)}},ie=()=>{N(""),Q("")},de=async Ne=>{try{const lt=await gx(Ne);k(zt=>zt.map(Ae=>Ae.id===Ne?{...Ae,is_active:lt.is_active}:Ae)),r({title:"Updated",description:`User is now ${lt.is_active?"active":"inactive"}.`,status:"success",duration:4e3,isClosable:!0})}catch{r({title:"Error",description:"Failed to update user status.",status:"error",duration:4e3,isClosable:!0})}},le=Ne=>{E(Ne),se(Ne.primary_role),P()},be=async()=>{if(!(!A||!z))try{await bx(A.id,z),k(Ne=>Ne.map(lt=>lt.id===A.id?{...lt,primary_role:z}:lt)),r({title:"Role Updated",description:`${A.username}'s role has been updated to ${z}.`,status:"success",duration:4e3,isClosable:!0}),j()}catch{r({title:"Error",description:"Failed to update user role.",status:"error",duration:4e3,isClosable:!0})}},fe=Ne=>Ne?Ne.avatar&&Ne.avatar.startsWith("data:")?Ne.avatar:Ne.avatar_url||null:null,Fe=Ne=>Ne?`${Ne.first_name||""} ${Ne.last_name||""}`.trim():"",Oe=[{key:"resources_shared",label:"Resources Shared",icon:qn,value:((ze=p==null?void 0:p.resources)==null?void 0:ze.shared)||0},{key:"study_groups_total",label:"Study Groups",icon:Un,value:((it=p==null?void 0:p.study_groups)==null?void 0:it.total)||0},{key:"events_registered",label:"Events Registered",icon:An,value:((Ge=p==null?void 0:p.events)==null?void 0:Ge.registered)||0},{key:"events_upcoming",label:"Upcoming Events",icon:hs,value:((ot=p==null?void 0:p.events)==null?void 0:ot.upcoming)||0}],Ue={labels:["Comments Made","Upvotes Given","Upvotes Received"],datasets:[{label:"Contributions",data:[(p==null?void 0:p.contributions.comments_made)||0,(p==null?void 0:p.contributions.upvotes_given)||0,(p==null?void 0:p.contributions.upvotes_received)||0],backgroundColor:["#3498db","#2ecc71","#e74c3c"],borderWidth:1}]},ye={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(Ne){return`${Ne.label}: ${Ne.raw}`}}}}},ee={labels:(p==null?void 0:p.charts.top_posting_users.map(Ne=>Ne.username))||[],datasets:[{label:"Resources Shared",data:(p==null?void 0:p.charts.top_posting_users.map(Ne=>Ne.resources_count))||[],backgroundColor:"#3498db",borderColor:"#2980b9",borderWidth:1}]},_e={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Resources Shared"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Posting Users",font:{size:18}}}},Me={labels:(p==null?void 0:p.charts.top_commenting_users.map(Ne=>Ne.username))||[],datasets:[{label:"Comments Made",data:(p==null?void 0:p.charts.top_commenting_users.map(Ne=>Ne.comments_count))||[],backgroundColor:"#2ecc71",borderColor:"#27ae60",borderWidth:1}]},Le={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Comments Made"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Commenting Users",font:{size:18}}}},ue={labels:(p==null?void 0:p.charts.top_upvoting_users.map(Ne=>Ne.username))||[],datasets:[{label:"Upvotes Given",data:(p==null?void 0:p.charts.top_upvoting_users.map(Ne=>Ne.upvotes_given))||[],backgroundColor:"#e74c3c",borderColor:"#c0392b",borderWidth:1}]},Ye={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Upvotes Given"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Upvoting Users",font:{size:18}}}},Ze={labels:((Nt=p==null?void 0:p.charts.top_courses)==null?void 0:Nt.map(Ne=>Ne.code))||[],datasets:[{label:"Resources Posted",data:((At=p==null?void 0:p.charts.top_courses)==null?void 0:At.map(Ne=>Ne.resources_count))||[],backgroundColor:"#f39c12",borderColor:"#d35400",borderWidth:1}]},mt={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Resources Posted"}},y:{title:{display:!0,text:"Course"}}},plugins:{title:{display:!0,text:"Top Courses",font:{size:18}}}},$e=(Ne=[],lt,zt)=>{var gt;if(!a)return"";const Ae=((gt=Ne[0])==null?void 0:gt[lt])||0,We=Ne.find(Ct=>Ct.username===a.username),nt=We?We[lt]:0,tt=Ae-nt;return tt>0?`You're ${tt} ${zt} away from the top spot!`:nt===Ae&&Ae!==0?`You're the top ${zt.toLowerCase()}!`:""},je=$e(p==null?void 0:p.charts.top_posting_users,"resources_count","resources"),ve=$e(p==null?void 0:p.charts.top_commenting_users,"comments_count","comments"),Pe=$e(p==null?void 0:p.charts.top_upvoting_users,"upvotes_given","upvotes"),Se=(Ne=>{const lt=[];return Ne>=5&&lt.push({name:"Helpful",color:"bg-green-100 text-green-800"}),Ne>=10&&lt.push({name:"Insightful",color:"bg-blue-100 text-blue-800"}),Ne>=20&&lt.push({name:"Expert",color:"bg-purple-100 text-purple-800"}),lt})((p==null?void 0:p.contributions.upvotes_received)||0),Ie=Ne=>{V(Ne),Ne==="users"&&(Q(Z),Q())};return o?e.jsx(Ce,{height:"100vh",width:"100%",align:"center",justify:"center",children:e.jsx(nn,{size:"xl"})}):e.jsx(Ce,{minH:"100vh",p:4,bg:oe("gray.50","gray.800"),justify:"center",children:e.jsx(ce,{w:{base:"full",md:"90%",lg:"80%"},children:e.jsxs(Zt,{bg:ne,p:0,overflow:"hidden",children:[e.jsxs(ce,{position:"relative",h:"180px",mb:"60px",children:[e.jsx(Ar,{src:Qp,alt:"Cover Photo",objectFit:"cover",w:"full",h:"full"}),e.jsxs(Ce,{position:"absolute",top:4,left:{base:2,md:4},right:{base:2,md:4},justify:"space-between",zIndex:1,children:[e.jsx(Bt,{icon:e.jsx(Wn,{}),"aria-label":"Go back",onClick:L,bg:oe("white","gray.800"),color:M,_hover:{bg:oe("gray.100","gray.700")},boxShadow:"md",title:"Go back",size:{base:"sm",md:"md"}}),e.jsx(Ce,{gap:2,flexWrap:"wrap",justify:{base:"flex-start",sm:"flex-end"},children:n?e.jsxs(e.Fragment,{children:[e.jsx(Te,{leftIcon:e.jsx(r1,{}),colorScheme:"green",onClick:W,boxShadow:"md",size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},isDisabled:!re&&!_,children:"Save"}),e.jsx(Te,{colorScheme:"red",leftIcon:e.jsx(co,{}),onClick:()=>{u&&c(u),i(!1),w(""),v(!1)},size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Cancel"})]}):e.jsx(Te,{leftIcon:e.jsx(ao,{}),colorScheme:"blue",onClick:()=>{h(a),i(!0),v(!1)},boxShadow:"md",size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Edit Profile"})})]}),n?e.jsx(ce,{position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},cursor:"pointer",children:e.jsxs("label",{htmlFor:"avatar-upload",style:{cursor:"pointer"},children:[e.jsx(zr,{size:"xl",src:fe(a),name:Fe(a),boxShadow:"lg",border:"4px solid",borderColor:oe("white","gray.800"),_hover:{opacity:.8,boxShadow:"xl"}}),e.jsx(ce,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"rgba(0,0,0,0.3)",color:"white",borderRadius:"full",p:2,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(Ju,{})}),e.jsx("input",{type:"file",id:"avatar-upload",name:"avatar",accept:"image/jpeg,image/png,image/gif",style:{display:"none"},onChange:C})]})}):e.jsx(zr,{size:"xl",src:fe(a),name:Fe(a),position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},boxShadow:"lg",border:"4px solid",borderColor:oe("white","gray.800")})]}),e.jsx(ce,{px:{base:4,md:6},children:e.jsxs(Ce,{justify:{base:"center",md:"flex-start"},align:"center",mb:6,mt:{base:5,md:0},flexWrap:"wrap",gap:2,children:[e.jsx(ut,{size:{base:"md",sm:"lg",md:"xl"},color:M,textAlign:{base:"center",md:"left"},children:!n&&Fe(a)}),e.jsx(Pr,{ml:{base:0,sm:3},fontSize:{base:"0.7em",md:"0.8em"},colorScheme:(a==null?void 0:a.primary_role)==="moderator"?"purple":(a==null?void 0:a.primary_role)==="admin"?"red":"blue",textTransform:"capitalize",children:(a==null?void 0:a.primary_role)||"Student"})]})}),e.jsxs(ce,{mx:{base:2,md:6},mt:{base:0,md:6},children:[e.jsxs(at,{spacing:0,mb:8,borderBottom:"1px solid",borderColor:"gray.200",justify:{base:"flex-start",md:"center"},overflowX:"auto",overflowY:"hidden",css:{"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:oe("gray.300","gray.600"),borderRadius:"2px"}},children:[e.jsx(Te,{variant:B==="overview"?"solid":"ghost",borderRadius:0,borderBottom:B==="overview"?"2px solid":"none",borderColor:"blue.500",color:B==="overview"?"blue.500":"gray.500",onClick:()=>Ie("overview"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Overview"}),e.jsx(Te,{variant:B==="activity"?"solid":"ghost",borderRadius:0,borderBottom:B==="activity"?"2px solid":"none",borderColor:"blue.500",color:B==="activity"?"blue.500":"gray.500",onClick:()=>Ie("activity"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Activity"}),D==="admin"&&e.jsx(Te,{variant:B==="analytics"?"solid":"ghost",borderRadius:0,borderBottom:B==="analytics"?"2px solid":"none",borderColor:"blue.500",color:B==="analytics"?"blue.500":"gray.500",onClick:()=>Ie("analytics"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Analytics"}),D==="admin"&&e.jsx(Te,{variant:B==="users"?"solid":"ghost",borderRadius:0,borderBottom:B==="users"?"2px solid":"none",borderColor:"blue.500",color:B==="users"?"blue.500":"gray.500",onClick:()=>Ie("users"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Users"})]}),B==="overview"&&e.jsxs(et,{spacing:8,align:"stretch",children:[e.jsxs(Zt,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Personal Information"}),n?e.jsxs(yr,{spacing:4,children:[e.jsxs(ft,{children:[e.jsx(pt,{children:"First Name"}),e.jsx(Rt,{name:"first_name",value:(a==null?void 0:a.first_name)||"",onChange:Y})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Last Name"}),e.jsx(Rt,{name:"last_name",value:(a==null?void 0:a.last_name)||"",onChange:Y})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Email"}),e.jsx(Rt,{name:"email",value:(a==null?void 0:a.email)||"",onChange:Y})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Username"}),e.jsx(Rt,{name:"username",value:(a==null?void 0:a.username)||"",onChange:Y})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Bio"}),e.jsx(ti,{name:"bio",value:(a==null?void 0:a.bio)||"",onChange:Y,rows:3})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Password (leave blank to keep current)"}),e.jsxs(Tr,{children:[e.jsx(Rt,{type:b?"text":"password",value:_,onChange:Ne=>{w(Ne.target.value),Ne.target.value&&v(!0)},placeholder:"Enter new password"}),e.jsx(_c,{children:e.jsx(Bt,{h:"1.75rem",size:"sm",onClick:()=>m(!b),icon:b?e.jsx(Bg,{}):e.jsx(qg,{}),"aria-label":b?"Hide password":"Show password"})})]})]})]}):e.jsxs(pr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(ce,{children:[e.jsx(G,{fontWeight:"bold",color:y,children:"First Name"}),e.jsx(G,{color:M,children:(a==null?void 0:a.first_name)||"-"})]}),e.jsxs(ce,{children:[e.jsx(G,{fontWeight:"bold",color:y,children:"Last Name"}),e.jsx(G,{color:M,children:(a==null?void 0:a.last_name)||"-"})]}),e.jsxs(ce,{children:[e.jsx(G,{fontWeight:"bold",color:y,children:"Email"}),e.jsx(G,{color:M,children:(a==null?void 0:a.email)||"-"})]}),e.jsxs(ce,{children:[e.jsx(G,{fontWeight:"bold",color:y,children:"Username"}),e.jsx(G,{color:M,children:(a==null?void 0:a.username)||"-"})]}),e.jsxs(ce,{gridColumn:{md:"span 2"},children:[e.jsx(G,{fontWeight:"bold",color:y,children:"Bio"}),e.jsx(G,{color:M,children:(a==null?void 0:a.bio)||"No bio provided."})]})]})]}),e.jsxs(Zt,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Academic Information"}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(ce,{children:[e.jsx(G,{fontWeight:"bold",color:y,children:"Faculty"}),e.jsx(G,{color:M,children:((ht=a==null?void 0:a.faculty)==null?void 0:ht.name)||"Not specified"})]}),e.jsxs(ce,{children:[e.jsx(G,{fontWeight:"bold",color:y,children:"Major"}),e.jsx(G,{color:M,children:((bt=a==null?void 0:a.major)==null?void 0:bt.name)||"Not specified"})]})]})]}),e.jsx(di,{columns:{base:1,sm:2,lg:4},spacing:4,children:Oe.map(Ne=>e.jsx(Zt,{p:4,shadow:"sm",bg:ne,borderLeft:"4px solid",borderColor:"blue.500",children:e.jsxs(Ce,{align:"center",children:[e.jsx(ct,{as:Ne.icon,boxSize:6,color:"blue.500",mr:3}),e.jsxs(ce,{children:[e.jsx(G,{fontSize:"sm",color:y,children:Ne.label}),e.jsx(G,{fontSize:"2xl",fontWeight:"bold",color:M,children:Ne.value})]})]})},Ne.key))}),e.jsxs(Zt,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Contribution Mix"}),e.jsx(ce,{h:"300px",w:"100%",maxW:"500px",mx:"auto",children:e.jsx(Sg,{data:Ue,options:ye})})]}),Se.length>0&&e.jsxs(Zt,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Achievements"}),e.jsx(Ce,{flexWrap:"wrap",gap:2,children:Se.map((Ne,lt)=>e.jsx(Pr,{px:3,py:1,borderRadius:"full",fontSize:"sm",fontWeight:"medium",colorScheme:Ne.color.split("-")[1],children:Ne.name},lt))})]}),e.jsxs(Zt,{p:6,shadow:"md",bgGradient:oe("linear(to-r, blue.50, indigo.50)","linear(to-r, blue.900, indigo.900)"),children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Community Standing"}),e.jsxs(et,{align:"start",spacing:2,children:[je&&e.jsx(G,{color:oe("blue.700","blue.200"),fontWeight:"medium",children:je}),ve&&e.jsx(G,{color:oe("blue.700","blue.200"),fontWeight:"medium",children:ve}),Pe&&e.jsx(G,{color:oe("blue.700","blue.200"),fontWeight:"medium",children:Pe})]})]})]}),B==="users"&&D==="admin"&&e.jsx(et,{spacing:8,align:"stretch",children:e.jsxs(Zt,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"User Management"}),e.jsxs(Tr,{mb:4,maxW:{base:"100%",md:"400px"},size:{base:"sm",md:"md"},children:[e.jsx(Rt,{placeholder:"Search users...",value:Z,onChange:Ne=>N(Ne.target.value),bg:oe("white","gray.700"),fontSize:{base:"xs",md:"sm"}}),e.jsxs(_c,{width:{base:"6rem",md:"7rem"},display:"flex",justifyContent:"flex-end",alignItems:"center",children:[Z&&e.jsx(Bt,{"aria-label":"Clear",icon:e.jsx(co,{}),size:"xs",mr:1,onClick:ie}),e.jsx(Te,{h:"100%",size:"xs",onClick:()=>Q(Z),fontSize:{base:"xs",sm:"sm"},children:"Search"})]})]}),T?e.jsx(Ce,{justify:"center",children:e.jsx(nn,{})}):e.jsx(ce,{overflowX:"auto",overflowY:"hidden",w:"100%",children:e.jsxs(Fm,{variant:"simple",size:{base:"sm",md:"md"},children:[e.jsx(Im,{children:e.jsxs(Th,{children:[e.jsx(Bo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Username"}),e.jsx(Bo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Name"}),e.jsx(Bo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Email"}),e.jsx(Bo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Role"}),e.jsx(Bo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Status"}),e.jsx(Bo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Action"})]})}),e.jsx(Mm,{children:O.map(Ne=>e.jsxs(Th,{children:[e.jsx(qo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:Ne.username}),e.jsx(qo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:`${Ne.first_name} ${Ne.last_name}`}),e.jsx(qo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:Ne.email}),e.jsx(qo,{textTransform:"capitalize",whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:Ne.primary_role}),e.jsx(qo,{whiteSpace:"nowrap",children:e.jsx(Pr,{colorScheme:Ne.is_active?"green":"red",variant:"solid",fontSize:{base:"xs",md:"sm"},px:2,py:1,borderRadius:"md",children:Ne.is_active?"Active":"Inactive"})}),e.jsx(qo,{whiteSpace:"nowrap",children:e.jsxs(wn,{children:[e.jsx(jn,{as:Bt,icon:e.jsx(Uc,{}),variant:"ghost",size:"sm","aria-label":"Options"}),e.jsxs(Sn,{children:[e.jsx(er,{icon:e.jsx(a1,{}),onClick:()=>le(Ne),fontSize:{base:"xs",md:"sm"},children:"Update Role"}),e.jsx(Dm,{}),e.jsx(er,{color:Ne.is_active?"red.500":"green.500",onClick:()=>de(Ne.id),fontSize:{base:"xs",md:"sm"},children:Ne.is_active?"Deactivate User":"Activate User"})]})]})})]},Ne.id))})]})})]})}),B==="activity"&&e.jsx(et,{spacing:8,align:"stretch",children:e.jsxs(Zt,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Recent Activity"}),e.jsxs(ce,{position:"relative",children:[e.jsx(ce,{position:"absolute",left:{base:"20px",md:"50%"},transform:{base:"none",md:"translateX(-50%)"},h:"100%",w:"2px",bg:"gray.200"}),p!=null&&p.activity&&p.activity.length>0?p.activity.map((Ne,lt)=>{const zt=lt%2===0,Ae=Ne.type==="event_registration"?An:Ne.type==="study_group_join"?Un:Eg,We=Ne.type==="event_registration"?"blue":Ne.type==="study_group_join"?"green":"purple";return e.jsxs(Ce,{mb:8,justify:{base:"flex-start",md:"space-between"},align:"center",w:"100%",direction:{base:"row",md:zt?"row-reverse":"row"},position:"relative",pl:{base:"50px",md:0},children:[e.jsx(ce,{w:{base:"100%",md:"45%"},textAlign:{base:"left",md:"center"},p:3,borderRadius:"lg",display:{base:"none",md:"block"},children:e.jsx(G,{fontWeight:"medium",color:M,fontSize:{base:"xs",md:"sm"},children:uf(new Date(Ne.date),"MMM d, yyyy HH:mm")})}),e.jsx(ce,{position:"absolute",left:{base:"10px",md:"50%"},transform:{base:"none",md:"translateX(-50%)"},w:{base:8,md:10},h:{base:8,md:10},borderRadius:"full",zIndex:10,bg:`${We}.100`,color:`${We}.600`,display:"flex",alignItems:"center",justifyContent:"center",shadow:"lg",border:"4px solid white",children:e.jsx(ct,{as:Ae,boxSize:{base:3,md:4}})}),e.jsxs(ce,{w:{base:"100%",md:"45%"},bg:ne,p:{base:2,md:3},borderRadius:"lg",shadow:"sm",border:"1px solid",borderColor:"gray.100",children:[e.jsx(G,{fontWeight:"medium",color:M,textTransform:"capitalize",fontSize:{base:"xs",md:"sm"},children:Ne.type==="event_registration"?"Event Registration":Ne.type==="study_group_join"?"Joined Study Group":"Task Completed"}),e.jsx(G,{fontSize:{base:"xs",md:"sm"},color:y,children:Ne.type==="event_registration"?"Registered for an event":Ne.type==="study_group_join"?`Joined: ${Ne.data.group_name}`:"Completed a task"}),e.jsx(G,{fontSize:"xs",color:y,mt:1,display:{base:"block",md:"none"},children:uf(new Date(Ne.date),"MMM d, yyyy HH:mm")})]})]},lt)}):e.jsx(G,{color:y,textAlign:"center",py:4,fontSize:{base:"xs",md:"sm"},children:"No recent activity to display."})]})]})}),B==="analytics"&&D==="admin"&&e.jsx(et,{spacing:8,align:"stretch",children:e.jsx(di,{columns:{base:1,md:2},spacing:6,children:e.jsxs(Zt,{p:6,shadow:"md",bg:ne,gridColumn:{lg:D==="admin"?"span 4":"span 3"},children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Community Leaderboards"}),e.jsx(G,{color:y,mb:4,children:"Track your standing in the community based on your contributions."}),e.jsxs(di,{columns:{base:1,md:2},spacing:6,children:[e.jsxs(Zt,{p:4,shadow:"sm",bg:ne,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ut,{size:"sm",mb:2,color:M,children:"Top Posters"}),e.jsx(ce,{h:"400px",w:"100%",children:e.jsx(sc,{data:ee,options:_e})})]}),e.jsxs(Zt,{p:4,shadow:"sm",bg:ne,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ut,{size:"sm",mb:2,color:M,children:"Top Commenters"}),e.jsx(ce,{h:"400px",w:"100%",children:e.jsx(sc,{data:Me,options:Le})})]}),e.jsxs(Zt,{p:4,shadow:"sm",bg:ne,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ut,{size:"sm",mb:2,color:M,children:"Top Upvoters"}),e.jsx(ce,{h:"400px",w:"100%",children:e.jsx(sc,{data:ue,options:Ye})})]}),D==="admin"&&e.jsxs(Zt,{p:4,shadow:"sm",bg:ne,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ut,{size:"sm",mb:2,color:M,children:"Top Courses"}),e.jsx(ce,{h:"400px",w:"100%",children:e.jsx(sc,{data:Ze,options:mt})})]})]})]})})}),e.jsxs(hn,{isOpen:R,onClose:j,children:[e.jsx(Fr,{}),e.jsxs(fn,{children:[e.jsx(Wr,{children:"Update User Role"}),e.jsx(on,{}),e.jsx(Ir,{children:A&&e.jsxs(e.Fragment,{children:[e.jsxs(G,{mb:4,children:["Update role for ",e.jsx("strong",{children:A.username})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Select Role"}),e.jsxs(Ti,{value:z,onChange:Ne=>se(Ne.target.value),children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]})}),e.jsxs(Jr,{children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:j,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",onClick:be,children:"Update Role"})]})]})]})]})]})})})},k5="https://via.placeholder.com/150";hr(ce);const A5=()=>{const t=Xr(),{userId:r}=Bc(),[n,i]=q.useState(!0),[o,s]=q.useState(null),a=oe("white","gray.700"),c=oe("gray.800","white"),u=oe("gray.500","gray.400");oe("gray.50","gray.900"),oe("gray.200","gray.700"),q.useEffect(()=>{(async()=>{var b,m;i(!0);try{const _=await xx(r||"me"),w={id:_.id,name:`${_.first_name||""} ${_.last_name||""}`.trim()||_.username,username:_.username,email:_.email,bio:_.bio,major:((b=_.major)==null?void 0:b.name)||"N/A",faculty:((m=_.faculty)==null?void 0:m.name)||"N/A",roles:(_.roles||[]).map(O=>typeof O=="string"?O:O.name),verified:_.is_admin||_.is_moderator,avatar:_.avatar?`${fs}/storage/avatars/${_.avatar}`:k5,joinDate:_.created_at};s(w)}catch(_){console.error("Failed to load visitor profile",_),s(null)}finally{i(!1)}})()},[r]);const h=()=>t(-1);if(n)return e.jsx(Ce,{height:"100vh",width:"100%",align:"center",justify:"center",children:e.jsx(nn,{size:"xl",thickness:"4px",color:"blue.500"})});if(!o)return e.jsxs(Si,{maxW:"container.xl",py:8,textAlign:"center",children:[e.jsx(ut,{children:"User Not Found"}),e.jsx(G,{children:"The user profile you are looking for does not exist."}),e.jsx(Bt,{icon:e.jsx(Wn,{}),onClick:h,"aria-label":"Go back",mt:4})]});const p=({icon:x,title:b,value:m})=>e.jsxs(at,{spacing:4,p:4,bg:oe("gray.50","gray.800"),borderRadius:"lg",w:"full",children:[e.jsx(ce,{as:x,color:"blue.500",boxSize:6}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(G,{fontSize:"sm",color:u,children:b}),e.jsx(G,{fontWeight:"medium",color:c,children:m})]})]});return e.jsx(Ce,{minH:"100vh",p:4,bg:oe("gray.50","gray.800"),justify:"center",children:e.jsx(ce,{w:{base:"full",md:"90%",lg:"80%"},children:e.jsxs(Zt,{bg:a,p:0,overflow:"hidden",children:[e.jsxs(ce,{position:"relative",h:"180px",mb:"60px",children:[e.jsx(Ar,{src:Qp,alt:"Cover Photo",objectFit:"cover",w:"full",h:"full"}),e.jsx(Ce,{position:"absolute",top:4,left:4,right:4,justify:"space-between",zIndex:1,children:e.jsx(Bt,{icon:e.jsx(Wn,{}),"aria-label":"Go back",onClick:h,bg:oe("white","gray.800"),color:c,_hover:{bg:oe("gray.100","gray.700")},boxShadow:"md",title:"Go back"})}),e.jsx(zr,{size:"xl",src:o.avatar,name:o.name,position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},boxShadow:"lg",border:"4px solid",borderColor:oe("white","gray.800")})]}),e.jsxs(ce,{px:{base:4,md:6},children:[e.jsxs(Ce,{justify:{base:"center",md:"flex-start"},align:"center",mb:6,mt:{base:5,md:0},children:[e.jsxs(ut,{size:{base:"lg",md:"xl"},color:c,textAlign:{base:"center",md:"left"},children:[o.name,o.verified&&e.jsx(Cc,{size:"24px",bg:"blue.500",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",ml:2,verticalAlign:"middle",children:e.jsx(zi,{size:"16px"})})]}),e.jsxs(G,{color:u,fontSize:"md",ml:3,children:["@",o.username]})]}),e.jsx(Ce,{mb:4,flexWrap:"wrap",gap:2,justify:{base:"center",md:"flex-start"},children:o.roles.map(x=>e.jsx(Pr,{colorScheme:x==="moderator"?"purple":x==="admin"?"red":"blue",textTransform:"capitalize",children:x},x))}),o.email&&e.jsx(p,{icon:Vu,title:"Email",value:o.email})]}),e.jsxs(ce,{p:6,borderTop:"1px solid",borderColor:oe("gray.100","gray.700"),children:[e.jsx(ut,{size:"md",mb:4,children:"About"}),e.jsx(G,{color:c,children:o.bio||"No bio available."})]}),e.jsxs(di,{columns:{base:1,md:3},spacing:{base:3,md:6},p:6,bg:a,borderTop:"1px solid",borderColor:oe("gray.100","gray.700"),children:[e.jsxs(et,{spacing:1,alignItems:"flex-start",children:[e.jsxs(at,{children:[e.jsx(ct,{as:Tg,color:"blue.500"}),e.jsx(G,{fontSize:"sm",color:u,children:"Major"})]}),e.jsx(G,{fontWeight:"bold",fontSize:"md",children:o.major})]}),e.jsxs(et,{spacing:1,alignItems:"flex-start",children:[e.jsxs(at,{children:[e.jsx(ct,{as:zs,color:"blue.500"}),e.jsx(G,{fontSize:"sm",color:u,children:"Faculty"})]}),e.jsx(G,{fontWeight:"bold",fontSize:"md",children:o.faculty})]}),e.jsxs(et,{spacing:1,alignItems:"flex-start",children:[e.jsxs(at,{children:[e.jsx(ct,{as:An,color:"blue.500"}),e.jsx(G,{fontSize:"sm",color:u,children:"Joined"})]}),e.jsx(G,{fontWeight:"bold",fontSize:"md",children:new Date(o.joinDate).toLocaleDateString()})]})]})]})})})},hf={whatsapp:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32px" height="32px"><path fill="#fff" d="M4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98c-0.001,0,0,0,0,0h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303z"/><path fill="#fff" d="M4.868,43.803c-0.132,0-0.26-0.052-0.355-0.148c-0.125-0.127-0.174-0.312-0.127-0.483l2.639-9.636c-1.636-2.906-2.499-6.206-2.497-9.556C4.532,13.238,13.273,4.5,24.014,4.5c5.21,0.002,10.105,2.031,13.784,5.713c3.679,3.683,5.704,8.577,5.702,13.781c-0.004,10.741-8.746,19.48-19.486,19.48c-3.189-0.001-6.344-0.788-9.144-2.277l-9.875,2.589C4.953,43.798,4.911,43.803,4.868,43.803z"/><path fill="#cfd8dc" d="M24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,4C24.014,4,24.014,4,24.014,4C12.998,4,4.032,12.962,4.027,23.979c-0.001,3.367,0.849,6.685,2.461,9.622l-2.585,9.439c-0.094,0.345,0.002,0.713,0.254,0.967c0.19,0.192,0.447,0.297,0.711,0.297c0.085,0,0.17-0.011,0.254-0.033l9.687-2.54c2.828,1.468,5.998,2.243,9.197,2.244c11.024,0,19.99-8.963,19.995-19.98c0.002-5.339-2.075-10.359-5.848-14.135C34.378,6.083,29.357,4.002,24.014,4L24.014,4z"/><path fill="#40c351" d="M35.176,12.832c-2.98-2.982-6.941-4.625-11.157-4.626c-8.704,0-15.783,7.076-15.787,15.774c-0.001,2.981,0.833,5.883,2.413,8.396l0.376,0.597l-1.595,5.821l5.973-1.566l0.577,0.342c2.422,1.438,5.2,2.198,8.032,2.199h0.006c8.698,0,15.777-7.077,15.78-15.776C39.795,19.778,38.156,15.814,35.176,12.832z"/><path fill="#fff" fill-rule="evenodd" d="M19.268,16.045c-0.355-0.79-0.729-0.806-1.068-0.82c-0.277-0.012-0.593-0.011-0.909-0.011c-0.316,0-0.83,0.119-1.265,0.594c-0.435,0.475-1.661,1.622-1.661,3.956c0,2.334,1.7,4.59,1.937,4.906c0.237,0.316,3.282,5.259,8.104,7.161c4.007,1.58,4.823,1.266,5.693,1.187c0.87-0.079,2.807-1.147,3.202-2.255c0.395-1.108,0.395-2.057,0.277-2.255c-0.119-0.198-0.435-0.316-0.909-0.554s-2.807-1.385-3.242-1.543c-0.435-0.158-0.751-0.237-1.068,0.238c-0.316,0.474-1.225,1.543-1.502,1.859c-0.277,0.317-0.554,0.357-1.028,0.119c-0.474-0.238-2.002-0.738-3.815-2.354c-1.41-1.257-2.362-2.81-2.639-3.285c-0.277-0.474-0.03-0.731,0.208-0.968c0.213-0.213,0.474-0.554,0.712-0.831c0.237-0.277,0.316-0.475,0.474-0.791c0.158-0.317,0.079-0.594-0.04-0.831C20.612,19.329,19.69,16.983,19.268,16.045z" clip-rule="evenodd"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32px" height="32px"><path fill="#90CAF9" d="M40 45H16c-1.1 0-2-.9-2-2V13c0-1.1.9-2 2-2h24c1.1 0 2 .9 2 2v30c0 1.1-.9 2-2 2z"/><path fill="#E1F5FE" d="M38 17H18v24h20V17z"/><path fill="#1976D2" d="M25 13h-9V5c0-1.1.9-2 2-2h24c1.1 0 2 .9 2 2v30c0 1.1-.9 2-2 2h-8v-9c0-2.2-1.8-4-4-4h-5v-5c0-2.2-1.8-4-4-4z"/><path fill="#E1F5FE" d="M34 9H20v4h14V9zm0 7H20v14h14V16z"/></svg>'},ga=()=>localStorage.getItem("authToken"),n0=async(t={})=>{var r;try{const n={...t};if(!n.faculty_id||!n.major_id){const o=JSON.parse(localStorage.getItem("user")||"{}");n.faculty_id||(n.faculty_id=o.faculty_id||localStorage.getItem("faculty_id")),n.major_id||(n.major_id=o.major_id||localStorage.getItem("major_id"))}const i=await yt.get("/resources",{params:n});if(Array.isArray(i.data))return i.data;if(i.data&&Array.isArray(i.data.data)){const o=i.data.data;return o.pagination=i.data.pagination||null,o}return[]}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch resources"}}},xc=async t=>{var r;try{const n=await yt.get(`/resources/${t}`);return console.log("Resource fetched successfully:",n.data),n.data}catch(n){throw console.error("Error fetching resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch resource"}}},i0=async({title:t,description:r,attachments:n,course_id:i,major_id:o,faculty_id:s,type:a,poll:c})=>{var u;try{const h=new FormData;if(t&&h.append("title",t),r&&h.append("description",r),i&&h.append("course_id",i),o&&h.append("major_id",o),s&&h.append("faculty_id",s),a&&h.append("type",a),n&&n.length)for(let x=0;x<n.length;x++)h.append("attachments[]",n[x]);c&&c.question&&c.options&&c.options.length>0&&(h.append("poll[question]",c.question),c.options.forEach(x=>{const b=typeof x=="string"?x.trim():"";b&&h.append("poll[options][]",b)}),console.log("Poll data added to FormData for creation:",c));const p=await yt.post("/resources",h,{headers:{"Content-Type":"multipart/form-data"}});return p.data.resource||p.data}catch(h){throw((u=h.response)==null?void 0:u.data)||{message:"Failed to create resource"}}},s0=async(t,{title:r,description:n,newAttachments:i,removeAttachmentIds:o})=>{var s,a;try{console.log("Updating resource with ID:",t);const c=new FormData;if(c.append("_method","PUT"),r!==void 0&&(console.log("Setting title:",r),c.append("title",r)),n!==void 0&&(console.log("Setting description:",n),c.append("description",n)),i&&i.length){console.log(`Adding ${i.length} new attachment(s)`);for(let h=0;h<i.length;h++)c.append("attachments[]",i[h]),console.log(`Added attachment: ${i[h].name}`)}if(o){const h=Array.isArray(o)?o:[o];h.length&&(console.log(`Removing ${h.length} attachment(s)`),h.forEach(p=>{p&&(console.log(`Marking attachment for removal: ${p}`),c.append("remove_attachments[]",p.toString()))}))}const u=await yt.post(`/resources/${t}`,c);return console.log("Resource updated successfully:",u.data),u.data.resource||u.data}catch(c){throw console.error("Error updating resource:",c),console.error("Error details:",((s=c.response)==null?void 0:s.data)||"Unknown error"),((a=c.response)==null?void 0:a.data)||{message:"Failed to update resource"}}},rh=async t=>{try{return(await yt.post(`/resources/${t}/toggle-upvote`,{},{headers:{Authorization:`Bearer ${ga()}`}})).data}catch(r){throw console.error("Error toggling upvote:",r),r}},o0=async(t,r)=>{try{return(await yt.post(`/resources/${t}/comments`,{body:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${ga()}`}})).data}catch(n){throw console.error("Error adding comment:",n),n}},a0=async(t,r)=>{try{return(await yt.put(`/comments/${t}`,{body:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${ga()}`}})).data}catch(n){throw console.error("Error updating comment:",n),n}},l0=async t=>{try{return(await yt.delete(`/comments/${t}`,{headers:{Authorization:`Bearer ${ga()}`}})).data}catch(r){throw console.error("Error deleting comment:",r),r}},nh=async t=>{var r;try{return(await yt.post(`/poll-options/${t}/vote`,{},{headers:{Authorization:`Bearer ${ga()}`}})).data}catch(n){throw console.error("Error voting poll option:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to record vote"}}},c0=async t=>{try{return(await yt.post(`/comments/${t}/toggle-upvote`,{},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${ga()}`}})).data}catch(r){throw console.error("Error toggling comment upvote:",r),r}},d0=async t=>{var r;try{return(await yt.delete(`/resources/${t}`)).data}catch(n){throw console.error("Error deleting resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to delete resource"}}},Zc=async t=>{var r;try{return(await yt.post(`/resources/${t}/toggleSave`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to save resource"}}},u0=async(t={})=>{var r;try{return(await yt.get("/saved-items",{params:t})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch saved items"}}},h0=async t=>{var r;try{return(await yt.get("/top-contributors",{params:{limit:t}})).data}catch(n){throw console.error("Error fetching top contributors:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch top contributors"}}},f0=async(t,r=null)=>{var n;try{const i={};return r&&(i.attachment_id=r),(await yt.get(`/resources/${t}/generate-quiz`,{params:i})).data}catch(i){throw console.error("Error initiating quiz generation:",i),((n=i.response)==null?void 0:n.data)||{message:"Failed to initiate quiz generation"}}},p0=async(t,r=null)=>{var n;try{const i={};return r&&(i.attachment_id=r),(await yt.get(`/resources/${t}/generate-summary`,{params:i})).data}catch(i){throw console.error("Error initiating summary generation:",i),((n=i.response)==null?void 0:n.data)||{message:"Failed to initiate summary generation"}}},Eu=async t=>{var r;try{return(await yt.get(`/ai/job/${t}/status`)).data}catch(n){throw console.error("Error polling AI job status:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to check generation status"}}},m0=async(t={})=>{var r;try{return(await yt.get("/admin/resources/pending",{params:t})).data}catch(n){throw console.error("Error fetching pending resources:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch pending resources"}}},g0=async t=>{var r;try{return(await yt.post(`/admin/resources/${t}/approve`)).data}catch(n){throw console.error("Error approving resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to approve resource"}}},x0=async(t,r)=>{var n;try{const i=r?{reason:r.trim()}:{};return(await yt.post(`/admin/resources/${t}/reject`,i)).data}catch(i){throw console.error("Error rejecting resource:",i),((n=i.response)==null?void 0:n.data)||{message:"Failed to reject resource"}}},L5=Object.freeze(Object.defineProperty({__proto__:null,addComment:o0,approveResource:g0,createResource:i0,deleteComment:l0,deleteResource:d0,generateQuiz:f0,generateSummary:p0,getAllResources:n0,getPendingResources:m0,getResourceById:xc,getSavedItems:u0,getTopContributors:h0,pollAIJobStatus:Eu,rejectResource:x0,toggleCommentUpvote:c0,toggleSaveResource:Zc,toggleUpvote:rh,updateComment:a0,updateResource:s0,votePollOption:nh},Symbol.toStringTag,{value:"Module"}));var Kd={},Qd={},Ya={},Zd={},ff;function P5(){return ff||(ff=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};t.default=r}(Zd)),Zd}var eu,pf;function N5(){if(pf)return eu;pf=1;var t="Expected a function",r=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,c=parseInt,u=typeof ic=="object"&&ic&&ic.Object===Object&&ic,h=typeof self=="object"&&self&&self.Object===Object&&self,p=u||h||Function("return this")(),x=Object.prototype,b=x.toString,m=Math.max,_=Math.min,w=function(){return p.Date.now()};function O(N,D,B){var V,R,P,j,A,E,z=0,se=!1,re=!1,v=!0;if(typeof N!="function")throw new TypeError(t);D=Z(D)||0,k(B)&&(se=!!B.leading,re="maxWait"in B,P=re?m(Z(B.maxWait)||0,D):P,v="trailing"in B?!!B.trailing:v);function ne(ie){var de=V,le=R;return V=R=void 0,z=ie,j=N.apply(le,de),j}function M(ie){return z=ie,A=setTimeout(C,D),se?ne(ie):j}function y(ie){var de=ie-E,le=ie-z,be=D-de;return re?_(be,P-le):be}function Y(ie){var de=ie-E,le=ie-z;return E===void 0||de>=D||de<0||re&&le>=P}function C(){var ie=w();if(Y(ie))return W(ie);A=setTimeout(C,y(ie))}function W(ie){return A=void 0,v&&V?ne(ie):(V=R=void 0,j)}function L(){A!==void 0&&clearTimeout(A),z=0,V=E=R=A=void 0}function $(){return A===void 0?j:W(w())}function Q(){var ie=w(),de=Y(ie);if(V=arguments,R=this,E=ie,de){if(A===void 0)return M(E);if(re)return A=setTimeout(C,D),ne(E)}return A===void 0&&(A=setTimeout(C,D)),j}return Q.cancel=L,Q.flush=$,Q}function k(N){var D=typeof N;return!!N&&(D=="object"||D=="function")}function T(N){return!!N&&typeof N=="object"}function H(N){return typeof N=="symbol"||T(N)&&b.call(N)==n}function Z(N){if(typeof N=="number")return N;if(H(N))return r;if(k(N)){var D=typeof N.valueOf=="function"?N.valueOf():N;N=k(D)?D+"":D}if(typeof N!="string")return N===0?N:+N;N=N.replace(i,"");var B=s.test(N);return B||a.test(N)?c(N.slice(2),B?2:8):o.test(N)?r:+N}return eu=O,eu}var tu={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var mf;function ed(){return mf||(mf=1,function(t){(function(){var r={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(s=o(s,i(c)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var c in s)r.call(s,c)&&s[c]&&(a=o(a,c));return a}function o(s,a){return a?s?s+" "+a:s+a:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(tu)),tu.exports}var _t={},ru={},gf;function b0(){return gf||(gf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(po());function n(o){return o&&o.__esModule?o:{default:o}}var i={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(s){return r.default.createElement("ul",{style:{display:"block"}},s)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(s){return r.default.createElement("button",null,s+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null,unslick:!1};t.default=i}(ru)),ru}var xf;function ml(){if(xf)return _t;xf=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.checkSpecKeys=_t.checkNavigable=_t.changeSlide=_t.canUseDOM=_t.canGoNext=void 0,_t.clamp=h,_t.extractObject=void 0,_t.filterSettings=ne,_t.validSettings=_t.swipeStart=_t.swipeMove=_t.swipeEnd=_t.slidesOnRight=_t.slidesOnLeft=_t.slideHandler=_t.siblingDirection=_t.safePreventDefault=_t.lazyStartIndex=_t.lazySlidesOnRight=_t.lazySlidesOnLeft=_t.lazyEndIndex=_t.keyHandler=_t.initializedState=_t.getWidth=_t.getTrackLeft=_t.getTrackCSS=_t.getTrackAnimateCSS=_t.getTotalSlides=_t.getSwipeDirection=_t.getSlideCount=_t.getRequiredLazySlides=_t.getPreClones=_t.getPostClones=_t.getOnDemandLazySlides=_t.getNavigableIndexes=_t.getHeight=void 0;var t=n(po()),r=n(b0());function n(M){return M&&M.__esModule?M:{default:M}}function i(M){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},i(M)}function o(M,y){var Y=Object.keys(M);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(M);y&&(C=C.filter(function(W){return Object.getOwnPropertyDescriptor(M,W).enumerable})),Y.push.apply(Y,C)}return Y}function s(M){for(var y=1;y<arguments.length;y++){var Y=arguments[y]!=null?arguments[y]:{};y%2?o(Object(Y),!0).forEach(function(C){a(M,C,Y[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(Y)):o(Object(Y)).forEach(function(C){Object.defineProperty(M,C,Object.getOwnPropertyDescriptor(Y,C))})}return M}function a(M,y,Y){return y=c(y),y in M?Object.defineProperty(M,y,{value:Y,enumerable:!0,configurable:!0,writable:!0}):M[y]=Y,M}function c(M){var y=u(M,"string");return i(y)=="symbol"?y:String(y)}function u(M,y){if(i(M)!="object"||!M)return M;var Y=M[Symbol.toPrimitive];if(Y!==void 0){var C=Y.call(M,y);if(i(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(M)}function h(M,y,Y){return Math.max(y,Math.min(M,Y))}var p=_t.safePreventDefault=function(y){var Y=["onTouchStart","onTouchMove","onWheel"];Y.includes(y._reactName)||y.preventDefault()},x=_t.getOnDemandLazySlides=function(y){for(var Y=[],C=b(y),W=m(y),L=C;L<W;L++)y.lazyLoadedList.indexOf(L)<0&&Y.push(L);return Y};_t.getRequiredLazySlides=function(y){for(var Y=[],C=b(y),W=m(y),L=C;L<W;L++)Y.push(L);return Y};var b=_t.lazyStartIndex=function(y){return y.currentSlide-_(y)},m=_t.lazyEndIndex=function(y){return y.currentSlide+w(y)},_=_t.lazySlidesOnLeft=function(y){return y.centerMode?Math.floor(y.slidesToShow/2)+(parseInt(y.centerPadding)>0?1:0):0},w=_t.lazySlidesOnRight=function(y){return y.centerMode?Math.floor((y.slidesToShow-1)/2)+1+(parseInt(y.centerPadding)>0?1:0):y.slidesToShow},O=_t.getWidth=function(y){return y&&y.offsetWidth||0},k=_t.getHeight=function(y){return y&&y.offsetHeight||0},T=_t.getSwipeDirection=function(y){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C,W,L,$;return C=y.startX-y.curX,W=y.startY-y.curY,L=Math.atan2(W,C),$=Math.round(L*180/Math.PI),$<0&&($=360-Math.abs($)),$<=45&&$>=0||$<=360&&$>=315?"left":$>=135&&$<=225?"right":Y===!0?$>=35&&$<=135?"up":"down":"vertical"},H=_t.canGoNext=function(y){var Y=!0;return y.infinite||(y.centerMode&&y.currentSlide>=y.slideCount-1||y.slideCount<=y.slidesToShow||y.currentSlide>=y.slideCount-y.slidesToShow)&&(Y=!1),Y};_t.extractObject=function(y,Y){var C={};return Y.forEach(function(W){return C[W]=y[W]}),C},_t.initializedState=function(y){var Y=t.default.Children.count(y.children),C=y.listRef,W=Math.ceil(O(C)),L=y.trackRef&&y.trackRef.node,$=Math.ceil(O(L)),Q;if(y.vertical)Q=W;else{var ie=y.centerMode&&parseInt(y.centerPadding)*2;typeof y.centerPadding=="string"&&y.centerPadding.slice(-1)==="%"&&(ie*=W/100),Q=Math.ceil((W-ie)/y.slidesToShow)}var de=C&&k(C.querySelector('[data-index="0"]')),le=de*y.slidesToShow,be=y.currentSlide===void 0?y.initialSlide:y.currentSlide;y.rtl&&y.currentSlide===void 0&&(be=Y-1-y.initialSlide);var fe=y.lazyLoadedList||[],Fe=x(s(s({},y),{},{currentSlide:be,lazyLoadedList:fe}));fe=fe.concat(Fe);var Oe={slideCount:Y,slideWidth:Q,listWidth:W,trackWidth:$,currentSlide:be,slideHeight:de,listHeight:le,lazyLoadedList:fe};return y.autoplaying===null&&y.autoplay&&(Oe.autoplaying="playing"),Oe},_t.slideHandler=function(y){var Y=y.waitForAnimate,C=y.animating,W=y.fade,L=y.infinite,$=y.index,Q=y.slideCount,ie=y.lazyLoad,de=y.currentSlide,le=y.centerMode,be=y.slidesToScroll,fe=y.slidesToShow,Fe=y.useCSS,Oe=y.lazyLoadedList;if(Y&&C)return{};var Ue=$,ye,ee,_e,Me={},Le={},ue=L?$:h($,0,Q-1);if(W){if(!L&&($<0||$>=Q))return{};$<0?Ue=$+Q:$>=Q&&(Ue=$-Q),ie&&Oe.indexOf(Ue)<0&&(Oe=Oe.concat(Ue)),Me={animating:!0,currentSlide:Ue,lazyLoadedList:Oe,targetSlide:Ue},Le={animating:!1,targetSlide:Ue}}else ye=Ue,Ue<0?(ye=Ue+Q,L?Q%be!==0&&(ye=Q-Q%be):ye=0):!H(y)&&Ue>de?Ue=ye=de:le&&Ue>=Q?(Ue=L?Q:Q-1,ye=L?0:Q-1):Ue>=Q&&(ye=Ue-Q,L?Q%be!==0&&(ye=0):ye=Q-fe),!L&&Ue+fe>=Q&&(ye=Q-fe),ee=P(s(s({},y),{},{slideIndex:Ue})),_e=P(s(s({},y),{},{slideIndex:ye})),L||(ee===_e&&(Ue=ye),ee=_e),ie&&(Oe=Oe.concat(x(s(s({},y),{},{currentSlide:Ue})))),Fe?(Me={animating:!0,currentSlide:ye,trackStyle:R(s(s({},y),{},{left:ee})),lazyLoadedList:Oe,targetSlide:ue},Le={animating:!1,currentSlide:ye,trackStyle:V(s(s({},y),{},{left:_e})),swipeLeft:null,targetSlide:ue}):Me={currentSlide:ye,trackStyle:V(s(s({},y),{},{left:_e})),lazyLoadedList:Oe,targetSlide:ue};return{state:Me,nextState:Le}},_t.changeSlide=function(y,Y){var C,W,L,$,Q,ie=y.slidesToScroll,de=y.slidesToShow,le=y.slideCount,be=y.currentSlide,fe=y.targetSlide,Fe=y.lazyLoad,Oe=y.infinite;if($=le%ie!==0,C=$?0:(le-be)%ie,Y.message==="previous")L=C===0?ie:de-C,Q=be-L,Fe&&!Oe&&(W=be-L,Q=W===-1?le-1:W),Oe||(Q=fe-ie);else if(Y.message==="next")L=C===0?ie:C,Q=be+L,Fe&&!Oe&&(Q=(be+ie)%le+C),Oe||(Q=fe+ie);else if(Y.message==="dots")Q=Y.index*Y.slidesToScroll;else if(Y.message==="children"){if(Q=Y.index,Oe){var Ue=z(s(s({},y),{},{targetSlide:Q}));Q>Y.currentSlide&&Ue==="left"?Q=Q-le:Q<Y.currentSlide&&Ue==="right"&&(Q=Q+le)}}else Y.message==="index"&&(Q=Number(Y.index));return Q},_t.keyHandler=function(y,Y,C){return y.target.tagName.match("TEXTAREA|INPUT|SELECT")||!Y?"":y.keyCode===37?C?"next":"previous":y.keyCode===39?C?"previous":"next":""},_t.swipeStart=function(y,Y,C){return y.target.tagName==="IMG"&&p(y),!Y||!C&&y.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:y.touches?y.touches[0].pageX:y.clientX,startY:y.touches?y.touches[0].pageY:y.clientY,curX:y.touches?y.touches[0].pageX:y.clientX,curY:y.touches?y.touches[0].pageY:y.clientY}}},_t.swipeMove=function(y,Y){var C=Y.scrolling,W=Y.animating,L=Y.vertical,$=Y.swipeToSlide,Q=Y.verticalSwiping,ie=Y.rtl,de=Y.currentSlide,le=Y.edgeFriction,be=Y.edgeDragged,fe=Y.onEdge,Fe=Y.swiped,Oe=Y.swiping,Ue=Y.slideCount,ye=Y.slidesToScroll,ee=Y.infinite,_e=Y.touchObject,Me=Y.swipeEvent,Le=Y.listHeight,ue=Y.listWidth;if(!C){if(W)return p(y);L&&$&&Q&&p(y);var Ye,Ze={},mt=P(Y);_e.curX=y.touches?y.touches[0].pageX:y.clientX,_e.curY=y.touches?y.touches[0].pageY:y.clientY,_e.swipeLength=Math.round(Math.sqrt(Math.pow(_e.curX-_e.startX,2)));var $e=Math.round(Math.sqrt(Math.pow(_e.curY-_e.startY,2)));if(!Q&&!Oe&&$e>10)return{scrolling:!0};Q&&(_e.swipeLength=$e);var je=(ie?-1:1)*(_e.curX>_e.startX?1:-1);Q&&(je=_e.curY>_e.startY?1:-1);var ve=Math.ceil(Ue/ye),Pe=T(Y.touchObject,Q),De=_e.swipeLength;return ee||(de===0&&(Pe==="right"||Pe==="down")||de+1>=ve&&(Pe==="left"||Pe==="up")||!H(Y)&&(Pe==="left"||Pe==="up"))&&(De=_e.swipeLength*le,be===!1&&fe&&(fe(Pe),Ze.edgeDragged=!0)),!Fe&&Me&&(Me(Pe),Ze.swiped=!0),L?Ye=mt+De*(Le/ue)*je:ie?Ye=mt-De*je:Ye=mt+De*je,Q&&(Ye=mt+De*je),Ze=s(s({},Ze),{},{touchObject:_e,swipeLeft:Ye,trackStyle:V(s(s({},Y),{},{left:Ye}))}),Math.abs(_e.curX-_e.startX)<Math.abs(_e.curY-_e.startY)*.8||_e.swipeLength>10&&(Ze.swiping=!0,p(y)),Ze}},_t.swipeEnd=function(y,Y){var C=Y.dragging,W=Y.swipe,L=Y.touchObject,$=Y.listWidth,Q=Y.touchThreshold,ie=Y.verticalSwiping,de=Y.listHeight,le=Y.swipeToSlide,be=Y.scrolling,fe=Y.onSwipe,Fe=Y.targetSlide,Oe=Y.currentSlide,Ue=Y.infinite;if(!C)return W&&p(y),{};var ye=ie?de/Q:$/Q,ee=T(L,ie),_e={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(be||!L.swipeLength)return _e;if(L.swipeLength>ye){p(y),fe&&fe(ee);var Me,Le,ue=Ue?Oe:Fe;switch(ee){case"left":case"up":Le=ue+D(Y),Me=le?N(Y,Le):Le,_e.currentDirection=0;break;case"right":case"down":Le=ue-D(Y),Me=le?N(Y,Le):Le,_e.currentDirection=1;break;default:Me=ue}_e.triggerSlideHandler=Me}else{var Ye=P(Y);_e.trackStyle=R(s(s({},Y),{},{left:Ye}))}return _e};var Z=_t.getNavigableIndexes=function(y){for(var Y=y.infinite?y.slideCount*2:y.slideCount,C=y.infinite?y.slidesToShow*-1:0,W=y.infinite?y.slidesToShow*-1:0,L=[];C<Y;)L.push(C),C=W+y.slidesToScroll,W+=Math.min(y.slidesToScroll,y.slidesToShow);return L},N=_t.checkNavigable=function(y,Y){var C=Z(y),W=0;if(Y>C[C.length-1])Y=C[C.length-1];else for(var L in C){if(Y<C[L]){Y=W;break}W=C[L]}return Y},D=_t.getSlideCount=function(y){var Y=y.centerMode?y.slideWidth*Math.floor(y.slidesToShow/2):0;if(y.swipeToSlide){var C,W=y.listRef,L=W.querySelectorAll&&W.querySelectorAll(".slick-slide")||[];if(Array.from(L).every(function(ie){if(y.vertical){if(ie.offsetTop+k(ie)/2>y.swipeLeft*-1)return C=ie,!1}else if(ie.offsetLeft-Y+O(ie)/2>y.swipeLeft*-1)return C=ie,!1;return!0}),!C)return 0;var $=y.rtl===!0?y.slideCount-y.currentSlide:y.currentSlide,Q=Math.abs(C.dataset.index-$)||1;return Q}else return y.slidesToScroll},B=_t.checkSpecKeys=function(y,Y){return Y.reduce(function(C,W){return C&&y.hasOwnProperty(W)},!0)?null:console.error("Keys Missing:",y)},V=_t.getTrackCSS=function(y){B(y,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var Y,C,W=y.slideCount+2*y.slidesToShow;y.vertical?C=W*y.slideHeight:Y=E(y)*y.slideWidth;var L={opacity:1,transition:"",WebkitTransition:""};if(y.useTransform){var $=y.vertical?"translate3d(0px, "+y.left+"px, 0px)":"translate3d("+y.left+"px, 0px, 0px)",Q=y.vertical?"translate3d(0px, "+y.left+"px, 0px)":"translate3d("+y.left+"px, 0px, 0px)",ie=y.vertical?"translateY("+y.left+"px)":"translateX("+y.left+"px)";L=s(s({},L),{},{WebkitTransform:$,transform:Q,msTransform:ie})}else y.vertical?L.top=y.left:L.left=y.left;return y.fade&&(L={opacity:1}),Y&&(L.width=Y),C&&(L.height=C),window&&!window.addEventListener&&window.attachEvent&&(y.vertical?L.marginTop=y.left+"px":L.marginLeft=y.left+"px"),L},R=_t.getTrackAnimateCSS=function(y){B(y,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var Y=V(y);return y.useTransform?(Y.WebkitTransition="-webkit-transform "+y.speed+"ms "+y.cssEase,Y.transition="transform "+y.speed+"ms "+y.cssEase):y.vertical?Y.transition="top "+y.speed+"ms "+y.cssEase:Y.transition="left "+y.speed+"ms "+y.cssEase,Y},P=_t.getTrackLeft=function(y){if(y.unslick)return 0;B(y,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var Y=y.slideIndex,C=y.trackRef,W=y.infinite,L=y.centerMode,$=y.slideCount,Q=y.slidesToShow,ie=y.slidesToScroll,de=y.slideWidth,le=y.listWidth,be=y.variableWidth,fe=y.slideHeight,Fe=y.fade,Oe=y.vertical,Ue=0,ye,ee,_e=0;if(Fe||y.slideCount===1)return 0;var Me=0;if(W?(Me=-j(y),$%ie!==0&&Y+ie>$&&(Me=-(Y>$?Q-(Y-$):$%ie)),L&&(Me+=parseInt(Q/2))):($%ie!==0&&Y+ie>$&&(Me=Q-$%ie),L&&(Me=parseInt(Q/2))),Ue=Me*de,_e=Me*fe,Oe?ye=Y*fe*-1+_e:ye=Y*de*-1+Ue,be===!0){var Le,ue=C&&C.node;if(Le=Y+j(y),ee=ue&&ue.childNodes[Le],ye=ee?ee.offsetLeft*-1:0,L===!0){Le=W?Y+j(y):Y,ee=ue&&ue.children[Le],ye=0;for(var Ye=0;Ye<Le;Ye++)ye-=ue&&ue.children[Ye]&&ue.children[Ye].offsetWidth;ye-=parseInt(y.centerPadding),ye+=ee&&(le-ee.offsetWidth)/2}}return ye},j=_t.getPreClones=function(y){return y.unslick||!y.infinite?0:y.variableWidth?y.slideCount:y.slidesToShow+(y.centerMode?1:0)},A=_t.getPostClones=function(y){return y.unslick||!y.infinite?0:y.slideCount},E=_t.getTotalSlides=function(y){return y.slideCount===1?1:j(y)+y.slideCount+A(y)},z=_t.siblingDirection=function(y){return y.targetSlide>y.currentSlide?y.targetSlide>y.currentSlide+se(y)?"left":"right":y.targetSlide<y.currentSlide-re(y)?"right":"left"},se=_t.slidesOnRight=function(y){var Y=y.slidesToShow,C=y.centerMode,W=y.rtl,L=y.centerPadding;if(C){var $=(Y-1)/2+1;return parseInt(L)>0&&($+=1),W&&Y%2===0&&($+=1),$}return W?0:Y-1},re=_t.slidesOnLeft=function(y){var Y=y.slidesToShow,C=y.centerMode,W=y.rtl,L=y.centerPadding;if(C){var $=(Y-1)/2+1;return parseInt(L)>0&&($+=1),!W&&Y%2===0&&($+=1),$}return W?Y-1:0};_t.canUseDOM=function(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)};var v=_t.validSettings=Object.keys(r.default);function ne(M){return v.reduce(function(y,Y){return M.hasOwnProperty(Y)&&(y[Y]=M[Y]),y},{})}return _t}var Ja={},bf;function O5(){if(bf)return Ja;bf=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.Track=void 0;var t=i(po()),r=i(ed()),n=ml();function i(R){return R&&R.__esModule?R:{default:R}}function o(R){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},o(R)}function s(){return s=Object.assign?Object.assign.bind():function(R){for(var P=1;P<arguments.length;P++){var j=arguments[P];for(var A in j)Object.prototype.hasOwnProperty.call(j,A)&&(R[A]=j[A])}return R},s.apply(this,arguments)}function a(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function c(R,P){for(var j=0;j<P.length;j++){var A=P[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,H(A.key),A)}}function u(R,P,j){return P&&c(R.prototype,P),Object.defineProperty(R,"prototype",{writable:!1}),R}function h(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),P&&p(R,P)}function p(R,P){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,E){return A.__proto__=E,A},p(R,P)}function x(R){var P=_();return function(){var A=w(R),E;if(P){var z=w(this).constructor;E=Reflect.construct(A,arguments,z)}else E=A.apply(this,arguments);return b(this,E)}}function b(R,P){if(P&&(o(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(R)}function m(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function _(){try{var R=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_=function(){return!!R})()}function w(R){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},w(R)}function O(R,P){var j=Object.keys(R);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(R);P&&(A=A.filter(function(E){return Object.getOwnPropertyDescriptor(R,E).enumerable})),j.push.apply(j,A)}return j}function k(R){for(var P=1;P<arguments.length;P++){var j=arguments[P]!=null?arguments[P]:{};P%2?O(Object(j),!0).forEach(function(A){T(R,A,j[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(j)):O(Object(j)).forEach(function(A){Object.defineProperty(R,A,Object.getOwnPropertyDescriptor(j,A))})}return R}function T(R,P,j){return P=H(P),P in R?Object.defineProperty(R,P,{value:j,enumerable:!0,configurable:!0,writable:!0}):R[P]=j,R}function H(R){var P=Z(R,"string");return o(P)=="symbol"?P:String(P)}function Z(R,P){if(o(R)!="object"||!R)return R;var j=R[Symbol.toPrimitive];if(j!==void 0){var A=j.call(R,P);if(o(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(R)}var N=function(P){var j,A,E,z,se;P.rtl?se=P.slideCount-1-P.index:se=P.index,E=se<0||se>=P.slideCount,P.centerMode?(z=Math.floor(P.slidesToShow/2),A=(se-P.currentSlide)%P.slideCount===0,se>P.currentSlide-z-1&&se<=P.currentSlide+z&&(j=!0)):j=P.currentSlide<=se&&se<P.currentSlide+P.slidesToShow;var re;P.targetSlide<0?re=P.targetSlide+P.slideCount:P.targetSlide>=P.slideCount?re=P.targetSlide-P.slideCount:re=P.targetSlide;var v=se===re;return{"slick-slide":!0,"slick-active":j,"slick-center":A,"slick-cloned":E,"slick-current":v}},D=function(P){var j={};return(P.variableWidth===void 0||P.variableWidth===!1)&&(j.width=P.slideWidth),P.fade&&(j.position="relative",P.vertical?j.top=-P.index*parseInt(P.slideHeight):j.left=-P.index*parseInt(P.slideWidth),j.opacity=P.currentSlide===P.index?1:0,j.zIndex=P.currentSlide===P.index?999:998,P.useCSS&&(j.transition="opacity "+P.speed+"ms "+P.cssEase+", visibility "+P.speed+"ms "+P.cssEase)),j},B=function(P,j){return P.key||j},V=function(P){var j,A=[],E=[],z=[],se=t.default.Children.count(P.children),re=(0,n.lazyStartIndex)(P),v=(0,n.lazyEndIndex)(P);return t.default.Children.forEach(P.children,function(ne,M){var y,Y={message:"children",index:M,slidesToScroll:P.slidesToScroll,currentSlide:P.currentSlide};!P.lazyLoad||P.lazyLoad&&P.lazyLoadedList.indexOf(M)>=0?y=ne:y=t.default.createElement("div",null);var C=D(k(k({},P),{},{index:M})),W=y.props.className||"",L=N(k(k({},P),{},{index:M}));if(A.push(t.default.cloneElement(y,{key:"original"+B(y,M),"data-index":M,className:(0,r.default)(L,W),tabIndex:"-1","aria-hidden":!L["slick-active"],style:k(k({outline:"none"},y.props.style||{}),C),onClick:function(ie){y.props&&y.props.onClick&&y.props.onClick(ie),P.focusOnSelect&&P.focusOnSelect(Y)}})),P.infinite&&P.fade===!1){var $=se-M;$<=(0,n.getPreClones)(P)&&(j=-$,j>=re&&(y=ne),L=N(k(k({},P),{},{index:j})),E.push(t.default.cloneElement(y,{key:"precloned"+B(y,j),"data-index":j,tabIndex:"-1",className:(0,r.default)(L,W),"aria-hidden":!L["slick-active"],style:k(k({},y.props.style||{}),C),onClick:function(ie){y.props&&y.props.onClick&&y.props.onClick(ie),P.focusOnSelect&&P.focusOnSelect(Y)}}))),j=se+M,j<v&&(y=ne),L=N(k(k({},P),{},{index:j})),z.push(t.default.cloneElement(y,{key:"postcloned"+B(y,j),"data-index":j,tabIndex:"-1",className:(0,r.default)(L,W),"aria-hidden":!L["slick-active"],style:k(k({},y.props.style||{}),C),onClick:function(ie){y.props&&y.props.onClick&&y.props.onClick(ie),P.focusOnSelect&&P.focusOnSelect(Y)}}))}}),P.rtl?E.concat(A,z).reverse():E.concat(A,z)};return Ja.Track=function(R){h(j,R);var P=x(j);function j(){var A;a(this,j);for(var E=arguments.length,z=new Array(E),se=0;se<E;se++)z[se]=arguments[se];return A=P.call.apply(P,[this].concat(z)),T(m(A),"node",null),T(m(A),"handleRef",function(re){A.node=re}),A}return u(j,[{key:"render",value:function(){var E=V(this.props),z=this.props,se=z.onMouseEnter,re=z.onMouseOver,v=z.onMouseLeave,ne={onMouseEnter:se,onMouseOver:re,onMouseLeave:v};return t.default.createElement("div",s({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},ne),E)}}]),j}(t.default.PureComponent),Ja}var Xa={},yf;function R5(){if(yf)return Xa;yf=1;function t(N){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},t(N)}Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.Dots=void 0;var r=o(po()),n=o(ed()),i=ml();function o(N){return N&&N.__esModule?N:{default:N}}function s(N,D){var B=Object.keys(N);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(N);D&&(V=V.filter(function(R){return Object.getOwnPropertyDescriptor(N,R).enumerable})),B.push.apply(B,V)}return B}function a(N){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?s(Object(B),!0).forEach(function(V){c(N,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(B)):s(Object(B)).forEach(function(V){Object.defineProperty(N,V,Object.getOwnPropertyDescriptor(B,V))})}return N}function c(N,D,B){return D=x(D),D in N?Object.defineProperty(N,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):N[D]=B,N}function u(N,D){if(!(N instanceof D))throw new TypeError("Cannot call a class as a function")}function h(N,D){for(var B=0;B<D.length;B++){var V=D[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(N,x(V.key),V)}}function p(N,D,B){return D&&h(N.prototype,D),Object.defineProperty(N,"prototype",{writable:!1}),N}function x(N){var D=b(N,"string");return t(D)=="symbol"?D:String(D)}function b(N,D){if(t(N)!="object"||!N)return N;var B=N[Symbol.toPrimitive];if(B!==void 0){var V=B.call(N,D);if(t(V)!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(N)}function m(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(D&&D.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),D&&_(N,D)}function _(N,D){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,R){return V.__proto__=R,V},_(N,D)}function w(N){var D=T();return function(){var V=H(N),R;if(D){var P=H(this).constructor;R=Reflect.construct(V,arguments,P)}else R=V.apply(this,arguments);return O(this,R)}}function O(N,D){if(D&&(t(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(N)}function k(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function T(){try{var N=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T=function(){return!!N})()}function H(N){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)},H(N)}var Z=function(D){var B;return D.infinite?B=Math.ceil(D.slideCount/D.slidesToScroll):B=Math.ceil((D.slideCount-D.slidesToShow)/D.slidesToScroll)+1,B};return Xa.Dots=function(N){m(B,N);var D=w(B);function B(){return u(this,B),D.apply(this,arguments)}return p(B,[{key:"clickHandler",value:function(R,P){P.preventDefault(),this.props.clickHandler(R)}},{key:"render",value:function(){for(var R=this.props,P=R.onMouseEnter,j=R.onMouseOver,A=R.onMouseLeave,E=R.infinite,z=R.slidesToScroll,se=R.slidesToShow,re=R.slideCount,v=R.currentSlide,ne=Z({slideCount:re,slidesToScroll:z,slidesToShow:se,infinite:E}),M={onMouseEnter:P,onMouseOver:j,onMouseLeave:A},y=[],Y=0;Y<ne;Y++){var C=(Y+1)*z-1,W=E?C:(0,i.clamp)(C,0,re-1),L=W-(z-1),$=E?L:(0,i.clamp)(L,0,re-1),Q=(0,n.default)({"slick-active":E?v>=$&&v<=W:v===$}),ie={message:"dots",index:Y,slidesToScroll:z,currentSlide:v},de=this.clickHandler.bind(this,ie);y=y.concat(r.default.createElement("li",{key:Y,className:Q},r.default.cloneElement(this.props.customPaging(Y),{onClick:de})))}return r.default.cloneElement(this.props.appendDots(y),a({className:this.props.dotsClass},M))}}]),B}(r.default.PureComponent),Xa}var Xs={},vf;function E5(){if(vf)return Xs;vf=1;function t(N){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},t(N)}Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.PrevArrow=Xs.NextArrow=void 0;var r=o(po()),n=o(ed()),i=ml();function o(N){return N&&N.__esModule?N:{default:N}}function s(){return s=Object.assign?Object.assign.bind():function(N){for(var D=1;D<arguments.length;D++){var B=arguments[D];for(var V in B)Object.prototype.hasOwnProperty.call(B,V)&&(N[V]=B[V])}return N},s.apply(this,arguments)}function a(N,D){var B=Object.keys(N);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(N);D&&(V=V.filter(function(R){return Object.getOwnPropertyDescriptor(N,R).enumerable})),B.push.apply(B,V)}return B}function c(N){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?a(Object(B),!0).forEach(function(V){u(N,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(B)):a(Object(B)).forEach(function(V){Object.defineProperty(N,V,Object.getOwnPropertyDescriptor(B,V))})}return N}function u(N,D,B){return D=b(D),D in N?Object.defineProperty(N,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):N[D]=B,N}function h(N,D){if(!(N instanceof D))throw new TypeError("Cannot call a class as a function")}function p(N,D){for(var B=0;B<D.length;B++){var V=D[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(N,b(V.key),V)}}function x(N,D,B){return D&&p(N.prototype,D),Object.defineProperty(N,"prototype",{writable:!1}),N}function b(N){var D=m(N,"string");return t(D)=="symbol"?D:String(D)}function m(N,D){if(t(N)!="object"||!N)return N;var B=N[Symbol.toPrimitive];if(B!==void 0){var V=B.call(N,D);if(t(V)!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(N)}function _(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(D&&D.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),D&&w(N,D)}function w(N,D){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,R){return V.__proto__=R,V},w(N,D)}function O(N){var D=H();return function(){var V=Z(N),R;if(D){var P=Z(this).constructor;R=Reflect.construct(V,arguments,P)}else R=V.apply(this,arguments);return k(this,R)}}function k(N,D){if(D&&(t(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(N)}function T(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function H(){try{var N=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H=function(){return!!N})()}function Z(N){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)},Z(N)}return Xs.PrevArrow=function(N){_(B,N);var D=O(B);function B(){return h(this,B),D.apply(this,arguments)}return x(B,[{key:"clickHandler",value:function(R,P){P&&P.preventDefault(),this.props.clickHandler(R,P)}},{key:"render",value:function(){var R={"slick-arrow":!0,"slick-prev":!0},P=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(R["slick-disabled"]=!0,P=null);var j={key:"0","data-role":"none",className:(0,n.default)(R),style:{display:"block"},onClick:P},A={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},E;return this.props.prevArrow?E=r.default.cloneElement(this.props.prevArrow,c(c({},j),A)):E=r.default.createElement("button",s({key:"0",type:"button"},j)," ","Previous"),E}}]),B}(r.default.PureComponent),Xs.NextArrow=function(N){_(B,N);var D=O(B);function B(){return h(this,B),D.apply(this,arguments)}return x(B,[{key:"clickHandler",value:function(R,P){P&&P.preventDefault(),this.props.clickHandler(R,P)}},{key:"render",value:function(){var R={"slick-arrow":!0,"slick-next":!0},P=this.clickHandler.bind(this,{message:"next"});(0,i.canGoNext)(this.props)||(R["slick-disabled"]=!0,P=null);var j={key:"1","data-role":"none",className:(0,n.default)(R),style:{display:"block"},onClick:P},A={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},E;return this.props.nextArrow?E=r.default.cloneElement(this.props.nextArrow,c(c({},j),A)):E=r.default.createElement("button",s({key:"1",type:"button"},j)," ","Next"),E}}]),B}(r.default.PureComponent),Xs}var y0=function(){if(typeof Map!="undefined")return Map;function t(r,n){var i=-1;return r.some(function(o,s){return o[0]===n?(i=s,!0):!1}),i}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(n){var i=t(this.__entries__,n),o=this.__entries__[i];return o&&o[1]},r.prototype.set=function(n,i){var o=t(this.__entries__,n);~o?this.__entries__[o][1]=i:this.__entries__.push([n,i])},r.prototype.delete=function(n){var i=this.__entries__,o=t(i,n);~o&&i.splice(o,1)},r.prototype.has=function(n){return!!~t(this.__entries__,n)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var o=0,s=this.__entries__;o<s.length;o++){var a=s[o];n.call(i,a[1],a[0])}},r}()}(),Tu=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Tc=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),T5=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Tc):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),z5=2;function F5(t,r){var n=!1,i=!1,o=0;function s(){n&&(n=!1,t()),i&&c()}function a(){T5(s)}function c(){var u=Date.now();if(n){if(u-o<z5)return;i=!0}else n=!0,i=!1,setTimeout(a,r);o=u}return c}var I5=20,M5=["top","right","bottom","left","width","height","size","weight"],D5=typeof MutationObserver!="undefined",B5=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=F5(this.refresh.bind(this),I5)}return t.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},t.prototype.removeObserver=function(r){var n=this.observers_,i=n.indexOf(r);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},t.prototype.updateObservers_=function(){var r=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return r.forEach(function(n){return n.broadcastActive()}),r.length>0},t.prototype.connect_=function(){!Tu||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),D5?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!Tu||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(r){var n=r.propertyName,i=n===void 0?"":n,o=M5.some(function(s){return!!~i.indexOf(s)});o&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),v0=function(t,r){for(var n=0,i=Object.keys(r);n<i.length;n++){var o=i[n];Object.defineProperty(t,o,{value:r[o],enumerable:!1,writable:!1,configurable:!0})}return t},la=function(t){var r=t&&t.ownerDocument&&t.ownerDocument.defaultView;return r||Tc},w0=td(0,0,0,0);function zc(t){return parseFloat(t)||0}function wf(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return r.reduce(function(i,o){var s=t["border-"+o+"-width"];return i+zc(s)},0)}function q5(t){for(var r=["top","right","bottom","left"],n={},i=0,o=r;i<o.length;i++){var s=o[i],a=t["padding-"+s];n[s]=zc(a)}return n}function W5(t){var r=t.getBBox();return td(0,0,r.width,r.height)}function U5(t){var r=t.clientWidth,n=t.clientHeight;if(!r&&!n)return w0;var i=la(t).getComputedStyle(t),o=q5(i),s=o.left+o.right,a=o.top+o.bottom,c=zc(i.width),u=zc(i.height);if(i.boxSizing==="border-box"&&(Math.round(c+s)!==r&&(c-=wf(i,"left","right")+s),Math.round(u+a)!==n&&(u-=wf(i,"top","bottom")+a)),!$5(t)){var h=Math.round(c+s)-r,p=Math.round(u+a)-n;Math.abs(h)!==1&&(c-=h),Math.abs(p)!==1&&(u-=p)}return td(o.left,o.top,c,u)}var H5=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof la(t).SVGGraphicsElement}:function(t){return t instanceof la(t).SVGElement&&typeof t.getBBox=="function"}}();function $5(t){return t===la(t).document.documentElement}function G5(t){return Tu?H5(t)?W5(t):U5(t):w0}function V5(t){var r=t.x,n=t.y,i=t.width,o=t.height,s=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return v0(a,{x:r,y:n,width:i,height:o,top:n,right:r+i,bottom:o+n,left:r}),a}function td(t,r,n,i){return{x:t,y:r,width:n,height:i}}var Y5=function(){function t(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=td(0,0,0,0),this.target=r}return t.prototype.isActive=function(){var r=G5(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},t}(),J5=function(){function t(r,n){var i=V5(n);v0(this,{target:r,contentRect:i})}return t}(),X5=function(){function t(r,n,i){if(this.activeObservations_=[],this.observations_=new y0,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(r instanceof la(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(r)||(n.set(r,new Y5(r)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(r instanceof la(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(r)&&(n.delete(r),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&r.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new J5(i.target,i.broadcastRect())});this.callback_.call(r,n,r),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),j0=typeof WeakMap!="undefined"?new WeakMap:new y0,S0=function(){function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=B5.getInstance(),i=new X5(r,n,this);j0.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){S0.prototype[t]=function(){var r;return(r=j0.get(this))[t].apply(r,arguments)}});var K5=function(){return typeof Tc.ResizeObserver!="undefined"?Tc.ResizeObserver:S0}();const Q5=Object.freeze(Object.defineProperty({__proto__:null,default:K5},Symbol.toStringTag,{value:"Module"})),Z5=ug(Q5);var jf;function eb(){if(jf)return Ya;jf=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.InnerSlider=void 0;var t=h(po()),r=h(P5()),n=h(N5()),i=h(ed()),o=ml(),s=O5(),a=R5(),c=E5(),u=h(Z5);function h(E){return E&&E.__esModule?E:{default:E}}function p(E){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},p(E)}function x(){return x=Object.assign?Object.assign.bind():function(E){for(var z=1;z<arguments.length;z++){var se=arguments[z];for(var re in se)Object.prototype.hasOwnProperty.call(se,re)&&(E[re]=se[re])}return E},x.apply(this,arguments)}function b(E,z){if(E==null)return{};var se=m(E,z),re,v;if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(E);for(v=0;v<ne.length;v++)re=ne[v],!(z.indexOf(re)>=0)&&Object.prototype.propertyIsEnumerable.call(E,re)&&(se[re]=E[re])}return se}function m(E,z){if(E==null)return{};var se={},re=Object.keys(E),v,ne;for(ne=0;ne<re.length;ne++)v=re[ne],!(z.indexOf(v)>=0)&&(se[v]=E[v]);return se}function _(E,z){var se=Object.keys(E);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(E);z&&(re=re.filter(function(v){return Object.getOwnPropertyDescriptor(E,v).enumerable})),se.push.apply(se,re)}return se}function w(E){for(var z=1;z<arguments.length;z++){var se=arguments[z]!=null?arguments[z]:{};z%2?_(Object(se),!0).forEach(function(re){P(E,re,se[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(se)):_(Object(se)).forEach(function(re){Object.defineProperty(E,re,Object.getOwnPropertyDescriptor(se,re))})}return E}function O(E,z){if(!(E instanceof z))throw new TypeError("Cannot call a class as a function")}function k(E,z){for(var se=0;se<z.length;se++){var re=z[se];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(E,j(re.key),re)}}function T(E,z,se){return z&&k(E.prototype,z),Object.defineProperty(E,"prototype",{writable:!1}),E}function H(E,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(z&&z.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),z&&Z(E,z)}function Z(E,z){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(re,v){return re.__proto__=v,re},Z(E,z)}function N(E){var z=V();return function(){var re=R(E),v;if(z){var ne=R(this).constructor;v=Reflect.construct(re,arguments,ne)}else v=re.apply(this,arguments);return D(this,v)}}function D(E,z){if(z&&(p(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(E)}function B(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function V(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V=function(){return!!E})()}function R(E){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(se){return se.__proto__||Object.getPrototypeOf(se)},R(E)}function P(E,z,se){return z=j(z),z in E?Object.defineProperty(E,z,{value:se,enumerable:!0,configurable:!0,writable:!0}):E[z]=se,E}function j(E){var z=A(E,"string");return p(z)=="symbol"?z:String(z)}function A(E,z){if(p(E)!="object"||!E)return E;var se=E[Symbol.toPrimitive];if(se!==void 0){var re=se.call(E,z);if(p(re)!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(E)}return Ya.InnerSlider=function(E){H(se,E);var z=N(se);function se(re){var v;O(this,se),v=z.call(this,re),P(B(v),"listRefHandler",function(M){return v.list=M}),P(B(v),"trackRefHandler",function(M){return v.track=M}),P(B(v),"adaptHeight",function(){if(v.props.adaptiveHeight&&v.list){var M=v.list.querySelector('[data-index="'.concat(v.state.currentSlide,'"]'));v.list.style.height=(0,o.getHeight)(M)+"px"}}),P(B(v),"componentDidMount",function(){if(v.props.onInit&&v.props.onInit(),v.props.lazyLoad){var M=(0,o.getOnDemandLazySlides)(w(w({},v.props),v.state));M.length>0&&(v.setState(function(Y){return{lazyLoadedList:Y.lazyLoadedList.concat(M)}}),v.props.onLazyLoad&&v.props.onLazyLoad(M))}var y=w({listRef:v.list,trackRef:v.track},v.props);v.updateState(y,!0,function(){v.adaptHeight(),v.props.autoplay&&v.autoPlay("update")}),v.props.lazyLoad==="progressive"&&(v.lazyLoadTimer=setInterval(v.progressiveLazyLoad,1e3)),v.ro=new u.default(function(){v.state.animating?(v.onWindowResized(!1),v.callbackTimers.push(setTimeout(function(){return v.onWindowResized()},v.props.speed))):v.onWindowResized()}),v.ro.observe(v.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(Y){Y.onfocus=v.props.pauseOnFocus?v.onSlideFocus:null,Y.onblur=v.props.pauseOnFocus?v.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",v.onWindowResized):window.attachEvent("onresize",v.onWindowResized)}),P(B(v),"componentWillUnmount",function(){v.animationEndCallback&&clearTimeout(v.animationEndCallback),v.lazyLoadTimer&&clearInterval(v.lazyLoadTimer),v.callbackTimers.length&&(v.callbackTimers.forEach(function(M){return clearTimeout(M)}),v.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",v.onWindowResized):window.detachEvent("onresize",v.onWindowResized),v.autoplayTimer&&clearInterval(v.autoplayTimer),v.ro.disconnect()}),P(B(v),"componentDidUpdate",function(M){if(v.checkImagesLoad(),v.props.onReInit&&v.props.onReInit(),v.props.lazyLoad){var y=(0,o.getOnDemandLazySlides)(w(w({},v.props),v.state));y.length>0&&(v.setState(function(W){return{lazyLoadedList:W.lazyLoadedList.concat(y)}}),v.props.onLazyLoad&&v.props.onLazyLoad(y))}v.adaptHeight();var Y=w(w({listRef:v.list,trackRef:v.track},v.props),v.state),C=v.didPropsChange(M);C&&v.updateState(Y,C,function(){v.state.currentSlide>=t.default.Children.count(v.props.children)&&v.changeSlide({message:"index",index:t.default.Children.count(v.props.children)-v.props.slidesToShow,currentSlide:v.state.currentSlide}),v.props.autoplay?v.autoPlay("update"):v.pause("paused")})}),P(B(v),"onWindowResized",function(M){v.debouncedResize&&v.debouncedResize.cancel(),v.debouncedResize=(0,n.default)(function(){return v.resizeWindow(M)},50),v.debouncedResize()}),P(B(v),"resizeWindow",function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,y=!!(v.track&&v.track.node);if(y){var Y=w(w({listRef:v.list,trackRef:v.track},v.props),v.state);v.updateState(Y,M,function(){v.props.autoplay?v.autoPlay("update"):v.pause("paused")}),v.setState({animating:!1}),clearTimeout(v.animationEndCallback),delete v.animationEndCallback}}),P(B(v),"updateState",function(M,y,Y){var C=(0,o.initializedState)(M);M=w(w(w({},M),C),{},{slideIndex:C.currentSlide});var W=(0,o.getTrackLeft)(M);M=w(w({},M),{},{left:W});var L=(0,o.getTrackCSS)(M);(y||t.default.Children.count(v.props.children)!==t.default.Children.count(M.children))&&(C.trackStyle=L),v.setState(C,Y)}),P(B(v),"ssrInit",function(){if(v.props.variableWidth){var M=0,y=0,Y=[],C=(0,o.getPreClones)(w(w(w({},v.props),v.state),{},{slideCount:v.props.children.length})),W=(0,o.getPostClones)(w(w(w({},v.props),v.state),{},{slideCount:v.props.children.length}));v.props.children.forEach(function(ee){Y.push(ee.props.style.width),M+=ee.props.style.width});for(var L=0;L<C;L++)y+=Y[Y.length-1-L],M+=Y[Y.length-1-L];for(var $=0;$<W;$++)M+=Y[$];for(var Q=0;Q<v.state.currentSlide;Q++)y+=Y[Q];var ie={width:M+"px",left:-y+"px"};if(v.props.centerMode){var de="".concat(Y[v.state.currentSlide],"px");ie.left="calc(".concat(ie.left," + (100% - ").concat(de,") / 2 ) ")}return{trackStyle:ie}}var le=t.default.Children.count(v.props.children),be=w(w(w({},v.props),v.state),{},{slideCount:le}),fe=(0,o.getPreClones)(be)+(0,o.getPostClones)(be)+le,Fe=100/v.props.slidesToShow*fe,Oe=100/fe,Ue=-Oe*((0,o.getPreClones)(be)+v.state.currentSlide)*Fe/100;v.props.centerMode&&(Ue+=(100-Oe*Fe/100)/2);var ye={width:Fe+"%",left:Ue+"%"};return{slideWidth:Oe+"%",trackStyle:ye}}),P(B(v),"checkImagesLoad",function(){var M=v.list&&v.list.querySelectorAll&&v.list.querySelectorAll(".slick-slide img")||[],y=M.length,Y=0;Array.prototype.forEach.call(M,function(C){var W=function(){return++Y&&Y>=y&&v.onWindowResized()};if(!C.onclick)C.onclick=function(){return C.parentNode.focus()};else{var L=C.onclick;C.onclick=function($){L($),C.parentNode.focus()}}C.onload||(v.props.lazyLoad?C.onload=function(){v.adaptHeight(),v.callbackTimers.push(setTimeout(v.onWindowResized,v.props.speed))}:(C.onload=W,C.onerror=function(){W(),v.props.onLazyLoadError&&v.props.onLazyLoadError()}))})}),P(B(v),"progressiveLazyLoad",function(){for(var M=[],y=w(w({},v.props),v.state),Y=v.state.currentSlide;Y<v.state.slideCount+(0,o.getPostClones)(y);Y++)if(v.state.lazyLoadedList.indexOf(Y)<0){M.push(Y);break}for(var C=v.state.currentSlide-1;C>=-(0,o.getPreClones)(y);C--)if(v.state.lazyLoadedList.indexOf(C)<0){M.push(C);break}M.length>0?(v.setState(function(W){return{lazyLoadedList:W.lazyLoadedList.concat(M)}}),v.props.onLazyLoad&&v.props.onLazyLoad(M)):v.lazyLoadTimer&&(clearInterval(v.lazyLoadTimer),delete v.lazyLoadTimer)}),P(B(v),"slideHandler",function(M){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Y=v.props,C=Y.asNavFor,W=Y.beforeChange,L=Y.onLazyLoad,$=Y.speed,Q=Y.afterChange,ie=v.state.currentSlide,de=(0,o.slideHandler)(w(w(w({index:M},v.props),v.state),{},{trackRef:v.track,useCSS:v.props.useCSS&&!y})),le=de.state,be=de.nextState;if(le){W&&W(ie,le.currentSlide);var fe=le.lazyLoadedList.filter(function(Fe){return v.state.lazyLoadedList.indexOf(Fe)<0});L&&fe.length>0&&L(fe),!v.props.waitForAnimate&&v.animationEndCallback&&(clearTimeout(v.animationEndCallback),Q&&Q(ie),delete v.animationEndCallback),v.setState(le,function(){C&&v.asNavForIndex!==M&&(v.asNavForIndex=M,C.innerSlider.slideHandler(M)),be&&(v.animationEndCallback=setTimeout(function(){var Fe=be.animating,Oe=b(be,["animating"]);v.setState(Oe,function(){v.callbackTimers.push(setTimeout(function(){return v.setState({animating:Fe})},10)),Q&&Q(le.currentSlide),delete v.animationEndCallback})},$))})}}),P(B(v),"changeSlide",function(M){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Y=w(w({},v.props),v.state),C=(0,o.changeSlide)(Y,M);if(!(C!==0&&!C)&&(y===!0?v.slideHandler(C,y):v.slideHandler(C),v.props.autoplay&&v.autoPlay("update"),v.props.focusOnSelect)){var W=v.list.querySelectorAll(".slick-current");W[0]&&W[0].focus()}}),P(B(v),"clickHandler",function(M){v.clickable===!1&&(M.stopPropagation(),M.preventDefault()),v.clickable=!0}),P(B(v),"keyHandler",function(M){var y=(0,o.keyHandler)(M,v.props.accessibility,v.props.rtl);y!==""&&v.changeSlide({message:y})}),P(B(v),"selectHandler",function(M){v.changeSlide(M)}),P(B(v),"disableBodyScroll",function(){var M=function(Y){Y=Y||window.event,Y.preventDefault&&Y.preventDefault(),Y.returnValue=!1};window.ontouchmove=M}),P(B(v),"enableBodyScroll",function(){window.ontouchmove=null}),P(B(v),"swipeStart",function(M){v.props.verticalSwiping&&v.disableBodyScroll();var y=(0,o.swipeStart)(M,v.props.swipe,v.props.draggable);y!==""&&v.setState(y)}),P(B(v),"swipeMove",function(M){var y=(0,o.swipeMove)(M,w(w(w({},v.props),v.state),{},{trackRef:v.track,listRef:v.list,slideIndex:v.state.currentSlide}));y&&(y.swiping&&(v.clickable=!1),v.setState(y))}),P(B(v),"swipeEnd",function(M){var y=(0,o.swipeEnd)(M,w(w(w({},v.props),v.state),{},{trackRef:v.track,listRef:v.list,slideIndex:v.state.currentSlide}));if(y){var Y=y.triggerSlideHandler;delete y.triggerSlideHandler,v.setState(y),Y!==void 0&&(v.slideHandler(Y),v.props.verticalSwiping&&v.enableBodyScroll())}}),P(B(v),"touchEnd",function(M){v.swipeEnd(M),v.clickable=!0}),P(B(v),"slickPrev",function(){v.callbackTimers.push(setTimeout(function(){return v.changeSlide({message:"previous"})},0))}),P(B(v),"slickNext",function(){v.callbackTimers.push(setTimeout(function(){return v.changeSlide({message:"next"})},0))}),P(B(v),"slickGoTo",function(M){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(M=Number(M),isNaN(M))return"";v.callbackTimers.push(setTimeout(function(){return v.changeSlide({message:"index",index:M,currentSlide:v.state.currentSlide},y)},0))}),P(B(v),"play",function(){var M;if(v.props.rtl)M=v.state.currentSlide-v.props.slidesToScroll;else if((0,o.canGoNext)(w(w({},v.props),v.state)))M=v.state.currentSlide+v.props.slidesToScroll;else return!1;v.slideHandler(M)}),P(B(v),"autoPlay",function(M){v.autoplayTimer&&clearInterval(v.autoplayTimer);var y=v.state.autoplaying;if(M==="update"){if(y==="hovered"||y==="focused"||y==="paused")return}else if(M==="leave"){if(y==="paused"||y==="focused")return}else if(M==="blur"&&(y==="paused"||y==="hovered"))return;v.autoplayTimer=setInterval(v.play,v.props.autoplaySpeed+50),v.setState({autoplaying:"playing"})}),P(B(v),"pause",function(M){v.autoplayTimer&&(clearInterval(v.autoplayTimer),v.autoplayTimer=null);var y=v.state.autoplaying;M==="paused"?v.setState({autoplaying:"paused"}):M==="focused"?(y==="hovered"||y==="playing")&&v.setState({autoplaying:"focused"}):y==="playing"&&v.setState({autoplaying:"hovered"})}),P(B(v),"onDotsOver",function(){return v.props.autoplay&&v.pause("hovered")}),P(B(v),"onDotsLeave",function(){return v.props.autoplay&&v.state.autoplaying==="hovered"&&v.autoPlay("leave")}),P(B(v),"onTrackOver",function(){return v.props.autoplay&&v.pause("hovered")}),P(B(v),"onTrackLeave",function(){return v.props.autoplay&&v.state.autoplaying==="hovered"&&v.autoPlay("leave")}),P(B(v),"onSlideFocus",function(){return v.props.autoplay&&v.pause("focused")}),P(B(v),"onSlideBlur",function(){return v.props.autoplay&&v.state.autoplaying==="focused"&&v.autoPlay("blur")}),P(B(v),"render",function(){var M=(0,i.default)("slick-slider",v.props.className,{"slick-vertical":v.props.vertical,"slick-initialized":!0}),y=w(w({},v.props),v.state),Y=(0,o.extractObject)(y,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),C=v.props.pauseOnHover;Y=w(w({},Y),{},{onMouseEnter:C?v.onTrackOver:null,onMouseLeave:C?v.onTrackLeave:null,onMouseOver:C?v.onTrackOver:null,focusOnSelect:v.props.focusOnSelect&&v.clickable?v.selectHandler:null});var W;if(v.props.dots===!0&&v.state.slideCount>=v.props.slidesToShow){var L=(0,o.extractObject)(y,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),$=v.props.pauseOnDotsHover;L=w(w({},L),{},{clickHandler:v.changeSlide,onMouseEnter:$?v.onDotsLeave:null,onMouseOver:$?v.onDotsOver:null,onMouseLeave:$?v.onDotsLeave:null}),W=t.default.createElement(a.Dots,L)}var Q,ie,de=(0,o.extractObject)(y,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);de.clickHandler=v.changeSlide,v.props.arrows&&(Q=t.default.createElement(c.PrevArrow,de),ie=t.default.createElement(c.NextArrow,de));var le=null;v.props.vertical&&(le={height:v.state.listHeight});var be=null;v.props.vertical===!1?v.props.centerMode===!0&&(be={padding:"0px "+v.props.centerPadding}):v.props.centerMode===!0&&(be={padding:v.props.centerPadding+" 0px"});var fe=w(w({},le),be),Fe=v.props.touchMove,Oe={className:"slick-list",style:fe,onClick:v.clickHandler,onMouseDown:Fe?v.swipeStart:null,onMouseMove:v.state.dragging&&Fe?v.swipeMove:null,onMouseUp:Fe?v.swipeEnd:null,onMouseLeave:v.state.dragging&&Fe?v.swipeEnd:null,onTouchStart:Fe?v.swipeStart:null,onTouchMove:v.state.dragging&&Fe?v.swipeMove:null,onTouchEnd:Fe?v.touchEnd:null,onTouchCancel:v.state.dragging&&Fe?v.swipeEnd:null,onKeyDown:v.props.accessibility?v.keyHandler:null},Ue={className:M,dir:"ltr",style:v.props.style};return v.props.unslick&&(Oe={className:"slick-list"},Ue={className:M}),t.default.createElement("div",Ue,v.props.unslick?"":Q,t.default.createElement("div",x({ref:v.listRefHandler},Oe),t.default.createElement(s.Track,x({ref:v.trackRefHandler},Y),v.props.children)),v.props.unslick?"":ie,v.props.unslick?"":W)}),v.list=null,v.track=null,v.state=w(w({},r.default),{},{currentSlide:v.props.initialSlide,targetSlide:v.props.initialSlide?v.props.initialSlide:0,slideCount:t.default.Children.count(v.props.children)}),v.callbackTimers=[],v.clickable=!0,v.debouncedResize=null;var ne=v.ssrInit();return v.state=w(w({},v.state),ne),v}return T(se,[{key:"didPropsChange",value:function(v){for(var ne=!1,M=0,y=Object.keys(this.props);M<y.length;M++){var Y=y[M];if(!v.hasOwnProperty(Y)){ne=!0;break}if(!(p(v[Y])==="object"||typeof v[Y]=="function"||isNaN(v[Y]))&&v[Y]!==this.props[Y]){ne=!0;break}}return ne||t.default.Children.count(this.props.children)!==t.default.Children.count(v.children)}}]),se}(t.default.Component),Ya}var nu,Sf;function tb(){if(Sf)return nu;Sf=1;var t=function(r){return r.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()}).toLowerCase()};return nu=t,nu}var iu,Cf;function rb(){if(Cf)return iu;Cf=1;var t=tb(),r=function(o){var s=/[height|width]$/;return s.test(o)},n=function(o){var s="",a=Object.keys(o);return a.forEach(function(c,u){var h=o[c];c=t(c),r(c)&&typeof h=="number"&&(h=h+"px"),h===!0?s+=c:h===!1?s+="not "+c:s+="("+c+": "+h+")",u<a.length-1&&(s+=" and ")}),s},i=function(o){var s="";return typeof o=="string"?o:o instanceof Array?(o.forEach(function(a,c){s+=n(a),c<o.length-1&&(s+=", ")}),s):n(o)};return iu=i,iu}var su,_f;function nb(){if(_f)return su;_f=1;function t(r){this.options=r,!r.deferSetup&&this.setup()}return t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(r){return this.options===r||this.options.match===r}},su=t,su}var ou,kf;function C0(){if(kf)return ou;kf=1;function t(i,o){var s=0,a=i.length,c;for(s;s<a&&(c=o(i[s],s),c!==!1);s++);}function r(i){return Object.prototype.toString.apply(i)==="[object Array]"}function n(i){return typeof i=="function"}return ou={isFunction:n,isArray:r,each:t},ou}var au,Af;function ib(){if(Af)return au;Af=1;var t=nb(),r=C0().each;function n(i,o){this.query=i,this.isUnconditional=o,this.handlers=[],this.mql=window.matchMedia(i);var s=this;this.listener=function(a){s.mql=a.currentTarget||a,s.assess()},this.mql.addListener(this.listener)}return n.prototype={constuctor:n,addHandler:function(i){var o=new t(i);this.handlers.push(o),this.matches()&&o.on()},removeHandler:function(i){var o=this.handlers;r(o,function(s,a){if(s.equals(i))return s.destroy(),!o.splice(a,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){r(this.handlers,function(i){i.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var i=this.matches()?"on":"off";r(this.handlers,function(o){o[i]()})}},au=n,au}var lu,Lf;function sb(){if(Lf)return lu;Lf=1;var t=ib(),r=C0(),n=r.each,i=r.isFunction,o=r.isArray;function s(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return s.prototype={constructor:s,register:function(a,c,u){var h=this.queries,p=u&&this.browserIsIncapable;return h[a]||(h[a]=new t(a,p)),i(c)&&(c={match:c}),o(c)||(c=[c]),n(c,function(x){i(x)&&(x={match:x}),h[a].addHandler(x)}),this},unregister:function(a,c){var u=this.queries[a];return u&&(c?u.removeHandler(c):(u.clear(),delete this.queries[a])),this}},lu=s,lu}var cu,Pf;function ob(){if(Pf)return cu;Pf=1;var t=sb();return cu=new t,cu}var Nf;function ab(){return Nf||(Nf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(po()),n=eb(),i=a(rb()),o=a(b0()),s=ml();function a(R){return R&&R.__esModule?R:{default:R}}function c(R){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},c(R)}function u(){return u=Object.assign?Object.assign.bind():function(R){for(var P=1;P<arguments.length;P++){var j=arguments[P];for(var A in j)Object.prototype.hasOwnProperty.call(j,A)&&(R[A]=j[A])}return R},u.apply(this,arguments)}function h(R,P){var j=Object.keys(R);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(R);P&&(A=A.filter(function(E){return Object.getOwnPropertyDescriptor(R,E).enumerable})),j.push.apply(j,A)}return j}function p(R){for(var P=1;P<arguments.length;P++){var j=arguments[P]!=null?arguments[P]:{};P%2?h(Object(j),!0).forEach(function(A){N(R,A,j[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(j)):h(Object(j)).forEach(function(A){Object.defineProperty(R,A,Object.getOwnPropertyDescriptor(j,A))})}return R}function x(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function b(R,P){for(var j=0;j<P.length;j++){var A=P[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,D(A.key),A)}}function m(R,P,j){return P&&b(R.prototype,P),Object.defineProperty(R,"prototype",{writable:!1}),R}function _(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),P&&w(R,P)}function w(R,P){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,E){return A.__proto__=E,A},w(R,P)}function O(R){var P=H();return function(){var A=Z(R),E;if(P){var z=Z(this).constructor;E=Reflect.construct(A,arguments,z)}else E=A.apply(this,arguments);return k(this,E)}}function k(R,P){if(P&&(c(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(R)}function T(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function H(){try{var R=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H=function(){return!!R})()}function Z(R){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},Z(R)}function N(R,P,j){return P=D(P),P in R?Object.defineProperty(R,P,{value:j,enumerable:!0,configurable:!0,writable:!0}):R[P]=j,R}function D(R){var P=B(R,"string");return c(P)=="symbol"?P:String(P)}function B(R,P){if(c(R)!="object"||!R)return R;var j=R[Symbol.toPrimitive];if(j!==void 0){var A=j.call(R,P);if(c(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(R)}var V=(0,s.canUseDOM)()&&ob();t.default=function(R){_(j,R);var P=O(j);function j(A){var E;return x(this,j),E=P.call(this,A),N(T(E),"innerSliderRefHandler",function(z){return E.innerSlider=z}),N(T(E),"slickPrev",function(){return E.innerSlider.slickPrev()}),N(T(E),"slickNext",function(){return E.innerSlider.slickNext()}),N(T(E),"slickGoTo",function(z){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return E.innerSlider.slickGoTo(z,se)}),N(T(E),"slickPause",function(){return E.innerSlider.pause("paused")}),N(T(E),"slickPlay",function(){return E.innerSlider.autoPlay("play")}),E.state={breakpoint:null},E._responsiveMediaHandlers=[],E}return m(j,[{key:"media",value:function(E,z){V.register(E,z),this._responsiveMediaHandlers.push({query:E,handler:z})}},{key:"componentDidMount",value:function(){var E=this;if(this.props.responsive){var z=this.props.responsive.map(function(re){return re.breakpoint});z.sort(function(re,v){return re-v}),z.forEach(function(re,v){var ne;v===0?ne=(0,i.default)({minWidth:0,maxWidth:re}):ne=(0,i.default)({minWidth:z[v-1]+1,maxWidth:re}),(0,s.canUseDOM)()&&E.media(ne,function(){E.setState({breakpoint:re})})});var se=(0,i.default)({minWidth:z.slice(-1)[0]});(0,s.canUseDOM)()&&this.media(se,function(){E.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(E){V.unregister(E.query,E.handler)})}},{key:"render",value:function(){var E=this,z,se;this.state.breakpoint?(se=this.props.responsive.filter(function($){return $.breakpoint===E.state.breakpoint}),z=se[0].settings==="unslick"?"unslick":p(p(p({},o.default),this.props),se[0].settings)):z=p(p({},o.default),this.props),z.centerMode&&(z.slidesToScroll>1,z.slidesToScroll=1),z.fade&&(z.slidesToShow>1,z.slidesToScroll>1,z.slidesToShow=1,z.slidesToScroll=1);var re=r.default.Children.toArray(this.props.children);re=re.filter(function($){return typeof $=="string"?!!$.trim():!!$}),z.variableWidth&&(z.rows>1||z.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),z.variableWidth=!1);for(var v=[],ne=null,M=0;M<re.length;M+=z.rows*z.slidesPerRow){for(var y=[],Y=M;Y<M+z.rows*z.slidesPerRow;Y+=z.slidesPerRow){for(var C=[],W=Y;W<Y+z.slidesPerRow&&(z.variableWidth&&re[W].props.style&&(ne=re[W].props.style.width),!(W>=re.length));W+=1)C.push(r.default.cloneElement(re[W],{key:100*M+10*Y+W,tabIndex:-1,style:{width:"".concat(100/z.slidesPerRow,"%"),display:"inline-block"}}));y.push(r.default.createElement("div",{key:10*M+Y},C))}z.variableWidth?v.push(r.default.createElement("div",{key:M,style:{width:ne}},y)):v.push(r.default.createElement("div",{key:M},y))}if(z==="unslick"){var L="regular slider "+(this.props.className||"");return r.default.createElement("div",{className:L},re)}else v.length<=z.slidesToShow&&!z.infinite&&(z.unslick=!0);return r.default.createElement(n.InnerSlider,u({style:this.props.style,ref:this.innerSliderRefHandler},(0,s.filterSettings)(z)),v)}}]),j}(r.default.Component)}(Qd)),Qd}var Of;function lb(){return Of||(Of=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(ab());function n(i){return i&&i.__esModule?i:{default:i}}t.default=r.default}(Kd)),Kd}var cb=lb();const _0=hg(cb),Rf=hr(Zt);hr(ce);hr(Ce);hr(G);hr(Ar);hr(Pr);hr(zr);const db=t=>{const r=[],n=[],i=[],o=[];if(t.attachments&&Array.isArray(t.attachments)&&t.attachments.forEach(s=>{const a=s.url?`${fs}${s.url}`:`${Ds}/storage/${s.file_path}`;switch(s.file_type){case"image":n.push({id:s.id,url:a,mediaType:"image",original_name:s.original_name||"Image"});break;case"video":r.push({id:s.id,url:a,mediaType:"video",original_name:s.original_name||"Video"});break;default:i.push({id:s.id,url:a,name:s.original_name||"Document",size:s.size||0,mediaType:"document",mime_type:s.mime_type})}}),t.videos&&Array.isArray(t.videos)?r.push(...t.videos.map(s=>({...s,mediaType:"video"}))):t.media&&t.mediaType==="video"&&r.push({id:"main-video",url:t.media,mediaType:"video"}),t.images&&Array.isArray(t.images))n.push(...t.images.map(s=>({...s,mediaType:"image"})));else if(t.imageUrl||t.media&&t.mediaType!=="video"){const s=t.imageUrl||t.media;s&&!n.some(a=>a.url===s)&&n.push({id:"main-image",url:s,mediaType:"image"})}if(t.documents&&Array.isArray(t.documents)?i.push(...t.documents.map(s=>({...s,mediaType:"document"}))):t.file&&i.push({id:"main-doc",url:t.file,name:t.original_name||"Document",size:t.fileSize||0,mediaType:"document"}),t.polls){const s=Array.isArray(t.polls)?t.polls:[t.polls];o.push(...s.map(a=>({id:a.id,question:a.question,options:(a.options||[]).map(c=>{var u,h,p,x;return{id:c.id,text:(h=(u=c.option_text)!=null?u:c.text)!=null?h:"",votes:(x=(p=c.vote_count)!=null?p:c.votes)!=null?x:0}}),mediaType:"poll"})))}else t.hasPoll&&o.push({id:"main-poll",question:t.pollQuestion||"Poll",options:(t.pollOptions||[]).map((s,a)=>{var c,u,h,p,x;return{id:(c=s.id)!=null?c:a,text:(h=(u=s.option_text)!=null?u:s.text)!=null?h:String(s),votes:(x=(p=s.vote_count)!=null?p:s.votes)!=null?x:0}}),mediaType:"poll"});return{videos:r,images:n,documents:i,polls:o,all:[...r,...n,...i,...o]}},Ef=async(t,r,n)=>{try{console.log("Download request for:",{url:t,fileName:r,fileType:n});const i=t.split("/"),o=i[i.length-1];let s=n;s||(t.includes("/images/")||t.includes("image")?s="images":t.includes("/videos/")||t.includes("video")?s="videos":s="documents");const a=`${Ds}/resources/download/${s}/${o}`,c=localStorage.getItem("authToken"),u={};c&&(u.Authorization=`Bearer ${c}`),console.log("Making download request to:",a);const h=await fetch(a,{headers:u});if(!h.ok){const m=await h.json().catch(()=>({message:"Download failed"}));throw new Error(m.message||`Download failed with status: ${h.status}`)}const p=await h.blob(),x=window.URL.createObjectURL(p),b=document.createElement("a");b.href=x,b.download=r||o||"download",b.style.display="none",document.body.appendChild(b),b.click(),setTimeout(()=>{document.body.removeChild(b),window.URL.revokeObjectURL(x)},100)}catch(i){console.error("Download failed:",i)}},ub=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(ce,{className:r,style:{...n,left:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},hb=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(ce,{className:r,style:{...n,right:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},Fc=q.memo(({resource:t,onCardClick:r,onBookmark:n,onUpvote:i,onEdit:o,onDelete:s,currentUser:a,cardBg:c,textColor:u,mutedText:h,borderColor:p})=>{var Oe,Ue,ye,ee;if(!t)return e.jsx(Rf,{p:5,borderWidth:"1px",borderRadius:"lg",borderColor:p,bg:c,textAlign:"center",h:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(G,{color:h,children:"This saved resource is no longer available."})});const x=qr(),[b,m]=q.useState(0),[_,w]=q.useState(!1),[O,k]=q.useState(t.is_upvoted||!1),[T,H]=q.useState(t.upvote_count||0),[Z,N]=q.useState(!1),[D,B]=q.useState({}),[V,R]=q.useState({}),[P,j]=q.useState(!1),[A,E]=q.useState([]),z=_e=>{var Me;return{id:_e.id,question:_e.question,options:(_e.options||[]).map(Le=>{var ue,Ye,Ze,mt,$e;return{id:Le.id,text:(Ye=(ue=Le.option_text)!=null?ue:Le.text)!=null?Ye:"",votes:(mt=(Ze=Le.vote_count)!=null?Ze:Le.votes)!=null?mt:0,is_selected:($e=Le.is_selected)!=null?$e:!1}}),user_option_id:(Me=_e.user_option_id)!=null?Me:null}};q.useEffect(()=>{if(!t)return;let _e=[];Array.isArray(t.polls)?_e=t.polls.map(z):t.polls&&(_e=[z(t.polls)]),E(_e);const Me={},Le={};_e.forEach(ue=>{var Ze;const Ye=ue.user_option_id||((Ze=ue.options.find(mt=>mt.is_selected))==null?void 0:Ze.id);Ye&&(Me[ue.id]=Ye,Le[ue.id]=!0)}),B(Me),R(Le)},[t]);const[se,re]=q.useState(!1),v=Xr();q.useEffect(()=>{const _e=Gp(),Me=_e&&t.user&&_e.id&&String(_e.id)===String(t.user.id),Le=_e&&["admin","moderator"].includes(_e.primary_role||_e.role);re(Me||Le)},[t]);const[ne,M]=q.useState(null),y=q.useRef(),[Y,C]=q.useState(!1);Br();const W=async()=>{var _e,Me;if(t.id){N(!0);try{await d0(t.id),j(!1),x({title:"Resource deleted",description:"The resource has been successfully deleted.",status:"success",duration:3e3,isClosable:!0}),s&&s(t.id)}catch(Le){console.error("Error deleting resource:",Le),x({title:"Delete failed",description:((Me=(_e=Le.response)==null?void 0:_e.data)==null?void 0:Me.message)||"Failed to delete the resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}finally{N(!1)}}},{videos:L,images:$,documents:Q,polls:ie,all:de}=q.useMemo(()=>db(t),[t]),le={dots:!0,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:L.length+$.length>1,prevArrow:L.length+$.length>1?e.jsx(ub,{}):null,nextArrow:L.length+$.length>1?e.jsx(hb,{}):null},be=L.length+$.length+Q.length+ie.length,fe=_e=>!_e||isNaN(_e)?"":_e<1024?_e+" B":_e<1048576?(_e/1024).toFixed(1)+" KB":(_e/1048576).toFixed(1)+" MB",Fe=_e=>{if(!_e)return"Just now";const Me=new Date,Le=new Date(_e);if(isNaN(Le.getTime()))return"Just now";const ue=Math.floor((Me-Le)/1e3),Ye=Math.floor(ue/60),Ze=Math.floor(Ye/60),mt=Math.floor(Ze/24),$e=Le.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(ue<60)return"Just now";if(Ye<60)return`${Ye} ${Ye===1?"minute":"minutes"} ago`;if(Ze<24)return`${Ze} ${Ze===1?"hour":"hours"} ago`;if(mt===1)return`Yesterday at ${$e}`;if(mt<7)return`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][Le.getDay()]} at ${$e}`;const je=Me.getFullYear(),ve=Le.getFullYear();return je===ve?`${["January","February","March","April","May","June","July","August","September","October","November","December"][Le.getMonth()]} ${Le.getDate()} at ${$e}`:`${Le.toLocaleDateString([],{month:"long",day:"numeric",year:"numeric"})} at ${$e}`};return e.jsxs(Rf,{bg:oe("white","gray.800"),borderRadius:"2xl",borderWidth:"1px",borderColor:oe("rgba(226, 232, 240, 0.8)","gray.700"),overflow:"hidden",width:"100%",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.05)",_hover:{boxShadow:"0px 8px 24px rgba(0, 0, 0, 0.08)",transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx(fo,{p:4,pb:0,children:e.jsxs(Ce,{align:"center",justify:"space-between",children:[e.jsxs(Ce,{align:"center",gap:3,children:[e.jsx(zr,{size:"md",src:(Oe=t.user)==null?void 0:Oe.avatar_url,name:t.user?`${t.user.first_name} ${t.user.last_name}`:"Anonymous",cursor:"pointer",onClick:_e=>{_e.stopPropagation(),t.user&&t.user.id&&v(`/user/${t.user.id}`)}}),e.jsxs(ce,{children:[e.jsxs(Ce,{align:"center",gap:2,mb:1,children:[e.jsx(G,{fontWeight:"bold",fontSize:"md",cursor:"pointer",onClick:_e=>{_e.stopPropagation(),t.user&&t.user.id&&v(`/user/${t.user.id}`)},children:t.user?t.user.id===a.id?"You":`${t.user.first_name} ${t.user.last_name}`:"Anonymous"}),(((Ue=t.user)==null?void 0:Ue.primary_role)==="admin"||((ye=t.user)==null?void 0:ye.primary_role)==="moderator")&&e.jsx(Cc,{size:"16px",bg:"blue.500",color:"white",children:e.jsx(zi,{size:"10px"})})]}),e.jsxs(Ce,{align:"center",gap:2,fontSize:"sm",color:h,children:[e.jsx(G,{children:Fe(t.created_at||t.dateAdded)}),((ee=t.course)==null?void 0:ee.code)&&e.jsx(Xn,{size:"sm",colorScheme:"blue",variant:"subtle",borderRadius:"full",children:t.course.code})]})]})]}),se&&e.jsxs(wn,{placement:"bottom-end",onClick:_e=>_e.stopPropagation(),children:[e.jsx(jn,{as:Bt,icon:e.jsx(gp,{}),variant:"ghost",size:"sm",borderRadius:"full"}),e.jsxs(Sn,{shadow:"lg",borderRadius:"xl",children:[e.jsx(er,{icon:e.jsx(Mg,{}),onClick:_e=>{if(_e.stopPropagation(),console.log("Editing resource with attachments:",t.attachments),M({title:t.title,description:t.description,attachments:t.attachments||[]}),o){const Me={...t,attachments:t.attachments||[]};o(Me)}},children:"Edit resource"}),e.jsx(er,{icon:e.jsx(hl,{}),onClick:_e=>{_e.stopPropagation(),j(!0)},children:"Delete resource"})]})]})]})}),e.jsxs(un,{p:4,pt:3,children:[e.jsxs(ce,{mb:3,lineHeight:"1.5",children:[e.jsx(ut,{as:"h3",fontSize:"lg",fontWeight:"semibold",mb:2,color:oe("blue.700","blue.300"),cursor:"pointer",onClick:()=>r(t.id),_hover:{textDecoration:"underline"},children:t.title}),e.jsx(G,{fontSize:"md",cursor:"pointer",onClick:()=>r(t.id),children:t.description})]}),be>0&&e.jsxs(ce,{mb:4,borderRadius:"xl",overflow:"hidden",children:[(L.length>0||$.length>0)&&e.jsx(ce,{mb:3,children:e.jsx(_0,{...le,style:{position:"relative",zIndex:0},children:[...L,...$].map((_e,Me)=>e.jsxs(ce,{position:"relative",children:[_e.mediaType==="video"?e.jsx(Es,{ratio:16/9,children:e.jsx("video",{src:_e.url,controls:!0,style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx(Es,{ratio:16/9,children:e.jsx(Ar,{src:_e.url,alt:_e.original_name||`Image ${Me+1}`,objectFit:"cover"})}),e.jsx(Bt,{icon:e.jsx(Ei,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"whiteAlpha.900"},onClick:Le=>{Le.stopPropagation();const ue=_e.name||(_e.mediaType==="video"?`Video-${t.id}-${Me}`:`Image-${t.id}-${Me}`);Ef(_e.url,ue),x({title:`Downloading ${_e.mediaType}`,description:`${ue} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":`Download ${_e.mediaType}`})]},_e.id||Me))})}),Q.length>0&&e.jsxs(et,{spacing:2,mb:3,align:"stretch",children:[Q.slice(0,2).map((_e,Me)=>e.jsxs(Ce,{p:3,bg:oe("gray.50","gray.700"),borderRadius:"lg",align:"center",cursor:"pointer",_hover:{bg:oe("gray.100","gray.600")},children:[e.jsx(Cc,{size:"40px",bg:"blue.100",color:"blue.600",mr:3,children:e.jsx(qn,{size:20})}),e.jsxs(ce,{flex:"1",children:[e.jsx(G,{fontWeight:"medium",fontSize:"sm",children:_e.name||`Document ${Me+1}`}),e.jsx(G,{fontSize:"xs",color:h,children:fe(_e.size)})]}),e.jsx(Bt,{icon:e.jsx(Ei,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:Le=>{Le.stopPropagation();const ue=_e.name||`Document-${Me+1}`;Ef(_e.url,ue,"documents"),x({title:"Downloading file",description:`${ue} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":"Download file"})]},_e.id||`doc-${Me}`)),Q.length>2&&e.jsxs(G,{fontSize:"sm",color:h,textAlign:"center",children:["+",Q.length-2," more"]})]}),A.length>0&&e.jsx(ce,{children:A.slice(0,1).map((_e,Me)=>{var mt,$e;const Le=_e.id||`poll-${Me}`,ue=((mt=_e.options)==null?void 0:mt.reduce((je,ve)=>je+(ve.votes||0),0))||0;V[Le];const Ye=D[Le],Ze=async je=>{try{const{message:ve,poll:Pe}=await nh(je),De={id:Pe.id,question:Pe.question,options:(Pe.options||[]).map(Se=>{var Ie,ze,it,Ge;return{id:Se.id,text:(ze=(Ie=Se.option_text)!=null?Ie:Se.text)!=null?ze:"",votes:(Ge=(it=Se.vote_count)!=null?it:Se.votes)!=null?Ge:0}})};E(Se=>Se.map(Ie=>Ie.id===De.id?De:Ie)),ve.startsWith("Vote removed")?(B(Se=>({...Se,[Pe.id]:null})),R(Se=>({...Se,[Pe.id]:!1}))):(B(Se=>({...Se,[Pe.id]:je})),R(Se=>({...Se,[Pe.id]:!0}))),x({title:ve,status:"success",duration:2e3,isClosable:!0})}catch(ve){console.error("Vote error",ve),x({title:"Failed to record vote",description:ve.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}};return e.jsxs(ce,{bg:oe("gray.50","gray.700"),p:4,borderRadius:"xl",onClick:je=>je.stopPropagation(),children:[e.jsx(G,{fontWeight:"semibold",mb:3,children:_e.question}),e.jsx(et,{spacing:2,align:"stretch",children:($e=_e.options)==null?void 0:$e.map((je,ve)=>{const Pe=je.id||`option-${ve}`,De=Ye===Pe,Se=je.votes||0,Ie=ue>0?Math.round(Se/ue*100):0;return e.jsxs(ce,{position:"relative",p:3,borderRadius:"lg",cursor:"pointer",onClick:()=>Ze(Pe),bg:oe("white","gray.800"),border:"2px solid",borderColor:De?"blue.400":"transparent",_hover:{borderColor:De?"blue.500":oe("gray.200","gray.600")},children:[e.jsx(ce,{position:"absolute",left:0,top:0,bottom:0,width:`${Ie}%`,bg:De?"blue.100":oe("gray.100","gray.700"),opacity:.3,borderRadius:"lg"}),e.jsxs(Ce,{justify:"space-between",align:"center",position:"relative",children:[e.jsx(G,{children:je.text}),e.jsxs(G,{fontWeight:"bold",color:De?"blue.500":h,children:[Ie,"%"]})]})]},Pe)})}),e.jsxs(G,{fontSize:"sm",color:h,mt:2,textAlign:"center",children:[ue," ",ue===1?"vote":"votes"]})]},Le)})})]})]}),e.jsx(ha,{p:4,pt:0,children:e.jsxs(et,{width:"100%",spacing:2,align:"stretch",children:[e.jsxs(Ce,{justify:"space-between",align:"center",width:"100%",children:[e.jsxs(at,{spacing:4,children:[e.jsxs(at,{spacing:1.5,align:"center",children:[e.jsx(ct,{as:Nc,boxSize:5,color:t.is_upvoted?"red.500":"inherit",fill:t.is_upvoted?"currentColor":"none",cursor:"pointer",onClick:_e=>{_e.stopPropagation(),i(t.id)}}),e.jsx(G,{fontSize:"sm",fontWeight:"medium",children:t.upvote_count||0})]}),e.jsxs(at,{spacing:1.5,align:"center",children:[e.jsx(ct,{as:Cu,boxSize:5}),e.jsx(G,{fontSize:"sm",fontWeight:"medium",children:t.comment_count||0})]}),e.jsxs(wn,{placement:"top",isLazy:!0,children:[e.jsx(jn,{as:Bt,icon:e.jsx(fa,{}),variant:"ghost",size:"sm",p:0,minW:"auto","aria-label":"Share options",onClick:_e=>_e.stopPropagation()}),e.jsxs(Sn,{shadow:"lg",borderRadius:"xl",p:4,children:[e.jsx(G,{fontWeight:"semibold",mb:3,children:"Share this post"}),e.jsxs(di,{columns:2,spacing:3,children:[e.jsxs(et,{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/resources/${t.id}`),x({title:"Link copied!",status:"success",duration:2e3})},cursor:"pointer",p:2,borderRadius:"lg",_hover:{bg:oe("gray.100","gray.700")},children:[e.jsx(ce,{dangerouslySetInnerHTML:{__html:hf.copy}}),e.jsx(G,{fontSize:"xs",children:"Copy Link"})]}),e.jsxs(et,{onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(`Check out: ${t.title} ${window.location.origin}/resources/${t.id}`)}`,"_blank"),cursor:"pointer",p:2,borderRadius:"lg",_hover:{bg:oe("gray.100","gray.700")},children:[e.jsx(ce,{dangerouslySetInnerHTML:{__html:hf.whatsapp}}),e.jsx(G,{fontSize:"xs",children:"WhatsApp"})]})]})]})]})]}),e.jsx(Bt,{icon:e.jsx(Xi,{fill:t.is_saved?"currentColor":"none"}),variant:"ghost",size:"lg",p:0,minW:"auto",color:t.is_saved?"blue.500":h,onClick:_e=>{_e.stopPropagation(),n(t.id,t.title)},"aria-label":"Bookmark"})]}),e.jsx(ll,{isOpen:P,leastDestructiveRef:y,onClose:()=>j(!1),children:e.jsx(Fr,{children:e.jsxs(cl,{children:[e.jsx(Wr,{fontSize:"lg",fontWeight:"bold",children:"Delete Resource"}),e.jsx(Ir,{children:"Are you sure you want to delete this resource? This action cannot be undone."}),e.jsxs(Jr,{children:[e.jsx(Te,{ref:y,onClick:()=>j(!1),children:"Cancel"}),e.jsx(Te,{colorScheme:"red",onClick:W,ml:3,isLoading:Z,loadingText:"Deleting",children:"Delete"})]})]})})}),t.viewCount&&e.jsxs(G,{fontSize:"sm",color:h,children:[t.viewCount," views"]})]})})]})}),fb=({resources:t,onBookmark:r,onUpvote:n,currentUser:i,onShare:o,onAddComment:s,onFollow:a,onCardClick:c,onEdit:u,onDelete:h,cardBg:p,textColor:x,mutedText:b,borderColor:m,isLoading:_,feedType:w})=>{if(_)return e.jsx(et,{spacing:6,align:"stretch",w:"full",children:[1,2,3].map(H=>e.jsxs(ce,{as:hr.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{delay:H*.1}},bg:oe("rgba(255, 255, 255, 0.7)","rgba(45, 55, 72, 0.7)"),backdropFilter:"blur(10px)",borderRadius:"24px",borderWidth:"1px",borderColor:oe("brand.navy","rgba(74, 85, 104, 0.3)"),p:6,w:"full",overflow:"hidden",boxShadow:"0 10px 30px -15px rgba(0, 0, 0, 0.1)",children:[e.jsxs(at,{mb:4,children:[e.jsx(kr,{height:"40px",width:"40px",borderRadius:"full"}),e.jsxs(et,{align:"start",spacing:2,flex:1,children:[e.jsx(kr,{height:"10px",width:"120px"}),e.jsx(kr,{height:"8px",width:"80px"})]})]}),e.jsx(kr,{height:"16px",width:"70%",mb:4}),e.jsx(kr,{height:"12px",width:"90%",mb:2}),e.jsx(kr,{height:"12px",width:"60%",mb:4}),e.jsx(kr,{height:"200px",width:"100%",borderRadius:"xl",mb:4}),e.jsxs(at,{spacing:4,justify:"space-between",children:[e.jsxs(at,{children:[e.jsx(kr,{height:"30px",width:"30px",borderRadius:"full"}),e.jsx(kr,{height:"30px",width:"30px",borderRadius:"full"}),e.jsx(kr,{height:"30px",width:"30px",borderRadius:"full"})]}),e.jsx(kr,{height:"10px",width:"60px"})]})]},H))});const O={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1,duration:.5}}},k={hidden:{opacity:0,y:20,scale:.98},show:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:260,damping:20,duration:.5}}},T=w==="grid"?e.jsx(ce,{w:"full",position:"relative",as:hr.div,variants:O,initial:"hidden",animate:"show",children:e.jsx(di,{columns:{base:1,sm:2,lg:3},spacing:"20px",children:t&&t.map((H,Z)=>e.jsx(ce,{as:hr.div,variants:k,gridRow:Z%5===0?"span 2":"span 1",gridColumn:Z%7===0?"span 2":"span 1",zIndex:100-Z,transformOrigin:"center",children:e.jsx(Fc,{resource:H,onBookmark:r,onUpvote:n,currentUser:i,onCardClick:c,onEdit:u,onDelete:h,onShare:o,onAddComment:s,onFollow:a,cardBg:p,textColor:x,mutedText:b,borderColor:m})},H.id))})}):e.jsx(et,{spacing:8,align:"stretch",w:"full",as:hr.div,variants:O,initial:"hidden",animate:"show",children:t&&t.map((H,Z)=>e.jsx(ce,{as:hr.div,variants:k,transformOrigin:"center",children:e.jsx(Fc,{resource:H,onBookmark:r,onUpvote:n,currentUser:i,onCardClick:c,onEdit:u,onDelete:h,onAddComment:s,onFollow:a,cardBg:p,textColor:x,mutedText:b,borderColor:m})},H.id))});return e.jsx(ce,{w:"full",children:_?e.jsx(ce,{}):t&&t.length>0?T:e.jsx(ce,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:oe("rgba(226, 232, 240, 0.8)","rgba(74, 85, 104, 0.3)"),borderRadius:"2xl",bg:oe("rgba(255, 255, 255, 0.6)","rgba(45, 55, 72, 0.6)"),backdropFilter:"blur(8px)",boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.05)",as:hr.div,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(et,{spacing:4,children:[e.jsx(ce,{p:4,borderRadius:"full",bg:oe("gray.50","gray.700"),boxShadow:"inner",children:e.jsx(lo,{size:30,color:oe("#A0AEC0","#718096")})}),e.jsx(G,{color:b,fontSize:"lg",children:"No resources found matching your filters"}),e.jsx(G,{color:b,fontSize:"sm",children:"Try adjusting your search or filters"})]})})})},pb=({searchQuery:t,facultyFilter:r,setFacultyFilter:n,courseFilter:i,setCourseFilter:o,majorFilter:s,setMajorFilter:a,faculties:c,majors:u,courses:h,coursePagination:p,onCoursePageChange:x,isLoadingFilters:b,onClearFilters:m,mutedText:_})=>{oe("blue.50","blue.900"),oe("blue.100","blue.800"),oe("gray.100","gray.700");const w=t!==""||r!=="All"||i!=="All"||s!=="All",O=H=>{var Z;return((Z=c.find(N=>N.id===H))==null?void 0:Z.name)||"Faculty"},k=H=>{var Z;return((Z=u.find(N=>N.id===H))==null?void 0:Z.name)||"Major"},T=H=>{var Z;return((Z=h.find(N=>N.id===H))==null?void 0:Z.title)||"Course"};return e.jsxs(Ce,{direction:"column",w:"full",gap:3,children:[e.jsxs(Ce,{justify:"space-between",align:"center",w:"full",mb:2,children:[e.jsxs(at,{children:[e.jsx(ct,{as:Wc}),e.jsx(G,{fontWeight:"medium",children:"Filters"}),b&&e.jsx(nn,{size:"sm",ml:2}),w&&!b&&e.jsx(Pr,{ml:1,colorScheme:"blue",borderRadius:"full",px:2,children:(t?1:0)+(r!=="All"?1:0)+(i!=="All"?1:0)+(s!=="All"?1:0)})]}),w&&e.jsx(Te,{size:"xs",variant:"ghost",colorScheme:"blue",onClick:m,children:"Clear All"})]}),e.jsxs(Ce,{direction:{base:"column",md:"row"},gap:3,mb:2,children:[e.jsxs(wn,{children:[e.jsx(jn,{as:Te,rightIcon:e.jsx(ds,{}),w:"full",isDisabled:b,children:r==="All"?"Faculty":O(r)}),e.jsxs(Sn,{children:[e.jsx(er,{onClick:()=>n("All"),children:"All Faculties"}),c&&c.map(H=>e.jsx(er,{onClick:()=>n(H.id),children:H.name},H.id))]})]}),e.jsxs(wn,{children:[e.jsx(jn,{as:Te,rightIcon:e.jsx(ds,{}),w:"full",isDisabled:b||r==="All",children:s==="All"?"Major":k(s)}),e.jsxs(Sn,{children:[e.jsx(er,{onClick:()=>a("All"),children:"All Majors"}),u&&u.map(H=>e.jsx(er,{onClick:()=>a(H.id),children:H.name},H.id))]})]}),e.jsxs(wn,{children:[e.jsx(jn,{as:Te,rightIcon:e.jsx(ds,{}),w:"full",isDisabled:b||s==="All",children:i==="All"?"Course":T(i)}),e.jsxs(Sn,{children:[e.jsx(er,{onClick:()=>o("All"),children:"All Courses"}),h&&h.map(H=>e.jsx(er,{onClick:()=>o(H.id),children:H.title},H.id)),p&&p.last_page>1&&e.jsx(ce,{px:3,py:2,children:e.jsxs(Ce,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"sm",onClick:()=>x(p.current_page-1),isDisabled:p.current_page===1,children:"Prev"}),e.jsxs(G,{fontSize:"sm",children:["Page ",p.current_page," of ",p.last_page]}),e.jsx(Te,{size:"sm",onClick:()=>x(p.current_page+1),isDisabled:p.current_page===p.last_page,children:"Next"})]})})]})]})]}),w&&e.jsx(ce,{mt:3,children:e.jsxs(Bm,{spacing:2,children:[r!=="All"&&e.jsx(tc,{children:e.jsxs(Xn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"green",children:[e.jsx(rc,{children:e.jsxs(at,{spacing:1,children:[e.jsx(G,{fontSize:"xs",children:"Faculty:"}),e.jsx(G,{fontSize:"sm",fontWeight:"medium",children:O(r)})]})}),e.jsx(qd,{onClick:()=>n("All")})]})}),s!=="All"&&e.jsx(tc,{children:e.jsxs(Xn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"purple",children:[e.jsx(rc,{children:e.jsxs(at,{spacing:1,children:[e.jsx(G,{fontSize:"xs",children:"Major:"}),e.jsx(G,{fontSize:"sm",fontWeight:"medium",children:k(s)})]})}),e.jsx(qd,{onClick:()=>a("All")})]})}),i!=="All"&&e.jsx(tc,{children:e.jsxs(Xn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"orange",children:[e.jsx(rc,{children:e.jsxs(at,{spacing:1,children:[e.jsx(G,{fontSize:"xs",children:"Course:"}),e.jsx(G,{fontSize:"sm",fontWeight:"medium",children:T(i)})]})}),e.jsx(qd,{onClick:()=>o("All")})]})}),t&&e.jsx(tc,{children:e.jsx(Xn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"purple",children:e.jsx(rc,{children:e.jsxs(at,{spacing:1,children:[e.jsx(G,{fontSize:"xs",children:"Search:"}),e.jsxs(G,{fontSize:"sm",fontWeight:"medium",children:['"',t,'"']})]})})})})]})})]})},mb=({limit:t})=>{const[r,n]=q.useState([]),[i,o]=q.useState(!0),[s,a]=q.useState(null);Xr();const c=oe("white","gray.800"),u=oe("brand.navy","gray.700"),h=oe("brand.navy","blue.300"),p=oe("gray.700","gray.300"),x=oe("linear-gradient(to bottom, white, blue.50)","linear-gradient(to bottom, gray.800, gray.900)");return q.useEffect(()=>{(async()=>{o(!0);try{const _=(await h0(t)).data||[];n(_)}catch(m){console.error("Error fetching top contributors:",m),a("Failed to load top contributors")}finally{o(!1)}})()},[t]),s?e.jsxs(ce,{p:4,bg:c,borderRadius:"md",boxShadow:"sm",border:"1px",borderColor:u,children:[e.jsx(ut,{size:"sm",mb:3,color:"red.500",children:"Error"}),e.jsx(G,{fontSize:"sm",children:s})]}):e.jsxs(ce,{p:4,bg:x,borderRadius:"lg",boxShadow:"md",border:"1px",borderColor:u,position:"sticky",top:"20px",children:[e.jsx(ut,{size:"md",mb:4,color:h,textAlign:"center",children:"Top Contributors"}),i?e.jsx(et,{spacing:4,align:"stretch",children:[...Array(t)].map((b,m)=>e.jsxs(at,{spacing:3,children:[e.jsx(qm,{size:"10"}),e.jsx(ce,{flex:"1",children:e.jsx(Zo,{noOfLines:2,spacing:"2"})})]},m))}):e.jsx(et,{spacing:3,align:"stretch",children:r.length===0?e.jsx(G,{fontSize:"sm",textAlign:"center",color:p,children:"No contributors found"}):r.map((b,m)=>e.jsxs(ce,{p:3,borderRadius:"md",bg:m===0?"yellow.100":m===1?"gray.100":m===2?"orange.100":"transparent",_dark:{bg:m===0?"yellow.900":m===1?"gray.700":m===2?"orange.900":"transparent"},_hover:{transform:"translateY(-2px)",transition:"transform 0.2s"},children:[e.jsxs(at,{spacing:3,children:[e.jsx(zr,{size:"sm",name:`${b.first_name} ${b.last_name}`,src:b.avatar_url,border:m<3?"2px solid":"none",borderColor:m===0?"yellow.500":m===1?"gray.400":m===2?"orange.500":"transparent"}),e.jsxs(et,{spacing:1,align:"start",flex:"1",children:[e.jsxs(at,{children:[e.jsxs(G,{fontWeight:"medium",fontSize:"sm",children:[b.first_name," ",b.last_name]}),m<3&&e.jsxs(Pr,{colorScheme:m===0?"yellow":m===1?"gray":"orange",variant:"solid",fontSize:"xs",children:["#",m+1]})]}),e.jsx(G,{fontSize:"xs",color:"gray.500",_dark:{color:"gray.400"},children:b.major_name?` ${b.major_name}`:""})]})]}),e.jsxs(at,{mt:2,spacing:4,fontSize:"xs",color:"gray.500",children:[e.jsx(wi,{label:"Resources created",children:e.jsxs(Ce,{align:"center",children:[e.jsx(qn,{style:{marginRight:"4px"}}),e.jsx(G,{children:b.resources_count})]})}),e.jsx(wi,{label:"Total upvotes received",children:e.jsxs(Ce,{align:"center",children:[e.jsx(_u,{style:{marginRight:"4px"}}),e.jsx(G,{children:b.user_upvote_count+b.resource_upvote_count})]})}),e.jsxs(Pr,{colorScheme:"blue",variant:"outline",ml:"auto",children:["Score: ",b.contribution_score]})]})]},b.id))})]})},sl=async(t={})=>(await yt.get("/courses",{params:t})).data,gb=({handleImageUpload:t,handleVideoUpload:r,handleDocumentUpload:n,handlePollAdd:i})=>{const o=q.useRef(null),s=q.useRef(null),a=q.useRef(null),c=oe("gray.200","gray.600"),u=oe("gray.50","gray.700");oe("blue.500","blue.200");const h=[{type:"images",icon:rl,label:"Photo",ref:o,accept:"image/*",handler:t},{type:"videos",icon:Xu,label:"Video",ref:s,accept:"video/*",handler:r},{type:"documents",icon:qn,label:"Document",ref:a,accept:".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx",handler:n},{type:"poll",icon:ta,label:"Poll",handler:i}];return e.jsxs(e.Fragment,{children:[e.jsx(sn,{my:4,borderColor:c}),e.jsx(at,{spacing:2,justify:"space-between",children:e.jsx(Ce,{children:h.map(p=>e.jsx(Vi.Fragment,{children:p.ref?e.jsxs(e.Fragment,{children:[e.jsx(Te,{size:"sm",leftIcon:e.jsx(ct,{as:p.icon}),variant:"ghost",colorScheme:"blue",onClick:()=>{var x;return(x=p.ref.current)==null?void 0:x.click()},_hover:{bg:u},px:3,children:p.label}),e.jsx("input",{type:"file",multiple:!0,hidden:!0,ref:p.ref,accept:p.accept,onChange:p.handler})]}):e.jsx(Te,{size:"sm",leftIcon:e.jsx(ct,{as:p.icon}),variant:"ghost",colorScheme:"blue",onClick:p.handler,_hover:{bg:u},px:3,children:p.label})},p.type))})})]})},Ho=t=>{const r=t.images||[],n=t.videos||[],i=t.documents||[],o=t.polls||[];return[...r.map(a=>({...a,mediaType:"image"})),...n.map(a=>({...a,mediaType:"video"})),...i.map(a=>({...a,mediaType:"document"})),...o.map(a=>({...a,mediaType:"poll"}))].sort((a,c)=>{if(!a.id||!c.id)return 0;let u=0,h=0;try{typeof a.id=="string"&&a.id.includes("-")&&(u=parseInt(a.id.split("-")[1])||0),typeof c.id=="string"&&c.id.includes("-")&&(h=parseInt(c.id.split("-")[1])||0)}catch(p){console.error("Error parsing attachment ID:",p)}return h-u})},Tf=t=>t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB",xb=({attachments:t,removeAttachment:r})=>{const n=oe("gray.200","gray.600"),i=oe("gray.50","gray.700"),o=Vi.useMemo(()=>{var a;return[t.images.length>0,t.videos.length>0,t.documents.length>0,((a=t.polls)==null?void 0:a.length)>0].filter(Boolean).length>1},[t]);return t.images.length===0&&t.videos.length===0&&t.documents.length===0&&(!t.polls||t.polls.length===0)?null:e.jsxs(ce,{borderWidth:"1px",borderRadius:"lg",p:3,borderColor:n,bg:i,children:[e.jsxs(Ce,{justify:"space-between",align:"center",mb:2,children:[e.jsx(G,{fontSize:"sm",fontWeight:"medium",children:"Attachments:"}),o&&e.jsx(Pr,{colorScheme:"purple",px:2,py:1,borderRadius:"full",fontSize:"xs",children:"Mixed Content"})]}),o&&e.jsxs(Ce,{mb:3,gap:3,justify:"flex-start",children:[t.images.length>0&&e.jsxs(Ce,{align:"center",gap:1,children:[e.jsx(ct,{as:rl,color:"green.500"}),e.jsxs(G,{fontSize:"xs",children:[t.images.length," image",t.images.length!==1?"s":""]})]}),t.videos.length>0&&e.jsxs(Ce,{align:"center",gap:1,children:[e.jsx(ct,{as:Xu,color:"red.500"}),e.jsxs(G,{fontSize:"xs",children:[t.videos.length," video",t.videos.length!==1?"s":""]})]}),t.documents.length>0&&e.jsxs(Ce,{align:"center",gap:1,children:[e.jsx(ct,{as:qn,color:"blue.500"}),e.jsxs(G,{fontSize:"xs",children:[t.documents.length," document",t.documents.length!==1?"s":""]})]}),t.polls&&t.polls.length>0&&e.jsxs(Ce,{align:"center",gap:1,children:[e.jsx(ct,{as:ta,color:"teal.500"}),e.jsxs(G,{fontSize:"xs",children:[t.polls.length," poll",t.polls.length!==1?"s":""]})]})]}),Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length>0&&e.jsx(ce,{children:Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length===1?e.jsxs(ce,{position:"relative",borderRadius:"md",overflow:"hidden",children:[(()=>{const s=Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls})[0];if(s.mediaType==="poll")return e.jsxs(ce,{p:4,bg:"blackAlpha.50",borderRadius:"md",children:[e.jsx(Ce,{justifyContent:"space-between",alignItems:"flex-start",mb:3,children:e.jsxs(Ce,{alignItems:"center",gap:2,children:[e.jsx(ct,{as:ta,color:"teal.500"}),e.jsx(G,{fontWeight:"semibold",children:s.question})]})}),e.jsx(et,{spacing:3,align:"stretch",children:s.options.map((a,c)=>e.jsxs(ce,{borderRadius:"md",borderWidth:"1px",p:2,children:[e.jsx(G,{fontSize:"sm",mb:1,children:a.text}),e.jsx(io,{value:0,size:"sm",colorScheme:"teal",borderRadius:"full"})]},a.id))})]});if(s.mediaType==="video")return e.jsx(Es,{ratio:16/9,children:e.jsx(ce,{as:"video",src:s.url,controls:!0,borderRadius:"md"})});if(s.mediaType==="image")return e.jsx(Es,{ratio:4/3,children:e.jsx(Ar,{src:s.url,alt:s.name,borderRadius:"md",objectFit:"cover"})});if(s.mediaType==="document")return e.jsx(Ce,{p:4,borderRadius:"md",bg:"blackAlpha.50",align:"center",justify:"space-between",height:"100px",children:e.jsxs(Ce,{align:"center",children:[e.jsx(ct,{as:qn,boxSize:10,mr:3,color:"blue.500"}),e.jsxs(ce,{children:[e.jsx(G,{fontSize:"md",fontWeight:"medium",noOfLines:1,children:s.name}),e.jsx(G,{fontSize:"sm",color:"gray.500",children:Tf(s.size)})]})]})})})(),e.jsx(zh,{position:"absolute",top:1,right:1,size:"sm",bg:"blackAlpha.700",color:"white",onClick:()=>{const s=Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls})[0],a=s.mediaType==="image"?"images":s.mediaType==="video"?"videos":s.mediaType==="poll"?"polls":"documents";r(a,s.id)},_hover:{bg:"blackAlpha.800"}})]}):e.jsx(di,{columns:Math.min(Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length,3),spacing:2,children:Ho({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).map(s=>e.jsxs(ce,{position:"relative",borderRadius:"md",overflow:"hidden",children:[s.mediaType==="poll"?e.jsxs(ce,{p:3,bg:"blackAlpha.50",borderRadius:"md",height:"100%",children:[e.jsx(Ce,{justifyContent:"space-between",alignItems:"flex-start",mb:2,children:e.jsxs(Ce,{alignItems:"center",gap:1,children:[e.jsx(ct,{as:ta,color:"teal.500",boxSize:4}),e.jsx(G,{fontWeight:"semibold",fontSize:"sm",noOfLines:1,children:s.question})]})}),e.jsxs(G,{fontSize:"xs",color:"gray.500",children:[s.options.length," options"]})]}):s.mediaType==="video"?e.jsx(Es,{ratio:1,children:e.jsx(ce,{as:"video",src:s.url,controls:!0,borderRadius:"md"})}):s.mediaType==="image"?e.jsx(Es,{ratio:1,children:e.jsx(Ar,{src:s.url,alt:s.name,borderRadius:"md",objectFit:"cover"})}):e.jsx(Es,{ratio:1,children:e.jsxs(Ce,{direction:"column",p:3,bg:"blackAlpha.50",align:"center",justify:"center",borderRadius:"md",height:"100%",width:"100%",children:[e.jsx(ct,{as:qn,boxSize:10,mb:2,color:"blue.500"}),e.jsx(G,{fontSize:"sm",fontWeight:"medium",noOfLines:1,textAlign:"center",children:s.name}),e.jsx(G,{fontSize:"xs",color:"gray.500",children:Tf(s.size)})]})}),e.jsx(zh,{position:"absolute",top:1,right:1,size:"sm",bg:"blackAlpha.700",color:"white",onClick:()=>{const a=s.mediaType==="image"?"images":s.mediaType==="video"?"videos":"documents";r(a,s.id)},_hover:{bg:"blackAlpha.800"}})]},s.id))})})]})},du=t=>new Promise((r,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>r(i.result),i.onerror=o=>n(o)}),bb=({isOpen:t,onClose:r,addNewPost:n,updateResource:i,editResource:o,user:s})=>{var De,Se;const{user:a}=hi(),c=s||a,u=oe("blue.500","blue.200"),h=oe("gray.200","gray.600");oe("gray.50","gray.700");const p=oe("blue.500","blue.200"),x=qr(),[b,m]=q.useState(""),[_,w]=q.useState(""),[O,k]=q.useState(""),[T,H]=q.useState(!1),[Z,N]=q.useState(""),[D,B]=q.useState(""),[V,R]=q.useState(""),[P,j]=q.useState(""),[A,E]=q.useState(!1),[z,se]=q.useState([]),[re,v]=q.useState(!1),[ne,M]=q.useState(1),[y,Y]=q.useState(1),[C,W]=q.useState(!1),[L,$]=q.useState(""),[Q,ie]=q.useState(["",""]),[de,le]=q.useState(!1),[be,fe]=q.useState({images:[],videos:[],documents:[],polls:[]}),[Fe,Oe]=q.useState([]),[Ue,ye]=q.useState([]),ee=q.useMemo(()=>[be.images.length>0,be.videos.length>0,be.documents.length>0,be.polls.length>0].filter(Boolean).length>1,[be]);q.useRef(null),q.useEffect(()=>{if(o&&t){if(H(!0),m(o.title||""),w(o.description||""),o.attachments&&Array.isArray(o.attachments)){const Ie={images:[],videos:[],documents:[],polls:[]};o.attachments.forEach(ze=>{const it=ze.url?`${fs}${ze.url}`:`${Ds}/storage/${ze.file_path}`,Ge={id:ze.id,url:it,name:ze.original_name||"File",preview:it};switch(ze.file_type){case"image":Ie.images.push(Ge);break;case"video":Ie.videos.push(Ge);break;case"document":Ie.documents.push(Ge);break}}),fe(Ie)}}else H(!1),m(""),w(""),k(""),N(""),B(""),R(""),j(""),fe({images:[],videos:[],documents:[],polls:[]}),Oe([])},[o,t]),q.useRef(null),q.useRef(null),q.useEffect(()=>{t&&(async(ze=1)=>{var it,Ge;v(!0);try{const ot=localStorage.getItem("major_id"),Nt=localStorage.getItem("faculty_id"),At={...ot?{major_id:ot}:Nt?{faculty_id:Nt}:{},page:ze,per_page:10},ht=await sl(At);se(ht.data||[]),M(ht.current_page||1),Y(ht.last_page||1)}catch(ot){x({title:"Failed to fetch courses",description:((Ge=(it=ot.response)==null?void 0:it.data)==null?void 0:Ge.message)||ot.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})}finally{v(!1)}})(1)},[t]);const _e=async Ie=>{var ze,it;if(!(Ie<1||Ie>y)){v(!0);try{const Ge=localStorage.getItem("major_id"),ot=localStorage.getItem("faculty_id"),Nt={...Ge?{major_id:Ge}:ot?{faculty_id:ot}:{},page:Ie,per_page:10},At=await sl(Nt);se(At.data||[]),M(At.current_page||Ie),Y(At.last_page||1)}catch(Ge){x({title:"Failed to fetch courses",description:((it=(ze=Ge.response)==null?void 0:ze.data)==null?void 0:it.message)||Ge.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})}finally{v(!1)}}},Me=()=>{m(""),w(""),k(""),N(""),B(""),R(""),j(""),$(""),ie(["",""]),le(!1),fe({images:[],videos:[],documents:[],polls:[]}),Oe([])},Le=async()=>{var Ie,ze,it,Ge,ot,Nt;if(!b.trim()){x({title:"Title required",description:"Please add a title for your post",status:"error",duration:3e3,isClosable:!0});return}E(!0);try{const At={};if(At.content=_,At.title=b,At.type=O||"Default",!O&&ee?At.type="Mixed Content":be.images.length>0&&!O&&!ee||be.videos.length>0&&!O&&!ee?At.type="Media":be.documents.length>0&&!O&&!ee?At.type="Course Material":be.polls.length>0&&!O&&!ee&&(At.type="Poll"),T&&o)try{console.log("Updating resource with ID:",o.id);const ht=new FormData;if(b.trim()&&ht.append("title",b.trim()),_.trim()&&ht.append("description",_.trim()),Fe&&Fe.length>0?(console.log(`Adding ${Fe.length} new attachment(s)`),console.log("Attachment files to add:",Fe),Fe.forEach(bt=>{ht.append("attachments[]",bt),console.log("Added file to form data:",bt.name)})):console.log("No new attachment files to add"),Ue&&Ue.length>0&&(console.log(`Removing ${Ue.length} attachment(s):`,Ue),Ue.forEach(bt=>{ht.append("remove_attachments[]",bt)})),console.log("Resource ID for update:",o.id),!o.id)throw new Error("Cannot update resource: Missing resource ID");if(typeof i=="function"){const bt={id:o.id,title:b.trim(),description:_.trim(),newAttachments:Fe,removeAttachmentIds:Ue};console.log("[CreatePostModal.jsx] Calling props.updateResource with:",JSON.stringify(bt,(Ne,lt)=>lt instanceof File?lt.name:lt,2)),await i(bt)}else console.log(`Updating resource ${o.id} with:`,{title:b.trim(),description:_.trim(),newAttachments:Fe,removeAttachmentIds:Ue}),console.log(`Attachment files count: ${Fe.length}`),console.log(`Attachments to remove count: ${Ue.length}`),await s0(o.id,{title:b.trim(),description:_.trim(),newAttachments:Fe,removeAttachmentIds:Ue});x({title:"Resource updated",description:"Your resource has been successfully updated with attachment changes",status:"success",duration:3e3,isClosable:!0}),r()}catch(ht){console.error("Error updating resource with attachments:",ht),x({title:"Update failed",description:((ze=(Ie=ht.response)==null?void 0:Ie.data)==null?void 0:ze.message)||"Failed to update the resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}else{const ht=localStorage.getItem("major_id")||s&&(s.major_id||((it=s.major)==null?void 0:it.id)),bt=localStorage.getItem("faculty_id")||s&&(s.faculty_id||((Ge=s.faculty)==null?void 0:Ge.id));if(!ht||!bt){x({title:"Missing profile information",description:"Your major or faculty information is missing. Please re-login or complete your profile before posting.",status:"error",duration:4e3,isClosable:!0}),E(!1);return}const Ne=new FormData;if(Ne.append("title",b.trim()),Ne.append("description",_.trim()),Ne.append("type",At.type),Ne.append("major_id",ht),Ne.append("faculty_id",bt),Z&&Ne.append("course_id",Z),O==="event"?(Ne.append("event_date",D),Ne.append("location",V)):O==="study_group"&&Ne.append("study_date",P),de&&(Ne.append("poll[question]",L),Q.forEach(lt=>{lt.trim()&&Ne.append("poll[options][]",lt.trim())})),Fe.forEach(lt=>{Ne.append("attachments[]",lt)}),typeof n=="function"){const lt=localStorage.getItem("major_id"),zt=localStorage.getItem("faculty_id"),Ae={title:At.title,type:At.type,attachments:Fe,course_id:Z,major_id:lt,faculty_id:zt};de&&(Ae.poll={question:L,options:Q.filter(We=>We.trim()!=="")}),await n(At.content,Ae.type,Ae)}else await n(Ne);Me(),r()}}catch(At){console.error("Error with resource:",At),x({title:"Error",description:((Nt=(ot=At.response)==null?void 0:ot.data)==null?void 0:Nt.message)||"Failed to process resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}finally{E(!1)}},ue=async Ie=>{const ze=Array.from(Ie.target.files);if(ze.length!==0)try{x({title:"Uploading images...",status:"info",duration:2e3,isClosable:!0});const it=[],Ge=[];for(const ot of ze){if(!ot.type.startsWith("image/")){x({title:"Invalid file type",description:`${ot.name} is not an image file.`,status:"error",duration:3e3,isClosable:!0});continue}if(Ge.push(ot),ot.size>5*1024*1024){x({title:"File too large",description:`${ot.name} exceeds the 5MB limit.`,status:"error",duration:3e3,isClosable:!0});continue}const Nt=Date.now(),At=Math.random().toString(36).substring(2,9),ht=`img-${Nt}-${At}`,bt=await du(ot);it.push({id:ht,name:ot.name,type:ot.type,size:ot.size,url:bt})}Oe(ot=>[...ot,...Ge]),fe(ot=>{const Nt=ot.videos.length>0||ot.documents.length>0;return Nt&&!O?k("Mixed Content"):!Nt&&!O&&k("Media"),{...ot,images:[...ot.images,...it]}}),it.length>0&&x({title:"Images uploaded successfully",status:"success",duration:3e3,isClosable:!0})}catch(it){x({title:"Error uploading images",description:it.message,status:"error",duration:3e3,isClosable:!0})}},Ye=async Ie=>{const ze=Array.from(Ie.target.files);if(ze.length!==0)try{E(!0);const it=ze.filter(ht=>ht.type.startsWith("video/")||ht.name.match(/\.(mp4|mov|avi|wmv|flv|webm|mkv)$/i));it.length!==ze.length&&x({title:"Invalid file type",description:"Only video files are allowed for video upload",status:"warning",duration:3e3,isClosable:!0});const Ge=20*1024*1024,ot=it.filter(ht=>ht.size<=Ge);ot.length!==it.length&&x({title:"File too large",description:"Some videos exceed the 20MB size limit and will be skipped",status:"warning",duration:3e3,isClosable:!0});const At=(await Promise.all(ot.map(async ht=>{try{const bt=await du(ht);return{id:`video-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:ht.name,url:bt,size:ht.size,type:"video",mimeType:ht.type||"video/mp4"}}catch(bt){return console.error(`Error processing video ${ht.name}:`,bt),null}}))).filter(ht=>ht!==null);At.length>0?(fe(ht=>{const bt=ht.images.length>0||ht.documents.length>0;return O!=="Media"&&!bt?k("Media"):bt&&!O&&k("Mixed Content"),{...ht,videos:[...ht.videos,...At].slice(0,2)}}),Oe(ht=>[...ht,...ot]),x({title:"Videos uploaded",description:`Successfully added ${At.length} videos`,status:"success",duration:3e3,isClosable:!0})):x({title:"Upload failed",description:"Failed to process any videos. Please try different files.",status:"error",duration:3e3,isClosable:!0}),Ie.target.value=null}catch(it){console.error("Error processing videos:",it),x({title:"Error uploading videos",description:"Please try again with different videos",status:"error",duration:3e3,isClosable:!0})}finally{E(!1)}},Ze=async Ie=>{const ze=Array.from(Ie.target.files);if(ze.length!==0)try{E(!0);const it=ze.filter(ht=>ht.name.match(/\.(pdf|doc|docx|xls|xlsx|ppt|pptx|txt)$/i));it.length!==ze.length&&x({title:"Invalid file type",description:"Only document file types (PDF, Word, Excel, PowerPoint, etc.) are allowed",status:"warning",duration:3e3,isClosable:!0});const Ge=10*1024*1024,ot=it.filter(ht=>ht.size<=Ge);ot.length!==it.length&&x({title:"File too large",description:"Some documents exceed the 10MB size limit and will be skipped",status:"warning",duration:3e3,isClosable:!0});const At=(await Promise.all(ot.map(async ht=>{try{const bt=await du(ht),Ne=ht.name.split(".").pop().toLowerCase();let lt=ht.type||"application/octet-stream";return(!ht.type||ht.type==="application/octet-stream")&&(Ne==="pdf"?lt="application/pdf":["doc","docx"].includes(Ne)?lt="application/msword":["xls","xlsx"].includes(Ne)?lt="application/vnd.ms-excel":["ppt","pptx"].includes(Ne)?lt="application/vnd.ms-powerpoint":Ne==="txt"&&(lt="text/plain")),{id:`doc-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:ht.name,url:bt,size:ht.size,type:"document",mimeType:lt}}catch(bt){return console.error(`Error processing document ${ht.name}:`,bt),null}}))).filter(ht=>ht!==null);At.length>0?(fe(ht=>{const bt=ht.images.length>0||ht.videos.length>0;return O!=="Course Material"&&!bt?k("Course Material"):bt&&!O&&k("Mixed Content"),{...ht,documents:[...ht.documents,...At].slice(0,4)}}),Oe(ht=>[...ht,...ot]),x({title:"Documents uploaded",description:`Successfully added ${At.length} documents`,status:"success",duration:3e3,isClosable:!0})):x({title:"Upload failed",description:"Failed to process any documents. Please try different files.",status:"error",duration:3e3,isClosable:!0}),Ie.target.value=null}catch(it){console.error("Error processing documents:",it),x({title:"Error uploading documents",description:"Please try again with different documents",status:"error",duration:3e3,isClosable:!0})}finally{E(!1)}},mt=(Ie,ze)=>{const it=be[Ie].find(Ge=>Ge.id===ze);fe(Ge=>{const ot={...Ge};return ot[Ie]=Ge[Ie].filter(Nt=>Nt.id!==ze),ot}),T&&it&&!isNaN(parseInt(it.id))&&(console.log(`Adding attachment ${it.id} to removal list`),ye(Ge=>[...Ge,it.id])),it&&Oe(Ge=>Ge.filter(ot=>ot.name!==it.name))},$e=()=>{W(!0)},je=()=>{Q.length<6?ie([...Q,""]):x({title:"Maximum poll options reached",description:"You can add up to 6 options",status:"warning",duration:2e3,isClosable:!0})},ve=Ie=>{if(Q.length>1){const ze=[...Q];ze.splice(Ie,1),ie(ze)}else x({title:"Minimum poll options required",description:"You need at least 1 option for a poll",status:"warning",duration:2e3,isClosable:!0})},Pe=()=>{if(!L.trim()){x({title:"Poll question is required",status:"error",duration:2e3,isClosable:!0});return}const Ie=Q.filter(Ge=>Ge.trim()!=="");if(Ie.length<1){x({title:"At least 1 poll option is required",status:"error",duration:2e3,isClosable:!0});return}const ze=`poll-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,it={id:ze,question:L,options:Ie.map((Ge,ot)=>({id:`option-${ot}-${ze}`,text:Ge,votes:0})),createdAt:new Date().toISOString(),voters:[]};fe(Ge=>{const ot=Ge.images.length>0||Ge.videos.length>0||Ge.documents.length>0;return ot&&!O?k("Mixed Content"):!ot&&!O&&k("Poll"),{...Ge,polls:[it]}}),le(!0),W(!1),x({title:"Poll added successfully",status:"success",duration:2e3,isClosable:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs(hn,{isOpen:t,onClose:r,size:"lg",children:[e.jsx(Fr,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),e.jsxs(fn,{borderRadius:"2xl",mx:4,overflow:"hidden",children:[e.jsx(Wr,{bg:oe("gray.50","gray.800"),borderBottomWidth:"1px",borderColor:h,pb:4,pt:3,children:e.jsxs(Ce,{align:"center",gap:3,children:[e.jsx(zr,{src:(c==null?void 0:c.avatar_url)||(c==null?void 0:c.avatar)||"https://i.pravatar.cc/150?img=12",size:"md",name:`${(c==null?void 0:c.first_name)||""} ${(c==null?void 0:c.last_name)||""}`.trim()||"You",border:"2px solid",borderColor:u}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(G,{fontWeight:"bold",lineHeight:"short",color:p,children:`${(c==null?void 0:c.first_name)||""} ${(c==null?void 0:c.last_name)||""}`.trim()||"You"}),e.jsx(at,{spacing:1,mt:1,children:e.jsx(G,{fontSize:"xs",color:oe("gray.500","gray.400"),children:"Visible to everyone"})})]})]})}),e.jsx(on,{size:"lg",mt:1}),e.jsx(Ir,{pt:5,pb:2,children:e.jsxs(et,{spacing:5,align:"stretch",children:[e.jsxs(ft,{children:[e.jsx(pt,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,color:oe("gray.700","gray.300"),children:"Title"}),e.jsx(Rt,{placeholder:"Enter a title for your post...",value:b,onChange:Ie=>m(Ie.target.value),size:"md",borderRadius:"md",borderWidth:"2px",bg:oe("white","gray.700"),p:3,_placeholder:{color:oe("gray.400","gray.400")},_focus:{borderColor:u,boxShadow:`0 0 0 1px ${u}`}})]}),e.jsxs(ft,{children:[e.jsx(pt,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,color:oe("gray.700","gray.300"),children:"Content"}),e.jsx(ti,{placeholder:"Share your knowledge, resources, or ask a question...",value:_,onChange:Ie=>w(Ie.target.value),size:"md",borderRadius:"md",borderWidth:"2px",bg:oe("white","gray.700"),minHeight:"140px",p:3,_placeholder:{color:oe("gray.400","gray.400")},_focus:{borderColor:u,boxShadow:`0 0 0 1px ${u}`}}),e.jsx(Ce,{justify:"flex-end",mt:1.5,children:e.jsxs(G,{fontSize:"xs",color:_.length>480?"orange.500":"gray.500",children:[_.length,"/500 characters"]})})]}),e.jsxs(ft,{children:[e.jsx(pt,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,children:"Course"}),e.jsxs(wn,{children:[e.jsx(jn,{as:Te,rightIcon:e.jsx(ds,{}),w:"100%",variant:"outline",textAlign:"left",fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:Z&&z.length>0?`${(De=z.find(Ie=>Ie.id===Number(Z)))==null?void 0:De.code} - ${(Se=z.find(Ie=>Ie.id===Number(Z)))==null?void 0:Se.title}`:"Select course"}),e.jsxs(Sn,{maxH:"320px",overflowY:"auto",children:[re?e.jsx(Ce,{justify:"center",align:"center",h:"100px",children:e.jsx(nn,{})}):z.map(Ie=>{var ze;return e.jsx(er,{onClick:()=>N(Ie.id),children:e.jsxs(ce,{children:[e.jsxs(G,{fontWeight:"medium",children:[Ie.code," - ",Ie.title]}),e.jsx(G,{fontSize:"sm",color:"gray.500",children:(ze=Ie.major)==null?void 0:ze.name})]})},Ie.id)}),y>1&&e.jsx(ce,{borderTop:"1px solid",borderColor:h,mt:2,pt:2,px:2,children:e.jsxs(Ce,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"xs",variant:"outline",onClick:Ie=>{Ie.stopPropagation(),_e(ne-1)},isDisabled:ne<=1||re,children:"Prev"}),e.jsxs(G,{fontSize:"xs",color:"gray.500",children:["Page ",ne," of ",y]}),e.jsx(Te,{size:"xs",variant:"outline",onClick:Ie=>{Ie.stopPropagation(),_e(ne+1)},isDisabled:ne>=y||re,children:"Next"})]})})]})]})]}),e.jsx(xb,{attachments:be,removeAttachment:mt}),e.jsx(gb,{handleImageUpload:ue,handleVideoUpload:Ye,handleDocumentUpload:Ze,handlePollAdd:$e})]})}),e.jsx(Jr,{justifyContent:"end",px:4,py:3,borderTopWidth:"1px",borderColor:h,children:e.jsx(Te,{colorScheme:"blue",leftIcon:e.jsx(xp,{}),isLoading:A,onClick:Le,children:"Post"})})]})]}),e.jsxs(hn,{isOpen:C,onClose:()=>W(!1),size:"md",children:[e.jsx(Fr,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),e.jsxs(fn,{borderRadius:"xl",children:[e.jsx(Wr,{children:"Create Poll"}),e.jsx(on,{}),e.jsx(Ir,{pb:6,children:e.jsxs(et,{spacing:4,align:"stretch",children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Poll Question"}),e.jsx(Rt,{placeholder:"Enter your question",value:L,onChange:Ie=>$(Ie.target.value),autoFocus:!0})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Poll Options"}),e.jsx(et,{spacing:2,align:"stretch",children:Q.map((Ie,ze)=>e.jsxs(Ce,{alignItems:"center",children:[e.jsx(Rt,{placeholder:`Option ${ze+1}`,value:Ie,onChange:it=>{const Ge=[...Q];Ge[ze]=it.target.value,ie(Ge)},mr:2}),Q.length>2&&e.jsx(Te,{size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>ve(ze),children:e.jsx(ct,{as:ul})})]},ze))})]}),e.jsx(Te,{leftIcon:e.jsx(ct,{as:Qn}),variant:"outline",colorScheme:"blue",size:"sm",onClick:je,isDisabled:Q.length>=6,children:"Add Option"})]})}),e.jsxs(Jr,{children:[e.jsx(Te,{colorScheme:"blue",mr:3,leftIcon:e.jsx(ct,{as:ta}),onClick:Pe,children:"Create Poll"}),e.jsx(Te,{onClick:()=>{$(""),ie(["",""]),W(!1)},children:"Cancel"})]})]})]})]})},yb=async()=>{try{return(await yt.get("/registration/faculties")).data}catch(t){return console.error("Error fetching faculties:",t),[]}},vb=async t=>{if(!t)return[];try{return(await yt.get(`/registration/faculties/${t}/majors`)).data}catch(r){return console.error("Error fetching majors:",r),[]}},wb=async(t,r=1)=>{if(!t)return{data:[],current_page:1,last_page:1};try{return(await yt.get("/courses",{params:{major_id:t,page:r}})).data}catch(n){return console.error("Error fetching courses:",n),{data:[],current_page:1,last_page:1}}},jb=()=>{const t=oe("rgba(255, 255, 255, 0.8)","rgba(45, 55, 72, 0.8)"),r=oe("gray.800","white"),n=oe("gray.500","gray.400"),i=oe("blue.500","blue.200"),o=oe("brand.navy","rgba(74, 85, 104, 0.3)");oe("gray.50","gray.800"),oe("blue.50","blue.900");const s=oe("linear-gradient(135deg, #f0f4f8 0%, #eff6ff 50%, #f0f4f8 100%)","linear-gradient(135deg, #1a202c 0%, #2d3748 50%, #1a202c 100%)"),a=qr(),c=Xr();Br();const{isOpen:u,onOpen:h,onClose:p}=Br(),x=()=>{ye(null),p()},[b,m]=q.useState("feed"),[_,w]=q.useState(!0),[O,k]=q.useState("All"),[T,H]=q.useState("All"),[Z,N]=q.useState("All"),[D,B]=q.useState(""),[V,R]=q.useState(!1),[P,j]=q.useState([]),[A,E]=q.useState([]),[z,se]=q.useState({data:[],current_page:1,last_page:1}),[re,v]=q.useState(1),[ne,M]=q.useState(!1),{user:y}=hi(),[Y,C]=q.useState([]),[W,L]=q.useState(1),[$,Q]=q.useState(1),[ie,de]=q.useState(!1),[le,be]=q.useState(0),[fe,Fe]=q.useState(!0),Oe=q.useRef(null),[Ue,ye]=q.useState(null);q.useEffect(()=>{(async()=>{M(!0);const je=await yb();j(je);const ve=JSON.parse(localStorage.getItem("user"));ve!=null&&ve.faculty_id&&k(ve.faculty_id),M(!1)})()},[]),q.useEffect(()=>{if(!O||O==="All"){E([]),N("All");return}(async()=>{M(!0);const je=await vb(O);E(je);const ve=JSON.parse(localStorage.getItem("user"));ve!=null&&ve.major_id&&parseInt(ve.faculty_id)===parseInt(O)?N(ve.major_id):N("All"),M(!1)})()},[O]),q.useEffect(()=>{if(!Z||Z==="All"){se({data:[],current_page:1,last_page:1}),H("All"),v(1);return}(async je=>{M(!0);const ve=await wb(Z,je);se(ve),M(!1)})(re)},[Z,re]);const ee=q.useCallback(async($e=1,je=!1)=>{var ve,Pe;$e===1?w(!0):de(!0);try{const De={page:$e,per_page:10,faculty_id:O!=="All"?O:void 0,major_id:Z!=="All"?Z:void 0,course_id:T!=="All"?T:void 0,search:D||void 0};Object.keys(De).forEach(it=>De[it]===void 0&&delete De[it]);const Se=await n0(De,!0),Ie=Array.isArray(Se)?Se:Se.data||[],ze=Se.pagination||{};je&&$e>1?C(it=>[...it,...Ie]):C(Ie),L(ze.current_page||$e),Q(ze.last_page||1),Fe(ze.current_page<ze.last_page)}catch(De){console.error("Error loading resource data:",De),a({title:"Error loading resources",description:((Pe=(ve=De.response)==null?void 0:ve.data)==null?void 0:Pe.message)||"There was a problem loading the API resource data.",status:"error",duration:3e3,isClosable:!0})}finally{w(!1),de(!1)}},[O,Z,T,D,a]);q.useEffect(()=>{ee(1,!1),L(1),Fe(!0)},[ee]),q.useEffect(()=>{const $e=new IntersectionObserver(ve=>{const[Pe]=ve;Pe.isIntersecting&&fe&&!ie&&!_&&ee(W+1,!0)},{threshold:1}),je=Oe.current;return je&&$e.observe(je),()=>{je&&$e.unobserve(je)}},[W,fe,ie,_,ee]);const _e=q.useCallback($e=>{c(`/resources/${$e}`)},[c]),Me=q.useCallback(($e,je)=>{const ve=Y.findIndex(Ie=>Ie.id===$e);if(ve===-1)return;const Pe=Y[ve],De=Pe.is_saved,Se=[...Y];Se[ve]={...Pe,is_saved:!De},C(Se),Zc($e).then(Ie=>{a(Jd(`${De?"Removed from":"Added to"} bookmarks: ${je}`,null,2e3));const ze=typeof(Ie==null?void 0:Ie.is_saved)=="boolean"?Ie.is_saved:!De,it=[...Y];it[ve]={...it[ve],is_saved:ze},C(it)}).catch(Ie=>{cs("handleBookmark",Ie);const ze=[...Y];ze[ve]={...Pe,is_saved:De},C(ze),a(ls(Ie,`Failed to ${De?"remove from":"add to"} bookmarks`))})},[Y,a]),Le=q.useCallback($e=>{const je=Y.findIndex(Se=>Se.id===$e);if(je===-1)return;const ve=Y[je],Pe={...ve,is_upvoted:!ve.is_upvoted,upvote_count:ve.upvote_count+(ve.is_upvoted?-1:1)},De=[...Y];De[je]=Pe,C(De),rh($e).then(Se=>{const Ie=Y.findIndex(it=>it.id===$e);if(Ie===-1)return;const ze=[...Y];ze[Ie]={...ze[Ie],is_upvoted:Se.upvoted,upvote_count:Se.upvote_count},C(ze)}).catch(Se=>{cs("toggleUpvote",Se);const Ie=Y.findIndex(Ge=>Ge.id===$e);if(Ie===-1)return;const ze={...Y[Ie],is_upvoted:ve.is_upvoted,upvote_count:ve.upvote_count},it=[...Y];it[Ie]=ze,C(it),a(ls(Se,"Failed to update upvote"))})},[Y,a]);q.useCallback(async($e,je)=>{try{const ve=await addComment($e,je),Pe=Y.findIndex(Se=>Se.id===$e);if(Pe===-1)return;const De=[...Y];return De[Pe]={...De[Pe],comment_count:ve.comment_count},C(De),a(Jd("Comment added",null,2e3)),ve.comment}catch(ve){cs("handleAddComment",ve),a(ls(ve,"Failed to add comment"))}},[Y,a]);const ue=q.useCallback(($e,je)=>{console.log(`Resource ${$e} shared via ${je||"general"}`),(!je||je==="general")&&a({title:`Shared resource #${$e}`,status:"info",duration:1500,isClosable:!0})},[a]),Ye=($e,je,ve)=>{w(!0);const Pe=ve.title||"New Resource",De=$e,Se=ve.attachments||[];Se.length>0&&console.log(`Uploading ${Se.length} attachments with resource`);const Ie={title:Pe,description:De,attachments:Se,course_id:ve.course_id,major_id:ve.major_id,faculty_id:ve.faculty_id,type:je};ve.poll&&ve.poll.question&&ve.poll.options&&(Ie.poll={question:ve.poll.question,options:ve.poll.options},console.log("Adding poll data to createResource payload:",Ie.poll)),i0(Ie).then(ze=>{a({title:"Resource submitted successfully",description:"Your resource has been submitted and is pending approval. You will be notified once it is reviewed.",status:"success",duration:5e3,isClosable:!0})}).catch(ze=>{var it,Ge;console.error("Error creating resource:",ze),a({title:"Failed to create resource",description:ze.message||((Ge=(it=ze.response)==null?void 0:it.data)==null?void 0:Ge.message)||"Please try again later",status:"error",duration:3e3,isClosable:!0})}).finally(()=>{w(!1)})},Ze=q.useCallback($e=>{ye({id:$e.id,title:$e.title,description:$e.description,attachments:$e.attachments||[]}),h()},[h]),mt=q.useCallback(async $e=>{try{C(je=>je.filter(ve=>ve.id!==$e))}catch(je){cs("handleDelete",je),a(ls(je,"There was a problem updating the UI after deletion"))}},[a]);return e.jsxs(ce,{position:"relative",bg:s,minH:"calc(100vh - 60px)",py:5,px:{base:4,md:6,lg:8},overflow:"hidden",children:[e.jsx(ce,{position:"absolute",top:"5%",right:"5%",width:"300px",height:"300px",borderRadius:"full",bg:"brand.navy",opacity:"0.05",filter:"blur(70px)",zIndex:0}),e.jsx(ce,{position:"absolute",bottom:"10%",left:"5%",width:"250px",height:"250px",borderRadius:"full",bg:"brand.gold",opacity:"0.08",filter:"blur(60px)",zIndex:0}),_&&le<100&&e.jsx(ce,{position:"fixed",top:"0",left:"0",right:"0",zIndex:"1000",children:e.jsx(io,{size:"xs",value:le,colorScheme:"blue",isAnimated:!0})}),e.jsxs(Ce,{maxW:"1400px",mx:"auto",gap:{base:2,md:4,lg:6},px:{base:2,md:4},children:[e.jsx(bb,{isOpen:u,onClose:x,user:y,addNewPost:Ye,editResource:Ue,updateResource:async $e=>{var je,ve;try{const{updateResource:Pe}=await ho(async()=>{const{updateResource:Se}=await Promise.resolve().then(()=>L5);return{updateResource:Se}},void 0);console.log("Updating resource with full data:",$e),console.log("Attachments data received:",{newAttachments:$e.newAttachments||[],attachmentFiles:$e.attachmentFiles||[],removeAttachmentIds:$e.removeAttachmentIds||[],attachmentsToRemove:$e.attachmentsToRemove||[]});const De=await Pe($e.id,{title:$e.title,description:$e.description,newAttachments:$e.attachmentFiles||$e.newAttachments||[],removeAttachmentIds:$e.attachmentsToRemove||$e.removeAttachmentIds||[]});return C(Se=>Se.map(Ie=>Ie.id===$e.id?{...Ie,...De}:Ie)),a(Jd("Resource updated",((je=$e.attachmentsToRemove)==null?void 0:je.length)>0||((ve=$e.newAttachments)==null?void 0:ve.length)>0?"Resource and attachments updated successfully":"Resource updated successfully",3e3)),De}catch(Pe){throw cs("updateResource",Pe),a(ls(Pe,"Failed to update the resource")),Pe}}}),e.jsx(ce,{flex:"1",maxW:{base:"100%",lg:"calc(100% - 340px)"},order:{base:1,lg:1},children:e.jsxs(et,{spacing:6,align:"stretch",children:[e.jsxs(at,{spacing:4,children:[e.jsx(Bt,{icon:e.jsx(Wn,{}),"aria-label":"Go back",onClick:()=>c(-1),variant:"ghost",borderRadius:"full"}),e.jsx(ut,{size:"xl",color:r,fontWeight:"700",children:"Resources Feed"})]}),e.jsxs(ce,{position:"sticky",top:"0",zIndex:"10",py:4,backdropFilter:"blur(10px)",mb:4,children:[e.jsxs(Ce,{align:"center",gap:4,maxW:"1000px",mx:"auto",children:[e.jsxs(Tr,{size:"lg",flex:"1",children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(lo,{color:"gray.400"})}),e.jsx(Rt,{placeholder:"Search resources...",bg:oe("white","gray.700"),borderRadius:"full",boxShadow:"0px 3px 10px rgba(0, 0, 0, 0.05)",value:D,onChange:$e=>B($e.target.value),borderColor:oe("rgba(226, 232, 240, 0.8)","gray.600"),_focus:{boxShadow:"0px 4px 12px rgba(66, 153, 225, 0.15)",borderColor:oe("blue.300","blue.400")},_hover:{borderColor:oe("blue.200","blue.500")}}),D&&e.jsx(_c,{children:e.jsx(Bt,{size:"sm",variant:"ghost",icon:e.jsx(Wn,{}),onClick:()=>B(""),"aria-label":"Clear search",borderRadius:"full"})})]}),e.jsx(Te,{leftIcon:e.jsx(Wc,{}),onClick:()=>R(!V),bg:V?"blue.500":oe("white","gray.700"),color:V?"white":r,borderRadius:"full",boxShadow:"0px 3px 10px rgba(0, 0, 0, 0.05)",borderColor:oe("rgba(226, 232, 240, 0.8)","gray.600"),border:"1px solid",_hover:{bg:V?"blue.600":oe("gray.50","gray.600"),transform:"translateY(-2px)",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.08)"},transition:"all 0.2s ease-in-out",children:e.jsx(G,{as:"span",children:"Filter"})})]}),V&&e.jsx(ce,{mt:4,bg:t,p:4,borderRadius:"lg",boxShadow:"md",children:e.jsx(pb,{searchQuery:D,facultyFilter:O,setFacultyFilter:k,courseFilter:T,setCourseFilter:H,majorFilter:Z,setMajorFilter:N,faculties:P,majors:A,courses:z.data,coursePagination:z,onCoursePageChange:v,isLoadingFilters:ne,showFilters:V,onToggleFilters:()=>R(!V),onClearFilters:()=>{k("All"),H("All"),N("All")}})})]}),e.jsx(ce,{bg:t,borderRadius:"xl",boxShadow:"sm",p:3,mb:6,border:"1px solid",borderColor:o,cursor:"pointer",onClick:h,_hover:{boxShadow:"md",transform:"translateY(-1px)"},transition:"all 0.2s ease",children:e.jsxs(at,{spacing:3,pointerEvents:"none",children:[e.jsx(zr,{size:"md",name:y?`${y.first_name} ${y.last_name}`:"User",src:(y==null?void 0:y.avatar_url)||(y==null?void 0:y.avatar),border:"2px solid",borderColor:oe("blue.200","blue.700")}),e.jsx(ce,{flex:"1",bg:oe("gray.50","gray.700"),borderRadius:"full",px:4,py:2.5,transition:"all 0.2s",border:"1px solid",borderColor:oe("gray.200","gray.600"),children:e.jsx(G,{color:n,fontSize:"sm",children:"What's on your mind?"})})]})}),e.jsxs(ce,{w:"full",maxW:{base:"100%",md:"650px",lg:"100%"},mx:"auto",position:"relative",children:[e.jsx(fb,{resources:Y,cardBg:t,textColor:r,mutedText:n,borderColor:o,isLoading:_,feedType:b,currentUser:y,onCardClick:_e,onBookmark:Me,onUpvote:Le,onShare:ue,onEdit:Ze,onDelete:mt}),fe&&e.jsx(ce,{ref:Oe,py:6,textAlign:"center",children:ie?e.jsx(nn,{size:"md",color:i,thickness:"3px",speed:"0.65s"}):e.jsx(G,{fontSize:"sm",color:n,children:"Scroll for more"})}),!fe&&Y.length>10&&e.jsx(ce,{py:6,textAlign:"center",children:e.jsx(G,{fontSize:"sm",color:n,children:"No more resources to load."})})]})]})}),e.jsx(ce,{display:{base:"none",lg:"block"},order:{base:2,lg:2},width:"320px",flexShrink:"0",children:e.jsx(ce,{position:"sticky",top:"20px",width:"320px",maxHeight:"calc(100vh - 40px)",overflowY:"auto",paddingRight:"2",css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{background:oe("rgba(0,0,0,0.1)","rgba(255,255,255,0.1)"),borderRadius:"24px"}},children:e.jsx(mb,{limit:5})})})]})]})},zf=async(t=1,r="")=>{var n;try{return(await yt.get("/clubs",{params:{page:t,query:r||void 0},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to fetch clubs"}}},Sb=async t=>{var r;try{return(await yt.get(`/clubs/${t}`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch club details"}}},Cb=async(t,r)=>{var n;try{return(await yt.post(`/clubs/${t}/members`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to add club member"}}},_b=async(t,r,n)=>{var i;try{const o={};let s=`/clubs/${t}/members/${r}`;return n instanceof FormData&&(s+="?_method=PUT",o.headers={"Content-Type":"multipart/form-data"}),(await yt.post(s,n,o)).data}catch(o){throw((i=o.response)==null?void 0:i.data)||{message:"Failed to update club member"}}},kb=async(t,r)=>{var n;try{return(await yt.delete(`/clubs/${t}/members/${r}`)).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to delete club member"}}},Ab=async t=>{var r;try{return(await yt.post("/clubs",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to create club"}}},Lb=async(t,r)=>{var n;try{return(await yt.post(`/clubs/${t}/events`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to create club event"}}},Pb=async(t,r)=>{var n;try{const i={};let o=`/clubs/${t}`;return r instanceof FormData&&(o+="?_method=PUT",i.headers={"Content-Type":"multipart/form-data"}),(await yt.post(o,r,i)).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to update club"}}},Nb=async t=>{var r;try{return(await yt.delete(`/clubs/${t}`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to delete club"}}},Ob=({isOpen:t,onClose:r,onClubCreated:n})=>{const[i,o]=q.useState(""),[s,a]=q.useState(""),[c,u]=q.useState(null),[h,p]=q.useState(!1),x=qr(),b=_=>{u(_.target.files[0])},m=async _=>{_.preventDefault(),p(!0);const w=new FormData;w.append("name",i),w.append("description",s),c&&w.append("logo",c);try{await Ab(w),x({title:"Club created.",description:"The new club has been successfully created.",status:"success",duration:5e3,isClosable:!0}),n(),r()}catch(O){x({title:"Creation failed.",description:O.message||"Could not create the club.",status:"error",duration:5e3,isClosable:!0})}finally{p(!1)}};return e.jsxs(hn,{isOpen:t,onClose:r,children:[e.jsx(Fr,{}),e.jsxs(fn,{as:"form",onSubmit:m,children:[e.jsx(Wr,{children:"Create a New Club"}),e.jsx(on,{}),e.jsx(Ir,{children:e.jsxs(et,{spacing:4,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Club Name"}),e.jsx(Rt,{value:i,onChange:_=>o(_.target.value),placeholder:"Enter club name"})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Description"}),e.jsx(ti,{value:s,onChange:_=>a(_.target.value),placeholder:"Tell us about the club"})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Club Logo"}),e.jsx(Rt,{type:"file",onChange:b,accept:"image/*"})]})]})}),e.jsxs(Jr,{children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:r,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",type:"submit",isLoading:h,children:"Create Club"})]})]})]})},Rb=({isOpen:t,onClose:r,club:n,onEventCreated:i})=>{const[o,s]=q.useState(""),[a,c]=q.useState(""),[u,h]=q.useState(""),[p,x]=q.useState(""),[b,m]=q.useState(""),[_,w]=q.useState(null),[O,k]=q.useState(!1),T=qr(),H=N=>{w(N.target.files[0])},Z=async N=>{if(N.preventDefault(),!n)return;k(!0);const D=new FormData;D.append("title",o),D.append("event_datetime",a),D.append("location",u),D.append("description",p),D.append("speaker_names",b),_&&D.append("image_path",_);try{await Lb(n.id,D),T({title:"Event created.",description:`The event for ${n.name} has been successfully created.`,status:"success",duration:5e3,isClosable:!0}),i(),r()}catch(B){T({title:"Creation failed.",description:B.message||"Could not create the event.",status:"error",duration:5e3,isClosable:!0})}finally{k(!1)}};return e.jsxs(hn,{isOpen:t,onClose:r,children:[e.jsx(Fr,{}),e.jsxs(fn,{as:"form",onSubmit:Z,children:[e.jsxs(Wr,{children:["Create Event for ",n==null?void 0:n.name]}),e.jsx(on,{}),e.jsx(Ir,{children:e.jsxs(et,{spacing:4,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Event Title"}),e.jsx(Rt,{value:o,onChange:N=>s(N.target.value),placeholder:"Enter event title"})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Date and Time"}),e.jsx(Rt,{type:"datetime-local",value:a,onChange:N=>c(N.target.value)})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Location"}),e.jsx(Rt,{value:u,onChange:N=>h(N.target.value),placeholder:"Enter event location"})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Description"}),e.jsx(ti,{value:p,onChange:N=>x(N.target.value),placeholder:"Event details"})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Speaker Names"}),e.jsx(Rt,{value:b,onChange:N=>m(N.target.value),placeholder:"e.g., John Doe, Jane Smith"})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Event Image"}),e.jsx(Rt,{type:"file",onChange:H,accept:"image/*"})]})]})}),e.jsxs(Jr,{children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:r,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",type:"submit",isLoading:O,children:"Create Event"})]})]})]})},Eb=({isOpen:t,onClose:r,club:n,onClubUpdated:i})=>{const[o,s]=q.useState(""),[a,c]=q.useState(""),[u,h]=q.useState(null),[p,x]=q.useState(!1),b=qr();q.useEffect(()=>{n&&(s(n.name||""),c(n.description||""),h(null))},[n,t]);const m=w=>{h(w.target.files[0])},_=async w=>{if(w.preventDefault(),!n)return;x(!0);const O=new FormData;O.append("name",o),O.append("description",a),u&&O.append("logo",u);try{await Pb(n.id,O),b({title:"Club updated",description:"The club has been successfully updated.",status:"success",duration:5e3,isClosable:!0}),i(),r()}catch(k){b({title:"Update failed",description:k.message||"Could not update the club.",status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}};return e.jsxs(hn,{isOpen:t,onClose:r,size:"lg",isCentered:!0,children:[e.jsx(Fr,{}),e.jsxs(fn,{as:"form",onSubmit:_,children:[e.jsx(Wr,{children:"Edit Club"}),e.jsx(on,{}),e.jsx(Ir,{children:e.jsxs(et,{spacing:4,align:"stretch",children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Club Name"}),e.jsx(Rt,{value:o,onChange:w=>s(w.target.value)})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Description"}),e.jsx(ti,{value:a,onChange:w=>c(w.target.value)})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Club Logo (optional)"}),e.jsx(Rt,{type:"file",onChange:m,accept:"image/*"})]})]})}),e.jsxs(Jr,{children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:r,isDisabled:p,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",type:"submit",isLoading:p,children:"Save Changes"})]})]})]})},Tb=({isOpen:t,onClose:r,clubId:n,onMemberAdded:i})=>{const[o,s]=q.useState(""),[a,c]=q.useState(null),[u,h]=q.useState(null),[p,x]=q.useState(!1),b=qr(),m=oe("gray.200","gray.600"),_=k=>{const T=k.target.files[0];if(T){c(T);const H=new FileReader;H.onloadend=()=>{h(H.result)},H.readAsDataURL(T)}},w=async k=>{if(k.preventDefault(),!o.trim()){b({title:"Error",description:"Please enter member name",status:"error",duration:3e3,isClosable:!0});return}if(!a){b({title:"Error",description:"Please select a member picture",status:"error",duration:3e3,isClosable:!0});return}x(!0);try{const T=new FormData;T.append("name",o),T.append("picture",a),await Cb(n,T),b({title:"Success",description:"Member added successfully",status:"success",duration:3e3,isClosable:!0}),s(""),c(null),h(null),i(),r()}catch(T){b({title:"Error",description:T.message||"Failed to add member",status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}},O=()=>{s(""),c(null),h(null),r()};return e.jsxs(hn,{isOpen:t,onClose:O,size:"md",children:[e.jsx(Fr,{backdropFilter:"blur(4px)"}),e.jsxs(fn,{children:[e.jsx(Wr,{children:"Add New Member"}),e.jsx(on,{}),e.jsxs("form",{onSubmit:w,children:[e.jsx(Ir,{children:e.jsxs(et,{spacing:4,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Member Name"}),e.jsx(Rt,{value:o,onChange:k=>s(k.target.value),placeholder:"Enter member name"})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Member Picture"}),e.jsx(ce,{borderWidth:"2px",borderStyle:"dashed",borderColor:m,borderRadius:"lg",p:4,textAlign:"center",cursor:"pointer",_hover:{borderColor:"blue.500"},onClick:()=>document.getElementById("member-picture-input").click(),children:u?e.jsx(Ar,{src:u,alt:"Preview",maxH:"200px",mx:"auto",borderRadius:"md"}):e.jsxs(et,{spacing:2,children:[e.jsx(Ju,{size:40}),e.jsx(G,{fontSize:"sm",children:"Click to upload member picture"})]})}),e.jsx(Rt,{id:"member-picture-input",type:"file",accept:"image/*",onChange:_,display:"none"})]})]})}),e.jsxs(Jr,{children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:O,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",type:"submit",isLoading:p,loadingText:"Adding...",children:"Add Member"})]})]})]})]})},zb=({isOpen:t,onClose:r,clubId:n,member:i,onMemberUpdated:o})=>{const[s,a]=q.useState(""),[c,u]=q.useState(null),[h,p]=q.useState(null),[x,b]=q.useState(!1),m=qr(),_=oe("gray.200","gray.600");q.useEffect(()=>{i&&(a(i.name||""),p(`https://mu-connect.me/api/storage/${i.picture}`))},[i]);const w=T=>{const H=T.target.files[0];if(H){u(H);const Z=new FileReader;Z.onloadend=()=>{p(Z.result)},Z.readAsDataURL(H)}},O=async T=>{if(T.preventDefault(),!s.trim()){m({title:"Error",description:"Please enter member name",status:"error",duration:3e3,isClosable:!0});return}b(!0);try{const H=new FormData;H.append("name",s),c&&H.append("picture",c),await _b(n,i.id,H),m({title:"Success",description:"Member updated successfully",status:"success",duration:3e3,isClosable:!0}),o(),r()}catch(H){m({title:"Error",description:H.message||"Failed to update member",status:"error",duration:5e3,isClosable:!0})}finally{b(!1)}},k=()=>{a(""),u(null),p(null),r()};return e.jsxs(hn,{isOpen:t,onClose:k,size:"md",children:[e.jsx(Fr,{backdropFilter:"blur(4px)"}),e.jsxs(fn,{children:[e.jsx(Wr,{children:"Edit Member"}),e.jsx(on,{}),e.jsxs("form",{onSubmit:O,children:[e.jsx(Ir,{children:e.jsxs(et,{spacing:4,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Member Name"}),e.jsx(Rt,{value:s,onChange:T=>a(T.target.value),placeholder:"Enter member name"})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Member Picture"}),e.jsx(ce,{borderWidth:"2px",borderStyle:"dashed",borderColor:_,borderRadius:"lg",p:4,textAlign:"center",cursor:"pointer",_hover:{borderColor:"blue.500"},onClick:()=>document.getElementById("edit-member-picture-input").click(),children:h?e.jsx(Ar,{src:h,alt:"Preview",maxH:"200px",mx:"auto",borderRadius:"md"}):e.jsxs(et,{spacing:2,children:[e.jsx(Ju,{size:40}),e.jsx(G,{fontSize:"sm",children:"Click to upload member picture"})]})}),e.jsx(Rt,{id:"edit-member-picture-input",type:"file",accept:"image/*",onChange:w,display:"none"}),e.jsx(G,{fontSize:"xs",color:"gray.500",mt:2,children:"Leave empty to keep current picture"})]})]})}),e.jsxs(Jr,{children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:k,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",type:"submit",isLoading:x,loadingText:"Updating...",children:"Update Member"})]})]})]})]})},Fb=({members:t,textColor:r,mutedText:n,accentColor:i,borderColor:o,formatDate:s})=>{const[a,c]=q.useState(0),[u,h]=q.useState(0),[p,x]=q.useState(0),b=oe("gray.50","gray.800"),m=()=>{c(H=>H===0?t.length-1:H-1)},_=()=>{c(H=>H===t.length-1?0:H+1)},w=H=>{h(H.targetTouches[0].clientX)},O=H=>{x(H.targetTouches[0].clientX)},k=()=>{if(!u||!p)return;const H=u-p,Z=H>50,N=H<-50;Z&&_(),N&&m(),h(0),x(0)},T=t[a];return e.jsxs(ce,{position:"relative",py:4,children:[e.jsx(ce,{onTouchStart:w,onTouchMove:O,onTouchEnd:k,cursor:"pointer",children:e.jsx(Zt,{bg:b,borderWidth:"2px",borderColor:i,borderRadius:"2xl",overflow:"hidden",boxShadow:"xl",maxW:"400px",mx:"auto",children:e.jsx(un,{p:8,children:e.jsxs(et,{spacing:6,children:[e.jsxs(ce,{position:"relative",children:[e.jsx(zr,{size:"2xl",src:`https://mu-connect.me/api/storage/${T.picture}`,name:T.name,borderWidth:"4px",borderColor:i,boxShadow:"lg"}),e.jsxs(Pr,{position:"absolute",bottom:"-2",right:"-2",colorScheme:"blue",fontSize:"xs",px:2,py:1,borderRadius:"full",children:[a+1," / ",t.length]})]}),e.jsxs(et,{spacing:2,w:"full",children:[e.jsx(G,{fontWeight:"bold",fontSize:"2xl",color:r,textAlign:"center",children:T.name}),(localStorage.getItem("role")==="admin"||localStorage.getItem("role")==="moderator")&&e.jsxs(at,{spacing:2,mt:2,children:[e.jsx(Bt,{icon:e.jsx(ao,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>window.handleEditMember(T),"aria-label":"Edit member"}),e.jsx(Bt,{icon:e.jsx(hl,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>window.handleDeleteMember(T),"aria-label":"Delete member"})]})]})]})})})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(Bt,{icon:e.jsx(us,{}),position:"absolute",left:{base:0,md:-4},top:"50%",transform:"translateY(-50%)",onClick:m,colorScheme:"blue",variant:"solid",borderRadius:"full",size:"lg",boxShadow:"lg","aria-label":"Previous member",zIndex:2}),e.jsx(Bt,{icon:e.jsx(mo,{}),position:"absolute",right:{base:0,md:-4},top:"50%",transform:"translateY(-50%)",onClick:_,colorScheme:"blue",variant:"solid",borderRadius:"full",size:"lg",boxShadow:"lg","aria-label":"Next member",zIndex:2})]}),t.length>1&&e.jsx(at,{justify:"center",spacing:2,mt:6,children:t.map((H,Z)=>e.jsx(ce,{w:a===Z?"24px":"8px",h:"8px",borderRadius:"full",bg:a===Z?i:o,transition:"all 0.3s",cursor:"pointer",onClick:()=>c(Z)},Z))}),t.length>1&&e.jsx(G,{textAlign:"center",fontSize:"xs",color:n,mt:4,fontStyle:"italic",children:"Swipe or use arrows to navigate"})]})},Ib=({isOpen:t,onClose:r,clubId:n})=>{const[i,o]=q.useState(null),[s,a]=q.useState(!1),[c,u]=q.useState(null),[h,p]=q.useState(null),[x,b]=q.useState(null),{isOpen:m,onOpen:_,onClose:w}=Br(),{isOpen:O,onOpen:k,onClose:T}=Br(),{isOpen:H,onOpen:Z,onClose:N}=Br(),D=Vi.useRef(),B=qr(),V=localStorage.getItem("role"),R=V==="admin"||V==="moderator",P=oe("white","gray.700"),j=oe("gray.800","white"),A=oe("gray.600","gray.400"),E=oe("gray.200","gray.600"),z=oe("blue.500","blue.300"),se=oe("linear(to-br, blue.50, purple.50)","linear(to-br, gray.800, gray.900)");q.useEffect(()=>{t&&n&&re()},[t,n]);const re=async()=>{a(!0),u(null);try{const Y=await Sb(n);o(Y)}catch(Y){u(Y.message||"Failed to fetch club details")}finally{a(!1)}},v=Y=>new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),ne=Y=>{p(Y),k()},M=Y=>{b(Y),Z()},y=async()=>{if(x)try{await kb(n,x.id),B({title:"Success",description:"Member removed successfully",status:"success",duration:3e3,isClosable:!0}),N(),b(null),re()}catch(Y){B({title:"Error",description:Y.message||"Failed to remove member",status:"error",duration:5e3,isClosable:!0})}};return q.useEffect(()=>(window.handleEditMember=ne,window.handleDeleteMember=M,()=>{delete window.handleEditMember,delete window.handleDeleteMember}),[n]),e.jsxs(hn,{isOpen:t,onClose:r,size:"4xl",scrollBehavior:"inside",children:[e.jsx(Fr,{backdropFilter:"blur(4px)"}),e.jsxs(fn,{maxH:"90vh",children:[e.jsx(Wr,{bgGradient:se,borderTopRadius:"md",pb:4,children:e.jsx(G,{fontSize:"2xl",fontWeight:"bold",color:j,children:"Club Details"})}),e.jsx(on,{top:4}),e.jsx(Ir,{p:6,children:s?e.jsx(Ce,{justify:"center",align:"center",minH:"300px",children:e.jsx(nn,{size:"xl",color:z,thickness:"4px"})}):c?e.jsx(ce,{textAlign:"center",py:10,children:e.jsx(G,{color:"red.500",fontSize:"lg",children:c})}):i?e.jsxs(et,{spacing:6,align:"stretch",children:[e.jsx(Zt,{bg:P,boxShadow:"md",borderRadius:"xl",overflow:"hidden",children:e.jsx(un,{p:0,children:e.jsxs(Ce,{direction:{base:"column",md:"row"},align:"center",gap:6,p:6,children:[e.jsx(Ar,{src:`https://mu-connect.me/api/storage/${i.logo}`,alt:i.name,boxSize:{base:"120px",md:"150px"},objectFit:"cover",borderRadius:"xl",boxShadow:"lg"}),e.jsxs(et,{align:{base:"center",md:"flex-start"},flex:1,spacing:3,children:[e.jsx(ut,{size:"lg",color:j,textAlign:{base:"center",md:"left"},children:i.name}),e.jsx(G,{color:A,fontSize:"md",textAlign:{base:"center",md:"left"},children:i.description}),e.jsxs(at,{spacing:4,flexWrap:"wrap",justify:{base:"center",md:"flex-start"},children:[e.jsx(Pr,{colorScheme:"blue",px:3,py:1,borderRadius:"full",fontSize:"sm",children:e.jsxs(at,{spacing:1,children:[e.jsx(Un,{}),e.jsxs(G,{children:[i.members," members"]})]})}),i.upcoming_event&&e.jsx(Pr,{colorScheme:"purple",px:3,py:1,borderRadius:"full",fontSize:"sm",children:e.jsxs(at,{spacing:1,children:[e.jsx(An,{}),e.jsx(G,{children:"Upcoming Event"})]})})]})]})]})})}),i.upcoming_event&&e.jsx(Zt,{bg:P,boxShadow:"md",borderRadius:"xl",children:e.jsxs(un,{children:[e.jsx(ut,{size:"md",mb:4,color:j,children:"Upcoming Event"}),e.jsxs(et,{align:"stretch",spacing:2,children:[e.jsx(G,{fontSize:"lg",fontWeight:"semibold",color:z,children:i.upcoming_event.title}),e.jsx(G,{color:A,children:i.upcoming_event.description||"No description available"})]})]})}),e.jsx(Zt,{bg:P,boxShadow:"md",borderRadius:"xl",children:e.jsxs(un,{children:[e.jsxs(Ce,{justify:"space-between",align:"center",mb:4,children:[e.jsx(ut,{size:"md",color:j,children:"Meet the Members"}),R&&e.jsx(Te,{leftIcon:e.jsx(Qn,{}),colorScheme:"blue",size:"sm",onClick:_,children:"Add Member"})]}),e.jsx(sn,{mb:4,borderColor:E}),i.club_members&&i.club_members.length>0?e.jsx(Fb,{members:i.club_members,textColor:j,mutedText:A,accentColor:z,borderColor:E,formatDate:v}):e.jsxs(ce,{textAlign:"center",py:8,children:[e.jsx(Un,{size:50,style:{margin:"0 auto 16px",opacity:.3}}),e.jsx(G,{color:A,fontSize:"lg",children:"No members found"})]})]})})]}):null}),e.jsx(Jr,{borderTop:"1px solid",borderColor:E,children:e.jsx(Te,{colorScheme:"blue",onClick:r,children:"Close"})})]}),e.jsx(Tb,{isOpen:m,onClose:w,clubId:n,onMemberAdded:re}),e.jsx(zb,{isOpen:O,onClose:T,clubId:n,member:h,onMemberUpdated:re}),e.jsx(ll,{isOpen:H,leastDestructiveRef:D,onClose:N,children:e.jsx(Fr,{children:e.jsxs(cl,{children:[e.jsx(Wr,{fontSize:"lg",fontWeight:"bold",children:"Remove Member"}),e.jsxs(Ir,{children:["Are you sure you want to remove ",e.jsx("strong",{children:x==null?void 0:x.name})," from the club? This action cannot be undone."]}),e.jsxs(Jr,{children:[e.jsx(Te,{ref:D,onClick:N,children:"Cancel"}),e.jsx(Te,{colorScheme:"red",onClick:y,ml:3,children:"Remove"})]})]})})})]})},Mb=hr(Zt),Db=()=>{const[t,r]=q.useState([]),[n,i]=q.useState(!0),[o,s]=q.useState(null),[a,c]=q.useState(1),[u,h]=q.useState(1),[p,x]=q.useState(""),b=localStorage.getItem("role"),m=b==="admin"||b==="moderator",_=oe("white","gray.700"),w=oe("gray.800","white"),O=oe("gray.500","gray.400"),k=oe("blue.500","blue.200"),T=oe("gray.200","gray.700"),H=Xr(),Z=ca({base:!0,md:!1}),N=qr(),{isOpen:D,onOpen:B,onClose:V}=Br(),{isOpen:R,onOpen:P,onClose:j}=Br(),[A,E]=q.useState(null),{isOpen:z,onOpen:se,onClose:re}=Br(),[v,ne]=q.useState(null),{isOpen:M,onOpen:y,onClose:Y}=Br(),[C,W]=q.useState(null),L=q.useCallback(async(fe,Fe)=>{i(!0),s(null);try{const Oe=await zf(fe,Fe);if(!Oe||!Oe.data){r([]);return}r(Oe.data),h(Oe.last_page||1),c(Oe.current_page||1)}catch(Oe){s(Oe.message||"Failed to fetch clubs."),N({title:"Error",description:Oe.message,status:"error",duration:5e3,isClosable:!0})}finally{i(!1)}},[N,zf]);q.useEffect(()=>{const fe=setTimeout(()=>{L(a,p)},300);return()=>clearTimeout(fe)},[a,p,L]);const $=fe=>{E(fe),P()},Q=fe=>{ne(fe),se()},ie=fe=>{W(fe),y()},de=async fe=>{if(window.confirm(`Are you sure you want to delete ${fe.name}? This action cannot be undone.`))try{await Nb(fe.id),N({title:"Club deleted",status:"success",duration:3e3,isClosable:!0}),L(a,p)}catch(Fe){N({title:"Error",description:Fe.message,status:"error",duration:5e3,isClosable:!0})}},le=fe=>e.jsxs(Mb,{bg:_,boxShadow:"md",borderRadius:"lg",overflow:"hidden",whileHover:{y:-5},transition:{duration:.2},children:[e.jsx(ce,{position:"relative",children:e.jsx(Ar,{src:`https://mu-connect.me/api/storage/${fe.logo}`,alt:`${fe.name} logo`,height:"130px",width:"100%",objectFit:"cover"})}),e.jsxs(un,{pt:3,children:[e.jsx(ut,{size:"md",mb:2,color:w,children:fe.name}),e.jsx(G,{fontSize:"sm",color:O,noOfLines:2,mb:3,children:fe.description}),e.jsxs(yr,{spacing:2,mb:4,children:[e.jsxs(at,{children:[e.jsx(Un,{size:14,color:k}),e.jsxs(G,{fontSize:"sm",color:w,children:[fe.members," members"]})]}),fe.upcoming_event&&e.jsxs(at,{children:[e.jsx(An,{size:14,color:k}),e.jsxs(G,{fontSize:"sm",color:w,children:["Upcoming: ",fe.upcoming_event.title]})]})]})]}),e.jsx(ha,{pt:0,borderTop:"1px solid",borderColor:T,children:e.jsxs(Ce,{justify:"space-between",align:"center",w:"full",children:[e.jsx(Te,{leftIcon:e.jsx(Vg,{}),variant:"ghost",colorScheme:"blue",size:"sm",onClick:()=>ie(fe),children:"View Members"}),(b==="admin"||b==="moderator")&&e.jsxs(wn,{children:[e.jsx(jn,{as:Bt,icon:e.jsx(Uc,{}),size:"sm",variant:"ghost"}),e.jsxs(Sn,{children:[e.jsx(er,{icon:e.jsx(Qn,{}),onClick:()=>$(fe),children:"Create Event"}),e.jsx(er,{icon:e.jsx(ao,{}),onClick:()=>Q(fe),children:"Edit Club"}),e.jsx(er,{icon:e.jsx(hl,{}),onClick:()=>de(fe),color:"red.500",children:"Delete Club"})]})]})]})})]},fe.id),be=fe=>{c(1),x(fe.target.value)};return e.jsx(Ce,{minH:"100vh",p:{base:4,md:8},bg:oe("gray.50","gray.800"),children:e.jsxs(ce,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsxs(Ce,{justify:"space-between",align:"center",mb:6,direction:Z?"column":"row",gap:4,children:[e.jsxs(at,{spacing:4,children:[e.jsx(Bt,{icon:e.jsx(Wn,{}),"aria-label":"Go back",onClick:()=>H("/dashboard"),variant:"ghost",borderRadius:"full"}),e.jsx(ut,{size:"xl",color:w,fontWeight:"800",letterSpacing:"tight",children:"Students Clubs"})]}),m&&e.jsx(Te,{leftIcon:e.jsx(Qn,{}),colorScheme:"blue",onClick:B,size:"sm",children:"Create Club"})]}),e.jsx(Ce,{justify:"space-between",align:Z?"flex-start":"center",direction:Z?"column":"row",gap:4,mb:6,children:e.jsxs(Tr,{maxW:"250px",children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(lo,{color:O})}),e.jsx(Rt,{placeholder:"Search clubs...",size:"sm",borderRadius:"full",value:p,onChange:be,_focus:{boxShadow:`0 0 0 2px ${k}`}})]})}),n?e.jsx(Ce,{justify:"center",py:10,children:e.jsx(nn,{size:"xl"})}):o?e.jsx(G,{color:"red.500",children:o}):t.length>0?e.jsx(di,{columns:{base:1,md:2,lg:3},spacing:6,children:t.map(fe=>le(fe))}):e.jsx(Ce,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(ce,{textAlign:"center",maxW:"400px",children:[e.jsx(lo,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),e.jsx(ut,{size:"md",mb:2,color:w,children:"No clubs found"}),e.jsx(G,{color:O,children:p?`No clubs match your search "${p}". Try a different search term.`:"No clubs are available at the moment."})]})}),t.length>0&&e.jsx(Ce,{justify:"center",mt:8,children:e.jsxs(at,{children:[e.jsx(Te,{onClick:()=>c(fe=>Math.max(1,fe-1)),isDisabled:a<=1,children:"Previous"}),e.jsxs(G,{children:["Page ",a," of ",u]}),e.jsx(Te,{onClick:()=>c(fe=>Math.min(u,fe+1)),isDisabled:a>=u,children:"Next"})]})}),e.jsx(Ob,{isOpen:D,onClose:V,onClubCreated:()=>L(1,"")}),e.jsx(Rb,{isOpen:R,onClose:j,club:A,onEventCreated:()=>L(a,p)}),e.jsx(Eb,{isOpen:z,onClose:re,club:v,onClubUpdated:()=>L(a,p)}),e.jsx(Ib,{isOpen:M,onClose:Y,clubId:C==null?void 0:C.id})]})})},bc=hr(Zt),Bb=hr(Yo),qb=()=>{const{id:t}=Bc(),r=Xr(),n=oe("white","gray.700");oe("gray.800","white");const i=oe("gray.500","gray.400"),o=oe("blue.500","blue.300"),s=oe("gray.50","gray.600");ca({base:!0,md:!1});const a={code:"CS 301",title:"Computer Architecture",members:142,activeGroups:8,resources:23,discussions:45,recentMaterials:[{type:"notes",title:"Midterm Prep Notes",author:"Sarah M",votes:15},{type:"video",title:"Cache Memory Explained",author:"Ali H",votes:9},{type:"notes",title:"Practice Problem Set",author:"Noura K",votes:22}],studyGroups:[{name:"Digital Logic Study Group",members:12,active:"2h ago"},{name:"Weekly Problem Solving",members:8,active:"5h ago"}]};return e.jsx(Ce,{minH:"100vh",p:{base:4,md:8},bg:oe("gray.50","gray.800"),children:e.jsxs(ce,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsx(Te,{leftIcon:e.jsx(Wn,{}),onClick:()=>r(-1),mb:8,variant:"ghost",color:o,borderRadius:"full",_hover:{bg:s},children:"Back to Courses"}),e.jsxs(bc,{bg:n,boxShadow:"xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsx(fo,{px:{base:4,md:8},py:8,bgGradient:`linear(to-r, ${o}, blue.400)`,color:"white",children:e.jsxs(yr,{spacing:4,children:[e.jsxs(at,{spacing:3,children:[e.jsx(Pr,{variant:"solid",fontSize:"lg",px:3,py:1,borderRadius:"full",children:a.code}),e.jsxs(ut,{size:"xl",children:[a.title," Community"]})]}),e.jsxs(Ce,{gap:6,flexWrap:"wrap",children:[e.jsxs(at,{spacing:2,children:[e.jsx(ct,{as:Un,boxSize:5}),e.jsxs(G,{fontWeight:"500",children:[a.members," Members"]})]}),e.jsxs(at,{spacing:2,children:[e.jsx(ct,{as:zs,boxSize:5}),e.jsxs(G,{fontWeight:"500",children:[a.activeGroups," Active Groups"]})]}),e.jsxs(at,{spacing:2,children:[e.jsx(ct,{as:Cu,boxSize:5}),e.jsxs(G,{fontWeight:"500",children:[a.discussions," Discussions"]})]})]})]})}),e.jsx(un,{px:{base:4,md:8},py:8,children:e.jsxs(da,{variant:"enclosed-colored",colorScheme:"blue",children:[e.jsxs(ua,{children:[e.jsxs(Kn,{_selected:{color:"white",bg:o},borderRadius:"md",children:["Resources (",a.resources,")"]}),e.jsxs(Kn,{_selected:{color:"white",bg:o},borderRadius:"md",children:["Study Groups (",a.activeGroups,")"]}),e.jsxs(Kn,{_selected:{color:"white",bg:o},borderRadius:"md",children:["Discussions (",a.discussions,")"]})]}),e.jsxs(al,{mt:6,children:[e.jsx(ui,{p:0,children:e.jsxs(yr,{spacing:6,children:[e.jsx(Te,{leftIcon:e.jsx(Qn,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Share New Material"}),e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:6,children:a.recentMaterials.map((c,u)=>e.jsx(bc,{variant:"outline",whileHover:{y:-5},transition:{duration:.2},cursor:"pointer",onClick:()=>r(`/courses/${t}/resource/${c.id}`),children:e.jsxs(un,{children:[e.jsxs(Ce,{align:"center",mb:3,children:[e.jsx(ct,{as:c.type==="notes"?qn:Xu,boxSize:6,color:o,mr:3}),e.jsx(G,{fontWeight:"700",fontSize:"lg",children:c.title})]}),e.jsxs(Ce,{justify:"space-between",align:"center",children:[e.jsxs(Ce,{align:"center",children:[e.jsx(zr,{size:"sm",name:c.author,mr:2}),e.jsx(G,{fontSize:"sm",color:i,children:c.author})]}),e.jsxs(Pr,{colorScheme:"green",px:3,py:1,borderRadius:"full",display:"flex",alignItems:"center",children:[e.jsx(ct,{as:_u,mr:1})," ",c.votes]})]})]})},u))})]})}),e.jsx(ui,{p:0,children:e.jsxs(yr,{spacing:6,children:[e.jsx(Te,{leftIcon:e.jsx(Qn,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Create New Group"}),e.jsx(wu,{spacing:4,children:a.studyGroups.map((c,u)=>e.jsx(Bb,{p:4,borderWidth:"1px",borderRadius:"lg",_hover:{borderColor:o},whileHover:{x:5},transition:{duration:.2},children:e.jsxs(Ce,{justify:"space-between",align:"center",children:[e.jsxs(ce,{flex:1,children:[e.jsx(G,{fontWeight:"700",mb:1,children:c.name}),e.jsxs(at,{spacing:2,children:[e.jsx(ct,{as:hs,color:i,boxSize:4}),e.jsxs(G,{fontSize:"sm",color:i,children:["Active ",c.active]})]})]}),e.jsxs(at,{spacing:2,children:[e.jsx(Wm,{size:"sm",max:4,children:[...Array(c.members)].map((h,p)=>e.jsx(zr,{name:`Member ${p+1}`,src:`https://i.pravatar.cc/150?img=${p}`},p))}),e.jsx(G,{color:i,children:c.members})]})]})},u))})]})}),e.jsx(ui,{p:0,children:e.jsxs(yr,{spacing:6,children:[e.jsx(Te,{leftIcon:e.jsx(Qn,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Start New Discussion"}),[1,2,3].map(c=>e.jsx(bc,{variant:"outline",whileHover:{x:5},transition:{duration:.2},children:e.jsxs(un,{children:[e.jsxs(Ce,{align:"center",mb:2,children:[e.jsx(zr,{size:"sm",name:"Omar K",mr:3}),e.jsxs(ce,{flex:1,children:[e.jsx(G,{fontWeight:"700",children:"Understanding Pipeline Hazards"}),e.jsxs(at,{mt:1,spacing:2,children:[e.jsx(Xn,{colorScheme:"blue",size:"sm",children:"Help Needed"}),e.jsx(Xn,{colorScheme:"purple",size:"sm",children:"CS 301"})]})]})]}),e.jsx(G,{color:i,noOfLines:2,mb:4,children:"Can someone explain the different types of pipeline hazards? I'm having trouble with this concept..."}),e.jsxs(Ce,{justify:"space-between",align:"center",children:[e.jsxs(at,{spacing:4,children:[e.jsx(Te,{variant:"ghost",size:"sm",leftIcon:e.jsx(_u,{}),children:"24 Helpful"}),e.jsx(Te,{variant:"ghost",size:"sm",leftIcon:e.jsx(Gu,{}),children:"5 Answers"})]}),e.jsx(G,{fontSize:"sm",color:i,children:"3h ago"})]})]})},c))]})})]})]})}),e.jsx(ha,{px:{base:4,md:8},py:6,borderTopWidth:"1px",children:e.jsxs(yr,{w:"full",spacing:4,children:[e.jsx(G,{fontWeight:"700",fontSize:"xl",children:"Community Actions"}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:4,children:[e.jsx(lc,{icon:fa,title:"Share Community",description:"Invite classmates to join"}),e.jsx(lc,{icon:Cu,title:"Discussions",description:"Browse all conversations"}),e.jsx(lc,{icon:Un,title:"Members",description:"Connect with peers"}),e.jsx(lc,{icon:qc,title:"Resources",description:"View all materials"})]})]})})]})]})})},lc=({icon:t,title:r,description:n})=>(oe("white","gray.700"),oe("gray.50","gray.600"),e.jsx(bc,{p:4,variant:"outline",whileHover:{scale:1.02},transition:{duration:.2},cursor:"pointer",children:e.jsxs(yr,{spacing:3,children:[e.jsx(ct,{as:t,boxSize:6,color:"blue.500"}),e.jsx(G,{fontWeight:"700",children:r}),e.jsx(G,{fontSize:"sm",color:"gray.500",children:n})]})})),cc=async(t={})=>(await yt.get("/study-groups",{params:t})).data,Wb=async t=>(await yt.post("/study-groups",t)).data,Ub=async t=>(await yt.post(`/study-groups/${t}/join`)).data,Hb=async t=>(await yt.post(`/study-groups/${t}/leave`)).data,uu=async(t={})=>(await yt.get("/study-groups/my-groups",{params:t})).data,$b=async(t,r)=>(await yt.put(`/study-groups/${t}`,r)).data,Gb=async t=>(await yt.delete(`/study-groups/${t}`)).data,Vb=hr(Zt),Yb=({group:t,onJoinLeave:r,onEdit:n,onDelete:i,currentUser:o})=>{const s=oe("white","gray.700"),a=oe("gray.800","white"),c=oe("gray.500","gray.400"),u=oe("gray.100","gray.600"),h=oe("gray.200","gray.700"),p=qr(),x=o&&t.creator&&o.id===t.creator.id,b=()=>{const m=`${window.location.origin}/study-groups/${t.id}`;navigator.share?navigator.share({title:`Join "${t.name}" Study Group`,text:`Join our study group for ${t.course}`,url:m}).catch(()=>{navigator.clipboard.writeText(m),p({title:"Link copied to clipboard",status:"success",duration:2e3})}):(navigator.clipboard.writeText(m),p({title:"Group link copied to clipboard",status:"success",duration:2e3}))};return e.jsxs(Vb,{bg:s,boxShadow:"md",borderRadius:"lg",overflow:"hidden",whileHover:{y:-5},transition:{duration:.2},children:[e.jsx(fo,{children:e.jsxs(Ce,{justify:"space-between",align:"center",children:[e.jsx(ut,{size:"md",color:a,children:t.name||"Untitled Group"}),e.jsx(Xn,{colorScheme:"blue",children:t.course||"Unknown Course"})]})}),e.jsxs(un,{children:[e.jsx(G,{color:a,mb:3,noOfLines:2,children:t.description}),e.jsx(at,{spacing:2,mb:4,flexWrap:"wrap",children:(t.tags||[]).map((m,_)=>e.jsx(Xn,{size:"sm",colorScheme:"gray",borderRadius:"full",children:m},_))}),e.jsx(sn,{my:4,borderColor:h}),e.jsxs(yr,{spacing:3,children:[e.jsxs(Ce,{align:"center",color:c,children:[e.jsx(Un,{style:{marginRight:"8px"}}),e.jsxs(G,{children:[t.members||0," / ",t.capacity||15," Members"]})]}),e.jsxs(Ce,{align:"center",color:c,children:[e.jsx(hs,{style:{marginRight:"8px"}}),e.jsxs(G,{children:["Session: ",t.formattedTime||"TBD"]})]}),e.jsxs(Ce,{align:"center",color:c,children:[e.jsx(Ko,{style:{marginRight:"8px"}}),e.jsx(G,{noOfLines:1,children:t.location||"TBD"})]})]})]}),e.jsx(ha,{pt:0,borderTop:"1px solid",borderColor:h,children:e.jsxs(Ce,{justify:"space-between",align:"center",w:"full",children:[e.jsxs(wn,{children:[e.jsx(jn,{as:Bt,"aria-label":"Options",icon:e.jsx(gp,{}),variant:"ghost",size:"sm",borderRadius:"full",_hover:{bg:u}}),e.jsxs(Sn,{children:[x&&e.jsxs(e.Fragment,{children:[e.jsx(er,{icon:e.jsx(ao,{}),onClick:()=>n&&n(t),children:"Edit Group"}),e.jsx(er,{icon:e.jsx(ul,{}),onClick:()=>i&&i(t),color:"red.500",_hover:{bg:"red.50"},children:"Delete Group"})]}),e.jsx(er,{icon:e.jsx(fa,{}),onClick:b,children:"Share Group Link"})]})]}),e.jsx(Te,{colorScheme:t.isJoined?"red":"blue",variant:t.isJoined?"outline":"solid",size:"sm",borderRadius:"full",onClick:()=>r(t.id),leftIcon:t.isJoined?void 0:e.jsx(Qn,{}),children:t.isJoined?"Leave Group":"Join Group"})]})})]})},Jb=({type:t="filter",title:r,message:n})=>{const i=oe("gray.500","gray.400"),o={filter:"No study groups found",myGroups:"You haven't joined any study groups yet"},s={filter:"Try changing your search terms or filters",myGroups:"Join a study group to collaborate with others and improve your learning"},a=r||o[t],c=n||s[t];return e.jsx(Ce,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(ce,{textAlign:"center",maxW:"400px",children:[t==="filter"?e.jsx(qc,{size:50,style:{margin:"0 auto 20px",opacity:.3}}):e.jsx(Un,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),e.jsx(ut,{size:"md",mb:2,children:a}),e.jsx(G,{color:i,mb:6,children:c})]})})},Xb=({groups:t,onJoinLeave:r,onEdit:n,onDelete:i,currentUser:o,emptyStateType:s})=>t.length===0?e.jsx(Jb,{type:s}):e.jsx(di,{columns:{base:1,md:2},spacing:6,children:t.map(a=>e.jsx(Yb,{group:a,onJoinLeave:r,onEdit:n,onDelete:i,currentUser:o},a.id))}),Kb=({isOpen:t,onClose:r,newGroup:n,onInputChange:i,onCreateGroup:o,courses:s=[],coursesLoading:a=!1,currentCoursePage:c=1,totalCoursePages:u=1,onCoursePageChange:h=()=>{}})=>{const p=oe("gray.200","gray.700"),x=oe("gray.500","gray.400");return e.jsxs(hn,{isOpen:t,onClose:r,size:"lg",isCentered:!0,children:[e.jsx(Fr,{}),e.jsxs(fn,{borderRadius:"xl",children:[e.jsx(Wr,{borderBottomWidth:"1px",borderColor:p,pb:4,children:e.jsx(ut,{size:"md",children:"Create a New Study Group"})}),e.jsx(on,{}),e.jsx(Ir,{py:6,children:e.jsxs(yr,{spacing:5,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{fontWeight:"medium",children:"Group Name"}),e.jsx(Rt,{name:"name",value:n.name,onChange:i,placeholder:"e.g., Calculus II Problem Solvers",borderRadius:"md"})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{fontWeight:"medium",children:"Course"}),e.jsxs(wn,{children:[e.jsx(jn,{as:Te,rightIcon:e.jsx(ds,{}),w:"100%",textAlign:"left",fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:n.course_id&&s.length>0&&s.find(b=>b.id===Number(n.course_id))?`${s.find(b=>b.id===Number(n.course_id)).code} - ${s.find(b=>b.id===Number(n.course_id)).title}`:"Select course"}),e.jsxs(Sn,{maxH:"320px",overflowY:"auto",minW:"400px",children:[a?e.jsx(Ce,{justify:"center",align:"center",h:"100px",children:e.jsx(nn,{})}):s.map(b=>{var m;return e.jsx(er,{onClick:()=>i({target:{name:"course_id",value:b.id}}),children:e.jsxs(ce,{children:[e.jsxs(G,{fontWeight:"medium",children:[b.code," - ",b.title]}),e.jsx(G,{fontSize:"sm",color:x,children:(m=b.major)==null?void 0:m.name})]})},b.id)}),u>1&&e.jsx(ce,{borderTop:"1px solid",borderColor:p,mt:2,pt:2,px:2,children:e.jsxs(Ce,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"xs",onClick:b=>{b.stopPropagation(),h(c-1)},isDisabled:c<=1||a,variant:"outline",borderRadius:"md",children:"Prev"}),e.jsxs(G,{fontSize:"xs",color:x,mx:2,children:["Page ",c," of ",u]}),e.jsx(Te,{size:"xs",onClick:b=>{b.stopPropagation(),h(c+1)},isDisabled:c>=u||a,variant:"outline",borderRadius:"md",children:"Next"})]})})]})]})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{fontWeight:"medium",children:"Description"}),e.jsx(ti,{name:"description",value:n.description,onChange:i,placeholder:"Describe the purpose, goals, and activities of your study group...",borderRadius:"md",minHeight:"120px"})]}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{fontWeight:"medium",children:"Meeting Time"}),e.jsx(Rt,{type:"datetime-local",name:"meeting_time",value:n.meeting_time,onChange:i,borderRadius:"md"})]}),e.jsxs(ft,{children:[e.jsx(pt,{fontWeight:"medium",children:"Location"}),e.jsx(Rt,{name:"location",value:n.location,onChange:i,placeholder:"e.g., Library Room 201",borderRadius:"md",isDisabled:n.isOnline})]})]}),e.jsx(ft,{children:e.jsx(Um,{name:"isOnline",isChecked:n.isOnline,onChange:i,children:"This is an online meeting"})})]})}),e.jsxs(Jr,{borderTopWidth:"1px",borderColor:p,pt:4,children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:r,borderRadius:"md",children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",leftIcon:e.jsx(zi,{}),onClick:o,isDisabled:!n.name||!n.course_id||!n.description||!n.meeting_time||!n.isOnline&&!n.location,borderRadius:"md",children:"Create Group"})]})]})]})};hr(Zt);const Ka=(t,r)=>{if(!t)return"Unknown Course";if(typeof t=="string")return t;if(t.code)return`${t.code}`;const n=r.find(i=>i.id===t);return n?`${n.code} - ${n.title}`:"Unknown Course"},$o=t=>t?new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"TBD",Qb=()=>{const t=Xr(),r=qr(),{isOpen:n,onOpen:i,onClose:o}=Br(),{user:s}=hi(),{isOpen:a,onOpen:c,onClose:u}=Br(),[h,p]=q.useState(null),x=q.useRef(),{isOpen:b,onOpen:m,onClose:_}=Br(),[w,O]=q.useState(null),[k,T]=q.useState({}),H=oe("white","gray.700"),Z=oe("gray.800","white"),N=oe("gray.500","gray.400"),D=oe("blue.500","blue.300");oe("gray.100","gray.600");const B=oe("gray.200","gray.700"),[V,R]=q.useState(""),[P,j]=q.useState(0),[A,E]=q.useState(!1),[z,se]=q.useState([]),[re,v]=q.useState([]),[ne,M]=q.useState([]),[y,Y]=q.useState(!1),[C,W]=q.useState(1),[L,$]=q.useState(1),[Q,ie]=q.useState(!0),[de,le]=q.useState(!1),[be,fe]=q.useState(!1),[Fe,Oe]=q.useState(1),[Ue,ye]=q.useState(1),[ee,_e]=q.useState(0),[Me,Le]=q.useState({is_online:null,is_complete:null,course_id:""}),[ue,Ye]=q.useState({name:"",course_id:"",description:"",meeting_time:"",location:"",isOnline:!1}),Ze=async Ae=>{if(!(Ae<1||Ae>L)){Y(!0);try{const We=localStorage.getItem("major_id"),nt=localStorage.getItem("faculty_id"),tt={...We?{major_id:We}:nt?{faculty_id:nt}:{},page:Ae,per_page:10},gt=await sl(tt);M(gt.data||[]),W(gt.current_page||Ae),$(gt.last_page||1)}catch(We){je("Failed to fetch courses",We)}finally{Y(!1)}}},mt=Ae=>{Ye(We=>({...We,isOnline:Ae.target.checked,location:Ae.target.checked?"":We.location}))},$e=Ae=>{const{name:We,value:nt,type:tt,checked:gt}=Ae.target;Ye(Ct=>({...Ct,[We]:tt==="checkbox"?gt:nt}))};q.useEffect(()=>{(async()=>{ie(!0),le(!0),Y(!0);try{const We=localStorage.getItem("major_id"),nt=localStorage.getItem("faculty_id");let tt={};We?tt.major_id=We:nt&&(tt.faculty_id=nt);const[gt,Ct,Ut]=await Promise.all([cc(tt),uu(),sl({...We?{major_id:We}:nt?{faculty_id:nt}:{},page:1,per_page:10})]);M(Ut.data||[]),W(Ut.current_page||1),$(Ut.last_page||1);const Ve=dt=>({...dt,meetings:dt.meeting_time?[dt.meeting_time]:[],members:dt.members_count||1,tags:dt.major?[dt.major.name]:[],leader:dt.creator||{},course:Ka(dt.course,Ut.data||[]),formattedTime:$o(dt.meeting_time),isPast:dt.meeting_time?new Date(dt.meeting_time)<new Date:!1}),Je=Array.isArray(Ct)?Ct:Ct.data||[],It=new Set(Je.map(dt=>dt.id));se(gt.data.map(dt=>({...Ve(dt),isJoined:It.has(dt.id)}))),gt.current_page!==void 0&&(Oe(gt.current_page),ye(gt.last_page||1),_e(gt.total||0)),v(Je.map(dt=>({...Ve(dt),isJoined:!0})))}catch(We){je("Failed to load data",We)}finally{ie(!1),le(!1),Y(!1)}})()},[]);const je=(Ae,We)=>{var nt,tt;r({title:Ae,description:((tt=(nt=We==null?void 0:We.response)==null?void 0:nt.data)==null?void 0:tt.message)||We.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})},ve=q.useCallback(async(Ae=V,We=Me,nt=1)=>{fe(!0);try{const tt=localStorage.getItem("major_id"),gt=localStorage.getItem("faculty_id"),Ct={...Ae.trim()&&{q:Ae.trim()},...We,...tt&&{major_id:tt},...gt&&{faculty_id:gt},page:nt,per_page:4};Object.keys(Ct).forEach(jt=>{(Ct[jt]===""||Ct[jt]===null)&&delete Ct[jt]});const Ut=await cc(Ct),Ve=jt=>({...jt,meetings:jt.meeting_time?[jt.meeting_time]:[],members:jt.members_count||1,tags:jt.major?[jt.major.name]:[],leader:jt.creator||{},course:Ka(jt.course,ne),formattedTime:$o(jt.meeting_time),isPast:jt.meeting_time?new Date(jt.meeting_time)<new Date:!1}),Je=Array.isArray(re)?re:[],It=new Set(Je.map(jt=>jt.id)),dt=(Ut.data||Ut).map(jt=>({...Ve(jt),isJoined:It.has(jt.id)}));se(dt),Ut.current_page!==void 0&&(Oe(Ut.current_page),ye(Ut.last_page||1),_e(Ut.total||0))}catch(tt){je("Search failed",tt)}finally{fe(!1)}},[V,Me,ne,re]),Pe=q.useCallback((Ae,We)=>{const nt={...Me,[Ae]:We};Le(nt),Oe(1),ve(V,nt,1)},[Me,V,ve]),De=q.useCallback(()=>{const Ae={is_online:null,is_complete:null,course_id:""};Le(Ae),Oe(1),ve(V,Ae,1)},[V,ve]),Se=q.useCallback(Ae=>{Oe(Ae),ve(V,Me,Ae)},[V,Me,ve]);q.useEffect(()=>{const Ae=setTimeout(()=>{ve()},500);return()=>clearTimeout(Ae)},[V,ve]);const Ie=q.useMemo(()=>z,[z]),ze=q.useMemo(()=>{if(!V)return re;const Ae=V.toLowerCase();return re.filter(We=>We.name.toLowerCase().includes(Ae)||We.course.toLowerCase().includes(Ae)||We.description.toLowerCase().includes(Ae))},[re,V]),it=q.useCallback(async Ae=>{try{const We=z.find(jt=>jt.id===Ae);if(We.isPast){r({title:"Cannot join past session",status:"error",duration:3e3});return}await Ub(Ae),le(!0);const nt=localStorage.getItem("major_id"),tt=localStorage.getItem("faculty_id");let gt={};nt?gt.major_id=nt:tt&&(gt.faculty_id=tt);const[Ct,Ut]=await Promise.all([cc(gt),uu()]),Ve={};Ct.data.forEach(jt=>{Ve[jt.id]={...jt,members_count:jt.members_count}});const Je=jt=>{const lr=Ve[jt.id];return{...jt,meetings:jt.meeting_time?[jt.meeting_time]:[],members:lr?lr.members_count||1:jt.members_count||1,tags:jt.major?[jt.major.name]:[],leader:jt.creator||{},course:Ka(jt.course,ne),formattedTime:$o(jt.meeting_time),isPast:jt.meeting_time?new Date(jt.meeting_time)<new Date:!1}},It=Array.isArray(Ut)?Ut:Ut.data||[],dt=new Set(It.map(jt=>jt.id));se(Ct.data.map(jt=>({...Je(jt),isJoined:dt.has(jt.id)}))),v(It.map(jt=>{const lr=Ve[jt.id];return{...Je(jt),members:lr?lr.members_count||1:jt.members_count||1,isJoined:!0}})),le(!1),r({title:`Joined ${We.name}`,status:"success"})}catch(We){je("Failed to join group",We),le(!1)}},[z,ne]),Ge=q.useCallback(async Ae=>{try{const We=await Hb(Ae);ie(!0),le(!0);const nt=localStorage.getItem("major_id"),tt=localStorage.getItem("faculty_id");let gt={};nt?gt.major_id=nt:tt&&(gt.faculty_id=tt);const[Ct,Ut]=await Promise.all([cc(gt),uu()]),Ve=dt=>({...dt,meetings:dt.meeting_time?[dt.meeting_time]:[],members:dt.members_count||1,tags:dt.major?[dt.major.name]:[],leader:dt.creator||{},course:Ka(dt.course,ne),formattedTime:$o(dt.meeting_time),isPast:dt.meeting_time?new Date(dt.meeting_time)<new Date:!1}),Je=Array.isArray(Ut)?Ut:Ut.data||[],It=new Set(Je.map(dt=>dt.id));se(Ct.data.map(dt=>({...Ve(dt),isJoined:It.has(dt.id)}))),v(Je.map(dt=>({...Ve(dt),isJoined:!0}))),ie(!1),le(!1),We&&We.message&&We.message.includes("The group has been deleted")?r({title:"Group deleted",description:We.message,status:"info",duration:4e3}):r({title:"Left group",description:(We==null?void 0:We.message)||void 0,status:"info",duration:3e3})}catch(We){je("Failed to leave group",We),ie(!1),le(!1)}},[ne]),ot=q.useCallback(async()=>{try{const Ae=localStorage.getItem("major_id"),We=localStorage.getItem("faculty_id");if(!Ae||!We){r({title:"Missing Profile Information",description:"Please complete your profile (major and faculty) before creating a group.",status:"error",duration:4e3});return}const nt={...ue,course_id:parseInt(ue.course_id),meeting_time:ue.meeting_time,capacity:15,is_online:ue.isOnline,location:ue.isOnline?"Online":ue.location,major_id:parseInt(Ae),faculty_id:parseInt(We)},tt=await Wb(nt);r({title:"Group created!",status:"success"}),o(),Ye({name:"",course_id:"",description:"",meeting_time:"",location:"",isOnline:!1});const gt={...tt,meetings:tt.meeting_time?[tt.meeting_time]:[],tags:tt.major?[tt.major.name]:[],formattedTime:$o(tt.meeting_time),isPast:tt.meeting_time?new Date(tt.meeting_time)<new Date:!1,isJoined:!0,members:1,course:Ka(tt.course,ne),capacity:tt.capacity||15};se(Ct=>[gt,...Ct]),v(Ct=>[gt,...Ct])}catch(Ae){je("Failed to create group",Ae)}},[ue,ne]),Nt=q.useCallback(Ae=>{O(Ae),T({name:Ae.name,description:Ae.description,meeting_time:Ae.meeting_time?new Date(Ae.meeting_time).toISOString().slice(0,16):"",location:Ae.location||"",isOnline:Ae.isOnline||!1}),m()},[m]),At=q.useCallback(Ae=>{p(Ae),c()},[c]),ht=q.useCallback(async()=>{if(h)try{await Gb(h.id),se(Ae=>Ae.filter(We=>We.id!==h.id)),v(Ae=>Ae.filter(We=>We.id!==h.id)),r({title:"Group deleted",description:"The study group has been successfully deleted.",status:"success",duration:3e3})}catch(Ae){je("Failed to delete group",Ae)}finally{u(),p(null)}},[h,u,r]),bt=q.useCallback(async()=>{if(!w||!k.name||!k.description){r({title:"Please fill in all required fields",status:"error",duration:3e3});return}try{const Ae={name:k.name,description:k.description,meeting_time:k.meeting_time||null,location:k.isOnline?"Online":k.location,is_online:k.isOnline};await $b(w.id,Ae);const We={...w,...Ae,formattedTime:$o(k.meeting_time)};se(nt=>nt.map(tt=>tt.id===w.id?We:tt)),v(nt=>nt.map(tt=>tt.id===w.id?We:tt)),r({title:"Group updated",description:"The study group has been successfully updated.",status:"success",duration:3e3}),_(),O(null),T({})}catch(Ae){je("Failed to update group",Ae)}},[w,k,_,r]),Ne=(Ae,We=!1)=>e.jsx(Xb,{groups:Ae,onJoinLeave:nt=>{const tt=Ae.find(gt=>gt.id===nt);tt&&tt.isJoined?Ge(nt):it(nt)},onEdit:Nt,onDelete:At,currentUser:s,emptyStateType:We?"myGroups":"allGroups"}),lt=(Ae,We,nt)=>e.jsx(Ce,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(ce,{textAlign:"center",maxW:"400px",children:[Ae,e.jsx(ut,{size:"md",mb:2,children:We}),e.jsx(G,{color:N,mb:6,children:nt}),P===0&&e.jsx(Te,{colorScheme:"blue",onClick:i,children:"Create Your First Group"})]})}),zt=()=>e.jsx(di,{columns:{base:1,md:2},spacing:6,children:[...Array(4)].map((Ae,We)=>e.jsxs(ce,{p:6,bg:H,borderRadius:"lg",boxShadow:"md",children:[e.jsx(kr,{height:"32px",mb:4}),e.jsx(Zo,{noOfLines:3,spacing:"4"}),e.jsxs(at,{mt:4,spacing:2,children:[e.jsx(kr,{height:"24px",width:"60px"}),e.jsx(kr,{height:"24px",width:"60px"})]}),e.jsx(sn,{my:4}),e.jsxs(yr,{spacing:3,children:[e.jsx(kr,{height:"20px"}),e.jsx(kr,{height:"20px"}),e.jsx(kr,{height:"20px"})]}),e.jsx(sn,{my:4}),e.jsxs(Ce,{justify:"space-between",mt:4,children:[e.jsx(kr,{height:"32px",width:"100px"}),e.jsx(kr,{height:"32px",width:"100px"})]})]},We))});return e.jsxs(Ce,{minH:"100vh",p:{base:4,md:8},bg:oe("gray.50","gray.800"),children:[e.jsxs(ce,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsxs(Ce,{justify:"space-between",align:"center",mb:6,flexWrap:"wrap",gap:4,children:[e.jsxs(at,{spacing:4,children:[e.jsx(Bt,{icon:e.jsx(Wn,{}),"aria-label":"Go back",onClick:()=>t(-1),variant:"ghost",borderRadius:"full"}),e.jsx(ut,{size:"xl",color:Z,fontWeight:"700",children:"Study Groups"})]}),e.jsx(Te,{leftIcon:e.jsx(Qn,{}),colorScheme:"blue",onClick:i,borderRadius:"full",children:"Create Group"})]}),e.jsxs(da,{colorScheme:"blue",mb:6,variant:"soft-rounded",index:P,onChange:j,children:[e.jsxs(Ce,{justify:"space-between",align:"center",gap:4,mb:4,flexWrap:"wrap",children:[e.jsxs(ua,{children:[e.jsx(Kn,{children:"All Groups"}),e.jsx(Kn,{children:"My Groups"})]}),e.jsxs(at,{spacing:2,children:[e.jsxs(Te,{leftIcon:e.jsx(Wc,{}),variant:"outline",size:"sm",onClick:()=>E(!A),colorScheme:Object.values(Me).some(Ae=>Ae!==null&&Ae!=="")?"blue":"gray",children:["Filters",Object.values(Me).some(Ae=>Ae!==null&&Ae!=="")&&e.jsx(Pr,{ml:2,colorScheme:"blue",variant:"solid",children:Object.values(Me).filter(Ae=>Ae!==null&&Ae!=="").length})]}),e.jsxs(Tr,{maxW:{base:"250px",md:"300px"},children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(lo,{color:N})}),e.jsx(Rt,{placeholder:"Search study sessions...",size:"md",borderRadius:"lg",value:V,onChange:Ae=>R(Ae.target.value),_focus:{borderColor:D,boxShadow:`0 0 0 1px ${D}`},bg:oe("white","gray.700")}),(V||be)&&e.jsx(_c,{children:be?e.jsx(nn,{size:"sm"}):e.jsx(Bt,{icon:e.jsx(co,{}),size:"sm",variant:"ghost","aria-label":"Clear search",onClick:()=>R("")})})]})]})]}),e.jsx(Hm,{in:A,animateOpacity:!0,children:e.jsx(ce,{p:4,bg:oe("gray.50","gray.700"),borderRadius:"lg",mb:4,border:"1px solid",borderColor:B,children:e.jsxs(et,{spacing:4,align:"stretch",children:[e.jsxs(at,{justify:"space-between",align:"center",children:[e.jsx(G,{fontWeight:"medium",fontSize:"sm",color:Z,children:"Filter Groups"}),e.jsx(Te,{size:"xs",variant:"ghost",onClick:De,disabled:!Object.values(Me).some(Ae=>Ae!==null&&Ae!==""),children:"Clear All"})]}),"                ",e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:4,children:[e.jsxs(ft,{children:[e.jsx(pt,{fontSize:"sm",mb:1,children:"Course"}),e.jsxs(wn,{children:[e.jsx(jn,{as:Te,size:"sm",w:"100%",rightIcon:e.jsx(ds,{}),textAlign:"left",fontWeight:"normal",bg:oe("white","gray.600"),overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:Me.course_id&&ne.find(Ae=>Ae.id===Number(Me.course_id))?`${ne.find(Ae=>Ae.id===Number(Me.course_id)).code} - ${ne.find(Ae=>Ae.id===Number(Me.course_id)).title}`:"Any course"}),e.jsx($m,{children:e.jsxs(Sn,{maxH:"320px",overflowY:"auto",minW:"400px",children:[e.jsx(er,{onClick:()=>Pe("course_id",""),children:"Any course"}),y?e.jsx(Ce,{justify:"center",align:"center",h:"100px",children:e.jsx(nn,{})}):ne.map(Ae=>{var We;return e.jsx(er,{onClick:()=>Pe("course_id",Ae.id),children:e.jsxs(ce,{children:[e.jsxs(G,{fontWeight:"medium",children:[Ae.code," - ",Ae.title]}),e.jsx(G,{fontSize:"sm",color:N,children:(We=Ae.major)==null?void 0:We.name})]})},Ae.id)}),L>1&&e.jsx(ce,{borderTop:"1px solid",borderColor:B,mt:2,pt:2,px:2,children:e.jsxs(Ce,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"xs",onClick:Ae=>{Ae.stopPropagation(),Ze(C-1)},isDisabled:C<=1||y,variant:"outline",borderRadius:"md",children:"Prev"}),e.jsxs(G,{fontSize:"xs",color:N,mx:2,children:["Page ",C," of ",L]}),e.jsx(Te,{size:"xs",onClick:Ae=>{Ae.stopPropagation(),Ze(C+1)},isDisabled:C>=L||y,variant:"outline",borderRadius:"md",children:"Next"})]})})]})})]})]}),e.jsxs(ft,{children:[e.jsx(pt,{fontSize:"sm",mb:1,children:"Meeting Type"}),e.jsxs(Ti,{size:"sm",value:Me.is_online===null?"":Me.is_online.toString(),onChange:Ae=>Pe("is_online",Ae.target.value===""?null:Ae.target.value==="true"),placeholder:"Any type",bg:oe("white","gray.600"),children:[e.jsx("option",{value:"true",children:"Online"}),e.jsx("option",{value:"false",children:"In-person"})]})]}),e.jsxs(ft,{children:[e.jsx(pt,{fontSize:"sm",mb:1,children:"Status"}),e.jsxs(Ti,{size:"sm",value:Me.is_complete===null?"":Me.is_complete.toString(),onChange:Ae=>Pe("is_complete",Ae.target.value===""?null:Ae.target.value==="true"),placeholder:"Any status",bg:oe("white","gray.600"),children:[e.jsx("option",{value:"false",children:"Active"}),e.jsx("option",{value:"true",children:"Completed"})]})]})]}),Object.entries(Me).some(([Ae,We])=>We!==null&&We!=="")&&e.jsxs(ce,{children:[e.jsx(G,{fontSize:"xs",color:N,mb:2,children:"Active Filters:"}),e.jsx(at,{spacing:2,flexWrap:"wrap",children:Object.entries(Me).map(([Ae,We])=>{if(We===null||We==="")return null;let nt="",tt=We;switch(Ae){case"course_id":const gt=ne.find(Ct=>Ct.id.toString()===We.toString());nt="Course",tt=gt?gt.code:We;break;case"is_online":nt="Type",tt=We?"Online":"In-person";break;case"is_complete":nt="Status",tt=We?"Completed":"Active";break}return e.jsxs(Xn,{size:"sm",colorScheme:"blue",variant:"solid",cursor:"pointer",onClick:()=>Pe(Ae,Ae==="is_online"||Ae==="is_complete"?null:""),children:[nt,": ",tt,e.jsx(co,{style:{marginLeft:"4px"}})]},Ae)})})]})]})})}),e.jsxs(al,{children:[e.jsx(ui,{px:0,children:Q?zt():Ie.length>0?e.jsxs(e.Fragment,{children:[Ne(Ie),Ue>1&&e.jsxs(ce,{mt:8,children:[e.jsx(Ce,{justify:"center",mb:4,display:{base:"flex",md:"none"},children:e.jsxs(G,{fontSize:"sm",color:N,textAlign:"center",px:4,children:["Page ",Fe," of ",Ue]})}),e.jsxs(Ce,{justify:"space-between",align:"center",p:6,bg:oe("white","gray.700"),borderRadius:"xl",borderWidth:"1px",borderColor:B,shadow:"sm",_hover:{shadow:"md",borderColor:oe("gray.300","gray.600")},transition:"all 0.2s",flexDirection:{base:"column",md:"row"},gap:{base:4,md:0},children:[e.jsxs(G,{fontSize:"sm",color:N,fontWeight:"medium",display:{base:"none",md:"block"},children:["Showing page ",Fe," of ",Ue," • ",ee," total groups"]}),e.jsxs(at,{spacing:2,children:[e.jsx(Te,{leftIcon:e.jsx(us,{}),onClick:()=>Se(Fe-1),isDisabled:Fe===1||be,variant:"outline",size:"md",borderRadius:"lg",_hover:{bg:oe("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",isLoading:be,loadingText:"Previous",children:"Previous"}),e.jsx(at,{spacing:1,mx:2,children:(()=>{const Ae=[],We=window.innerWidth<768?3:5;let nt=Math.max(1,Fe-Math.floor(We/2)),tt=Math.min(Ue,nt+We-1);tt-nt+1<We&&(nt=Math.max(1,tt-We+1)),nt>1&&(Ae.push(e.jsx(Te,{onClick:()=>Se(1),isDisabled:be,variant:"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",_hover:{bg:oe("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"1"},1)),nt>2&&Ae.push(e.jsx(G,{color:N,px:2,fontSize:"lg",children:"..."},"ellipsis1")));for(let gt=nt;gt<=tt;gt++){const Ct=gt===Fe;Ae.push(e.jsx(Te,{onClick:()=>Se(gt),isDisabled:be,colorScheme:Ct?"blue":void 0,variant:Ct?"solid":"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",fontWeight:Ct?"bold":"medium",_hover:Ct?{}:{bg:oe("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",shadow:Ct?"md":"sm",children:gt},gt))}return tt<Ue&&(tt<Ue-1&&Ae.push(e.jsx(G,{color:N,px:2,fontSize:"lg",children:"..."},"ellipsis2")),Ae.push(e.jsx(Te,{onClick:()=>Se(Ue),isDisabled:be,variant:"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",_hover:{bg:oe("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:Ue},Ue))),Ae})()}),e.jsx(Te,{rightIcon:e.jsx(mo,{}),onClick:()=>Se(Fe+1),isDisabled:Fe===Ue||be,variant:"outline",size:"md",borderRadius:"lg",_hover:{bg:oe("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",isLoading:be,loadingText:"Next",children:"Next"})]})]})]})]}):lt(e.jsx(qc,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),"No study groups found","Try changing your search terms or create a new group")}),e.jsx(ui,{px:0,children:de?zt():ze.length>0?Ne(ze,!0):lt(e.jsx(Un,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),"You haven't joined any groups yet","Join a study group to collaborate with others")})]})]})]}),e.jsx(Kb,{isOpen:n,onClose:o,newGroup:ue,onInputChange:$e,onCreateGroup:ot,onToggleOnline:mt,subjects:["All",...new Set(ne.map(Ae=>{var We;return(We=Ae.major)==null?void 0:We.name}).filter(Boolean))],courses:ne,coursesLoading:y,currentCoursePage:C,totalCoursePages:L,onCoursePageChange:Ze}),e.jsxs(hn,{isOpen:b,onClose:_,size:"lg",isCentered:!0,children:[e.jsx(Fr,{}),e.jsxs(fn,{borderRadius:"xl",children:[e.jsx(Wr,{borderBottomWidth:"1px",borderColor:B,pb:4,children:"Edit Study Group"}),e.jsx(on,{}),e.jsx(Ir,{py:6,children:e.jsxs(yr,{spacing:4,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Group Name"}),e.jsx(Rt,{value:k.name||"",onChange:Ae=>T(We=>({...We,name:Ae.target.value})),placeholder:"Enter group name"})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Description"}),e.jsx(ti,{value:k.description||"",onChange:Ae=>T(We=>({...We,description:Ae.target.value})),placeholder:"Describe your study group",rows:3})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Meeting Time"}),e.jsx(Rt,{type:"datetime-local",value:k.meeting_time||"",onChange:Ae=>T(We=>({...We,meeting_time:Ae.target.value}))})]}),e.jsxs(ft,{display:"flex",alignItems:"center",children:[e.jsx(pt,{mb:"0",children:"Online Meeting"}),e.jsx(Gm,{isChecked:k.isOnline||!1,onChange:Ae=>T(We=>({...We,isOnline:Ae.target.checked}))})]}),!k.isOnline&&e.jsxs(ft,{children:[e.jsx(pt,{children:"Location"}),e.jsx(Rt,{value:k.location||"",onChange:Ae=>T(We=>({...We,location:Ae.target.value})),placeholder:"Enter meeting location"})]})]})}),e.jsxs(Jr,{borderTopWidth:"1px",borderColor:B,pt:4,children:[e.jsx(Te,{variant:"ghost",mr:3,onClick:_,children:"Cancel"}),e.jsx(Te,{colorScheme:"blue",onClick:bt,isDisabled:!k.name||!k.description,children:"Update Group"})]})]})]}),e.jsx(ll,{isOpen:a,leastDestructiveRef:x,onClose:u,isCentered:!0,children:e.jsx(Fr,{children:e.jsxs(cl,{borderRadius:"xl",children:[e.jsx(Wr,{fontSize:"lg",fontWeight:"bold",children:"Delete Study Group"}),e.jsxs(Ir,{children:['Are you sure you want to delete "',h==null?void 0:h.name,'"? This action cannot be undone and will remove all group data.']}),e.jsxs(Jr,{children:[e.jsx(Te,{ref:x,onClick:u,children:"Cancel"}),e.jsx(Te,{colorScheme:"red",onClick:ht,ml:3,children:"Delete"})]})]})})})]})},Zb=()=>{const t=dl(),r=Xr(),n=qr(),{docId:i}=Bc(),[o,s]=q.useState(!0),[a,c]=q.useState(null);q.useEffect(()=>{var T;s(!0),(T=t.state)!=null&&T.document?setTimeout(()=>{c(t.state.document),s(!1)},800):(s(!1),n({title:"Document not found",description:"The requested document could not be loaded.",status:"error",duration:5e3,isClosable:!0}))},[t,i,n]);const u=()=>{if(a){const T=a.createElement("a");T.href=a.url,T.setAttribute("download",a.name),a.body.appendChild(T),T.click(),a.body.removeChild(T),n({title:"Download started",description:`${a.name} is downloading.`,status:"success",duration:3e3,isClosable:!0})}},h=()=>{n({title:"Document bookmarked",description:"You can access this document in your bookmarks.",status:"success",duration:3e3,isClosable:!0})},p=()=>{navigator.clipboard.writeText(window.location.href),n({title:"Link copied",description:"Document link copied to clipboard.",status:"info",duration:3e3,isClosable:!0})},x=()=>{window.print()},b=oe("white","gray.800"),m=oe("gray.200","gray.600"),_=oe("gray.600","gray.400"),w=oe("brand.gold","brand.goldDark"),O=oe("brand.navy","brand.navyDark"),k=oe("gray.50","gray.800");return e.jsx(e.Fragment,{children:e.jsxs(ce,{px:{base:4,md:6},py:6,maxW:"1400px",mx:"auto",bg:k,children:[e.jsx(Te,{leftIcon:e.jsx(Wn,{}),variant:"ghost",mb:6,onClick:()=>r(-1),size:"sm",color:O,_hover:{bg:"transparent",color:w},children:"Back"}),e.jsxs(pr,{templateColumns:{base:"1fr",lg:"3fr 1fr"},gap:6,children:[e.jsx(kc,{children:e.jsxs(Zt,{bg:b,shadow:"md",borderRadius:"lg",overflow:"hidden",children:[e.jsxs(Ce,{p:6,borderBottom:"1px",borderColor:m,direction:{base:"column",md:"row"},justify:"space-between",align:{base:"start",md:"center"},gap:4,children:[e.jsxs(ce,{children:[e.jsx(ut,{as:"h1",size:"lg",mb:2,color:O,children:o?e.jsx(kr,{height:"36px",width:"300px"}):(a==null?void 0:a.name)||"Document not found"}),e.jsx(Ce,{align:"center",gap:3,color:_,flexWrap:"wrap",children:o?e.jsx(kr,{height:"20px",width:"180px"}):e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{align:"center",gap:1,children:[e.jsx(ct,{as:qn,color:w}),e.jsx(G,{children:(a==null?void 0:a.type)||"Unknown type"})]}),(a==null?void 0:a.size)&&e.jsxs(Ce,{align:"center",gap:1,children:[e.jsx(ct,{as:pp,color:w}),e.jsx(G,{children:a.size})]}),e.jsxs(Ce,{align:"center",gap:1,children:[e.jsx(ct,{as:hs,color:w}),e.jsxs(G,{children:["Uploaded ",(a==null?void 0:a.uploadDate)||"recently"]})]})]})})]}),e.jsxs(Ce,{gap:2,children:[e.jsx(wi,{label:"Download",children:e.jsx(Bt,{"aria-label":"Download document",icon:e.jsx(Ei,{}),onClick:u,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:w}})}),e.jsx(wi,{label:"Bookmark",children:e.jsx(Bt,{"aria-label":"Bookmark document",icon:e.jsx(Xi,{}),onClick:h,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:w}})}),e.jsx(wi,{label:"Share",children:e.jsx(Bt,{"aria-label":"Share document",icon:e.jsx(fa,{}),onClick:p,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:w}})}),e.jsx(wi,{label:"Print",children:e.jsx(Bt,{"aria-label":"Print document",icon:e.jsx(t1,{}),onClick:x,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:w}})})]})]}),e.jsx(ce,{p:6,children:o?e.jsx(kr,{height:"600px",width:"100%"}):a?e.jsx(Es,{ratio:4/3,maxH:"800px",children:e.jsx(ce,{as:"iframe",src:a.url,borderRadius:"md",bg:k,border:"1px",borderColor:m,width:"100%",height:"100%","aria-label":"Document preview"})}):e.jsxs(Ce,{direction:"column",align:"center",justify:"center",py:20,bg:k,borderRadius:"md",children:[e.jsx(ct,{as:qn,boxSize:16,color:_,mb:4}),e.jsx(ut,{size:"md",mb:2,color:O,children:"Document Not Found"}),e.jsx(G,{color:_,children:"The document you're looking for could not be loaded."}),e.jsx(Te,{mt:6,leftIcon:e.jsx(Wn,{}),onClick:()=>r(-1),bg:O,color:"white",_hover:{bg:w},children:"Go Back"})]})})]})}),e.jsx(kc,{children:e.jsx(Zt,{bg:b,shadow:"md",borderRadius:"lg",children:e.jsxs(un,{children:[e.jsx(ut,{size:"md",mb:4,color:O,children:"Document Information"}),e.jsx(sn,{mb:4,borderColor:m}),o?e.jsx(Ce,{direction:"column",gap:3,children:[...Array(5)].map((T,H)=>e.jsx(kr,{height:"24px"},H))}):a?e.jsxs(wu,{spacing:3,children:[e.jsxs(Yo,{children:[e.jsx(nc,{as:na,color:w}),e.jsx(G,{as:"span",fontWeight:"bold",mr:2,color:O,children:"Owner:"}),e.jsx(G,{as:"span",children:a.owner||"Unknown"})]}),e.jsxs(Yo,{children:[e.jsx(nc,{as:An,color:w}),e.jsx(G,{as:"span",fontWeight:"bold",mr:2,color:O,children:"Created:"}),e.jsx(G,{as:"span",children:a.created||"Unknown"})]}),e.jsxs(Yo,{children:[e.jsx(nc,{as:qn,color:w}),e.jsx(G,{as:"span",fontWeight:"bold",mr:2,color:O,children:"File Type:"}),e.jsx(G,{as:"span",children:a.type||"Unknown"})]}),e.jsxs(Yo,{children:[e.jsx(nc,{as:Yu,color:w}),e.jsx(G,{as:"span",fontWeight:"bold",mr:2,color:O,children:"Rating:"}),e.jsx(Pr,{px:2,py:1,borderRadius:"full",bg:w,color:"white",children:a.rating||"Not rated"})]})]}):e.jsx(G,{color:_,children:"No document information available"}),e.jsx(sn,{my:4,borderColor:m}),e.jsx(ut,{size:"md",mb:4,color:O,children:"Related Documents"}),o?e.jsx(Ce,{direction:"column",gap:3,children:[...Array(3)].map((T,H)=>e.jsx(kr,{height:"60px"},H))}):a?e.jsx(wu,{spacing:3,children:(a.relatedDocuments||[{id:1,name:"Course Syllabus",type:"PDF"},{id:2,name:"Lecture Notes",type:"DOCX"},{id:3,name:"Assignment 1",type:"PDF"}]).map(T=>e.jsx(Yo,{p:2,_hover:{bg:k},borderRadius:"md",children:e.jsxs(Ce,{align:"center",children:[e.jsx(ct,{as:qn,mr:3,color:w}),e.jsxs(ce,{children:[e.jsx(G,{fontWeight:"medium",color:O,children:T.name}),e.jsx(G,{fontSize:"sm",color:_,children:T.type})]})]})},T.id))}):e.jsx(G,{color:_,children:"No related documents available"}),e.jsx(Te,{mt:6,width:"full",leftIcon:e.jsx(Ei,{}),bg:O,color:"white",_hover:{bg:w},onClick:u,isDisabled:o||!a,children:"Download Document"})]})})})]})]})})},ey=async(t=1)=>{try{return(await yt.get("/notifications",{params:{page:t}})).data}catch(r){throw r}},ty=async t=>{try{return(await yt.patch(`/notifications/${t}/read`,{})).data}catch(r){throw r}},ry=async t=>{try{return(await yt.delete(`/notifications/${t}`)).data}catch(r){throw r}},ny=async()=>{try{return(await yt.put("/notifications",{})).data}catch(t){throw t}},k0=q.createContext(),iy=({children:t})=>{const[r,n]=q.useState([]),[i,o]=q.useState(!0),[s,a]=q.useState(null),[c,u]=q.useState(0),[h,p]=q.useState(1),[x,b]=q.useState(1),[m,_]=q.useState(!1),w=q.useCallback(R=>{var P,j,A;return{id:R.id,user:R.sender_name||"System",avatar:R.sender_avatar,content:((P=R.data)==null?void 0:P.message)||"",isRead:!!R.read,time:O(R.created_at),url:R.url||((j=R.data)==null?void 0:j.url),created_at:R.created_at,type:R.type,reason:(A=R.data)==null?void 0:A.reason}},[]),O=q.useCallback(R=>{if(!R)return"";const P=new Date,j=new Date(R),A=(P-j)/1e3;return A<60?`${Math.floor(A)}s ago`:A<3600?`${Math.floor(A/60)}m ago`:A<86400?`${Math.floor(A/3600)}h ago`:A<604800?`${Math.floor(A/86400)}d ago`:j.toLocaleDateString()},[]),k=q.useCallback(async(R=1,P=!1)=>{try{P||o(!0),a(null);const j=await ey(R);let A=[];Array.isArray(j)?A=j:Array.isArray(j.data)?(A=j.data,p(j.current_page||R),b(j.last_page||1),_((j.current_page||R)<(j.last_page||1))):Array.isArray(j.notifications)&&(A=j.notifications);const E=A.map(w);P&&R>1?n(se=>[...se,...E]):n(E);const z=E.filter(se=>!se.isRead);P||u(z.length)}catch(j){a("Failed to load notifications"),console.error("Error fetching notifications:",j)}finally{o(!1)}},[w]),T=q.useCallback(()=>r.filter(R=>!R.isRead).sort((R,P)=>new Date(P.created_at)-new Date(R.created_at)).slice(0,3),[r]),H=q.useCallback(async R=>{n(j=>j.map(A=>A.id===R?{...A,isRead:!0}:A));const P=Math.max(0,c-1);u(P);try{await ty(R)}catch(j){console.error("Error marking notification as read:",j),n(A=>A.map(E=>E.id===R?{...E,isRead:!1}:E)),u(A=>A+1)}},[c]),Z=q.useCallback(async()=>{const R=r.filter(P=>!P.isRead);n(P=>P.map(j=>({...j,isRead:!0}))),u(0);try{await ny()}catch(P){console.error("Error marking all notifications as read:",P),n(j=>j.map(A=>R.find(z=>z.id===A.id)?{...A,isRead:!1}:A)),u(R.length)}},[r]),N=q.useCallback(async R=>{const P=r.find(j=>j.id===R);n(j=>j.filter(A=>A.id!==R)),P&&!P.isRead&&u(j=>Math.max(0,j-1));try{await ry(R)}catch(j){throw console.error("Error deleting notification:",j),n(A=>[...A,P].sort((E,z)=>new Date(z.created_at)-new Date(E.created_at))),P&&!P.isRead&&u(A=>A+1),j}},[r]),D=q.useCallback(()=>{k(1,!1)},[k]),B=q.useCallback(()=>{m&&!i&&h<x&&k(h+1,!0)},[m,i,h,x,k]);q.useEffect(()=>{k(1,!1)},[k]),q.useEffect(()=>{const R=setInterval(()=>{document.visibilityState==="visible"&&D()},3e4);return()=>clearInterval(R)},[D]);const V={notifications:r,loading:i,error:s,unreadCount:c,currentPage:h,totalPages:x,hasMore:m,unreadNotifications:T(),fetchNotifications:k,markAsRead:H,markAllAsRead:Z,deleteNotification:N,refreshNotifications:D,loadMoreNotifications:B};return e.jsx(k0.Provider,{value:V,children:t})},A0=()=>{const t=q.useContext(k0);if(!t)throw new Error("useNotifications must be used within a NotificationsProvider");return t},sy=()=>{const t=oe("#f0f4f8","gray.900"),r=oe("white","gray.800"),n=oe("gray.200","gray.600"),i=oe("brand.navy","white"),o=oe("gray.600","gray.400"),s=oe("brand.gold","brand.goldDark"),a=oe("brand.navy","brand.navyDark"),c=oe("0 4px 20px rgba(0, 0, 0, 0.1)","0 4px 20px rgba(0, 0, 0, 0.3)"),u=oe("gray.50","gray.700");ca({base:!0,md:!1});const h=qr(),p=Xr(),{notifications:x,loading:b,error:m,unreadCount:_,currentPage:w,totalPages:O,hasMore:k,markAsRead:T,markAllAsRead:H,deleteNotification:Z,fetchNotifications:N}=A0(),D=async()=>{try{await H(),h({title:"All notifications marked as read",status:"success",duration:3e3,isClosable:!0,position:"top"})}catch{h({title:"Failed to mark all as read",status:"error",duration:3e3,isClosable:!0,position:"top"})}},B=async j=>{try{await T(j)}catch{}},V=async j=>{try{await Z(j),h({title:"Notification deleted",status:"success",duration:3e3,isClosable:!0,position:"top"})}catch{h({title:"Failed to delete notification",status:"error",duration:3e3,isClosable:!0,position:"top"})}},R=j=>{j>=1&&j<=O&&N(j,!1)},P=async j=>{if(j.isRead||B(j.id),j.url)try{const A=new URL(j.url).pathname;p(A)}catch{console.error("Invalid URL for notification:",j.url),h({title:"Invalid notification link",status:"error",duration:3e3,isClosable:!0,position:"top"})}};return e.jsx(ce,{minH:"100vh",bg:t,py:{base:4,md:8},px:{base:3,md:6},children:e.jsx(Si,{maxW:"900px",children:e.jsxs(Ce,{direction:"column",mx:"auto",bg:r,borderRadius:"xl",overflow:"hidden",boxShadow:c,children:[e.jsxs(Ce,{p:4,align:"center",justify:"space-between",borderBottom:"1px solid",borderColor:n,bg:oe("gray.50","gray.750"),children:[e.jsxs(at,{spacing:3,children:[e.jsx(Bt,{as:Ji,to:"/dashboard",icon:e.jsx(us,{size:18}),variant:"ghost","aria-label":"Go back",color:i,borderRadius:"full",size:"md",_hover:{bg:`${s}20`}}),e.jsx(ct,{as:ra,color:s,boxSize:5}),e.jsx(ut,{size:"md",color:i,children:"Notifications"}),_>0&&e.jsxs(Pr,{px:2,py:1,bg:s,color:a,borderRadius:"full",fontWeight:"medium",children:[_," new"]})]}),e.jsx(Te,{size:"sm",colorScheme:"gray",variant:"ghost",onClick:D,leftIcon:e.jsx(zi,{}),isDisabled:_===0,_hover:{bg:`${s}20`},children:"Mark all as read"})]}),e.jsx(ce,{children:b?e.jsx(vn,{py:16,children:e.jsx(G,{color:o,children:"Loading notifications..."})}):m?e.jsx(vn,{py:16,children:e.jsx(G,{color:"red.400",children:m})}):x.length>0?e.jsxs(e.Fragment,{children:[e.jsx(et,{spacing:0,align:"stretch",divider:e.jsx(sn,{borderColor:n}),children:x.map(j=>e.jsx(ce,{children:e.jsx(Ce,{p:5,position:"relative",bg:j.isRead?"transparent":`${s}10`,_hover:{bg:u},transition:"all 0.2s ease",borderLeft:"3px solid",borderLeftColor:j.isRead?"transparent":s,onClick:()=>P(j),cursor:j.url?"pointer":"default",direction:"column",children:e.jsxs(Ce,{align:"flex-start",gap:4,children:[e.jsxs(ce,{position:"relative",flexShrink:0,children:[e.jsx(zr,{size:"md",name:j.user,src:j.avatar,border:"2px solid",borderColor:j.isRead?n:s}),!j.isRead&&e.jsx(Pr,{position:"absolute",top:"-1",right:"-1",bg:s,boxSize:"10px",borderRadius:"full",border:"2px solid",borderColor:r})]}),e.jsxs(ce,{ml:0,flex:"1",minW:0,children:[e.jsxs(Ce,{align:"baseline",justify:"space-between",children:[e.jsx(G,{fontWeight:j.isRead?"medium":"bold",color:i,children:j.user}),e.jsx(G,{fontSize:"sm",color:o,children:j.time})]}),e.jsx(G,{mt:1,color:j.isRead?o:i,children:j.content}),j.type==="resource_rejected"&&j.reason&&e.jsxs(so,{mt:3,status:"warning",variant:"subtle",borderRadius:"md",fontSize:"sm",children:[e.jsx(oo,{as:Gu}),e.jsxs(ce,{children:[e.jsx(G,{fontWeight:"semibold",mb:1,children:"Rejection Reason:"}),e.jsx(G,{children:j.reason})]})]})]}),e.jsx(Bt,{icon:e.jsx(ul,{}),variant:"ghost",colorScheme:"red",size:"sm",onClick:A=>{A.stopPropagation(),V(j.id)},"aria-label":"Delete notification",alignSelf:"center",borderRadius:"full",opacity:.7,_hover:{opacity:1},flexShrink:0})]})})},j.id))}),O>1&&e.jsxs(Ce,{justify:"center",align:"center",p:4,borderTop:"1px solid",borderColor:n,children:[e.jsx(Te,{onClick:()=>R(w-1),isDisabled:w===1,leftIcon:e.jsx(us,{}),mr:2,children:"Previous"}),e.jsxs(G,{color:o,children:["Page ",w," of ",O]}),e.jsx(Te,{onClick:()=>R(w+1),isDisabled:w===O,rightIcon:e.jsx(mo,{}),ml:2,children:"Next"})]})]}):e.jsx(vn,{py:16,children:e.jsxs(et,{spacing:4,children:[e.jsx(ce,{p:4,borderRadius:"full",bg:`${s}20`,children:e.jsx(ct,{as:ra,fontSize:"3xl",color:s})}),e.jsx(ut,{size:"md",color:i,children:"No notifications"}),e.jsx(G,{color:o,textAlign:"center",maxW:"350px",children:"You're all caught up! Check back later for updates and activities from your courses and study groups."}),e.jsx(Te,{as:Ji,to:"/dashboard",mt:2,leftIcon:e.jsx(Wn,{}),colorScheme:"gray",variant:"outline",_hover:{bg:`${s}20`,borderColor:s},children:"Return to Dashboard"})]})})})]})})})},oy=async(t={})=>(await yt.get("/requests",{params:t})).data,ay=async(t={})=>{const r={};return t.course_name&&(r.course_name=t.course_name),t.current_day&&(r.current_day=t.current_day),t.desired_day&&(r.desired_day=t.desired_day),(await yt.get("/requests",{params:r})).data},ly=async(t={})=>(await yt.get("/my-requests",{params:t})).data,cy=async()=>(await yt.get("/my-applications")).data,dy=async t=>(await yt.post("/requests",t)).data,uy=async t=>(await yt.get(`/requests/${t}`)).data,L0=async(t,r)=>(await yt.put(`/requests/${t}`,r)).data,hy=async t=>(await yt.delete(`/requests/${t}`)).data,fy=async(t,r={})=>(await yt.post(`/requests/${t}/apply`,r)).data,py=async t=>(await yt.get(`/requests/${t}/applications`)).data,Ff=async(t,r)=>(await yt.put(`/applications/${t}`,r)).data,my=async t=>(await yt.put(`/applications/${t}/withdraw`)).data,Ic=({currentPage:t,totalPages:r,onPageChange:n,isLoading:i})=>e.jsxs(at,{spacing:2,justify:"center",mt:4,children:[e.jsx(Te,{size:"sm",onClick:()=>n(t-1),isDisabled:i||t<=1,children:"Prev"}),e.jsxs(G,{fontSize:"sm",children:["Page ",t," of ",r]}),e.jsx(Te,{size:"sm",onClick:()=>n(t+1),isDisabled:i||t>=r,children:"Next"})]}),gy=5;function P0({perPage:t=gy,trigger:r=!0}={}){const[n,i]=q.useState([]),[o,s]=q.useState(!1),[a,c]=q.useState(null),[u,h]=q.useState(1),[p,x]=q.useState(1),b=q.useCallback(async(m=1)=>{s(!0),c(null);try{const _=localStorage.getItem("major_id"),w=localStorage.getItem("faculty_id"),O={..._?{major_id:_}:{},...w?{faculty_id:w}:{},page:m,per_page:t},k=await sl(O);i(k.data||[]),x(k.last_page||1),h(k.current_page||1)}catch(_){c(_.message||"Failed to load courses")}finally{s(!1)}},[t]);return q.useEffect(()=>{r&&b(u)},[u,r]),{courses:n,coursesLoading:o,coursesError:a,coursesPage:u,coursesTotalPages:p,setCoursesPage:h,fetchPaginatedCourses:b}}const rd="https://bit.ly/dan-abramov",If=t=>t?{id:t.id,userId:t.user_id,userName:t.user&&t.user.first_name&&t.user.last_name?`${t.user.first_name} ${t.user.last_name}`:t.user&&t.user.username||t.userName||"You",userAvatar:t.user&&t.user.avatar_url||t.userAvatar||rd,reason:t.reason,createdAt:t.created_at||t.createdAt,status:t.status,request:t.request}:{},Qa=(t,r)=>{if(!t)return{};const n=t.requester||r||{};return{id:t.id,courseName:t.course_name,currentSection:t.current_section,desiredSection:t.desired_section,currentDay:t.current_day,currentTime:t.current_time,desiredDay:t.desired_day,desiredTime:t.desired_time,reason:t.reason,status:t.status,requesterId:n.id,requesterName:n.first_name&&n.last_name?`${n.first_name} ${n.last_name}`:n.name||"You",requesterAvatar:n.avatar_url||rd,createdAt:t.created_at,applications:Array.isArray(t.applications)?t.applications.map(i=>({id:i.id,requestId:t.id,userId:i.user_id||(i.user?i.user.id:void 0),status:i.status,user:i.user?{id:i.user.id,name:`${i.user.first_name} ${i.user.last_name}`}:{}})):[]}},Mf=({request:t,userId:r,onApply:n,onCancel:i,onDelete:o,onViewApplications:s,onUpdateApplication:a,onUpdateApplicationStatus:c,onEdit:u})=>{var T;typeof window!="undefined"&&localStorage.getItem("role");const h=t.requesterId===r,p=oe("white","gray.800"),x=oe("gray.800","white"),b=oe("gray.600","gray.400"),m=oe("yellow.400","yellow.500"),_=oe("gray.100","gray.700"),w=(T=t.applications)==null?void 0:T.some(H=>H.userId===r&&(H.status==="pending"||H.status==="accepted")),O={pending:"orange",accepted:"green",declined:"red",cancelled:"gray"},k=H=>{if(!H)return"";try{const[Z,N]=H.split(":"),D=parseInt(Z,10),B=D>=12?"PM":"AM";return`${D%12||12}:${N} ${B}`}catch{return H}};return e.jsxs(Zt,{bg:p,boxShadow:"sm",border:"1px solid",borderColor:_,borderRadius:"lg",overflow:"hidden",transition:"all 0.2s",_hover:{transform:"translateY(-2px)",boxShadow:"md"},children:[t.status!=="pending"&&e.jsx(Pr,{position:"absolute",top:2,right:2,colorScheme:O[t.status],variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:t.status}),e.jsx(fo,{pb:3,pt:{base:8,md:4},children:e.jsxs(Ce,{justify:"space-between",align:"start",direction:{base:"column",sm:"row"},gap:{base:3,sm:0},children:[e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(ut,{size:{base:"xs",sm:"sm"},color:x,children:t.courseName}),e.jsxs(G,{fontSize:"xs",color:b,children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsxs(at,{spacing:2,flexShrink:0,children:[e.jsx(Xn,{size:{base:"sm",md:"sm"},colorScheme:"blue",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:t.currentSection}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:"gray.500",children:"→"}),e.jsx(Xn,{size:{base:"sm",md:"sm"},colorScheme:"green",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:t.desiredSection})]})]})}),e.jsxs(un,{py:0,children:[e.jsxs(pr,{templateColumns:{base:"1fr",sm:"repeat(2, 1fr)"},gap:{base:3,sm:4},py:3,children:[e.jsxs(et,{align:"start",spacing:2,children:[e.jsxs(Ce,{align:"center",children:[e.jsx(ce,{as:An,mr:2,color:m}),e.jsxs(et,{spacing:0,align:"start",children:[e.jsx(G,{fontSize:"xs",color:b,children:"Current Day"}),e.jsx(G,{fontSize:"sm",color:x,children:t.currentDay})]})]}),e.jsxs(Ce,{align:"center",children:[e.jsx(ce,{as:hs,mr:2,color:m}),e.jsxs(et,{spacing:0,align:"start",children:[e.jsx(G,{fontSize:"xs",color:b,children:"Time"}),e.jsx(G,{fontSize:"sm",color:x,children:k(t.currentTime)})]})]})]}),e.jsxs(et,{align:"start",spacing:2,children:[e.jsxs(Ce,{align:"center",children:[e.jsx(ce,{as:An,mr:2,color:m}),e.jsxs(et,{spacing:0,align:"start",children:[e.jsx(G,{fontSize:"xs",color:b,children:"Desired Day"}),e.jsx(G,{fontSize:"sm",color:x,children:t.desiredDay})]})]}),e.jsxs(Ce,{align:"center",children:[e.jsx(ce,{as:hs,mr:2,color:m}),e.jsxs(et,{spacing:0,align:"start",children:[e.jsx(G,{fontSize:"xs",color:b,children:"Time"}),e.jsx(G,{fontSize:"sm",color:x,children:k(t.desiredTime)})]})]})]})]}),t.reason&&e.jsxs(ce,{mt:2,p:3,bg:oe("gray.50","gray.700"),borderRadius:"md",children:[e.jsx(G,{fontSize:"sm",color:b,noOfLines:2,children:t.reason}),c&&t.applications&&t.applications.length>0&&e.jsxs(ce,{pt:4,mt:4,borderTopWidth:"1px",borderColor:_,children:[e.jsx(ut,{size:"sm",mb:3,color:x,children:"Applicants"}),e.jsx(et,{spacing:4,align:"stretch",children:t.applications.map(H=>e.jsxs(Ce,{justify:"space-between",align:"center",children:[e.jsxs(Ce,{align:"center",children:[e.jsx(zr,{size:"sm",name:H.user.username,src:H.user.avatar}),e.jsxs(ce,{ml:3,children:[e.jsx(G,{fontWeight:"bold",color:x,children:H.user.username}),e.jsx(G,{fontSize:"sm",color:b,children:H.reason})]})]}),e.jsx(ce,{textAlign:"right",children:H.status==="pending"?e.jsxs(at,{spacing:2,children:[e.jsx(Te,{size:"xs",colorScheme:"green",onClick:()=>c(H.id,"approved"),children:"Approve"}),e.jsx(Te,{size:"xs",colorScheme:"red",onClick:()=>c(H.id,"declined"),children:"Decline"})]}):e.jsx(Pr,{colorScheme:H.status==="approved"?"green":"red",children:H.status.charAt(0).toUpperCase()+H.status.slice(1)})})]},H.id))})]})]})]}),e.jsx(ha,{pt:3,children:e.jsxs(Ce,{w:"100%",justify:"space-between",align:"center",direction:{base:"column",sm:"row"},gap:{base:3,sm:0},children:[e.jsxs(at,{spacing:2,children:[e.jsx(zr,{size:"xs",src:t.requesterAvatar,name:t.requesterName}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:x,fontWeight:"medium",children:t.requesterName})]}),t.status==="pending"&&e.jsxs(at,{spacing:2,flexWrap:"wrap",justify:{base:"center",sm:"flex-end"},children:[h&&e.jsxs(e.Fragment,{children:[e.jsx(Te,{size:{base:"xs",sm:"sm"},variant:"solid",colorScheme:"blue",onClick:()=>s(t.id),fontSize:{base:"xs",sm:"sm"},children:t.applications&&t.applications.length>0?`Applicants (${t.applications.length})`:"No Applicants"}),e.jsxs(wn,{children:[e.jsx(jn,{as:Bt,"aria-label":"More actions",icon:e.jsx(us,{style:{transform:"rotate(-90deg)"}}),size:"sm",variant:"ghost"}),e.jsxs(Sn,{children:[e.jsx(er,{icon:e.jsx(co,{}),onClick:()=>i(t.id),children:"Cancel"}),e.jsx(er,{icon:e.jsx(Ig,{}),onClick:()=>u(t),children:"Edit"}),e.jsx(er,{icon:e.jsx(hl,{}),color:"red.500",onClick:()=>o(t.id),children:"Delete"})]})]})]}),!h&&w&&e.jsx(Te,{size:{base:"xs",sm:"sm"},colorScheme:"gray",variant:"solid",isDisabled:!0,fontSize:{base:"xs",sm:"sm"},children:"Applied"}),!h&&!w&&typeof n=="function"&&e.jsx(Te,{size:{base:"xs",sm:"sm"},colorScheme:"green",variant:"solid",leftIcon:e.jsx(zi,{}),onClick:()=>n(t.id),fontSize:{base:"xs",sm:"sm"},children:"Apply"})]})]})})]})},xy=({application:t,onWithdraw:r})=>{const[n,i]=q.useState(!1),o=q.useRef(),s=oe("white","gray.800"),a=oe("gray.800","white"),c=oe("gray.600","gray.400"),u=oe("gray.100","gray.700"),h={pending:"orange",accepted:"green",declined:"red",cancelled:"gray"},p=t.request,x=(p==null?void 0:p.courseName)||`Request #${t.request_id}`,b=(p==null?void 0:p.currentSection)||"-",m=(p==null?void 0:p.desiredSection)||"-",_=(p==null?void 0:p.currentDay)||"-",w=(p==null?void 0:p.desiredDay)||"-",O=(p==null?void 0:p.currentTime)||"-",k=(p==null?void 0:p.desiredTime)||"-";return p!=null&&p.requesterAvatar,p!=null&&p.requesterName,e.jsxs(Zt,{bg:s,boxShadow:"sm",border:"1px solid",borderColor:u,borderRadius:"lg",overflow:"hidden",transition:"all 0.2s",_hover:{transform:"translateY(-2px)",boxShadow:"md"},children:[e.jsx(Pr,{position:"absolute",top:2,right:2,colorScheme:h[t.status],variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:t.status}),e.jsx(fo,{pb:3,pt:{base:8,md:4},children:e.jsx(Ce,{justify:"space-between",align:"start",children:e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(ut,{size:{base:"xs",sm:"sm"},color:a,children:x}),e.jsxs(G,{fontSize:"xs",color:c,children:["Applied: ",new Date(t.createdAt).toLocaleDateString()]})]})})}),e.jsxs(un,{py:0,children:[e.jsxs(pr,{templateColumns:{base:"1fr",sm:"repeat(2, 1fr)"},gap:{base:3,sm:4},py:3,children:[e.jsxs(et,{align:"start",spacing:2,children:[e.jsx(G,{fontSize:{base:"xs",sm:"sm"},fontWeight:"medium",color:a,children:"Current Section"}),e.jsx(Xn,{size:{base:"sm",sm:"md"},colorScheme:"blue",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:b}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:c,mt:2,children:"Current Day"}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:a,children:_}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:c,mt:2,children:"Current Time"}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:a,children:O})]}),e.jsxs(et,{align:"start",spacing:2,children:[e.jsx(G,{fontSize:{base:"xs",sm:"sm"},fontWeight:"medium",color:a,children:"Desired Section"}),e.jsx(Xn,{size:{base:"sm",sm:"md"},colorScheme:"green",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:m}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:c,mt:2,children:"Desired Day"}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:a,children:w}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:c,mt:2,children:"Desired Time"}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:a,children:k})]})]}),e.jsxs(ce,{mt:2,p:{base:2,sm:3},bg:oe("gray.50","gray.700"),borderRadius:"md",children:[e.jsx(G,{fontSize:{base:"xs",sm:"sm"},fontWeight:"medium",color:a,children:"Your Reason:"}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:c,children:t.reason})]})]}),e.jsx(ha,{pt:3,children:e.jsx(Ce,{w:"100%",justify:"space-between",align:"center",children:r&&t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(Te,{size:{base:"xs",sm:"sm"},colorScheme:"red",variant:"outline",onClick:()=>i(!0),"aria-label":"Withdraw Application",fontSize:{base:"xs",sm:"sm"},children:"Withdraw"}),e.jsx(ll,{isOpen:n,leastDestructiveRef:o,onClose:()=>i(!1),children:e.jsx(Fr,{children:e.jsxs(cl,{children:[e.jsx(Wr,{fontSize:"lg",fontWeight:"bold",children:"Withdraw Application"}),e.jsx(Ir,{children:"Are you sure you want to withdraw this application? This action cannot be undone."}),e.jsxs(Jr,{children:[e.jsx(Te,{ref:o,onClick:()=>i(!1),children:"Cancel"}),e.jsx(Te,{colorScheme:"red",ml:3,onClick:()=>{i(!1),r(t.id)},children:"Confirm"})]})]})})})]})})})]})},by=q.forwardRef(({onEditRequest:t},r)=>{const{isOpen:n,onOpen:i,onClose:o}=Br(),s=qr(),a=Xr(),{user:c}=hi(),{isOpen:u,onOpen:h,onClose:p}=Br(),{courses:x,coursesLoading:b,coursesError:m,coursesPage:_,coursesTotalPages:w,setCoursesPage:O}=P0({trigger:n||u}),k=oe("gray.50","gray.900"),T=oe("white","gray.800"),H=oe("gray.800","white"),Z=oe("gray.600","gray.400"),N=oe("yellow.400","yellow.500"),D=oe("gray.100","gray.700"),[B,V]=q.useState([]),[R,P]=q.useState(1),[j,A]=q.useState(1),[E,z]=q.useState("created_at"),[se,re]=q.useState("desc"),[v,ne]=q.useState([]),[M,y]=q.useState(1),[Y,C]=q.useState(1),[W,L]=q.useState("created_at"),[$,Q]=q.useState("desc"),[ie,de]=q.useState([]),[le,be]=q.useState(1),[fe,Fe]=q.useState(1),[Oe,Ue]=q.useState("created_at"),[ye,ee]=q.useState("desc"),[_e,Me]=q.useState(!0),[Le,ue]=q.useState({course_code:"",current_day:"",desired_day:""}),[Ye,Ze]=q.useState(!1);q.useImperativeHandle(r,()=>({fetchAvailableRequestsPaginated:Nt,fetchMyRequestsPaginated:At,fetchMyApplicationsPaginated:ht}));const[mt,$e]=q.useState(!1),[je,ve]=q.useState(!1),[Pe,De]=q.useState(null),[Se,Ie]=q.useState(""),[ze,it]=q.useState(!1),[Ge,ot]=q.useState([]),Nt=async(Ve=1,Je=E,It=se)=>{Me(!0);try{const dt=await oy({page:Ve,sort_by:Je,sort_order:It});V(Array.isArray(dt.data)?dt.data.map(Qa):[]),A(dt.last_page||1),P(dt.current_page||1)}catch(dt){s({title:"Failed to load available requests",description:dt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{Me(!1)}},At=async(Ve=1,Je=W,It=$)=>{Me(!0);try{const dt=await ly({page:Ve,sort_by:Je,sort_order:It});let jt=[];Array.isArray(dt.data)&&(jt=dt.data.map(lr=>Qa(lr,c))),ne(jt),C(dt.last_page||1),y(dt.current_page||1)}catch(dt){s({title:"Failed to load your requests",description:dt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{Me(!1)}},ht=async(Ve=1,Je=Oe,It=ye)=>{Me(!0);try{const dt=await cy({page:Ve,sort_by:Je,sort_order:It});Fe(dt.last_page||1),be(dt.current_page||1);const jt=dt.data||[],lr=Array.isArray(jt)?jt.map(fr=>fr&&fr.request_id).filter(Boolean):[],Mr=await Promise.all(lr.map(fr=>uy(fr).catch(()=>null))),an={};Mr.forEach((fr,Cn)=>{fr&&fr.id&&(an[fr.id]=fr)});const Ci=Array.isArray(jt)?jt.map(fr=>{const Cn=If(fr),Ln=fr&&fr.request?Qa(fr.request):fr&&an[fr.request_id]?Qa(an[fr.request_id]):void 0;return{...Cn,request:Ln}}):[];de(Ci)}catch(dt){s({title:"Failed to load applications",description:dt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{Me(!1)}};q.useEffect(()=>{Nt(R,E,se)},[R,E,se]),q.useEffect(()=>{At(M,W,$)},[M,W,$]),q.useEffect(()=>{ht(le,Oe,ye)},[le,Oe,ye]);const bt=Ve=>{const{name:Je,value:It}=Ve.target;ue(dt=>({...dt,[Je]:It}))},Ne=async()=>{Ze(!0);try{const Ve=await ay({course_name:Le.course_code,current_day:Le.current_day,desired_day:Le.desired_day});V(Array.isArray(Ve.data)?Ve.data.map(Qa):[]),p()}catch(Ve){s({title:"Failed to apply filters",description:Ve.message||"Please try again later",status:"error",duration:4e3,isClosable:!0})}finally{Ze(!1)}},lt=async Ve=>{try{await my(Ve),de(Je=>Je.filter(It=>It.id!==Ve)),Nt(),s({title:"Application withdrawn",description:"Your application has been successfully withdrawn.",status:"info",duration:3e3,isClosable:!0})}catch(Je){s({title:"Failed to withdraw application",description:Je.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},zt=async Ve=>{if(window.confirm("Are you sure you want to delete this request? This cannot be undone."))try{await hy(Ve),ne(Je=>Je.filter(It=>It.id!==Ve)),s({title:"Request deleted",status:"info",duration:3e3,isClosable:!0})}catch(Je){s({title:"Failed to delete request",description:Je.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},Ae=Ve=>{De(Ve),Ie(""),$e(!0)},We=async()=>{if(!ze){it(!0);try{await fy(Pe,{reason:Se}),V(Ve=>Ve.map(Je=>Je.id===Pe?{...Je,applications:[...Je.applications||[],{id:Date.now().toString(),userId:c.id,userName:"You",userAvatar:rd,reason:Se,createdAt:new Date().toISOString(),status:"pending"}]}:Je)),await ht(),s({title:"Application submitted",description:"Your application has been submitted to the request owner.",status:"success",duration:3e3,isClosable:!0}),$e(!1),Ie(""),De(null)}catch(Ve){s({title:"Failed to submit application",description:Ve.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{it(!1)}}},nt=async Ve=>{try{const Je=await py(Ve);De(Ve),ot(Je.map(If)),ve(!0)}catch(Je){s({title:"Failed to load applications",description:Je.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},tt=async Ve=>{try{await Ff(Ve,{status:"accepted"});const Je=Ge.map(It=>It.id===Ve?{...It,status:"accepted"}:{...It,status:It.status==="pending"?"declined":It.status});ot(Je),ne(It=>It.map(dt=>dt.id===Pe?{...dt,status:"accepted",applications:Je}:dt)),ve(!1),s({title:"Application accepted",description:"You have accepted the application for your class exchange request.",status:"success",duration:3e3,isClosable:!0})}catch(Je){s({title:"Failed to accept application",description:Je.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},gt=async Ve=>{try{await Ff(Ve,{status:"declined"});const Je=Ge.map(It=>It.id===Ve?{...It,status:"declined"}:It);ot(Je),ne(It=>It.map(dt=>dt.id===Pe?{...dt,applications:Je}:dt)),s({title:"Application declined",description:"You have declined the application for your class exchange request.",status:"info",duration:3e3,isClosable:!0})}catch(Je){s({title:"Failed to decline application",description:Je.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},Ct=async Ve=>{try{await L0(Ve,{status:"cancelled"}),ne(Je=>Je.map(It=>It.id===Ve?{...It,status:"cancelled"}:It)),s({title:"Request cancelled",description:"Your class exchange request has been cancelled.",status:"info",duration:3e3,isClosable:!0})}catch(Je){s({title:"Failed to cancel request",description:Je.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},Ut=()=>{a(-1)};return e.jsxs(ce,{minH:"100vh",bg:k,p:{base:2,sm:4,md:6},children:[e.jsxs(Si,{maxW:"7xl",children:[e.jsxs(Ce,{mb:{base:4,md:8},align:"center",children:[e.jsx(Bt,{icon:e.jsx(us,{}),onClick:Ut,"aria-label":"Go back",variant:"ghost",color:H,size:{base:"md",md:"lg"},mr:{base:2,md:3},_hover:{bg:oe("gray.100","gray.700")}}),e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(ut,{size:{base:"md",md:"lg"},color:H,children:"Class Exchange Requests"}),e.jsx(G,{fontSize:{base:"xs",sm:"sm"},color:Z,display:{base:"none",sm:"block"},children:"Manage your class time exchange requests"})]})]}),e.jsxs(ce,{bg:T,borderRadius:"xl",boxShadow:"sm",borderWidth:"1px",borderColor:D,children:[e.jsxs(Ce,{justify:"flex-end",p:{base:3,md:6},borderBottomWidth:"1px",borderColor:D,gap:{base:2,md:3},flexWrap:"wrap",children:[e.jsx(Te,{colorScheme:"yellow",leftIcon:e.jsx(Wc,{}),onClick:h,size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Filters"}),e.jsx(Te,{leftIcon:e.jsx(Qn,{}),onClick:i,colorScheme:"yellow",size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"New Request"})]}),e.jsxs(hn,{isOpen:u,onClose:p,isCentered:!0,children:[e.jsx(Fr,{}),e.jsxs(fn,{children:[e.jsx(Wr,{children:"Filter Requests"}),e.jsx(on,{}),e.jsx(Ir,{children:e.jsxs(yr,{spacing:4,children:[e.jsxs(ft,{children:[e.jsx(pt,{children:"Course"}),e.jsxs(wn,{isLazy:!0,children:[e.jsx(jn,{as:Te,width:"100%",rightIcon:e.jsx("span",{style:{marginLeft:8},children:"▼"}),isLoading:b,isDisabled:b||!!m,textAlign:"left",children:Le.course_code?(()=>{const Ve=x.find(Je=>Je.code===Le.course_code);return Ve?`${Ve.code} - ${Ve.title}`:Le.course_code})():b?"Loading courses...":"Select course"}),e.jsxs(Sn,{maxH:"250px",overflowY:"auto",minW:"250px",px:0,children:[m?e.jsx(er,{isDisabled:!0,children:"Failed to load courses"}):x.length===0&&!b?e.jsx(er,{isDisabled:!0,children:"No courses found"}):x.map(Ve=>e.jsx(er,{value:Ve.title,onClick:()=>ue(Je=>({...Je,course_code:Ve.code})),_active:{bg:"gray.100"},_selected:{fontWeight:"bold",bg:"gray.200"},style:Le.course_code===Ve.code?{fontWeight:"bold",background:"#f7fafc"}:{},children:Ve.code?`${Ve.code} - ${Ve.title}`:Ve.title},Ve.id)),e.jsx(ce,{borderTop:"1px solid #eee",mt:2,pt:2,px:2,children:e.jsxs(Ce,{justify:"space-between",align:"center",children:[e.jsx(Te,{size:"xs",onClick:Ve=>{Ve.stopPropagation(),O(Je=>Math.max(1,Je-1))},isDisabled:b||_<=1,children:"Prev"}),e.jsxs(G,{fontSize:"xs",children:["Page ",_," of ",w]}),e.jsx(Te,{size:"xs",onClick:Ve=>{Ve.stopPropagation(),O(Je=>Math.min(w,Je+1))},isDisabled:b||_>=w,children:"Next"})]})})]})]})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Current Day"}),e.jsxs(Ti,{placeholder:"Select current day",name:"current_day",value:Le.current_day,onChange:bt,children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Desired Day"}),e.jsxs(Ti,{placeholder:"Select desired day",name:"desired_day",value:Le.desired_day,onChange:bt,children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]})]})}),e.jsxs(Jr,{children:[e.jsx(Te,{onClick:p,mr:3,variant:"ghost",children:"Cancel"}),e.jsx(Te,{colorScheme:"yellow",onClick:Ne,isLoading:Ye,children:"Apply Filters"})]})]})]}),e.jsxs(da,{variant:"soft-rounded",colorScheme:"yellow",children:[e.jsxs(ua,{px:{base:2,md:6},pt:4,pb:2,mb:4,overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",css:{"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:oe("gray.300","gray.600"),borderRadius:"2px"}},children:[e.jsx(Kn,{fontSize:{base:"xs",sm:"sm"},px:{base:3,sm:4},_selected:{fontWeight:"semibold",color:H,bg:`${N}20`},children:"Available"}),e.jsxs(Kn,{fontSize:{base:"xs",sm:"sm"},px:{base:3,sm:4},_selected:{fontWeight:"semibold",color:H,bg:`${N}20`},children:["My Requests (",v.length,")"]}),e.jsx(Kn,{fontSize:{base:"xs",sm:"sm"},px:{base:3,sm:4},_selected:{fontWeight:"semibold",color:H,bg:`${N}20`},children:"My Applications"})]}),e.jsxs(al,{px:{base:2,md:6},py:0,children:[e.jsx(ui,{p:0,children:_e?e.jsx(Ce,{justify:"center",py:10,children:e.jsx(nn,{size:"xl"})}):B.length>0?e.jsxs(e.Fragment,{children:[e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:{base:4,md:6},children:B.map(Ve=>e.jsx(Mf,{request:Ve,userId:c.id,onApply:Ae,onViewApplications:nt,onEdit:t,onDelete:zt},Ve.id))}),e.jsx(Ic,{currentPage:R,totalPages:j,onPageChange:P,isLoading:_e})]}):e.jsx(ce,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:D,borderRadius:"lg",children:e.jsx(G,{color:Z,children:"No available requests at this time"})})}),e.jsx(ui,{p:0,children:_e?e.jsx(Ce,{justify:"center",py:10,children:e.jsx(nn,{size:"xl"})}):v.length>0?e.jsxs(e.Fragment,{children:[e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:{base:4,md:6},children:v.map(Ve=>e.jsx(Mf,{request:Ve,userId:c.id,onCancel:Ct,onDelete:zt,onViewApplications:nt,onEdit:t},Ve.id))}),e.jsx(Ic,{currentPage:M,totalPages:Y,onPageChange:y,isLoading:_e})]}):e.jsx(ce,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:D,borderRadius:"lg",children:e.jsx(G,{color:Z,children:"No personal requests found"})})}),e.jsx(ui,{p:0,children:_e?e.jsx(Ce,{justify:"center",py:10,children:e.jsx(nn,{size:"xl"})}):ie.length>0?e.jsxs(e.Fragment,{children:[e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:{base:4,md:6},mb:6,children:ie.map(Ve=>e.jsx(xy,{application:Ve,onWithdraw:lt},Ve.id))}),e.jsx(Ce,{justify:"center",mt:6,mb:4,children:e.jsxs(Vm,{isAttached:!0,variant:"outline",size:"sm",children:[e.jsx(Bt,{icon:e.jsx(us,{}),isDisabled:le<=1,onClick:()=>be(Ve=>Math.max(Ve-1,1)),"aria-label":"Previous page"}),e.jsxs(Te,{isDisabled:!0,children:["Page ",le," of ",fe]}),e.jsx(Bt,{icon:e.jsx(mo,{}),isDisabled:le>=fe,onClick:()=>be(Ve=>Math.min(Ve+1,fe)),"aria-label":"Next page"})]})})]}):e.jsx(ce,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:D,borderRadius:"lg",children:e.jsx(G,{color:Z,children:"No applications submitted yet"})})})]})]})]})]}),e.jsx(N0,{isOpen:n,onClose:o,mode:"create",initialData:{},onSubmit:async Ve=>{var Je,It;try{const dt=await dy({course_name:Ve.courseName,current_section:Ve.currentSection,desired_section:Ve.desiredSection,current_day:Ve.currentDay,current_time:Ve.currentTime,desired_day:Ve.desiredDay,desired_time:Ve.desiredTime,reason:Ve.reason});await Nt(),await At(),s({title:"Request created",description:"Your class exchange request has been submitted.",status:"success",duration:3e3,isClosable:!0}),o()}catch(dt){throw s({title:"Failed to create request",description:((It=(Je=dt.response)==null?void 0:Je.data)==null?void 0:It.message)||"Please try again later",status:"error",duration:5e3,isClosable:!0}),dt}},courses:x,coursesLoading:b,coursesError:m,coursesPage:_,coursesTotalPages:w,onCoursePageChange:O}),e.jsxs(hn,{isOpen:mt,onClose:()=>$e(!1),size:"md",children:[e.jsx(Fr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(fn,{bg:T,borderRadius:"xl",children:[e.jsx(Wr,{color:H,children:"Apply for Class Exchange"}),e.jsx(on,{}),e.jsxs(Ir,{children:[e.jsxs(et,{spacing:4,align:"stretch",children:[e.jsx(G,{fontSize:"sm",color:Z,children:"Submit your application to exchange class times with the requester. The requester will review all applications and select one to accept."}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{color:H,children:"Why do you want to exchange?"}),e.jsx(ti,{value:Se,onChange:Ve=>Ie(Ve.target.value),placeholder:"Explain why this exchange works for you...",color:H,resize:"vertical",rows:3})]})]}),e.jsxs(Ce,{justify:"flex-end",mt:6,gap:3,children:[e.jsx(Te,{variant:"ghost",onClick:()=>$e(!1),children:"Cancel"}),e.jsx(Te,{type:"button",colorScheme:"green",isDisabled:!Se.trim()||ze,isLoading:ze,onClick:We,children:"Submit Application"})]})]})]})]}),e.jsxs(hn,{isOpen:je,onClose:()=>ve(!1),size:"xl",children:[e.jsx(Fr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(fn,{bg:T,borderRadius:"xl",children:[e.jsx(Wr,{color:H,children:"Applications for Your Request"}),e.jsx(on,{}),e.jsx(Ir,{children:Ge.length>0?e.jsx(et,{spacing:4,align:"stretch",children:Ge.map(Ve=>{var Je;return e.jsxs(Zt,{p:4,borderRadius:"md",borderWidth:"1px",borderColor:D,position:"relative",children:[Ve.status!=="pending"&&e.jsx(Pr,{position:"absolute",top:2,right:2,colorScheme:Ve.status==="accepted"?"green":"red",variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:Ve.status}),e.jsxs(Ce,{mb:3,children:[e.jsx(zr,{size:"sm",src:Ve.userAvatar,name:(Je=Ve.user)==null?void 0:Je.name,mr:3}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(G,{fontWeight:"medium",color:H,children:Ve.userName}),e.jsxs(G,{fontSize:"xs",color:Z,children:["Applied: ",new Date(Ve.createdAt).toLocaleDateString()]})]})]}),e.jsx(ce,{p:3,bg:oe("gray.50","gray.700"),borderRadius:"md",mb:3,children:e.jsx(G,{fontSize:"sm",color:Z,children:Ve.reason})}),Ve.status==="pending"&&e.jsxs(Ce,{justifyContent:"flex-end",gap:2,children:[e.jsx(Te,{size:"sm",colorScheme:"green",onClick:()=>tt(Ve.id),children:"Accept"}),e.jsx(Te,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>gt(Ve.id),children:"Decline"})]})]},Ve.id)})}):e.jsx(ce,{p:8,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:D,borderRadius:"lg",children:e.jsx(G,{color:Z,children:"No applications received yet"})})}),e.jsx(Jr,{children:e.jsx(Te,{onClick:()=>ve(!1),children:"Close"})})]})]})]})});function N0({isOpen:t,onClose:r,mode:n="create",initialData:i={},onSubmit:o,courses:s=[],coursesLoading:a=!1,coursesError:c=null,coursesPage:u=1,coursesTotalPages:h=1,onCoursePageChange:p}){var T,H,Z,N;const x={id:"",courseName:"",currentSection:"",desiredSection:"",currentDay:"",currentTime:"",desiredDay:"",desiredTime:"",reason:""},[b,m]=q.useState({...x,...i}),[_,w]=q.useState(!1);q.useEffect(()=>{m({...x,...i})},[i]);const O=D=>{const{name:B,value:V}=D.target;m(R=>({...R,[B]:V}))},k=async D=>{D.preventDefault(),w(!0);try{await o(b)}catch{}finally{w(!1)}};return e.jsxs(hn,{isOpen:t,onClose:r,size:"lg",children:[e.jsx(Fr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(fn,{borderRadius:"xl",children:[e.jsx(Wr,{children:n==="edit"?"Edit Exchange Request":"Create Exchange Request"}),e.jsx(on,{}),e.jsxs(Ir,{children:[e.jsxs(so,{status:"info",variant:"left-accent",mb:4,borderRadius:"md",children:[e.jsx(oo,{}),e.jsx(G,{fontSize:"sm",children:"You can only make up to 2 exchange requests per day."})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs(yr,{spacing:4,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Course"}),e.jsxs(wn,{isLazy:!0,children:[e.jsx(jn,{as:Te,w:"100%",rightIcon:e.jsx("span",{style:{marginLeft:8},children:"▼"}),isLoading:a,isDisabled:a,variant:"outline",textAlign:"left",children:b.courseName?(T=s.find(D=>(D.code||D.name)===b.courseName))!=null&&T.code?`${(H=s.find(D=>(D.code||D.name)===b.courseName))==null?void 0:H.code} - ${(Z=s.find(D=>(D.code||D.name)===b.courseName))==null?void 0:Z.title}`:(N=s.find(D=>(D.code||D.name)===b.courseName))==null?void 0:N.name:a?"Loading courses...":"Select course"}),e.jsxs(Sn,{maxH:"320px",overflowY:"auto",minW:"320px",px:0,children:[c&&e.jsx(ce,{px:4,py:2,children:e.jsx(G,{color:"red.500",fontSize:"sm",children:c})}),a?e.jsx(ce,{px:4,py:2,children:e.jsx(G,{fontSize:"sm",children:"Loading..."})}):s.length===0?e.jsx(ce,{px:4,py:2,children:e.jsx(G,{fontSize:"sm",color:"gray.500",children:"No courses found."})}):s.map(D=>e.jsx(er,{value:D.code||D.name,onClick:()=>m(B=>({...B,courseName:D.code||D.name})),bg:(D.code||D.name)===b.courseName?"blue.50":void 0,fontWeight:(D.code||D.name)===b.courseName?"bold":"normal",children:D.code?`${D.code} - ${D.title}`:D.name},D.id||D.code)),e.jsx(ce,{borderTop:"1px solid",borderColor:"gray.100",mt:2,px:2,py:1,children:e.jsx(Ic,{currentPage:u,totalPages:h,onPageChange:p,isLoading:a})})]})]})]}),e.jsxs(pr,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Current Section"}),e.jsx(Rt,{name:"currentSection",value:b.currentSection,onChange:O,placeholder:"e.g., A, B, C"})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Desired Section"}),e.jsx(Rt,{name:"desiredSection",value:b.desiredSection,onChange:O,placeholder:"e.g., B, C, D"})]})]}),e.jsxs(pr,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Current Day"}),e.jsxs(Ti,{name:"currentDay",value:b.currentDay,onChange:O,placeholder:"Select day",children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Current Time"}),e.jsx(Rt,{name:"currentTime",value:b.currentTime,onChange:O,type:"time"})]})]}),e.jsxs(pr,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Desired Day"}),e.jsxs(Ti,{name:"desiredDay",value:b.desiredDay,onChange:O,placeholder:"Select day",children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(ft,{isRequired:!0,children:[e.jsx(pt,{children:"Desired Time"}),e.jsx(Rt,{name:"desiredTime",value:b.desiredTime,onChange:O,type:"time"})]})]}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Reason (Optional)"}),e.jsx(ti,{name:"reason",value:b.reason,onChange:O,placeholder:"Explain why you need to exchange class times...",resize:"vertical",rows:2})]})]}),e.jsxs(Ce,{justify:"flex-end",mt:6,gap:3,children:[e.jsx(Te,{variant:"ghost",onClick:r,children:"Cancel"}),e.jsx(Te,{type:"submit",colorScheme:n==="edit"?"blue":"yellow",isLoading:_,children:n==="edit"?"Update":"Create Request"})]})]})]})]})]})}function yy(t){const r=q.useRef(),n=qr(),{courses:i,coursesLoading:o,coursesError:s,coursesPage:a,coursesTotalPages:c,setCoursesPage:u}=P0({trigger:t.editRequestModalOpen}),[h,p]=q.useState(!1),[x,b]=q.useState(null),[m,_]=q.useState(!1),w=k=>{b(k),p(!0)},O=async k=>{_(!0);try{const T={course_name:k.courseName,current_section:k.currentSection,desired_section:k.desiredSection,current_day:k.currentDay,desired_day:k.desiredDay,current_time:k.currentTime,desired_time:k.desiredTime,reason:k.reason};await L0(k.id,T),p(!1),b(null),r.current&&(r.current.fetchAvailableRequestsPaginated(),r.current.fetchMyRequestsPaginated()),n({title:"Request updated",status:"success",duration:3e3,isClosable:!0})}catch(T){n({title:"Failed to update request",description:T.message,status:"error",duration:4e3,isClosable:!0})}finally{_(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(by,{ref:r,onEditRequest:w}),e.jsx(N0,{isOpen:h,onClose:()=>p(!1),mode:"edit",initialData:x||{},onSubmit:O,isLoading:m,courses:i,coursesLoading:o,coursesError:s,coursesPage:a,coursesTotalPages:c,onCoursePageChange:u})]})}const Df=({textColor:t,mutedText:r,isCollapsed:n,onClose:i})=>{const{user:o}=hi(),s=oe("rgba(250, 202, 21, 0.3)","rgba(202, 162, 18, 0.3)"),a=Xr(),c=dl(),u=localStorage.getItem("role"),h=(u||"").toLowerCase(),p=h==="admin"||h==="moderator",x=ca({base:!0,md:!1}),b=[{icon:$g,label:"Home",path:"/dashboard"},{icon:qc,label:"Resources",path:"/resources"},{icon:Un,label:"Study Groups",path:"/study-groups"},{icon:An,label:"Events",path:"/events"},{icon:ju,label:"Clubs",path:"/clubs"},{icon:Fg,label:"Grade Calculator",path:"/grade-calculator",hideOnMobile:!0},{icon:Gg,label:"Requests",path:"/requests"},...p?[{icon:i1,label:"Moderate Resources",path:"/resource-moderation"}]:[]],m=w=>{a(w),i&&i()},_=w=>c.pathname===w||c.pathname.startsWith(w+"/");return e.jsxs(Ce,{direction:"column",h:"100%",justify:"space-between",children:[e.jsxs(ce,{children:[e.jsx(vn,{py:4,mb:2,children:e.jsx("img",{src:ji,alt:"maaref Logo",style:{maxWidth:n?"40px":"60px",height:"auto",transition:"max-width 0.3s ease"}})}),e.jsx(yr,{spacing:3,px:n?1:3,children:b.filter(w=>!(w.hideOnMobile&&x)).map(w=>e.jsx(wi,{label:w.label,placement:"right",isDisabled:!n,hasArrow:!0,children:e.jsxs(Te,{leftIcon:n?null:e.jsx(w.icon,{}),justifyContent:n?"center":"flex-start",variant:"ghost",color:t,bg:_(w.path)?s:"transparent",onClick:()=>m(w.path),_hover:{bg:s},px:n?2:4,w:"full",size:"md",children:[!n&&w.label,n&&e.jsx(w.icon,{})]})},w.path))}),e.jsxs(ce,{mt:6,children:[!n&&e.jsx(G,{px:3,fontSize:"xs",fontWeight:"medium",textTransform:"uppercase",color:r,mb:2,children:"Personal"}),e.jsx(sn,{mb:3,opacity:.3}),e.jsx(yr,{spacing:3,px:n?1:3,children:e.jsx(wi,{label:"Saved",placement:"right",isDisabled:!n,hasArrow:!0,children:e.jsxs(Te,{leftIcon:n?null:e.jsx(Xi,{}),justifyContent:n?"center":"flex-start",variant:"ghost",color:t,bg:_("/saved-resources")?s:"transparent",onClick:()=>m("/saved-resources"),_hover:{bg:s},px:n?2:4,w:"full",size:"md",children:[!n&&"Saved",n&&e.jsx(Xi,{})]})})})]})]}),e.jsxs(ce,{px:n?1:3,py:4,mt:"auto",children:[e.jsx(sn,{mb:4}),e.jsxs(wn,{placement:"top-end",strategy:"fixed",offset:[0,10],children:[e.jsx(jn,{as:Te,variant:"ghost",w:"full",py:2,borderRadius:"md",textAlign:"left",_hover:{bg:s},children:e.jsxs(at,{spacing:3,justify:n?"center":"flex-start",children:[e.jsx(zr,{size:"sm",name:o?`${o.first_name} ${o.last_name}`:"User",src:(o==null?void 0:o.avatar_url)||(o==null?void 0:o.avatar)}),!n&&e.jsxs(ce,{children:[e.jsx(G,{fontSize:"sm",fontWeight:"medium",color:t,children:o?`${o.first_name} ${o.last_name}`:"Guest"}),e.jsx(G,{fontSize:"xs",color:r,children:u})]}),!n&&e.jsx(ct,{as:ds,ml:"auto",fontSize:"sm",color:t})]})}),e.jsxs(Sn,{zIndex:1500,shadow:"xl",children:[e.jsx(er,{icon:e.jsx(n1,{}),onClick:()=>m("/settings"),children:"Settings"}),e.jsx(sn,{}),e.jsx(er,{icon:e.jsx(Jg,{}),onClick:()=>{th()},children:"Sign Out"})]})]})]})]})},vy=cp`
  0% { transform: rotate(0); }
  10% { transform: rotate(15deg); }
  20% { transform: rotate(-15deg); }
  30% { transform: rotate(7deg); }
  40% { transform: rotate(-7deg); }
  50% { transform: rotate(0); }
  100% { transform: rotate(0); }
`,wy=()=>{var B,V;const{isOpen:t,onOpen:r,onClose:n}=Br(),{unreadNotifications:i,unreadCount:o,loading:s,error:a,markAsRead:c,markAllAsRead:u}=A0(),h=Ym(),p=oe("white","gray.800"),x=oe("gray.200","gray.600"),b=oe("gray.50","gray.700"),m=oe("brand.navy","white"),_=oe("gray.600","gray.400"),w=oe("brand.gold","brand.goldDark"),O=oe("brand.navy","brand.navyDark"),k=oe("0 4px 20px rgba(0, 0, 0, 0.1)","0 4px 20px rgba(0, 0, 0, 0.3)"),T=`${vy} 1s ease-in-out`,H=oe(`0 0 8px ${((B=h.colors.brand)==null?void 0:B.gold)||"#F2D944"}`,`0 0 8px ${((V=h.colors.brand)==null?void 0:V.goldDark)||"#D9C226"}`),Z=q.useRef(),[N,D]=q.useState(!1);return q.useEffect(()=>{if(o>0){D(!0);const R=setTimeout(()=>D(!1),1e3);return()=>clearTimeout(R)}},[o]),e.jsxs(Jm,{isOpen:t,onOpen:r,onClose:n,placement:"bottom-end",initialFocusRef:Z,closeOnBlur:!0,gutter:1,strategy:"fixed",children:[e.jsx(Xm,{children:e.jsxs(ce,{position:"relative",display:"inline-block",children:[e.jsx(Bt,{icon:e.jsx(ra,{size:20}),"aria-label":"Notifications",variant:"ghost",position:"relative",animation:N?T:void 0,_hover:{transform:"scale(1.05)",bg:`${w}20`,transition:"all 0.2s ease-in-out"},transition:"all 0.2s ease-in-out",borderRadius:"full"}),o>0&&e.jsx(Pr,{position:"absolute",top:"-2px",right:"-2px",bg:w,color:O,borderRadius:"full",boxSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"xs",fontWeight:"bold",boxShadow:N?H:"none",transition:"box-shadow 0.3s ease-in-out",border:"2px solid",borderColor:p,zIndex:2,children:o})]})}),e.jsxs(Km,{w:{base:"300px",sm:"350px"},maxH:"450px",bg:p,borderColor:x,boxShadow:k,borderRadius:"xl",_focus:{outline:"none"},overflow:"hidden",children:[e.jsx(Qm,{bg:p}),e.jsx(Zm,{color:m,size:"md"}),e.jsx(eg,{borderBottom:"1px solid",borderColor:x,p:4,fontWeight:"bold",color:m,bg:oe("gray.50","gray.750"),children:e.jsx(Ce,{justify:"space-between",align:"center",children:e.jsxs(at,{spacing:2,children:[e.jsx(ct,{as:ra,color:w}),e.jsx(G,{fontSize:"md",children:"Notifications"})]})})}),e.jsx(tg,{p:0,overflowY:"auto",maxH:"300px",children:s?e.jsx(vn,{py:10,children:e.jsx(G,{color:_,children:"Loading notifications..."})}):a?e.jsx(vn,{py:10,children:e.jsx(G,{color:"red.400",children:a})}):i.length>0?e.jsx(et,{spacing:0,align:"stretch",divider:e.jsx(sn,{borderColor:x}),children:i.map(R=>e.jsx(ce,{p:4,position:"relative",bg:R.isRead?"transparent":`${w}10`,_hover:{bg:b},transition:"all 0.2s",cursor:"pointer",onClick:()=>c(R.id),borderLeft:"3px solid",borderLeftColor:R.isRead?"transparent":w,children:e.jsxs(Ce,{align:"center",children:[e.jsxs(ce,{position:"relative",children:[e.jsx(zr,{size:"md",name:R.user,border:"2px solid",borderColor:R.isRead?x:w}),!R.isRead&&e.jsx(Pr,{position:"absolute",top:"-1",right:"-1",bg:w,boxSize:"8px",borderRadius:"full",border:"2px solid",borderColor:p})]}),e.jsxs(ce,{ml:4,flex:"1",children:[e.jsxs(Ce,{align:"baseline",justify:"space-between",children:[e.jsx(G,{fontWeight:R.isRead?"medium":"bold",fontSize:"sm",color:m,noOfLines:1,children:R.user}),e.jsx(G,{fontSize:"xs",color:_,children:R.time})]}),e.jsx(G,{fontSize:"sm",color:R.isRead?_:m,mt:1,noOfLines:2,children:R.content})]})]})},R.id))}):e.jsx(vn,{py:10,children:e.jsxs(et,{spacing:2,children:[e.jsx(ce,{p:3,borderRadius:"full",bg:`${w}20`,children:e.jsx(ct,{as:ra,fontSize:"xl",color:w})}),e.jsx(G,{fontWeight:"medium",color:m,children:"No notifications"}),e.jsx(G,{fontSize:"sm",color:_,textAlign:"center",children:"You're all caught up!"})]})})}),e.jsx(rg,{p:0,borderTop:"1px solid",borderColor:x,children:e.jsx(Te,{as:Ji,to:"/notifications",ref:Z,variant:"ghost",size:"md",color:O,_hover:{bg:`${w}20`},fontWeight:"medium",width:"100%",height:"50px",borderRadius:"0",rightIcon:e.jsx(mo,{}),onClick:n,children:"See All Notifications"})})]})]})},jy=({isMobile:t,onLeftOpen:r,colorMode:n,toggleColorMode:i})=>(Xr(),oe("white","gray.800"),oe("gray.200","gray.700"),oe("rgba(250, 202, 21, 0.3)","rgba(202, 162, 18, 0.3)"),e.jsxs(Ce,{align:"center",gap:2,ml:"auto",children:[e.jsx(wi,{label:n==="light"?"Dark mode":"Light mode",children:e.jsx(Bt,{size:"md",variant:"ghost",icon:n==="light"?e.jsx(Qg,{}):e.jsx(s1,{}),onClick:i,"aria-label":`Toggle ${n==="light"?"Dark":"Light"} Mode`})}),e.jsx(wy,{})]})),Sy=()=>{const{colorMode:t,toggleColorMode:r}=dp(),n=ca({base:!0,lg:!1}),i=oe("white","gray.800"),o=oe("gray.800","whiteAlpha.900"),s=oe("gray.600","gray.400"),a=oe("gray.200","gray.700"),c=oe("gray.50","gray.900");oe("blue.600","blue.400"),oe("yellow.400","yellow.500");const u=oe("gray.100","gray.700"),[h,p]=q.useState(!1),x=()=>p(!h),{isOpen:b,onOpen:m,onClose:_}=Br();return Br(),e.jsxs(Ce,{direction:{base:"column",lg:"row"},width:"100%",bg:c,minH:"100vh",children:[!n&&e.jsxs(ce,{bg:i,borderRight:"1px solid",borderColor:a,width:h?"70px":"240px",flexShrink:0,display:{base:"none",lg:"block"},position:"fixed",left:0,top:0,transition:"width 0.3s ease",height:"100vh",overflowY:"auto",overflowX:"hidden",zIndex:20,px:h?2:4,py:4,css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px"},"&::-webkit-scrollbar-thumb":{background:"gray.300",borderRadius:"24px"}},children:[e.jsx(Bt,{icon:h?e.jsx(mo,{}):e.jsx(us,{}),position:"absolute",right:"-12px",top:"20px",size:"sm",borderRadius:"full",bg:i,borderWidth:"1px",borderColor:a,zIndex:30,onClick:x,"aria-label":h?"Expand sidebar":"Collapse sidebar",boxShadow:"sm"}),e.jsx(Df,{textColor:o,mutedText:s,highlightBg:u,isCollapsed:h})]}),e.jsxs(ce,{flexGrow:1,overflowY:"auto",ml:{base:0,lg:h?"70px":"240px"},transition:"margin-left 0.3s ease",children:[e.jsxs(Ce,{direction:{base:"column",md:"row"},align:{base:"flex-start",md:"center"},justify:"space-between",mb:4,gap:4,px:6,py:4,bg:i,borderBottom:"1px solid",borderColor:a,children:[e.jsx(Ce,{align:"center",gap:2,children:n&&e.jsx(Bt,{icon:e.jsx(Xg,{}),variant:"ghost",onClick:m,"aria-label":"Open menu",mr:2})}),e.jsx(jy,{isMobile:n,onLeftOpen:m,colorMode:t,toggleColorMode:r})]}),e.jsx(ce,{p:{base:4,md:6},children:e.jsx(up,{})})]}),e.jsxs(ng,{isOpen:b,placement:"left",onClose:_,children:[e.jsx(Fr,{}),e.jsxs(ig,{bg:i,children:[e.jsx(on,{}),e.jsx(Ir,{p:4,pt:12,children:e.jsx(Df,{textColor:o,mutedText:s,highlightBg:u,isCollapsed:!1,onClose:_})})]})]})]})},Cy=()=>{const t=oe("gray.50","gray.800"),r=oe("gray.600","gray.300"),n=oe("brand.navy","white");return e.jsx(ce,{bg:t,minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:e.jsxs(et,{spacing:8,textAlign:"center",maxW:"xl",children:[e.jsx(ut,{fontSize:{base:"6xl",md:"8xl"},fontWeight:"bold",color:n,children:"404"}),e.jsx(Ar,{src:ji,alt:"Page not found",boxSize:{base:"400px",md:"300px"}}),e.jsx(ut,{size:"xl",color:n,children:"Page Not Found"}),e.jsx(G,{fontSize:"lg",color:r,children:"The page you're looking for doesn't exist or has been moved."}),e.jsx(Te,{as:Ji,to:"/dashboard",variant:"primary",size:"lg",mt:4,children:"Return to Dashboard"})]})})};function _y(t){return St({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm32 160a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM96 352a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM64 416c0-17.7 14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32zM192 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zm64-64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM288 448a32 32 0 1 1 0-64 32 32 0 1 1 0 64z"},child:[]}]})(t)}const Bf=[{id:1,name:"Partial Exam 1",weight:15,grade:""},{id:2,name:"Partial Exam 2",weight:15,grade:""},{id:3,name:"Quizzes (Avg)",weight:15,grade:""},{id:4,name:"Assignment",weight:10,grade:""},{id:5,name:"Attendance",weight:5,grade:""},{id:6,name:"Participation",weight:5,grade:""},{id:7,name:"Final Exam",weight:35,grade:""}],ky=t=>t>=95?"A+":t>=90?"A":t>=85?"B+":t>=80?"B":t>=75?"C+":t>=70?"C":t>=65?"D+":t>=60?"D":"F",Ay=()=>{const t=qr(),[r,n]=q.useState(Bf),[i,o]=q.useState(70),[s,a]=q.useState(null),[c,u]=q.useState(7),[h,p]=q.useState(7),x=q.useMemo(()=>r.reduce((N,D)=>N+Number(D.weight||0),0),[r]),b=(N,D,B)=>{let V=B;if((D==="weight"||D==="grade")&&B!==""){const R=Number(B);if(isNaN(R)||R<0||R>100)return;V=R}n(r.map(R=>R.id===N?{...R,[D]:V}:R)),a(null)},m=()=>{n([...r,{id:c,name:"",weight:0,grade:""}]),u(c+1)},_=N=>{N===h&&p(null),n(r.filter(D=>D.id!==N)),a(null)},w=()=>{if(x!==100){t({title:"Invalid Weights",description:`Total weight must be 100%, but it is currently ${x}%.`,status:"error",duration:5e3,isClosable:!0});return}const N=h?r.find(B=>B.id===h):null;if(N&&N.grade!==""){let B=0;r.forEach(R=>{const P=parseFloat(R.grade),j=parseFloat(R.weight);!isNaN(P)&&!isNaN(j)&&(B+=P*j/100)});const V=ky(B);a({overall:B.toFixed(2),passed:B>=i,letterGrade:V})}else{if(!N){t({title:"Final Exam Not Set",description:"Please select which component is the final exam to calculate the required score.",status:"info",duration:5e3,isClosable:!0});return}let B=0;r.forEach(P=>{if(P.id!==h){const j=parseFloat(P.grade),A=parseFloat(P.weight);!isNaN(j)&&!isNaN(A)&&(B+=j*A/100)}});const V=parseFloat(N.weight);if(isNaN(V)||V===0){t({title:"Invalid Final Weight",description:"The final exam must have a weight greater than 0.",status:"error",duration:5e3,isClosable:!0});return}const R=(i-B)*100/V;a({currentTotal:B.toFixed(2),neededFinal:R})}},O=()=>{n(Bf),o(70),a(null)},k=oe("white","gray.800"),T=oe("gray.800","whiteAlpha.900"),H=oe("gray.600","gray.400"),Z=oe("gray.200","gray.700");return e.jsxs(ce,{children:[e.jsx(hr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(Zt,{mb:6,p:6,borderRadius:"xl",borderWidth:"1px",borderColor:Z,bg:k,children:e.jsxs(Ce,{alignItems:"center",gap:4,children:[e.jsx(ct,{as:zs,w:10,h:10,color:oe("blue.600","blue.400")}),e.jsxs(ce,{children:[e.jsx(ut,{size:"lg",color:T,children:"Dynamic Grade Calculator"}),e.jsx(G,{color:H,children:"Add, remove, and edit grade components to match any course structure."})]})]})})}),e.jsx(Zt,{bg:k,borderWidth:"1px",borderColor:Z,borderRadius:"lg",children:e.jsx(un,{children:e.jsxs(et,{spacing:6,align:"stretch",children:[e.jsxs(et,{spacing:4,align:"stretch",p:4,borderWidth:"1px",borderRadius:"md",children:[e.jsx(ut,{size:"sm",children:"Settings"}),e.jsxs(ft,{children:[e.jsx(pt,{children:"Passing Grade (%)"}),e.jsx(Wd,{value:i,onChange:N=>o(Number(N)),min:0,max:100,children:e.jsx(Ud,{})})]}),e.jsxs(ce,{children:[e.jsxs(G,{fontWeight:"bold",children:["Total Weight: ",x,"%"]}),x!==100&&e.jsxs(so,{status:"warning",mt:2,borderRadius:"md",children:[e.jsx(oo,{}),"Must equal 100%."]})]})]}),e.jsx(et,{spacing:4,align:"stretch",children:r.map((N,D)=>e.jsx(hr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:D*.05},children:e.jsxs(at,{spacing:3,p:3,borderWidth:"1px",borderRadius:"md",bg:oe("gray.50","gray.700"),children:[e.jsx(wi,{label:"Set as Final Exam",placement:"top",children:e.jsx(Bt,{"aria-label":"Set as Final Exam",icon:e.jsx(Yu,{}),isRound:!0,variant:h===N.id?"solid":"ghost",colorScheme:h===N.id?"yellow":"gray",onClick:()=>p(N.id)})}),e.jsx(Rt,{placeholder:"Component Name (e.g., Midterm)",value:N.name,onChange:B=>b(N.id,"name",B.target.value),fontWeight:"bold"}),e.jsx(Wd,{value:N.weight,onChange:B=>b(N.id,"weight",B),min:0,max:100,w:"120px",children:e.jsx(Ud,{placeholder:"Weight %"})}),e.jsx(Wd,{value:N.grade,onChange:B=>b(N.id,"grade",B),min:0,max:100,w:"120px",children:e.jsx(Ud,{placeholder:"/100"})}),e.jsx(Bt,{"aria-label":"Delete component",icon:e.jsx(ul,{}),colorScheme:"red",variant:"ghost",onClick:()=>_(N.id)})]})},N.id))}),e.jsx(at,{spacing:4,mt:4,w:"full",children:e.jsx(Te,{leftIcon:e.jsx(Qn,{}),onClick:m,w:"full",children:"Add Component"})}),e.jsxs(at,{spacing:4,mt:2,w:"full",children:[e.jsx(Te,{leftIcon:e.jsx(_y,{}),colorScheme:"blue",onClick:w,w:"full",children:"Calculate"}),e.jsx(Te,{onClick:O,w:"full",children:"Reset"})]})]})})}),(()=>{if(!s)return null;let N="info",D="";s.overall?N=s.passed?"success":"error":s.neededFinal&&(s.neededFinal<=0?(N="success",D="You have already secured a passing grade! 🎉"):s.neededFinal>100?(N="error",D="It is impossible to reach the passing grade."):(N="info",D="This is the minimum score required on the final to pass."));const V={success:{bg:oe("green.50","green.900"),borderColor:oe("green.200","green.700")},error:{bg:oe("red.50","red.900"),borderColor:oe("red.200","red.700")},info:{bg:oe("blue.50","blue.900"),borderColor:oe("blue.200","blue.700")}}[N];return e.jsx(hr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(Zt,{mt:6,bg:V.bg,borderWidth:"1px",borderColor:V.borderColor,borderRadius:"lg",p:6,children:e.jsxs(et,{spacing:2,textAlign:"center",children:[s.overall&&e.jsxs(e.Fragment,{children:[e.jsx(ut,{size:"lg",children:"Result"}),e.jsxs(G,{fontSize:"4xl",fontWeight:"bold",children:[s.overall," ",e.jsxs(G,{as:"span",fontSize:"3xl",fontWeight:"medium",children:["(",s.letterGrade,")"]})]}),e.jsx(G,{fontSize:"md",color:H,mt:-2,children:"Overall Grade"}),e.jsx(sn,{my:3}),e.jsx(G,{fontSize:"lg",fontWeight:"semibold",children:s.passed?"Congratulations, you passed!":"You did not pass."})]}),s.currentTotal!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(ut,{size:"lg",children:"Calculation"}),e.jsxs(G,{fontSize:"lg",children:["Your current grade (without the final) is ",e.jsxs("strong",{children:[s.currentTotal,"%"]}),"."]}),e.jsx(sn,{my:3}),e.jsx(G,{fontSize:"lg",children:"To pass, you need at least:"}),e.jsxs(G,{fontSize:"4xl",fontWeight:"bold",children:[s.neededFinal.toFixed(2),"%"]}),e.jsx(G,{fontSize:"md",color:H,mt:-2,children:"on the Final Exam"}),e.jsx(G,{fontSize:"sm",mt:2,children:D})]})]})})})})()]})},Ly=({roles:t=[]})=>{const{user:r,loading:n}=hi();return n?e.jsx(vn,{minH:"80vh",children:e.jsx(nn,{size:"xl",color:"blue.500"})}):r?t.length>0&&(!r.roles||!t.some(i=>r.roles.includes(i)))?e.jsx(Ac,{to:"/unauthorized",replace:!0}):e.jsx(up,{}):e.jsx(Ac,{to:"/login",replace:!0})},Py=({lastUpdated:t,likes:r=0,commentsCount:n=0,courseName:i="",courseCode:o=""})=>{const s=oe("white","gray.800"),a=oe("gray.200","gray.700"),c=oe("gray.600","gray.400"),u=t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-",h=!!(i||o);return e.jsxs(Zt,{mb:6,bg:s,borderColor:a,borderWidth:"1px",boxShadow:"sm",children:[e.jsx(fo,{pb:2,children:e.jsx(ut,{size:"md",children:"Quick Info"})}),e.jsx(un,{pt:0,children:e.jsxs(et,{spacing:4,align:"stretch",children:[h&&e.jsxs(e.Fragment,{children:[e.jsxs(ce,{children:[e.jsx(G,{fontSize:"sm",color:c,mb:1,children:"Course"}),e.jsx(at,{children:e.jsxs(G,{fontWeight:"medium",children:[o&&e.jsxs(e.Fragment,{children:[o," • "]}),i]})})]}),e.jsx(sn,{})]}),e.jsxs(ce,{children:[e.jsx(G,{fontSize:"sm",color:c,mb:1,children:"Last Updated"}),e.jsx(at,{children:e.jsx(G,{fontWeight:"medium",children:u})})]}),e.jsx(sn,{}),e.jsxs(ce,{children:[e.jsx(G,{fontSize:"sm",color:c,mb:1,children:"Upvotes"}),e.jsxs(at,{children:[e.jsx(ct,{as:Nc,color:c,boxSize:4}),e.jsx(G,{fontWeight:"medium",children:r})]})]}),e.jsx(sn,{}),e.jsxs(ce,{children:[e.jsx(G,{fontSize:"sm",color:c,mb:1,children:"Comments"}),e.jsxs(at,{children:[e.jsx(ct,{as:Kg,color:c,boxSize:4}),e.jsx(G,{fontWeight:"medium",children:n})]})]})]})})]})};var Fn=Uint8Array,ci=Uint16Array,ih=Int32Array,nd=new Fn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),id=new Fn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zu=new Fn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O0=function(t,r){for(var n=new ci(31),i=0;i<31;++i)n[i]=r+=1<<t[i-1];for(var o=new ih(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)o[s]=s-n[i]<<5|i;return{b:n,r:o}},R0=O0(nd,2),E0=R0.b,Fu=R0.r;E0[28]=258,Fu[258]=28;var T0=O0(id,0),Ny=T0.b,qf=T0.r,Iu=new ci(32768);for(var Dr=0;Dr<32768;++Dr){var Os=(Dr&43690)>>1|(Dr&21845)<<1;Os=(Os&52428)>>2|(Os&13107)<<2,Os=(Os&61680)>>4|(Os&3855)<<4,Iu[Dr]=((Os&65280)>>8|(Os&255)<<8)>>1}var Yi=function(t,r,n){for(var i=t.length,o=0,s=new ci(r);o<i;++o)t[o]&&++s[t[o]-1];var a=new ci(r);for(o=1;o<r;++o)a[o]=a[o-1]+s[o-1]<<1;var c;if(n){c=new ci(1<<r);var u=15-r;for(o=0;o<i;++o)if(t[o])for(var h=o<<4|t[o],p=r-t[o],x=a[t[o]-1]++<<p,b=x|(1<<p)-1;x<=b;++x)c[Iu[x]>>u]=h}else for(c=new ci(i),o=0;o<i;++o)t[o]&&(c[o]=Iu[a[t[o]-1]++]>>15-t[o]);return c},Is=new Fn(288);for(var Dr=0;Dr<144;++Dr)Is[Dr]=8;for(var Dr=144;Dr<256;++Dr)Is[Dr]=9;for(var Dr=256;Dr<280;++Dr)Is[Dr]=7;for(var Dr=280;Dr<288;++Dr)Is[Dr]=8;var ol=new Fn(32);for(var Dr=0;Dr<32;++Dr)ol[Dr]=5;var Oy=Yi(Is,9,0),Ry=Yi(Is,9,1),Ey=Yi(ol,5,0),Ty=Yi(ol,5,1),hu=function(t){for(var r=t[0],n=1;n<t.length;++n)t[n]>r&&(r=t[n]);return r},Ni=function(t,r,n){var i=r/8|0;return(t[i]|t[i+1]<<8)>>(r&7)&n},fu=function(t,r){var n=r/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(r&7)},sh=function(t){return(t+7)/8|0},z0=function(t,r,n){return(n==null||n>t.length)&&(n=t.length),new Fn(t.subarray(r,n))},zy=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ri=function(t,r,n){var i=new Error(r||zy[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,Ri),!n)throw i;return i},Fy=function(t,r,n,i){var o=t.length,s=0;if(!o||r.f&&!r.l)return n||new Fn(0);var a=!n,c=a||r.i!=2,u=r.i;a&&(n=new Fn(o*3));var h=function(fe){var Fe=n.length;if(fe>Fe){var Oe=new Fn(Math.max(Fe*2,fe));Oe.set(n),n=Oe}},p=r.f||0,x=r.p||0,b=r.b||0,m=r.l,_=r.d,w=r.m,O=r.n,k=o*8;do{if(!m){p=Ni(t,x,1);var T=Ni(t,x+1,3);if(x+=3,T)if(T==1)m=Ry,_=Ty,w=9,O=5;else if(T==2){var D=Ni(t,x,31)+257,B=Ni(t,x+10,15)+4,V=D+Ni(t,x+5,31)+1;x+=14;for(var R=new Fn(V),P=new Fn(19),j=0;j<B;++j)P[zu[j]]=Ni(t,x+j*3,7);x+=B*3;for(var A=hu(P),E=(1<<A)-1,z=Yi(P,A,1),j=0;j<V;){var se=z[Ni(t,x,E)];x+=se&15;var H=se>>4;if(H<16)R[j++]=H;else{var re=0,v=0;for(H==16?(v=3+Ni(t,x,3),x+=2,re=R[j-1]):H==17?(v=3+Ni(t,x,7),x+=3):H==18&&(v=11+Ni(t,x,127),x+=7);v--;)R[j++]=re}}var ne=R.subarray(0,D),M=R.subarray(D);w=hu(ne),O=hu(M),m=Yi(ne,w,1),_=Yi(M,O,1)}else Ri(1);else{var H=sh(x)+4,Z=t[H-4]|t[H-3]<<8,N=H+Z;if(N>o){u&&Ri(0);break}c&&h(b+Z),n.set(t.subarray(H,N),b),r.b=b+=Z,r.p=x=N*8,r.f=p;continue}if(x>k){u&&Ri(0);break}}c&&h(b+131072);for(var y=(1<<w)-1,Y=(1<<O)-1,C=x;;C=x){var re=m[fu(t,x)&y],W=re>>4;if(x+=re&15,x>k){u&&Ri(0);break}if(re||Ri(2),W<256)n[b++]=W;else if(W==256){C=x,m=null;break}else{var L=W-254;if(W>264){var j=W-257,$=nd[j];L=Ni(t,x,(1<<$)-1)+E0[j],x+=$}var Q=_[fu(t,x)&Y],ie=Q>>4;Q||Ri(3),x+=Q&15;var M=Ny[ie];if(ie>3){var $=id[ie];M+=fu(t,x)&(1<<$)-1,x+=$}if(x>k){u&&Ri(0);break}c&&h(b+131072);var de=b+L;if(b<M){var le=s-M,be=Math.min(M,de);for(le+b<0&&Ri(3);b<be;++b)n[b]=i[le+b]}for(;b<de;++b)n[b]=n[b-M]}}r.l=m,r.p=C,r.b=b,r.f=p,m&&(p=1,r.m=w,r.d=_,r.n=O)}while(!p);return b!=n.length&&a?z0(n,0,b):n.subarray(0,b)},as=function(t,r,n){n<<=r&7;var i=r/8|0;t[i]|=n,t[i+1]|=n>>8},Za=function(t,r,n){n<<=r&7;var i=r/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},pu=function(t,r){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var o=n.length,s=n.slice();if(!o)return{t:I0,l:0};if(o==1){var a=new Fn(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(N,D){return N.f-D.f}),n.push({s:-1,f:25001});var c=n[0],u=n[1],h=0,p=1,x=2;for(n[0]={s:-1,f:c.f+u.f,l:c,r:u};p!=o-1;)c=n[n[h].f<n[x].f?h++:x++],u=n[h!=p&&n[h].f<n[x].f?h++:x++],n[p++]={s:-1,f:c.f+u.f,l:c,r:u};for(var b=s[0].s,i=1;i<o;++i)s[i].s>b&&(b=s[i].s);var m=new ci(b+1),_=Mu(n[p-1],m,0);if(_>r){var i=0,w=0,O=_-r,k=1<<O;for(s.sort(function(D,B){return m[B.s]-m[D.s]||D.f-B.f});i<o;++i){var T=s[i].s;if(m[T]>r)w+=k-(1<<_-m[T]),m[T]=r;else break}for(w>>=O;w>0;){var H=s[i].s;m[H]<r?w-=1<<r-m[H]++-1:++i}for(;i>=0&&w;--i){var Z=s[i].s;m[Z]==r&&(--m[Z],++w)}_=r}return{t:new Fn(m),l:_}},Mu=function(t,r,n){return t.s==-1?Math.max(Mu(t.l,r,n+1),Mu(t.r,r,n+1)):r[t.s]=n},Wf=function(t){for(var r=t.length;r&&!t[--r];);for(var n=new ci(++r),i=0,o=t[0],s=1,a=function(u){n[i++]=u},c=1;c<=r;++c)if(t[c]==o&&c!=r)++s;else{if(!o&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(o),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(o);s=1,o=t[c]}return{c:n.subarray(0,i),n:r}},el=function(t,r){for(var n=0,i=0;i<r.length;++i)n+=t[i]*r[i];return n},F0=function(t,r,n){var i=n.length,o=sh(r+2);t[o]=i&255,t[o+1]=i>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var s=0;s<i;++s)t[o+s+4]=n[s];return(o+4+i)*8},Uf=function(t,r,n,i,o,s,a,c,u,h,p){as(r,p++,n),++o[256];for(var x=pu(o,15),b=x.t,m=x.l,_=pu(s,15),w=_.t,O=_.l,k=Wf(b),T=k.c,H=k.n,Z=Wf(w),N=Z.c,D=Z.n,B=new ci(19),V=0;V<T.length;++V)++B[T[V]&31];for(var V=0;V<N.length;++V)++B[N[V]&31];for(var R=pu(B,7),P=R.t,j=R.l,A=19;A>4&&!P[zu[A-1]];--A);var E=h+5<<3,z=el(o,Is)+el(s,ol)+a,se=el(o,b)+el(s,w)+a+14+3*A+el(B,P)+2*B[16]+3*B[17]+7*B[18];if(u>=0&&E<=z&&E<=se)return F0(r,p,t.subarray(u,u+h));var re,v,ne,M;if(as(r,p,1+(se<z)),p+=2,se<z){re=Yi(b,m,0),v=b,ne=Yi(w,O,0),M=w;var y=Yi(P,j,0);as(r,p,H-257),as(r,p+5,D-1),as(r,p+10,A-4),p+=14;for(var V=0;V<A;++V)as(r,p+3*V,P[zu[V]]);p+=3*A;for(var Y=[T,N],C=0;C<2;++C)for(var W=Y[C],V=0;V<W.length;++V){var L=W[V]&31;as(r,p,y[L]),p+=P[L],L>15&&(as(r,p,W[V]>>5&127),p+=W[V]>>12)}}else re=Oy,v=Is,ne=Ey,M=ol;for(var V=0;V<c;++V){var $=i[V];if($>255){var L=$>>18&31;Za(r,p,re[L+257]),p+=v[L+257],L>7&&(as(r,p,$>>23&31),p+=nd[L]);var Q=$&31;Za(r,p,ne[Q]),p+=M[Q],Q>3&&(Za(r,p,$>>5&8191),p+=id[Q])}else Za(r,p,re[$]),p+=v[$]}return Za(r,p,re[256]),p+v[256]},Iy=new ih([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),I0=new Fn(0),My=function(t,r,n,i,o,s){var a=s.z||t.length,c=new Fn(i+a+5*(1+Math.ceil(a/7e3))+o),u=c.subarray(i,c.length-o),h=s.l,p=(s.r||0)&7;if(r){p&&(u[0]=s.r>>3);for(var x=Iy[r-1],b=x>>13,m=x&8191,_=(1<<n)-1,w=s.p||new ci(32768),O=s.h||new ci(_+1),k=Math.ceil(n/3),T=2*k,H=function(Ue){return(t[Ue]^t[Ue+1]<<k^t[Ue+2]<<T)&_},Z=new ih(25e3),N=new ci(288),D=new ci(32),B=0,V=0,R=s.i||0,P=0,j=s.w||0,A=0;R+2<a;++R){var E=H(R),z=R&32767,se=O[E];if(w[z]=se,O[E]=z,j<=R){var re=a-R;if((B>7e3||P>24576)&&(re>423||!h)){p=Uf(t,u,0,Z,N,D,V,P,A,R-A,p),P=B=V=0,A=R;for(var v=0;v<286;++v)N[v]=0;for(var v=0;v<30;++v)D[v]=0}var ne=2,M=0,y=m,Y=z-se&32767;if(re>2&&E==H(R-Y))for(var C=Math.min(b,re)-1,W=Math.min(32767,R),L=Math.min(258,re);Y<=W&&--y&&z!=se;){if(t[R+ne]==t[R+ne-Y]){for(var $=0;$<L&&t[R+$]==t[R+$-Y];++$);if($>ne){if(ne=$,M=Y,$>C)break;for(var Q=Math.min(Y,$-2),ie=0,v=0;v<Q;++v){var de=R-Y+v&32767,le=w[de],be=de-le&32767;be>ie&&(ie=be,se=de)}}}z=se,se=w[z],Y+=z-se&32767}if(M){Z[P++]=268435456|Fu[ne]<<18|qf[M];var fe=Fu[ne]&31,Fe=qf[M]&31;V+=nd[fe]+id[Fe],++N[257+fe],++D[Fe],j=R+ne,++B}else Z[P++]=t[R],++N[t[R]]}}for(R=Math.max(R,j);R<a;++R)Z[P++]=t[R],++N[t[R]];p=Uf(t,u,h,Z,N,D,V,P,A,R-A,p),h||(s.r=p&7|u[p/8|0]<<3,p-=7,s.h=O,s.p=w,s.i=R,s.w=j)}else{for(var R=s.w||0;R<a+h;R+=65535){var Oe=R+65535;Oe>=a&&(u[p/8|0]=h,Oe=a),p=F0(u,p+1,t.subarray(R,Oe))}s.i=a}return z0(c,0,i+sh(p)+o)},M0=function(){var t=1,r=0;return{p:function(n){for(var i=t,o=r,s=n.length|0,a=0;a!=s;){for(var c=Math.min(a+2655,s);a<c;++a)o+=i+=n[a];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}t=i,r=o},d:function(){return t%=65521,r%=65521,(t&255)<<24|(t&65280)<<8|(r&255)<<8|r>>8}}},Dy=function(t,r,n,i,o){if(!o&&(o={l:1},r.dictionary)){var s=r.dictionary.subarray(-32768),a=new Fn(s.length+t.length);a.set(s),a.set(t,s.length),t=a,o.w=s.length}return My(t,r.level==null?6:r.level,r.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+r.mem,n,i,o)},D0=function(t,r,n){for(;n;++r)t[r]=n,n>>>=8},By=function(t,r){var n=r.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(r.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,r.dictionary){var o=M0();o.p(r.dictionary),D0(t,2,o.d())}},qy=function(t,r){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ri(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ri(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Du(t,r){r||(r={});var n=M0();n.p(t);var i=Dy(t,r,r.dictionary?6:2,4);return By(i,r),D0(i,i.length-4,n.d()),i}function Wy(t,r){return Fy(t.subarray(qy(t),-4),{i:2},r,r)}var Uy=typeof TextDecoder!="undefined"&&new TextDecoder,Hy=0;try{Uy.decode(I0,{stream:!0}),Hy=1}catch{}var $t=function(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this}();function mu(){$t.console&&typeof $t.console.log=="function"&&$t.console.log.apply($t.console,arguments)}var _r={log:mu,warn:function(t){$t.console&&(typeof $t.console.warn=="function"?$t.console.warn.apply($t.console,arguments):mu.call(null,arguments))},error:function(t){$t.console&&(typeof $t.console.error=="function"?$t.console.error.apply($t.console,arguments):mu(t))}};function gu(t,r,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){Qs(i.response,r,n)},i.onerror=function(){_r.error("could not download file")},i.send()}function Hf(t){var r=new XMLHttpRequest;r.open("HEAD",t,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function dc(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var tl,Bu,Qs=$t.saveAs||((typeof window=="undefined"?"undefined":Lr(window))!=="object"||window!==$t?function(){}:typeof HTMLAnchorElement!="undefined"&&"download"in HTMLAnchorElement.prototype?function(t,r,n){var i=$t.URL||$t.webkitURL,o=document.createElement("a");r=r||t.name||"download",o.download=r,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?Hf(o.href)?gu(t,r,n):dc(o,o.target="_blank"):dc(o)):(o.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){dc(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,n){if(r=r||t.name||"download",typeof t=="string")if(Hf(t))gu(t,r,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){dc(i)})}else navigator.msSaveOrOpenBlob(function(o,s){return s===void 0?s={autoBom:!1}:Lr(s)!=="object"&&(_r.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,n),r)}:function(t,r,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return gu(t,r,n);var o=t.type==="application/octet-stream",s=/constructor/i.test($t.HTMLElement)||$t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||o&&s)&&(typeof FileReader=="undefined"?"undefined":Lr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=p:location=p,i=null},c.readAsDataURL(t)}else{var u=$t.URL||$t.webkitURL,h=u.createObjectURL(t);i?i.location=h:location.href=h,i=null,setTimeout(function(){u.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function B0(t){var r;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],i=0;i<n.length;i++){var o=n[i].re,s=n[i].process,a=o.exec(t);a&&(r=s(a),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),h=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),"#"+c+u+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xu(t,r){var n=t[0],i=t[1],o=t[2],s=t[3];n=On(n,i,o,s,r[0],7,-680876936),s=On(s,n,i,o,r[1],12,-389564586),o=On(o,s,n,i,r[2],17,606105819),i=On(i,o,s,n,r[3],22,-1044525330),n=On(n,i,o,s,r[4],7,-176418897),s=On(s,n,i,o,r[5],12,1200080426),o=On(o,s,n,i,r[6],17,-1473231341),i=On(i,o,s,n,r[7],22,-45705983),n=On(n,i,o,s,r[8],7,1770035416),s=On(s,n,i,o,r[9],12,-1958414417),o=On(o,s,n,i,r[10],17,-42063),i=On(i,o,s,n,r[11],22,-1990404162),n=On(n,i,o,s,r[12],7,1804603682),s=On(s,n,i,o,r[13],12,-40341101),o=On(o,s,n,i,r[14],17,-1502002290),n=Rn(n,i=On(i,o,s,n,r[15],22,1236535329),o,s,r[1],5,-165796510),s=Rn(s,n,i,o,r[6],9,-1069501632),o=Rn(o,s,n,i,r[11],14,643717713),i=Rn(i,o,s,n,r[0],20,-373897302),n=Rn(n,i,o,s,r[5],5,-701558691),s=Rn(s,n,i,o,r[10],9,38016083),o=Rn(o,s,n,i,r[15],14,-660478335),i=Rn(i,o,s,n,r[4],20,-405537848),n=Rn(n,i,o,s,r[9],5,568446438),s=Rn(s,n,i,o,r[14],9,-1019803690),o=Rn(o,s,n,i,r[3],14,-187363961),i=Rn(i,o,s,n,r[8],20,1163531501),n=Rn(n,i,o,s,r[13],5,-1444681467),s=Rn(s,n,i,o,r[2],9,-51403784),o=Rn(o,s,n,i,r[7],14,1735328473),n=En(n,i=Rn(i,o,s,n,r[12],20,-1926607734),o,s,r[5],4,-378558),s=En(s,n,i,o,r[8],11,-2022574463),o=En(o,s,n,i,r[11],16,1839030562),i=En(i,o,s,n,r[14],23,-35309556),n=En(n,i,o,s,r[1],4,-1530992060),s=En(s,n,i,o,r[4],11,1272893353),o=En(o,s,n,i,r[7],16,-155497632),i=En(i,o,s,n,r[10],23,-1094730640),n=En(n,i,o,s,r[13],4,681279174),s=En(s,n,i,o,r[0],11,-358537222),o=En(o,s,n,i,r[3],16,-722521979),i=En(i,o,s,n,r[6],23,76029189),n=En(n,i,o,s,r[9],4,-640364487),s=En(s,n,i,o,r[12],11,-421815835),o=En(o,s,n,i,r[15],16,530742520),n=Tn(n,i=En(i,o,s,n,r[2],23,-995338651),o,s,r[0],6,-198630844),s=Tn(s,n,i,o,r[7],10,1126891415),o=Tn(o,s,n,i,r[14],15,-1416354905),i=Tn(i,o,s,n,r[5],21,-57434055),n=Tn(n,i,o,s,r[12],6,1700485571),s=Tn(s,n,i,o,r[3],10,-1894986606),o=Tn(o,s,n,i,r[10],15,-1051523),i=Tn(i,o,s,n,r[1],21,-2054922799),n=Tn(n,i,o,s,r[8],6,1873313359),s=Tn(s,n,i,o,r[15],10,-30611744),o=Tn(o,s,n,i,r[6],15,-1560198380),i=Tn(i,o,s,n,r[13],21,1309151649),n=Tn(n,i,o,s,r[4],6,-145523070),s=Tn(s,n,i,o,r[11],10,-1120210379),o=Tn(o,s,n,i,r[2],15,718787259),i=Tn(i,o,s,n,r[9],21,-343485551),t[0]=Ts(n,t[0]),t[1]=Ts(i,t[1]),t[2]=Ts(o,t[2]),t[3]=Ts(s,t[3])}function sd(t,r,n,i,o,s){return r=Ts(Ts(r,t),Ts(i,s)),Ts(r<<o|r>>>32-o,n)}function On(t,r,n,i,o,s,a){return sd(r&n|~r&i,t,r,o,s,a)}function Rn(t,r,n,i,o,s,a){return sd(r&i|n&~i,t,r,o,s,a)}function En(t,r,n,i,o,s,a){return sd(r^n^i,t,r,o,s,a)}function Tn(t,r,n,i,o,s,a){return sd(n^(r|~i),t,r,o,s,a)}function q0(t){var r,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=t.length;r+=64)xu(i,$y(t.substring(r-64,r)));t=t.substring(r-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)o[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(xu(i,o),r=0;r<16;r++)o[r]=0;return o[14]=8*n,xu(i,o),i}function $y(t){var r,n=[];for(r=0;r<64;r+=4)n[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return n}tl=$t.atob.bind($t),Bu=$t.btoa.bind($t);var $f="0123456789abcdef".split("");function Gy(t){for(var r="",n=0;n<4;n++)r+=$f[t>>8*n+4&15]+$f[t>>8*n&15];return r}function Vy(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function qu(t){return q0(t).map(Vy).join("")}var Yy=function(t){for(var r=0;r<t.length;r++)t[r]=Gy(t[r]);return t.join("")}(q0("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ts(t,r){if(Yy){var n=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(n>>16)<<16|65535&n}return t+r&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Wu(t,r){var n,i,o,s;if(t!==n){for(var a=(o=t,s=1+(256/t.length>>0),new Array(s+1).join(o)),c=[],u=0;u<256;u++)c[u]=u;var h=0;for(u=0;u<256;u++){var p=c[u];h=(h+p+a.charCodeAt(u))%256,c[u]=c[h],c[h]=p}n=t,i=c}else c=i;var x=r.length,b=0,m=0,_="";for(u=0;u<x;u++)m=(m+(p=c[b=(b+1)%256]))%256,c[b]=c[m],c[m]=p,a=c[(c[b]+c[m])%256],_+=String.fromCharCode(r.charCodeAt(u)^a);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Gf={print:4,modify:8,copy:16,"annot-forms":32};function Jo(t,r,n,i){this.v=1,this.r=2;var o=192;t.forEach(function(c){if(Gf.perm!==void 0)throw new Error("Invalid permission: "+c);o+=Gf[c]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(r+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^o)),this.encryptionKey=qu(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Wu(this.encryptionKey,this.padding)}function Xo(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var r="",n=t.length,i=0;i<n;i++){var o=t.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?r+="#"+("0"+o.toString(16)).slice(-2):r+=t[i]}return r}function Vf(t){if(Lr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(n,i,o){if(o=o||!1,typeof n!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(n)||(r[n]={});var s=Math.random().toString(35);return r[n][s]=[i,!!o],s},this.unsubscribe=function(n){for(var i in r)if(r[i][n])return delete r[i][n],Object.keys(r[i]).length===0&&delete r[i],!0;return!1},this.publish=function(n){if(r.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var s in r[n]){var a=r[n][s];try{a[0].apply(t,i)}catch(c){$t.console&&_r.error("jsPDF PubSub Error",c.message,c)}a[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function Mc(t){if(!(this instanceof Mc))return new Mc(t);var r="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&r.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function W0(t,r){this.gState=t,this.matrix=r,this.id="",this.objectNumber=-1}function eo(t,r,n,i,o){if(!(this instanceof eo))return new eo(t,r,n,i,o);this.type=t==="axial"?2:3,this.coords=r,this.colors=n,W0.call(this,i,o)}function Qo(t,r,n,i,o){if(!(this instanceof Qo))return new Qo(t,r,n,i,o);this.boundingBox=t,this.xStep=r,this.yStep=n,this.stream="",this.cloneIndex=0,W0.call(this,i,o)}function Wt(t){var r,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],s=arguments[3],a=[],c=1,u=16,h="S",p=null;Lr(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,o=t.format||o,s=t.compress||t.compressPdf||s,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(r=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),h=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),i=i||"mm",n=(""+(n||"P")).toLowerCase();var x=t.putOnlyUsedFonts||!1,b={},m={internal:{},__private__:{}};m.__private__.PubSub=Vf;var _="1.3",w=m.__private__.getPdfVersion=function(){return _};m.__private__.setPdfVersion=function(f){_=f};var O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return O};var k=m.__private__.getPageFormat=function(f){return O[f]};o=o||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},H=T.COMPAT;function Z(){this.saveGraphicsState(),ee(new Je(ze,0,0,-ze,0,xs()*ze).toString()+" cm"),this.setFontSize(this.getFontSize()/ze),h="n",H=T.ADVANCED}function N(){this.restoreGraphicsState(),h="S",H=T.COMPAT}var D=m.__private__.combineFontStyleAndFontWeight=function(f,I){if(f=="bold"&&I=="normal"||f=="bold"&&I==400||f=="normal"&&I=="italic"||f=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(f=I==400||I==="normal"?f==="italic"?"italic":"normal":I!=700&&I!=="bold"||f!=="normal"?(I==700?"bold":I)+""+f:"bold"),f};m.advancedAPI=function(f){var I=H===T.COMPAT;return I&&Z.call(this),typeof f!="function"||(f(this),I&&N.call(this)),this},m.compatAPI=function(f){var I=H===T.ADVANCED;return I&&N.call(this),typeof f!="function"||(f(this),I&&Z.call(this)),this},m.isAdvancedAPI=function(){return H===T.ADVANCED};var B,V=function(f){if(H!==T.ADVANCED)throw new Error(f+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(f,I){var ae=r||I;if(isNaN(f)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return f.toFixed(ae).replace(/0+$/,"")};B=m.hpf=m.__private__.hpf=typeof u=="number"?function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.hpf");return R(f,u)}:u==="smart"?function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.hpf");return R(f,f>-1&&f<1?16:5)}:function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.hpf");return R(f,16)};var P=m.f2=m.__private__.f2=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.f2");return R(f,2)},j=m.__private__.f3=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.f3");return R(f,3)},A=m.scale=m.__private__.scale=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.scale");return H===T.COMPAT?f*ze:H===T.ADVANCED?f:void 0},E=function(f){return H===T.COMPAT?xs()-f:H===T.ADVANCED?f:void 0},z=function(f){return A(E(f))};m.__private__.setPrecision=m.setPrecision=function(f){typeof parseInt(f,10)=="number"&&(r=parseInt(f,10))};var se,re="00000000000000000000000000000000",v=m.__private__.getFileId=function(){return re},ne=m.__private__.setFileId=function(f){return re=f!==void 0&&/^[a-fA-F0-9]{32}$/.test(f)?f.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Pn=new Jo(p.userPermissions,p.userPassword,p.ownerPassword,re)),re};m.setFileId=function(f){return ne(f),this},m.getFileId=function(){return v()};var M=m.__private__.convertDateToPDFDate=function(f){var I=f.getTimezoneOffset(),ae=I<0?"+":"-",pe=Math.floor(Math.abs(I/60)),ke=Math.abs(I%60),He=[ae,L(pe),"'",L(ke),"'"].join("");return["D:",f.getFullYear(),L(f.getMonth()+1),L(f.getDate()),L(f.getHours()),L(f.getMinutes()),L(f.getSeconds()),He].join("")},y=m.__private__.convertPDFDateToDate=function(f){var I=parseInt(f.substr(2,4),10),ae=parseInt(f.substr(6,2),10)-1,pe=parseInt(f.substr(8,2),10),ke=parseInt(f.substr(10,2),10),He=parseInt(f.substr(12,2),10),st=parseInt(f.substr(14,2),10);return new Date(I,ae,pe,ke,He,st,0)},Y=m.__private__.setCreationDate=function(f){var I;if(f===void 0&&(f=new Date),f instanceof Date)I=M(f);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(f))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=f}return se=I},C=m.__private__.getCreationDate=function(f){var I=se;return f==="jsDate"&&(I=y(se)),I};m.setCreationDate=function(f){return Y(f),this},m.getCreationDate=function(f){return C(f)};var W,L=m.__private__.padd2=function(f){return("0"+parseInt(f)).slice(-2)},$=m.__private__.padd2Hex=function(f){return("00"+(f=f.toString())).substr(f.length)},Q=0,ie=[],de=[],le=0,be=[],fe=[],Fe=!1,Oe=de,Ue=function(){Q=0,le=0,de=[],ie=[],be=[],fr=Mr(),Cn=Mr()};m.__private__.setCustomOutputDestination=function(f){Fe=!0,Oe=f};var ye=function(f){Fe||(Oe=f)};m.__private__.resetCustomOutputDestination=function(){Fe=!1,Oe=de};var ee=m.__private__.out=function(f){return f=f.toString(),le+=f.length+1,Oe.push(f),Oe},_e=m.__private__.write=function(f){return ee(arguments.length===1?f.toString():Array.prototype.join.call(arguments," "))},Me=m.__private__.getArrayBuffer=function(f){for(var I=f.length,ae=new ArrayBuffer(I),pe=new Uint8Array(ae);I--;)pe[I]=f.charCodeAt(I);return ae},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Le};var ue=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(f){return ue=H===T.ADVANCED?f/ze:f,this};var Ye,Ze=m.__private__.getFontSize=m.getFontSize=function(){return H===T.COMPAT?ue:ue*ze},mt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(f){return mt=f,this},m.__private__.getR2L=m.getR2L=function(){return mt};var $e,je=m.__private__.setZoomMode=function(f){var I=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(f))Ye=f;else if(isNaN(f)){if(I.indexOf(f)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+f+'" is not recognized.');Ye=f}else Ye=parseInt(f,10)};m.__private__.getZoomMode=function(){return Ye};var ve,Pe=m.__private__.setPageMode=function(f){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(f)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+f+'" is not recognized.');$e=f};m.__private__.getPageMode=function(){return $e};var De=m.__private__.setLayoutMode=function(f){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(f)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+f+'" is not recognized.');ve=f};m.__private__.getLayoutMode=function(){return ve},m.__private__.setDisplayMode=m.setDisplayMode=function(f,I,ae){return je(f),De(I),Pe(ae),this};var Se={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(f){if(Object.keys(Se).indexOf(f)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Se[f]},m.__private__.getDocumentProperties=function(){return Se},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(f){for(var I in Se)Se.hasOwnProperty(I)&&f[I]&&(Se[I]=f[I]);return this},m.__private__.setDocumentProperty=function(f,I){if(Object.keys(Se).indexOf(f)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Se[f]=I};var Ie,ze,it,Ge,ot,Nt={},At={},ht=[],bt={},Ne={},lt={},zt={},Ae=null,We=0,nt=[],tt=new Vf(m),gt=t.hotfixes||[],Ct={},Ut={},Ve=[],Je=function f(I,ae,pe,ke,He,st){if(!(this instanceof f))return new f(I,ae,pe,ke,He,st);isNaN(I)&&(I=1),isNaN(ae)&&(ae=0),isNaN(pe)&&(pe=0),isNaN(ke)&&(ke=1),isNaN(He)&&(He=0),isNaN(st)&&(st=0),this._matrix=[I,ae,pe,ke,He,st]};Object.defineProperty(Je.prototype,"sx",{get:function(){return this._matrix[0]},set:function(f){this._matrix[0]=f}}),Object.defineProperty(Je.prototype,"shy",{get:function(){return this._matrix[1]},set:function(f){this._matrix[1]=f}}),Object.defineProperty(Je.prototype,"shx",{get:function(){return this._matrix[2]},set:function(f){this._matrix[2]=f}}),Object.defineProperty(Je.prototype,"sy",{get:function(){return this._matrix[3]},set:function(f){this._matrix[3]=f}}),Object.defineProperty(Je.prototype,"tx",{get:function(){return this._matrix[4]},set:function(f){this._matrix[4]=f}}),Object.defineProperty(Je.prototype,"ty",{get:function(){return this._matrix[5]},set:function(f){this._matrix[5]=f}}),Object.defineProperty(Je.prototype,"a",{get:function(){return this._matrix[0]},set:function(f){this._matrix[0]=f}}),Object.defineProperty(Je.prototype,"b",{get:function(){return this._matrix[1]},set:function(f){this._matrix[1]=f}}),Object.defineProperty(Je.prototype,"c",{get:function(){return this._matrix[2]},set:function(f){this._matrix[2]=f}}),Object.defineProperty(Je.prototype,"d",{get:function(){return this._matrix[3]},set:function(f){this._matrix[3]=f}}),Object.defineProperty(Je.prototype,"e",{get:function(){return this._matrix[4]},set:function(f){this._matrix[4]=f}}),Object.defineProperty(Je.prototype,"f",{get:function(){return this._matrix[5]},set:function(f){this._matrix[5]=f}}),Object.defineProperty(Je.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Je.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Je.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Je.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Je.prototype.join=function(f){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(B).join(f)},Je.prototype.multiply=function(f){var I=f.sx*this.sx+f.shy*this.shx,ae=f.sx*this.shy+f.shy*this.sy,pe=f.shx*this.sx+f.sy*this.shx,ke=f.shx*this.shy+f.sy*this.sy,He=f.tx*this.sx+f.ty*this.shx+this.tx,st=f.tx*this.shy+f.ty*this.sy+this.ty;return new Je(I,ae,pe,ke,He,st)},Je.prototype.decompose=function(){var f=this.sx,I=this.shy,ae=this.shx,pe=this.sy,ke=this.tx,He=this.ty,st=Math.sqrt(f*f+I*I),Lt=(f/=st)*ae+(I/=st)*pe;ae-=f*Lt,pe-=I*Lt;var Dt=Math.sqrt(ae*ae+pe*pe);return Lt/=Dt,f*(pe/=Dt)<I*(ae/=Dt)&&(f=-f,I=-I,Lt=-Lt,st=-st),{scale:new Je(st,0,0,Dt,0,0),translate:new Je(1,0,0,1,ke,He),rotate:new Je(f,I,-I,f,0,0),skew:new Je(1,0,Lt,1,0,0)}},Je.prototype.toString=function(f){return this.join(" ")},Je.prototype.inversed=function(){var f=this.sx,I=this.shy,ae=this.shx,pe=this.sy,ke=this.tx,He=this.ty,st=1/(f*pe-I*ae),Lt=pe*st,Dt=-I*st,Xt=-ae*st,Yt=f*st;return new Je(Lt,Dt,Xt,Yt,-Lt*ke-Xt*He,-Dt*ke-Yt*He)},Je.prototype.applyToPoint=function(f){var I=f.x*this.sx+f.y*this.shx+this.tx,ae=f.x*this.shy+f.y*this.sy+this.ty;return new Co(I,ae)},Je.prototype.applyToRectangle=function(f){var I=this.applyToPoint(f),ae=this.applyToPoint(new Co(f.x+f.w,f.y+f.h));return new _a(I.x,I.y,ae.x-I.x,ae.y-I.y)},Je.prototype.clone=function(){var f=this.sx,I=this.shy,ae=this.shx,pe=this.sy,ke=this.tx,He=this.ty;return new Je(f,I,ae,pe,ke,He)},m.Matrix=Je;var It=m.matrixMult=function(f,I){return I.multiply(f)},dt=new Je(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=dt;var jt=function(f,I){if(!Ne[f]){var ae=(I instanceof eo?"Sh":"P")+(Object.keys(bt).length+1).toString(10);I.id=ae,Ne[f]=ae,bt[ae]=I,tt.publish("addPattern",I)}};m.ShadingPattern=eo,m.TilingPattern=Qo,m.addShadingPattern=function(f,I){return V("addShadingPattern()"),jt(f,I),this},m.beginTilingPattern=function(f){V("beginTilingPattern()"),Ll(f.boundingBox[0],f.boundingBox[1],f.boundingBox[2]-f.boundingBox[0],f.boundingBox[3]-f.boundingBox[1],f.matrix)},m.endTilingPattern=function(f,I){V("endTilingPattern()"),I.stream=fe[W].join(`
`),jt(f,I),tt.publish("endTilingPattern",I),Ve.pop().restore()};var lr=m.__private__.newObject=function(){var f=Mr();return an(f,!0),f},Mr=m.__private__.newObjectDeferred=function(){return Q++,ie[Q]=function(){return le},Q},an=function(f,I){return I=typeof I=="boolean"&&I,ie[f]=le,I&&ee(f+" 0 obj"),f},Ci=m.__private__.newAdditionalObject=function(){var f={objId:Mr(),content:""};return be.push(f),f},fr=Mr(),Cn=Mr(),Ln=m.__private__.decodeColorString=function(f){var I=f.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length===5&&(I[4]==="k"||I[4]==="K")&&(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var ae=parseFloat(I[0]);I=[ae,ae,ae,"r"]}for(var pe="#",ke=0;ke<3;ke++)pe+=("0"+Math.floor(255*parseFloat(I[ke])).toString(16)).slice(-2);return pe},Hn=m.__private__.encodeColorString=function(f){var I;typeof f=="string"&&(f={ch1:f});var ae=f.ch1,pe=f.ch2,ke=f.ch3,He=f.ch4,st=f.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var Lt=new B0(ae);if(Lt.ok)ae=Lt.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Dt=parseInt(ae.substr(1),16);ae=Dt>>16&255,pe=Dt>>8&255,ke=255&Dt}if(pe===void 0||He===void 0&&ae===pe&&pe===ke)if(typeof ae=="string")I=ae+" "+st[0];else switch(f.precision){case 2:I=P(ae/255)+" "+st[0];break;case 3:default:I=j(ae/255)+" "+st[0]}else if(He===void 0||Lr(He)==="object"){if(He&&!isNaN(He.a)&&He.a===0)return I=["1.","1.","1.",st[1]].join(" ");if(typeof ae=="string")I=[ae,pe,ke,st[1]].join(" ");else switch(f.precision){case 2:I=[P(ae/255),P(pe/255),P(ke/255),st[1]].join(" ");break;default:case 3:I=[j(ae/255),j(pe/255),j(ke/255),st[1]].join(" ")}}else if(typeof ae=="string")I=[ae,pe,ke,He,st[2]].join(" ");else switch(f.precision){case 2:I=[P(ae),P(pe),P(ke),P(He),st[2]].join(" ");break;case 3:default:I=[j(ae),j(pe),j(ke),j(He),st[2]].join(" ")}return I},ni=m.__private__.getFilters=function(){return a},he=m.__private__.putStream=function(f){var I=(f=f||{}).data||"",ae=f.filters||ni(),pe=f.alreadyAppliedFilters||[],ke=f.addLength1||!1,He=I.length,st=f.objectId,Lt=function(Nn){return Nn};if(p!==null&&st===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Lt=Pn.encryptor(st,0));var Dt={};ae===!0&&(ae=["FlateEncode"]);var Xt=f.additionalKeyValues||[],Yt=(Dt=Wt.API.processDataByFilters!==void 0?Wt.API.processDataByFilters(I,ae):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(Dt.data.length!==0&&(Xt.push({key:"Length",value:Dt.data.length}),ke===!0&&Xt.push({key:"Length1",value:He})),Yt.length!=0)if(Yt.split("/").length-1==1)Xt.push({key:"Filter",value:Yt});else{Xt.push({key:"Filter",value:"["+Yt+"]"});for(var or=0;or<Xt.length;or+=1)if(Xt[or].key==="DecodeParms"){for(var Ur=[],Gr=0;Gr<Dt.reverseChain.split("/").length-1;Gr+=1)Ur.push("null");Ur.push(Xt[or].value),Xt[or].value="["+Ur.join(" ")+"]"}}ee("<<");for(var ln=0;ln<Xt.length;ln++)ee("/"+Xt[ln].key+" "+Xt[ln].value);ee(">>"),Dt.data.length!==0&&(ee("stream"),ee(Lt(Dt.data)),ee("endstream"))},kt=m.__private__.putPage=function(f){var I=f.number,ae=f.data,pe=f.objId,ke=f.contentsObjId;an(pe,!0),ee("<</Type /Page"),ee("/Parent "+f.rootDictionaryObjId+" 0 R"),ee("/Resources "+f.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(B(f.mediaBox.bottomLeftX))+" "+parseFloat(B(f.mediaBox.bottomLeftY))+" "+B(f.mediaBox.topRightX)+" "+B(f.mediaBox.topRightY)+"]"),f.cropBox!==null&&ee("/CropBox ["+B(f.cropBox.bottomLeftX)+" "+B(f.cropBox.bottomLeftY)+" "+B(f.cropBox.topRightX)+" "+B(f.cropBox.topRightY)+"]"),f.bleedBox!==null&&ee("/BleedBox ["+B(f.bleedBox.bottomLeftX)+" "+B(f.bleedBox.bottomLeftY)+" "+B(f.bleedBox.topRightX)+" "+B(f.bleedBox.topRightY)+"]"),f.trimBox!==null&&ee("/TrimBox ["+B(f.trimBox.bottomLeftX)+" "+B(f.trimBox.bottomLeftY)+" "+B(f.trimBox.topRightX)+" "+B(f.trimBox.topRightY)+"]"),f.artBox!==null&&ee("/ArtBox ["+B(f.artBox.bottomLeftX)+" "+B(f.artBox.bottomLeftY)+" "+B(f.artBox.topRightX)+" "+B(f.artBox.topRightY)+"]"),typeof f.userUnit=="number"&&f.userUnit!==1&&ee("/UserUnit "+f.userUnit),tt.publish("putPage",{objId:pe,pageContext:nt[I],pageNumber:I,page:ae}),ee("/Contents "+ke+" 0 R"),ee(">>"),ee("endobj");var He=ae.join(`
`);return H===T.ADVANCED&&(He+=`
Q`),an(ke,!0),he({data:He,filters:ni(),objectId:ke}),ee("endobj"),pe},Et=m.__private__.putPages=function(){var f,I,ae=[];for(f=1;f<=We;f++)nt[f].objId=Mr(),nt[f].contentsObjId=Mr();for(f=1;f<=We;f++)ae.push(kt({number:f,data:fe[f],objId:nt[f].objId,contentsObjId:nt[f].contentsObjId,mediaBox:nt[f].mediaBox,cropBox:nt[f].cropBox,bleedBox:nt[f].bleedBox,trimBox:nt[f].trimBox,artBox:nt[f].artBox,userUnit:nt[f].userUnit,rootDictionaryObjId:fr,resourceDictionaryObjId:Cn}));an(fr,!0),ee("<</Type /Pages");var pe="/Kids [";for(I=0;I<We;I++)pe+=ae[I]+" 0 R ";ee(pe+"]"),ee("/Count "+We),ee(">>"),ee("endobj"),tt.publish("postPutPages")},Tt=function(f){tt.publish("putFont",{font:f,out:ee,newObject:lr,putStream:he}),f.isAlreadyPutted!==!0&&(f.objectNumber=lr(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+Xo(f.postScriptName)),ee("/Subtype /Type1"),typeof f.encoding=="string"&&ee("/Encoding /"+f.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},mr=function(){for(var f in Nt)Nt.hasOwnProperty(f)&&(x===!1||x===!0&&b.hasOwnProperty(f))&&Tt(Nt[f])},tr=function(f){f.objectNumber=lr();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[B(f.x),B(f.y),B(f.x+f.width),B(f.y+f.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+f.matrix.toString()+"]"});var ae=f.pages[1].join(`
`);he({data:ae,additionalKeyValues:I,objectId:f.objectNumber}),ee("endobj")},rr=function(){for(var f in Ct)Ct.hasOwnProperty(f)&&tr(Ct[f])},Ht=function(f,I){var ae,pe=[],ke=1/(I-1);for(ae=0;ae<1;ae+=ke)pe.push(ae);if(pe.push(1),f[0].offset!=0){var He={offset:0,color:f[0].color};f.unshift(He)}if(f[f.length-1].offset!=1){var st={offset:1,color:f[f.length-1].color};f.push(st)}for(var Lt="",Dt=0,Xt=0;Xt<pe.length;Xt++){for(ae=pe[Xt];ae>f[Dt+1].offset;)Dt++;var Yt=f[Dt].offset,or=(ae-Yt)/(f[Dt+1].offset-Yt),Ur=f[Dt].color,Gr=f[Dt+1].color;Lt+=$(Math.round((1-or)*Ur[0]+or*Gr[0]).toString(16))+$(Math.round((1-or)*Ur[1]+or*Gr[1]).toString(16))+$(Math.round((1-or)*Ur[2]+or*Gr[2]).toString(16))}return Lt.trim()},vr=function(f,I){I||(I=21);var ae=lr(),pe=Ht(f.colors,I),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+I+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he({data:pe,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),ee("endobj"),f.objectNumber=lr(),ee("<< /ShadingType "+f.type),ee("/ColorSpace /DeviceRGB");var He="/Coords ["+B(parseFloat(f.coords[0]))+" "+B(parseFloat(f.coords[1]))+" ";f.type===2?He+=B(parseFloat(f.coords[2]))+" "+B(parseFloat(f.coords[3])):He+=B(parseFloat(f.coords[2]))+" "+B(parseFloat(f.coords[3]))+" "+B(parseFloat(f.coords[4]))+" "+B(parseFloat(f.coords[5])),ee(He+="]"),f.matrix&&ee("/Matrix ["+f.matrix.toString()+"]"),ee("/Function "+ae+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},Or=function(f,I){var ae=Mr(),pe=lr();I.push({resourcesOid:ae,objectOid:pe}),f.objectNumber=pe;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+f.boundingBox.map(B).join(" ")+"]"}),ke.push({key:"XStep",value:B(f.xStep)}),ke.push({key:"YStep",value:B(f.yStep)}),ke.push({key:"Resources",value:ae+" 0 R"}),f.matrix&&ke.push({key:"Matrix",value:"["+f.matrix.toString()+"]"}),he({data:f.stream,additionalKeyValues:ke,objectId:f.objectNumber}),ee("endobj")},nr=function(f){var I;for(I in bt)bt.hasOwnProperty(I)&&(bt[I]instanceof eo?vr(bt[I]):bt[I]instanceof Qo&&Or(bt[I],f))},Mt=function(f){for(var I in f.objectNumber=lr(),ee("<<"),f)switch(I){case"opacity":ee("/ca "+P(f[I]));break;case"stroke-opacity":ee("/CA "+P(f[I]))}ee(">>"),ee("endobj")},Ft=function(){var f;for(f in lt)lt.hasOwnProperty(f)&&Mt(lt[f])},sr=function(){for(var f in ee("/XObject <<"),Ct)Ct.hasOwnProperty(f)&&Ct[f].objectNumber>=0&&ee("/"+f+" "+Ct[f].objectNumber+" 0 R");tt.publish("putXobjectDict"),ee(">>")},Kr=function(){Pn.oid=lr(),ee("<<"),ee("/Filter /Standard"),ee("/V "+Pn.v),ee("/R "+Pn.r),ee("/U <"+Pn.toHexString(Pn.U)+">"),ee("/O <"+Pn.toHexString(Pn.O)+">"),ee("/P "+Pn.P),ee(">>"),ee("endobj")},wt=function(){for(var f in ee("/Font <<"),Nt)Nt.hasOwnProperty(f)&&(x===!1||x===!0&&b.hasOwnProperty(f))&&ee("/"+f+" "+Nt[f].objectNumber+" 0 R");ee(">>")},wr=function(){if(Object.keys(bt).length>0){for(var f in ee("/Shading <<"),bt)bt.hasOwnProperty(f)&&bt[f]instanceof eo&&bt[f].objectNumber>=0&&ee("/"+f+" "+bt[f].objectNumber+" 0 R");tt.publish("putShadingPatternDict"),ee(">>")}},Sr=function(f){if(Object.keys(bt).length>0){for(var I in ee("/Pattern <<"),bt)bt.hasOwnProperty(I)&&bt[I]instanceof m.TilingPattern&&bt[I].objectNumber>=0&&bt[I].objectNumber<f&&ee("/"+I+" "+bt[I].objectNumber+" 0 R");tt.publish("putTilingPatternDict"),ee(">>")}},cr=function(){if(Object.keys(lt).length>0){var f;for(f in ee("/ExtGState <<"),lt)lt.hasOwnProperty(f)&&lt[f].objectNumber>=0&&ee("/"+f+" "+lt[f].objectNumber+" 0 R");tt.publish("putGStateDict"),ee(">>")}},Gt=function(f){an(f.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),wt(),wr(),Sr(f.objectOid),cr(),sr(),ee(">>"),ee("endobj")},dr=function(){var f=[];mr(),Ft(),rr(),nr(f),tt.publish("putResources"),f.forEach(Gt),Gt({resourcesOid:Cn,objectOid:Number.MAX_SAFE_INTEGER}),tt.publish("postPutResources")},ii=function(){tt.publish("putAdditionalObjects");for(var f=0;f<be.length;f++){var I=be[f];an(I.objId,!0),ee(I.content),ee("endobj")}tt.publish("postPutAdditionalObjects")},fi=function(f){At[f.fontName]=At[f.fontName]||{},At[f.fontName][f.fontStyle]=f.id},ps=function(f,I,ae,pe,ke){var He={id:"F"+(Object.keys(Nt).length+1).toString(10),postScriptName:f,fontName:I,fontStyle:ae,encoding:pe,isStandardFont:ke||!1,metadata:{}};return tt.publish("addFont",{font:He,instance:this}),Nt[He.id]=He,fi(He),He.id},xo=function(f){for(var I=0,ae=Le.length;I<ae;I++){var pe=ps.call(this,f[I][0],f[I][1],f[I][2],Le[I][3],!0);x===!1&&(b[pe]=!0);var ke=f[I][0].split("-");fi({id:pe,fontName:ke[0],fontStyle:ke[1]||""})}tt.publish("addFonts",{fonts:Nt,dictionary:At})},_i=function(f){return f.foo=function(){try{return f.apply(this,arguments)}catch(pe){var I=pe.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var ae="Error in function "+I.split(`
`)[0].split("<")[0]+": "+pe.message;if(!$t.console)throw new Error(ae);$t.console.error(ae,pe),$t.alert&&alert(ae)}},f.foo.bar=f,f.foo},bo=function(f,I){var ae,pe,ke,He,st,Lt,Dt,Xt,Yt;if(ke=(I=I||{}).sourceEncoding||"Unicode",st=I.outputEncoding,(I.autoencode||st)&&Nt[Ie].metadata&&Nt[Ie].metadata[ke]&&Nt[Ie].metadata[ke].encoding&&(He=Nt[Ie].metadata[ke].encoding,!st&&Nt[Ie].encoding&&(st=Nt[Ie].encoding),!st&&He.codePages&&(st=He.codePages[0]),typeof st=="string"&&(st=He[st]),st)){for(Dt=!1,Lt=[],ae=0,pe=f.length;ae<pe;ae++)(Xt=st[f.charCodeAt(ae)])?Lt.push(String.fromCharCode(Xt)):Lt.push(f[ae]),Lt[ae].charCodeAt(0)>>8&&(Dt=!0);f=Lt.join("")}for(ae=f.length;Dt===void 0&&ae!==0;)f.charCodeAt(ae-1)>>8&&(Dt=!0),ae--;if(!Dt)return f;for(Lt=I.noBOM?[]:[254,255],ae=0,pe=f.length;ae<pe;ae++){if((Yt=(Xt=f.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+f+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Lt.push(Yt),Lt.push(Xt-(Yt<<8))}return String.fromCharCode.apply(void 0,Lt)},$n=m.__private__.pdfEscape=m.pdfEscape=function(f,I){return bo(f,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xa=m.__private__.beginPage=function(f){fe[++We]=[],nt[We]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(f[0]),topRightY:Number(f[1])}},xl(We),ye(fe[W])},gl=function(f,I){var ae,pe,ke;switch(n=I||n,typeof f=="string"&&(ae=k(f.toLowerCase()),Array.isArray(ae)&&(pe=ae[0],ke=ae[1])),Array.isArray(f)&&(pe=f[0]*ze,ke=f[1]*ze),isNaN(pe)&&(pe=o[0],ke=o[1]),(pe>14400||ke>14400)&&(_r.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),ke=Math.min(14400,ke)),o=[pe,ke],n.substr(0,1)){case"l":ke>pe&&(o=[ke,pe]);break;case"p":pe>ke&&(o=[ke,pe])}xa(o),Sl(wa),ee(ki),Sa!==0&&ee(Sa+" J"),Ca!==0&&ee(Ca+" j"),tt.publish("addPage",{pageNumber:We})},od=function(f){f>0&&f<=We&&(fe.splice(f,1),nt.splice(f,1),We--,W>We&&(W=We),this.setPage(W))},xl=function(f){f>0&&f<=We&&(W=f)},ad=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return fe.length-1},bl=function(f,I,ae){var pe,ke=void 0;return ae=ae||{},f=f!==void 0?f:Nt[Ie].fontName,I=I!==void 0?I:Nt[Ie].fontStyle,pe=f.toLowerCase(),At[pe]!==void 0&&At[pe][I]!==void 0?ke=At[pe][I]:At[f]!==void 0&&At[f][I]!==void 0?ke=At[f][I]:ae.disableWarning===!1&&_r.warn("Unable to look up font label for font '"+f+"', '"+I+"'. Refer to getFontList() for available fonts."),ke||ae.noFallback||(ke=At.times[I])==null&&(ke=At.times.normal),ke},ld=m.__private__.putInfo=function(){var f=lr(),I=function(pe){return pe};for(var ae in p!==null&&(I=Pn.encryptor(f,0)),ee("<<"),ee("/Producer ("+$n(I("jsPDF "+Wt.version))+")"),Se)Se.hasOwnProperty(ae)&&Se[ae]&&ee("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+$n(I(Se[ae]))+")");ee("/CreationDate ("+$n(I(se))+")"),ee(">>"),ee("endobj")},ba=m.__private__.putCatalog=function(f){var I=(f=f||{}).rootDictionaryObjId||fr;switch(lr(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+I+" 0 R"),Ye||(Ye="fullwidth"),Ye){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+Ye;ae.substr(ae.length-1)==="%"&&(Ye=parseInt(Ye)/100),typeof Ye=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+P(Ye)+"]")}switch(ve||(ve="continuous"),ve){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}$e&&ee("/PageMode /"+$e),tt.publish("putCatalog"),ee(">>"),ee("endobj")},cd=m.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(Q+1)),ee("/Root "+Q+" 0 R"),ee("/Info "+(Q-1)+" 0 R"),p!==null&&ee("/Encrypt "+Pn.oid+" 0 R"),ee("/ID [ <"+re+"> <"+re+"> ]"),ee(">>")},dd=m.__private__.putHeader=function(){ee("%PDF-"+_),ee("%ºß¬à")},ud=m.__private__.putXRef=function(){var f="0000000000";ee("xref"),ee("0 "+(Q+1)),ee("0000000000 65535 f ");for(var I=1;I<=Q;I++)typeof ie[I]=="function"?ee((f+ie[I]()).slice(-10)+" 00000 n "):ie[I]!==void 0?ee((f+ie[I]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},Qi=m.__private__.buildDocument=function(){Ue(),ye(de),tt.publish("buildDocument"),dd(),Et(),ii(),dr(),p!==null&&Kr(),ld(),ba();var f=le;return ud(),cd(),ee("startxref"),ee(""+f),ee("%%EOF"),ye(fe[W]),de.join(`
`)},yo=m.__private__.getBlob=function(f){return new Blob([Me(f)],{type:"application/pdf"})},vo=m.output=m.__private__.output=_i(function(f,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",f){case void 0:return Qi();case"save":m.save(I.filename);break;case"arraybuffer":return Me(Qi());case"blob":return yo(Qi());case"bloburi":case"bloburl":if($t.URL!==void 0&&typeof $t.URL.createObjectURL=="function")return $t.URL&&$t.URL.createObjectURL(yo(Qi()))||void 0;_r.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",pe=Qi();try{ae=Bu(pe)}catch{ae=Bu(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+I.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call($t)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",He=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(ke=I.pdfObjectUrl,He="");var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+He+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",Lt=$t.open();return Lt!==null&&Lt.document.write(st),Lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call($t)==="[object Window]"){var Dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Xt=$t.open();if(Xt!==null){Xt.document.write(Dt);var Yt=this;Xt.document.documentElement.querySelector("#pdfViewer").onload=function(){Xt.document.title=I.filename,Xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Yt.output("bloburl"))}}return Xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call($t)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var or='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',Ur=$t.open();if(Ur!==null&&(Ur.document.write(or),Ur.document.title=I.filename),Ur||typeof safari=="undefined")return Ur;break;case"datauri":case"dataurl":return $t.document.location.href=this.output("datauristring",I);default:return null}}),yl=function(f){return Array.isArray(gt)===!0&&gt.indexOf(f)>-1};switch(i){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=yl("px_scaling")==1?.75:96/72;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);ze=i}var Pn=null;Y(),ne();var hd=function(f){return p!==null?Pn.encryptor(f,0):function(I){return I}},vl=m.__private__.getPageInfo=m.getPageInfo=function(f){if(isNaN(f)||f%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nt[f].objId,pageNumber:f,pageContext:nt[f]}},Vt=m.__private__.getPageInfoByObjId=function(f){if(isNaN(f)||f%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in nt)if(nt[I].objId===f)break;return vl(I)},fd=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:nt[W].objId,pageNumber:W,pageContext:nt[W]}};m.addPage=function(){return gl.apply(this,arguments),this},m.setPage=function(){return xl.apply(this,arguments),ye.call(this,fe[W]),this},m.insertPage=function(f){return this.addPage(),this.movePage(W,f),this},m.movePage=function(f,I){var ae,pe;if(f>I){ae=fe[f],pe=nt[f];for(var ke=f;ke>I;ke--)fe[ke]=fe[ke-1],nt[ke]=nt[ke-1];fe[I]=ae,nt[I]=pe,this.setPage(I)}else if(f<I){ae=fe[f],pe=nt[f];for(var He=f;He<I;He++)fe[He]=fe[He+1],nt[He]=nt[He+1];fe[I]=ae,nt[I]=pe,this.setPage(I)}return this},m.deletePage=function(){return od.apply(this,arguments),this},m.__private__.text=m.text=function(f,I,ae,pe,ke){var He,st,Lt,Dt,Xt,Yt,or,Ur,Gr,ln=(pe=pe||{}).scope||this;if(typeof f=="number"&&typeof I=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Nn=ae;ae=I,I=f,f=Nn}if(arguments[3]instanceof Je?(V("The transform parameter of text() with a Matrix value"),Gr=ke):(Lt=arguments[4],Dt=arguments[5],Lr(or=arguments[3])==="object"&&or!==null||(typeof Lt=="string"&&(Dt=Lt,Lt=null),typeof or=="string"&&(Dt=or,or=null),typeof or=="number"&&(Lt=or,or=null),pe={flags:or,angle:Lt,align:Dt})),isNaN(I)||isNaN(ae)||f==null)throw new Error("Invalid arguments passed to jsPDF.text");if(f.length===0)return ln;var mn="",Ai=!1,si=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:qs,Wi=ln.internal.scaleFactor;function Pl(Rr){return Rr=Rr.split("	").join(Array(pe.TabLen||9).join(" ")),$n(Rr,or)}function Pa(Rr){for(var Er,Zr=Rr.concat(),pn=[],ns=Zr.length;ns--;)typeof(Er=Zr.shift())=="string"?pn.push(Er):Array.isArray(Rr)&&(Er.length===1||Er[1]===void 0&&Er[2]===void 0)?pn.push(Er[0]):pn.push([Er[0],Er[1],Er[2]]);return pn}function Na(Rr,Er){var Zr;if(typeof Rr=="string")Zr=Er(Rr)[0];else if(Array.isArray(Rr)){for(var pn,ns,Ma=Rr.concat(),zo=[],Tl=Ma.length;Tl--;)typeof(pn=Ma.shift())=="string"?zo.push(Er(pn)[0]):Array.isArray(pn)&&typeof pn[0]=="string"&&(ns=Er(pn[0],pn[1],pn[2]),zo.push([ns[0],ns[1],ns[2]]));Zr=zo}return Zr}var ko=!1,Oa=!0;if(typeof f=="string")ko=!0;else if(Array.isArray(f)){var Ra=f.concat();st=[];for(var Ao,_n=Ra.length;_n--;)(typeof(Ao=Ra.shift())!="string"||Array.isArray(Ao)&&typeof Ao[0]!="string")&&(Oa=!1);ko=Oa}if(ko===!1)throw new Error('Type of text must be string or Array. "'+f+'" is not recognized.');typeof f=="string"&&(f=f.match(/[\r?\n]/)?f.split(/\r\n|\r|\n/g):[f]);var Lo=ue/ln.internal.scaleFactor,Po=Lo*(si-1);switch(pe.baseline){case"bottom":ae-=Po;break;case"top":ae+=Lo-Po;break;case"hanging":ae+=Lo-2*Po;break;case"middle":ae+=Lo/2-Po}if((Yt=pe.maxWidth||0)>0&&(typeof f=="string"?f=ln.splitTextToSize(f,Yt):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(Rr,Er){return Rr.concat(ln.splitTextToSize(Er,Yt))},[]))),He={text:f,x:I,y:ae,options:pe,mutex:{pdfEscape:$n,activeFontKey:Ie,fonts:Nt,activeFontSize:ue}},tt.publish("preProcessText",He),f=He.text,Lt=(pe=He.options).angle,!(Gr instanceof Je)&&Lt&&typeof Lt=="number"){Lt*=Math.PI/180,pe.rotationDirection===0&&(Lt=-Lt),H===T.ADVANCED&&(Lt=-Lt);var No=Math.cos(Lt),Ea=Math.sin(Lt);Gr=new Je(No,Ea,-Ea,No,0,0)}else Lt&&Lt instanceof Je&&(Gr=Lt);H!==T.ADVANCED||Gr||(Gr=dt),(Xt=pe.charSpace||So)!==void 0&&(mn+=B(A(Xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ur=pe.horizontalScale)!==void 0&&(mn+=B(100*Ur)+` Tz
`),pe.lang;var Gn=-1,Sd=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,Ta=ln.internal.getCurrentPageInfo().pageContext;switch(Sd){case 0:case!1:case"fill":Gn=0;break;case 1:case!0:case"stroke":Gn=1;break;case 2:case"fillThenStroke":Gn=2;break;case 3:case"invisible":Gn=3;break;case 4:case"fillAndAddForClipping":Gn=4;break;case 5:case"strokeAndAddPathForClipping":Gn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gn=6;break;case 7:case"addToPathForClipping":Gn=7}var Nl=Ta.usedRenderingMode!==void 0?Ta.usedRenderingMode:-1;Gn!==-1?mn+=Gn+` Tr
`:Nl!==-1&&(mn+=`0 Tr
`),Gn!==-1&&(Ta.usedRenderingMode=Gn),Dt=pe.align||"left";var pi,Oo=ue*si,Ol=ln.internal.pageSize.getWidth(),Rl=Nt[Ie];Xt=pe.charSpace||So,Yt=pe.maxWidth||0,or=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var bs=[],Hs=function(Rr){return ln.getStringUnitWidth(Rr,{font:Rl,charSpace:Xt,fontSize:ue,doKerning:!1})*ue/Wi};if(Object.prototype.toString.call(f)==="[object Array]"){var Vn;st=Pa(f),Dt!=="left"&&(pi=st.map(Hs));var In,ys=0;if(Dt==="right"){I-=pi[0],f=[],_n=st.length;for(var es=0;es<_n;es++)es===0?(In=qi(I),Vn=Zi(ae)):(In=A(ys-pi[es]),Vn=-Oo),f.push([st[es],In,Vn]),ys=pi[es]}else if(Dt==="center"){I-=pi[0]/2,f=[],_n=st.length;for(var ts=0;ts<_n;ts++)ts===0?(In=qi(I),Vn=Zi(ae)):(In=A((ys-pi[ts])/2),Vn=-Oo),f.push([st[ts],In,Vn]),ys=pi[ts]}else if(Dt==="left"){f=[],_n=st.length;for(var Ro=0;Ro<_n;Ro++)f.push(st[Ro])}else if(Dt==="justify"&&Rl.encoding==="Identity-H"){f=[],_n=st.length,Yt=Yt!==0?Yt:Ol;for(var rs=0,Qr=0;Qr<_n;Qr++)if(Vn=Qr===0?Zi(ae):-Oo,In=Qr===0?qi(I):rs,Qr<_n-1){var za=A((Yt-pi[Qr])/(st[Qr].split(" ").length-1)),Mn=st[Qr].split(" ");f.push([Mn[0]+" ",In,Vn]),rs=0;for(var mi=1;mi<Mn.length;mi++){var Eo=(Hs(Mn[mi-1]+" "+Mn[mi])-Hs(Mn[mi]))*Wi+za;mi==Mn.length-1?f.push([Mn[mi],Eo,0]):f.push([Mn[mi]+" ",Eo,0]),rs-=Eo}}else f.push([st[Qr],In,Vn]);f.push(["",rs,0])}else{if(Dt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(f=[],_n=st.length,Yt=Yt!==0?Yt:Ol,Qr=0;Qr<_n;Qr++)Vn=Qr===0?Zi(ae):-Oo,In=Qr===0?qi(I):0,Qr<_n-1?bs.push(B(A((Yt-pi[Qr])/(st[Qr].split(" ").length-1)))):bs.push(0),f.push([st[Qr],In,Vn])}}var El=typeof pe.R2L=="boolean"?pe.R2L:mt;El===!0&&(f=Na(f,function(Rr,Er,Zr){return[Rr.split("").reverse().join(""),Er,Zr]})),He={text:f,x:I,y:ae,options:pe,mutex:{pdfEscape:$n,activeFontKey:Ie,fonts:Nt,activeFontSize:ue}},tt.publish("postProcessText",He),f=He.text,Ai=He.mutex.isHex||!1;var Fa=Nt[Ie].encoding;Fa!=="WinAnsiEncoding"&&Fa!=="StandardEncoding"||(f=Na(f,function(Rr,Er,Zr){return[Pl(Rr),Er,Zr]})),st=Pa(f),f=[];for(var $s,Gs,vs,Vs=0,To=1,Ys=Array.isArray(st[0])?To:Vs,ws="",Ia=function(Rr,Er,Zr){var pn="";return Zr instanceof Je?(Zr=typeof pe.angle=="number"?It(Zr,new Je(1,0,0,1,Rr,Er)):It(new Je(1,0,0,1,Rr,Er),Zr),H===T.ADVANCED&&(Zr=It(new Je(1,0,0,-1,0,0),Zr)),pn=Zr.join(" ")+` Tm
`):pn=B(Rr)+" "+B(Er)+` Td
`,pn},gi=0;gi<st.length;gi++){switch(ws="",Ys){case To:vs=(Ai?"<":"(")+st[gi][0]+(Ai?">":")"),$s=parseFloat(st[gi][1]),Gs=parseFloat(st[gi][2]);break;case Vs:vs=(Ai?"<":"(")+st[gi]+(Ai?">":")"),$s=qi(I),Gs=Zi(ae)}bs!==void 0&&bs[gi]!==void 0&&(ws=bs[gi]+` Tw
`),gi===0?f.push(ws+Ia($s,Gs,Gr)+vs):Ys===Vs?f.push(ws+vs):Ys===To&&f.push(ws+Ia($s,Gs,Gr)+vs)}f=Ys===Vs?f.join(` Tj
T* `):f.join(` Tj
`),f+=` Tj
`;var xi=`BT
/`;return xi+=Ie+" "+ue+` Tf
`,xi+=B(ue*si)+` TL
`,xi+=Ws+`
`,xi+=mn,xi+=f,ee(xi+="ET"),b[Ie]=!0,ln};var pd=m.__private__.clip=m.clip=function(f){return ee(f==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return pd("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ee("n"),this};var Bi=m.__private__.isValidStyle=function(f){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(f)!==-1&&(I=!0),I};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(f){return Bi(f)&&(h=f),this};var wl=m.__private__.getStyle=m.getStyle=function(f){var I=h;switch(f){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=f}return I},jl=m.close=function(){return ee("h"),this};m.stroke=function(){return ee("S"),this},m.fill=function(f){return wo("f",f),this},m.fillEvenOdd=function(f){return wo("f*",f),this},m.fillStroke=function(f){return wo("B",f),this},m.fillStrokeEvenOdd=function(f){return wo("B*",f),this};var wo=function(f,I){Lr(I)==="object"?gd(I,f):ee(f)},ya=function(f){f===null||H===T.ADVANCED&&f===void 0||(f=wl(f),ee(f))};function md(f,I,ae,pe,ke){var He=new Qo(I||this.boundingBox,ae||this.xStep,pe||this.yStep,this.gState,ke||this.matrix);He.stream=this.stream;var st=f+"$$"+this.cloneIndex+++"$$";return jt(st,He),He}var gd=function(f,I){var ae=Ne[f.key],pe=bt[ae];if(pe instanceof eo)ee("q"),ee(xd(I)),pe.gState&&m.setGState(pe.gState),ee(f.matrix.toString()+" cm"),ee("/"+ae+" sh"),ee("Q");else if(pe instanceof Qo){var ke=new Je(1,0,0,-1,0,xs());f.matrix&&(ke=ke.multiply(f.matrix||dt),ae=md.call(pe,f.key,f.boundingBox,f.xStep,f.yStep,ke).id),ee("q"),ee("/Pattern cs"),ee("/"+ae+" scn"),pe.gState&&m.setGState(pe.gState),ee(I),ee("Q")}},xd=function(f){switch(f){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},va=m.moveTo=function(f,I){return ee(B(A(f))+" "+B(z(I))+" m"),this},Bs=m.lineTo=function(f,I){return ee(B(A(f))+" "+B(z(I))+" l"),this},ms=m.curveTo=function(f,I,ae,pe,ke,He){return ee([B(A(f)),B(z(I)),B(A(ae)),B(z(pe)),B(A(ke)),B(z(He)),"c"].join(" ")),this};m.__private__.line=m.line=function(f,I,ae,pe,ke){if(isNaN(f)||isNaN(I)||isNaN(ae)||isNaN(pe)||!Bi(ke))throw new Error("Invalid arguments passed to jsPDF.line");return H===T.COMPAT?this.lines([[ae-f,pe-I]],f,I,[1,1],ke||"S"):this.lines([[ae-f,pe-I]],f,I,[1,1]).stroke()},m.__private__.lines=m.lines=function(f,I,ae,pe,ke,He){var st,Lt,Dt,Xt,Yt,or,Ur,Gr,ln,Nn,mn,Ai;if(typeof f=="number"&&(Ai=ae,ae=I,I=f,f=Ai),pe=pe||[1,1],He=He||!1,isNaN(I)||isNaN(ae)||!Array.isArray(f)||!Array.isArray(pe)||!Bi(ke)||typeof He!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(va(I,ae),st=pe[0],Lt=pe[1],Xt=f.length,Nn=I,mn=ae,Dt=0;Dt<Xt;Dt++)(Yt=f[Dt]).length===2?(Nn=Yt[0]*st+Nn,mn=Yt[1]*Lt+mn,Bs(Nn,mn)):(or=Yt[0]*st+Nn,Ur=Yt[1]*Lt+mn,Gr=Yt[2]*st+Nn,ln=Yt[3]*Lt+mn,Nn=Yt[4]*st+Nn,mn=Yt[5]*Lt+mn,ms(or,Ur,Gr,ln,Nn,mn));return He&&jl(),ya(ke),this},m.path=function(f){for(var I=0;I<f.length;I++){var ae=f[I],pe=ae.c;switch(ae.op){case"m":va(pe[0],pe[1]);break;case"l":Bs(pe[0],pe[1]);break;case"c":ms.apply(this,pe);break;case"h":jl()}}return this},m.__private__.rect=m.rect=function(f,I,ae,pe,ke){if(isNaN(f)||isNaN(I)||isNaN(ae)||isNaN(pe)||!Bi(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return H===T.COMPAT&&(pe=-pe),ee([B(A(f)),B(z(I)),B(A(ae)),B(A(pe)),"re"].join(" ")),ya(ke),this},m.__private__.triangle=m.triangle=function(f,I,ae,pe,ke,He,st){if(isNaN(f)||isNaN(I)||isNaN(ae)||isNaN(pe)||isNaN(ke)||isNaN(He)||!Bi(st))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-f,pe-I],[ke-ae,He-pe],[f-ke,I-He]],f,I,[1,1],st,!0),this},m.__private__.roundedRect=m.roundedRect=function(f,I,ae,pe,ke,He,st){if(isNaN(f)||isNaN(I)||isNaN(ae)||isNaN(pe)||isNaN(ke)||isNaN(He)||!Bi(st))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Lt=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*ae),He=Math.min(He,.5*pe),this.lines([[ae-2*ke,0],[ke*Lt,0,ke,He-He*Lt,ke,He],[0,pe-2*He],[0,He*Lt,-ke*Lt,He,-ke,He],[2*ke-ae,0],[-ke*Lt,0,-ke,-He*Lt,-ke,-He],[0,2*He-pe],[0,-He*Lt,ke*Lt,-He,ke,-He]],f+ke,I,[1,1],st,!0),this},m.__private__.ellipse=m.ellipse=function(f,I,ae,pe,ke){if(isNaN(f)||isNaN(I)||isNaN(ae)||isNaN(pe)||!Bi(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var He=4/3*(Math.SQRT2-1)*ae,st=4/3*(Math.SQRT2-1)*pe;return va(f+ae,I),ms(f+ae,I-st,f+He,I-pe,f,I-pe),ms(f-He,I-pe,f-ae,I-st,f-ae,I),ms(f-ae,I+st,f-He,I+pe,f,I+pe),ms(f+He,I+pe,f+ae,I+st,f+ae,I),ya(ke),this},m.__private__.circle=m.circle=function(f,I,ae,pe){if(isNaN(f)||isNaN(I)||isNaN(ae)||!Bi(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(f,I,ae,ae,pe)},m.setFont=function(f,I,ae){return ae&&(I=D(I,ae)),Ie=bl(f,I,{disableWarning:!1}),this};var bd=m.__private__.getFont=m.getFont=function(){return Nt[bl.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var f,I,ae={};for(f in At)if(At.hasOwnProperty(f))for(I in ae[f]=[],At[f])At[f].hasOwnProperty(I)&&ae[f].push(I);return ae},m.addFont=function(f,I,ae,pe,ke){var He=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&He.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&He.indexOf(arguments[3])==-1&&(ae=D(ae,pe)),ke=ke||"Identity-H",ps.call(this,f,I,ae,ke)};var qs,wa=t.lineWidth||.200025,jo=m.__private__.getLineWidth=m.getLineWidth=function(){return wa},Sl=m.__private__.setLineWidth=m.setLineWidth=function(f){return wa=f,ee(B(A(f))+" w"),this};m.__private__.setLineDash=Wt.API.setLineDash=Wt.API.setLineDashPattern=function(f,I){if(f=f||[],I=I||0,isNaN(I)||!Array.isArray(f))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return f=f.map(function(ae){return B(A(ae))}).join(" "),I=B(A(I)),ee("["+f+"] "+I+" d"),this};var Cl=m.__private__.getLineHeight=m.getLineHeight=function(){return ue*qs};m.__private__.getLineHeight=m.getLineHeight=function(){return ue*qs};var _l=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(f){return typeof(f=f||1.15)=="number"&&(qs=f),this},kl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return qs};_l(t.lineHeight);var qi=m.__private__.getHorizontalCoordinate=function(f){return A(f)},Zi=m.__private__.getVerticalCoordinate=function(f){return H===T.ADVANCED?f:nt[W].mediaBox.topRightY-nt[W].mediaBox.bottomLeftY-A(f)},yd=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(f){return B(qi(f))},gs=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(f){return B(Zi(f))},ki=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ln(ki)},m.__private__.setStrokeColor=m.setDrawColor=function(f,I,ae,pe){return ki=Hn({ch1:f,ch2:I,ch3:ae,ch4:pe,pdfColorType:"draw",precision:2}),ee(ki),this};var ja=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ln(ja)},m.__private__.setFillColor=m.setFillColor=function(f,I,ae,pe){return ja=Hn({ch1:f,ch2:I,ch3:ae,ch4:pe,pdfColorType:"fill",precision:2}),ee(ja),this};var Ws=t.textColor||"0 g",vd=m.__private__.getTextColor=m.getTextColor=function(){return Ln(Ws)};m.__private__.setTextColor=m.setTextColor=function(f,I,ae,pe){return Ws=Hn({ch1:f,ch2:I,ch3:ae,ch4:pe,pdfColorType:"text",precision:3}),this};var So=t.charSpace,wd=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(So||0)};m.__private__.setCharSpace=m.setCharSpace=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return So=f,this};var Sa=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(f){var I=m.CapJoinStyles[f];if(I===void 0)throw new Error("Line cap style of '"+f+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sa=I,ee(I+" J"),this};var Ca=0;m.__private__.setLineJoin=m.setLineJoin=function(f){var I=m.CapJoinStyles[f];if(I===void 0)throw new Error("Line join style of '"+f+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ca=I,ee(I+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(f){if(f=f||0,isNaN(f))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(B(A(f))+" M"),this},m.GState=Mc,m.setGState=function(f){(f=typeof f=="string"?lt[zt[f]]:Al(null,f)).equals(Ae)||(ee("/"+f.id+" gs"),Ae=f)};var Al=function(f,I){if(!f||!zt[f]){var ae=!1;for(var pe in lt)if(lt.hasOwnProperty(pe)&&lt[pe].equals(I)){ae=!0;break}if(ae)I=lt[pe];else{var ke="GS"+(Object.keys(lt).length+1).toString(10);lt[ke]=I,I.id=ke}return f&&(zt[f]=I.id),tt.publish("addGState",I),I}};m.addGState=function(f,I){return Al(f,I),this},m.saveGraphicsState=function(){return ee("q"),ht.push({key:Ie,size:ue,color:Ws}),this},m.restoreGraphicsState=function(){ee("Q");var f=ht.pop();return Ie=f.key,ue=f.size,Ws=f.color,Ae=null,this},m.setCurrentTransformationMatrix=function(f){return ee(f.toString()+" cm"),this},m.comment=function(f){return ee("#"+f),this};var Co=function(f,I){var ae=f||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(He){isNaN(He)||(ae=parseFloat(He))}});var pe=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(He){isNaN(He)||(pe=parseFloat(He))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(He){ke=He.toString()}}),this},_a=function(f,I,ae,pe){Co.call(this,f,I),this.type="rect";var ke=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(st){isNaN(st)||(ke=parseFloat(st))}});var He=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return He},set:function(st){isNaN(st)||(He=parseFloat(st))}}),this},ka=function(){this.page=We,this.currentPage=W,this.pages=fe.slice(0),this.pagesContext=nt.slice(0),this.x=it,this.y=Ge,this.matrix=ot,this.width=Us(W),this.height=xs(W),this.outputDestination=Oe,this.id="",this.objectNumber=-1};ka.prototype.restore=function(){We=this.page,W=this.currentPage,nt=this.pagesContext,fe=this.pages,it=this.x,Ge=this.y,ot=this.matrix,Aa(W,this.width),La(W,this.height),Oe=this.outputDestination};var Ll=function(f,I,ae,pe,ke){Ve.push(new ka),We=W=0,fe=[],it=f,Ge=I,ot=ke,xa([ae,pe])},jd=function(f){if(Ut[f])Ve.pop().restore();else{var I=new ka,ae="Xo"+(Object.keys(Ct).length+1).toString(10);I.id=ae,Ut[f]=ae,Ct[ae]=I,tt.publish("addFormObject",I),Ve.pop().restore()}};for(var _o in m.beginFormObject=function(f,I,ae,pe,ke){return Ll(f,I,ae,pe,ke),this},m.endFormObject=function(f){return jd(f),this},m.doFormObject=function(f,I){var ae=Ct[Ut[f]];return ee("q"),ee(I.toString()+" cm"),ee("/"+ae.id+" Do"),ee("Q"),this},m.getFormObject=function(f){var I=Ct[Ut[f]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},m.save=function(f,I){return f=f||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(Qs(yo(Qi()),f),typeof Qs.unload=="function"&&$t.setTimeout&&setTimeout(Qs.unload,911),this):new Promise(function(ae,pe){try{var ke=Qs(yo(Qi()),f);typeof Qs.unload=="function"&&$t.setTimeout&&setTimeout(Qs.unload,911),ae(ke)}catch(He){pe(He.message)}})},Wt.API)Wt.API.hasOwnProperty(_o)&&(_o==="events"&&Wt.API.events.length?function(f,I){var ae,pe,ke;for(ke=I.length-1;ke!==-1;ke--)ae=I[ke][0],pe=I[ke][1],f.subscribe.apply(f,[ae].concat(typeof pe=="function"?[pe]:pe))}(tt,Wt.API.events):m[_o]=Wt.API[_o]);var Us=m.getPageWidth=function(f){return(nt[f=f||W].mediaBox.topRightX-nt[f].mediaBox.bottomLeftX)/ze},Aa=m.setPageWidth=function(f,I){nt[f].mediaBox.topRightX=I*ze+nt[f].mediaBox.bottomLeftX},xs=m.getPageHeight=function(f){return(nt[f=f||W].mediaBox.topRightY-nt[f].mediaBox.bottomLeftY)/ze},La=m.setPageHeight=function(f,I){nt[f].mediaBox.topRightY=I*ze+nt[f].mediaBox.bottomLeftY};return m.internal={pdfEscape:$n,getStyle:wl,getFont:bd,getFontSize:Ze,getCharSpace:wd,getTextColor:vd,getLineHeight:Cl,getLineHeightFactor:kl,getLineWidth:jo,write:_e,getHorizontalCoordinate:qi,getVerticalCoordinate:Zi,getCoordinateString:yd,getVerticalCoordinateString:gs,collections:{},newObject:lr,newAdditionalObject:Ci,newObjectDeferred:Mr,newObjectDeferredBegin:an,getFilters:ni,putStream:he,events:tt,scaleFactor:ze,pageSize:{getWidth:function(){return Us(W)},setWidth:function(f){Aa(W,f)},getHeight:function(){return xs(W)},setHeight:function(f){La(W,f)}},encryptionOptions:p,encryption:Pn,getEncryptor:hd,output:vo,getNumberOfPages:ad,pages:fe,out:ee,f2:P,f3:j,getPageInfo:vl,getPageInfoByObjId:Vt,getCurrentPageInfo:fd,getPDFVersion:w,Point:Co,Rectangle:_a,Matrix:Je,hasHotfix:yl},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Us(W)},set:function(f){Aa(W,f)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return xs(W)},set:function(f){La(W,f)},enumerable:!0,configurable:!0}),xo.call(m,Le),Ie="F1",gl(o,n),tt.publish("initialized"),m}Jo.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Jo.prototype.toHexString=function(t){return t.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Jo.prototype.hexToBytes=function(t){for(var r=[],n=0;n<t.length;n+=2)r.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return r.join("")},Jo.prototype.processOwnerPassword=function(t,r){return Wu(qu(r).substr(0,5),t)},Jo.prototype.encryptor=function(t,r){var n=qu(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&r,r>>8&255)).substr(0,10);return function(i){return Wu(n,i)}},Mc.prototype.equals=function(t){var r,n="id,objectNumber,equals";if(!t||Lr(t)!==Lr(this))return!1;var i=0;for(r in this)if(!(n.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!t.hasOwnProperty(r)||this[r]!==t[r])return!1;i++}for(r in t)t.hasOwnProperty(r)&&n.indexOf(r)<0&&i--;return i===0},Wt.API={events:[]},Wt.version="3.0.1";var Yr=Wt.API,oh=1,go=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Go=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jt=function(t){return t.toFixed(2)},Rs=function(t){return t.toFixed(5)};Yr.__acroform__={};var ri=function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t},Yf=function(t){return t*oh},$i=function(t){var r=new H0,n=Ot.internal.getHeight(t)||0,i=Ot.internal.getWidth(t)||0;return r.BBox=[0,0,Number(Jt(i)),Number(Jt(n))],r},Jy=Yr.__acroform__.setBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<r},Xy=Yr.__acroform__.clearBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<r)},Ky=Yr.__acroform__.getBit=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<r)==0?0:1},en=Yr.__acroform__.getBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ky(t,r-1)},tn=Yr.__acroform__.setBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Jy(t,r-1)},rn=Yr.__acroform__.clearBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Xy(t,r-1)},Qy=Yr.__acroform__.calculateCoordinates=function(t,r){var n=r.internal.getHorizontalCoordinate,i=r.internal.getVerticalCoordinate,o=t[0],s=t[1],a=t[2],c=t[3],u={};return u.lowerLeft_X=n(o)||0,u.lowerLeft_Y=i(s+c)||0,u.upperRight_X=n(o+a)||0,u.upperRight_Y=i(s)||0,[Number(Jt(u.lowerLeft_X)),Number(Jt(u.lowerLeft_Y)),Number(Jt(u.upperRight_X)),Number(Jt(u.upperRight_Y))]},Zy=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var r=[],n=t._V||t.DV,i=Uu(t,n),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(t.scope.__private__.encodeColorString(t.color)),r.push("/"+o+" "+Jt(i.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC");var s=$i(t);return s.scope=t.scope,s.stream=r.join(`
`),s}},Uu=function(t,r){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},o=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");o=t.multiline?o.map(function(j){return j.split(`
`)}):o.map(function(j){return[j]});var s=n,a=Ot.internal.getHeight(t)||0;a=a<0?-a:a;var c=Ot.internal.getWidth(t)||0;c=c<0?-c:c;var u=function(j,A,E){if(j+1<o.length){var z=A+" "+o[j+1][0];return uc(z,t,E).width<=c-4}return!1};s++;e:for(;s>0;){r="",s--;var h,p,x=uc("3",t,s).height,b=t.multiline?a-s:(a-x)/2,m=b+=2,_=0,w=0,O=0;if(s<=0){r=`(...) Tj
`,r+="% Width of Text: "+uc(r,t,s=12).width+", FieldWidth:"+c+`
`;break}for(var k="",T=0,H=0;H<o.length;H++)if(o.hasOwnProperty(H)){var Z=!1;if(o[H].length!==1&&O!==o[H].length-1){if((x+2)*(T+2)+2>a)continue e;k+=o[H][O],Z=!0,w=H,H--}else{k=(k+=o[H][O]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var N=parseInt(H),D=u(N,k,s),B=H>=o.length-1;if(D&&!B){k+=" ",O=0;continue}if(D||B){if(B)w=N;else if(t.multiline&&(x+2)*(T+2)+2>a)continue e}else{if(!t.multiline||(x+2)*(T+2)+2>a)continue e;w=N}}for(var V="",R=_;R<=w;R++){var P=o[R];if(t.multiline){if(R===w){V+=P[O]+" ",O=(O+1)%P.length;continue}if(R===_){V+=P[P.length-1]+" ";continue}}V+=P[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,p=uc(V,t,s).width,t.textAlign){case"right":h=c-p-2;break;case"center":h=(c-p)/2;break;case"left":default:h=2}r+=Jt(h)+" "+Jt(m)+` Td
`,r+="("+go(V)+`) Tj
`,r+=-Jt(h)+` 0 Td
`,m=-(s+2),p=0,_=Z?w:w+1,T++,k=""}break}return i.text=r,i.fontSize=s,i},uc=function(t,r,n){var i=r.scope.internal.getFont(r.fontName,r.fontStyle),o=r.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:r.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},ev={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},tv=function(t,r){var n={type:"reference",object:t};r.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&r.internal.getPageInfo(t.page).pageContext.annotations.push(n)},rv=function(t,r){for(var n in t)if(t.hasOwnProperty(n)){var i=n,o=t[n];r.internal.newObjectDeferredBegin(o.objId,!0),Lr(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[i]}},nv=function(t,r){if(r.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Mi.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(ev)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");oh=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new $0,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s.objId=void 0,s.hasAnnotation&&tv(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,o){var s=!i;for(var a in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(a)){var c=i[a],u=[],h=c.Rect;if(c.Rect&&(c.Rect=Qy(c.Rect,o)),o.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Ot.createDefaultAppearanceStream(c),Lr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=h,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=Zy(c);u.push({key:"AP",value:"<</N "+p+">>"}),o.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var x="";for(var b in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(b)){var m=c.appearanceStreamContent[b];if(x+="/"+b+" ",x+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var _=m[a];typeof _=="function"&&(_=_.call(o,c)),x+="/"+a+" "+_+" ",o.internal.acroformPlugin.xForms.indexOf(_)>=0||o.internal.acroformPlugin.xForms.push(_)}}else typeof(_=m)=="function"&&(_=_.call(o,c)),x+="/"+a+" "+_,o.internal.acroformPlugin.xForms.indexOf(_)>=0||o.internal.acroformPlugin.xForms.push(_);x+=">>"}u.push({key:"AP",value:`<<
`+x+">>"})}o.internal.putStream({additionalKeyValues:u,objectId:c.objId}),o.internal.out("endobj")}s&&rv(o.internal.acroformPlugin.xForms,o)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},U0=Yr.__acroform__.arrayToPdfArray=function(t,r,n){var i=function(a){return a};if(Array.isArray(t)){for(var o="[",s=0;s<t.length;s++)switch(s!==0&&(o+=" "),Lr(t[s])){case"boolean":case"number":case"object":o+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(r!==void 0&&n&&(i=n.internal.getEncryptor(r)),o+="("+go(i(t[s].toString()))+")"):o+=t[s].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bu=function(t,r,n){var i=function(o){return o};return r!==void 0&&n&&(i=n.internal.getEncryptor(r)),(t=t||"").toString(),t="("+go(i(t))+")"},Gi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Gi.prototype.toString=function(){return this.objId+" 0 R"},Gi.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Gi.prototype.getKeyValueListForStream=function(){var t=[],r=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in r)if(Object.getOwnPropertyDescriptor(this,r[n]).configurable===!1){var i=r[n],o=this[i];o&&(Array.isArray(o)?t.push({key:i,value:U0(o,this.objId,this.scope)}):o instanceof Gi?(o.scope=this.scope,t.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:i,value:o}))}return t};var H0=function(){Gi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};ri(H0,Gi);var $0=function(){Gi.call(this);var t,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+go(n(t))+")"}},set:function(n){t=n}})};ri($0,Gi);var Mi=function t(){Gi.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');r=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!en(r,3)},set:function(k){k?this.F=tn(r,3):this.F=rn(r,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');n=k}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(k){i=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(k){i[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(k){i[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(k){i[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(k){i[3]=k}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Dc)return;s="FieldObject"+t.FieldNum++}var k=function(T){return T};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+go(k(s))+")"},set:function(k){s=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(k){s=k}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(k){c=k}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(k){u=k}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/oh:h},set:function(k){h=k}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(k){p=k}});var x="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!x||this instanceof Dc||this instanceof no))return bu(x,this.objId,this.scope)},set:function(k){k=k.toString(),x=k}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof yn?b:bu(b,this.objId,this.scope)},set:function(k){k=k.toString(),b=this instanceof yn?k:k.substr(0,1)==="("?Go(k.substr(1,k.length-2)):Go(k)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof yn?Go(b.substr(1,b.length-1)):b},set:function(k){k=k.toString(),b=this instanceof yn?"/"+k:k}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof yn?m:bu(m,this.objId,this.scope)},set:function(k){k=k.toString(),m=this instanceof yn?k:k.substr(0,1)==="("?Go(k.substr(1,k.length-2)):Go(k)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof yn?Go(m.substr(1,m.length-1)):m},set:function(k){k=k.toString(),m=this instanceof yn?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(k){k=!!k,w=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(k){_=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,1)},set:function(k){k?this.Ff=tn(this.Ff,1):this.Ff=rn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,2)},set:function(k){k?this.Ff=tn(this.Ff,2):this.Ff=rn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,3)},set:function(k){k?this.Ff=tn(this.Ff,3):this.Ff=rn(this.Ff,3)}});var O=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(O!==null)return O},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');O=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(O){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:O=2;break;case"center":case 1:O=1;break;case"left":case 0:default:O=0}}})};ri(Mi,Gi);var ia=function(){Mi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return U0(r,this.objId,this.scope)},set:function(n){var i,o;o=[],typeof(i=n)=="string"&&(o=function(s,a,c){c||(c=1);for(var u,h=[];u=a.exec(s);)h.push(u[c]);return h}(i,/\((.*?)\)/g)),r=o}}),this.getOptions=function(){return r},this.setOptions=function(n){r=n,this.sort&&r.sort()},this.addOption=function(n){n=(n=n||"").toString(),r.push(n),this.sort&&r.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();r.indexOf(n)!==-1&&(r.splice(r.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,18)},set:function(n){n?this.Ff=tn(this.Ff,18):this.Ff=rn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=tn(this.Ff,19):this.Ff=rn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,20)},set:function(n){n?(this.Ff=tn(this.Ff,20),r.sort()):this.Ff=rn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,22)},set:function(n){n?this.Ff=tn(this.Ff,22):this.Ff=rn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,23)},set:function(n){n?this.Ff=tn(this.Ff,23):this.Ff=rn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,27)},set:function(n){n?this.Ff=tn(this.Ff,27):this.Ff=rn(this.Ff,27)}}),this.hasAppearanceStream=!1};ri(ia,Mi);var sa=function(){ia.call(this),this.fontName="helvetica",this.combo=!1};ri(sa,ia);var oa=function(){sa.call(this),this.combo=!0};ri(oa,sa);var yc=function(){oa.call(this),this.edit=!0};ri(yc,oa);var yn=function(){Mi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,15)},set:function(n){n?this.Ff=tn(this.Ff,15):this.Ff=rn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,16)},set:function(n){n?this.Ff=tn(this.Ff,16):this.Ff=rn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,17)},set:function(n){n?this.Ff=tn(this.Ff,17):this.Ff=rn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,26)},set:function(n){n?this.Ff=tn(this.Ff,26):this.Ff=rn(this.Ff,26)}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+go(n(r[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){Lr(n)==="object"&&(r=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(n){typeof n=="string"&&(r.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};ri(yn,Mi);var vc=function(){yn.call(this),this.pushButton=!0};ri(vc,yn);var aa=function(){yn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r!==void 0?r:[]}})};ri(aa,yn);var Dc=function(){var t,r;Mi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(o){r=o}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(c){return c};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),i)a.push("/"+s+" ("+go(o(i[s]))+")");return a.push(">>"),a.join(`
`)},set:function(o){Lr(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ot.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ri(Dc,Mi),aa.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var n=this.Kids[r];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},aa.prototype.createOption=function(t){var r=new Dc;return r.Parent=this,r.optionName=t,this.Kids.push(r),iv.call(this.scope,r),r};var wc=function(){yn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ot.CheckBox.createAppearanceStream()};ri(wc,yn);var no=function(){Mi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,13)},set:function(r){r?this.Ff=tn(this.Ff,13):this.Ff=rn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,21)},set:function(r){r?this.Ff=tn(this.Ff,21):this.Ff=rn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,23)},set:function(r){r?this.Ff=tn(this.Ff,23):this.Ff=rn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,24)},set:function(r){r?this.Ff=tn(this.Ff,24):this.Ff=rn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,25)},set:function(r){r?this.Ff=tn(this.Ff,25):this.Ff=rn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,26)},set:function(r){r?this.Ff=tn(this.Ff,26):this.Ff=rn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){Number.isInteger(r)&&(t=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ri(no,Mi);var jc=function(){no.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!en(this.Ff,14)},set:function(t){t?this.Ff=tn(this.Ff,14):this.Ff=rn(this.Ff,14)}}),this.password=!0};ri(jc,no);var Ot={CheckBox:{createAppearanceStream:function(){return{N:{On:Ot.CheckBox.YesNormal},D:{On:Ot.CheckBox.YesPushDown,Off:Ot.CheckBox.OffPushDown}}},YesPushDown:function(t){var r=$i(t);r.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),s=Uu(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Jt(Ot.internal.getWidth(t))+" "+Jt(Ot.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+Jt(s.fontSize)+" Tf "+o),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),r.stream=n.join(`
`),r},YesNormal:function(t){var r=$i(t);r.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=[],s=Ot.internal.getHeight(t),a=Ot.internal.getWidth(t),c=Uu(t,t.caption);return o.push("1 g"),o.push("0 0 "+Jt(a)+" "+Jt(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Jt(a-1)+" "+Jt(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Jt(c.fontSize)+" Tf "+i),o.push(c.text),o.push("ET"),o.push("Q"),r.stream=o.join(`
`),r},OffPushDown:function(t){var r=$i(t);r.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Jt(Ot.internal.getWidth(t))+" "+Jt(Ot.internal.getHeight(t))+" re"),n.push("f"),r.stream=n.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(t){var r={D:{Off:Ot.RadioButton.Circle.OffPushDown},N:{}};return r.N[t]=Ot.RadioButton.Circle.YesNormal,r.D[t]=Ot.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(t){var r=$i(t);r.scope=t.scope;var n=[],i=Ot.internal.getWidth(t)<=Ot.internal.getHeight(t)?Ot.internal.getWidth(t)/4:Ot.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Ot.internal.Bezier_C,s=Number((i*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Rs(Ot.internal.getWidth(t)/2)+" "+Rs(Ot.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r},YesPushDown:function(t){var r=$i(t);r.scope=t.scope;var n=[],i=Ot.internal.getWidth(t)<=Ot.internal.getHeight(t)?Ot.internal.getWidth(t)/4:Ot.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),s=Number((o*Ot.internal.Bezier_C).toFixed(5)),a=Number((i*Ot.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Rs(Ot.internal.getWidth(t)/2)+" "+Rs(Ot.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),n.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),n.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),n.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Rs(Ot.internal.getWidth(t)/2)+" "+Rs(Ot.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r},OffPushDown:function(t){var r=$i(t);r.scope=t.scope;var n=[],i=Ot.internal.getWidth(t)<=Ot.internal.getHeight(t)?Ot.internal.getWidth(t)/4:Ot.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),s=Number((o*Ot.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Rs(Ot.internal.getWidth(t)/2)+" "+Rs(Ot.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),n.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),n.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),n.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r}},Cross:{createAppearanceStream:function(t){var r={D:{Off:Ot.RadioButton.Cross.OffPushDown},N:{}};return r.N[t]=Ot.RadioButton.Cross.YesNormal,r.D[t]=Ot.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(t){var r=$i(t);r.scope=t.scope;var n=[],i=Ot.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Jt(Ot.internal.getWidth(t)-2)+" "+Jt(Ot.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Jt(i.x1.x)+" "+Jt(i.x1.y)+" m"),n.push(Jt(i.x2.x)+" "+Jt(i.x2.y)+" l"),n.push(Jt(i.x4.x)+" "+Jt(i.x4.y)+" m"),n.push(Jt(i.x3.x)+" "+Jt(i.x3.y)+" l"),n.push("s"),n.push("Q"),r.stream=n.join(`
`),r},YesPushDown:function(t){var r=$i(t);r.scope=t.scope;var n=Ot.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+Jt(Ot.internal.getWidth(t))+" "+Jt(Ot.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Jt(Ot.internal.getWidth(t)-2)+" "+Jt(Ot.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(Jt(n.x1.x)+" "+Jt(n.x1.y)+" m"),i.push(Jt(n.x2.x)+" "+Jt(n.x2.y)+" l"),i.push(Jt(n.x4.x)+" "+Jt(n.x4.y)+" m"),i.push(Jt(n.x3.x)+" "+Jt(n.x3.y)+" l"),i.push("s"),i.push("Q"),r.stream=i.join(`
`),r},OffPushDown:function(t){var r=$i(t);r.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Jt(Ot.internal.getWidth(t))+" "+Jt(Ot.internal.getHeight(t))+" re"),n.push("f"),r.stream=n.join(`
`),r}}},createDefaultAppearanceStream:function(t){var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+r+" "+t.fontSize+" Tf "+n}};Ot.internal={Bezier_C:.551915024494,calculateCross:function(t){var r=Ot.internal.getWidth(t),n=Ot.internal.getHeight(t),i=Math.min(r,n);return{x1:{x:(r-i)/2,y:(n-i)/2+i},x2:{x:(r-i)/2+i,y:(n-i)/2},x3:{x:(r-i)/2,y:(n-i)/2},x4:{x:(r-i)/2+i,y:(n-i)/2+i}}}},Ot.internal.getWidth=function(t){var r=0;return Lr(t)==="object"&&(r=Yf(t.Rect[2])),r},Ot.internal.getHeight=function(t){var r=0;return Lr(t)==="object"&&(r=Yf(t.Rect[3])),r};var iv=Yr.addField=function(t){if(nv(this,t),!(t instanceof Mi))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=t).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Yr.AcroFormChoiceField=ia,Yr.AcroFormListBox=sa,Yr.AcroFormComboBox=oa,Yr.AcroFormEditBox=yc,Yr.AcroFormButton=yn,Yr.AcroFormPushButton=vc,Yr.AcroFormRadioButton=aa,Yr.AcroFormCheckBox=wc,Yr.AcroFormTextField=no,Yr.AcroFormPasswordField=jc,Yr.AcroFormAppearance=Ot,Yr.AcroForm={ChoiceField:ia,ListBox:sa,ComboBox:oa,EditBox:yc,Button:yn,PushButton:vc,RadioButton:aa,CheckBox:wc,TextField:no,PasswordField:jc,Appearance:Ot},Wt.AcroForm={ChoiceField:ia,ListBox:sa,ComboBox:oa,EditBox:yc,Button:yn,PushButton:vc,RadioButton:aa,CheckBox:wc,TextField:no,PasswordField:jc,Appearance:Ot};Wt.AcroForm;function G0(t){return t.reduce(function(r,n,i){return r[n]=i,r},{})}(function(t){t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(j,A){var E,z,se,re,v,ne=r;if((A=A||r)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(D(j))for(v in n)for(se=n[v],E=0;E<se.length;E+=1){for(re=!0,z=0;z<se[E].length;z+=1)if(se[E][z]!==void 0&&se[E][z]!==j[z]){re=!1;break}if(re===!0){ne=v;break}}else for(v in n)for(se=n[v],E=0;E<se.length;E+=1){for(re=!0,z=0;z<se[E].length;z+=1)if(se[E][z]!==void 0&&se[E][z]!==j.charCodeAt(z)){re=!1;break}if(re===!0){ne=v;break}}return ne===r&&A!==r&&(ne=A),ne},o=function j(A){for(var E=this.internal.write,z=this.internal.putStream,se=(0,this.internal.getFilters)();se.indexOf("FlateEncode")!==-1;)se.splice(se.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:A.width}),re.push({key:"Height",value:A.height}),A.colorSpace===O.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===O.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var v="",ne=0,M=A.transparency.length;ne<M;ne++)v+=A.transparency[ne]+" "+A.transparency[ne]+" ";re.push({key:"Mask",value:"["+v+"]"})}A.sMask!==void 0&&re.push({key:"SMask",value:A.objectId+1+" 0 R"});var y=A.filter!==void 0?["/"+A.filter]:void 0;if(z({data:A.data,additionalKeyValues:re,alreadyAppliedFilters:y,objectId:A.objectId}),E("endobj"),"sMask"in A&&A.sMask!==void 0){var Y="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,C={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:Y,data:A.sMask};"filter"in A&&(C.filter=A.filter),j.call(this,C)}if(A.colorSpace===O.INDEXED){var W=this.internal.newObject();z({data:V(new Uint8Array(A.palette)),objectId:W}),E("endobj")}},s=function(){var j=this.internal.collections.addImage_images;for(var A in j)o.call(this,j[A])},a=function(){var j,A=this.internal.collections.addImage_images,E=this.internal.write;for(var z in A)E("/I"+(j=A[z]).index,j.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var j=this.internal.collections.addImage_images;return c.call(this),j},h=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(j){return typeof t["process"+j.toUpperCase()]=="function"},x=function(j){return Lr(j)==="object"&&j.nodeType===1},b=function(j,A){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var E=""+j.getAttribute("src");if(E.indexOf("data:image/")===0)return tl(unescape(E).split("base64,").pop());var z=t.loadFile(E,!0);if(z!==void 0)return z}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var se;switch(A){case"PNG":se="image/png";break;case"WEBP":se="image/webp";break;case"JPEG":case"JPG":default:se="image/jpeg"}return tl(j.toDataURL(se,1).split("base64,").pop())}},m=function(j){var A=this.internal.collections.addImage_images;if(A){for(var E in A)if(j===A[E].alias)return A[E]}},_=function(j,A,E){return j||A||(j=-96,A=-96),j<0&&(j=-1*E.width*72/j/this.internal.scaleFactor),A<0&&(A=-1*E.height*72/A/this.internal.scaleFactor),j===0&&(j=A*E.width/E.height),A===0&&(A=j*E.height/E.width),[j,A]},w=function(j,A,E,z,se,re){var v=_.call(this,E,z,se),ne=this.internal.getCoordinateString,M=this.internal.getVerticalCoordinateString,y=u.call(this);if(E=v[0],z=v[1],y[se.index]=se,re){re*=Math.PI/180;var Y=Math.cos(re),C=Math.sin(re),W=function($){return $.toFixed(4)},L=[W(Y),W(C),W(-1*C),W(Y),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,ne(j),M(A+z),"cm"].join(" ")),this.internal.write(L.join(" ")),this.internal.write([ne(E),"0","0",ne(z),"0","0","cm"].join(" "))):this.internal.write([ne(E),"0","0",ne(z),ne(j),M(A+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+se.index+" Do"),this.internal.write("Q")},O=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=t.__addimage__.sHashCode=function(j){var A,E,z=0;if(typeof j=="string")for(E=j.length,A=0;A<E;A++)z=(z<<5)-z+j.charCodeAt(A),z|=0;else if(D(j))for(E=j.byteLength/2,A=0;A<E;A++)z=(z<<5)-z+j[A],z|=0;return z},H=t.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var A=!0;return j.length===0&&(A=!1),j.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(A=!1),A},Z=t.__addimage__.extractImageFromDataUrl=function(j){if(j==null||!(j=j.trim()).startsWith("data:"))return null;var A=j.indexOf(",");return A<0?null:j.substring(0,A).trim().endsWith("base64")?j.substring(A+1):null},N=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"};t.__addimage__.isArrayBuffer=function(j){return N()&&j instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(j){return N()&&typeof Uint32Array!="undefined"&&(j instanceof Int8Array||j instanceof Uint8Array||typeof Uint8ClampedArray!="undefined"&&j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array)},B=t.__addimage__.binaryStringToUint8Array=function(j){for(var A=j.length,E=new Uint8Array(A),z=0;z<A;z++)E[z]=j.charCodeAt(z);return E},V=t.__addimage__.arrayBufferToBinaryString=function(j){for(var A="",E=D(j)?j:new Uint8Array(j),z=0;z<E.length;z+=8192)A+=String.fromCharCode.apply(null,E.subarray(z,z+8192));return A};t.addImage=function(){var j,A,E,z,se,re,v,ne,M;if(typeof arguments[1]=="number"?(A=r,E=arguments[1],z=arguments[2],se=arguments[3],re=arguments[4],v=arguments[5],ne=arguments[6],M=arguments[7]):(A=arguments[1],E=arguments[2],z=arguments[3],se=arguments[4],re=arguments[5],v=arguments[6],ne=arguments[7],M=arguments[8]),Lr(j=arguments[0])==="object"&&!x(j)&&"imageData"in j){var y=j;j=y.imageData,A=y.format||A||r,E=y.x||E||0,z=y.y||z||0,se=y.w||y.width||se,re=y.h||y.height||re,v=y.alias||v,ne=y.compression||ne,M=y.rotation||y.angle||M}var Y=this.internal.getFilters();if(ne===void 0&&Y.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(E)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var C=R.call(this,j,A,v,ne);return w.call(this,E,z,se,re,C,M),this};var R=function(j,A,E,z){var se,re,v;if(typeof j=="string"&&i(j)===r){j=unescape(j);var ne=P(j,!1);(ne!==""||(ne=t.loadFile(j,!0))!==void 0)&&(j=ne)}if(x(j)&&(j=b(j,A)),A=i(j,A),!p(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((v=E)==null||v.length===0)&&(E=function(M){return typeof M=="string"||D(M)?T(M):D(M.data)?T(M.data):null}(j)),(se=m.call(this,E))||(N()&&(j instanceof Uint8Array||A==="RGBA"||(re=j,j=B(j))),se=this["process"+A.toUpperCase()](j,h.call(this),E,function(M){return M&&typeof M=="string"&&(M=M.toUpperCase()),M in t.image_compression?M:k.NONE}(z),re)),!se)throw new Error("An unknown error occurred whilst processing the image.");return se},P=t.__addimage__.convertBase64ToBinaryString=function(j,A){A=typeof A!="boolean"||A;var E,z="";if(typeof j=="string"){var se;E=(se=Z(j))!==null&&se!==void 0?se:j;try{z=tl(E)}catch(re){if(A)throw H(E)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};t.getImageProperties=function(j){var A,E,z="";if(x(j)&&(j=b(j)),typeof j=="string"&&i(j)===r&&((z=P(j,!1))===""&&(z=t.loadFile(j)||""),j=z),E=i(j),!p(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(!N()||j instanceof Uint8Array||(j=B(j)),!(A=this["process"+E.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=E,A}})(Wt.API),function(t){var r=function(n){if(n!==void 0&&n!="")return!0};Wt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,o,s,a=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,p=!1,x=0;x<h.length&&!p;x++)switch((i=h[x]).type){case"link":(r(i.options.url)||r(i.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var b=0;b<h.length;b++){i=h[b];var m=this.internal.pdfEscape,_=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),O=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(w.objId),T=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+a(i.bounds.x)+" "+c(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y)+"] ")+"/Contents ("+m(k(i.contents))+")",s+=" /Popup "+O.objId+" 0 R",s+=" /P "+u.objId+" 0 R",s+=" /T ("+m(k(T))+") >>",w.content=s;var H=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+a(i.bounds.x+30)+" "+c(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+c(i.bounds.y)+"] ")+" /Parent "+H,i.open&&(s+=" /Open true"),s+=" >>",O.content=s,this.internal.write(w.objId,"0 R",O.objId,"0 R");break;case"freetext":o="/Rect ["+a(i.bounds.x)+" "+c(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y+i.bounds.h)+"] ";var Z=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+m(_(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var N=this.annotations._nameMap[i.options.name];i.options.pageNumber=N.page,i.options.top=N.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+m(_(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var D=c(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+D+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,o,s,a){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(n),y:h(i),w:u(n+o),h:h(i+s)},options:a,type:"link"})},t.textWithLink=function(n,i,o,s){var a,c,u=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){c=s.maxWidth;var p=this.splitTextToSize(n,c).length;a=Math.ceil(h*p)}else c=u,a=h;return this.text(n,i,o,s),o+=.2*h,s.align==="center"&&(i-=u/2),s.align==="right"&&(i-=u),this.link(i,o-h,c,a,s),u},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(Wt.API),function(t){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(w){return r[w.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},c=t.__arabicParser__.isArabicEndLetter=function(w){return a(w)&&s(w)&&r[w.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(w){return a(w)&&o.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return a(w)&&s(w)&&r[w.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return a(w)&&s(w)&&r[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return a(w)&&s(w)&&r[w.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return a(w)&&s(w)&&r[w.charCodeAt(0)].length==4},x=t.__arabicParser__.resolveLigatures=function(w){var O=0,k=n,T="",H=0;for(O=0;O<w.length;O+=1)k[w.charCodeAt(O)]!==void 0?(H++,typeof(k=k[w.charCodeAt(O)])=="number"&&(T+=String.fromCharCode(k),k=n,H=0),O===w.length-1&&(k=n,T+=w.charAt(O-(H-1)),O-=H-1,H=0)):(k=n,T+=w.charAt(O-H),O-=H,H=0);return T};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&i[w.charCodeAt(0)]!==void 0};var b=t.__arabicParser__.getCorrectForm=function(w,O,k){return a(w)?s(w)===!1?-1:!h(w)||!a(O)&&!a(k)||!a(k)&&c(O)||c(w)&&!a(O)||c(w)&&u(O)||c(w)&&c(O)?0:p(w)&&a(O)&&!c(O)&&a(k)&&h(k)?3:c(w)||!a(k)?1:2:-1},m=function(w){var O=0,k=0,T=0,H="",Z="",N="",D=(w=w||"").split("\\s+"),B=[];for(O=0;O<D.length;O+=1){for(B.push(""),k=0;k<D[O].length;k+=1)H=D[O][k],Z=D[O][k-1],N=D[O][k+1],a(H)?(T=b(H,Z,N),B[O]+=T!==-1?String.fromCharCode(r[H.charCodeAt(0)][T]):H):B[O]+=H;B[O]=x(B[O])}return B.join(" ")},_=t.__arabicParser__.processArabic=t.processArabic=function(){var w,O=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(O)){var T=0;for(k=[],T=0;T<O.length;T+=1)Array.isArray(O[T])?k.push([m(O[T][0]),O[T][1],O[T][2]]):k.push([m(O[T])]);w=k}else w=m(O);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",_])}(Wt.API),Wt.API.autoPrint=function(t){var r;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})}return this},function(t){var r=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(c){o=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(c){s=c}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(c){a=c}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(n,i){var o;if((n=n||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])}(Wt.API),function(t){var r={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var x=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return x},set:function(w){x=w}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(w){b=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(w){_=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return i.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,h){i.call(this);var p=(h=h||{}).fontSize||this.getFontSize(),x=h.font||this.getFont(),b=h.scaleFactor||this.internal.scaleFactor,m=0,_=0,w=0,O=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var k=h.maxWidth;k>0?typeof u=="string"?u=this.splitTextToSize(u,k):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(H,Z){return H.concat(O.splitTextToSize(Z,k))},[])):u=Array.isArray(u)?u:[u];for(var T=0;T<u.length;T++)m<(w=this.getStringUnitWidth(u[T],{font:x})*p)&&(m=w);return m!==0&&(_=u.length),{w:m/=b,h:Math.max((_*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/b,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var u=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new s(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var u;u=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var h=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,x=this.internal.__cell__.margins||r,b=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===u.lineNumber?(u.x=(h.x||0)+(h.width||0),u.y=h.y||0):h.y+h.height+u.height+x.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=x.top,m&&b&&(this.printHeaderRow(u.lineNumber,!0),u.y+=b[0].height)):u.y=h.y+h.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,n===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-p,u.y+p,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+p,{align:"center",baseline:"top",maxWidth:u.width-p-p}):this.text(u.text,u.x+p,u.y+p,{align:"left",baseline:"top",maxWidth:u.width-p-p})),this.internal.__cell__.lastCell=u,this};t.table=function(u,h,p,x,b){if(i.call(this),!p)throw new Error("No data for PDF table.");var m,_,w,O,k=[],T=[],H=[],Z={},N={},D=[],B=[],V=(b=b||{}).autoSize||!1,R=b.printHeaders!==!1,P=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,j=b.margins||Object.assign({width:this.getPageWidth()},r),A=typeof b.padding=="number"?b.padding:3,E=b.headerBackgroundColor||"#c8c8c8",z=b.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=E,this.internal.__cell__.headerTextColor=z,this.setFontSize(P),x==null)T=k=Object.keys(p[0]),H=k.map(function(){return"left"});else if(Array.isArray(x)&&Lr(x[0])==="object")for(k=x.map(function(y){return y.name}),T=x.map(function(y){return y.prompt||y.name||""}),H=x.map(function(y){return y.align||"left"}),m=0;m<x.length;m+=1)N[x[m].name]=x[m].width*(19.049976/25.4);else Array.isArray(x)&&typeof x[0]=="string"&&(T=k=x,H=k.map(function(){return"left"}));if(V||Array.isArray(x)&&typeof x[0]=="string")for(m=0;m<k.length;m+=1){for(Z[O=k[m]]=p.map(function(y){return y[O]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(T[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=Z[O],this.setFont(void 0,"normal"),w=0;w<_.length;w+=1)D.push(this.getTextDimensions(_[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[O]=Math.max.apply(null,D)+A+A,D=[]}if(R){var se={};for(m=0;m<k.length;m+=1)se[k[m]]={},se[k[m]].text=T[m],se[k[m]].align=H[m];var re=c.call(this,se,N);B=k.map(function(y){return new s(u,h,N[y],re,se[y].text,void 0,se[y].align)}),this.setTableHeaderRow(B),this.printHeaderRow(1,!1)}var v=x.reduce(function(y,Y){return y[Y.name]=Y.align,y},{});for(m=0;m<p.length;m+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:m,data:p[m]},this);var ne=c.call(this,p[m],N);for(w=0;w<k.length;w+=1){var M=p[m][k[w]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:m,col:w,data:M},this),a.call(this,new s(u,h,N[k[w]],ne,M,m+2,v[k[w]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=h,this};var c=function(u,h){var p=this.internal.__cell__.padding,x=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(u).map(function(m){var _=u[m];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,h[m]-p-p)},this).map(function(m){return this.getLineHeightFactor()*m.length*x/b+p+p},this).reduce(function(m,_){return Math.max(m,_)},0)};t.setTableHeaderRow=function(u){i.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,h){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var x=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(x[0],x[1],x[2],x[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){p=this.internal.__cell__.tableHeaderRow[m].clone(),h&&(p.y=this.internal.__cell__.margins.top||0,b.push(p)),p.lineNumber=u;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(_)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),n=!1}}(Wt.API);var V0={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Y0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Hu=G0(Y0),J0=[100,200,300,400,500,600,700,800,900],sv=G0(J0);function $u(t){var r=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return V0[s=s||"normal"]?s:"normal"}(t.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(s){return typeof Hu[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:r,style:n,weight:i,stretch:o,src:t.src||[],ref:t.ref||{name:r,style:[o,n,i].join(" ")}}}function Jf(t,r,n,i){var o;for(o=n;o>=0&&o<r.length;o+=i)if(t[r[o]])return t[r[o]];for(o=n;o>=0&&o<r.length;o-=i)if(t[r[o]])return t[r[o]]}var ov={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Xf={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Kf(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function av(t,r,n){for(var i=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},ov,n.genericFontFamilies||{}),s=null,a=null,c=0;c<r.length;++c)if(o[(s=$u(r[c])).family]&&(s.family=o[s.family]),t.hasOwnProperty(s.family)){a=t[s.family];break}if(!(a=a||t[i]))throw new Error("Could not find a font-family for the rule '"+Kf(s)+"' and default family '"+i+"'.");if(a=function(u,h){if(h[u])return h[u];var p=Hu[u],x=p<=Hu.normal?-1:1,b=Jf(h,Y0,p,x);if(!b)throw new Error("Could not find a matching font-stretch value for "+u);return b}(s.stretch,a),a=function(u,h){if(h[u])return h[u];for(var p=V0[u],x=0;x<p.length;++x)if(h[p[x]])return h[p[x]];throw new Error("Could not find a matching font-style for "+u)}(s.style,a),!(a=function(u,h){if(h[u])return h[u];if(u===400&&h[500])return h[500];if(u===500&&h[400])return h[400];var p=sv[u],x=Jf(h,J0,p,u<400?-1:1);if(!x)throw new Error("Could not find a matching font-weight for value "+u);return x}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Kf(s)+"'.");return a}function Qf(t){return t.trimLeft()}function lv(t,r){for(var n=0;n<t.length;){if(t.charAt(n)===r)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function cv(t){var r=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],t.substring(r[0].length)]}var hc,Zf,ep,yu=["times"];(function(t){var r,n,i,o,s,a,c,u,h,p=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new u,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new a,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new a,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new x(this),r=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,h=new p}]);var x=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=C;Object.defineProperty(this,"pdf",{get:function(){return W}});var L=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return L},set:function(ye){L=!!ye}});var $=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return $},set:function(ye){$=!!ye}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(ye){isNaN(ye)||(Q=ye)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(ye){isNaN(ye)||(ie=ye)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(ye){var ee;typeof ye=="number"?ee=[ye,ye,ye,ye]:((ee=new Array(4))[0]=ye[0],ee[1]=ye.length>=2?ye[1]:ee[0],ee[2]=ye.length>=3?ye[2]:ee[0],ee[3]=ye.length>=4?ye[3]:ee[1]),h.margin=ee}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(ye){de=ye}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(ye){le=ye}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(ye){be=ye}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(ye){ye instanceof p&&(h=ye)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(ye){h.path=ye}});var fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return fe},set:function(ye){fe=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var ee;ee=b(ye),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var ee=b(ye);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Fe=null;function Oe(ye,ee){if(Fe===null){var _e=function(Me){var Le=[];return Object.keys(Me).forEach(function(ue){Me[ue].forEach(function(Ye){var Ze=null;switch(Ye){case"bold":Ze={family:ue,weight:"bold"};break;case"italic":Ze={family:ue,style:"italic"};break;case"bolditalic":Ze={family:ue,weight:"bold",style:"italic"};break;case"":case"normal":Ze={family:ue}}Ze!==null&&(Ze.ref={name:ue,style:Ye},Le.push(Ze))})}),Le}(ye.getFontList());Fe=function(Me){for(var Le={},ue=0;ue<Me.length;++ue){var Ye=$u(Me[ue]),Ze=Ye.family,mt=Ye.stretch,$e=Ye.style,je=Ye.weight;Le[Ze]=Le[Ze]||{},Le[Ze][mt]=Le[Ze][mt]||{},Le[Ze][mt][$e]=Le[Ze][mt][$e]||{},Le[Ze][mt][$e][je]=Ye}return Le}(_e.concat(ee))}return Fe}var Ue=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ue},set:function(ye){Fe=null,Ue=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var ee;if(this.ctx.font=ye,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var _e=ee[1];ee[2];var Me=ee[3],Le=ee[4];ee[5];var ue=ee[6],Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(Ye==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:Ye==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var Ze=function(Se){var Ie,ze,it=[],Ge=Se.trim();if(Ge==="")return yu;if(Ge in Xf)return[Xf[Ge]];for(;Ge!=="";){switch(ze=null,Ie=(Ge=Qf(Ge)).charAt(0)){case'"':case"'":ze=lv(Ge.substring(1),Ie);break;default:ze=cv(Ge)}if(ze===null||(it.push(ze[0]),(Ge=Qf(ze[1]))!==""&&Ge.charAt(0)!==","))return yu;Ge=Ge.replace(/^,/,"")}return it}(ue);if(this.fontFaces){var mt=av(Oe(this.pdf,this.fontFaces),Ze.map(function(Se){return{family:Se,stretch:"normal",weight:Me,style:_e}}));this.pdf.setFont(mt.ref.name,mt.ref.style)}else{var $e="";(Me==="bold"||parseInt(Me,10)>=700||_e==="bold")&&($e="bold"),_e==="italic"&&($e+="italic"),$e.length===0&&($e="normal");for(var je="",ve={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Pe=0;Pe<Ze.length;Pe++){if(this.pdf.internal.getFont(Ze[Pe],$e,{noFallback:!0,disableWarning:!0})!==void 0){je=Ze[Pe];break}if($e==="bolditalic"&&this.pdf.internal.getFont(Ze[Pe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)je=Ze[Pe],$e="bold";else if(this.pdf.internal.getFont(Ze[Pe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){je=Ze[Pe],$e="normal";break}}if(je===""){for(var De=0;De<Ze.length;De++)if(ve[Ze[De]]){je=ve[Ze[De]];break}}je=je===""?"Times":je,this.pdf.setFont(je,$e)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};x.prototype.setLineDash=function(C){this.lineDash=C},x.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},x.prototype.fill=function(){Z.call(this,"fill",!1)},x.prototype.stroke=function(){Z.call(this,"stroke",!1)},x.prototype.beginPath=function(){this.path=[{type:"begin"}]},x.prototype.moveTo=function(C,W){if(isNaN(C)||isNaN(W))throw _r.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var L=this.ctx.transform.applyToPoint(new a(C,W));this.path.push({type:"mt",x:L.x,y:L.y}),this.ctx.lastPoint=new a(C,W)},x.prototype.closePath=function(){var C=new a(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Lr(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){C=new a(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(C.x,C.y)},x.prototype.lineTo=function(C,W){if(isNaN(C)||isNaN(W))throw _r.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var L=this.ctx.transform.applyToPoint(new a(C,W));this.path.push({type:"lt",x:L.x,y:L.y}),this.ctx.lastPoint=new a(L.x,L.y)},x.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},x.prototype.quadraticCurveTo=function(C,W,L,$){if(isNaN(L)||isNaN($)||isNaN(C)||isNaN(W))throw _r.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new a(L,$)),ie=this.ctx.transform.applyToPoint(new a(C,W));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(Q.x,Q.y)},x.prototype.bezierCurveTo=function(C,W,L,$,Q,ie){if(isNaN(Q)||isNaN(ie)||isNaN(C)||isNaN(W)||isNaN(L)||isNaN($))throw _r.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new a(Q,ie)),le=this.ctx.transform.applyToPoint(new a(C,W)),be=this.ctx.transform.applyToPoint(new a(L,$));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:be.x,y2:be.y,x:de.x,y:de.y}),this.ctx.lastPoint=new a(de.x,de.y)},x.prototype.arc=function(C,W,L,$,Q,ie){if(isNaN(C)||isNaN(W)||isNaN(L)||isNaN($)||isNaN(Q))throw _r.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new a(C,W));C=de.x,W=de.y;var le=this.ctx.transform.applyToPoint(new a(0,L)),be=this.ctx.transform.applyToPoint(new a(0,0));L=Math.sqrt(Math.pow(le.x-be.x,2)+Math.pow(le.y-be.y,2))}Math.abs(Q-$)>=2*Math.PI&&($=0,Q=2*Math.PI),this.path.push({type:"arc",x:C,y:W,radius:L,startAngle:$,endAngle:Q,counterclockwise:ie})},x.prototype.arcTo=function(C,W,L,$,Q){throw new Error("arcTo not implemented.")},x.prototype.rect=function(C,W,L,$){if(isNaN(C)||isNaN(W)||isNaN(L)||isNaN($))throw _r.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,W),this.lineTo(C+L,W),this.lineTo(C+L,W+$),this.lineTo(C,W+$),this.lineTo(C,W),this.lineTo(C+L,W),this.lineTo(C,W)},x.prototype.fillRect=function(C,W,L,$){if(isNaN(C)||isNaN(W)||isNaN(L)||isNaN($))throw _r.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,W,L,$),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},x.prototype.strokeRect=function(C,W,L,$){if(isNaN(C)||isNaN(W)||isNaN(L)||isNaN($))throw _r.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(C,W,L,$),this.stroke())},x.prototype.clearRect=function(C,W,L,$){if(isNaN(C)||isNaN(W)||isNaN(L)||isNaN($))throw _r.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,W,L,$))},x.prototype.save=function(C){C=typeof C!="boolean"||C;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,L=0;L<this.pdf.internal.getNumberOfPages();L++)this.pdf.setPage(L+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var $=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=$}},x.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,L=0;L<this.pdf.internal.getNumberOfPages();L++)this.pdf.setPage(L+1),this.pdf.internal.out("Q");this.pdf.setPage(W),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},x.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(C){var W,L,$,Q;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))W=0,L=0,$=0,Q=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(ie!==null)W=parseInt(ie[1]),L=parseInt(ie[2]),$=parseInt(ie[3]),Q=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)W=parseInt(ie[1]),L=parseInt(ie[2]),$=parseInt(ie[3]),Q=parseFloat(ie[4]);else{if(Q=1,typeof C=="string"&&C.charAt(0)!=="#"){var de=new B0(C);C=de.ok?de.toHex():"#000000"}C.length===4?(W=C.substring(1,2),W+=W,L=C.substring(2,3),L+=L,$=C.substring(3,4),$+=$):(W=C.substring(1,3),L=C.substring(3,5),$=C.substring(5,7)),W=parseInt(W,16),L=parseInt(L,16),$=parseInt($,16)}}return{r:W,g:L,b:$,a:Q,style:C}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};x.prototype.fillText=function(C,W,L,$){if(isNaN(W)||isNaN(L)||typeof C!="string")throw _r.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if($=isNaN($)?void 0:$,!m.call(this)){var Q=ne(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;A.call(this,{text:C,x:W,y:L,scale:ie,angle:Q,align:this.textAlign,maxWidth:$})}},x.prototype.strokeText=function(C,W,L,$){if(isNaN(W)||isNaN(L)||typeof C!="string")throw _r.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){$=isNaN($)?void 0:$;var Q=ne(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;A.call(this,{text:C,x:W,y:L,scale:ie,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:$})}},x.prototype.measureText=function(C){if(typeof C!="string")throw _r.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,L=this.pdf.internal.scaleFactor,$=W.internal.getFontSize(),Q=W.getStringUnitWidth(C)*$/W.internal.scaleFactor,ie=function(de){var le=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return le}}),this};return new ie({width:Q*=Math.round(96*L/72*1e4)/1e4})},x.prototype.scale=function(C,W){if(isNaN(C)||isNaN(W))throw _r.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var L=new u(C,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(L)},x.prototype.rotate=function(C){if(isNaN(C))throw _r.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new u(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},x.prototype.translate=function(C,W){if(isNaN(C)||isNaN(W))throw _r.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var L=new u(1,0,0,1,C,W);this.ctx.transform=this.ctx.transform.multiply(L)},x.prototype.transform=function(C,W,L,$,Q,ie){if(isNaN(C)||isNaN(W)||isNaN(L)||isNaN($)||isNaN(Q)||isNaN(ie))throw _r.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new u(C,W,L,$,Q,ie);this.ctx.transform=this.ctx.transform.multiply(de)},x.prototype.setTransform=function(C,W,L,$,Q,ie){C=isNaN(C)?1:C,W=isNaN(W)?0:W,L=isNaN(L)?0:L,$=isNaN($)?1:$,Q=isNaN(Q)?0:Q,ie=isNaN(ie)?0:ie,this.ctx.transform=new u(C,W,L,$,Q,ie)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};x.prototype.drawImage=function(C,W,L,$,Q,ie,de,le,be){var fe=this.pdf.getImageProperties(C),Fe=1,Oe=1,Ue=1,ye=1;$!==void 0&&le!==void 0&&(Ue=le/$,ye=be/Q,Fe=fe.width/$*le/$,Oe=fe.height/Q*be/Q),ie===void 0&&(ie=W,de=L,W=0,L=0),$!==void 0&&le===void 0&&(le=$,be=Q),$===void 0&&le===void 0&&(le=fe.width,be=fe.height);for(var ee,_e=this.ctx.transform.decompose(),Me=ne(_e.rotate.shx),Le=new u,ue=(Le=(Le=(Le=Le.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale)).applyToRectangle(new c(ie-W*Ue,de-L*ye,$*Fe,Q*Oe)),Ye=O.call(this,ue),Ze=[],mt=0;mt<Ye.length;mt+=1)Ze.indexOf(Ye[mt])===-1&&Ze.push(Ye[mt]);if(H(Ze),this.autoPaging)for(var $e=Ze[0],je=Ze[Ze.length-1],ve=$e;ve<je+1;ve++){this.pdf.setPage(ve);var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],De=ve===1?this.posY+this.margin[0]:this.margin[0],Se=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ie=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=ve===1?0:Se+(ve-2)*Ie;if(this.ctx.clip_path.length!==0){var it=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(ee,this.posX+this.margin[3],-ze+De+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=it}var Ge=JSON.parse(JSON.stringify(ue));Ge=T([Ge],this.posX+this.margin[3],-ze+De+this.ctx.prevPageLastElemOffset)[0];var ot=(ve>$e||ve<je)&&w.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,Ie,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",Ge.x,Ge.y,Ge.w,Ge.h,null,null,Me),ot&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",ue.x,ue.y,ue.w,ue.h,null,null,Me)};var O=function(C,W,L){var $=[];W=W||this.pdf.internal.pageSize.width,L=L||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":$.push(Math.floor((C.y+Q)/L)+1);break;case"arc":$.push(Math.floor((C.y+Q-C.radius)/L)+1),$.push(Math.floor((C.y+Q+C.radius)/L)+1);break;case"qct":var ie=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);$.push(Math.floor((ie.y+Q)/L)+1),$.push(Math.floor((ie.y+ie.h+Q)/L)+1);break;case"bct":var de=y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);$.push(Math.floor((de.y+Q)/L)+1),$.push(Math.floor((de.y+de.h+Q)/L)+1);break;case"rect":$.push(Math.floor((C.y+Q)/L)+1),$.push(Math.floor((C.y+C.h+Q)/L)+1)}for(var le=0;le<$.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<$[le];)k.call(this);return $},k=function(){var C=this.fillStyle,W=this.strokeStyle,L=this.font,$=this.lineCap,Q=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=W,this.font=L,this.lineCap=$,this.lineWidth=Q,this.lineJoin=ie},T=function(C,W,L){for(var $=0;$<C.length;$++)switch(C[$].type){case"bct":C[$].x2+=W,C[$].y2+=L;case"qct":C[$].x1+=W,C[$].y1+=L;case"mt":case"lt":case"arc":default:C[$].x+=W,C[$].y+=L}return C},H=function(C){return C.sort(function(W,L){return W-L})},Z=function(C,W){for(var L,$,Q=this.fillStyle,ie=this.strokeStyle,de=this.lineCap,le=this.lineWidth,be=Math.abs(le*this.ctx.transform.scaleX),fe=this.lineJoin,Fe=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),Ue=[],ye=0;ye<Oe.length;ye++)if(Oe[ye].x!==void 0)for(var ee=O.call(this,Oe[ye]),_e=0;_e<ee.length;_e+=1)Ue.indexOf(ee[_e])===-1&&Ue.push(ee[_e]);for(var Me=0;Me<Ue.length;Me++)for(;this.pdf.internal.getNumberOfPages()<Ue[Me];)k.call(this);if(H(Ue),this.autoPaging)for(var Le=Ue[0],ue=Ue[Ue.length-1],Ye=Le;Ye<ue+1;Ye++){this.pdf.setPage(Ye),this.fillStyle=Q,this.strokeStyle=ie,this.lineCap=de,this.lineWidth=be,this.lineJoin=fe;var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mt=Ye===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ve=Ye===1?0:$e+(Ye-2)*je;if(this.ctx.clip_path.length!==0){var Pe=this.path;L=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(L,this.posX+this.margin[3],-ve+mt+this.ctx.prevPageLastElemOffset),N.call(this,C,!0),this.path=Pe}if($=JSON.parse(JSON.stringify(Fe)),this.path=T($,this.posX+this.margin[3],-ve+mt+this.ctx.prevPageLastElemOffset),W===!1||Ye===0){var De=(Ye>Le||Ye<ue)&&w.call(this);De&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,je,null).clip().discardPath()),N.call(this,C,W),De&&this.pdf.restoreGraphicsState()}this.lineWidth=le}else this.lineWidth=be,N.call(this,C,W),this.lineWidth=le;this.path=Fe},N=function(C,W){if((C!=="stroke"||W||!_.call(this))&&(C==="stroke"||W||!m.call(this))){for(var L,$,Q=[],ie=this.path,de=0;de<ie.length;de++){var le=ie[de];switch(le.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:le,deltas:[],abs:[]});break;case"lt":var be=Q.length;if(ie[de-1]&&!isNaN(ie[de-1].x)&&(L=[le.x-ie[de-1].x,le.y-ie[de-1].y],be>0)){for(;be>=0;be--)if(Q[be-1].close!==!0&&Q[be-1].begin!==!0){Q[be-1].deltas.push(L),Q[be-1].abs.push(le);break}}break;case"bct":L=[le.x1-ie[de-1].x,le.y1-ie[de-1].y,le.x2-ie[de-1].x,le.y2-ie[de-1].y,le.x-ie[de-1].x,le.y-ie[de-1].y],Q[Q.length-1].deltas.push(L);break;case"qct":var fe=ie[de-1].x+2/3*(le.x1-ie[de-1].x),Fe=ie[de-1].y+2/3*(le.y1-ie[de-1].y),Oe=le.x+2/3*(le.x1-le.x),Ue=le.y+2/3*(le.y1-le.y),ye=le.x,ee=le.y;L=[fe-ie[de-1].x,Fe-ie[de-1].y,Oe-ie[de-1].x,Ue-ie[de-1].y,ye-ie[de-1].x,ee-ie[de-1].y],Q[Q.length-1].deltas.push(L);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(le)}}$=W?null:C==="stroke"?"stroke":"fill";for(var _e=!1,Me=0;Me<Q.length;Me++)if(Q[Me].arc)for(var Le=Q[Me].abs,ue=0;ue<Le.length;ue++){var Ye=Le[ue];Ye.type==="arc"?V.call(this,Ye.x,Ye.y,Ye.radius,Ye.startAngle,Ye.endAngle,Ye.counterclockwise,void 0,W,!_e):E.call(this,Ye.x,Ye.y),_e=!0}else if(Q[Me].close===!0)this.pdf.internal.out("h"),_e=!1;else if(Q[Me].begin!==!0){var Ze=Q[Me].start.x,mt=Q[Me].start.y;z.call(this,Q[Me].deltas,Ze,mt),_e=!0}$&&R.call(this,$),W&&P.call(this)}},D=function(C){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,L=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-L;case"top":return C+W-L;case"hanging":return C+W-2*L;case"middle":return C+W/2-L;case"ideographic":return C;case"alphabetic":default:return C}},B=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};x.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(W,L){this.colorStops.push([W,L])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},x.prototype.createPattern=function(){return this.createLinearGradient()},x.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(C,W,L,$,Q,ie,de,le,be){for(var fe=re.call(this,L,$,Q,ie),Fe=0;Fe<fe.length;Fe++){var Oe=fe[Fe];Fe===0&&(be?j.call(this,Oe.x1+C,Oe.y1+W):E.call(this,Oe.x1+C,Oe.y1+W)),se.call(this,C,W,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}le?P.call(this):R.call(this,de)},R=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(C,W){this.pdf.internal.out(n(C)+" "+i(W)+" m")},A=function(C){var W;switch(C.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var L=this.pdf.getTextDimensions(C.text),$=D.call(this,C.y),Q=B.call(this,$)-L.h,ie=this.ctx.transform.applyToPoint(new a(C.x,$)),de=this.ctx.transform.decompose(),le=new u;le=(le=(le=le.multiply(de.translate)).multiply(de.skew)).multiply(de.scale);for(var be,fe,Fe,Oe=this.ctx.transform.applyToRectangle(new c(C.x,$,L.w,L.h)),Ue=le.applyToRectangle(new c(C.x,Q,L.w,L.h)),ye=O.call(this,Ue),ee=[],_e=0;_e<ye.length;_e+=1)ee.indexOf(ye[_e])===-1&&ee.push(ye[_e]);if(H(ee),this.autoPaging)for(var Me=ee[0],Le=ee[ee.length-1],ue=Me;ue<Le+1;ue++){this.pdf.setPage(ue);var Ye=ue===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mt=this.pdf.internal.pageSize.height-this.margin[2],$e=mt-this.margin[0],je=this.pdf.internal.pageSize.width-this.margin[1],ve=je-this.margin[3],Pe=ue===1?0:Ze+(ue-2)*$e;if(this.ctx.clip_path.length!==0){var De=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(be,this.posX+this.margin[3],-1*Pe+Ye),N.call(this,"fill",!0),this.path=De}var Se=T([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-Pe+Ye+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*C.scale),Fe=this.lineWidth,this.lineWidth=Fe*C.scale);var Ie=this.autoPaging!=="text";if(Ie||Se.y+Se.h<=mt){if(Ie||Se.y>=Ye&&Se.x<=je){var ze=Ie?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||je-Se.x)[0],it=T([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-Pe+Ye+this.ctx.prevPageLastElemOffset)[0],Ge=Ie&&(ue>Me||ue<Le)&&w.call(this);Ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,$e,null).clip().discardPath()),this.pdf.text(ze,it.x,it.y,{angle:C.angle,align:W,renderingMode:C.renderingMode}),Ge&&this.pdf.restoreGraphicsState()}}else Se.y<mt&&(this.ctx.prevPageLastElemOffset+=mt-Se.y);C.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=Fe)}else C.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*C.scale),Fe=this.lineWidth,this.lineWidth=Fe*C.scale),this.pdf.text(C.text,ie.x+this.posX,ie.y+this.posY,{angle:C.angle,align:W,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=Fe)},E=function(C,W,L,$){L=L||0,$=$||0,this.pdf.internal.out(n(C+L)+" "+i(W+$)+" l")},z=function(C,W,L){return this.pdf.lines(C,W,L,null,null)},se=function(C,W,L,$,Q,ie,de,le){this.pdf.internal.out([r(o(L+C)),r(s($+W)),r(o(Q+C)),r(s(ie+W)),r(o(de+C)),r(s(le+W)),"c"].join(" "))},re=function(C,W,L,$){for(var Q=2*Math.PI,ie=Math.PI/2;W>L;)W-=Q;var de=Math.abs(L-W);de<Q&&$&&(de=Q-de);for(var le=[],be=$?-1:1,fe=W;de>1e-5;){var Fe=fe+be*Math.min(de,ie);le.push(v.call(this,C,fe,Fe)),de-=Math.abs(Fe-fe),fe=Fe}return le},v=function(C,W,L){var $=(L-W)/2,Q=C*Math.cos($),ie=C*Math.sin($),de=Q,le=-ie,be=de*de+le*le,fe=be+de*Q+le*ie,Fe=4/3*(Math.sqrt(2*be*fe)-fe)/(de*ie-le*Q),Oe=de-Fe*le,Ue=le+Fe*de,ye=Oe,ee=-Ue,_e=$+W,Me=Math.cos(_e),Le=Math.sin(_e);return{x1:C*Math.cos(W),y1:C*Math.sin(W),x2:Oe*Me-Ue*Le,y2:Oe*Le+Ue*Me,x3:ye*Me-ee*Le,y3:ye*Le+ee*Me,x4:C*Math.cos(L),y4:C*Math.sin(L)}},ne=function(C){return 180*C/Math.PI},M=function(C,W,L,$,Q,ie){var de=C+.5*(L-C),le=W+.5*($-W),be=Q+.5*(L-Q),fe=ie+.5*($-ie),Fe=Math.min(C,Q,de,be),Oe=Math.max(C,Q,de,be),Ue=Math.min(W,ie,le,fe),ye=Math.max(W,ie,le,fe);return new c(Fe,Ue,Oe-Fe,ye-Ue)},y=function(C,W,L,$,Q,ie,de,le){var be,fe,Fe,Oe,Ue,ye,ee,_e,Me,Le,ue,Ye,Ze,mt,$e=L-C,je=$-W,ve=Q-L,Pe=ie-$,De=de-Q,Se=le-ie;for(fe=0;fe<41;fe++)Me=(ee=(Fe=C+(be=fe/40)*$e)+be*((Ue=L+be*ve)-Fe))+be*(Ue+be*(Q+be*De-Ue)-ee),Le=(_e=(Oe=W+be*je)+be*((ye=$+be*Pe)-Oe))+be*(ye+be*(ie+be*Se-ye)-_e),fe==0?(ue=Me,Ye=Le,Ze=Me,mt=Le):(ue=Math.min(ue,Me),Ye=Math.min(Ye,Le),Ze=Math.max(Ze,Me),mt=Math.max(mt,Le));return new c(Math.round(ue),Math.round(Ye),Math.round(Ze-ue),Math.round(mt-Ye))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,W,L=(C=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:W}));this.prevLineDash!==L&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=L)}}})(Wt.API),function(t){var r=function(s){var a,c,u,h,p,x,b,m,_,w;for(c=[],u=0,h=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;h>u;u+=4)(p=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(x=(p=((p=((p=((p=(p-(w=p%85))/85)-(_=p%85))/85)-(m=p%85))/85)-(b=p%85))/85)%85,c.push(x+33,b+33,m+33,_+33,w+33)):c.push(122);return function(O,k){for(var T=k;T>0;T--)O.pop()}(c,a.length),String.fromCharCode.apply(String,c)+"~>"},n=function(s){var a,c,u,h,p,x=String,b="length",m=255,_="charCodeAt",w="slice",O="replace";for(s[w](-2),s=s[w](0,-2)[O](/\s/g,"")[O]("z","!!!!!"),u=[],h=0,p=(s+=a="uuuuu"[w](s[b]%5||5))[b];p>h;h+=5)c=52200625*(s[_](h)-33)+614125*(s[_](h+1)-33)+7225*(s[_](h+2)-33)+85*(s[_](h+3)-33)+(s[_](h+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(k,T){for(var H=T;H>0;H--)k.pop()}(u,a[b]),x.fromCharCode.apply(x,u)},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",u=0;u<s.length;u+=2)c+=String.fromCharCode("0x"+(s[u]+s[u+1]));return c},o=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return s=(a=Du(a)).reduce(function(u,h){return u+String.fromCharCode(h)},"")};t.processDataByFilters=function(s,a){var c=0,u=s||"",h=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=r(u),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=o(u),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:u,reverseChain:h.reverse().join(" ")}}}(Wt.API),function(t){t.loadFile=function(r,n,i){return function(o,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var c=void 0;try{c=function(u,h,p){var x=new XMLHttpRequest,b=0,m=function(_){var w=_.length,O=[],k=String.fromCharCode;for(b=0;b<w;b+=1)O.push(k(255&_.charCodeAt(b)));return O.join("")};if(x.open("GET",u,!h),x.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(x.onload=function(){x.status===200?p(m(this.responseText)):p(void 0)}),x.send(null),h&&x.status===200)return m(x.responseText)}(o,s,a)}catch{}return c}(r,n,i)},t.loadImageFile=t.loadFile}(Wt.API),function(t){function r(){return($t.html2canvas?Promise.resolve($t.html2canvas):ho(()=>import("./html2canvas.esm-Dw6mdHwC.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return($t.DOMPurify?Promise.resolve($t.DOMPurify):ho(()=>import("./purify.es-Co4A5LKW.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var i=function(a){var c=Lr(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},o=function(a,c){var u=document.createElement(a);for(var h in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[h]=c.style[h];return u},s=function a(c){var u=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),h=a.convert(Promise.resolve(),u);return h=(h=h.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||function(u){switch(i(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(u){return this.set({src:o("div",{innerHTML:a,dompurify:u})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=function u(h,p){for(var x=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),b=h.firstChild;b;b=b.nextSibling)p!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||x.appendChild(u(b,p));return h.nodeType===1&&(h.nodeName==="CANVAS"?(x.width=h.width,x.height=h.height,x.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(x.value=h.value),x.addEventListener("load",function(){x.scrollTop=h.scrollTop,x.scrollLeft=h.scrollLeft},!0)),x}(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(r).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(r).then(function(c){var u=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=h,h)for(var b=0;b<h.length;++b){var m=h[b],_=m.src.find(function(w){return w.format==="truetype"});_&&u.addFont(_.url,m.ref.name,m.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,u.context2d.save(!0),c(this.prop.container,x)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(i(a)!=="object")return this;var c=Object.keys(a||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=a[u]};switch(u){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[u]=a[u]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var u=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(u):u})},s.prototype.setMargin=function(a){return this.then(function(){switch(i(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(u,h){return Math.floor(u*h/72*96)}return this.then(function(){(a=a||Wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,u,h){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,u,h){return this.setProgress(a?this.progress.val+a:null,c||null,u?this.progress.n+u:null,h?this.progress.stack.concat(h):null)},s.prototype.then=function(a,c){var u=this;return this.thenCore(a,c,function(h,p){return u.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(x){return u.updateProgress(null,h),x}).then(h,p).then(function(x){return u.updateProgress(1),x})})},s.prototype.thenCore=function(a,c,u){u=u||Promise.prototype.then,a&&(a=a.bind(this)),c&&(c=c.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=u.call(h,a,c);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(u){c=c.thenCore(u)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Wt.getPageSize=function(a,c,u){if(Lr(a)==="object"){var h=a;a=h.orientation,c=h.unit||c,u=h.format||u}c=c||"mm",u=u||"a4",a=(""+(a||"P")).toLowerCase();var p,x=(""+u).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var m,_=0,w=0;if(b.hasOwnProperty(x))_=b[x][1]/p,w=b[x][0]/p;else try{_=u[1],w=u[0]}catch{throw new Error("Invalid format: "+u)}if(a==="p"||a==="portrait")a="p",w>_&&(m=w,w=_,_=m);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",_>w&&(m=w,w=_,_=m)}return{width:w,height:_,unit:c,k:p,orientation:a}},t.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map($u):null;var u=new s(c);return c.worker?u:u.from(a).doCallback()}}(Wt.API),Wt.API.addJS=function(t){return ep=t,this.internal.events.subscribe("postPutResources",function(){hc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(hc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Zf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ep+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){hc!==void 0&&Zf!==void 0&&this.internal.out("/Names <</JavaScript "+hc+" 0 R>>")}),this},function(t){var r;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),s=0;s<o.length;s++){var a=o[s],c=i.exec(a);if(c!=null){var u=c[1];n.internal.newObjectDeferredBegin(u,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,p=[];for(s=0;s<h;s++){var x=n.internal.newObject();p.push(x);var b=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),r=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+r+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,o,s){var a={title:o,options:s,children:[]};return i==null&&(i=this.root),i.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var a=i.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var c=this.count=this.count_r({count:0},a);if(c>0&&this.line("/Count "+c),a.options&&a.options.pageNumber){var u=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var h=0;h<i.children.length;h++)this.renderItems(i.children[h])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,o){for(var s=0;s<o.children.length;s++)i.count++,this.count_r(i,o.children[s]);return i.count}}])}(Wt.API),function(t){var r=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,o,s,a,c){var u,h=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(u=function(x){for(var b,m=256*x.charCodeAt(4)+x.charCodeAt(5),_=x.length,w={width:0,height:0,numcomponents:1},O=4;O<_;O+=2){if(O+=m,r.indexOf(x.charCodeAt(O+1))!==-1){b=256*x.charCodeAt(O+5)+x.charCodeAt(O+6),w={width:256*x.charCodeAt(O+7)+x.charCodeAt(O+8),height:b,numcomponents:x.charCodeAt(O+9)};break}m=256*x.charCodeAt(O+2)+x.charCodeAt(O+3)}return w}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:n,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:h,index:i,alias:o}}return p}}(Wt.API);var Vo,fc,tp,rp,np,dv=function(){var t,r,n;function i(s){var a,c,u,h,p,x,b,m,_,w,O,k,T,H;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},x=null;;){switch(a=this.readUInt32(),_=function(){var Z,N;for(N=[],Z=0;Z<4;++Z)N.push(String.fromCharCode(this.data[this.pos++]));return N}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":x&&this.animation.frames.push(x),this.pos+=4,x={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),h=this.readUInt16()||100,x.delay=1e3*p/h,x.disposeOp=this.data[this.pos++],x.blendOp=this.data[this.pos++],x.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,a-=4),s=(x!=null?x.data:void 0)||this.imgData,k=0;0<=a?k<a:k>a;0<=a?++k:--k)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((w=u-this.transparency.indexed.length)>0)for(T=0;0<=w?T<w:T>w;0<=w?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":b=(O=this.read(a)).indexOf(0),m=String.fromCharCode.apply(String,O.slice(0,b)),this.text[m]=String.fromCharCode.apply(String,O.slice(b+1));break;case"IEND":return x&&this.animation.frames.push(x),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(H=this.colorType)===4||H===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var a,c;for(c=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)c.push(this.data[this.pos++]);return c},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*a),u=0,h=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(x,b,m,_){var w,O,k,T,H,Z,N,D,B,V,R,P,j,A,E,z,se,re,v,ne,M,y=Math.ceil((h.width-x)/m),Y=Math.ceil((h.height-b)/_),C=h.width==y&&h.height==Y;for(A=a*y,P=C?c:new Uint8Array(A*Y),Z=s.length,j=0,O=0;j<Y&&u<Z;){switch(s[u++]){case 0:for(T=se=0;se<A;T=se+=1)P[O++]=s[u++];break;case 1:for(T=re=0;re<A;T=re+=1)w=s[u++],H=T<a?0:P[O-a],P[O++]=(w+H)%256;break;case 2:for(T=v=0;v<A;T=v+=1)w=s[u++],k=(T-T%a)/a,E=j&&P[(j-1)*A+k*a+T%a],P[O++]=(E+w)%256;break;case 3:for(T=ne=0;ne<A;T=ne+=1)w=s[u++],k=(T-T%a)/a,H=T<a?0:P[O-a],E=j&&P[(j-1)*A+k*a+T%a],P[O++]=(w+Math.floor((H+E)/2))%256;break;case 4:for(T=M=0;M<A;T=M+=1)w=s[u++],k=(T-T%a)/a,H=T<a?0:P[O-a],j===0?E=z=0:(E=P[(j-1)*A+k*a+T%a],z=k&&P[(j-1)*A+(k-1)*a+T%a]),N=H+E-z,D=Math.abs(N-H),V=Math.abs(N-E),R=Math.abs(N-z),B=D<=V&&D<=R?H:V<=R?E:z,P[O++]=(w+B)%256;break;default:throw new Error("Invalid filter algorithm: "+s[u-1])}if(!C){var W=((b+j*_)*h.width+x)*a,L=j*A;for(T=0;T<y;T+=1){for(var $=0;$<a;$+=1)c[W++]=P[L++];W+=(m-1)*a}}j++}}return s=Wy(s),h.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),c},i.prototype.decodePalette=function(){var s,a,c,u,h,p,x,b,m;for(c=this.palette,p=this.transparency.indexed||[],h=new Uint8Array((p.length||0)+c.length),u=0,s=0,a=x=0,b=c.length;x<b;a=x+=3)h[u++]=c[a],h[u++]=c[a+1],h[u++]=c[a+2],h[u++]=(m=p[s++])!=null?m:255;return h},i.prototype.copyToImageData=function(s,a){var c,u,h,p,x,b,m,_,w,O,k;if(u=this.colors,w=null,c=this.hasAlphaChannel,this.palette.length&&(w=(k=this._decodedPalette)!=null?k:this._decodedPalette=this.decodePalette(),u=4,c=!0),_=(h=s.data||s).length,x=w||a,p=b=0,u===1)for(;p<_;)m=w?4*a[p/4]:b,O=x[m++],h[p++]=O,h[p++]=O,h[p++]=O,h[p++]=c?x[m++]:255,b=m;else for(;p<_;)m=w?4*a[p/4]:b,h[p++]=x[m++],h[p++]=x[m++],h[p++]=x[m++],h[p++]=c?x[m++]:255,b=m},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var o=function(){if(Object.prototype.toString.call($t)==="[object Window]"){try{r=$t.document.createElement("canvas"),n=r.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(s){var a;if(o()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=r.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var a,c,u,h,p,x,b,m;if(this.animation){for(m=[],c=p=0,x=(b=this.animation.frames).length;p<x;c=++p)a=b[c],u=s.createImageData(a.width,a.height),h=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(u,h),a.imageData=u,m.push(a.image=t(u));return m}},i.prototype.renderFrame=function(s,a){var c,u,h;return c=(u=this.animation.frames)[a],h=u[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?s.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&s.putImageData(h.imageData,h.xOffset,h.yOffset),c.blendOp===0&&s.clearRect(c.xOffset,c.yOffset,c.width,c.height),s.drawImage(c.image,c.xOffset,c.yOffset)},i.prototype.animate=function(s){var a,c,u,h,p,x,b=this;return c=0,x=this.animation,h=x.numFrames,u=x.frames,p=x.numPlays,(a=function(){var m,_;if(m=c++%h,_=u[m],b.renderFrame(s,m),h>1&&c/h<p)return b.animation._timeout=setTimeout(a,_.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var a,c;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(c=a.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),a.putImageData(c,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function uv(t){var r=0;if(t[r++]!==71||t[r++]!==73||t[r++]!==70||t[r++]!==56||(t[r++]+1&253)!=56||t[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[r++]|t[r++]<<8,i=t[r++]|t[r++]<<8,o=t[r++],s=o>>7,a=1<<(7&o)+1;t[r++],t[r++];var c=null,u=null;s&&(c=r,u=a,r+=3*a);var h=!0,p=[],x=0,b=null,m=0,_=null;for(this.width=n,this.height=i;h&&r<t.length;)switch(t[r++]){case 33:switch(t[r++]){case 255:if(t[r]!==11||t[r+1]==78&&t[r+2]==69&&t[r+3]==84&&t[r+4]==83&&t[r+5]==67&&t[r+6]==65&&t[r+7]==80&&t[r+8]==69&&t[r+9]==50&&t[r+10]==46&&t[r+11]==48&&t[r+12]==3&&t[r+13]==1&&t[r+16]==0)r+=14,_=t[r++]|t[r++]<<8,r++;else for(r+=12;;){if(!((j=t[r++])>=0))throw Error("Invalid block size");if(j===0)break;r+=j}break;case 249:if(t[r++]!==4||t[r+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[r++];x=t[r++]|t[r++]<<8,b=t[r++],(1&w)==0&&(b=null),m=w>>2&7,r++;break;case 254:for(;;){if(!((j=t[r++])>=0))throw Error("Invalid block size");if(j===0)break;r+=j}break;default:throw new Error("Unknown graphic control label: 0x"+t[r-1].toString(16))}break;case 44:var O=t[r++]|t[r++]<<8,k=t[r++]|t[r++]<<8,T=t[r++]|t[r++]<<8,H=t[r++]|t[r++]<<8,Z=t[r++],N=Z>>6&1,D=1<<(7&Z)+1,B=c,V=u,R=!1;Z>>7&&(R=!0,B=r,V=D,r+=3*D);var P=r;for(r++;;){var j;if(!((j=t[r++])>=0))throw Error("Invalid block size");if(j===0)break;r+=j}p.push({x:O,y:k,width:T,height:H,has_local_palette:R,palette_offset:B,palette_size:V,data_offset:P,data_length:r-P,transparent_index:b,interlaced:!!N,delay:x,disposal:m});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[r-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return _},this.frameInfo=function(A){if(A<0||A>=p.length)throw new Error("Frame index out of range.");return p[A]},this.decodeAndBlitFrameBGRA=function(A,E){var z=this.frameInfo(A),se=z.width*z.height,re=new Uint8Array(se);ip(t,z.data_offset,re,se);var v=z.palette_offset,ne=z.transparent_index;ne===null&&(ne=256);var M=z.width,y=n-M,Y=M,C=4*(z.y*n+z.x),W=4*((z.y+z.height)*n+z.x),L=C,$=4*y;z.interlaced===!0&&($+=4*n*7);for(var Q=8,ie=0,de=re.length;ie<de;++ie){var le=re[ie];if(Y===0&&(Y=M,(L+=$)>=W&&($=4*y+4*n*(Q-1),L=C+(M+y)*(Q<<1),Q>>=1)),le===ne)L+=4;else{var be=t[v+3*le],fe=t[v+3*le+1],Fe=t[v+3*le+2];E[L++]=Fe,E[L++]=fe,E[L++]=be,E[L++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(A,E){var z=this.frameInfo(A),se=z.width*z.height,re=new Uint8Array(se);ip(t,z.data_offset,re,se);var v=z.palette_offset,ne=z.transparent_index;ne===null&&(ne=256);var M=z.width,y=n-M,Y=M,C=4*(z.y*n+z.x),W=4*((z.y+z.height)*n+z.x),L=C,$=4*y;z.interlaced===!0&&($+=4*n*7);for(var Q=8,ie=0,de=re.length;ie<de;++ie){var le=re[ie];if(Y===0&&(Y=M,(L+=$)>=W&&($=4*y+4*n*(Q-1),L=C+(M+y)*(Q<<1),Q>>=1)),le===ne)L+=4;else{var be=t[v+3*le],fe=t[v+3*le+1],Fe=t[v+3*le+2];E[L++]=be,E[L++]=fe,E[L++]=Fe,E[L++]=255}--Y}}}function ip(t,r,n,i){for(var o=t[r++],s=1<<o,a=s+1,c=a+1,u=o+1,h=(1<<u)-1,p=0,x=0,b=0,m=t[r++],_=new Int32Array(4096),w=null;;){for(;p<16&&m!==0;)x|=t[r++]<<p,p+=8,m===1?m=t[r++]:--m;if(p<u)break;var O=x&h;if(x>>=u,p-=u,O!==s){if(O===a)break;for(var k=O<c?O:w,T=0,H=k;H>s;)H=_[H]>>8,++T;var Z=H;if(b+T+(k!==O?1:0)>i)return void _r.log("Warning, gif stream longer than expected.");n[b++]=Z;var N=b+=T;for(k!==O&&(n[b++]=Z),H=k;T--;)H=_[H],n[--N]=255&H,H>>=8;w!==null&&c<4096&&(_[c++]=w<<8|Z,c>=h+1&&u<12&&(++u,h=h<<1|1)),w=O}else c=a+1,h=(1<<(u=o+1))-1,w=null}return b!==i&&_r.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function vu(t){var r,n,i,o,s,a=Math.floor,c=new Array(64),u=new Array(64),h=new Array(64),p=new Array(64),x=new Array(65535),b=new Array(65535),m=new Array(64),_=new Array(64),w=[],O=0,k=7,T=new Array(64),H=new Array(64),Z=new Array(64),N=new Array(256),D=new Array(2048),B=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],se=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(C,W){for(var L=0,$=0,Q=new Array,ie=1;ie<=16;ie++){for(var de=1;de<=C[ie];de++)Q[W[$]]=[],Q[W[$]][0]=L,Q[W[$]][1]=ie,$++,L++;L*=2}return Q}function v(C){for(var W=C[0],L=C[1]-1;L>=0;)W&1<<L&&(O|=1<<k),L--,--k<0&&(O==255?(ne(255),ne(0)):ne(O),k=7,O=0)}function ne(C){w.push(C)}function M(C){ne(C>>8&255),ne(255&C)}function y(C,W,L,$,Q){for(var ie,de=Q[0],le=Q[240],be=function(Le,ue){var Ye,Ze,mt,$e,je,ve,Pe,De,Se,Ie,ze=0;for(Se=0;Se<8;++Se){Ye=Le[ze],Ze=Le[ze+1],mt=Le[ze+2],$e=Le[ze+3],je=Le[ze+4],ve=Le[ze+5],Pe=Le[ze+6];var it=Ye+(De=Le[ze+7]),Ge=Ye-De,ot=Ze+Pe,Nt=Ze-Pe,At=mt+ve,ht=mt-ve,bt=$e+je,Ne=$e-je,lt=it+bt,zt=it-bt,Ae=ot+At,We=ot-At;Le[ze]=lt+Ae,Le[ze+4]=lt-Ae;var nt=.707106781*(We+zt);Le[ze+2]=zt+nt,Le[ze+6]=zt-nt;var tt=.382683433*((lt=Ne+ht)-(We=Nt+Ge)),gt=.5411961*lt+tt,Ct=1.306562965*We+tt,Ut=.707106781*(Ae=ht+Nt),Ve=Ge+Ut,Je=Ge-Ut;Le[ze+5]=Je+gt,Le[ze+3]=Je-gt,Le[ze+1]=Ve+Ct,Le[ze+7]=Ve-Ct,ze+=8}for(ze=0,Se=0;Se<8;++Se){Ye=Le[ze],Ze=Le[ze+8],mt=Le[ze+16],$e=Le[ze+24],je=Le[ze+32],ve=Le[ze+40],Pe=Le[ze+48];var It=Ye+(De=Le[ze+56]),dt=Ye-De,jt=Ze+Pe,lr=Ze-Pe,Mr=mt+ve,an=mt-ve,Ci=$e+je,fr=$e-je,Cn=It+Ci,Ln=It-Ci,Hn=jt+Mr,ni=jt-Mr;Le[ze]=Cn+Hn,Le[ze+32]=Cn-Hn;var he=.707106781*(ni+Ln);Le[ze+16]=Ln+he,Le[ze+48]=Ln-he;var kt=.382683433*((Cn=fr+an)-(ni=lr+dt)),Et=.5411961*Cn+kt,Tt=1.306562965*ni+kt,mr=.707106781*(Hn=an+lr),tr=dt+mr,rr=dt-mr;Le[ze+40]=rr+Et,Le[ze+24]=rr-Et,Le[ze+8]=tr+Tt,Le[ze+56]=tr-Tt,ze++}for(Se=0;Se<64;++Se)Ie=Le[Se]*ue[Se],m[Se]=Ie>0?Ie+.5|0:Ie-.5|0;return m}(C,W),fe=0;fe<64;++fe)_[B[fe]]=be[fe];var Fe=_[0]-L;L=_[0],Fe==0?v($[0]):(v($[b[ie=32767+Fe]]),v(x[ie]));for(var Oe=63;Oe>0&&_[Oe]==0;)Oe--;if(Oe==0)return v(de),L;for(var Ue,ye=1;ye<=Oe;){for(var ee=ye;_[ye]==0&&ye<=Oe;)++ye;var _e=ye-ee;if(_e>=16){Ue=_e>>4;for(var Me=1;Me<=Ue;++Me)v(le);_e&=15}ie=32767+_[ye],v(Q[(_e<<4)+b[ie]]),v(x[ie]),ye++}return Oe!=63&&v(de),L}function Y(C){C=Math.min(Math.max(C,1),100),s!=C&&(function(W){for(var L=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$=0;$<64;$++){var Q=a((L[$]*W+50)/100);Q=Math.min(Math.max(Q,1),255),c[B[$]]=Q}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var le=a((ie[de]*W+50)/100);le=Math.min(Math.max(le,1),255),u[B[de]]=le}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],fe=0,Fe=0;Fe<8;Fe++)for(var Oe=0;Oe<8;Oe++)h[fe]=1/(c[B[fe]]*be[Fe]*be[Oe]*8),p[fe]=1/(u[B[fe]]*be[Fe]*be[Oe]*8),fe++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),s=C)}this.encode=function(C,W){W&&Y(W),w=new Array,O=0,k=7,M(65496),M(65504),M(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),M(1),M(1),ne(0),ne(0),function(){M(65499),M(132),ne(0);for(var Ze=0;Ze<64;Ze++)ne(c[Ze]);ne(1);for(var mt=0;mt<64;mt++)ne(u[mt])}(),function(Ze,mt){M(65472),M(17),ne(8),M(mt),M(Ze),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(C.width,C.height),function(){M(65476),M(418),ne(0);for(var Ze=0;Ze<16;Ze++)ne(V[Ze+1]);for(var mt=0;mt<=11;mt++)ne(R[mt]);ne(16);for(var $e=0;$e<16;$e++)ne(P[$e+1]);for(var je=0;je<=161;je++)ne(j[je]);ne(1);for(var ve=0;ve<16;ve++)ne(A[ve+1]);for(var Pe=0;Pe<=11;Pe++)ne(E[Pe]);ne(17);for(var De=0;De<16;De++)ne(z[De+1]);for(var Se=0;Se<=161;Se++)ne(se[Se])}(),M(65498),M(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var L=0,$=0,Q=0;O=0,k=7,this.encode.displayName="_encode_";for(var ie,de,le,be,fe,Fe,Oe,Ue,ye,ee=C.data,_e=C.width,Me=C.height,Le=4*_e,ue=0;ue<Me;){for(ie=0;ie<Le;){for(fe=Le*ue+ie,Oe=-1,Ue=0,ye=0;ye<64;ye++)Fe=fe+(Ue=ye>>3)*Le+(Oe=4*(7&ye)),ue+Ue>=Me&&(Fe-=Le*(ue+1+Ue-Me)),ie+Oe>=Le&&(Fe-=ie+Oe-Le+4),de=ee[Fe++],le=ee[Fe++],be=ee[Fe++],T[ye]=(D[de]+D[le+256>>0]+D[be+512>>0]>>16)-128,H[ye]=(D[de+768>>0]+D[le+1024>>0]+D[be+1280>>0]>>16)-128,Z[ye]=(D[de+1280>>0]+D[le+1536>>0]+D[be+1792>>0]>>16)-128;L=y(T,h,L,r,i),$=y(H,p,$,n,o),Q=y(Z,p,Q,n,o),ie+=32}ue+=8}if(k>=0){var Ye=[];Ye[1]=k+1,Ye[0]=(1<<k+1)-1,v(Ye)}return M(65497),new Uint8Array(w)},t=t||50,function(){for(var C=String.fromCharCode,W=0;W<256;W++)N[W]=C(W)}(),r=re(V,R),n=re(A,E),i=re(P,j),o=re(z,se),function(){for(var C=1,W=2,L=1;L<=15;L++){for(var $=C;$<W;$++)b[32767+$]=L,x[32767+$]=[],x[32767+$][1]=L,x[32767+$][0]=$;for(var Q=-(W-1);Q<=-C;Q++)b[32767+Q]=L,x[32767+Q]=[],x[32767+Q][1]=L,x[32767+Q][0]=W-1+Q;C<<=1,W<<=1}}(),function(){for(var C=0;C<256;C++)D[C]=19595*C,D[C+256>>0]=38470*C,D[C+512>>0]=7471*C+32768,D[C+768>>0]=-11059*C,D[C+1024>>0]=-21709*C,D[C+1280>>0]=32768*C+8421375,D[C+1536>>0]=-27439*C,D[C+1792>>0]=-5329*C}(),Y(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Oi(t,r){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function sp(t){function r(V){if(!V)throw Error("assert :P")}function n(V,R,P){for(var j=0;4>j;j++)if(V[R+j]!=P.charCodeAt(j))return!0;return!1}function i(V,R,P,j,A){for(var E=0;E<A;E++)V[R+E]=P[j+E]}function o(V,R,P,j){for(var A=0;A<j;A++)V[R+A]=P}function s(V){return new Int32Array(V)}function a(V,R){for(var P=[],j=0;j<V;j++)P.push(new R);return P}function c(V,R){var P=[];return function j(A,E,z){for(var se=z[E],re=0;re<se&&(A.push(z.length>E+1?[]:new R),!(z.length<E+1));re++)j(A[re],E+1,z)}(P,0,V),P}var u=function(){var V=this;function R(l,d){for(var g=1<<d-1>>>0;l&g;)g>>>=1;return g?(l&g-1)+g:l}function P(l,d,g,S,F){r(!(S%g));do l[d+(S-=g)]=F;while(0<S)}function j(l,d,g,S,F){if(r(2328>=F),512>=F)var U=s(512);else if((U=s(F))==null)return 0;return function(J,X,K,te,me,Re){var Ee,we,Qe=X,qe=1<<K,ge=s(16),xe=s(16);for(r(me!=0),r(te!=null),r(J!=null),r(0<K),we=0;we<me;++we){if(15<te[we])return 0;++ge[te[we]]}if(ge[0]==me)return 0;for(xe[1]=0,Ee=1;15>Ee;++Ee){if(ge[Ee]>1<<Ee)return 0;xe[Ee+1]=xe[Ee]+ge[Ee]}for(we=0;we<me;++we)Ee=te[we],0<te[we]&&(Re[xe[Ee]++]=we);if(xe[15]==1)return(te=new A).g=0,te.value=Re[0],P(J,Qe,1,qe,te),qe;var Xe,rt=-1,Ke=qe-1,Pt=0,xt=1,qt=1,vt=1<<K;for(we=0,Ee=1,me=2;Ee<=K;++Ee,me<<=1){if(xt+=qt<<=1,0>(qt-=ge[Ee]))return 0;for(;0<ge[Ee];--ge[Ee])(te=new A).g=Ee,te.value=Re[we++],P(J,Qe+Pt,me,vt,te),Pt=R(Pt,Ee)}for(Ee=K+1,me=2;15>=Ee;++Ee,me<<=1){if(xt+=qt<<=1,0>(qt-=ge[Ee]))return 0;for(;0<ge[Ee];--ge[Ee]){if(te=new A,(Pt&Ke)!=rt){for(Qe+=vt,Xe=1<<(rt=Ee)-K;15>rt&&!(0>=(Xe-=ge[rt]));)++rt,Xe<<=1;qe+=vt=1<<(Xe=rt-K),J[X+(rt=Pt&Ke)].g=Xe+K,J[X+rt].value=Qe-X-rt}te.g=Ee-K,te.value=Re[we++],P(J,Qe+(Pt>>K),me,vt,te),Pt=R(Pt,Ee)}}return xt!=2*xe[15]-1?0:qe}(l,d,g,S,F,U)}function A(){this.value=this.g=0}function E(){this.value=this.g=0}function z(){this.G=a(5,A),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(_n,E)}function se(l,d,g,S){r(l!=null),r(d!=null),r(2147483648>S),l.Ca=254,l.I=0,l.b=-8,l.Ka=0,l.oa=d,l.pa=g,l.Jd=d,l.Yc=g+S,l.Zc=4<=S?g+S-4+1:g,ie(l)}function re(l,d){for(var g=0;0<d--;)g|=le(l,128)<<d;return g}function v(l,d){var g=re(l,d);return de(l)?-g:g}function ne(l,d,g,S){var F,U=0;for(r(l!=null),r(d!=null),r(4294967288>S),l.Sb=S,l.Ra=0,l.u=0,l.h=0,4<S&&(S=4),F=0;F<S;++F)U+=d[g+F]<<8*F;l.Ra=U,l.bb=S,l.oa=d,l.pa=g}function M(l){for(;8<=l.u&&l.bb<l.Sb;)l.Ra>>>=8,l.Ra+=l.oa[l.pa+l.bb]<<No-8>>>0,++l.bb,l.u-=8;L(l)&&(l.h=1,l.u=0)}function y(l,d){if(r(0<=d),!l.h&&d<=Po){var g=W(l)&Lo[d];return l.u+=d,M(l),g}return l.h=1,l.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(l){return l.Ra>>>(l.u&No-1)>>>0}function L(l){return r(l.bb<=l.Sb),l.h||l.bb==l.Sb&&l.u>No}function $(l,d){l.u=d,l.h=L(l)}function Q(l){l.u>=Ea&&(r(l.u>=Ea),M(l))}function ie(l){r(l!=null&&l.oa!=null),l.pa<l.Zc?(l.I=(l.oa[l.pa++]|l.I<<8)>>>0,l.b+=8):(r(l!=null&&l.oa!=null),l.pa<l.Yc?(l.b+=8,l.I=l.oa[l.pa++]|l.I<<8):l.Ka?l.b=0:(l.I<<=8,l.b+=8,l.Ka=1))}function de(l){return re(l,1)}function le(l,d){var g=l.Ca;0>l.b&&ie(l);var S=l.b,F=g*d>>>8,U=(l.I>>>S>F)+0;for(U?(g-=F,l.I-=F+1<<S>>>0):g=F+1,S=g,F=0;256<=S;)F+=8,S>>=8;return S=7^F+Gn[S],l.b-=S,l.Ca=(g<<S)-1,U}function be(l,d,g){l[d+0]=g>>24&255,l[d+1]=g>>16&255,l[d+2]=g>>8&255,l[d+3]=g>>0&255}function fe(l,d){return l[d+0]<<0|l[d+1]<<8}function Fe(l,d){return fe(l,d)|l[d+2]<<16}function Oe(l,d){return fe(l,d)|fe(l,d+2)<<16}function Ue(l,d){var g=1<<d;return r(l!=null),r(0<d),l.X=s(g),l.X==null?0:(l.Mb=32-d,l.Xa=d,1)}function ye(l,d){r(l!=null),r(d!=null),r(l.Xa==d.Xa),i(d.X,0,l.X,0,1<<d.Xa)}function ee(){this.X=[],this.Xa=this.Mb=0}function _e(l,d,g,S){r(g!=null),r(S!=null);var F=g[0],U=S[0];return F==0&&(F=(l*U+d/2)/d),U==0&&(U=(d*F+l/2)/l),0>=F||0>=U?0:(g[0]=F,S[0]=U,1)}function Me(l,d){return l+(1<<d)-1>>>d}function Le(l,d){return((4278255360&l)+(4278255360&d)>>>0&4278255360)+((16711935&l)+(16711935&d)>>>0&16711935)>>>0}function ue(l,d){V[d]=function(g,S,F,U,J,X,K){var te;for(te=0;te<J;++te){var me=V[l](X[K+te-1],F,U+te);X[K+te]=Le(g[S+te],me)}}}function Ye(){this.ud=this.hd=this.jd=0}function Ze(l,d){return((4278124286&(l^d))>>>1)+(l&d)>>>0}function mt(l){return 0<=l&&256>l?l:0>l?0:255<l?255:void 0}function $e(l,d){return mt(l+(l-d+.5>>1))}function je(l,d,g){return Math.abs(d-g)-Math.abs(l-g)}function ve(l,d,g,S,F,U,J){for(S=U[J-1],g=0;g<F;++g)U[J+g]=S=Le(l[d+g],S)}function Pe(l,d,g,S,F){var U;for(U=0;U<g;++U){var J=l[d+U],X=J>>8&255,K=16711935&(K=(K=16711935&J)+((X<<16)+X));S[F+U]=(4278255360&J)+K>>>0}}function De(l,d){d.jd=l>>0&255,d.hd=l>>8&255,d.ud=l>>16&255}function Se(l,d,g,S,F,U){var J;for(J=0;J<S;++J){var X=d[g+J],K=X>>>8,te=X,me=255&(me=(me=X>>>16)+((l.jd<<24>>24)*(K<<24>>24)>>>5));te=255&(te=(te=te+((l.hd<<24>>24)*(K<<24>>24)>>>5))+((l.ud<<24>>24)*(me<<24>>24)>>>5)),F[U+J]=(4278255360&X)+(me<<16)+te}}function Ie(l,d,g,S,F){V[d]=function(U,J,X,K,te,me,Re,Ee,we){for(K=Re;K<Ee;++K)for(Re=0;Re<we;++Re)te[me++]=F(X[S(U[J++])])},V[l]=function(U,J,X,K,te,me,Re){var Ee=8>>U.b,we=U.Ea,Qe=U.K[0],qe=U.w;if(8>Ee)for(U=(1<<U.b)-1,qe=(1<<Ee)-1;J<X;++J){var ge,xe=0;for(ge=0;ge<we;++ge)ge&U||(xe=S(K[te++])),me[Re++]=F(Qe[xe&qe]),xe>>=Ee}else V["VP8LMapColor"+g](K,te,Qe,qe,me,Re,J,X,we)}}function ze(l,d,g,S,F){for(g=d+g;d<g;){var U=l[d++];S[F++]=U>>16&255,S[F++]=U>>8&255,S[F++]=U>>0&255}}function it(l,d,g,S,F){for(g=d+g;d<g;){var U=l[d++];S[F++]=U>>16&255,S[F++]=U>>8&255,S[F++]=U>>0&255,S[F++]=U>>24&255}}function Ge(l,d,g,S,F){for(g=d+g;d<g;){var U=(J=l[d++])>>16&240|J>>12&15,J=J>>0&240|J>>28&15;S[F++]=U,S[F++]=J}}function ot(l,d,g,S,F){for(g=d+g;d<g;){var U=(J=l[d++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;S[F++]=U,S[F++]=J}}function Nt(l,d,g,S,F){for(g=d+g;d<g;){var U=l[d++];S[F++]=U>>0&255,S[F++]=U>>8&255,S[F++]=U>>16&255}}function At(l,d,g,S,F,U){if(U==0)for(g=d+g;d<g;)be(S,((U=l[d++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),F+=32;else i(S,F,l,d,g)}function ht(l,d){V[d][0]=V[l+"0"],V[d][1]=V[l+"1"],V[d][2]=V[l+"2"],V[d][3]=V[l+"3"],V[d][4]=V[l+"4"],V[d][5]=V[l+"5"],V[d][6]=V[l+"6"],V[d][7]=V[l+"7"],V[d][8]=V[l+"8"],V[d][9]=V[l+"9"],V[d][10]=V[l+"10"],V[d][11]=V[l+"11"],V[d][12]=V[l+"12"],V[d][13]=V[l+"13"],V[d][14]=V[l+"0"],V[d][15]=V[l+"0"]}function bt(l){return l==kd||l==Ad||l==Bl||l==Ld}function Ne(){this.eb=[],this.size=this.A=this.fb=0}function lt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function zt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ne,this.f.kb=new lt,this.sd=null}function Ae(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function We(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function nt(l){return alert("todo:WebPSamplerProcessPlane"),l.T}function tt(l,d){var g=l.T,S=d.ba.f.RGBA,F=S.eb,U=S.fb+l.ka*S.A,J=yi[d.ba.S],X=l.y,K=l.O,te=l.f,me=l.N,Re=l.ea,Ee=l.W,we=d.cc,Qe=d.dc,qe=d.Mc,ge=d.Nc,xe=l.ka,Xe=l.ka+l.T,rt=l.U,Ke=rt+1>>1;for(xe==0?J(X,K,null,null,te,me,Re,Ee,te,me,Re,Ee,F,U,null,null,rt):(J(d.ec,d.fc,X,K,we,Qe,qe,ge,te,me,Re,Ee,F,U-S.A,F,U,rt),++g);xe+2<Xe;xe+=2)we=te,Qe=me,qe=Re,ge=Ee,me+=l.Rc,Ee+=l.Rc,U+=2*S.A,J(X,(K+=2*l.fa)-l.fa,X,K,we,Qe,qe,ge,te,me,Re,Ee,F,U-S.A,F,U,rt);return K+=l.fa,l.j+Xe<l.o?(i(d.ec,d.fc,X,K,rt),i(d.cc,d.dc,te,me,Ke),i(d.Mc,d.Nc,Re,Ee,Ke),g--):1&Xe||J(X,K,null,null,te,me,Re,Ee,te,me,Re,Ee,F,U+S.A,null,null,rt),g}function gt(l,d,g){var S=l.F,F=[l.J];if(S!=null){var U=l.U,J=d.ba.S,X=J==Dl||J==Bl;d=d.ba.f.RGBA;var K=[0],te=l.ka;K[0]=l.T,l.Kb&&(te==0?--K[0]:(--te,F[0]-=l.width),l.j+l.ka+l.T==l.o&&(K[0]=l.o-l.j-te));var me=d.eb;te=d.fb+te*d.A,l=Er(S,F[0],l.width,U,K,me,te+(X?0:3),d.A),r(g==K),l&&bt(J)&&xi(me,te,X,U,K,d.A)}return 0}function Ct(l){var d=l.ma,g=d.ba.S,S=11>g,F=g==Il||g==Ml||g==Dl||g==_d||g==12||bt(g);if(d.memory=null,d.Ib=null,d.Jb=null,d.Nd=null,!Oa(d.Oa,l,F?11:12))return 0;if(F&&bt(g)&&st(),l.da)alert("todo:use_scaling");else{if(S){if(d.Ib=nt,l.Kb){if(g=l.U+1>>1,d.memory=s(l.U+2*g),d.memory==null)return 0;d.ec=d.memory,d.fc=0,d.cc=d.ec,d.dc=d.fc+l.U,d.Mc=d.cc,d.Nc=d.dc+g,d.Ib=tt,st()}}else alert("todo:EmitYUV");F&&(d.Jb=gt,S&&ke())}if(S&&!gh){for(l=0;256>l;++l)gm[l]=89858*(l-128)+Wl>>ql,ym[l]=-22014*(l-128)+Wl,bm[l]=-45773*(l-128),xm[l]=113618*(l-128)+Wl>>ql;for(l=Ba;l<Od;++l)d=76283*(l-16)+Wl>>ql,vm[l-Ba]=si(d,255),wm[l-Ba]=si(d+8>>4,15);gh=1}return 1}function Ut(l){var d=l.ma,g=l.U,S=l.T;return r(!(1&l.ka)),0>=g||0>=S?0:(g=d.Ib(l,d),d.Jb!=null&&d.Jb(l,d,g),d.Dc+=g,1)}function Ve(l){l.ma.memory=null}function Je(l,d,g,S){return y(l,8)!=47?0:(d[0]=y(l,14)+1,g[0]=y(l,14)+1,S[0]=y(l,1),y(l,3)!=0?0:!l.h)}function It(l,d){if(4>l)return l+1;var g=l-2>>1;return(2+(1&l)<<g)+y(d,g)+1}function dt(l,d){return 120<d?d-120:1<=(g=((g=rm[d-1])>>4)*l+(8-(15&g)))?g:1;var g}function jt(l,d,g){var S=W(g),F=l[d+=255&S].g-8;return 0<F&&($(g,g.u+8),S=W(g),d+=l[d].value,d+=S&(1<<F)-1),$(g,g.u+l[d].g),l[d].value}function lr(l,d,g){return g.g+=l.g,g.value+=l.value<<d>>>0,r(8>=g.g),l.g}function Mr(l,d,g){var S=l.xc;return r((d=S==0?0:l.vc[l.md*(g>>S)+(d>>S)])<l.Wb),l.Ya[d]}function an(l,d,g,S){var F=l.ab,U=l.c*d,J=l.C;d=J+d;var X=g,K=S;for(S=l.Ta,g=l.Ua;0<F--;){var te=l.gc[F],me=J,Re=d,Ee=X,we=K,Qe=(K=S,X=g,te.Ea);switch(r(me<Re),r(Re<=te.nc),te.hc){case 2:Nl(Ee,we,(Re-me)*Qe,K,X);break;case 0:var qe=me,ge=Re,xe=K,Xe=X,rt=(vt=te).Ea;qe==0&&(Sd(Ee,we,null,null,1,xe,Xe),ve(Ee,we+1,0,0,rt-1,xe,Xe+1),we+=rt,Xe+=rt,++qe);for(var Ke=1<<vt.b,Pt=Ke-1,xt=Me(rt,vt.b),qt=vt.K,vt=vt.w+(qe>>vt.b)*xt;qe<ge;){var ur=qt,gr=vt,ar=1;for(Ta(Ee,we,xe,Xe-rt,1,xe,Xe);ar<rt;){var ir=(ar&~Pt)+Ke;ir>rt&&(ir=rt),(0,bs[ur[gr++]>>8&15])(Ee,we+ +ar,xe,Xe+ar-rt,ir-ar,xe,Xe+ar),ar=ir}we+=rt,Xe+=rt,++qe&Pt||(vt+=xt)}Re!=te.nc&&i(K,X-Qe,K,X+(Re-me-1)*Qe,Qe);break;case 1:for(Qe=Ee,ge=we,rt=(Ee=te.Ea)-(Xe=Ee&~(xe=(we=1<<te.b)-1)),qe=Me(Ee,te.b),Ke=te.K,te=te.w+(me>>te.b)*qe;me<Re;){for(Pt=Ke,xt=te,qt=new Ye,vt=ge+Xe,ur=ge+Ee;ge<vt;)De(Pt[xt++],qt),Hs(qt,Qe,ge,we,K,X),ge+=we,X+=we;ge<ur&&(De(Pt[xt++],qt),Hs(qt,Qe,ge,rt,K,X),ge+=rt,X+=rt),++me&xe||(te+=qe)}break;case 3:if(Ee==K&&we==X&&0<te.b){for(ge=K,Ee=Qe=X+(Re-me)*Qe-(Xe=(Re-me)*Me(te.Ea,te.b)),we=K,xe=X,qe=[],Xe=(rt=Xe)-1;0<=Xe;--Xe)qe[Xe]=we[xe+Xe];for(Xe=rt-1;0<=Xe;--Xe)ge[Ee+Xe]=qe[Xe];pi(te,me,Re,K,Qe,K,X)}else pi(te,me,Re,Ee,we,K,X)}X=S,K=g}K!=g&&i(S,g,X,K,U)}function Ci(l,d){var g=l.V,S=l.Ba+l.c*l.C,F=d-l.C;if(r(d<=l.l.o),r(16>=F),0<F){var U=l.l,J=l.Ta,X=l.Ua,K=U.width;if(an(l,F,g,S),F=X=[X],r((g=l.C)<(S=d)),r(U.v<U.va),S>U.o&&(S=U.o),g<U.j){var te=U.j-g;g=U.j,F[0]+=te*K}if(g>=S?g=0:(F[0]+=4*U.v,U.ka=g-U.j,U.U=U.va-U.v,U.T=S-g,g=1),g){if(X=X[0],11>(g=l.ca).S){var me=g.f.RGBA,Re=(S=g.S,F=U.U,U=U.T,te=me.eb,me.A),Ee=U;for(me=me.fb+l.Ma*me.A;0<Ee--;){var we=J,Qe=X,qe=F,ge=te,xe=me;switch(S){case Fl:Vn(we,Qe,qe,ge,xe);break;case Il:In(we,Qe,qe,ge,xe);break;case kd:In(we,Qe,qe,ge,xe),xi(ge,xe,0,qe,1,0);break;case ah:ts(we,Qe,qe,ge,xe);break;case Ml:At(we,Qe,qe,ge,xe,1);break;case Ad:At(we,Qe,qe,ge,xe,1),xi(ge,xe,0,qe,1,0);break;case Dl:At(we,Qe,qe,ge,xe,0);break;case Bl:At(we,Qe,qe,ge,xe,0),xi(ge,xe,1,qe,1,0);break;case _d:ys(we,Qe,qe,ge,xe);break;case Ld:ys(we,Qe,qe,ge,xe),Rr(ge,xe,qe,1,0);break;case lh:es(we,Qe,qe,ge,xe);break;default:r(0)}X+=K,me+=Re}l.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");r(l.Ma<=g.height)}}l.C=d,r(l.C<=l.i)}function fr(l){var d;if(0<l.ua)return 0;for(d=0;d<l.Wb;++d){var g=l.Ya[d].G,S=l.Ya[d].H;if(0<g[1][S[1]+0].g||0<g[2][S[2]+0].g||0<g[3][S[3]+0].g)return 0}return 1}function Cn(l,d,g,S,F,U){if(l.Z!=0){var J=l.qd,X=l.rd;for(r(Ss[l.Z]!=null);d<g;++d)Ss[l.Z](J,X,S,F,S,F,U),J=S,X=F,F+=U;l.qd=J,l.rd=X}}function Ln(l,d){var g=l.l.ma,S=g.Z==0||g.Z==1?l.l.j:l.C;if(S=l.C<S?S:l.C,r(d<=l.l.o),d>S){var F=l.l.width,U=g.ca,J=g.tb+F*S,X=l.V,K=l.Ba+l.c*S,te=l.gc;r(l.ab==1),r(te[0].hc==3),Ol(te[0],S,d,X,K,U,J),Cn(g,S,d,U,J,F)}l.C=l.Ma=d}function Hn(l,d,g,S,F,U,J){var X=l.$/S,K=l.$%S,te=l.m,me=l.s,Re=g+l.$,Ee=Re;F=g+S*F;var we=g+S*U,Qe=280+me.ua,qe=l.Pb?X:16777216,ge=0<me.ua?me.Wa:null,xe=me.wc,Xe=Re<we?Mr(me,K,X):null;r(l.C<U),r(we<=F);var rt=!1;e:for(;;){for(;rt||Re<we;){var Ke=0;if(X>=qe){var Pt=Re-g;r((qe=l).Pb),qe.wd=qe.m,qe.xd=Pt,0<qe.s.ua&&ye(qe.s.Wa,qe.s.vb),qe=X+im}if(K&xe||(Xe=Mr(me,K,X)),r(Xe!=null),Xe.Qb&&(d[Re]=Xe.qb,rt=!0),!rt)if(Q(te),Xe.jc){Ke=te,Pt=d;var xt=Re,qt=Xe.pd[W(Ke)&_n-1];r(Xe.jc),256>qt.g?($(Ke,Ke.u+qt.g),Pt[xt]=qt.value,Ke=0):($(Ke,Ke.u+qt.g-256),r(256<=qt.value),Ke=qt.value),Ke==0&&(rt=!0)}else Ke=jt(Xe.G[0],Xe.H[0],te);if(te.h)break;if(rt||256>Ke){if(!rt)if(Xe.nd)d[Re]=(Xe.qb|Ke<<8)>>>0;else{if(Q(te),rt=jt(Xe.G[1],Xe.H[1],te),Q(te),Pt=jt(Xe.G[2],Xe.H[2],te),xt=jt(Xe.G[3],Xe.H[3],te),te.h)break;d[Re]=(xt<<24|rt<<16|Ke<<8|Pt)>>>0}if(rt=!1,++Re,++K>=S&&(K=0,++X,J!=null&&X<=U&&!(X%16)&&J(l,X),ge!=null))for(;Ee<Re;)Ke=d[Ee++],ge.X[(506832829*Ke&4294967295)>>>ge.Mb]=Ke}else if(280>Ke){if(Ke=It(Ke-256,te),Pt=jt(Xe.G[4],Xe.H[4],te),Q(te),Pt=dt(S,Pt=It(Pt,te)),te.h)break;if(Re-g<Pt||F-Re<Ke)break e;for(xt=0;xt<Ke;++xt)d[Re+xt]=d[Re+xt-Pt];for(Re+=Ke,K+=Ke;K>=S;)K-=S,++X,J!=null&&X<=U&&!(X%16)&&J(l,X);if(r(Re<=F),K&xe&&(Xe=Mr(me,K,X)),ge!=null)for(;Ee<Re;)Ke=d[Ee++],ge.X[(506832829*Ke&4294967295)>>>ge.Mb]=Ke}else{if(!(Ke<Qe))break e;for(rt=Ke-280,r(ge!=null);Ee<Re;)Ke=d[Ee++],ge.X[(506832829*Ke&4294967295)>>>ge.Mb]=Ke;Ke=Re,r(!(rt>>>(Pt=ge).Xa)),d[Ke]=Pt.X[rt],rt=!0}rt||r(te.h==L(te))}if(l.Pb&&te.h&&Re<F)r(l.m.h),l.a=5,l.m=l.wd,l.$=l.xd,0<l.s.ua&&ye(l.s.vb,l.s.Wa);else{if(te.h)break e;J!=null&&J(l,X>U?U:X),l.a=0,l.$=Re-g}return 1}return l.a=3,0}function ni(l){r(l!=null),l.vc=null,l.yc=null,l.Ya=null;var d=l.Wa;d!=null&&(d.X=null),l.vb=null,r(l!=null)}function he(){var l=new jd;return l==null?null:(l.a=0,l.xb=uh,ht("Predictor","VP8LPredictors"),ht("Predictor","VP8LPredictors_C"),ht("PredictorAdd","VP8LPredictorsAdd"),ht("PredictorAdd","VP8LPredictorsAdd_C"),Nl=Pe,Hs=Se,Vn=ze,In=it,ys=Ge,es=ot,ts=Nt,V.VP8LMapColor32b=Oo,V.VP8LMapColor8b=Rl,l)}function kt(l,d,g,S,F){var U=1,J=[l],X=[d],K=S.m,te=S.s,me=null,Re=0;e:for(;;){if(g)for(;U&&y(K,1);){var Ee=J,we=X,Qe=S,qe=1,ge=Qe.m,xe=Qe.gc[Qe.ab],Xe=y(ge,2);if(Qe.Oc&1<<Xe)U=0;else{switch(Qe.Oc|=1<<Xe,xe.hc=Xe,xe.Ea=Ee[0],xe.nc=we[0],xe.K=[null],++Qe.ab,r(4>=Qe.ab),Xe){case 0:case 1:xe.b=y(ge,3)+2,qe=kt(Me(xe.Ea,xe.b),Me(xe.nc,xe.b),0,Qe,xe.K),xe.K=xe.K[0];break;case 3:var rt,Ke=y(ge,8)+1,Pt=16<Ke?0:4<Ke?1:2<Ke?2:3;if(Ee[0]=Me(xe.Ea,Pt),xe.b=Pt,rt=qe=kt(Ke,1,0,Qe,xe.K)){var xt,qt=Ke,vt=xe,ur=1<<(8>>vt.b),gr=s(ur);if(gr==null)rt=0;else{var ar=vt.K[0],ir=vt.w;for(gr[0]=vt.K[0][0],xt=1;xt<1*qt;++xt)gr[xt]=Le(ar[ir+xt],gr[xt-1]);for(;xt<4*ur;++xt)gr[xt]=0;vt.K[0]=null,vt.K[0]=gr,rt=1}}qe=rt;break;case 2:break;default:r(0)}U=qe}}if(J=J[0],X=X[0],U&&y(K,1)&&!(U=1<=(Re=y(K,4))&&11>=Re)){S.a=3;break e}var Cr;if(Cr=U)t:{var jr,Kt,cn,Yn=S,dn=J,Jn=X,xr=Re,ai=g,li=Yn.m,gn=Yn.s,kn=[null],Dn=1,vi=0,Ui=nm[xr];r:for(;;){if(ai&&y(li,1)){var xn=y(li,3)+2,ss=Me(dn,xn),Js=Me(Jn,xn),Fo=ss*Js;if(!kt(ss,Js,0,Yn,kn))break r;for(kn=kn[0],gn.xc=xn,jr=0;jr<Fo;++jr){var Cs=kn[jr]>>8&65535;kn[jr]=Cs,Cs>=Dn&&(Dn=Cs+1)}}if(li.h)break r;for(Kt=0;5>Kt;++Kt){var Vr=ch[Kt];!Kt&&0<xr&&(Vr+=1<<xr),vi<Vr&&(vi=Vr)}var Rd=a(Dn*Ui,A),yh=Dn,vh=a(yh,z);if(vh==null)var Hl=null;else r(65536>=yh),Hl=vh;var qa=s(vi);if(Hl==null||qa==null||Rd==null){Yn.a=1;break r}var $l=Rd;for(jr=cn=0;jr<Dn;++jr){var Pi=Hl[jr],Io=Pi.G,Mo=Pi.H,wh=0,Gl=1,jh=0;for(Kt=0;5>Kt;++Kt){Vr=ch[Kt],Io[Kt]=$l,Mo[Kt]=cn,!Kt&&0<xr&&(Vr+=1<<xr);i:{var Vl,Ed=Vr,Yl=Yn,Wa=qa,Cm=$l,_m=cn,Td=0,_s=Yl.m,km=y(_s,1);if(o(Wa,0,0,Ed),km){var Am=y(_s,1)+1,Lm=y(_s,1),Sh=y(_s,Lm==0?1:8);Wa[Sh]=1,Am==2&&(Wa[Sh=y(_s,8)]=1);var Jl=1}else{var Ch=s(19),_h=y(_s,4)+4;if(19<_h){Yl.a=3;var Xl=0;break i}for(Vl=0;Vl<_h;++Vl)Ch[tm[Vl]]=y(_s,3);var zd=void 0,Ua=void 0,kh=Yl,Pm=Ch,Kl=Ed,Ah=Wa,Fd=0,ks=kh.m,Lh=8,Ph=a(128,A);n:for(;j(Ph,0,7,Pm,19);){if(y(ks,1)){var Nm=2+2*y(ks,3);if((zd=2+y(ks,Nm))>Kl)break n}else zd=Kl;for(Ua=0;Ua<Kl&&zd--;){Q(ks);var Nh=Ph[0+(127&W(ks))];$(ks,ks.u+Nh.g);var Do=Nh.value;if(16>Do)Ah[Ua++]=Do,Do!=0&&(Lh=Do);else{var Om=Do==16,Oh=Do-16,Rm=Z0[Oh],Rh=y(ks,Q0[Oh])+Rm;if(Ua+Rh>Kl)break n;for(var Em=Om?Lh:0;0<Rh--;)Ah[Ua++]=Em}}Fd=1;break n}Fd||(kh.a=3),Jl=Fd}(Jl=Jl&&!_s.h)&&(Td=j(Cm,_m,8,Wa,Ed)),Jl&&Td!=0?Xl=Td:(Yl.a=3,Xl=0)}if(Xl==0)break r;if(Gl&&em[Kt]==1&&(Gl=$l[cn].g==0),wh+=$l[cn].g,cn+=Xl,3>=Kt){var Ha,Id=qa[0];for(Ha=1;Ha<Vr;++Ha)qa[Ha]>Id&&(Id=qa[Ha]);jh+=Id}}if(Pi.nd=Gl,Pi.Qb=0,Gl&&(Pi.qb=(Io[3][Mo[3]+0].value<<24|Io[1][Mo[1]+0].value<<16|Io[2][Mo[2]+0].value)>>>0,wh==0&&256>Io[0][Mo[0]+0].value&&(Pi.Qb=1,Pi.qb+=Io[0][Mo[0]+0].value<<8)),Pi.jc=!Pi.Qb&&6>jh,Pi.jc){var Ql,os=Pi;for(Ql=0;Ql<_n;++Ql){var As=Ql,Ls=os.pd[As],Zl=os.G[0][os.H[0]+As];256<=Zl.value?(Ls.g=Zl.g+256,Ls.value=Zl.value):(Ls.g=0,Ls.value=0,As>>=lr(Zl,8,Ls),As>>=lr(os.G[1][os.H[1]+As],16,Ls),As>>=lr(os.G[2][os.H[2]+As],0,Ls),lr(os.G[3][os.H[3]+As],24,Ls))}}}gn.vc=kn,gn.Wb=Dn,gn.Ya=Hl,gn.yc=Rd,Cr=1;break t}Cr=0}if(!(U=Cr)){S.a=3;break e}if(0<Re){if(te.ua=1<<Re,!Ue(te.Wa,Re)){S.a=1,U=0;break e}}else te.ua=0;var Md=S,Eh=J,Tm=X,Dd=Md.s,Bd=Dd.xc;if(Md.c=Eh,Md.i=Tm,Dd.md=Me(Eh,Bd),Dd.wc=Bd==0?-1:(1<<Bd)-1,g){S.xb=um;break e}if((me=s(J*X))==null){S.a=1,U=0;break e}U=(U=Hn(S,me,0,J,X,X,null))&&!K.h;break e}return U?(F!=null?F[0]=me:(r(me==null),r(g)),S.$=0,g||ni(te)):ni(te),U}function Et(l,d){var g=l.c*l.i,S=g+d+16*d;return r(l.c<=d),l.V=s(S),l.V==null?(l.Ta=null,l.Ua=0,l.a=1,0):(l.Ta=l.V,l.Ua=l.Ba+g+d,1)}function Tt(l,d){var g=l.C,S=d-g,F=l.V,U=l.Ba+l.c*g;for(r(d<=l.l.o);0<S;){var J=16<S?16:S,X=l.l.ma,K=l.l.width,te=K*J,me=X.ca,Re=X.tb+K*g,Ee=l.Ta,we=l.Ua;an(l,J,F,U),Zr(Ee,we,me,Re,te),Cn(X,g,g+J,me,Re,K),S-=J,F+=J*l.c,g+=J}r(g==d),l.C=l.Ma=d}function mr(){this.ub=this.yd=this.td=this.Rb=0}function tr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var l=[];return function d(g,S,F){for(var U=F[S],J=0;J<U&&(g.push(F.length>S+1?[]:0),!(F.length<S+1));J++)d(g[J],S+1,F)}(l,0,[3,11]),l}()}function vr(){this.jb=s(3),this.Wc=c([4,8],Ht),this.Xc=c([4,17],Ht)}function Or(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function nr(){this.ld=this.La=this.dd=this.tc=0}function Mt(){this.Na=this.la=0}function Ft(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function sr(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Kr(){this.uc=this.M=this.Nb=0,this.wa=Array(new nr),this.Y=0,this.ya=Array(new sr),this.aa=0,this.l=new Sr}function wt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function wr(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new mr,this.Kc=new tr,this.ed=new Or,this.Qa=new rr,this.Ic=this.$c=this.Aa=0,this.D=new Kr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Y),this.ia=0,this.pb=a(4,Ft),this.Pa=new vr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new wt),this.Hd=0,this.rb=Array(new Mt),this.sb=0,this.wa=Array(new nr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new sr),this.L=this.aa=0,this.gd=c([4,2],nr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Sr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function cr(){var l=new wr;return l!=null&&(l.a=0,l.sc="OK",l.cb=0,l.Xb=0,Da||(Da=fi)),l}function Gt(l,d,g){return l.a==0&&(l.a=d,l.sc=g,l.cb=0),0}function dr(l,d,g){return 3<=g&&l[d+0]==157&&l[d+1]==1&&l[d+2]==42}function ii(l,d){if(l==null)return 0;if(l.a=0,l.sc="OK",d==null)return Gt(l,2,"null VP8Io passed to VP8GetHeaders()");var g=d.data,S=d.w,F=d.ha;if(4>F)return Gt(l,7,"Truncated header.");var U=g[S+0]|g[S+1]<<8|g[S+2]<<16,J=l.Od;if(J.Rb=!(1&U),J.td=U>>1&7,J.yd=U>>4&1,J.ub=U>>5,3<J.td)return Gt(l,3,"Incorrect keyframe parameters.");if(!J.yd)return Gt(l,4,"Frame not displayable.");S+=3,F-=3;var X=l.Kc;if(J.Rb){if(7>F)return Gt(l,7,"cannot parse picture header");if(!dr(g,S,F))return Gt(l,3,"Bad code word");X.c=16383&(g[S+4]<<8|g[S+3]),X.Td=g[S+4]>>6,X.i=16383&(g[S+6]<<8|g[S+5]),X.Ud=g[S+6]>>6,S+=7,F-=7,l.za=X.c+15>>4,l.Ub=X.i+15>>4,d.width=X.c,d.height=X.i,d.Da=0,d.j=0,d.v=0,d.va=d.width,d.o=d.height,d.da=0,d.ib=d.width,d.hb=d.height,d.U=d.width,d.T=d.height,o((U=l.Pa).jb,0,255,U.jb.length),r((U=l.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,o(U.Zb,0,0,U.Zb.length),o(U.Lb,0,0,U.Lb)}if(J.ub>F)return Gt(l,7,"bad partition length");se(U=l.m,g,S,J.ub),S+=J.ub,F-=J.ub,J.Rb&&(X.Ld=de(U),X.Kd=de(U)),X=l.Qa;var K,te=l.Pa;if(r(U!=null),r(X!=null),X.Cb=de(U),X.Cb){if(X.Bb=de(U),de(U)){for(X.Fb=de(U),K=0;4>K;++K)X.Zb[K]=de(U)?v(U,7):0;for(K=0;4>K;++K)X.Lb[K]=de(U)?v(U,6):0}if(X.Bb)for(K=0;3>K;++K)te.jb[K]=de(U)?re(U,8):255}else X.Bb=0;if(U.Ka)return Gt(l,3,"cannot parse segment header");if((X=l.ed).zd=de(U),X.Tb=re(U,6),X.wb=re(U,3),X.Pc=de(U),X.Pc&&de(U)){for(te=0;4>te;++te)de(U)&&(X.vd[te]=v(U,6));for(te=0;4>te;++te)de(U)&&(X.od[te]=v(U,6))}if(l.L=X.Tb==0?0:X.zd?1:2,U.Ka)return Gt(l,3,"cannot parse filter header");var me=F;if(F=K=S,S=K+me,X=me,l.Xb=(1<<re(l.m,2))-1,me<3*(te=l.Xb))g=7;else{for(K+=3*te,X-=3*te,me=0;me<te;++me){var Re=g[F+0]|g[F+1]<<8|g[F+2]<<16;Re>X&&(Re=X),se(l.Jc[+me],g,K,Re),K+=Re,X-=Re,F+=3}se(l.Jc[+te],g,K,X),g=K<S?0:5}if(g!=0)return Gt(l,g,"cannot parse partitions");for(g=re(K=l.m,7),F=de(K)?v(K,4):0,S=de(K)?v(K,4):0,X=de(K)?v(K,4):0,te=de(K)?v(K,4):0,K=de(K)?v(K,4):0,me=l.Qa,Re=0;4>Re;++Re){if(me.Cb){var Ee=me.Zb[Re];me.Fb||(Ee+=g)}else{if(0<Re){l.pb[Re]=l.pb[0];continue}Ee=g}var we=l.pb[Re];we.Sc[0]=Pd[si(Ee+F,127)],we.Sc[1]=Nd[si(Ee+0,127)],we.Eb[0]=2*Pd[si(Ee+S,127)],we.Eb[1]=101581*Nd[si(Ee+X,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=Pd[si(Ee+te,117)],we.Qc[1]=Nd[si(Ee+K,127)],we.lc=Ee+K}if(!J.Rb)return Gt(l,4,"Not a key frame.");for(de(U),J=l.Pa,g=0;4>g;++g){for(F=0;8>F;++F)for(S=0;3>S;++S)for(X=0;11>X;++X)te=le(U,cm[g][F][S][X])?re(U,8):am[g][F][S][X],J.Wc[g][F].Yb[S][X]=te;for(F=0;17>F;++F)J.Xc[g][F]=J.Wc[g][dm[F]]}return l.kc=de(U),l.kc&&(l.Bd=re(U,8)),l.cb=1}function fi(l,d,g,S,F,U,J){var X=d[F].Yb[g];for(g=0;16>F;++F){if(!le(l,X[g+0]))return F;for(;!le(l,X[g+1]);)if(X=d[++F].Yb[0],g=0,F==16)return 16;var K=d[F+1].Yb;if(le(l,X[g+2])){var te=l,me=0;if(le(te,(Ee=X)[(Re=g)+3]))if(le(te,Ee[Re+6])){for(X=0,Re=2*(me=le(te,Ee[Re+8]))+(Ee=le(te,Ee[Re+9+me])),me=0,Ee=sm[Re];Ee[X];++X)me+=me+le(te,Ee[X]);me+=3+(8<<Re)}else le(te,Ee[Re+7])?(me=7+2*le(te,165),me+=le(te,145)):me=5+le(te,159);else me=le(te,Ee[Re+4])?3+le(te,Ee[Re+5]):2;X=K[2]}else me=1,X=K[1];K=J+om[F],0>(te=l).b&&ie(te);var Re,Ee=te.b,we=(Re=te.Ca>>1)-(te.I>>Ee)>>31;--te.b,te.Ca+=we,te.Ca|=1,te.I-=(Re+1&we)<<Ee,U[K]=((me^we)-we)*S[(0<F)+0]}return 16}function ps(l){var d=l.rb[l.sb-1];d.la=0,d.Na=0,o(l.zc,0,0,l.zc.length),l.ja=0}function xo(l,d){if(l==null)return 0;if(d==null)return Gt(l,2,"NULL VP8Io parameter in VP8Decode().");if(!l.cb&&!ii(l,d))return 0;if(r(l.cb),d.ac==null||d.ac(d)){d.ob&&(l.L=0);var g=Ul[l.L];if(l.L==2?(l.yb=0,l.zb=0):(l.yb=d.v-g>>4,l.zb=d.j-g>>4,0>l.yb&&(l.yb=0),0>l.zb&&(l.zb=0)),l.Va=d.o+15+g>>4,l.Hb=d.va+15+g>>4,l.Hb>l.za&&(l.Hb=l.za),l.Va>l.Ub&&(l.Va=l.Ub),0<l.L){var S=l.ed;for(g=0;4>g;++g){var F;if(l.Qa.Cb){var U=l.Qa.Lb[g];l.Qa.Fb||(U+=S.Tb)}else U=S.Tb;for(F=0;1>=F;++F){var J=l.gd[g][F],X=U;if(S.Pc&&(X+=S.vd[0],F&&(X+=S.od[0])),0<(X=0>X?0:63<X?63:X)){var K=X;0<S.wb&&(K=4<S.wb?K>>2:K>>1)>9-S.wb&&(K=9-S.wb),1>K&&(K=1),J.dd=K,J.tc=2*X+K,J.ld=40<=X?2:15<=X?1:0}else J.tc=0;J.La=F}}}g=0}else Gt(l,6,"Frame setup failed"),g=l.a;if(g=g==0){if(g){l.$c=0,0<l.Aa||(l.Ic=Sm);e:{g=l.Ic,S=4*(K=l.za);var te=32*K,me=K+1,Re=0<l.L?K*(0<l.Aa?2:1):0,Ee=(l.Aa==2?2:1)*K;if((J=S+832+(F=3*(16*g+Ul[l.L])/2*te)+(U=l.Fa!=null&&0<l.Fa.length?l.Kc.c*l.Kc.i:0))!=J)g=0;else{if(J>l.Vb){if(l.Vb=0,l.Ec=s(J),l.Fc=0,l.Ec==null){g=Gt(l,1,"no memory during frame initialization.");break e}l.Vb=J}J=l.Ec,X=l.Fc,l.Ac=J,l.Bc=X,X+=S,l.Gd=a(te,wt),l.Hd=0,l.rb=a(me+1,Mt),l.sb=1,l.wa=Re?a(Re,nr):null,l.Y=0,l.D.Nb=0,l.D.wa=l.wa,l.D.Y=l.Y,0<l.Aa&&(l.D.Y+=K),r(!0),l.oc=J,l.pc=X,X+=832,l.ya=a(Ee,sr),l.aa=0,l.D.ya=l.ya,l.D.aa=l.aa,l.Aa==2&&(l.D.aa+=K),l.R=16*K,l.B=8*K,K=(te=Ul[l.L])*l.R,te=te/2*l.B,l.sa=J,l.ta=X+K,l.qa=l.sa,l.ra=l.ta+16*g*l.R+te,l.Ha=l.qa,l.Ia=l.ra+8*g*l.B+te,l.$c=0,X+=F,l.mb=U?J:null,l.nb=U?X:null,r(X+U<=l.Fc+l.Vb),ps(l),o(l.Ac,l.Bc,0,S),g=1}}if(g){if(d.ka=0,d.y=l.sa,d.O=l.ta,d.f=l.qa,d.N=l.ra,d.ea=l.Ha,d.Vd=l.Ia,d.fa=l.R,d.Rc=l.B,d.F=null,d.J=0,!Tl){for(g=-255;255>=g;++g)pn[255+g]=0>g?-g:g;for(g=-1020;1020>=g;++g)ns[1020+g]=-128>g?-128:127<g?127:g;for(g=-112;112>=g;++g)Ma[112+g]=-16>g?-16:15<g?15:g;for(g=-255;510>=g;++g)zo[255+g]=0>g?0:255<g?255:g;Tl=1}Ro=ld,rs=od,za=xl,Mn=ad,mi=bl,Qr=gl,Eo=ja,El=Ws,Fa=wd,$s=Sa,Gs=vd,vs=So,Vs=Ca,To=Al,Ys=kl,ws=qi,Ia=Zi,gi=yd,Li[0]=Bi,Li[1]=cd,Li[2]=fd,Li[3]=pd,Li[4]=wl,Li[5]=wo,Li[6]=jl,Li[7]=ya,Li[8]=gd,Li[9]=md,js[0]=yl,js[1]=ud,js[2]=Qi,js[3]=yo,js[4]=Pn,js[5]=hd,js[6]=vl,is[0]=ms,is[1]=dd,is[2]=xd,is[3]=va,is[4]=qs,is[5]=bd,is[6]=wa,g=1}else g=0}g&&(g=function(we,Qe){for(we.M=0;we.M<we.Va;++we.M){var qe,ge=we.Jc[we.M&we.Xb],xe=we.m,Xe=we;for(qe=0;qe<Xe.za;++qe){var rt=xe,Ke=Xe,Pt=Ke.Ac,xt=Ke.Bc+4*qe,qt=Ke.zc,vt=Ke.ya[Ke.aa+qe];if(Ke.Qa.Bb?vt.$b=le(rt,Ke.Pa.jb[0])?2+le(rt,Ke.Pa.jb[2]):le(rt,Ke.Pa.jb[1]):vt.$b=0,Ke.kc&&(vt.Ad=le(rt,Ke.Bd)),vt.Za=!le(rt,145)+0,vt.Za){var ur=vt.Ob,gr=0;for(Ke=0;4>Ke;++Ke){var ar,ir=qt[0+Ke];for(ar=0;4>ar;++ar){ir=lm[Pt[xt+ar]][ir];for(var Cr=dh[le(rt,ir[0])];0<Cr;)Cr=dh[2*Cr+le(rt,ir[Cr])];ir=-Cr,Pt[xt+ar]=ir}i(ur,gr,Pt,xt,4),gr+=4,qt[0+Ke]=ir}}else ir=le(rt,156)?le(rt,128)?1:3:le(rt,163)?2:0,vt.Ob[0]=ir,o(Pt,xt,ir,4),o(qt,0,ir,4);vt.Dd=le(rt,142)?le(rt,114)?le(rt,183)?1:3:2:0}if(Xe.m.Ka)return Gt(we,7,"Premature end-of-partition0 encountered.");for(;we.ja<we.za;++we.ja){if(Xe=ge,rt=(xe=we).rb[xe.sb-1],Pt=xe.rb[xe.sb+xe.ja],qe=xe.ya[xe.aa+xe.ja],xt=xe.kc?qe.Ad:0)rt.la=Pt.la=0,qe.Za||(rt.Na=Pt.Na=0),qe.Hc=0,qe.Gc=0,qe.ia=0;else{var jr,Kt;if(rt=Pt,Pt=Xe,xt=xe.Pa.Xc,qt=xe.ya[xe.aa+xe.ja],vt=xe.pb[qt.$b],Ke=qt.ad,ur=0,gr=xe.rb[xe.sb-1],ir=ar=0,o(Ke,ur,0,384),qt.Za)var cn=0,Yn=xt[3];else{Cr=s(16);var dn=rt.Na+gr.Na;if(dn=Da(Pt,xt[1],dn,vt.Eb,0,Cr,0),rt.Na=gr.Na=(0<dn)+0,1<dn)Ro(Cr,0,Ke,ur);else{var Jn=Cr[0]+3>>3;for(Cr=0;256>Cr;Cr+=16)Ke[ur+Cr]=Jn}cn=1,Yn=xt[0]}var xr=15&rt.la,ai=15&gr.la;for(Cr=0;4>Cr;++Cr){var li=1&ai;for(Jn=Kt=0;4>Jn;++Jn)xr=xr>>1|(li=(dn=Da(Pt,Yn,dn=li+(1&xr),vt.Sc,cn,Ke,ur))>cn)<<7,Kt=Kt<<2|(3<dn?3:1<dn?2:Ke[ur+0]!=0),ur+=16;xr>>=4,ai=ai>>1|li<<7,ar=(ar<<8|Kt)>>>0}for(Yn=xr,cn=ai>>4,jr=0;4>jr;jr+=2){for(Kt=0,xr=rt.la>>4+jr,ai=gr.la>>4+jr,Cr=0;2>Cr;++Cr){for(li=1&ai,Jn=0;2>Jn;++Jn)dn=li+(1&xr),xr=xr>>1|(li=0<(dn=Da(Pt,xt[2],dn,vt.Qc,0,Ke,ur)))<<3,Kt=Kt<<2|(3<dn?3:1<dn?2:Ke[ur+0]!=0),ur+=16;xr>>=2,ai=ai>>1|li<<5}ir|=Kt<<4*jr,Yn|=xr<<4<<jr,cn|=(240&ai)<<jr}rt.la=Yn,gr.la=cn,qt.Hc=ar,qt.Gc=ir,qt.ia=43690&ir?0:vt.ia,xt=!(ar|ir)}if(0<xe.L&&(xe.wa[xe.Y+xe.ja]=xe.gd[qe.$b][qe.Za],xe.wa[xe.Y+xe.ja].La|=!xt),Xe.Ka)return Gt(we,7,"Premature end-of-file encountered.")}if(ps(we),xe=Qe,Xe=1,qe=(ge=we).D,rt=0<ge.L&&ge.M>=ge.zb&&ge.M<=ge.Va,ge.Aa==0)e:{if(qe.M=ge.M,qe.uc=rt,Na(ge,qe),Xe=1,qe=(Kt=ge.D).Nb,rt=(ir=Ul[ge.L])*ge.R,Pt=ir/2*ge.B,Cr=16*qe*ge.R,Jn=8*qe*ge.B,xt=ge.sa,qt=ge.ta-rt+Cr,vt=ge.qa,Ke=ge.ra-Pt+Jn,ur=ge.Ha,gr=ge.Ia-Pt+Jn,ai=(xr=Kt.M)==0,ar=xr>=ge.Va-1,ge.Aa==2&&Na(ge,Kt),Kt.uc)for(li=(dn=ge).D.M,r(dn.D.uc),Kt=dn.yb;Kt<dn.Hb;++Kt){cn=Kt,Yn=li;var gn=(kn=(Vr=dn).D).Nb;jr=Vr.R;var kn=kn.wa[kn.Y+cn],Dn=Vr.sa,vi=Vr.ta+16*gn*jr+16*cn,Ui=kn.dd,xn=kn.tc;if(xn!=0)if(r(3<=xn),Vr.L==1)0<cn&&ws(Dn,vi,jr,xn+4),kn.La&&gi(Dn,vi,jr,xn),0<Yn&&Ys(Dn,vi,jr,xn+4),kn.La&&Ia(Dn,vi,jr,xn);else{var ss=Vr.B,Js=Vr.qa,Fo=Vr.ra+8*gn*ss+8*cn,Cs=Vr.Ha,Vr=Vr.Ia+8*gn*ss+8*cn;gn=kn.ld,0<cn&&(El(Dn,vi,jr,xn+4,Ui,gn),$s(Js,Fo,Cs,Vr,ss,xn+4,Ui,gn)),kn.La&&(vs(Dn,vi,jr,xn,Ui,gn),To(Js,Fo,Cs,Vr,ss,xn,Ui,gn)),0<Yn&&(Eo(Dn,vi,jr,xn+4,Ui,gn),Fa(Js,Fo,Cs,Vr,ss,xn+4,Ui,gn)),kn.La&&(Gs(Dn,vi,jr,xn,Ui,gn),Vs(Js,Fo,Cs,Vr,ss,xn,Ui,gn))}}if(ge.ia&&alert("todo:DitherRow"),xe.put!=null){if(Kt=16*xr,xr=16*(xr+1),ai?(xe.y=ge.sa,xe.O=ge.ta+Cr,xe.f=ge.qa,xe.N=ge.ra+Jn,xe.ea=ge.Ha,xe.W=ge.Ia+Jn):(Kt-=ir,xe.y=xt,xe.O=qt,xe.f=vt,xe.N=Ke,xe.ea=ur,xe.W=gr),ar||(xr-=ir),xr>xe.o&&(xr=xe.o),xe.F=null,xe.J=null,ge.Fa!=null&&0<ge.Fa.length&&Kt<xr&&(xe.J=La(ge,xe,Kt,xr-Kt),xe.F=ge.mb,xe.F==null&&xe.F.length==0)){Xe=Gt(ge,3,"Could not decode alpha data.");break e}Kt<xe.j&&(ir=xe.j-Kt,Kt=xe.j,r(!(1&ir)),xe.O+=ge.R*ir,xe.N+=ge.B*(ir>>1),xe.W+=ge.B*(ir>>1),xe.F!=null&&(xe.J+=xe.width*ir)),Kt<xr&&(xe.O+=xe.v,xe.N+=xe.v>>1,xe.W+=xe.v>>1,xe.F!=null&&(xe.J+=xe.v),xe.ka=Kt-xe.j,xe.U=xe.va-xe.v,xe.T=xr-Kt,Xe=xe.put(xe))}qe+1!=ge.Ic||ar||(i(ge.sa,ge.ta-rt,xt,qt+16*ge.R,rt),i(ge.qa,ge.ra-Pt,vt,Ke+8*ge.B,Pt),i(ge.Ha,ge.Ia-Pt,ur,gr+8*ge.B,Pt))}if(!Xe)return Gt(we,6,"Output aborted.")}return 1}(l,d)),d.bc!=null&&d.bc(d),g&=1}return g?(l.cb=0,g):0}function _i(l,d,g,S,F){F=l[d+g+32*S]+(F>>3),l[d+g+32*S]=-256&F?0>F?0:255:F}function bo(l,d,g,S,F,U){_i(l,d,0,g,S+F),_i(l,d,1,g,S+U),_i(l,d,2,g,S-U),_i(l,d,3,g,S-F)}function $n(l){return(20091*l>>16)+l}function xa(l,d,g,S){var F,U=0,J=s(16);for(F=0;4>F;++F){var X=l[d+0]+l[d+8],K=l[d+0]-l[d+8],te=(35468*l[d+4]>>16)-$n(l[d+12]),me=$n(l[d+4])+(35468*l[d+12]>>16);J[U+0]=X+me,J[U+1]=K+te,J[U+2]=K-te,J[U+3]=X-me,U+=4,d++}for(F=U=0;4>F;++F)X=(l=J[U+0]+4)+J[U+8],K=l-J[U+8],te=(35468*J[U+4]>>16)-$n(J[U+12]),_i(g,S,0,0,X+(me=$n(J[U+4])+(35468*J[U+12]>>16))),_i(g,S,1,0,K+te),_i(g,S,2,0,K-te),_i(g,S,3,0,X-me),U++,S+=32}function gl(l,d,g,S){var F=l[d+0]+4,U=35468*l[d+4]>>16,J=$n(l[d+4]),X=35468*l[d+1]>>16;bo(g,S,0,F+J,l=$n(l[d+1]),X),bo(g,S,1,F+U,l,X),bo(g,S,2,F-U,l,X),bo(g,S,3,F-J,l,X)}function od(l,d,g,S,F){xa(l,d,g,S),F&&xa(l,d+16,g,S+4)}function xl(l,d,g,S){rs(l,d+0,g,S,1),rs(l,d+32,g,S+128,1)}function ad(l,d,g,S){var F;for(l=l[d+0]+4,F=0;4>F;++F)for(d=0;4>d;++d)_i(g,S,d,F,l)}function bl(l,d,g,S){l[d+0]&&Mn(l,d+0,g,S),l[d+16]&&Mn(l,d+16,g,S+4),l[d+32]&&Mn(l,d+32,g,S+128),l[d+48]&&Mn(l,d+48,g,S+128+4)}function ld(l,d,g,S){var F,U=s(16);for(F=0;4>F;++F){var J=l[d+0+F]+l[d+12+F],X=l[d+4+F]+l[d+8+F],K=l[d+4+F]-l[d+8+F],te=l[d+0+F]-l[d+12+F];U[0+F]=J+X,U[8+F]=J-X,U[4+F]=te+K,U[12+F]=te-K}for(F=0;4>F;++F)J=(l=U[0+4*F]+3)+U[3+4*F],X=U[1+4*F]+U[2+4*F],K=U[1+4*F]-U[2+4*F],te=l-U[3+4*F],g[S+0]=J+X>>3,g[S+16]=te+K>>3,g[S+32]=J-X>>3,g[S+48]=te-K>>3,S+=64}function ba(l,d,g){var S,F=d-32,U=oi,J=255-l[F-1];for(S=0;S<g;++S){var X,K=U,te=J+l[d-1];for(X=0;X<g;++X)l[d+X]=K[te+l[F+X]];d+=32}}function cd(l,d){ba(l,d,4)}function dd(l,d){ba(l,d,8)}function ud(l,d){ba(l,d,16)}function Qi(l,d){var g;for(g=0;16>g;++g)i(l,d+32*g,l,d-32,16)}function yo(l,d){var g;for(g=16;0<g;--g)o(l,d,l[d-1],16),d+=32}function vo(l,d,g){var S;for(S=0;16>S;++S)o(d,g+32*S,l,16)}function yl(l,d){var g,S=16;for(g=0;16>g;++g)S+=l[d-1+32*g]+l[d+g-32];vo(S>>5,l,d)}function Pn(l,d){var g,S=8;for(g=0;16>g;++g)S+=l[d-1+32*g];vo(S>>4,l,d)}function hd(l,d){var g,S=8;for(g=0;16>g;++g)S+=l[d+g-32];vo(S>>4,l,d)}function vl(l,d){vo(128,l,d)}function Vt(l,d,g){return l+2*d+g+2>>2}function fd(l,d){var g,S=d-32;for(S=new Uint8Array([Vt(l[S-1],l[S+0],l[S+1]),Vt(l[S+0],l[S+1],l[S+2]),Vt(l[S+1],l[S+2],l[S+3]),Vt(l[S+2],l[S+3],l[S+4])]),g=0;4>g;++g)i(l,d+32*g,S,0,S.length)}function pd(l,d){var g=l[d-1],S=l[d-1+32],F=l[d-1+64],U=l[d-1+96];be(l,d+0,16843009*Vt(l[d-1-32],g,S)),be(l,d+32,16843009*Vt(g,S,F)),be(l,d+64,16843009*Vt(S,F,U)),be(l,d+96,16843009*Vt(F,U,U))}function Bi(l,d){var g,S=4;for(g=0;4>g;++g)S+=l[d+g-32]+l[d-1+32*g];for(S>>=3,g=0;4>g;++g)o(l,d+32*g,S,4)}function wl(l,d){var g=l[d-1+0],S=l[d-1+32],F=l[d-1+64],U=l[d-1-32],J=l[d+0-32],X=l[d+1-32],K=l[d+2-32],te=l[d+3-32];l[d+0+96]=Vt(S,F,l[d-1+96]),l[d+1+96]=l[d+0+64]=Vt(g,S,F),l[d+2+96]=l[d+1+64]=l[d+0+32]=Vt(U,g,S),l[d+3+96]=l[d+2+64]=l[d+1+32]=l[d+0+0]=Vt(J,U,g),l[d+3+64]=l[d+2+32]=l[d+1+0]=Vt(X,J,U),l[d+3+32]=l[d+2+0]=Vt(K,X,J),l[d+3+0]=Vt(te,K,X)}function jl(l,d){var g=l[d+1-32],S=l[d+2-32],F=l[d+3-32],U=l[d+4-32],J=l[d+5-32],X=l[d+6-32],K=l[d+7-32];l[d+0+0]=Vt(l[d+0-32],g,S),l[d+1+0]=l[d+0+32]=Vt(g,S,F),l[d+2+0]=l[d+1+32]=l[d+0+64]=Vt(S,F,U),l[d+3+0]=l[d+2+32]=l[d+1+64]=l[d+0+96]=Vt(F,U,J),l[d+3+32]=l[d+2+64]=l[d+1+96]=Vt(U,J,X),l[d+3+64]=l[d+2+96]=Vt(J,X,K),l[d+3+96]=Vt(X,K,K)}function wo(l,d){var g=l[d-1+0],S=l[d-1+32],F=l[d-1+64],U=l[d-1-32],J=l[d+0-32],X=l[d+1-32],K=l[d+2-32],te=l[d+3-32];l[d+0+0]=l[d+1+64]=U+J+1>>1,l[d+1+0]=l[d+2+64]=J+X+1>>1,l[d+2+0]=l[d+3+64]=X+K+1>>1,l[d+3+0]=K+te+1>>1,l[d+0+96]=Vt(F,S,g),l[d+0+64]=Vt(S,g,U),l[d+0+32]=l[d+1+96]=Vt(g,U,J),l[d+1+32]=l[d+2+96]=Vt(U,J,X),l[d+2+32]=l[d+3+96]=Vt(J,X,K),l[d+3+32]=Vt(X,K,te)}function ya(l,d){var g=l[d+0-32],S=l[d+1-32],F=l[d+2-32],U=l[d+3-32],J=l[d+4-32],X=l[d+5-32],K=l[d+6-32],te=l[d+7-32];l[d+0+0]=g+S+1>>1,l[d+1+0]=l[d+0+64]=S+F+1>>1,l[d+2+0]=l[d+1+64]=F+U+1>>1,l[d+3+0]=l[d+2+64]=U+J+1>>1,l[d+0+32]=Vt(g,S,F),l[d+1+32]=l[d+0+96]=Vt(S,F,U),l[d+2+32]=l[d+1+96]=Vt(F,U,J),l[d+3+32]=l[d+2+96]=Vt(U,J,X),l[d+3+64]=Vt(J,X,K),l[d+3+96]=Vt(X,K,te)}function md(l,d){var g=l[d-1+0],S=l[d-1+32],F=l[d-1+64],U=l[d-1+96];l[d+0+0]=g+S+1>>1,l[d+2+0]=l[d+0+32]=S+F+1>>1,l[d+2+32]=l[d+0+64]=F+U+1>>1,l[d+1+0]=Vt(g,S,F),l[d+3+0]=l[d+1+32]=Vt(S,F,U),l[d+3+32]=l[d+1+64]=Vt(F,U,U),l[d+3+64]=l[d+2+64]=l[d+0+96]=l[d+1+96]=l[d+2+96]=l[d+3+96]=U}function gd(l,d){var g=l[d-1+0],S=l[d-1+32],F=l[d-1+64],U=l[d-1+96],J=l[d-1-32],X=l[d+0-32],K=l[d+1-32],te=l[d+2-32];l[d+0+0]=l[d+2+32]=g+J+1>>1,l[d+0+32]=l[d+2+64]=S+g+1>>1,l[d+0+64]=l[d+2+96]=F+S+1>>1,l[d+0+96]=U+F+1>>1,l[d+3+0]=Vt(X,K,te),l[d+2+0]=Vt(J,X,K),l[d+1+0]=l[d+3+32]=Vt(g,J,X),l[d+1+32]=l[d+3+64]=Vt(S,g,J),l[d+1+64]=l[d+3+96]=Vt(F,S,g),l[d+1+96]=Vt(U,F,S)}function xd(l,d){var g;for(g=0;8>g;++g)i(l,d+32*g,l,d-32,8)}function va(l,d){var g;for(g=0;8>g;++g)o(l,d,l[d-1],8),d+=32}function Bs(l,d,g){var S;for(S=0;8>S;++S)o(d,g+32*S,l,8)}function ms(l,d){var g,S=8;for(g=0;8>g;++g)S+=l[d+g-32]+l[d-1+32*g];Bs(S>>4,l,d)}function bd(l,d){var g,S=4;for(g=0;8>g;++g)S+=l[d+g-32];Bs(S>>3,l,d)}function qs(l,d){var g,S=4;for(g=0;8>g;++g)S+=l[d-1+32*g];Bs(S>>3,l,d)}function wa(l,d){Bs(128,l,d)}function jo(l,d,g){var S=l[d-g],F=l[d+0],U=3*(F-S)+Cd[1020+l[d-2*g]-l[d+g]],J=zl[112+(U+4>>3)];l[d-g]=oi[255+S+zl[112+(U+3>>3)]],l[d+0]=oi[255+F-J]}function Sl(l,d,g,S){var F=l[d+0],U=l[d+g];return bi[255+l[d-2*g]-l[d-g]]>S||bi[255+U-F]>S}function Cl(l,d,g,S){return 4*bi[255+l[d-g]-l[d+0]]+bi[255+l[d-2*g]-l[d+g]]<=S}function _l(l,d,g,S,F){var U=l[d-3*g],J=l[d-2*g],X=l[d-g],K=l[d+0],te=l[d+g],me=l[d+2*g],Re=l[d+3*g];return 4*bi[255+X-K]+bi[255+J-te]>S?0:bi[255+l[d-4*g]-U]<=F&&bi[255+U-J]<=F&&bi[255+J-X]<=F&&bi[255+Re-me]<=F&&bi[255+me-te]<=F&&bi[255+te-K]<=F}function kl(l,d,g,S){var F=2*S+1;for(S=0;16>S;++S)Cl(l,d+S,g,F)&&jo(l,d+S,g)}function qi(l,d,g,S){var F=2*S+1;for(S=0;16>S;++S)Cl(l,d+S*g,1,F)&&jo(l,d+S*g,1)}function Zi(l,d,g,S){var F;for(F=3;0<F;--F)kl(l,d+=4*g,g,S)}function yd(l,d,g,S){var F;for(F=3;0<F;--F)qi(l,d+=4,g,S)}function gs(l,d,g,S,F,U,J,X){for(U=2*U+1;0<F--;){if(_l(l,d,g,U,J))if(Sl(l,d,g,X))jo(l,d,g);else{var K=l,te=d,me=g,Re=K[te-2*me],Ee=K[te-me],we=K[te+0],Qe=K[te+me],qe=K[te+2*me],ge=27*(Xe=Cd[1020+3*(we-Ee)+Cd[1020+Re-Qe]])+63>>7,xe=18*Xe+63>>7,Xe=9*Xe+63>>7;K[te-3*me]=oi[255+K[te-3*me]+Xe],K[te-2*me]=oi[255+Re+xe],K[te-me]=oi[255+Ee+ge],K[te+0]=oi[255+we-ge],K[te+me]=oi[255+Qe-xe],K[te+2*me]=oi[255+qe-Xe]}d+=S}}function ki(l,d,g,S,F,U,J,X){for(U=2*U+1;0<F--;){if(_l(l,d,g,U,J))if(Sl(l,d,g,X))jo(l,d,g);else{var K=l,te=d,me=g,Re=K[te-me],Ee=K[te+0],we=K[te+me],Qe=zl[112+((qe=3*(Ee-Re))+4>>3)],qe=zl[112+(qe+3>>3)],ge=Qe+1>>1;K[te-2*me]=oi[255+K[te-2*me]+ge],K[te-me]=oi[255+Re+qe],K[te+0]=oi[255+Ee-Qe],K[te+me]=oi[255+we-ge]}d+=S}}function ja(l,d,g,S,F,U){gs(l,d,g,1,16,S,F,U)}function Ws(l,d,g,S,F,U){gs(l,d,1,g,16,S,F,U)}function vd(l,d,g,S,F,U){var J;for(J=3;0<J;--J)ki(l,d+=4*g,g,1,16,S,F,U)}function So(l,d,g,S,F,U){var J;for(J=3;0<J;--J)ki(l,d+=4,1,g,16,S,F,U)}function wd(l,d,g,S,F,U,J,X){gs(l,d,F,1,8,U,J,X),gs(g,S,F,1,8,U,J,X)}function Sa(l,d,g,S,F,U,J,X){gs(l,d,1,F,8,U,J,X),gs(g,S,1,F,8,U,J,X)}function Ca(l,d,g,S,F,U,J,X){ki(l,d+4*F,F,1,8,U,J,X),ki(g,S+4*F,F,1,8,U,J,X)}function Al(l,d,g,S,F,U,J,X){ki(l,d+4,1,F,8,U,J,X),ki(g,S+4,1,F,8,U,J,X)}function Co(){this.ba=new zt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new We,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function _a(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ka(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ll(){this.ua=0,this.Wa=new ee,this.vb=new ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new A}function jd(){this.xb=this.a=0,this.l=new Sr,this.ca=new zt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ll,this.ab=0,this.gc=a(4,ka),this.Oc=0}function _o(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Sr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Us(l,d,g,S,F,U,J){for(l=l==null?0:l[d+0],d=0;d<J;++d)F[U+d]=l+g[S+d]&255,l=F[U+d]}function Aa(l,d,g,S,F,U,J){var X;if(l==null)Us(null,null,g,S,F,U,J);else for(X=0;X<J;++X)F[U+X]=l[d+X]+g[S+X]&255}function xs(l,d,g,S,F,U,J){if(l==null)Us(null,null,g,S,F,U,J);else{var X,K=l[d+0],te=K,me=K;for(X=0;X<J;++X)te=me+(K=l[d+X])-te,me=g[S+X]+(-256&te?0>te?0:255:te)&255,te=K,F[U+X]=me}}function La(l,d,g,S){var F=d.width,U=d.o;if(r(l!=null&&d!=null),0>g||0>=S||g+S>U)return null;if(!l.Cc){if(l.ga==null){var J;if(l.ga=new _o,(J=l.ga==null)||(J=d.width*d.o,r(l.Gb.length==0),l.Gb=s(J),l.Uc=0,l.Gb==null?J=0:(l.mb=l.Gb,l.nb=l.Uc,l.rc=null,J=1),J=!J),!J){J=l.ga;var X=l.Fa,K=l.P,te=l.qc,me=l.mb,Re=l.nb,Ee=K+1,we=te-1,Qe=J.l;if(r(X!=null&&me!=null&&d!=null),Ss[0]=null,Ss[1]=Us,Ss[2]=Aa,Ss[3]=xs,J.ca=me,J.tb=Re,J.c=d.width,J.i=d.height,r(0<J.c&&0<J.i),1>=te)d=0;else if(J.$a=X[K+0]>>0&3,J.Z=X[K+0]>>2&3,J.Lc=X[K+0]>>4&3,K=X[K+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||K)d=0;else if(Qe.put=Ut,Qe.ac=Ct,Qe.bc=Ve,Qe.ma=J,Qe.width=d.width,Qe.height=d.height,Qe.Da=d.Da,Qe.v=d.v,Qe.va=d.va,Qe.j=d.j,Qe.o=d.o,J.$a)e:{r(J.$a==1),d=he();t:for(;;){if(d==null){d=0;break e}if(r(J!=null),J.mc=d,d.c=J.c,d.i=J.i,d.l=J.l,d.l.ma=J,d.l.width=J.c,d.l.height=J.i,d.a=0,ne(d.m,X,Ee,we),!kt(J.c,J.i,1,d,null)||(d.ab==1&&d.gc[0].hc==3&&fr(d.s)?(J.ic=1,X=d.c*d.i,d.Ta=null,d.Ua=0,d.V=s(X),d.Ba=0,d.V==null?(d.a=1,d=0):d=1):(J.ic=0,d=Et(d,J.c)),!d))break t;d=1;break e}J.mc=null,d=0}else d=we>=J.c*J.i;J=!d}if(J)return null;l.ga.Lc!=1?l.Ga=0:S=U-g}r(l.ga!=null),r(g+S<=U);e:{if(d=(X=l.ga).c,U=X.l.o,X.$a==0){if(Ee=l.rc,we=l.Vc,Qe=l.Fa,K=l.P+1+g*d,te=l.mb,me=l.nb+g*d,r(K<=l.P+l.qc),X.Z!=0)for(r(Ss[X.Z]!=null),J=0;J<S;++J)Ss[X.Z](Ee,we,Qe,K,te,me,d),Ee=te,we=me,me+=d,K+=d;else for(J=0;J<S;++J)i(te,me,Qe,K,d),Ee=te,we=me,me+=d,K+=d;l.rc=Ee,l.Vc=we}else{if(r(X.mc!=null),d=g+S,r((J=X.mc)!=null),r(d<=J.i),J.C>=d)d=1;else if(X.ic||ke(),X.ic){X=J.V,Ee=J.Ba,we=J.c;var qe=J.i,ge=(Qe=1,K=J.$/we,te=J.$%we,me=J.m,Re=J.s,J.$),xe=we*qe,Xe=we*d,rt=Re.wc,Ke=ge<Xe?Mr(Re,te,K):null;r(ge<=xe),r(d<=qe),r(fr(Re));t:for(;;){for(;!me.h&&ge<Xe;){if(te&rt||(Ke=Mr(Re,te,K)),r(Ke!=null),Q(me),256>(qe=jt(Ke.G[0],Ke.H[0],me)))X[Ee+ge]=qe,++ge,++te>=we&&(te=0,++K<=d&&!(K%16)&&Ln(J,K));else{if(!(280>qe)){Qe=0;break t}qe=It(qe-256,me);var Pt,xt=jt(Ke.G[4],Ke.H[4],me);if(Q(me),!(ge>=(xt=dt(we,xt=It(xt,me)))&&xe-ge>=qe)){Qe=0;break t}for(Pt=0;Pt<qe;++Pt)X[Ee+ge+Pt]=X[Ee+ge+Pt-xt];for(ge+=qe,te+=qe;te>=we;)te-=we,++K<=d&&!(K%16)&&Ln(J,K);ge<Xe&&te&rt&&(Ke=Mr(Re,te,K))}r(me.h==L(me))}Ln(J,K>d?d:K);break t}!Qe||me.h&&ge<xe?(Qe=0,J.a=me.h?5:3):J.$=ge,d=Qe}else d=Hn(J,J.V,J.Ba,J.c,J.i,d,Tt);if(!d){S=0;break e}}g+S>=U&&(l.Cc=1),S=1}if(!S)return null;if(l.Cc&&((S=l.ga)!=null&&(S.mc=null),l.ga=null,0<l.Ga))return alert("todo:WebPDequantizeLevels"),null}return l.nb+g*F}function f(l,d,g,S,F,U){for(;0<F--;){var J,X=l,K=d+(g?1:0),te=l,me=d+(g?0:3);for(J=0;J<S;++J){var Re=te[me+4*J];Re!=255&&(Re*=32897,X[K+4*J+0]=X[K+4*J+0]*Re>>23,X[K+4*J+1]=X[K+4*J+1]*Re>>23,X[K+4*J+2]=X[K+4*J+2]*Re>>23)}d+=U}}function I(l,d,g,S,F){for(;0<S--;){var U;for(U=0;U<g;++U){var J=l[d+2*U+0],X=15&(te=l[d+2*U+1]),K=4369*X,te=(240&te|te>>4)*K>>16;l[d+2*U+0]=(240&J|J>>4)*K>>16&240|(15&J|J<<4)*K>>16>>4&15,l[d+2*U+1]=240&te|X}d+=F}}function ae(l,d,g,S,F,U,J,X){var K,te,me=255;for(te=0;te<F;++te){for(K=0;K<S;++K){var Re=l[d+K];U[J+4*K]=Re,me&=Re}d+=g,J+=X}return me!=255}function pe(l,d,g,S,F){var U;for(U=0;U<F;++U)g[S+U]=l[d+U]>>8}function ke(){xi=f,Rr=I,Er=ae,Zr=pe}function He(l,d,g){V[l]=function(S,F,U,J,X,K,te,me,Re,Ee,we,Qe,qe,ge,xe,Xe,rt){var Ke,Pt=rt-1>>1,xt=X[K+0]|te[me+0]<<16,qt=Re[Ee+0]|we[Qe+0]<<16;r(S!=null);var vt=3*xt+qt+131074>>2;for(d(S[F+0],255&vt,vt>>16,qe,ge),U!=null&&(vt=3*qt+xt+131074>>2,d(U[J+0],255&vt,vt>>16,xe,Xe)),Ke=1;Ke<=Pt;++Ke){var ur=X[K+Ke]|te[me+Ke]<<16,gr=Re[Ee+Ke]|we[Qe+Ke]<<16,ar=xt+ur+qt+gr+524296,ir=ar+2*(ur+qt)>>3;vt=ir+xt>>1,xt=(ar=ar+2*(xt+gr)>>3)+ur>>1,d(S[F+2*Ke-1],255&vt,vt>>16,qe,ge+(2*Ke-1)*g),d(S[F+2*Ke-0],255&xt,xt>>16,qe,ge+(2*Ke-0)*g),U!=null&&(vt=ar+qt>>1,xt=ir+gr>>1,d(U[J+2*Ke-1],255&vt,vt>>16,xe,Xe+(2*Ke-1)*g),d(U[J+2*Ke+0],255&xt,xt>>16,xe,Xe+(2*Ke+0)*g)),xt=ur,qt=gr}1&rt||(vt=3*xt+qt+131074>>2,d(S[F+rt-1],255&vt,vt>>16,qe,ge+(rt-1)*g),U!=null&&(vt=3*qt+xt+131074>>2,d(U[J+rt-1],255&vt,vt>>16,xe,Xe+(rt-1)*g)))}}function st(){yi[Fl]=hm,yi[Il]=hh,yi[ah]=fm,yi[Ml]=fh,yi[Dl]=ph,yi[_d]=mh,yi[lh]=pm,yi[kd]=hh,yi[Ad]=fh,yi[Bl]=ph,yi[Ld]=mh}function Lt(l){return l&-16384?0>l?0:255:l>>mm}function Dt(l,d){return Lt((19077*l>>8)+(26149*d>>8)-14234)}function Xt(l,d,g){return Lt((19077*l>>8)-(6419*d>>8)-(13320*g>>8)+8708)}function Yt(l,d){return Lt((19077*l>>8)+(33050*d>>8)-17685)}function or(l,d,g,S,F){S[F+0]=Dt(l,g),S[F+1]=Xt(l,d,g),S[F+2]=Yt(l,d)}function Ur(l,d,g,S,F){S[F+0]=Yt(l,d),S[F+1]=Xt(l,d,g),S[F+2]=Dt(l,g)}function Gr(l,d,g,S,F){var U=Xt(l,d,g);d=U<<3&224|Yt(l,d)>>3,S[F+0]=248&Dt(l,g)|U>>5,S[F+1]=d}function ln(l,d,g,S,F){var U=240&Yt(l,d)|15;S[F+0]=240&Dt(l,g)|Xt(l,d,g)>>4,S[F+1]=U}function Nn(l,d,g,S,F){S[F+0]=255,or(l,d,g,S,F+1)}function mn(l,d,g,S,F){Ur(l,d,g,S,F),S[F+3]=255}function Ai(l,d,g,S,F){or(l,d,g,S,F),S[F+3]=255}function si(l,d){return 0>l?0:l>d?d:l}function Wi(l,d,g){V[l]=function(S,F,U,J,X,K,te,me,Re){for(var Ee=me+(-2&Re)*g;me!=Ee;)d(S[F+0],U[J+0],X[K+0],te,me),d(S[F+1],U[J+0],X[K+0],te,me+g),F+=2,++J,++K,me+=2*g;1&Re&&d(S[F+0],U[J+0],X[K+0],te,me)}}function Pl(l,d,g){return g==0?l==0?d==0?6:5:d==0?4:0:g}function Pa(l,d,g,S,F){switch(l>>>30){case 3:rs(d,g,S,F,0);break;case 2:Qr(d,g,S,F);break;case 1:Mn(d,g,S,F)}}function Na(l,d){var g,S,F=d.M,U=d.Nb,J=l.oc,X=l.pc+40,K=l.oc,te=l.pc+584,me=l.oc,Re=l.pc+600;for(g=0;16>g;++g)J[X+32*g-1]=129;for(g=0;8>g;++g)K[te+32*g-1]=129,me[Re+32*g-1]=129;for(0<F?J[X-1-32]=K[te-1-32]=me[Re-1-32]=129:(o(J,X-32-1,127,21),o(K,te-32-1,127,9),o(me,Re-32-1,127,9)),S=0;S<l.za;++S){var Ee=d.ya[d.aa+S];if(0<S){for(g=-1;16>g;++g)i(J,X+32*g-4,J,X+32*g+12,4);for(g=-1;8>g;++g)i(K,te+32*g-4,K,te+32*g+4,4),i(me,Re+32*g-4,me,Re+32*g+4,4)}var we=l.Gd,Qe=l.Hd+S,qe=Ee.ad,ge=Ee.Hc;if(0<F&&(i(J,X-32,we[Qe].y,0,16),i(K,te-32,we[Qe].f,0,8),i(me,Re-32,we[Qe].ea,0,8)),Ee.Za){var xe=J,Xe=X-32+16;for(0<F&&(S>=l.za-1?o(xe,Xe,we[Qe].y[15],4):i(xe,Xe,we[Qe+1].y,0,4)),g=0;4>g;g++)xe[Xe+128+g]=xe[Xe+256+g]=xe[Xe+384+g]=xe[Xe+0+g];for(g=0;16>g;++g,ge<<=2)xe=J,Xe=X+xh[g],Li[Ee.Ob[g]](xe,Xe),Pa(ge,qe,16*+g,xe,Xe)}else if(xe=Pl(S,F,Ee.Ob[0]),js[xe](J,X),ge!=0)for(g=0;16>g;++g,ge<<=2)Pa(ge,qe,16*+g,J,X+xh[g]);for(g=Ee.Gc,xe=Pl(S,F,Ee.Dd),is[xe](K,te),is[xe](me,Re),ge=qe,xe=K,Xe=te,255&(Ee=g>>0)&&(170&Ee?za(ge,256,xe,Xe):mi(ge,256,xe,Xe)),Ee=me,ge=Re,255&(g>>=8)&&(170&g?za(qe,320,Ee,ge):mi(qe,320,Ee,ge)),F<l.Ub-1&&(i(we[Qe].y,0,J,X+480,16),i(we[Qe].f,0,K,te+224,8),i(we[Qe].ea,0,me,Re+224,8)),g=8*U*l.B,we=l.sa,Qe=l.ta+16*S+16*U*l.R,qe=l.qa,Ee=l.ra+8*S+g,ge=l.Ha,xe=l.Ia+8*S+g,g=0;16>g;++g)i(we,Qe+g*l.R,J,X+32*g,16);for(g=0;8>g;++g)i(qe,Ee+g*l.B,K,te+32*g,8),i(ge,xe+g*l.B,me,Re+32*g,8)}}function ko(l,d,g,S,F,U,J,X,K){var te=[0],me=[0],Re=0,Ee=K!=null?K.kd:0,we=K!=null?K:new _a;if(l==null||12>g)return 7;we.data=l,we.w=d,we.ha=g,d=[d],g=[g],we.gb=[we.gb];e:{var Qe=d,qe=g,ge=we.gb;if(r(l!=null),r(qe!=null),r(ge!=null),ge[0]=0,12<=qe[0]&&!n(l,Qe[0],"RIFF")){if(n(l,Qe[0]+8,"WEBP")){ge=3;break e}var xe=Oe(l,Qe[0]+4);if(12>xe||4294967286<xe){ge=3;break e}if(Ee&&xe>qe[0]-8){ge=7;break e}ge[0]=xe,Qe[0]+=12,qe[0]-=12}ge=0}if(ge!=0)return ge;for(xe=0<we.gb[0],g=g[0];;){e:{var Xe=l;qe=d,ge=g;var rt=te,Ke=me,Pt=Qe=[0];if((vt=Re=[Re])[0]=0,8>ge[0])ge=7;else{if(!n(Xe,qe[0],"VP8X")){if(Oe(Xe,qe[0]+4)!=10){ge=3;break e}if(18>ge[0]){ge=7;break e}var xt=Oe(Xe,qe[0]+8),qt=1+Fe(Xe,qe[0]+12);if(2147483648<=qt*(Xe=1+Fe(Xe,qe[0]+15))){ge=3;break e}Pt!=null&&(Pt[0]=xt),rt!=null&&(rt[0]=qt),Ke!=null&&(Ke[0]=Xe),qe[0]+=18,ge[0]-=18,vt[0]=1}ge=0}}if(Re=Re[0],Qe=Qe[0],ge!=0)return ge;if(qe=!!(2&Qe),!xe&&Re)return 3;if(U!=null&&(U[0]=!!(16&Qe)),J!=null&&(J[0]=qe),X!=null&&(X[0]=0),J=te[0],Qe=me[0],Re&&qe&&K==null){ge=0;break}if(4>g){ge=7;break}if(xe&&Re||!xe&&!Re&&!n(l,d[0],"ALPH")){g=[g],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{xt=l,ge=d,xe=g;var vt=we.gb;rt=we.na,Ke=we.P,Pt=we.Sa,qt=22,r(xt!=null),r(xe!=null),Xe=ge[0];var ur=xe[0];for(r(rt!=null),r(Pt!=null),rt[0]=null,Ke[0]=null,Pt[0]=0;;){if(ge[0]=Xe,xe[0]=ur,8>ur){ge=7;break e}var gr=Oe(xt,Xe+4);if(4294967286<gr){ge=3;break e}var ar=8+gr+1&-2;if(qt+=ar,0<vt&&qt>vt){ge=3;break e}if(!n(xt,Xe,"VP8 ")||!n(xt,Xe,"VP8L")){ge=0;break e}if(ur[0]<ar){ge=7;break e}n(xt,Xe,"ALPH")||(rt[0]=xt,Ke[0]=Xe+8,Pt[0]=gr),Xe+=ar,ur-=ar}}if(g=g[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],ge!=0)break}g=[g],we.Ja=[we.Ja],we.xa=[we.xa];e:if(vt=l,ge=d,xe=g,rt=we.gb[0],Ke=we.Ja,Pt=we.xa,xt=ge[0],Xe=!n(vt,xt,"VP8 "),qt=!n(vt,xt,"VP8L"),r(vt!=null),r(xe!=null),r(Ke!=null),r(Pt!=null),8>xe[0])ge=7;else{if(Xe||qt){if(vt=Oe(vt,xt+4),12<=rt&&vt>rt-12){ge=3;break e}if(Ee&&vt>xe[0]-8){ge=7;break e}Ke[0]=vt,ge[0]+=8,xe[0]-=8,Pt[0]=qt}else Pt[0]=5<=xe[0]&&vt[xt+0]==47&&!(vt[xt+4]>>5),Ke[0]=xe[0];ge=0}if(g=g[0],we.Ja=we.Ja[0],we.xa=we.xa[0],d=d[0],ge!=0)break;if(4294967286<we.Ja)return 3;if(X==null||qe||(X[0]=we.xa?2:1),J=[J],Qe=[Qe],we.xa){if(5>g){ge=7;break}X=J,Ee=Qe,qe=U,l==null||5>g?l=0:5<=g&&l[d+0]==47&&!(l[d+4]>>5)?(xe=[0],vt=[0],rt=[0],ne(Ke=new C,l,d,g),Je(Ke,xe,vt,rt)?(X!=null&&(X[0]=xe[0]),Ee!=null&&(Ee[0]=vt[0]),qe!=null&&(qe[0]=rt[0]),l=1):l=0):l=0}else{if(10>g){ge=7;break}X=Qe,l==null||10>g||!dr(l,d+3,g-3)?l=0:(Ee=l[d+0]|l[d+1]<<8|l[d+2]<<16,qe=16383&(l[d+7]<<8|l[d+6]),l=16383&(l[d+9]<<8|l[d+8]),1&Ee||3<(Ee>>1&7)||!(Ee>>4&1)||Ee>>5>=we.Ja||!qe||!l?l=0:(J&&(J[0]=qe),X&&(X[0]=l),l=1))}if(!l||(J=J[0],Qe=Qe[0],Re&&(te[0]!=J||me[0]!=Qe)))return 3;K!=null&&(K[0]=we,K.offset=d-K.w,r(4294967286>d-K.w),r(K.offset==K.ha-g));break}return ge==0||ge==7&&Re&&K==null?(U!=null&&(U[0]|=we.na!=null&&0<we.na.length),S!=null&&(S[0]=J),F!=null&&(F[0]=Qe),0):ge}function Oa(l,d,g){var S=d.width,F=d.height,U=0,J=0,X=S,K=F;if(d.Da=l!=null&&0<l.Da,d.Da&&(X=l.cd,K=l.bd,U=l.v,J=l.j,11>g||(U&=-2,J&=-2),0>U||0>J||0>=X||0>=K||U+X>S||J+K>F))return 0;if(d.v=U,d.j=J,d.va=U+X,d.o=J+K,d.U=X,d.T=K,d.da=l!=null&&0<l.da,d.da){if(!_e(X,K,g=[l.ib],U=[l.hb]))return 0;d.ib=g[0],d.hb=U[0]}return d.ob=l!=null&&l.ob,d.Kb=l==null||!l.Sd,d.da&&(d.ob=d.ib<3*S/4&&d.hb<3*F/4,d.Kb=0),1}function Ra(l){if(l==null)return 2;if(11>l.S){var d=l.f.RGBA;d.fb+=(l.height-1)*d.A,d.A=-d.A}else d=l.f.kb,l=l.height,d.O+=(l-1)*d.fa,d.fa=-d.fa,d.N+=(l-1>>1)*d.Ab,d.Ab=-d.Ab,d.W+=(l-1>>1)*d.Db,d.Db=-d.Db,d.F!=null&&(d.J+=(l-1)*d.lb,d.lb=-d.lb);return 0}function Ao(l,d,g,S){if(S==null||0>=l||0>=d)return 2;if(g!=null){if(g.Da){var F=g.cd,U=g.bd,J=-2&g.v,X=-2&g.j;if(0>J||0>X||0>=F||0>=U||J+F>l||X+U>d)return 2;l=F,d=U}if(g.da){if(!_e(l,d,F=[g.ib],U=[g.hb]))return 2;l=F[0],d=U[0]}}S.width=l,S.height=d;e:{var K=S.width,te=S.height;if(l=S.S,0>=K||0>=te||!(l>=Fl&&13>l))l=2;else{if(0>=S.Rd&&S.sd==null){J=U=F=d=0;var me=(X=K*bh[l])*te;if(11>l||(U=(te+1)/2*(d=(K+1)/2),l==12&&(J=(F=K)*te)),(te=s(me+2*U+J))==null){l=1;break e}S.sd=te,11>l?((K=S.f.RGBA).eb=te,K.fb=0,K.A=X,K.size=me):((K=S.f.kb).y=te,K.O=0,K.fa=X,K.Fd=me,K.f=te,K.N=0+me,K.Ab=d,K.Cd=U,K.ea=te,K.W=0+me+U,K.Db=d,K.Ed=U,l==12&&(K.F=te,K.J=0+me+2*U),K.Tc=J,K.lb=F)}if(d=1,F=S.S,U=S.width,J=S.height,F>=Fl&&13>F)if(11>F)l=S.f.RGBA,d&=(X=Math.abs(l.A))*(J-1)+U<=l.size,d&=X>=U*bh[F],d&=l.eb!=null;else{l=S.f.kb,X=(U+1)/2,me=(J+1)/2,K=Math.abs(l.fa),te=Math.abs(l.Ab);var Re=Math.abs(l.Db),Ee=Math.abs(l.lb),we=Ee*(J-1)+U;d&=K*(J-1)+U<=l.Fd,d&=te*(me-1)+X<=l.Cd,d=(d&=Re*(me-1)+X<=l.Ed)&K>=U&te>=X&Re>=X,d&=l.y!=null,d&=l.f!=null,d&=l.ea!=null,F==12&&(d&=Ee>=U,d&=we<=l.Tc,d&=l.F!=null)}else d=0;l=d?0:2}}return l!=0||g!=null&&g.fd&&(l=Ra(S)),l}var _n=64,Lo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Po=24,No=32,Ea=8,Gn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ue("Predictor0","PredictorAdd0"),V.Predictor0=function(){return 4278190080},V.Predictor1=function(l){return l},V.Predictor2=function(l,d,g){return d[g+0]},V.Predictor3=function(l,d,g){return d[g+1]},V.Predictor4=function(l,d,g){return d[g-1]},V.Predictor5=function(l,d,g){return Ze(Ze(l,d[g+1]),d[g+0])},V.Predictor6=function(l,d,g){return Ze(l,d[g-1])},V.Predictor7=function(l,d,g){return Ze(l,d[g+0])},V.Predictor8=function(l,d,g){return Ze(d[g-1],d[g+0])},V.Predictor9=function(l,d,g){return Ze(d[g+0],d[g+1])},V.Predictor10=function(l,d,g){return Ze(Ze(l,d[g-1]),Ze(d[g+0],d[g+1]))},V.Predictor11=function(l,d,g){var S=d[g+0];return 0>=je(S>>24&255,l>>24&255,(d=d[g-1])>>24&255)+je(S>>16&255,l>>16&255,d>>16&255)+je(S>>8&255,l>>8&255,d>>8&255)+je(255&S,255&l,255&d)?S:l},V.Predictor12=function(l,d,g){var S=d[g+0];return(mt((l>>24&255)+(S>>24&255)-((d=d[g-1])>>24&255))<<24|mt((l>>16&255)+(S>>16&255)-(d>>16&255))<<16|mt((l>>8&255)+(S>>8&255)-(d>>8&255))<<8|mt((255&l)+(255&S)-(255&d)))>>>0},V.Predictor13=function(l,d,g){var S=d[g-1];return($e((l=Ze(l,d[g+0]))>>24&255,S>>24&255)<<24|$e(l>>16&255,S>>16&255)<<16|$e(l>>8&255,S>>8&255)<<8|$e(l>>0&255,S>>0&255))>>>0};var Sd=V.PredictorAdd0;V.PredictorAdd1=ve,ue("Predictor2","PredictorAdd2"),ue("Predictor3","PredictorAdd3"),ue("Predictor4","PredictorAdd4"),ue("Predictor5","PredictorAdd5"),ue("Predictor6","PredictorAdd6"),ue("Predictor7","PredictorAdd7"),ue("Predictor8","PredictorAdd8"),ue("Predictor9","PredictorAdd9"),ue("Predictor10","PredictorAdd10"),ue("Predictor11","PredictorAdd11"),ue("Predictor12","PredictorAdd12"),ue("Predictor13","PredictorAdd13");var Ta=V.PredictorAdd2;Ie("ColorIndexInverseTransform","MapARGB","32b",function(l){return l>>8&255},function(l){return l}),Ie("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(l){return l},function(l){return l>>8&255});var Nl,pi=V.ColorIndexInverseTransform,Oo=V.MapARGB,Ol=V.VP8LColorIndexInverseTransformAlpha,Rl=V.MapAlpha,bs=V.VP8LPredictorsAdd=[];bs.length=16,(V.VP8LPredictors=[]).length=16,(V.VP8LPredictorsAdd_C=[]).length=16,(V.VP8LPredictors_C=[]).length=16;var Hs,Vn,In,ys,es,ts,Ro,rs,Qr,za,Mn,mi,Eo,El,Fa,$s,Gs,vs,Vs,To,Ys,ws,Ia,gi,xi,Rr,Er,Zr,pn=s(511),ns=s(2041),Ma=s(225),zo=s(767),Tl=0,Cd=ns,zl=Ma,oi=zo,bi=pn,Fl=0,Il=1,ah=2,Ml=3,Dl=4,_d=5,lh=6,kd=7,Ad=8,Bl=9,Ld=10,Q0=[2,3,7],Z0=[3,3,11],ch=[280,256,256,256,40],em=[0,1,1,1,0],tm=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],rm=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],nm=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],im=8,Pd=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Nd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Da=null,sm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],om=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],dh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],am=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],lm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],dm=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],js=[],Li=[],is=[],um=1,uh=2,Ss=[],yi=[];He("UpsampleRgbLinePair",or,3),He("UpsampleBgrLinePair",Ur,3),He("UpsampleRgbaLinePair",Ai,4),He("UpsampleBgraLinePair",mn,4),He("UpsampleArgbLinePair",Nn,4),He("UpsampleRgba4444LinePair",ln,2),He("UpsampleRgb565LinePair",Gr,2);var hm=V.UpsampleRgbLinePair,fm=V.UpsampleBgrLinePair,hh=V.UpsampleRgbaLinePair,fh=V.UpsampleBgraLinePair,ph=V.UpsampleArgbLinePair,mh=V.UpsampleRgba4444LinePair,pm=V.UpsampleRgb565LinePair,ql=16,Wl=1<<ql-1,Ba=-227,Od=482,mm=6,gh=0,gm=s(256),xm=s(256),bm=s(256),ym=s(256),vm=s(Od-Ba),wm=s(Od-Ba);Wi("YuvToRgbRow",or,3),Wi("YuvToBgrRow",Ur,3),Wi("YuvToRgbaRow",Ai,4),Wi("YuvToBgraRow",mn,4),Wi("YuvToArgbRow",Nn,4),Wi("YuvToRgba4444Row",ln,2),Wi("YuvToRgb565Row",Gr,2);var xh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ul=[0,2,8],jm=[8,7,6,4,4,2,2,2,1,1,1,1],Sm=1;this.WebPDecodeRGBA=function(l,d,g,S,F){var U=Il,J=new Co,X=new zt;J.ba=X,X.S=U,X.width=[X.width],X.height=[X.height];var K=X.width,te=X.height,me=new Ae;if(me==null||l==null)var Re=2;else r(me!=null),Re=ko(l,d,g,me.width,me.height,me.Pd,me.Qd,me.format,null);if(Re!=0?K=0:(K!=null&&(K[0]=me.width[0]),te!=null&&(te[0]=me.height[0]),K=1),K){X.width=X.width[0],X.height=X.height[0],S!=null&&(S[0]=X.width),F!=null&&(F[0]=X.height);e:{if(S=new Sr,(F=new _a).data=l,F.w=d,F.ha=g,F.kd=1,d=[0],r(F!=null),((l=ko(F.data,F.w,F.ha,null,null,null,d,null,F))==0||l==7)&&d[0]&&(l=4),(d=l)==0){if(r(J!=null),S.data=F.data,S.w=F.w+F.offset,S.ha=F.ha-F.offset,S.put=Ut,S.ac=Ct,S.bc=Ve,S.ma=J,F.xa){if((l=he())==null){J=1;break e}if(function(Ee,we){var Qe=[0],qe=[0],ge=[0];t:for(;;){if(Ee==null)return 0;if(we==null)return Ee.a=2,0;if(Ee.l=we,Ee.a=0,ne(Ee.m,we.data,we.w,we.ha),!Je(Ee.m,Qe,qe,ge)){Ee.a=3;break t}if(Ee.xb=uh,we.width=Qe[0],we.height=qe[0],!kt(Qe[0],qe[0],1,Ee,null))break t;return 1}return r(Ee.a!=0),0}(l,S)){if(S=(d=Ao(S.width,S.height,J.Oa,J.ba))==0){t:{S=l;r:for(;;){if(S==null){S=0;break t}if(r(S.s.yc!=null),r(S.s.Ya!=null),r(0<S.s.Wb),r((g=S.l)!=null),r((F=g.ma)!=null),S.xb!=0){if(S.ca=F.ba,S.tb=F.tb,r(S.ca!=null),!Oa(F.Oa,g,Ml)){S.a=2;break r}if(!Et(S,g.width)||g.da)break r;if((g.da||bt(S.ca.S))&&ke(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&ke()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!Ue(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!Hn(S,S.V,S.Ba,S.c,S.i,g.o,Ci))break r;F.Dc=S.Ma,S=1;break t}r(S.a!=0),S=0}S=!S}S&&(d=l.a)}else d=l.a}else{if((l=new cr)==null){J=1;break e}if(l.Fa=F.na,l.P=F.P,l.qc=F.Sa,ii(l,S)){if((d=Ao(S.width,S.height,J.Oa,J.ba))==0){if(l.Aa=0,g=J.Oa,r((F=l)!=null),g!=null){if(0<(K=0>(K=g.Md)?0:100<K?255:255*K/100)){for(te=me=0;4>te;++te)12>(Re=F.pb[te]).lc&&(Re.ia=K*jm[0>Re.lc?0:Re.lc]>>3),me|=Re.ia;me&&(alert("todo:VP8InitRandom"),F.ia=1)}F.Ga=g.Id,100<F.Ga?F.Ga=100:0>F.Ga&&(F.Ga=0)}xo(l,S)||(d=l.a)}}else d=l.a}d==0&&J.Oa!=null&&J.Oa.fd&&(d=Ra(J.ba))}J=d}U=J!=0?null:11>U?X.f.RGBA.eb:X.f.kb.y}else U=null;return U};var bh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(V,R){for(var P="",j=0;j<4;j++)P+=String.fromCharCode(V[R++]);return P}function p(V,R){return(V[R+0]<<0|V[R+1]<<8|V[R+2]<<16)>>>0}function x(V,R){return(V[R+0]<<0|V[R+1]<<8|V[R+2]<<16|V[R+3]<<24)>>>0}new u;var b=[0],m=[0],_=[],w=new u,O=t,k=function(V,R){var P={},j=0,A=!1,E=0,z=0;if(P.frames=[],!function(W,L,$,Q){for(var ie=0;ie<Q;ie++)if(W[L+ie]!=$.charCodeAt(ie))return!0;return!1}(V,R,"RIFF",4)){for(x(V,R+=4),R+=8;R<V.length;){var se=h(V,R),re=x(V,R+=4);R+=4;var v=re+(1&re);switch(se){case"VP8 ":case"VP8L":P.frames[j]===void 0&&(P.frames[j]={}),(y=P.frames[j]).src_off=A?z:R-8,y.src_size=E+re+8,j++,A&&(A=!1,E=0,z=0);break;case"VP8X":(y=P.header={}).feature_flags=V[R];var ne=R+4;y.canvas_width=1+p(V,ne),ne+=3,y.canvas_height=1+p(V,ne),ne+=3;break;case"ALPH":A=!0,E=v+8,z=R-8;break;case"ANIM":(y=P.header).bgcolor=x(V,R),ne=R+4,y.loop_count=(Y=V)[(C=ne)+0]<<0|Y[C+1]<<8,ne+=2;break;case"ANMF":var M,y;(y=P.frames[j]={}).offset_x=2*p(V,R),R+=3,y.offset_y=2*p(V,R),R+=3,y.width=1+p(V,R),R+=3,y.height=1+p(V,R),R+=3,y.duration=p(V,R),R+=3,M=V[R++],y.dispose=1&M,y.blend=M>>1&1}se!="ANMF"&&(R+=v)}var Y,C;return P}}(O,0);k.response=O,k.rgbaoutput=!0,k.dataurl=!1;var T=k.header?k.header:null,H=k.frames?k.frames:null;if(T){T.loop_counter=T.loop_count,b=[T.canvas_height],m=[T.canvas_width];for(var Z=0;Z<H.length&&H[Z].blend!=0;Z++);}var N=H[0],D=w.WebPDecodeRGBA(O,N.src_off,N.src_size,m,b);N.rgba=D,N.imgwidth=m[0],N.imgheight=b[0];for(var B=0;B<m[0]*b[0]*4;B++)_[B]=D[B];return this.width=m,this.height=b,this.data=_,this}(function(t){var r=function(){return typeof Du=="function"},n=function(b,m,_,w){var O=4,k=a;switch(w){case t.image_compression.FAST:O=1,k=s;break;case t.image_compression.MEDIUM:O=6,k=c;break;case t.image_compression.SLOW:O=9,k=u}b=i(b,m,_,k);var T=Du(b,{level:O});return t.__addimage__.arrayBufferToBinaryString(T)},i=function(b,m,_,w){for(var O,k,T,H=b.length/m,Z=new Uint8Array(b.length+H),N=p(),D=0;D<H;D+=1){if(T=D*m,O=b.subarray(T,T+m),w)Z.set(w(O,_,k),T+D);else{for(var B,V=N.length,R=[];B<V;B+=1)R[B]=N[B](O,_,k);var P=x(R.concat());Z.set(R[P],T+D)}k=O}return Z},o=function(b){var m=Array.apply([],b);return m.unshift(0),m},s=function(b,m){var _,w=[],O=b.length;w[0]=1;for(var k=0;k<O;k+=1)_=b[k-m]||0,w[k+1]=b[k]-_+256&255;return w},a=function(b,m,_){var w,O=[],k=b.length;O[0]=2;for(var T=0;T<k;T+=1)w=_&&_[T]||0,O[T+1]=b[T]-w+256&255;return O},c=function(b,m,_){var w,O,k=[],T=b.length;k[0]=3;for(var H=0;H<T;H+=1)w=b[H-m]||0,O=_&&_[H]||0,k[H+1]=b[H]+256-(w+O>>>1)&255;return k},u=function(b,m,_){var w,O,k,T,H=[],Z=b.length;H[0]=4;for(var N=0;N<Z;N+=1)w=b[N-m]||0,O=_&&_[N]||0,k=_&&_[N-m]||0,T=h(w,O,k),H[N+1]=b[N]-T+256&255;return H},h=function(b,m,_){if(b===m&&m===_)return b;var w=Math.abs(m-_),O=Math.abs(b-_),k=Math.abs(b+m-_-_);return w<=O&&w<=k?b:O<=k?m:_},p=function(){return[o,s,a,c,u]},x=function(b){var m=b.map(function(_){return _.reduce(function(w,O){return w+Math.abs(O)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(b,m,_,w){var O,k,T,H,Z,N,D,B,V,R,P,j,A,E,z,se=this.decode.FLATE_DECODE,re="";if(this.__addimage__.isArrayBuffer(b)&&(b=new Uint8Array(b)),this.__addimage__.isArrayBufferView(b)){if(b=(T=new dv(b)).imgData,k=T.bits,O=T.colorSpace,Z=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){V=(B=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,P=new Uint8Array(V*T.colors),R=new Uint8Array(V);var v,ne=T.pixelBitlength-T.bits;for(E=0,z=0;E<V;E++){for(A=B[E],v=0;v<ne;)P[z++]=A>>>v&255,v+=T.bits;R[E]=A>>>v&255}}if(T.bits===16){V=(B=new Uint32Array(T.decodePixels().buffer)).length,P=new Uint8Array(V*(32/T.pixelBitlength)*T.colors),R=new Uint8Array(V*(32/T.pixelBitlength)),j=T.colors>1,E=0,z=0;for(var M=0;E<V;)A=B[E++],P[z++]=A>>>0&255,j&&(P[z++]=A>>>16&255,A=B[E++],P[z++]=A>>>0&255),R[M++]=A>>>16&255;k=8}w!==t.image_compression.NONE&&r()?(b=n(P,T.width*T.colors,T.colors,w),D=n(R,T.width,1,w)):(b=P,D=R,se=void 0)}if(T.colorType===3&&(O=this.color_spaces.INDEXED,N=T.palette,T.transparency.indexed)){var y=T.transparency.indexed,Y=0;for(E=0,V=y.length;E<V;++E)Y+=y[E];if((Y/=255)===V-1&&y.indexOf(0)!==-1)H=[y.indexOf(0)];else if(Y!==V){for(B=T.decodePixels(),R=new Uint8Array(B.length),E=0,V=B.length;E<V;E++)R[E]=y[B[E]];D=n(R,T.width,1)}}var C=function(W){var L;switch(W){case t.image_compression.FAST:L=11;break;case t.image_compression.MEDIUM:L=13;break;case t.image_compression.SLOW:L=14;break;default:L=12}return L}(w);return se===this.decode.FLATE_DECODE&&(re="/Predictor "+C+" "),re+="/Colors "+Z+" /BitsPerComponent "+k+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:_,data:b,index:m,filter:se,decodeParameters:re,transparency:H,palette:N,sMask:D,predictor:C,width:T.width,height:T.height,bitsPerComponent:k,colorSpace:O}}}})(Wt.API),function(t){t.processGIF89A=function(r,n,i,o){var s=new uv(r),a=s.width,c=s.height,u=[];s.decodeAndBlitFrameRGBA(0,u);var h={data:u,width:a,height:c},p=new vu(100).encode(h,100);return t.processJPEG.call(this,p,n,i,o)},t.processGIF87A=t.processGIF89A}(Wt.API),Oi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var r=0;r<t;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:o,green:i,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Oi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Uint8Array(r),this[t]()}catch(n){_r.log("bit decode error:"+n)}},Oi.prototype.bit1=function(){var t,r=Math.ceil(this.width/8),n=r%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,o=0;o<r;o++)for(var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*o*4,c=0;c<8&&8*o+c<this.width;c++){var u=this.palette[s>>7-c&1];this.data[a+4*c]=u.blue,this.data[a+4*c+1]=u.green,this.data[a+4*c+2]=u.red,this.data[a+4*c+3]=255}n!==0&&(this.pos+=4-n)}},Oi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),r=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<t;o++){var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*o*4,c=s>>4,u=15&s,h=this.palette[c];if(this.data[a]=h.blue,this.data[a+1]=h.green,this.data[a+2]=h.red,this.data[a+3]=255,2*o+1>=this.width)break;h=this.palette[u],this.data[a+4]=h.blue,this.data[a+4+1]=h.green,this.data[a+4+2]=h.red,this.data[a+4+3]=255}r!==0&&(this.pos+=4-r)}},Oi.prototype.bit8=function(){for(var t=this.width%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*i;if(o<this.palette.length){var a=this.palette[o];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Oi.prototype.bit15=function(){for(var t=this.width%3,r=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&r)/r*255|0,c=(s>>5&r)/r*255|0,u=(s>>10&r)/r*255|0,h=s>>15?255:0,p=i*this.width*4+4*o;this.data[p]=u,this.data[p+1]=c,this.data[p+2]=a,this.data[p+3]=h}this.pos+=t}},Oi.prototype.bit16=function(){for(var t=this.width%3,r=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&r)/r*255|0,u=(a>>5&n)/n*255|0,h=(a>>11)/r*255|0,p=o*this.width*4+4*s;this.data[p]=h,this.data[p+1]=u,this.data[p+2]=c,this.data[p+3]=255}this.pos+=t}},Oi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;this.data[a]=s,this.data[a+1]=o,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},Oi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+4*n;this.data[c]=s,this.data[c+1]=o,this.data[c+2]=i,this.data[c+3]=a}},Oi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(r,n,i,o){var s=new Oi(r,!1),a=s.width,c=s.height,u={data:s.getData(),width:a,height:c},h=new vu(100).encode(u,100);return t.processJPEG.call(this,h,n,i,o)}}(Wt.API),sp.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(r,n,i,o){var s=new sp(r),a=s.width,c=s.height,u={data:s.getData(),width:a,height:c},h=new vu(100).encode(u,100);return t.processJPEG.call(this,h,n,i,o)}}(Wt.API),Wt.API.processRGBA=function(t,r,n){for(var i=t.data,o=i.length,s=new Uint8Array(o/4*3),a=new Uint8Array(o/4),c=0,u=0,h=0;h<o;h+=4){var p=i[h],x=i[h+1],b=i[h+2],m=i[h+3];s[c++]=p,s[c++]=x,s[c++]=b,a[u++]=m}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:_,index:r,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Wt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vo=Wt.API,fc=Vo.getCharWidthsArray=function(t,r){var n,i,o=(r=r||{}).font||this.internal.getFont(),s=r.fontSize||this.internal.getFontSize(),a=r.charSpace||this.internal.getCharSpace(),c=r.widths?r.widths:o.metadata.Unicode.widths,u=c.fof?c.fof:1,h=r.kerning?r.kerning:o.metadata.Unicode.kerning,p=h.fof?h.fof:1,x=r.doKerning!==!1,b=0,m=t.length,_=0,w=c[0]||u,O=[];for(n=0;n<m;n++)i=t.charCodeAt(n),typeof o.metadata.widthOfString=="function"?O.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+a*(1e3/s)||0)/1e3):(b=x&&Lr(h[i])==="object"&&!isNaN(parseInt(h[i][_],10))?h[i][_]/p:0,O.push((c[i]||w)/u+b)),_=i;return O},tp=Vo.getStringUnitWidth=function(t,r){var n=(r=r||{}).fontSize||this.internal.getFontSize(),i=r.font||this.internal.getFont(),o=r.charSpace||this.internal.getCharSpace();return Vo.processArabic&&(t=Vo.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,o)/n:fc.apply(this,arguments).reduce(function(s,a){return s+a},0)},rp=function(t,r,n,i){for(var o=[],s=0,a=t.length,c=0;s!==a&&c+r[s]<n;)c+=r[s],s++;o.push(t.slice(0,s));var u=s;for(c=0;s!==a;)c+r[s]>i&&(o.push(t.slice(u,s)),c=0,u=s),c+=r[s],s++;return u!==s&&o.push(t.slice(u,s)),o},np=function(t,r,n){n||(n={});var i,o,s,a,c,u,h,p=[],x=[p],b=n.textIndent||0,m=0,_=0,w=t.split(" "),O=fc.apply(this,[" ",n])[0];if(u=n.lineIndent===-1?w[0].length+2:n.lineIndent||0){var k=Array(u).join(" "),T=[];w.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?T=T.concat(Z.map(function(N,D){return(D&&N.length?`
`:"")+N})):T.push(Z[0])}),w=T,u=tp.apply(this,[k,n])}for(s=0,a=w.length;s<a;s++){var H=0;if(i=w[s],u&&i[0]==`
`&&(i=i.substr(1),H=1),b+m+(_=(o=fc.apply(this,[i,n])).reduce(function(Z,N){return Z+N},0))>r||H){if(_>r){for(c=rp.apply(this,[i,o,r-(b+m),r]),p.push(c.shift()),p=[c.pop()];c.length;)x.push([c.shift()]);_=o.slice(i.length-(p[0]?p[0].length:0)).reduce(function(Z,N){return Z+N},0)}else p=[i];x.push(p),b=_+u,m=O}else p.push(i),b+=m+_,m=O}return h=u?function(Z,N){return(N?k:"")+Z.join(" ")}:function(Z){return Z.join(" ")},x.map(h)},Vo.splitTextToSize=function(t,r,n){var i,o=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var x=this.internal.getFont(p.fontName,p.fontStyle);return x.metadata.Unicode?{widths:x.metadata.Unicode.widths||{0:1},kerning:x.metadata.Unicode.kerning||{}}:{font:x.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*r/o;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=n.lineIndent;var c,u,h=[];for(c=0,u=i.length;c<u;c++)h=h.concat(np.apply(this,[i[c],a,s]));return h},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var r="klmnopqrstuvwxyz",n={},i={},o=0;o<r.length;o++)n[r[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=r[o];var s=function(x){return"0x"+parseInt(x,10).toString(16)},a=t.__fontmetrics__.compress=function(x){var b,m,_,w,O=["{"];for(var k in x){if(b=x[k],isNaN(parseInt(k,10))?m="'"+k+"'":(k=parseInt(k,10),m=(m=s(k).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof b=="number")b<0?(_=s(b).slice(3),w="-"):(_=s(b).slice(2),w=""),_=w+_.slice(0,-1)+i[_.slice(-1)];else{if(Lr(b)!=="object")throw new Error("Don't know what to do with value type "+Lr(b)+".");_=a(b)}O.push(m+_)}return O.push("}"),O.join("")},c=t.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,m,_,w,O={},k=1,T=O,H=[],Z="",N="",D=x.length-1,B=1;B<D;B+=1)(w=x[B])=="'"?b?(_=b.join(""),b=void 0):b=[]:b?b.push(w):w=="{"?(H.push([T,_]),T={},_=void 0):w=="}"?((m=H.pop())[0][m[1]]=T,_=void 0,T=m[0]):w=="-"?k=-1:_===void 0?n.hasOwnProperty(w)?(Z+=n[w],_=parseInt(Z,16)*k,k=1,Z=""):Z+=w:n.hasOwnProperty(w)?(N+=n[w],T[_]=parseInt(N,16)*k,k=1,_=void 0,N=""):N+=w;return O},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(x){var b=x.font,m=p.Unicode[b.postScriptName];m&&(b.metadata.Unicode={},b.metadata.Unicode.widths=m.widths,b.metadata.Unicode.kerning=m.kerning);var _=h.Unicode[b.postScriptName];_&&(b.metadata.Unicode.encoding=_,b.encoding=_.codePages[0])}])}(Wt.API),function(t){var r=function(n){for(var i=n.length,o=new Uint8Array(i),s=0;s<i;s++)o[s]=n.charCodeAt(s);return o};t.API.events.push(["addFont",function(n){var i=void 0,o=n.font,s=n.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(a,c){c=/^\x00\x01\x00\x00/.test(c)?r(c):r(tl(c)),a.metadata=t.API.TTFFont.open(c),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(o,i)}}])}(Wt),function(t){function r(){return($t.canvg?Promise.resolve($t.canvg):ho(()=>import("./index.es-CXh8elN4.js"),__vite__mapDeps([0,1,2]))).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Wt.API.addSvgAsImage=function(n,i,o,s,a,c,u,h){if(isNaN(i)||isNaN(o))throw _r.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw _r.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var x=p.getContext("2d");x.fillStyle="#fff",x.fillRect(0,0,p.width,p.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return r().then(function(_){return _.fromString(x,n,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(b)}).then(function(){m.addImage(p.toDataURL("image/jpeg",1),i,o,s,a,u,h)})}}(),Wt.API.putTotalPages=function(t){var r,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(r,n);return this},Wt.API.viewerPreferences=function(t,r){var n;t=t||{},r=r||!1;var i,o,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(a),u=[],h=0,p=0,x=0;function b(_,w){var O,k=!1;for(O=0;O<_.length;O+=1)_[O]===w&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||r===!0){var m=c.length;for(x=0;x<m;x+=1)n[c[x]].value=n[c[x]].defaultValue,n[c[x]].explicitSet=!1}if(Lr(t)==="object"){for(o in t)if(s=t[o],b(c,o)&&s!==void 0){if(n[o].type==="boolean"&&typeof s=="boolean")n[o].value=s;else if(n[o].type==="name"&&b(n[o].valueSet,s))n[o].value=s;else if(n[o].type==="integer"&&Number.isInteger(s))n[o].value=s;else if(n[o].type==="array"){for(h=0;h<s.length;h+=1)if(i=!0,s[h].length===1&&typeof s[h][0]=="number")u.push(String(s[h]-1));else if(s[h].length>1){for(p=0;p<s[h].length;p+=1)typeof s[h][p]!="number"&&(i=!1);i===!0&&u.push([s[h][0]-1,s[h][1]-1].join(" "))}n[o].value="["+u.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,w=[];for(_ in n)n[_].explicitSet===!0&&(n[_].type==="name"?w.push("/"+_+" /"+n[_].value):w.push("/"+_+" "+n[_].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var r=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),h=s.length+a.length+c.length+o.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(o+s+a+c+u),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",r)),this}}(Wt.API),function(t){var r=t.API,n=r.pdfEscape16=function(s,a){for(var c,u=a.metadata.Unicode.widths,h=["","0","00","000","0000"],p=[""],x=0,b=s.length;x<b;++x){if(c=a.metadata.characterToGlyph(s.charCodeAt(x)),a.metadata.glyIdsUsed.push(c),a.metadata.toUnicode[c]=s.charCodeAt(x),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(a.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(h[4-c.length],c)}return p.join("")},i=function(s){var a,c,u,h,p,x,b;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],x=0,b=(c=Object.keys(s).sort(function(m,_){return m-_})).length;x<b;x++)a=c[x],u.length>=100&&(p+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(h=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),u.push("<"+a+"><"+h+">"));return u.length&&(p+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(s){(function(a){var c=a.font,u=a.out,h=a.newObject,p=a.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var x=c.metadata.Unicode.widths,b=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),m="",_=0;_<b.length;_++)m+=String.fromCharCode(b[_]);var w=h();p({data:m,addLength1:!0,objectId:w}),u("endobj");var O=h();p({data:i(c.metadata.toUnicode),addLength1:!0,objectId:O}),u("endobj");var k=h();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Xo(c.fontName)),u("/FontFile2 "+w+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var T=h();u("<<"),u("/Type /Font"),u("/BaseFont /"+Xo(c.fontName)),u("/FontDescriptor "+k+" 0 R"),u("/W "+t.API.PDFObject.convert(x)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=h(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+O+" 0 R"),u("/BaseFont /"+Xo(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+T+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]),r.events.push(["putFont",function(s){(function(a){var c=a.font,u=a.out,h=a.newObject,p=a.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var x=c.metadata.rawData,b="",m=0;m<x.length;m++)b+=String.fromCharCode(x[m]);var _=h();p({data:b,addLength1:!0,objectId:_}),u("endobj");var w=h();p({data:i(c.metadata.toUnicode),addLength1:!0,objectId:w}),u("endobj");var O=h();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+_+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+Xo(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=h();for(var k=0;k<c.metadata.hmtx.widths.length;k++)c.metadata.hmtx.widths[k]=parseInt(c.metadata.hmtx.widths[k]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Xo(c.fontName)+"/FontDescriptor "+O+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]);var o=function(s){var a,c=s.text||"",u=s.x,h=s.y,p=s.options||{},x=s.mutex||{},b=x.pdfEscape,m=x.activeFontKey,_=x.fonts,w=m,O="",k=0,T="",H=_[w].encoding;if(_[w].encoding!=="Identity-H")return{text:c,x:u,y:h,options:p,mutex:x};for(T=c,w=m,Array.isArray(c)&&(T=c[0]),k=0;k<T.length;k+=1)_[w].metadata.hasOwnProperty("cmap")&&(a=_[w].metadata.cmap.unicode.codeMap[T[k].charCodeAt(0)]),a||T[k].charCodeAt(0)<256&&_[w].metadata.hasOwnProperty("Unicode")?O+=T[k]:O+="";var Z="";return parseInt(w.slice(1))<14||H==="WinAnsiEncoding"?Z=b(O,w).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):H==="Identity-H"&&(Z=n(O,_[w])),x.isHex=!0,{text:Z,x:u,y:h,options:p,mutex:x}};r.events.push(["postProcessText",function(s){var a=s.text||"",c=[],u={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var h=0;for(h=0;h<a.length;h+=1)Array.isArray(a[h])&&a[h].length===3?c.push([o(Object.assign({},u,{text:a[h][0]})).text,a[h][1],a[h][2]]):c.push(o(Object.assign({},u,{text:a[h]})).text);s.text=c}else s.text=o(Object.assign({},u,{text:a})).text}])}(Wt),function(t){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return r.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return r.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return r.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Wt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var o,s,a,c,u,h,p,x=r,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},O=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,H=0;this.__bidiEngine__={};var Z=function(j){var A=j.charCodeAt(),E=A>>8,z=w[E];return z!==void 0?x[256*z+(255&A)]:E===252||E===253?"AL":k.test(E)?"L":E===8?"R":"N"},N=function(j){for(var A,E=0;E<j.length;E++){if((A=Z(j.charAt(E)))==="L")return!1;if(A==="R")return!0}return!1},D=function(j,A,E,z){var se,re,v,ne,M=A[z];switch(M){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(M="AN");break;case"AL":T=!0,M="R";break;case"WS":M="N";break;case"CS":z<1||z+1>=A.length||(se=E[z-1])!=="EN"&&se!=="AN"||(re=A[z+1])!=="EN"&&re!=="AN"?M="N":T&&(re="AN"),M=re===se?re:"N";break;case"ES":M=(se=z>0?E[z-1]:"B")==="EN"&&z+1<A.length&&A[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&E[z-1]==="EN"){M="EN";break}if(T){M="N";break}for(v=z+1,ne=A.length;v<ne&&A[v]==="ET";)v++;M=v<ne&&A[v]==="EN"?"EN":"N";break;case"NSM":if(a&&!c){for(ne=A.length,v=z+1;v<ne&&A[v]==="NSM";)v++;if(v<ne){var y=j[z],Y=y>=1425&&y<=2303||y===64286;if(se=A[v],Y&&(se==="R"||se==="AL")){M="R";break}}}M=z<1||(se=A[z-1])==="B"?"N":E[z-1];break;case"B":T=!1,o=!0,M=H;break;case"S":s=!0,M="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":M="N"}return M},B=function(j,A,E){var z=j.split("");return E&&V(z,E,{hiLevel:H}),z.reverse(),A&&A.reverse(),z.join("")},V=function(j,A,E){var z,se,re,v,ne,M=-1,y=j.length,Y=0,C=[],W=H?m:b,L=[];for(T=!1,o=!1,s=!1,se=0;se<y;se++)L[se]=Z(j[se]);for(re=0;re<y;re++){if(ne=Y,C[re]=D(j,L,C,re),z=240&(Y=W[ne][_[C[re]]]),Y&=15,A[re]=v=W[Y][5],z>0)if(z===16){for(se=M;se<re;se++)A[se]=1;M=-1}else M=-1;if(W[Y][6])M===-1&&(M=re);else if(M>-1){for(se=M;se<re;se++)A[se]=v;M=-1}L[re]==="B"&&(A[re]=0),E.hiLevel|=v}s&&function($,Q,ie){for(var de=0;de<ie;de++)if($[de]==="S"){Q[de]=H;for(var le=de-1;le>=0&&$[le]==="WS";le--)Q[le]=H}}(L,A,y)},R=function(j,A,E,z,se){if(!(se.hiLevel<j)){if(j===1&&H===1&&!o)return A.reverse(),void(E&&E.reverse());for(var re,v,ne,M,y=A.length,Y=0;Y<y;){if(z[Y]>=j){for(ne=Y+1;ne<y&&z[ne]>=j;)ne++;for(M=Y,v=ne-1;M<v;M++,v--)re=A[M],A[M]=A[v],A[v]=re,E&&(re=E[M],E[M]=E[v],E[v]=re);Y=ne}Y++}}},P=function(j,A,E){var z=j.split(""),se={hiLevel:H};return E||(E=[]),V(z,E,se),function(re,v,ne){if(ne.hiLevel!==0&&p)for(var M,y=0;y<re.length;y++)v[y]===1&&(M=O.indexOf(re[y]))>=0&&(re[y]=O[M+1])}(z,E,se),R(2,z,A,E,se),R(1,z,A,E,se),z.join("")};return this.__bidiEngine__.doBidiReorder=function(j,A,E){if(function(se,re){if(re)for(var v=0;v<se.length;v++)re[v]=v;c===void 0&&(c=N(se)),h===void 0&&(h=N(se))}(j,A),a||!u||h)if(a&&u&&c^h)H=c?1:0,j=B(j,A,E);else if(!a&&u&&h)H=c?1:0,j=P(j,A,E),j=B(j,A);else if(!a||c||u||h){if(a&&!u&&c^h)j=B(j,A),c?(H=0,j=P(j,A,E)):(H=1,j=P(j,A,E),j=B(j,A));else if(a&&c&&!u&&h)H=1,j=P(j,A,E),j=B(j,A);else if(!a&&!u&&c^h){var z=p;c?(H=1,j=P(j,A,E),H=0,p=!1,j=P(j,A,E),p=z):(H=0,j=P(j,A,E),j=B(j,A),H=1,p=!1,j=P(j,A,E),p=z,j=B(j,A))}}else H=0,j=P(j,A,E);else H=c?1:0,j=P(j,A,E);return j},this.__bidiEngine__.setOptions=function(j){j&&(a=j.isInputVisual,u=j.isOutputVisual,c=j.isInputRtl,h=j.isOutputRtl,p=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var o=i.text;i.x,i.y;var s=i.options||{};i.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var c=0;for(a=[],c=0;c<o.length;c+=1)Object.prototype.toString.call(o[c])==="[object Array]"?a.push([n.doBidiReorder(o[c][0]),o[c][1],o[c][2]]):a.push([n.doBidiReorder(o[c])]);i.text=a}else i.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(Wt),Wt.API.TTFFont=function(){function t(r){var n;if(this.rawData=r,n=this.contents=new Ms(r),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new kv(this),this.registerTTF()}return t.open=function(r){return new t(r)},t.prototype.parse=function(){return this.directory=new hv(this.contents),this.head=new pv(this),this.name=new yv(this),this.cmap=new X0(this),this.toUnicode={},this.hhea=new mv(this),this.maxp=new vv(this),this.hmtx=new wv(this),this.post=new xv(this),this.os2=new gv(this),this.loca=new _v(this),this.glyf=new jv(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var r,n,i,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var a,c,u,h;for(h=[],a=0,c=(u=this.bbox).length;a<c;a++)r=u[a],h.push(Math.round(r*this.scaleFactor));return h}.call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),(32768&(n=o>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(r){var n;return((n=this.cmap.unicode)!=null?n.codeMap[r]:void 0)||0},t.prototype.widthOfGlyph=function(r){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*n},t.prototype.widthOfString=function(r,n,i){var o,s,a,c;for(a=0,s=0,c=(r=""+r).length;0<=c?s<c:s>c;s=0<=c?++s:--s)o=r.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(r,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*r},t}();var Di,Ms=function(){function t(r){this.data=r!=null?r:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(r){return this.data[this.pos++]=r},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},t.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},t.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},t.prototype.readString=function(r){var n,i;for(i=[],n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(r){var n,i,o;for(o=[],n=0,i=r.length;0<=i?n<i:n>i;n=0<=i?++n:--n)o.push(this.writeByte(r.charCodeAt(n)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(r){return this.writeInt16(r)},t.prototype.readLongLong=function(){var r,n,i,o,s,a,c,u;return r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),u=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^s)+65536*(255^a)+256*(255^c)+(255^u)+1):72057594037927940*r+281474976710656*n+1099511627776*i+4294967296*o+16777216*s+65536*a+256*c+u},t.prototype.writeLongLong=function(r){var n,i;return n=Math.floor(r/4294967296),i=4294967295&r,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(r){return this.writeInt32(r)},t.prototype.read=function(r){var n,i;for(n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(r){var n,i,o,s;for(s=[],i=0,o=r.length;i<o;i++)n=r[i],s.push(this.writeByte(n));return s},t}(),hv=function(){var t;function r(n){var i,o,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return r.prototype.encode=function(n){var i,o,s,a,c,u,h,p,x,b,m,_,w;for(w in m=Object.keys(n).length,u=Math.log(2),x=16*Math.floor(Math.log(m)/u),a=Math.floor(x/u),p=16*m-x,(o=new Ms).writeInt(this.scalarType),o.writeShort(m),o.writeShort(x),o.writeShort(a),o.writeShort(p),s=16*m,h=o.pos+s,c=null,_=[],n)for(b=n[w],o.writeString(w),o.writeInt(t(b)),o.writeInt(h),o.writeInt(b.length),_=_.concat(b),w==="head"&&(c=h),h+=b.length;h%4;)_.push(0),h++;return o.write(_),i=2981146554-t(o.data),o.pos=c+8,o.writeUInt32(i),o.data},t=function(n){var i,o,s,a;for(n=K0.call(n);n.length%4;)n.push(0);for(s=new Ms(n),o=0,i=0,a=n.length;i<a;i=i+=4)o+=s.readUInt32();return 4294967295&o},r}(),fv={}.hasOwnProperty,Ki=function(t,r){for(var n in r)fv.call(r,n)&&(t[n]=r[n]);function i(){this.constructor=t}return i.prototype=r.prototype,t.prototype=new i,t.__super__=r.prototype,t};Di=function(){function t(r){var n;this.file=r,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var pv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Ki(r,Di),r.prototype.tag="head",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},r.prototype.encode=function(n){var i;return(i=new Ms).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},r}(),op=function(){function t(r,n){var i,o,s,a,c,u,h,p,x,b,m,_,w,O,k,T,H;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=n+r.readInt(),x=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=r.readByte();break;case 4:for(m=r.readUInt16(),b=m/2,r.pos+=6,s=function(){var Z,N;for(N=[],u=Z=0;0<=b?Z<b:Z>b;u=0<=b?++Z:--Z)N.push(r.readUInt16());return N}(),r.pos+=2,w=function(){var Z,N;for(N=[],u=Z=0;0<=b?Z<b:Z>b;u=0<=b?++Z:--Z)N.push(r.readUInt16());return N}(),h=function(){var Z,N;for(N=[],u=Z=0;0<=b?Z<b:Z>b;u=0<=b?++Z:--Z)N.push(r.readUInt16());return N}(),p=function(){var Z,N;for(N=[],u=Z=0;0<=b?Z<b:Z>b;u=0<=b?++Z:--Z)N.push(r.readUInt16());return N}(),o=(this.length-r.pos+this.offset)/2,c=function(){var Z,N;for(N=[],u=Z=0;0<=o?Z<o:Z>o;u=0<=o?++Z:--Z)N.push(r.readUInt16());return N}(),u=k=0,H=s.length;k<H;u=++k)for(O=s[u],i=T=_=w[u];_<=O?T<=O:T>=O;i=_<=O?++T:--T)p[u]===0?a=i+h[u]:(a=c[p[u]/2+(i-_)-(b-u)]||0)!==0&&(a+=h[u]),this.codeMap[i]=65535&a}r.pos=x}return t.encode=function(r,n){var i,o,s,a,c,u,h,p,x,b,m,_,w,O,k,T,H,Z,N,D,B,V,R,P,j,A,E,z,se,re,v,ne,M,y,Y,C,W,L,$,Q,ie,de,le,be,fe,Fe;switch(z=new Ms,a=Object.keys(r).sort(function(Oe,Ue){return Oe-Ue}),n){case"macroman":for(w=0,O=function(){var Oe=[];for(_=0;_<256;++_)Oe.push(0);return Oe}(),T={0:0},s={},se=0,M=a.length;se<M;se++)T[le=r[o=a[se]]]==null&&(T[le]=++w),s[o]={old:r[o],new:T[r[o]]},O[o]=T[r[o]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(O),{charMap:s,subtable:z.data,maxGlyphID:w+1};case"unicode":for(A=[],x=[],H=0,T={},i={},k=h=null,re=0,y=a.length;re<y;re++)T[N=r[o=a[re]]]==null&&(T[N]=++H),i[o]={old:N,new:T[N]},c=T[N]-o,k!=null&&c===h||(k&&x.push(k),A.push(o),h=c),k=o;for(k&&x.push(k),x.push(65535),A.push(65535),P=2*(R=A.length),V=2*Math.pow(Math.log(R)/Math.LN2,2),b=Math.log(V/2)/Math.LN2,B=2*R-V,u=[],D=[],m=[],_=v=0,Y=A.length;v<Y;_=++v){if(j=A[_],p=x[_],j===65535){u.push(0),D.push(0);break}if(j-(E=i[j].new)>=32768)for(u.push(0),D.push(2*(m.length+R-_)),o=ne=j;j<=p?ne<=p:ne>=p;o=j<=p?++ne:--ne)m.push(i[o].new);else u.push(E-j),D.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*R+2*m.length),z.writeUInt16(0),z.writeUInt16(P),z.writeUInt16(V),z.writeUInt16(b),z.writeUInt16(B),ie=0,C=x.length;ie<C;ie++)o=x[ie],z.writeUInt16(o);for(z.writeUInt16(0),de=0,W=A.length;de<W;de++)o=A[de],z.writeUInt16(o);for(be=0,L=u.length;be<L;be++)c=u[be],z.writeUInt16(c);for(fe=0,$=D.length;fe<$;fe++)Z=D[fe],z.writeUInt16(Z);for(Fe=0,Q=m.length;Fe<Q;Fe++)w=m[Fe],z.writeUInt16(w);return{charMap:i,subtable:z.data,maxGlyphID:H+1}}},t}(),X0=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Ki(r,Di),r.prototype.tag="cmap",r.prototype.parse=function(n){var i,o,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)i=new op(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},r.encode=function(n,i){var o,s;return i==null&&(i="macroman"),o=op.encode(n,i),(s=new Ms).writeUInt16(0),s.writeUInt16(1),o.table=s.data.concat(o.subtable),o},r}(),mv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Ki(r,Di),r.prototype.tag="hhea",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},r}(),gv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Ki(r,Di),r.prototype.tag="OS/2",r.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(n.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},r}(),xv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Ki(r,Di),r.prototype.tag="post",r.prototype.parse=function(n){var i,o,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(o=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)i=n.readByte(),s.push(this.names.push(n.readString(i)));return s;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=function(){var c,u,h;for(h=[],a=c=0,u=this.file.maxp.numGlyphs;0<=u?c<u:c>u;a=0<=u?++c:--c)h.push(n.readUInt32());return h}.call(this)}},r}(),bv=function(t,r){this.raw=t,this.length=t.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},yv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Ki(r,Di),r.prototype.tag="name",r.prototype.parse=function(n){var i,o,s,a,c,u,h,p,x,b,m;for(n.pos=this.offset,n.readShort(),i=n.readShort(),u=n.readShort(),o=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+u+n.readShort()});for(h={},a=x=0,b=o.length;x<b;a=++x)s=o[a],n.pos=s.offset,p=n.readString(s.length),c=new bv(p,s),h[m=s.nameID]==null&&(h[m]=[]),h[s.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r}(),vv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Ki(r,Di),r.prototype.tag="maxp",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},r}(),wv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Ki(r,Di),r.prototype.tag="hmtx",r.prototype.parse=function(n){var i,o,s,a,c,u,h;for(n.pos=this.offset,this.metrics=[],i=0,u=this.file.hhea.numberOfMetrics;0<=u?i<u:i>u;i=0<=u?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,x;for(x=[],i=p=0;0<=s?p<s:p>s;i=0<=s?++p:--p)x.push(n.readInt16());return x}(),this.widths=function(){var p,x,b,m;for(m=[],p=0,x=(b=this.metrics).length;p<x;p++)a=b[p],m.push(a.advance);return m}.call(this),o=this.widths[this.widths.length-1],h=[],i=c=0;0<=s?c<s:c>s;i=0<=s?++c:--c)h.push(this.widths.push(o));return h},r.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},r}(),K0=[].slice,jv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Ki(r,Di),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(n){var i,o,s,a,c,u,h,p,x,b;return n in this.cache?this.cache[n]:(a=this.file.loca,i=this.file.contents,o=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+o,c=(u=new Ms(i.read(s))).readShort(),p=u.readShort(),b=u.readShort(),h=u.readShort(),x=u.readShort(),this.cache[n]=c===-1?new Cv(u,p,b,h,x):new Sv(u,c,p,b,h,x),this.cache[n]))},r.prototype.encode=function(n,i,o){var s,a,c,u,h;for(c=[],a=[],u=0,h=i.length;u<h;u++)s=n[i[u]],a.push(c.length),s&&(c=c.concat(s.encode(o)));return a.push(c.length),{table:c,offsets:a}},r}(),Sv=function(){function t(r,n,i,o,s,a){this.raw=r,this.numberOfContours=n,this.xMin=i,this.yMin=o,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Cv=function(){function t(r,n,i,o,s){var a,c;for(this.raw=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;c=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&c;)a.pos+=1&c?4:2,128&c?a.pos+=8:64&c?a.pos+=4:8&c&&(a.pos+=2)}return t.prototype.encode=function(){var r,n,i;for(n=new Ms(K0.call(this.raw.data)),r=0,i=this.glyphIDs.length;r<i;++r)n.pos=this.glyphOffsets[r];return n.data},t}(),_v=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Ki(r,Di),r.prototype.tag="loca",r.prototype.parse=function(n){var i,o;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?function(){var s,a;for(a=[],o=0,s=this.length;o<s;o+=2)a.push(2*n.readUInt16());return a}.call(this):function(){var s,a;for(a=[],o=0,s=this.length;o<s;o+=4)a.push(n.readUInt32());return a}.call(this)},r.prototype.indexOf=function(n){return this.offsets[n]},r.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},r.prototype.encode=function(n,i){for(var o=new Uint32Array(this.offsets.length),s=0,a=0,c=0;c<o.length;++c)if(o[c]=s,a<i.length&&i[a]==c){++a,o[c]=s;var u=this.offsets[c],h=this.offsets[c+1]-u;h>0&&(s+=h)}for(var p=new Array(4*o.length),x=0;x<o.length;++x)p[4*x+3]=255&o[x],p[4*x+2]=(65280&o[x])>>8,p[4*x+1]=(16711680&o[x])>>16,p[4*x]=(4278190080&o[x])>>24;return p},r}(),kv=function(){function t(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var r,n,i,o,s;for(n in o=this.font.cmap.tables[0].codeMap,r={},s=this.subset)i=s[n],r[n]=o[i];return r},t.prototype.glyphsFor=function(r){var n,i,o,s,a,c,u;for(o={},a=0,c=r.length;a<c;a++)o[s=r[a]]=this.font.glyf.glyphFor(s);for(s in n=[],o)(i=o[s])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(s in u=this.glyphsFor(n))i=u[s],o[s]=i;return o},t.prototype.encode=function(r,n){var i,o,s,a,c,u,h,p,x,b,m,_,w,O,k;for(o in i=X0.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(r),m={0:0},k=i.charMap)m[(u=k[o]).old]=u.new;for(_ in b=i.maxGlyphID,a)_ in m||(m[_]=b++);return p=function(T){var H,Z;for(H in Z={},T)Z[T[H]]=H;return Z}(m),x=Object.keys(p).sort(function(T,H){return T-H}),w=function(){var T,H,Z;for(Z=[],T=0,H=x.length;T<H;T++)c=x[T],Z.push(p[c]);return Z}(),s=this.font.glyf.encode(a,w,m),h=this.font.loca.encode(s.offsets,w),O={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(O["OS/2"]=this.font.os2.raw()),this.font.directory.encode(O)},t}();Wt.API.PDFObject=function(){var t;function r(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},r.convert=function(n){var i,o,s,a;if(Array.isArray(n))return"["+function(){var c,u,h;for(h=[],c=0,u=n.length;c<u;c++)i=n[c],h.push(r.convert(i));return h}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in s=["<<"],n)a=n[o],s.push("/"+o+" "+r.convert(a));return s.push(">>"),s.join(`
`)}return""+n},r}();const Av=q.lazy(()=>ho(()=>import("./index-D4Tnlpqn.js").then(t=>t.i),__vite__mapDeps([3,1,2]))),Lv=hr(ce),Pv=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(ce,{className:r,style:{...n,left:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},Nv=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(ce,{className:r,style:{...n,right:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},Ov=()=>{var lr,Mr,an,Ci,fr,Cn,Ln,Hn,ni;const{isOpen:t,onOpen:r,onClose:n}=Br(),i=q.useRef(),[o,s]=q.useState(null),[a,c]=q.useState(null),[u,h]=q.useState(""),{id:p}=Bc(),{user:x}=hi();Xr();const b=qr(),{isOpen:m,onToggle:_,onOpen:w}=Br({defaultIsOpen:!0}),O=q.useRef(null),k=q.useRef(null),{colorMode:T}=dp(),{isOpen:H,onOpen:Z,onClose:N}=Br(),[D,B]=q.useState(null),[V,R]=q.useState(!1),P=q.useRef(!1),[j,A]=q.useState(!1),E=q.useRef(!1),z=async(he,kt,Et)=>{try{console.log("Download request for:",{url:he,fileName:kt,fileType:Et});const Tt=he.split("/"),mr=Tt[Tt.length-1];let tr=Et;tr||(he.includes("/images/")||he.includes("image")?tr="images":he.includes("/videos/")||he.includes("video")?tr="videos":tr="documents"),console.log("Using file type for download:",tr);const rr=`${Ds}/resources/download/${tr}/${mr}`,Ht=localStorage.getItem("authToken"),vr={};Ht&&(vr.Authorization=`Bearer ${Ht}`);const Or=await fetch(rr,{headers:vr});if(!Or.ok){const sr=await Or.json().catch(()=>({message:"Download failed"}));throw new Error(sr.message||`Download failed with status: ${Or.status}`)}const nr=await Or.blob(),Mt=window.URL.createObjectURL(nr),Ft=document.createElement("a");Ft.href=Mt,Ft.download=kt||mr||"download",Ft.style.display="none",document.body.appendChild(Ft),Ft.click(),setTimeout(()=>{document.body.removeChild(Ft),window.URL.revokeObjectURL(Mt)},100)}catch(Tt){console.error("Download failed:",Tt)}},se=he=>he.replace(/<[^>]+>/g,""),re=async(he,kt="quiz")=>{if(!(!(ue!=null&&ue.id)||!he)){Ne[he]&&(clearInterval(Ne[he]),lt(Et=>{const Tt={...Et};return delete Tt[he],Tt})),Ge(Et=>({...Et,[he]:{...Et[he]||{},loading:!0,url:null,name:kt,progress:0,error:null}}));try{const Tt=(await f0(ue.id,he)).job_id;if(!Tt)throw new Error("No job ID received from server");Ge(Ht=>({...Ht,[he]:{...Ht[he]||{},jobId:Tt,progress:10}}));const mr=600*1e3,tr=Date.now(),rr=setInterval(async()=>{try{if(Date.now()-tr>mr){clearInterval(rr),lt(Mt=>{const Ft={...Mt};return delete Ft[he],Ft}),Ge(Mt=>({...Mt,[he]:{...Mt[he]||{},loading:!1,error:"Generation timed out. Please try again."}})),b({title:"Generation timed out",description:"Please try again",status:"error",duration:5e3,isClosable:!0});return}const Ht=await Eu(Tt),vr=Ht.status,Or=Date.now()-tr,nr=Math.min(10+Or/mr*80,90);if(Ge(Mt=>({...Mt,[he]:{...Mt[he]||{},progress:vr==="completed"?100:nr}})),vr==="completed"){clearInterval(rr),lt(Sr=>{const cr={...Sr};return delete cr[he],cr});const Mt=Ht.result||[];if(!Mt||Mt.length===0){Ge(Sr=>({...Sr,[he]:{...Sr[he]||{},loading:!1,error:"No quiz content generated. Please try again."}})),b({title:"No quiz content generated",description:"Please try again",status:"error",duration:5e3,isClosable:!0});return}const Ft=new Wt;let sr=10;Mt.forEach((Sr,cr)=>{Ft.setFontSize(12);const Gt=Ft.splitTextToSize(`${cr+1}. ${se(Sr.question)}`,180);Ft.text(Gt,10,sr),sr+=Gt.length*6+4,(Sr.options||[]).forEach((dr,ii)=>{const fi=Ft.splitTextToSize(`${String.fromCharCode(65+ii)}. ${se(dr)}`,170);Ft.text(fi,14,sr),sr+=fi.length*6+2}),sr+=6,sr>280&&(Ft.addPage(),sr=10)}),Ft.addPage(),Ft.setFontSize(14),Ft.text("Answer Key",10,10);let Kr=20;Mt.forEach((Sr,cr)=>{Ft.setFontSize(12);const Gt=`${cr+1}. ${se(Sr.correct_answer)}`,dr=Ft.splitTextToSize(Gt,180);if(Ft.text(dr,10,Kr),Kr+=dr.length*6+2,Sr.explanation){Ft.setFontSize(10);const ii=Ft.splitTextToSize(`Explanation: ${se(Sr.explanation)}`,180);Ft.text(ii,12,Kr),Kr+=ii.length*5+4}Kr>280&&(Ft.addPage(),Kr=10)});const wt=Ft.output("blob"),wr=URL.createObjectURL(wt);Ge(Sr=>({...Sr,[he]:{url:wr,loading:!1,name:kt,progress:100,error:null}})),b({title:"Quiz generated successfully",status:"success",duration:3e3,isClosable:!0})}else if(vr==="failed"){clearInterval(rr),lt(Ft=>{const sr={...Ft};return delete sr[he],sr});const Mt=Ht.error||"Generation failed";Ge(Ft=>({...Ft,[he]:{...Ft[he]||{},loading:!1,error:Mt}})),b({title:"Failed to generate quiz",description:Mt,status:"error",duration:5e3,isClosable:!0})}}catch(Ht){console.error("Polling error:",Ht)}},3e3);lt(Ht=>({...Ht,[he]:rr}))}catch(Et){Ge(Tt=>({...Tt,[he]:{...Tt[he]||{},loading:!1,error:Et.message||"Failed to start generation"}})),b({title:"Failed to start quiz generation",description:Et.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}}},v=async(he,kt="summary")=>{if(!(!(ue!=null&&ue.id)||!he)){Ne[he]&&(clearInterval(Ne[he]),lt(Et=>{const Tt={...Et};return delete Tt[he],Tt})),Nt(Et=>({...Et,[he]:{...Et[he]||{},loading:!0,url:null,name:kt,progress:0,error:null}}));try{const Tt=(await p0(ue.id,he)).job_id;if(!Tt)throw new Error("No job ID received from server");Nt(Ht=>({...Ht,[he]:{...Ht[he]||{},jobId:Tt,progress:10}}));const mr=600*1e3,tr=Date.now(),rr=setInterval(async()=>{try{if(Date.now()-tr>mr){clearInterval(rr),lt(Mt=>{const Ft={...Mt};return delete Ft[he],Ft}),Nt(Mt=>({...Mt,[he]:{...Mt[he]||{},loading:!1,error:"Generation timed out. Please try again."}})),b({title:"Generation timed out",description:"Please try again",status:"error",duration:5e3,isClosable:!0});return}const Ht=await Eu(Tt),vr=Ht.status,Or=Date.now()-tr,nr=Math.min(10+Or/mr*80,90);if(Nt(Mt=>({...Mt,[he]:{...Mt[he]||{},progress:vr==="completed"?100:nr}})),vr==="completed"){clearInterval(rr),lt(Gt=>{const dr={...Gt};return delete dr[he],dr});const Mt=Ht.result||{},Ft=Mt.introduction||"",sr=Mt.concept_summaries||{},Kr=Array.isArray(Mt.key_topics)&&Mt.key_topics.length?Mt.key_topics:Object.keys(sr);if(!Mt||!Ft&&Object.keys(sr).length===0){Nt(Gt=>({...Gt,[he]:{...Gt[he]||{},loading:!1,error:"No summary content generated. Please try again."}})),b({title:"No summary content generated",description:"Please try again",status:"error",duration:5e3,isClosable:!0});return}const wt=new Wt;let wr=10;Ft&&(wt.setFontSize(14),wt.text("Introduction",10,wr),wr+=8,wt.setFontSize(11),wt.splitTextToSize(Ft,180).forEach(dr=>{wt.text(dr,10,wr),wr+=6,wr>280&&(wt.addPage(),wr=10)}),wr+=4),Kr.forEach(Gt=>{const dr=sr[Gt]||"";if(!dr)return;wt.setFontSize(13),wt.text(Gt,10,wr),wr+=7,wt.setFontSize(11),wt.splitTextToSize(dr,180).forEach(fi=>{wt.text(fi,10,wr),wr+=6,wr>280&&(wt.addPage(),wr=10)}),wr+=6});const Sr=wt.output("blob"),cr=URL.createObjectURL(Sr);Nt(Gt=>({...Gt,[he]:{url:cr,loading:!1,name:kt,progress:100,error:null}})),b({title:"Summary generated successfully",status:"success",duration:3e3,isClosable:!0})}else if(vr==="failed"){clearInterval(rr),lt(Ft=>{const sr={...Ft};return delete sr[he],sr});const Mt=Ht.error||"Generation failed";Nt(Ft=>({...Ft,[he]:{...Ft[he]||{},loading:!1,error:Mt}})),b({title:"Failed to generate summary",description:Mt,status:"error",duration:5e3,isClosable:!0})}}catch(Ht){console.error("Polling error:",Ht)}},3e3);lt(Ht=>({...Ht,[he]:rr}))}catch(Et){Nt(Tt=>({...Tt,[he]:{...Tt[he]||{},loading:!1,error:Et.message||"Failed to start generation"}})),b({title:"Failed to start summary generation",description:Et.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}}},ne=oe("white","gray.700");oe("gray.800","white");const M=oe("gray.500","gray.400"),y=oe("blue.500","blue.300"),Y=oe("gray.200","gray.600"),C=oe("gray.100","gray.600"),W=oe("gray.50","gray.800");oe("blue.50","blue.900");const[L,$]=q.useState(!1),[Q,ie]=q.useState(!1),[de,le]=q.useState(0),[be,fe]=q.useState(""),[Fe,Oe]=q.useState([]),[Ue,ye]=q.useState(47),[ee,_e]=q.useState(!0),[Me,Le]=q.useState(!1),[ue,Ye]=q.useState(null),[Ze,mt]=q.useState(16),[$e,je]=q.useState(0),[ve,Pe]=q.useState({}),[De,Se]=q.useState({}),[Ie,ze]=q.useState([]),[it,Ge]=q.useState({}),[ot,Nt]=q.useState({}),[At,ht]=q.useState({}),bt=q.useRef(new Set),[Ne,lt]=q.useState({});(lr=ue==null?void 0:ue.documents)==null||lr.some(he=>he.original_name&&he.original_name.toLowerCase().endsWith(".pdf")||he.url&&he.url.toLowerCase().endsWith(".pdf")),q.useEffect(()=>()=>{Object.values(Ne).forEach(he=>{he&&clearInterval(he)})},[Ne]);const zt=he=>he?he.startsWith("http")?he:`${fs}${he}`:"",Ae=async()=>{try{ie(he=>!he),ue!=null&&ue.id&&(await Zc(ue.id),b({title:Q?"Resource removed from saved items":"Resource saved successfully",status:"success",duration:2e3,isClosable:!0}))}catch(he){ie(kt=>!kt),b({title:"Error",description:"Could not update saved status. Please try again.",status:"error",duration:3e3,isClosable:!0}),console.error("Error updating bookmark status:",he)}};q.useEffect(()=>{p&&(async()=>{var kt,Et,Tt,mr,tr,rr,Ht,vr,Or,nr,Mt,Ft,sr,Kr;_e(!0);try{const wt=await xc(p);console.log("Resource data:",wt);const wr={id:wt.id,type:((Tt=(Et=(kt=wt.attachments)==null?void 0:kt[0])==null?void 0:Et.file_type)==null?void 0:Tt.toUpperCase())||"Resource",title:wt.title,difficulty:"",fileSize:"",dateAdded:wt.created_at,lastUpdated:wt.updated_at,readTime:"",author:{id:(mr=wt.user)==null?void 0:mr.id,name:`${((tr=wt.user)==null?void 0:tr.first_name)||""} ${((rr=wt.user)==null?void 0:rr.last_name)||""}`.trim()||((Ht=wt.user)==null?void 0:Ht.username)||"Unknown",avatar:(vr=wt.user)==null?void 0:vr.avatar_url,verified:((Or=wt.user)==null?void 0:Or.primary_role)==="admin"||((nr=wt.user)==null?void 0:nr.primary_role)==="moderator",resources:null},likes:(Mt=wt.upvote_count)!=null?Mt:0,shares:0,comments:wt.comments||[],images:(wt.attachments||[]).filter(cr=>cr.file_type==="image"),videos:(wt.attachments||[]).filter(cr=>cr.file_type==="video"),documents:(wt.attachments||[]).filter(cr=>cr.file_type==="document"),content:wt.description,courseName:((Ft=wt.course)==null?void 0:Ft.title)||wt.course_name||"",courseCode:((sr=wt.course)==null?void 0:sr.code)||wt.course_code||"",related:[],polls:wt.polls?(Array.isArray(wt.polls)?wt.polls:[wt.polls]).map(Gt=>({id:Gt.id,question:Gt.question,options:(Gt.options||[]).map(dr=>{var ii,fi,ps,xo;return{id:dr.id,text:(fi=(ii=dr.option_text)!=null?ii:dr.text)!=null?fi:"",votes:(xo=(ps=dr.vote_count)!=null?ps:dr.votes)!=null?xo:0}})})):[]};Ye(wr),console.log("Resource saved status:",wt.is_saved),ie(wt.is_saved===!0),$(!!wt.is_upvoted),ye((Kr=wt.upvote_count)!=null?Kr:0);const Sr=(wt.comments||[]).map(cr=>({id:cr.id,text:cr.body,date:cr.created_at,user:cr.user,likes:cr.upvote_count||0,isUpvoted:cr.is_upvoted||!1}));Oe(Sr),setTimeout(()=>{var cr;console.log("Resource images:",wr.images),(cr=wr.images)!=null&&cr.length&&wr.images.forEach(Gt=>{console.log("Image URL:",Gt.url),console.log("Resolved URL:",zt(Gt.url))})},100)}catch(wt){console.error("Failed to fetch resource",wt),b({title:"Failed to load resource",description:wt.message||"An unexpected error occurred",status:"error",duration:3e3,isClosable:!0})}finally{_e(!1)}})()},[p]),q.useEffect(()=>{const he=()=>{if(k.current){const{scrollTop:Et,scrollHeight:Tt,clientHeight:mr}=k.current,tr=Et/(Tt-mr)*100;je(Math.min(tr,100))}},kt=k.current;if(kt)return kt.addEventListener("scroll",he),()=>kt.removeEventListener("scroll",he)},[]);const We=async()=>{const he=L,kt=Ue;$(!he),ye(he?kt-1:kt+1);try{await rh(p),b({title:he?"Upvote removed":"Resource upvoted",status:"success",duration:2e3,isClosable:!0})}catch(Et){$(he),ye(kt),b({title:"Unable to update upvote",description:Et.message||"An unexpected error occurred",status:"error",duration:3e3,isClosable:!0})}},nt=async he=>{try{const{message:kt,upvote_count:Et,is_upvoted:Tt}=await c0(he);Oe(mr=>mr.map(tr=>tr.id===he?{...tr,isUpvoted:Tt,likes:Et}:tr).sort((tr,rr)=>rr.likes-tr.likes)),b({title:kt||(Tt?"Comment upvoted":"Upvote removed"),status:"success",duration:2e3,isClosable:!0})}catch(kt){console.error("Error upvoting comment:",kt),b({title:"Error",description:"Could not update upvote. Please try again.",status:"error",duration:3e3,isClosable:!0})}},tt=async()=>{try{const he=window.location.href;navigator.share?await navigator.share({title:(ue==null?void 0:ue.title)||"Resource",url:he}):(await navigator.clipboard.writeText(he),b({title:"Link copied",description:"Resource link copied to clipboard",status:"success",duration:2e3,isClosable:!0}))}catch(he){console.error("Share failed",he),b({title:"Unable to share",status:"error",duration:2e3,isClosable:!0})}},gt=he=>{c(he.id),h(he.text)},Ct=()=>{c(null),setNewCommentText(""),h("")},Ut=async()=>{if(!(!a||!u.trim()))try{await a0(a,u.trim()),b({title:"Comment updated",status:"success",duration:2e3,isClosable:!0});const kt=((await xc(p)).comments||[]).map(Et=>({id:Et.id,text:Et.body,date:Et.created_at,user:Et.user,likes:Et.upvote_count||0,isUpvoted:Et.is_upvoted||!1}));Oe(kt),h(""),Ct()}catch(he){console.error("Update comment error",he)}},Ve=he=>{s(he),r()},Je=async()=>{if(!(!o||E.current)){E.current=!0,A(!0);try{await l0(o),Oe(he=>he.filter(kt=>kt.id!==o)),b({title:"Comment deleted",status:"success",duration:2e3,isClosable:!0})}catch(he){console.error("Delete comment error",he),b({title:"Failed to delete comment",status:"error",duration:3e3,isClosable:!0})}finally{s(null),A(!1),E.current=!1,n()}}},It=async()=>{const he=(be||"").trim();if(!(P.current||!he)){P.current=!0,R(!0);try{await o0(p,he),fe(""),m||w(),b({title:"Comment added",status:"success",duration:2e3,isClosable:!0});const Et=((await xc(p)).comments||[]).map(Tt=>({id:Tt.id,text:Tt.body,date:Tt.created_at,user:Tt.user,likes:Tt.upvote_count||0,isUpvoted:Tt.is_upvoted||!1}));Oe(Et)}catch(kt){console.error("Error adding comment:",kt),b({title:"Failed to add comment",description:kt.message||"Please try again later",status:"error",duration:3e3,isClosable:!0})}finally{R(!1),P.current=!1}}},dt=he=>new Date(he).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),jt=he=>{const kt=new Date(he),Tt=new Date-kt,mr=Math.floor(Tt/1e3),tr=Math.floor(mr/60),rr=Math.floor(tr/60),Ht=Math.floor(rr/24);return Ht>30?dt(he):Ht>0?`${Ht}d ago`:rr>0?`${rr}h ago`:tr>0?`${tr}m ago`:"Just now"};return!ee&&!ue?e.jsx(ce,{bg:W,minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:e.jsx(G,{fontSize:"lg",children:"Resource not found."})}):e.jsx(ce,{bg:W,minH:"100vh",children:e.jsxs(ce,{maxW:"container.xl",mx:"auto",px:{base:4,md:6},py:6,children:[e.jsx(Ce,{w:"full",align:"center",justify:"space-between",mb:4,p:3,bg:ne,borderRadius:"md",boxShadow:"sm",position:"sticky",top:"2",zIndex:"sticky",children:e.jsx(Te,{leftIcon:e.jsx(Wn,{}),as:Ji,to:"/resources",variant:"ghost",size:"md",children:"Back to Resources"})}),e.jsxs(pr,{templateColumns:{base:"1fr",lg:"2fr 1fr"},gap:6,children:[e.jsxs(kc,{children:[e.jsx(Zt,{overflow:"hidden",bg:ne,boxShadow:"sm",mb:6,children:ee?e.jsxs(un,{children:[e.jsx(Zo,{mt:"4",noOfLines:1,spacing:"4",skeletonHeight:"10",mb:6}),e.jsx(Zo,{mt:"4",noOfLines:4,spacing:"4",mb:6}),e.jsx(kr,{height:"300px",mb:6}),e.jsx(Zo,{mt:"4",noOfLines:8,spacing:"4"})]}):e.jsxs(e.Fragment,{children:[e.jsx(fo,{pb:3,children:e.jsx(Ce,{justify:"space-between",align:"center",mb:4,children:e.jsxs(at,{spacing:3,children:[e.jsx(zr,{src:ue.author.avatar,name:ue.author.name,size:"md"}),e.jsxs(ce,{children:[e.jsxs(at,{spacing:2,children:[e.jsx(G,{fontWeight:"medium",children:ue.author.id===(x==null?void 0:x.id)?"You":ue.author.name}),ue.author.verified&&e.jsx(ct,{as:zi,color:"blue.500",boxSize:3.5})]}),e.jsx(G,{fontSize:"sm",color:M,children:jt(ue.dateAdded)})]})]})})}),e.jsxs(un,{pt:2,children:[e.jsx(ut,{size:"md",mb:4,children:ue.title}),e.jsx(ce,{mb:4,children:e.jsx(G,{fontSize:"xl",lineHeight:"1.6",whiteSpace:"pre-wrap",children:ue.content})})]})]})}),e.jsx(Zt,{overflow:"hidden",bg:ne,boxShadow:"sm",mb:6,children:e.jsxs(da,{variant:"enclosed",isLazy:!0,colorScheme:"blue",children:[e.jsxs(ua,{overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",px:{base:2,md:4},sx:{"&::-webkit-scrollbar":{display:"none"}},children:[(((Mr=ue==null?void 0:ue.images)==null?void 0:Mr.length)||((an=ue==null?void 0:ue.videos)==null?void 0:an.length))>0&&e.jsx(Kn,{fontSize:{base:"sm",md:"md"},px:{base:2,md:4},children:"Media"}),((Ci=ue==null?void 0:ue.documents)==null?void 0:Ci.length)>0&&e.jsx(Kn,{fontSize:{base:"sm",md:"md"},px:{base:2,md:4},children:"Documents"}),Ie.length>0&&e.jsx(Kn,{fontSize:{base:"sm",md:"md"},px:{base:2,md:4},children:"Polls"})]}),e.jsxs(al,{children:[(((fr=ue==null?void 0:ue.images)==null?void 0:fr.length)||((Cn=ue==null?void 0:ue.videos)==null?void 0:Cn.length))>0&&e.jsxs(ui,{px:0,children:[((Ln=ue==null?void 0:ue.images)==null?void 0:Ln.length)>0&&e.jsx(Zt,{mb:4,width:"full",maxW:"container.md",mx:"auto",bg:ne,borderColor:Y,borderWidth:"1px",boxShadow:"sm",children:e.jsx(un,{p:0,children:ue.images.length>1?e.jsx(ce,{position:"relative",width:"full",children:e.jsx(_0,{dots:!0,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:ue.images.length>1,prevArrow:ue.images.length>1?e.jsx(Pv,{}):null,nextArrow:ue.images.length>1?e.jsx(Nv,{}):null,css:{".slick-slide":{padding:"0 4px"},".slick-list":{margin:"0 -4px"}},children:ue.images.map(he=>e.jsxs(ce,{width:"full",height:{base:"200px",md:"350px"},overflow:"hidden",borderRadius:"md",position:"relative",cursor:"pointer",_hover:{"& img":{transform:"scale(1.03)"}},onClick:()=>{B(zt(he.url)),Z()},children:[e.jsx(Ar,{src:zt(he.url),alt:he.original_name||ue.title,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease",onError:kt=>{console.error(`Failed to load image: ${he.url}`,kt),kt.target.src="https://via.placeholder.com/400x300?text=Image+Error"},fallback:e.jsx(ce,{w:"100%",h:"100%",bg:"gray.200",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(G,{children:"Loading image..."})})}),e.jsx(Bt,{icon:e.jsx(Ei,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"blackAlpha.800"},onClick:kt=>{kt.stopPropagation();const Et=he.original_name||`Image-${ue.title}`;z(he.url,Et,"images")},"aria-label":"Download image"})]},he.id||he.url))})}):e.jsxs(ce,{width:"full",height:{base:"200px",md:"350px"},overflow:"hidden",borderRadius:"md",position:"relative",cursor:"pointer",_hover:{"& img":{transform:"scale(1.03)"}},onClick:()=>{B(zt(ue.images[0].url)),Z()},children:[e.jsx(Ar,{src:zt(ue.images[0].url),alt:ue.images[0].original_name||ue.title,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease",onError:he=>{console.error(`Failed to load image: ${ue.images[0].url}`,he),he.target.src="https://via.placeholder.com/400x300?text=Image+Error"},fallback:e.jsx(ce,{w:"100%",h:"100%",bg:"gray.200",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(G,{children:"Loading image..."})})}),e.jsx(Bt,{icon:e.jsx(Ei,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"blackAlpha.800"},onClick:he=>{he.stopPropagation();const kt=ue.images[0].original_name||`Image-${ue.title}`;z(ue.images[0].url,kt,"images")},"aria-label":"Download image"})]},ue.images[0].id||ue.images[0].url)})}),((Hn=ue==null?void 0:ue.videos)==null?void 0:Hn.length)>0&&e.jsx(et,{spacing:4,mb:4,children:ue.videos.map(he=>e.jsxs(ce,{position:"relative",children:[e.jsx(Av,{url:zt(he.url),width:"100%",height:"100%",controls:!0,playing:!1,onError:kt=>console.error(`Failed to load video: ${he.url}`,kt)}),e.jsx(Bt,{icon:e.jsx(Ei,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"blackAlpha.800"},onClick:kt=>{kt.stopPropagation();const Et=he.original_name||`Video-${ue.title}`;z(he.url,Et,"videos"),b({title:"Downloading video",description:`${Et} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":"Download video"})]},he.id||he.url))})]}),((ni=ue==null?void 0:ue.documents)==null?void 0:ni.length)>0&&e.jsx(ui,{px:0,children:e.jsx(ce,{mb:4,children:e.jsx(di,{spacing:3,children:ue.documents.map((he,kt)=>{var Et,Tt,mr,tr,rr,Ht,vr,Or,nr,Mt,Ft,sr,Kr;return e.jsxs(Ce,{p:3,borderWidth:"1px",borderRadius:"md",alignItems:"center",justifyContent:"space-between",bg:ne,_hover:{bg:C},cursor:"pointer",children:[e.jsxs(at,{spacing:3,children:[e.jsx(ct,{as:Ug,boxSize:5,color:y}),e.jsxs(Ce,{align:"center",children:[e.jsx(G,{fontWeight:"bold",fontSize:"lg",isTruncated:!0,children:he.original_name||`Document-${kt+1}`}),((Et=it[he.id])==null?void 0:Et.url)&&e.jsx(ct,{as:zi,color:"green.500",ml:2})]})]}),e.jsxs(at,{spacing:2,children:[e.jsx(Bt,{icon:e.jsx(Dg,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:wt=>{wt.stopPropagation(),window.open(zt(he.url),"_blank")},"aria-label":"Preview document"}),(()=>{var Sr;const wt=(Sr=he.id)!=null?Sr:`idx-${kt}`,wr=!!At[wt];return e.jsx(Te,{leftIcon:e.jsx(Ei,{}),size:"sm",colorScheme:"blue",onClick:async cr=>{if(cr.stopPropagation(),bt.current.has(wt))return;bt.current.add(wt),ht(dr=>({...dr,[wt]:!0}));const Gt=he.original_name||`Document-${kt+1}`;try{await z(he.url,Gt,"documents"),b({title:"Downloading document",description:`${Gt} is being downloaded`,status:"info",duration:2e3,isClosable:!0})}catch(dr){b({title:"Download failed",description:(dr==null?void 0:dr.message)||"Please try again",status:"error",duration:3e3,isClosable:!0})}finally{ht(dr=>({...dr,[wt]:!1})),bt.current.delete(wt)}},isLoading:wr,isDisabled:wr,"aria-label":"Download document",children:"Download"})})(),((he.original_name||"").toLowerCase().endsWith(".pdf")||(he.url||"").toLowerCase().endsWith(".pdf"))&&e.jsxs(wn,{strategy:"fixed",children:[e.jsx(jn,{as:Bt,icon:e.jsx(Uc,{}),size:"sm",variant:"ghost",onClick:wt=>wt.stopPropagation(),"aria-label":"AI options"}),e.jsxs(Sn,{zIndex:9999,bg:ne,children:[(Tt=it[he.id])!=null&&Tt.url?e.jsx(er,{as:"a",icon:e.jsx(Ei,{}),href:it[he.id].url,download:`Quiz-${he.original_name||"quiz"}.pdf`,children:"Download quiz"}):e.jsx(er,{icon:e.jsx(mp,{}),isDisabled:(mr=it[he.id])==null?void 0:mr.loading,onClick:wt=>{wt.stopPropagation(),re(he.id,he.original_name||`Document-${kt+1}`)},children:(tr=it[he.id])!=null&&tr.loading?e.jsxs(at,{spacing:2,children:[e.jsx(G,{children:"Generating quiz..."}),e.jsx(io,{size:"sm",value:((rr=it[he.id])==null?void 0:rr.progress)||0,w:"60px"}),e.jsxs(G,{fontSize:"sm",children:[((Ht=it[he.id])==null?void 0:Ht.progress)||0,"%"]})]}):(vr=it[he.id])!=null&&vr.error?e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(G,{color:"red.500",children:"Generation failed"}),e.jsx(G,{fontSize:"xs",color:"gray.500",children:it[he.id].error}),e.jsx(Te,{size:"xs",colorScheme:"red",variant:"link",onClick:wt=>{wt.stopPropagation(),re(he.id,he.original_name||`Document-${kt+1}`)},children:"Retry"})]}):"Generate quiz"}),(Or=ot[he.id])!=null&&Or.url?e.jsx(er,{as:"a",icon:e.jsx(Ei,{}),href:ot[he.id].url,download:`Summary-${he.original_name||"summary"}.pdf`,children:"Download summary"}):e.jsx(er,{icon:e.jsx(qn,{}),isDisabled:(nr=ot[he.id])==null?void 0:nr.loading,onClick:wt=>{wt.stopPropagation(),v(he.id,he.original_name||`Document-${kt+1}`)},children:(Mt=ot[he.id])!=null&&Mt.loading?e.jsxs(at,{spacing:2,children:[e.jsx(G,{children:"Generating summary..."}),e.jsx(io,{size:"sm",value:((Ft=ot[he.id])==null?void 0:Ft.progress)||0,w:"60px"}),e.jsxs(G,{fontSize:"sm",children:[((sr=ot[he.id])==null?void 0:sr.progress)||0,"%"]})]}):(Kr=ot[he.id])!=null&&Kr.error?e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(G,{color:"red.500",children:"Generation failed"}),e.jsx(G,{fontSize:"xs",color:"gray.500",children:ot[he.id].error}),e.jsx(Te,{size:"xs",colorScheme:"red",variant:"link",onClick:wt=>{wt.stopPropagation(),v(he.id,he.original_name||`Document-${kt+1}`)},children:"Retry"})]}):"Generate summary"})]})]})]})]},he.id||kt)})})})}),Ie.length>0&&e.jsx(ui,{px:0,children:e.jsx(ce,{mb:4,children:Ie.slice(0,1).map((he,kt)=>{const Et=he.id||`poll-${kt}`,Tt=he.options.reduce((rr,Ht)=>rr+(Ht.votes||0),0);De[Et];const mr=ve[Et],tr=async rr=>{try{const{message:Ht,poll:vr}=await nh(rr),Or={id:vr.id,question:vr.question,options:(vr.options||[]).map(nr=>{var Mt,Ft,sr,Kr;return{id:nr.id,text:(Ft=(Mt=nr.option_text)!=null?Mt:nr.text)!=null?Ft:"",votes:(Kr=(sr=nr.vote_count)!=null?sr:nr.votes)!=null?Kr:0}})};ze(nr=>nr.map(Mt=>Mt.id===Or.id?Or:Mt)),Ht.startsWith("Vote removed")?(Pe(nr=>({...nr,[he.id]:null})),Se(nr=>({...nr,[he.id]:!1}))):(Pe(nr=>({...nr,[he.id]:rr})),Se(nr=>({...nr,[he.id]:!0}))),b({title:Ht,status:"success",duration:2e3,isClosable:!0})}catch(Ht){console.error("Vote error",Ht),b({title:"Failed to record vote",description:Ht.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}};return e.jsxs(ce,{bg:oe("gray.50","gray.700"),p:4,borderRadius:"xl",children:[e.jsx(G,{fontWeight:"semibold",mb:3,children:he.question}),e.jsx(et,{spacing:2,align:"stretch",children:he.options.map((rr,Ht)=>{const vr=rr.id||`option-${Ht}`,Or=mr===vr,nr=rr.votes||0,Mt=Tt>0?Math.round(nr/Tt*100):0;return e.jsxs(ce,{position:"relative",p:3,borderRadius:"lg",cursor:"pointer",onClick:()=>tr(vr),bg:oe("white","gray.800"),border:"2px solid",borderColor:Or?"blue.400":"transparent",_hover:{borderColor:Or?"blue.500":oe("gray.200","gray.600")},children:[e.jsx(ce,{position:"absolute",left:0,top:0,bottom:0,width:`${Mt}%`,bg:Or?"blue.100":oe("gray.100","gray.700"),opacity:.3,borderRadius:"lg"}),e.jsxs(Ce,{justify:"space-between",align:"center",position:"relative",children:[e.jsx(G,{children:rr.text}),e.jsxs(G,{fontWeight:"bold",color:Or?"blue.500":M,children:[Mt,"%"]})]})]},vr)})}),e.jsxs(G,{fontSize:"sm",color:M,mt:2,textAlign:"center",children:[Tt," ",Tt===1?"vote":"votes"]})]},Et)})})})]})]})}),e.jsx(Zt,{overflow:"hidden",bg:ne,boxShadow:"sm",mb:6,children:e.jsxs(un,{children:[e.jsxs(Ce,{justify:"space-between",align:"center",mb:4,children:[e.jsxs(ut,{size:"md",children:["Discussion (",Fe.length,")"]}),e.jsx(Te,{rightIcon:m?e.jsx(zg,{}):e.jsx(ds,{}),variant:"ghost",size:"sm",onClick:_,children:m?"Hide":"Show"})]}),m&&e.jsxs(et,{align:"stretch",spacing:6,children:[e.jsx(ce,{p:4,borderWidth:"1px",borderRadius:"lg",bg:ne,children:e.jsxs(at,{align:"start",spacing:3,children:[e.jsx(zr,{size:"sm",name:x?`${x.first_name} ${x.last_name}`:"User",src:(x==null?void 0:x.avatar_url)||(x!=null&&x.avatar?zt(x.avatar):void 0)}),e.jsx(ti,{ref:O,value:be,onChange:he=>fe(he.target.value),placeholder:"Add to the discussion...",variant:"unstyled",rows:2,resize:"none",onKeyDown:he=>{he.key==="Enter"&&!he.shiftKey&&(he.preventDefault(),V||It())}}),e.jsx(Te,{rightIcon:e.jsx(xp,{}),"aria-label":a?"Save edited comment":"Send comment",onClick:It,colorScheme:"blue",size:"sm",isLoading:V,isDisabled:!(be!=null&&be.trim())||V,children:"Send"})]})}),Fe.map(he=>{var kt,Et;return e.jsx(Lv,{p:4,borderWidth:"1px",borderRadius:"lg",bg:ne,initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs(at,{align:"start",spacing:3,children:[e.jsx(zr,{size:"sm",name:he.user?`${he.user.first_name} ${he.user.last_name}`:"Anonymous",src:((kt=he.user)==null?void 0:kt.avatar_url)||((Et=he.user)!=null&&Et.avatar?zt(he.user.avatar):void 0)}),e.jsxs(ce,{flex:"1",children:[e.jsxs(at,{justify:"space-between",children:[e.jsxs(ce,{children:[e.jsx(G,{fontWeight:"600",children:he.user.id===(x==null?void 0:x.id)?"You":`${he.user.first_name} ${he.user.last_name}`}),e.jsx(G,{fontSize:"sm",color:M,children:jt(he.date)})]}),e.jsxs(at,{spacing:2,children:[e.jsx(Te,{variant:"ghost",size:"sm",leftIcon:e.jsx(ct,{as:Nc,color:he.isUpvoted?"green.500":void 0}),color:he.isUpvoted?"green.500":void 0,fontWeight:he.isUpvoted?"bold":"normal",onClick:()=>nt(he.id),children:he.likes||0}),he.user.id===(x==null?void 0:x.id)&&e.jsxs(at,{spacing:1,children:[e.jsx(Bt,{"aria-label":"Edit",variant:"ghost",size:"sm",icon:e.jsx(ao,{}),onClick:()=>gt(he)}),e.jsx(Bt,{"aria-label":"Delete",variant:"ghost",size:"sm",icon:e.jsx(hl,{}),onClick:()=>Ve(he.id)})]})]})]}),a===he.id?e.jsxs(ce,{mt:2,children:[e.jsx(ti,{value:u,onChange:Tt=>h(Tt.target.value),rows:2,resize:"vertical"}),e.jsxs(at,{mt:2,spacing:2,children:[e.jsx(Te,{size:"sm",colorScheme:"blue",onClick:Ut,children:"Save"}),e.jsx(Te,{size:"sm",variant:"ghost",onClick:Ct,children:"Cancel"})]})]}):e.jsx(G,{mt:2,children:he.text})]})]})},he.id)})]})]})})]}),e.jsx(kc,{children:e.jsx(ce,{position:"sticky",top:"24",children:e.jsx(Py,{courseName:ue==null?void 0:ue.courseName,courseCode:ue==null?void 0:ue.courseCode,lastUpdated:ue==null?void 0:ue.lastUpdated,likes:Ue,commentsCount:Fe==null?void 0:Fe.length})})})]}),e.jsx(ce,{position:"fixed",bottom:{base:4,md:8},right:{base:4,md:8},zIndex:"tooltip",children:e.jsxs(et,{spacing:3,children:[e.jsx(Bt,{icon:e.jsx(Nc,{}),variant:L?"solid":"outline",colorScheme:L?"blue":"gray",size:"lg","aria-label":"Upvote",onClick:We}),e.jsx(Bt,{icon:e.jsx(Xi,{}),variant:Q?"solid":"outline",colorScheme:Q?"blue":"gray",size:"lg","aria-label":"Save",onClick:Ae}),e.jsx(Bt,{icon:e.jsx(fa,{}),variant:"outline",colorScheme:"gray",size:"lg","aria-label":"Share",onClick:tt})]})}),e.jsx(ll,{isOpen:t,leastDestructiveRef:i,onClose:j?()=>{}:n,closeOnOverlayClick:!j,closeOnEsc:!j,children:e.jsx(Fr,{children:e.jsxs(cl,{children:[e.jsx(Wr,{fontSize:"lg",fontWeight:"bold",children:"Delete Comment"}),e.jsx(Ir,{children:"Are you sure you want to delete this comment? This action cannot be undone."}),e.jsxs(Jr,{children:[e.jsx(Te,{ref:i,onClick:n,isDisabled:j,children:"Cancel"}),e.jsx(Te,{colorScheme:"red",onClick:Je,ml:3,isLoading:j,isDisabled:j,children:"Delete"})]})]})})}),e.jsxs(hn,{isOpen:H,onClose:N,size:"full",isCentered:!0,children:[e.jsx(Fr,{}),e.jsxs(fn,{bg:"transparent",boxShadow:"none",maxW:"90vw",maxH:"90vh",m:"auto",children:[e.jsx(on,{color:"white"}),e.jsx(Ir,{p:0,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(Ar,{src:D,alt:"Preview",borderRadius:"md",maxW:"90vw",maxH:"90vh",objectFit:"contain"})})]})]})]})})},ap=hr(ce),lp=({event:t,onBookmark:r,onCardClick:n})=>{const i=oe("white","gray.800"),o=oe("gray.800","whiteAlpha.900"),s=oe("gray.600","gray.400"),a=oe("gray.200","gray.700");if(!t||!t.data)return e.jsx(ap,{p:5,borderWidth:"1px",borderRadius:"lg",borderColor:a,bg:i,textAlign:"center",children:e.jsx(G,{color:s,children:"This saved item is no longer available."})});const{title:c,event_datetime:u,location:h,organizer:p,attendees_count:x,image_path:b,is_club_event:m,club:_}=t.data,w=new Date(u)<new Date,O=new Date(u).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),k=new Date(u).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsxs(ap,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",bg:i,borderColor:a,whileHover:{y:-5,boxShadow:"lg"},transition:{type:"spring",stiffness:300},cursor:"pointer",onClick:()=>n(t.data.id),children:[e.jsxs(ce,{position:"relative",children:[e.jsx(Ar,{src:`${fs}/storage/${b}`,alt:c,objectFit:"cover",w:"100%",h:"200px"}),w&&e.jsx(Pr,{position:"absolute",top:2,left:2,colorScheme:"red",children:"Finished"}),e.jsx(at,{position:"absolute",top:2,right:2,spacing:2,children:e.jsx(wi,{label:t.isSaved?"Unsave":"Save",placement:"top",children:e.jsx(Bt,{icon:e.jsx(Xi,{fill:t.isSaved?"currentColor":"none"}),onClick:T=>{T.stopPropagation(),r(t.data.id,"Event")},size:"sm",borderRadius:"full",bg:"rgba(0,0,0,0.6)",color:"white",_hover:{bg:"rgba(0,0,0,0.8)"},"aria-label":"Bookmark Event"})})})]}),e.jsxs(et,{p:4,align:"start",spacing:3,children:[e.jsx(ut,{size:"md",color:o,noOfLines:2,children:c}),e.jsxs(et,{align:"start",spacing:2,color:s,children:[e.jsxs(at,{children:[e.jsx(ct,{as:An}),e.jsx(G,{children:O})]}),e.jsxs(at,{children:[e.jsx(ct,{as:hs}),e.jsx(G,{children:k})]}),e.jsxs(at,{children:[e.jsx(ct,{as:Ko}),e.jsx(G,{children:h})]})]}),e.jsxs(Ce,{justify:"space-between",align:"center",w:"100%",mt:3,children:[e.jsx(at,{children:m&&_?e.jsxs(e.Fragment,{children:[e.jsx(zr,{size:"xs",name:_.name,src:`${fs}/storage/${_.logo_path}`}),e.jsx(G,{fontSize:"sm",fontWeight:"bold",children:_.name})]}):e.jsxs(G,{fontSize:"sm",children:["Organized by: ",p]})}),e.jsxs(at,{spacing:1,align:"center",children:[e.jsx(ct,{as:Un}),e.jsx(G,{fontSize:"sm",children:x})]})]})]})]})},Rv=[{id:"all",name:"All Items",icon:pp,color:"gray.500"},{id:"Resource",name:"Resources",icon:qn,color:"blue.500"},{id:"Event",name:"Events",icon:An,color:"purple.500"}],Ev=()=>{const t=Xr(),[r,n]=q.useState([]),[i,o]=q.useState(!0),[s,a]=q.useState(null),[c,u]=q.useState(""),[h,p]=q.useState("all"),[x,b]=q.useState("grid"),[m,_]=q.useState(1),w=9,[O,k]=q.useState(null),T=oe("gray.50","gray.900"),H=oe("gray.800","whiteAlpha.900"),Z=oe("gray.600","gray.400"),N=oe("gray.200","gray.700"),D=oe("white","gray.800"),B=oe("blue.50","blue.900"),V=oe("gray.100","gray.700");q.useEffect(()=>{(async()=>{o(!0);try{const y=await Zs();k(y);const C=(await u0()).data.map(W=>({...W,isSaved:!0,data:W.type==="Resource"?{...W.data,is_saved:!0}:W.data}));n(C)}catch(y){a("Failed to fetch saved items. Please try again later."),console.error(y)}finally{o(!1)}})()},[]);const R=async(M,y)=>{const Y=[...r],C=r.filter(W=>{var L;return((L=W.data)==null?void 0:L.id)!==M});n(C);try{y==="Resource"?await Zc(M):y==="Event"&&await Kp(M)}catch(W){console.error("Failed to update bookmark status:",W),n(Y)}},P=(M,y)=>{y==="Resource"?t(`/resources/${M}`):y==="Event"&&t("/events")},j=r.filter(M=>{var C,W;if(!M.data)return h==="all"&&c==="";const y=((C=M.data.title)==null?void 0:C.toLowerCase().includes(c.toLowerCase()))||((W=M.data.description)==null?void 0:W.toLowerCase().includes(c.toLowerCase())),Y=h==="all"||M.type===h;return y&&Y}).sort((M,y)=>new Date(y.saved_at||0)-new Date(M.saved_at||0)),A=(m-1)*w,E=j.slice(A,A+w),z=Math.ceil(j.length/w),se=()=>{window.history.back()},re={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},v={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},ne=()=>{if(i)return e.jsx(vn,{w:"full",py:12,children:e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2,1fr)",lg:"repeat(3,1fr)"},gap:6,w:"full",children:[...Array(6)].map((y,Y)=>e.jsxs(ce,{borderWidth:"1px",borderRadius:"lg",p:4,bg:D,borderColor:N,children:[e.jsx(kr,{height:"150px",mb:4}),e.jsx(Zo,{noOfLines:3,spacing:"4"})]},Y))})});if(s)return e.jsx(vn,{h:"300px",children:e.jsxs(so,{status:"error",borderRadius:"md",children:[e.jsx(oo,{}),e.jsx(sg,{children:"An Error Occurred!"}),e.jsx(og,{children:s})]})});if(j.length===0)return e.jsx(vn,{h:"300px",children:e.jsxs(et,{children:[e.jsx(ct,{as:Xi,boxSize:"50px",color:Z}),e.jsx(ut,{size:"md",color:H,children:"No Saved Items Found"}),e.jsx(G,{color:Z,children:c||h!=="all"?"Try adjusting your search or filter.":"You haven't saved any items yet."})]})});const M={base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"};return e.jsx(ag,{mode:"wait",children:e.jsx(hr.div,{variants:re,initial:"hidden",animate:"show",children:x==="grid"?e.jsx(pr,{templateColumns:M,gap:6,children:E.map(y=>{var Y;return e.jsx(hr.div,{variants:v,children:y.type==="Resource"?e.jsx(Fc,{resource:y.data,onBookmark:()=>R(y.data.id,"Resource"),onCardClick:()=>P(y.data.id,"Resource"),currentUser:O,cardBg:D,textColor:H,mutedText:Z,borderColor:N}):e.jsx(lp,{event:y,onBookmark:()=>R(y.data.id,"Event"),onCardClick:()=>P(y.data.id,"Event")})},`${y.type}-${((Y=y.data)==null?void 0:Y.id)||y.saved_at}`)})}):e.jsx(et,{spacing:4,align:"stretch",children:E.map(y=>{var Y;return e.jsx(hr.div,{variants:v,children:y.type==="Resource"?e.jsx(Fc,{resource:y.data,onBookmark:()=>R(y.data.id,"Resource"),onCardClick:()=>P(y.data.id,"Resource"),currentUser:O,cardBg:D,textColor:H,mutedText:Z,borderColor:N}):e.jsx(lp,{event:y,onBookmark:()=>R(y.data.id,"Event"),onCardClick:()=>P(y.data.id,"Event")})},`${y.type}-${((Y=y.data)==null?void 0:Y.id)||y.saved_at}`)})})},x)})};return e.jsxs(ce,{bg:T,minH:"100vh",p:{base:4,md:8},children:[e.jsxs(Ce,{mb:4,align:"center",children:[e.jsx(Bt,{icon:e.jsx(Wn,{}),"aria-label":"Go back",variant:"ghost",onClick:se}),e.jsx(G,{ml:2,fontWeight:"medium",color:Z,children:"Go Back"})]}),e.jsxs(et,{spacing:6,align:"stretch",children:[e.jsxs(Ce,{direction:{base:"column",md:"row"},justify:"space-between",align:{base:"flex-start",md:"center"},gap:4,children:[e.jsxs(ce,{children:[e.jsx(ut,{size:"lg",color:H,children:"My Saved Items"}),e.jsx(G,{color:Z,children:i?"Loading...":`${j.length} items found`})]}),e.jsxs(Ce,{gap:2,direction:{base:"column",sm:"row"},w:{base:"100%",md:"auto"},children:[e.jsxs(Tr,{w:{base:"100%",sm:"250px"},children:[e.jsx($r,{pointerEvents:"none",children:e.jsx(ct,{as:lo,color:Z})}),e.jsx(Rt,{placeholder:"Search saved items...",value:c,onChange:M=>u(M.target.value),bg:D})]}),e.jsxs(at,{spacing:1,bg:D,borderRadius:"md",p:1,borderWidth:"1px",borderColor:N,children:[e.jsx(Te,{size:"sm",variant:x==="grid"?"solid":"ghost",onClick:()=>b("grid"),leftIcon:e.jsx(Hg,{}),children:"Grid"}),e.jsx(Te,{size:"sm",variant:x==="list"?"solid":"ghost",onClick:()=>b("list"),leftIcon:e.jsx(mp,{}),children:"List"})]})]})]}),e.jsx(da,{variant:"soft-rounded",colorScheme:"blue",children:e.jsx(ua,{overflowX:"auto",py:2,children:Rv.map(M=>e.jsxs(Kn,{onClick:()=>p(M.id),bg:h===M.id?B:"transparent",_hover:{bg:V},children:[e.jsx(ct,{as:M.icon,mr:2,color:M.color}),M.name]},M.id))})}),e.jsxs(e.Fragment,{children:[ne(),z>1&&e.jsxs(at,{justify:"center",spacing:4,mt:4,children:[e.jsx(Te,{onClick:()=>_(M=>M-1),isDisabled:m===1,children:"Previous"}),e.jsxs(G,{children:["Page ",m," of ",z]}),e.jsx(Te,{onClick:()=>_(M=>M+1),isDisabled:m===z,children:"Next"})]})]})]})]})},Tv=()=>{const t=qr(),r=Xr(),{user:n}=hi(),i=oe("rgba(255, 255, 255, 0.92)","rgba(45, 55, 72, 0.85)"),o=oe("rgba(226, 232, 240, 0.8)","rgba(74, 85, 104, 0.6)"),s=oe("gray.600","gray.400"),a=oe("blue.50","rgba(49, 130, 206, 0.12)"),c=oe("rgba(226, 232, 240, 0.9)","rgba(74, 85, 104, 0.7)"),u=oe("rgba(237, 242, 247, 0.7)","rgba(45, 55, 72, 0.6)"),h=oe("rgba(203, 213, 224, 0.9)","rgba(74, 85, 104, 0.6)"),[p,x]=q.useState([]),[b,m]=q.useState({current_page:1,last_page:1,total:0}),[_,w]=q.useState(!0),[O,k]=q.useState(null),[T,H]=q.useState(null),[Z,N]=q.useState(""),[D,B]=q.useState(""),{isOpen:V,onOpen:R,onClose:P}=Br(),j=()=>{P(),H(null),N(""),B("")},A=L=>L?Array.isArray(L)?L.map($=>$==null?void 0:$.toLowerCase()).filter(Boolean):[String(L).toLowerCase()]:[],E=q.useMemo(()=>{const L=(localStorage.getItem("role")||"").toLowerCase(),$=A(n==null?void 0:n.roles),Q=A(n==null?void 0:n.role_names),ie=A(n==null?void 0:n.role),de=new Set([...$,...Q,...ie,L]);return de.has("admin")||de.has("moderator")},[n]),z=L=>{if(!L)return"Unknown";const $=new Date(String(L).replace(" ","T"));return Number.isNaN($.getTime())?L:$.toLocaleString()},se=L=>{if(!L)return"#";if(/^https?:\/\//i.test(L))return L;const $=fs||"";return $?L.startsWith("/")?`${$}${L}`:`${$}/${L}`:L},re=L=>{const $=((L==null?void 0:L.type)||"").toLowerCase(),Q=((L==null?void 0:L.mime_type)||"").toLowerCase();return $==="image"||Q.startsWith("image")?rl:$==="document"||Q.includes("pdf")||Q.includes("word")?qn:Zg},v=L=>L?L.poll?L.poll:L.polls&&!Array.isArray(L.polls)?L.polls:null:null,ne=q.useCallback(async(L=1)=>{if(E){w(!0);try{const $=await m0({page:L});x(Array.isArray($==null?void 0:$.data)?$.data:[]),m({current_page:($==null?void 0:$.current_page)||L,last_page:($==null?void 0:$.last_page)||1,total:($==null?void 0:$.total)||0})}catch($){t({title:"Failed to load pending resources",description:($==null?void 0:$.message)||($==null?void 0:$.error)||"Please try again in a moment.",status:"error",duration:4e3,isClosable:!0})}finally{w(!1)}}},[E,t]);q.useEffect(()=>{n&&!E&&(t({title:"Access restricted",description:"You do not have permission to moderate resources.",status:"warning",duration:3e3,isClosable:!0}),r("/dashboard",{replace:!0}))},[n,E,r,t]),q.useEffect(()=>{ne(1)},[ne]);const M=L=>{L<1||L>b.last_page||L===b.current_page||ne(L)},y=L=>{x($=>$.filter(Q=>Q.id!==L)),m($=>({...$,total:Math.max(($.total||1)-1,0)}))},Y=async L=>{k(L);try{await g0(L),y(L),t({title:"Resource approved",status:"success",duration:2500,isClosable:!0}),p.length<=1&&b.current_page>1&&ne(b.current_page-1)}catch($){t({title:"Approval failed",description:($==null?void 0:$.message)||($==null?void 0:$.error)||"Please try again.",status:"error",duration:3500,isClosable:!0})}finally{k(null)}},C=L=>{H(L),N(""),B(""),R()},W=async()=>{const L=Z.trim();if(!L){B("Please provide a reason for rejection.");return}if(T){k(T.id);try{await x0(T.id,L),y(T.id),t({title:"Resource rejected",status:"info",duration:2500,isClosable:!0}),j(),p.length<=1&&b.current_page>1&&ne(b.current_page-1)}catch($){t({title:"Rejection failed",description:($==null?void 0:$.message)||($==null?void 0:$.error)||"Please try again.",status:"error",duration:3500,isClosable:!0})}finally{k(null)}}};return E?e.jsxs(ce,{position:"relative",bg:oe("gray.50","gray.900"),minH:"calc(100vh - 60px)",py:6,px:{base:4,md:6,lg:8},children:[e.jsxs(Ce,{direction:"column",maxW:"1200px",mx:"auto",gap:6,children:[e.jsx(ut,{size:"lg",children:"Resource Moderation"}),e.jsx(G,{color:s,maxW:"720px",children:"Review new resources submitted by the community. Approve high-quality contributions or reject those that do not meet the guidelines."}),e.jsxs(ce,{bg:i,borderRadius:"xl",border:"1px solid",borderColor:o,boxShadow:"sm",px:{base:4,md:6},py:6,children:[e.jsxs(at,{spacing:3,mb:4,color:s,children:[e.jsx(hs,{size:20}),e.jsxs(G,{fontSize:"sm",children:[b.total," pending ",b.total===1?"resource":"resources"," in queue"]})]}),_?e.jsx(vn,{py:16,children:e.jsx(nn,{size:"lg",color:"blue.400",thickness:"4px"})}):p.length===0?e.jsxs(vn,{py:20,flexDirection:"column",gap:3,children:[e.jsx(zi,{size:36,color:"#48BB78"}),e.jsx(ut,{size:"md",children:"All caught up!"}),e.jsx(G,{color:s,children:"No resources are waiting for review right now."})]}):e.jsx(yr,{spacing:5,children:p.map(L=>{var $,Q,ie,de,le,be;return e.jsx(ce,{borderRadius:"lg",border:"1px solid",borderColor:o,bg:oe("white","gray.800"),p:{base:4,md:5},children:e.jsxs(Ce,{direction:{base:"column",md:"row"},gap:5,children:[e.jsxs(ce,{flex:"1",children:[e.jsxs(at,{spacing:3,align:"flex-start",mb:3,children:[e.jsx(zr,{size:"md",name:(($=L==null?void 0:L.user)==null?void 0:$.full_name)||((Q=L==null?void 0:L.user)==null?void 0:Q.username)||"User",src:((ie=L==null?void 0:L.user)==null?void 0:ie.avatar_url)||void 0}),e.jsxs(ce,{children:[e.jsxs(at,{spacing:3,align:"center",children:[e.jsx(ut,{size:"md",children:L.title||"Untitled"}),e.jsx(Pr,{colorScheme:"yellow",textTransform:"capitalize",children:L.approval_status||"pending"})]}),e.jsxs(G,{fontSize:"sm",color:s,mt:1,children:["Submitted by ",((de=L==null?void 0:L.user)==null?void 0:de.full_name)||((le=L==null?void 0:L.user)==null?void 0:le.username)||"Unknown"]}),e.jsx(G,{fontSize:"xs",color:s,children:z(L.created_at)})]})]}),e.jsx(G,{color:oe("gray.700","gray.200"),whiteSpace:"pre-wrap",children:L.description||"No description provided."}),e.jsx(sn,{my:4,opacity:.4}),e.jsxs(yr,{direction:{base:"column",md:"row"},spacing:3,fontSize:"sm",color:s,children:[e.jsxs(ce,{bg:a,borderRadius:"md",px:3,py:2,children:["Course: ",((be=L==null?void 0:L.course)==null?void 0:be.name)||"General"]}),e.jsxs(ce,{bg:a,borderRadius:"md",px:3,py:2,children:["Attachments: ",Array.isArray(L.attachments)?L.attachments.length:0]})]}),Array.isArray(L.attachments)&&L.attachments.length>0&&e.jsxs(ce,{mt:4,children:[e.jsx(G,{fontSize:"sm",fontWeight:"semibold",mb:2,children:"Attachments"}),e.jsx(yr,{spacing:2,children:L.attachments.map(fe=>{const Fe=re(fe),Oe=se(fe==null?void 0:fe.url);return e.jsxs(Ce,{align:"center",border:"1px solid",borderColor:c,borderRadius:"md",px:3,py:2,gap:3,children:[e.jsx(ct,{as:Fe,fontSize:"lg",color:"blue.400"}),e.jsxs(ce,{flex:"1",minW:0,children:[e.jsx(G,{noOfLines:1,fontWeight:"medium",children:(fe==null?void 0:fe.original_name)||(fe==null?void 0:fe.name)||"Attachment"}),e.jsx(G,{fontSize:"xs",color:s,children:(fe==null?void 0:fe.mime_type)||(fe==null?void 0:fe.type)||"File"})]}),e.jsx(Te,{as:Sc,href:Oe,isExternal:!0,variant:"ghost",size:"sm",leftIcon:e.jsx(Ei,{}),children:"Open"})]},fe.id||fe.url)})})]}),(()=>{const fe=v(L);if(!fe)return null;const Fe=Array.isArray(fe.options)?fe.options:[],Oe=Fe.reduce((Ue,ye)=>Ue+(ye.vote_count||0),0);return e.jsxs(ce,{mt:6,border:"1px solid",borderColor:h,borderRadius:"lg",bg:u,p:4,children:[e.jsxs(at,{spacing:2,mb:3,color:s,children:[e.jsx(ct,{as:ta}),e.jsx(G,{fontWeight:"semibold",children:"Poll Question"})]}),e.jsx(G,{fontWeight:"bold",mb:3,children:fe.question||"Poll"}),e.jsx(yr,{spacing:3,children:Fe.length===0?e.jsx(G,{fontSize:"sm",color:s,children:"No poll options provided."}):Fe.map(Ue=>{const ye=Ue.vote_count||0,ee=Oe>0?Math.round(ye/Oe*100):0;return e.jsxs(ce,{children:[e.jsxs(Ce,{justify:"space-between",fontSize:"sm",mb:1,children:[e.jsx(G,{fontWeight:"medium",children:Ue.option_text}),e.jsxs(G,{color:s,children:[ye," votes"]})]}),e.jsx(io,{value:ee,colorScheme:"blue",borderRadius:"md"}),e.jsxs(G,{fontSize:"xs",color:s,mt:1,children:[ee,"%"]})]},Ue.id||Ue.option_text)})}),e.jsxs(G,{fontSize:"xs",color:s,mt:3,children:["Total votes: ",Oe]})]})})()]}),e.jsx(sn,{orientation:"vertical",display:{base:"none",md:"block"}}),e.jsxs(yr,{spacing:3,minW:{md:"220px"},children:[e.jsx(Te,{colorScheme:"green",leftIcon:e.jsx(zi,{}),isLoading:O===L.id,loadingText:"Approving",onClick:()=>Y(L.id),children:"Approve"}),e.jsx(Te,{variant:"outline",colorScheme:"red",leftIcon:e.jsx(co,{}),isLoading:O===L.id&&(T==null?void 0:T.id)===L.id&&V,onClick:()=>C(L),children:"Reject"})]})]})},L.id)})}),!_&&p.length>0&&e.jsx(Ic,{currentPage:b.current_page,totalPages:b.last_page,onPageChange:M,isLoading:_})]})]}),e.jsxs(hn,{isOpen:V,onClose:j,isCentered:!0,size:"lg",children:[e.jsx(Fr,{}),e.jsxs(fn,{children:[e.jsx(Wr,{children:"Reject resource"}),e.jsx(on,{disabled:O===(T==null?void 0:T.id),onClick:j}),e.jsx(Ir,{children:e.jsxs(ft,{isInvalid:!!D,children:[e.jsx(pt,{children:"Reason for rejection"}),e.jsx(ti,{placeholder:"Describe why this resource is being rejected",value:Z,onChange:L=>{N(L.target.value),D&&B("")},rows:5}),D&&e.jsx(G,{color:"red.500",fontSize:"sm",mt:2,children:D})]})}),e.jsxs(Jr,{gap:3,children:[e.jsx(Te,{variant:"ghost",onClick:j,isDisabled:O===(T==null?void 0:T.id),children:"Cancel"}),e.jsx(Te,{colorScheme:"red",leftIcon:e.jsx(co,{}),onClick:W,isLoading:O===(T==null?void 0:T.id),loadingText:"Rejecting",children:"Reject resource"})]})]})]})]}):e.jsx(vn,{minH:"70vh",children:e.jsxs(yr,{spacing:4,align:"center",children:[e.jsx(Gu,{size:48,color:"#DD6B20"}),e.jsx(G,{color:s,children:"Redirecting..."})]})})},zv=()=>e.jsxs(fg,{children:[e.jsx(Hr,{path:"/",element:e.jsxs(ce,{bg:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",minH:"100vh",children:[e.jsx(c1,{}),e.jsx(u1,{}),e.jsx(h1,{}),e.jsx(f1,{}),e.jsx(l1,{})]})}),e.jsx(Hr,{path:"/login",element:e.jsx(Q2,{})}),e.jsx(Hr,{path:"/register",element:e.jsx(tx,{})}),e.jsx(Hr,{path:"/google-callback",element:e.jsx(rx,{})}),e.jsx(Hr,{path:"/complete-google-registration",element:e.jsx(nx,{})}),e.jsx(Hr,{element:e.jsx(Ly,{}),children:e.jsxs(Hr,{element:e.jsx(Sy,{}),children:[e.jsx(Hr,{path:"/dashboard",element:e.jsx(ix,{})}),e.jsx(Hr,{path:"/settings",element:e.jsx(_5,{})}),e.jsx(Hr,{path:"/user/:userId",element:e.jsx(A5,{})}),e.jsx(Hr,{path:"/resources",element:e.jsx(jb,{})}),e.jsx(Hr,{path:"/resources/:id",element:e.jsx(Ov,{})}),e.jsx(Hr,{path:"/clubs",element:e.jsx(Db,{})}),e.jsx(Hr,{path:"/courses/:id",element:e.jsx(qb,{})}),e.jsx(Hr,{path:"/study-groups",element:e.jsx(Qb,{})}),e.jsx(Hr,{path:"/events",element:e.jsx(hx,{})}),e.jsx(Hr,{path:"/requests",element:e.jsx(yy,{})}),e.jsx(Hr,{path:"/document/:docId",element:e.jsx(Zb,{})}),e.jsx(Hr,{path:"/notifications",element:e.jsx(sy,{})}),e.jsx(Hr,{path:"/grade-calculator",element:e.jsx(Ay,{})}),e.jsx(Hr,{path:"/saved-resources",element:e.jsx(Ev,{})}),e.jsx(Hr,{path:"/resource-moderation",element:e.jsx(Tv,{})})]})}),e.jsx(Hr,{path:"*",element:e.jsx(Cy,{})})]}),Fv=()=>{const{pathname:t}=dl();return q.useEffect(()=>{window.scrollTo(0,0)},[t]),null},Iv=lg({config:{initialColorMode:"light",useSystemColorMode:!1},colors:{brand:{navy:"#1e3669",navyDark:"#132347",gold:"#f2d944",goldDark:"#d9c226",white:"#ffffff"}},styles:{global:t=>({body:{bg:t.colorMode==="dark"?"gray.800":"#f0f4f8"}})},components:{Button:{variants:{primary:t=>({bg:t.colorMode==="dark"?"brand.navyDark":"brand.navy",color:"white",_hover:{bg:t.colorMode==="dark"?"#0c1930":"#182d5a"}}),secondary:t=>({bg:t.colorMode==="dark"?"brand.goldDark":"brand.gold",color:t.colorMode==="dark"?"white":"brand.navy",_hover:{bg:t.colorMode==="dark"?"#c4af22":"#e9d033"}})}}}});function Mv(){return e.jsx(cg,{theme:Iv,children:e.jsxs(pg,{children:[e.jsx(Fv,{}),e.jsx(K2,{children:e.jsx(iy,{children:e.jsx(zv,{})})})]})})}_g.createRoot(document.getElementById("root")).render(e.jsx(q.StrictMode,{children:e.jsx(Mv,{})}));export{ho as _};
