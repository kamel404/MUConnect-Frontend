import{u as o,j as e,a6 as P,d as n,B as k,O as ce,n as le,H as d,T as de,m as ee,V as R,K as O,I as x,F as $,A as he,Q as ge,Y as ue,R as xe,c as z,aA as pe,aB as je,aC as me,C as W,N as q,am as ve,at as fe,a3 as be,a4 as ye,aH as Ce,aI as we,aJ as Se}from"./chakra-BFMGxYLr.js";import{u as ke,a as c}from"./react-6s1XWRBU.js";import{getSavedItems as Re,toggleSaveResource as Fe}from"./resourceService-BPsVWu4e.js";import{t as Ie}from"./eventsService-DpkCbHQQ.js";import{O as J,o as ae,h as se,aa as Be,ab as Ee,f as Ae,q as Le,T as Te,ac as _e,a6 as De,ad as ze,B as Pe,ae as $e}from"./index-Dge-MEAl.js";import{R as K}from"./ResourceCard-Bf06nQaY.js";import"./slick-theme-DqLTtZqT.js";const X=P(k),Z=({event:i,onBookmark:v,onCardClick:f})=>{const b=o("white","gray.800"),F=o("gray.800","whiteAlpha.900"),y=o("gray.600","gray.400"),I=o("gray.200","gray.700");if(!i||!i.data)return e.jsx(X,{p:5,borderWidth:"1px",borderRadius:"lg",borderColor:I,bg:b,textAlign:"center",children:e.jsx(n,{color:y,children:"This saved item is no longer available."})});const{title:l,event_datetime:C,location:h,organizer:U,attendees_count:p,image_path:B,is_club_event:j,club:g}=i.data,w=new Date(C)<new Date,E=new Date(C).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),G=new Date(C).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsxs(X,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",bg:b,borderColor:I,whileHover:{y:-5,boxShadow:"lg"},transition:{type:"spring",stiffness:300},cursor:"pointer",onClick:()=>f(i.data.id),children:[e.jsxs(k,{position:"relative",children:[e.jsx(ce,{src:`${J}/storage/${B}`,alt:l,objectFit:"cover",w:"100%",h:"200px"}),w&&e.jsx(le,{position:"absolute",top:2,left:2,colorScheme:"red",children:"Finished"}),e.jsx(d,{position:"absolute",top:2,right:2,spacing:2,children:e.jsx(de,{label:i.isSaved?"Unsave":"Save",placement:"top",children:e.jsx(ee,{icon:e.jsx(ae,{fill:i.isSaved?"currentColor":"none"}),onClick:H=>{H.stopPropagation(),v(i.data.id,"Event")},size:"sm",borderRadius:"full",bg:"rgba(0,0,0,0.6)",color:"white",_hover:{bg:"rgba(0,0,0,0.8)"},"aria-label":"Bookmark Event"})})})]}),e.jsxs(R,{p:4,align:"start",spacing:3,children:[e.jsx(O,{size:"md",color:F,noOfLines:2,children:l}),e.jsxs(R,{align:"start",spacing:2,color:y,children:[e.jsxs(d,{children:[e.jsx(x,{as:se}),e.jsx(n,{children:E})]}),e.jsxs(d,{children:[e.jsx(x,{as:Be}),e.jsx(n,{children:G})]}),e.jsxs(d,{children:[e.jsx(x,{as:Ee}),e.jsx(n,{children:h})]})]}),e.jsxs($,{justify:"space-between",align:"center",w:"100%",mt:3,children:[e.jsx(d,{children:j&&g?e.jsxs(e.Fragment,{children:[e.jsx(he,{size:"xs",name:g.name,src:`${J}/storage/${g.logo_path}`}),e.jsx(n,{fontSize:"sm",fontWeight:"bold",children:g.name})]}):e.jsxs(n,{fontSize:"sm",children:["Organized by: ",U]})}),e.jsxs(d,{spacing:1,align:"center",children:[e.jsx(x,{as:Ae}),e.jsx(n,{fontSize:"sm",children:p})]})]})]})]})},Ue=[{id:"all",name:"All Items",icon:ze,color:"gray.500"},{id:"Resource",name:"Resources",icon:Pe,color:"blue.500"},{id:"Event",name:"Events",icon:se,color:"purple.500"}],Qe=()=>{const i=ke(),[v,f]=c.useState([]),[b,F]=c.useState(!0),[y,I]=c.useState(null),[l,C]=c.useState(""),[h,U]=c.useState("all"),[p,B]=c.useState("grid"),[j,g]=c.useState(1),w=9,[E,G]=c.useState(null),H=o("gray.50","gray.900"),A=o("gray.800","whiteAlpha.900"),u=o("gray.600","gray.400"),L=o("gray.200","gray.700"),S=o("white","gray.800"),te=o("blue.50","blue.900"),re=o("gray.100","gray.700");c.useEffect(()=>{(async()=>{F(!0);try{const a=await $e();G(a);const m=(await Re()).data.map(r=>({...r,isSaved:!0,data:r.type==="Resource"?{...r.data,is_saved:!0}:r.data}));f(m)}catch(a){I("Failed to fetch saved items. Please try again later."),console.error(a)}finally{F(!1)}})()},[]);const T=async(s,a)=>{const t=[...v],m=v.filter(r=>{var Y;return((Y=r.data)==null?void 0:Y.id)!==s});f(m);try{a==="Resource"?await Fe(s):a==="Event"&&await Ie(s)}catch(r){console.error("Failed to update bookmark status:",r),f(t)}},_=(s,a)=>{a==="Resource"?i(`/resources/${s}`):a==="Event"&&i("/events")},D=v.filter(s=>{var m,r;if(!s.data)return h==="all"&&l==="";const a=((m=s.data.title)==null?void 0:m.toLowerCase().includes(l.toLowerCase()))||((r=s.data.description)==null?void 0:r.toLowerCase().includes(l.toLowerCase())),t=h==="all"||s.type===h;return a&&t}).sort((s,a)=>new Date(a.saved_at||0)-new Date(s.saved_at||0)),V=(j-1)*w,N=D.slice(V,V+w),M=Math.ceil(D.length/w),oe=()=>{window.history.back()},ne={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},Q={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},ie=()=>{if(b)return e.jsx(W,{w:"full",py:12,children:e.jsx(q,{templateColumns:{base:"1fr",md:"repeat(2,1fr)",lg:"repeat(3,1fr)"},gap:6,w:"full",children:[...Array(6)].map((a,t)=>e.jsxs(k,{borderWidth:"1px",borderRadius:"lg",p:4,bg:S,borderColor:L,children:[e.jsx(ve,{height:"150px",mb:4}),e.jsx(fe,{noOfLines:3,spacing:"4"})]},t))})});if(y)return e.jsx(W,{h:"300px",children:e.jsxs(be,{status:"error",borderRadius:"md",children:[e.jsx(ye,{}),e.jsx(Ce,{children:"An Error Occurred!"}),e.jsx(we,{children:y})]})});if(D.length===0)return e.jsx(W,{h:"300px",children:e.jsxs(R,{children:[e.jsx(x,{as:ae,boxSize:"50px",color:u}),e.jsx(O,{size:"md",color:A,children:"No Saved Items Found"}),e.jsx(n,{color:u,children:l||h!=="all"?"Try adjusting your search or filter.":"You haven't saved any items yet."})]})});const s={base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"};return e.jsx(Se,{mode:"wait",children:e.jsx(P.div,{variants:ne,initial:"hidden",animate:"show",children:p==="grid"?e.jsx(q,{templateColumns:s,gap:6,children:N.map(a=>{var t;return e.jsx(P.div,{variants:Q,children:a.type==="Resource"?e.jsx(K,{resource:a.data,onBookmark:()=>T(a.data.id,"Resource"),onCardClick:()=>_(a.data.id,"Resource"),currentUser:E,cardBg:S,textColor:A,mutedText:u,borderColor:L}):e.jsx(Z,{event:a,onBookmark:()=>T(a.data.id,"Event"),onCardClick:()=>_(a.data.id,"Event")})},`${a.type}-${((t=a.data)==null?void 0:t.id)||a.saved_at}`)})}):e.jsx(R,{spacing:4,align:"stretch",children:N.map(a=>{var t;return e.jsx(P.div,{variants:Q,children:a.type==="Resource"?e.jsx(K,{resource:a.data,onBookmark:()=>T(a.data.id,"Resource"),onCardClick:()=>_(a.data.id,"Resource"),currentUser:E,cardBg:S,textColor:A,mutedText:u,borderColor:L}):e.jsx(Z,{event:a,onBookmark:()=>T(a.data.id,"Event"),onCardClick:()=>_(a.data.id,"Event")})},`${a.type}-${((t=a.data)==null?void 0:t.id)||a.saved_at}`)})})},p)})};return e.jsxs(k,{bg:H,minH:"100vh",p:{base:4,md:8},children:[e.jsxs($,{mb:4,align:"center",children:[e.jsx(ee,{icon:e.jsx(Le,{}),"aria-label":"Go back",variant:"ghost",onClick:oe}),e.jsx(n,{ml:2,fontWeight:"medium",color:u,children:"Go Back"})]}),e.jsxs(R,{spacing:6,align:"stretch",children:[e.jsxs($,{direction:{base:"column",md:"row"},justify:"space-between",align:{base:"flex-start",md:"center"},gap:4,children:[e.jsxs(k,{children:[e.jsx(O,{size:"lg",color:A,children:"My Saved Items"}),e.jsx(n,{color:u,children:b?"Loading...":`${D.length} items found`})]}),e.jsxs($,{gap:2,direction:{base:"column",sm:"row"},w:{base:"100%",md:"auto"},children:[e.jsxs(ge,{w:{base:"100%",sm:"250px"},children:[e.jsx(ue,{pointerEvents:"none",children:e.jsx(x,{as:Te,color:u})}),e.jsx(xe,{placeholder:"Search saved items...",value:l,onChange:s=>C(s.target.value),bg:S})]}),e.jsxs(d,{spacing:1,bg:S,borderRadius:"md",p:1,borderWidth:"1px",borderColor:L,children:[e.jsx(z,{size:"sm",variant:p==="grid"?"solid":"ghost",onClick:()=>B("grid"),leftIcon:e.jsx(_e,{}),children:"Grid"}),e.jsx(z,{size:"sm",variant:p==="list"?"solid":"ghost",onClick:()=>B("list"),leftIcon:e.jsx(De,{}),children:"List"})]})]})]}),e.jsx(pe,{variant:"soft-rounded",colorScheme:"blue",children:e.jsx(je,{overflowX:"auto",py:2,children:Ue.map(s=>e.jsxs(me,{onClick:()=>U(s.id),bg:h===s.id?te:"transparent",_hover:{bg:re},children:[e.jsx(x,{as:s.icon,mr:2,color:s.color}),s.name]},s.id))})}),e.jsxs(e.Fragment,{children:[ie(),M>1&&e.jsxs(d,{justify:"center",spacing:4,mt:4,children:[e.jsx(z,{onClick:()=>g(s=>s-1),isDisabled:j===1,children:"Previous"}),e.jsxs(n,{children:["Page ",j," of ",M]}),e.jsx(z,{onClick:()=>g(s=>s+1),isDisabled:j===M,children:"Next"})]})]})]})]})};export{Qe as default};
