import{j as t,a6 as R,d as r,U as Me,h as Fe,u as C,aw as Re,F as D,A as me,B as f,a2 as se,ap as Ie,M as oe,e as ne,m as B,f as ae,g as le,ax as Te,K as Pe,au as re,O as fe,V as U,aK as Be,H,I as de,a8 as Ue,aF as Ee,x as Le,aG as Ve,ak as He,E as We,al as qe,c as ce,a7 as Ne,n as Oe}from"./chakra-BFMGxYLr.js";import{a as c,u as Ye}from"./react-6s1XWRBU.js";import{af as Je,p as Ge,ag as Ke,ah as Qe,a8 as Xe,a3 as he,B as Ze,a1 as et,ai as tt,a9 as it,o as st,O as ot,A as xe}from"./index-Dge-MEAl.js";import{votePollOption as nt,deleteResource as at}from"./resourceService-BPsVWu4e.js";import{S as lt}from"./slick-theme-DqLTtZqT.js";const pe={whatsapp:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32px" height="32px"><path fill="#fff" d="M4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98c-0.001,0,0,0,0,0h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303z"/><path fill="#fff" d="M4.868,43.803c-0.132,0-0.26-0.052-0.355-0.148c-0.125-0.127-0.174-0.312-0.127-0.483l2.639-9.636c-1.636-2.906-2.499-6.206-2.497-9.556C4.532,13.238,13.273,4.5,24.014,4.5c5.21,0.002,10.105,2.031,13.784,5.713c3.679,3.683,5.704,8.577,5.702,13.781c-0.004,10.741-8.746,19.48-19.486,19.48c-3.189-0.001-6.344-0.788-9.144-2.277l-9.875,2.589C4.953,43.798,4.911,43.803,4.868,43.803z"/><path fill="#cfd8dc" d="M24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,4C24.014,4,24.014,4,24.014,4C12.998,4,4.032,12.962,4.027,23.979c-0.001,3.367,0.849,6.685,2.461,9.622l-2.585,9.439c-0.094,0.345,0.002,0.713,0.254,0.967c0.19,0.192,0.447,0.297,0.711,0.297c0.085,0,0.17-0.011,0.254-0.033l9.687-2.54c2.828,1.468,5.998,2.243,9.197,2.244c11.024,0,19.99-8.963,19.995-19.98c0.002-5.339-2.075-10.359-5.848-14.135C34.378,6.083,29.357,4.002,24.014,4L24.014,4z"/><path fill="#40c351" d="M35.176,12.832c-2.98-2.982-6.941-4.625-11.157-4.626c-8.704,0-15.783,7.076-15.787,15.774c-0.001,2.981,0.833,5.883,2.413,8.396l0.376,0.597l-1.595,5.821l5.973-1.566l0.577,0.342c2.422,1.438,5.2,2.198,8.032,2.199h0.006c8.698,0,15.777-7.077,15.78-15.776C39.795,19.778,38.156,15.814,35.176,12.832z"/><path fill="#fff" fill-rule="evenodd" d="M19.268,16.045c-0.355-0.79-0.729-0.806-1.068-0.82c-0.277-0.012-0.593-0.011-0.909-0.011c-0.316,0-0.83,0.119-1.265,0.594c-0.435,0.475-1.661,1.622-1.661,3.956c0,2.334,1.7,4.59,1.937,4.906c0.237,0.316,3.282,5.259,8.104,7.161c4.007,1.58,4.823,1.266,5.693,1.187c0.87-0.079,2.807-1.147,3.202-2.255c0.395-1.108,0.395-2.057,0.277-2.255c-0.119-0.198-0.435-0.316-0.909-0.554s-2.807-1.385-3.242-1.543c-0.435-0.158-0.751-0.237-1.068,0.238c-0.316,0.474-1.225,1.543-1.502,1.859c-0.277,0.317-0.554,0.357-1.028,0.119c-0.474-0.238-2.002-0.738-3.815-2.354c-1.41-1.257-2.362-2.81-2.639-3.285c-0.277-0.474-0.03-0.731,0.208-0.968c0.213-0.213,0.474-0.554,0.712-0.831c0.237-0.277,0.316-0.475,0.474-0.791c0.158-0.317,0.079-0.594-0.04-0.831C20.612,19.329,19.69,16.983,19.268,16.045z" clip-rule="evenodd"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32px" height="32px"><path fill="#90CAF9" d="M40 45H16c-1.1 0-2-.9-2-2V13c0-1.1.9-2 2-2h24c1.1 0 2 .9 2 2v30c0 1.1-.9 2-2 2z"/><path fill="#E1F5FE" d="M38 17H18v24h20V17z"/><path fill="#1976D2" d="M25 13h-9V5c0-1.1.9-2 2-2h24c1.1 0 2 .9 2 2v30c0 1.1-.9 2-2 2h-8v-9c0-2.2-1.8-4-4-4h-5v-5c0-2.2-1.8-4-4-4z"/><path fill="#E1F5FE" d="M34 9H20v4h14V9zm0 7H20v14h14V16z"/></svg>'},ue=R(Ne);R(f);R(D);R(r);R(fe);R(Oe);R(me);const rt=e=>{const g=[],m=[],h=[],S=[];if(e.attachments&&Array.isArray(e.attachments)&&e.attachments.forEach(s=>{const p=s.url?`${ot}${s.url}`:`${xe}/storage/${s.file_path}`;switch(s.file_type){case"image":m.push({id:s.id,url:p,mediaType:"image",original_name:s.original_name||"Image"});break;case"video":g.push({id:s.id,url:p,mediaType:"video",original_name:s.original_name||"Video"});break;default:h.push({id:s.id,url:p,name:s.original_name||"Document",size:s.size||0,mediaType:"document",mime_type:s.mime_type})}}),e.videos&&Array.isArray(e.videos)?g.push(...e.videos.map(s=>({...s,mediaType:"video"}))):e.media&&e.mediaType==="video"&&g.push({id:"main-video",url:e.media,mediaType:"video"}),e.images&&Array.isArray(e.images))m.push(...e.images.map(s=>({...s,mediaType:"image"})));else if(e.imageUrl||e.media&&e.mediaType!=="video"){const s=e.imageUrl||e.media;s&&!m.some(p=>p.url===s)&&m.push({id:"main-image",url:s,mediaType:"image"})}if(e.documents&&Array.isArray(e.documents)?h.push(...e.documents.map(s=>({...s,mediaType:"document"}))):e.file&&h.push({id:"main-doc",url:e.file,name:e.original_name||"Document",size:e.fileSize||0,mediaType:"document"}),e.polls){const s=Array.isArray(e.polls)?e.polls:[e.polls];S.push(...s.map(p=>({id:p.id,question:p.question,options:(p.options||[]).map(x=>{var $,l,k,u;return{id:x.id,text:(l=($=x.option_text)!=null?$:x.text)!=null?l:"",votes:(u=(k=x.vote_count)!=null?k:x.votes)!=null?u:0}}),mediaType:"poll"})))}else e.hasPoll&&S.push({id:"main-poll",question:e.pollQuestion||"Poll",options:(e.pollOptions||[]).map((s,p)=>{var x,$,l,k,u;return{id:(x=s.id)!=null?x:p,text:(l=($=s.option_text)!=null?$:s.text)!=null?l:String(s),votes:(u=(k=s.vote_count)!=null?k:s.votes)!=null?u:0}}),mediaType:"poll"});return{videos:g,images:m,documents:h,polls:S,all:[...g,...m,...h,...S]}},ge=async(e,g,m)=>{try{console.log("Download request for:",{url:e,fileName:g,fileType:m});const h=e.split("/"),S=h[h.length-1];let s=m;s||(e.includes("/images/")||e.includes("image")?s="images":e.includes("/videos/")||e.includes("video")?s="videos":s="documents");const p=`${xe}/resources/download/${s}/${S}`,x=localStorage.getItem("authToken"),$={};x&&($.Authorization=`Bearer ${x}`),console.log("Making download request to:",p);const l=await fetch(p,{headers:$});if(!l.ok){const W=await l.json().catch(()=>({message:"Download failed"}));throw new Error(W.message||`Download failed with status: ${l.status}`)}const k=await l.blob(),u=window.URL.createObjectURL(k),M=document.createElement("a");M.href=u,M.download=g||S||"download",M.style.display="none",document.body.appendChild(M),M.click(),setTimeout(()=>{document.body.removeChild(M),window.URL.revokeObjectURL(u)},100)}catch(h){console.error("Download failed:",h)}},dt=e=>{const{className:g,style:m,onClick:h}=e;return t.jsx(f,{className:g,style:{...m,left:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:h})},ct=e=>{const{className:g,style:m,onClick:h}=e;return t.jsx(f,{className:g,style:{...m,right:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:h})},zt=c.memo(({resource:e,onCardClick:g,onBookmark:m,onUpvote:h,onEdit:S,onDelete:s,currentUser:p,cardBg:x,textColor:$,mutedText:l,borderColor:k})=>{var K,Q,X,Z;if(!e)return t.jsx(ue,{p:5,borderWidth:"1px",borderRadius:"lg",borderColor:k,bg:x,textAlign:"center",h:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:t.jsx(r,{color:l,children:"This saved resource is no longer available."})});const u=Me(),[M,W]=c.useState(0),[ht,pt]=c.useState(!1),[ut,gt]=c.useState(e.is_upvoted||!1),[mt,ft]=c.useState(e.upvote_count||0),[ye,q]=c.useState(!1),[ve,L]=c.useState({}),[be,V]=c.useState({}),[je,E]=c.useState(!1),[N,O]=c.useState([]),Y=i=>{var n;return{id:i.id,question:i.question,options:(i.options||[]).map(o=>{var a,v,b,_,z;return{id:o.id,text:(v=(a=o.option_text)!=null?a:o.text)!=null?v:"",votes:(_=(b=o.vote_count)!=null?b:o.votes)!=null?_:0,is_selected:(z=o.is_selected)!=null?z:!1}}),user_option_id:(n=i.user_option_id)!=null?n:null}};c.useEffect(()=>{if(!e)return;let i=[];Array.isArray(e.polls)?i=e.polls.map(Y):e.polls&&(i=[Y(e.polls)]),O(i);const n={},o={};i.forEach(a=>{var b;const v=a.user_option_id||((b=a.options.find(_=>_.is_selected))==null?void 0:b.id);v&&(n[a.id]=v,o[a.id]=!0)}),L(n),V(o)},[e]);const[we,Ce]=c.useState(!1),J=Ye();c.useEffect(()=>{const i=Je(),n=i&&e.user&&i.id&&String(i.id)===String(e.user.id),o=i&&["admin","moderator"].includes(i.primary_role||i.role);Ce(n||o)},[e]);const[xt,Se]=c.useState(null),G=c.useRef(),[yt,vt]=c.useState(!1);Fe();const _e=async()=>{var i,n;if(e.id){q(!0);try{await at(e.id),E(!1),u({title:"Resource deleted",description:"The resource has been successfully deleted.",status:"success",duration:3e3,isClosable:!0}),s&&s(e.id)}catch(o){console.error("Error deleting resource:",o),u({title:"Delete failed",description:((n=(i=o.response)==null?void 0:i.data)==null?void 0:n.message)||"Failed to delete the resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}finally{q(!1)}}},{videos:I,images:T,documents:P,polls:ze,all:bt}=c.useMemo(()=>rt(e),[e]),$e={dots:!0,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:I.length+T.length>1,prevArrow:I.length+T.length>1?t.jsx(dt,{}):null,nextArrow:I.length+T.length>1?t.jsx(ct,{}):null},ke=I.length+T.length+P.length+ze.length,Ae=i=>!i||isNaN(i)?"":i<1024?i+" B":i<1048576?(i/1024).toFixed(1)+" KB":(i/1048576).toFixed(1)+" MB",De=i=>{if(!i)return"Just now";const n=new Date,o=new Date(i);if(isNaN(o.getTime()))return"Just now";const a=Math.floor((n-o)/1e3),v=Math.floor(a/60),b=Math.floor(v/60),_=Math.floor(b/24),z=o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(a<60)return"Just now";if(v<60)return`${v} ${v===1?"minute":"minutes"} ago`;if(b<24)return`${b} ${b===1?"hour":"hours"} ago`;if(_===1)return`Yesterday at ${z}`;if(_<7)return`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][o.getDay()]} at ${z}`;const j=n.getFullYear(),w=o.getFullYear();return j===w?`${["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()]} ${o.getDate()} at ${z}`:`${o.toLocaleDateString([],{month:"long",day:"numeric",year:"numeric"})} at ${z}`};return t.jsxs(ue,{bg:C("white","gray.800"),borderRadius:"2xl",borderWidth:"1px",borderColor:C("rgba(226, 232, 240, 0.8)","gray.700"),overflow:"hidden",width:"100%",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.05)",_hover:{boxShadow:"0px 8px 24px rgba(0, 0, 0, 0.08)",transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsx(Re,{p:4,pb:0,children:t.jsxs(D,{align:"center",justify:"space-between",children:[t.jsxs(D,{align:"center",gap:3,children:[t.jsx(me,{size:"md",src:(K=e.user)==null?void 0:K.avatar_url,name:e.user?`${e.user.first_name} ${e.user.last_name}`:"Anonymous",cursor:"pointer",onClick:i=>{i.stopPropagation(),e.user&&e.user.id&&J(`/user/${e.user.id}`)}}),t.jsxs(f,{children:[t.jsxs(D,{align:"center",gap:2,mb:1,children:[t.jsx(r,{fontWeight:"bold",fontSize:"md",cursor:"pointer",onClick:i=>{i.stopPropagation(),e.user&&e.user.id&&J(`/user/${e.user.id}`)},children:e.user?e.user.id===p.id?"You":`${e.user.first_name} ${e.user.last_name}`:"Anonymous"}),(((Q=e.user)==null?void 0:Q.primary_role)==="admin"||((X=e.user)==null?void 0:X.primary_role)==="moderator")&&t.jsx(se,{size:"16px",bg:"blue.500",color:"white",children:t.jsx(Ge,{size:"10px"})})]}),t.jsxs(D,{align:"center",gap:2,fontSize:"sm",color:l,children:[t.jsx(r,{children:De(e.created_at||e.dateAdded)}),((Z=e.course)==null?void 0:Z.code)&&t.jsx(Ie,{size:"sm",colorScheme:"blue",variant:"subtle",borderRadius:"full",children:e.course.code})]})]})]}),we&&t.jsxs(oe,{placement:"bottom-end",onClick:i=>i.stopPropagation(),children:[t.jsx(ne,{as:B,icon:t.jsx(Ke,{}),variant:"ghost",size:"sm",borderRadius:"full"}),t.jsxs(ae,{shadow:"lg",borderRadius:"xl",children:[t.jsx(le,{icon:t.jsx(Qe,{}),onClick:i=>{if(i.stopPropagation(),console.log("Editing resource with attachments:",e.attachments),Se({title:e.title,description:e.description,attachments:e.attachments||[]}),S){const n={...e,attachments:e.attachments||[]};S(n)}},children:"Edit resource"}),t.jsx(le,{icon:t.jsx(Xe,{}),onClick:i=>{i.stopPropagation(),E(!0)},children:"Delete resource"})]})]})]})}),t.jsxs(Te,{p:4,pt:3,children:[t.jsxs(f,{mb:3,lineHeight:"1.5",children:[t.jsx(Pe,{as:"h3",fontSize:"lg",fontWeight:"semibold",mb:2,color:C("blue.700","blue.300"),cursor:"pointer",onClick:()=>g(e.id),_hover:{textDecoration:"underline"},children:e.title}),t.jsx(r,{fontSize:"md",cursor:"pointer",onClick:()=>g(e.id),children:e.description})]}),ke>0&&t.jsxs(f,{mb:4,borderRadius:"xl",overflow:"hidden",children:[(I.length>0||T.length>0)&&t.jsx(f,{mb:3,children:t.jsx(lt,{...$e,style:{position:"relative",zIndex:0},children:[...I,...T].map((i,n)=>t.jsxs(f,{position:"relative",children:[i.mediaType==="video"?t.jsx(re,{ratio:16/9,children:t.jsx("video",{src:i.url,controls:!0,style:{width:"100%",height:"100%",objectFit:"cover"}})}):t.jsx(re,{ratio:16/9,children:t.jsx(fe,{src:i.url,alt:i.original_name||`Image ${n+1}`,objectFit:"cover"})}),t.jsx(B,{icon:t.jsx(he,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"whiteAlpha.900"},onClick:o=>{o.stopPropagation();const a=i.name||(i.mediaType==="video"?`Video-${e.id}-${n}`:`Image-${e.id}-${n}`);ge(i.url,a),u({title:`Downloading ${i.mediaType}`,description:`${a} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":`Download ${i.mediaType}`})]},i.id||n))})}),P.length>0&&t.jsxs(U,{spacing:2,mb:3,align:"stretch",children:[P.slice(0,2).map((i,n)=>t.jsxs(D,{p:3,bg:C("gray.50","gray.700"),borderRadius:"lg",align:"center",cursor:"pointer",_hover:{bg:C("gray.100","gray.600")},children:[t.jsx(se,{size:"40px",bg:"blue.100",color:"blue.600",mr:3,children:t.jsx(Ze,{size:20})}),t.jsxs(f,{flex:"1",children:[t.jsx(r,{fontWeight:"medium",fontSize:"sm",children:i.name||`Document ${n+1}`}),t.jsx(r,{fontSize:"xs",color:l,children:Ae(i.size)})]}),t.jsx(B,{icon:t.jsx(he,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:o=>{o.stopPropagation();const a=i.name||`Document-${n+1}`;ge(i.url,a,"documents"),u({title:"Downloading file",description:`${a} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":"Download file"})]},i.id||`doc-${n}`)),P.length>2&&t.jsxs(r,{fontSize:"sm",color:l,textAlign:"center",children:["+",P.length-2," more"]})]}),N.length>0&&t.jsx(f,{children:N.slice(0,1).map((i,n)=>{var _,z;const o=i.id||`poll-${n}`,a=((_=i.options)==null?void 0:_.reduce((j,w)=>j+(w.votes||0),0))||0;be[o];const v=ve[o],b=async j=>{try{const{message:w,poll:y}=await nt(j),F={id:y.id,question:y.question,options:(y.options||[]).map(d=>{var A,ee,te,ie;return{id:d.id,text:(ee=(A=d.option_text)!=null?A:d.text)!=null?ee:"",votes:(ie=(te=d.vote_count)!=null?te:d.votes)!=null?ie:0}})};O(d=>d.map(A=>A.id===F.id?F:A)),w.startsWith("Vote removed")?(L(d=>({...d,[y.id]:null})),V(d=>({...d,[y.id]:!1}))):(L(d=>({...d,[y.id]:j})),V(d=>({...d,[y.id]:!0}))),u({title:w,status:"success",duration:2e3,isClosable:!0})}catch(w){console.error("Vote error",w),u({title:"Failed to record vote",description:w.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}};return t.jsxs(f,{bg:C("gray.50","gray.700"),p:4,borderRadius:"xl",onClick:j=>j.stopPropagation(),children:[t.jsx(r,{fontWeight:"semibold",mb:3,children:i.question}),t.jsx(U,{spacing:2,align:"stretch",children:(z=i.options)==null?void 0:z.map((j,w)=>{const y=j.id||`option-${w}`,F=v===y,d=j.votes||0,A=a>0?Math.round(d/a*100):0;return t.jsxs(f,{position:"relative",p:3,borderRadius:"lg",cursor:"pointer",onClick:()=>b(y),bg:C("white","gray.800"),border:"2px solid",borderColor:F?"blue.400":"transparent",_hover:{borderColor:F?"blue.500":C("gray.200","gray.600")},children:[t.jsx(f,{position:"absolute",left:0,top:0,bottom:0,width:`${A}%`,bg:F?"blue.100":C("gray.100","gray.700"),opacity:.3,borderRadius:"lg"}),t.jsxs(D,{justify:"space-between",align:"center",position:"relative",children:[t.jsx(r,{children:j.text}),t.jsxs(r,{fontWeight:"bold",color:F?"blue.500":l,children:[A,"%"]})]})]},y)})}),t.jsxs(r,{fontSize:"sm",color:l,mt:2,textAlign:"center",children:[a," ",a===1?"vote":"votes"]})]},o)})})]})]}),t.jsx(Be,{p:4,pt:0,children:t.jsxs(U,{width:"100%",spacing:2,align:"stretch",children:[t.jsxs(D,{justify:"space-between",align:"center",width:"100%",children:[t.jsxs(H,{spacing:4,children:[t.jsxs(H,{spacing:1.5,align:"center",children:[t.jsx(de,{as:et,boxSize:5,color:e.is_upvoted?"red.500":"inherit",fill:e.is_upvoted?"currentColor":"none",cursor:"pointer",onClick:i=>{i.stopPropagation(),h(e.id)}}),t.jsx(r,{fontSize:"sm",fontWeight:"medium",children:e.upvote_count||0})]}),t.jsxs(H,{spacing:1.5,align:"center",children:[t.jsx(de,{as:tt,boxSize:5}),t.jsx(r,{fontSize:"sm",fontWeight:"medium",children:e.comment_count||0})]}),t.jsxs(oe,{placement:"top",isLazy:!0,children:[t.jsx(ne,{as:B,icon:t.jsx(it,{}),variant:"ghost",size:"sm",p:0,minW:"auto","aria-label":"Share options",onClick:i=>i.stopPropagation()}),t.jsxs(ae,{shadow:"lg",borderRadius:"xl",p:4,children:[t.jsx(r,{fontWeight:"semibold",mb:3,children:"Share this post"}),t.jsxs(Ue,{columns:2,spacing:3,children:[t.jsxs(U,{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/resources/${e.id}`),u({title:"Link copied!",status:"success",duration:2e3})},cursor:"pointer",p:2,borderRadius:"lg",_hover:{bg:C("gray.100","gray.700")},children:[t.jsx(f,{dangerouslySetInnerHTML:{__html:pe.copy}}),t.jsx(r,{fontSize:"xs",children:"Copy Link"})]}),t.jsxs(U,{onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(`Check out: ${e.title} ${window.location.origin}/resources/${e.id}`)}`,"_blank"),cursor:"pointer",p:2,borderRadius:"lg",_hover:{bg:C("gray.100","gray.700")},children:[t.jsx(f,{dangerouslySetInnerHTML:{__html:pe.whatsapp}}),t.jsx(r,{fontSize:"xs",children:"WhatsApp"})]})]})]})]})]}),t.jsx(B,{icon:t.jsx(st,{fill:e.is_saved?"currentColor":"none"}),variant:"ghost",size:"lg",p:0,minW:"auto",color:e.is_saved?"blue.500":l,onClick:i=>{i.stopPropagation(),m(e.id,e.title)},"aria-label":"Bookmark"})]}),t.jsx(Ee,{isOpen:je,leastDestructiveRef:G,onClose:()=>E(!1),children:t.jsx(Le,{children:t.jsxs(Ve,{children:[t.jsx(He,{fontSize:"lg",fontWeight:"bold",children:"Delete Resource"}),t.jsx(We,{children:"Are you sure you want to delete this resource? This action cannot be undone."}),t.jsxs(qe,{children:[t.jsx(ce,{ref:G,onClick:()=>E(!1),children:"Cancel"}),t.jsx(ce,{colorScheme:"red",onClick:_e,ml:3,isLoading:ye,loadingText:"Deleting",children:"Delete"})]})]})})}),e.viewCount&&t.jsxs(r,{fontSize:"sm",color:l,children:[e.viewCount," views"]})]})})]})});export{zt as R};
