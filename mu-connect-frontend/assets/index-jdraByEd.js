const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CXh8elN4.js","assets/react-DDk2FCmG.js","assets/chakra-BAryzRmN.js","assets/index-LdKjFKPb.js"])))=>i.map(i=>d[i]);
import{j as e,V as et,H as ut,T as V,B as de,C as bi,G as pr,F as ke,I as Cr,a as ct,k as lp,S as yr,b as Ee,A as Tr,c as Rr,d as Pt,u as Ir,e as bn,f as en,g as ht,h as ft,i as Wr,L as jc,l as zm,P as tl,m as ws,n as Li,o as Sc,D as tn,p as eo,q as to,r as Mn,s as se,t as hr,v as er,w as at,x as si,y as gi,z as ia,E as Er,M as cn,J as kr,K as dn,N as Fr,O as rn,Q as Ar,R as Qn,U as Zl,W as Ur,X as Mt,Y as yn,Z as vn,_ as wn,$ as rr,a0 as sa,a1 as oa,a2 as Yn,a3 as al,a4 as oi,a5 as Sr,a6 as ln,a7 as Lr,a8 as Cc,a9 as Fm,aa as Im,ab as Eh,ac as zo,ad as Mm,ae as Fo,af as Dm,ag as ao,ah as Vn,ai as _s,aj as aa,ak as la,al as ca,am as Bm,an as ec,ao as tc,ap as qd,aq as qm,ar as Yo,as as Th,at as Uo,au as wu,av as Wm,aw as Um,ax as Hm,ay as $m,az as Gm,aA as _c,aB as rc,aC as Vm,aD as Ym,aE as Jm,aF as Xm,aG as Km,aH as Qm,aI as Zm,aJ as eg,aK as tg,aL as rg,aM as cp,aN as ng,aO as ig,aP as Wd,aQ as Ud,aR as _r,aS as sg,aT as og,aU as ag,aV as lg,aW as cg}from"./chakra-BAryzRmN.js";import{e as dg,b as Wi,u as Vr,a as W,N as kc,L as Hi,f as ll,h as Dc,c as nc,r as lo,i as ug,g as hg,O as dp,j as fg,k as qr,B as pg}from"./react-DDk2FCmG.js";import{C as mg,a as gg,L as xg,B as bg,p as yg,b as vg,c as wg,A as jg,D as Sg,d as ic}from"./charts-BQajcoWg.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var sc={},zh;function Cg(){if(zh)return sc;zh=1;var t=dg();return sc.createRoot=t.createRoot,sc.hydrateRoot=t.hydrateRoot,sc}var _g=Cg(),up={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Fh=Wi.createContext&&Wi.createContext(up),kg=["attr","size","title"];function Ag(t,r){if(t==null)return{};var n=Lg(t,r),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)i=s[o],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Lg(t,r){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(r.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Ac(){return Ac=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ac.apply(this,arguments)}function Ih(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function Lc(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ih(Object(n),!0).forEach(function(i){Pg(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ih(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Pg(t,r,n){return r=Ng(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Ng(t){var r=Og(t,"string");return typeof r=="symbol"?r:r+""}function Og(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function hp(t){return t&&t.map((r,n)=>Wi.createElement(r.tag,Lc({key:n},r.attr),hp(r.child)))}function wt(t){return r=>Wi.createElement(Rg,Ac({attr:Lc({},t.attr)},r),hp(t.child))}function Rg(t){var r=n=>{var{attr:i,size:o,title:s}=t,a=Ag(t,kg),c=o||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Wi.createElement("svg",Ac({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:u,style:Lc(Lc({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&Wi.createElement("title",null,s),t.children)};return Fh!==void 0?Wi.createElement(Fh.Consumer,null,n=>r(n)):r(up)}function Eg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function $u(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function Bn(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function Jo(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function Xo(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function Ko(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function Ls(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(t)}function Bc(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(t)}function $i(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(t)}function fp(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(t)}function kn(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function Pi(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function is(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function ss(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function co(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function Tg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function Ps(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function zg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"7.5 4.21 12 6.81 16.5 4.21"},child:[]},{tag:"polyline",attr:{points:"7.5 19.79 7.5 14.6 3 12"},child:[]},{tag:"polyline",attr:{points:"21 12 16.5 14.6 16.5 19.79"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function Ai(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function Fg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function Ig(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function ro(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function Mg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(t)}function Dg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function Bg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function qg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"},child:[]}]})(t)}function Dn(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function Wg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"},child:[]},{tag:"polyline",attr:{points:"13 2 13 9 20 9"},child:[]}]})(t)}function qc(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function ju(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"},child:[]},{tag:"line",attr:{x1:"4",y1:"22",x2:"4",y2:"15"},child:[]}]})(t)}function pp(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Ug(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function Hg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function rl(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(t)}function $g(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 16 12 14 15 10 15 8 12 2 12"},child:[]},{tag:"path",attr:{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"},child:[]}]})(t)}function Gg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function Vg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"},child:[]},{tag:"path",attr:{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"},child:[]},{tag:"line",attr:{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"},child:[]}]})(t)}function mp(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function Su(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function Yg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function Gu(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function Go(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function Jg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function Xg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(t)}function Cu(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Kg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(t)}function gp(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(t)}function Wc(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(t)}function Qg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"},child:[]}]})(t)}function Zg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(t)}function Jn(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function e1(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 6 2 18 2 18 9"},child:[]},{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"},child:[]},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8"},child:[]}]})(t)}function t1(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function no(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function xp(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function r1(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function da(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"},child:[]}]})(t)}function n1(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(t)}function Vu(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(t)}function i1(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(t)}function _u(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},child:[]}]})(t)}function cl(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function dl(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]}]})(t)}function Pc(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function s1(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"},child:[]}]})(t)}function Yu(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(t)}function o1(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(t)}function Mh(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function Qo(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function qn(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function Ju(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(t)}function io(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const Hd=({title:t,items:r})=>e.jsxs(et,{align:["center","start"],spacing:3,children:[e.jsx(ut,{size:"sm",mb:2,children:t}),r.map(n=>e.jsx(V,{fontSize:"sm",_hover:{color:"blue.300"},children:n},n))]}),xi="/assets/maaref-logo-CWYUoBqw.png",a1=()=>e.jsx(de,{bg:"blue.900",color:"white",py:[8,12],children:e.jsxs(bi,{maxW:"container.lg",children:[e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(4, 1fr)"},gap:[8,8],pb:[4,8],textAlign:["center","left"],children:[e.jsxs(et,{align:["center","start"],spacing:4,children:[e.jsxs(ke,{align:"center",gap:2,direction:["column","row"],children:[e.jsx(Cr,{src:xi,boxSize:"40px"}),e.jsx(ut,{size:"md",children:"MU Connect"})]}),e.jsx(V,{opacity:.9,fontSize:"sm",children:"Connecting every learner at Maaraf University"}),e.jsxs(ke,{gap:4,mt:4,children:[e.jsx(ct,{as:s1,boxSize:5}),e.jsx(ct,{as:qg,boxSize:5}),e.jsx(ct,{as:Vg,boxSize:5})]})]}),e.jsx(Hd,{title:"Product",items:["Overview","Features","Pricing","Roadmap"]}),e.jsx(Hd,{title:"Support",items:["Help Center","Contact Us","Status","Feedback"]}),e.jsx(Hd,{title:"Legal",items:["Terms","Privacy","Cookies","Accessibility"]})]}),e.jsx(V,{textAlign:"center",pt:[4,8],borderTop:"1px",borderColor:"blue.700",opacity:.8,fontSize:"sm",children:"© 2025 MU Connect"})]})});lp`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
  100% { transform: translateY(0px); }
`;const l1=()=>{const t=Vr();return e.jsx(bi,{maxW:"container.xl",centerContent:!0,py:[12,20],children:e.jsxs(yr,{direction:{base:"column",md:"row"},spacing:[8,10],align:"center",children:[e.jsxs(et,{align:["center","start"],spacing:6,maxW:"2xl",textAlign:["center","left"],children:[e.jsxs(ut,{color:"blue.900",size:["2xl","3xl"],lineHeight:"1.1",fontWeight:"extrabold",px:[2,0],children:["Empower Your Learning Journey with"," ",e.jsx(de,{as:"span",bgGradient:"linear(to-r, blue.500, teal.500)",bgClip:"text",children:"MU Connect"})]}),e.jsx(V,{fontSize:["md","xl"],color:"gray.600",lineHeight:"1.7",children:"Centralize your courses, collaborate with peers, and stay on top of every deadline — all at Maaraf University."}),e.jsxs(ke,{gap:4,align:"center",direction:["column","row"],w:"full",justify:["center","start"],children:[e.jsx(Ee,{size:["md","lg"],colorScheme:"blue",px:[6,10],rightIcon:e.jsx(co,{}),w:["full","auto"],onClick:()=>t("/register"),children:"Sign Up"}),e.jsx(Ee,{size:["md","lg"],variant:"outline",colorScheme:"blue",px:[6,10],w:["full","auto"],onClick:()=>t("/login"),children:"Login"})]})]}),e.jsx(Cr,{src:xi,boxSize:{base:"250px",sm:"300px",md:"600px"},alt:"Collaboration illustration"})]})})};function c1(t){return wt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"},child:[]}]})(t)}const Io=({icon:t,title:r,description:n,color:i="blue"})=>e.jsxs(et,{bg:"white",p:[4,8],borderRadius:"2xl",boxShadow:"xl",align:"start",spacing:4,transition:"all 0.3s",_hover:{transform:"translateY(-8px)"},position:"relative",overflow:"hidden",textAlign:["center","left"],children:[e.jsx(de,{position:"absolute",top:"-20px",right:"-20px",w:"100px",h:"100px",bg:`${i}.100`,borderRadius:"full"}),e.jsx(ct,{as:t,boxSize:[6,8],color:`${i}.600`,mx:["auto","0"]}),e.jsx(ut,{size:["md","lg"],color:"blue.900",textAlign:["center","left"],children:r}),e.jsx(V,{color:"gray.600",lineHeight:"1.7",fontSize:["sm","md"],children:n})]}),d1=()=>e.jsx(de,{py:[12,20],bg:"white",children:e.jsxs(bi,{maxW:"container.lg",children:[e.jsxs(et,{spacing:3,mb:[8,12],children:[e.jsx(V,{color:"blue.500",fontWeight:"bold",fontSize:["sm","md"],children:"CORE FEATURES"}),e.jsx(ut,{textAlign:"center",size:["xl","2xl"],color:"blue.900",maxW:"2xl",children:"Everything You Need for Academic Success"})]}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(3, 1fr)"},gap:[4,8],children:[e.jsx(Io,{icon:qn,title:"Peer Collaboration",description:"Group discussions, file sharing, and real-time whiteboard sessions",color:"blue"}),e.jsx(Io,{icon:Ls,title:"Course Resources",description:"Organized lecture notes, past exams, and curated study guides",color:"teal"}),e.jsx(Io,{icon:Ko,title:"Section Requests",description:"Post your desired section swap and get matched with classmates instantly",color:"purple"}),e.jsx(Io,{icon:c1,title:"Grade Calculator",description:"Estimate required scores and track your progress",color:"orange"}),e.jsx(Io,{icon:kn,title:"Events & Deadlines",description:"Stay updated with courses and campus activities",color:"green"}),e.jsx(Io,{icon:Zg,title:"Degree Planner",description:"Visualize requirements and plan your academic journey",color:"red"})]})]})}),Dh=({name:t,role:r,text:n,avatar:i,rating:o})=>e.jsxs(et,{bg:"white",p:[4,8],borderRadius:"2xl",align:"start",spacing:4,boxShadow:"xl",textAlign:["center","left"],children:[e.jsx(ke,{gap:1,justify:["center","start"],children:[...Array(o)].map((s,a)=>e.jsx(ct,{as:Vu,color:"yellow.400",boxSize:5},a))}),e.jsxs(V,{color:"gray.600",fontSize:["md","lg"],lineHeight:"1.7",children:['"',n,'"']}),e.jsxs(ke,{align:"center",gap:4,direction:["column","row"],w:"full",children:[e.jsx(Tr,{src:i,size:["md","lg"]}),e.jsxs(de,{textAlign:["center","left"],children:[e.jsx(V,{fontWeight:"bold",color:"blue.900",children:t}),e.jsx(V,{color:"gray.500",fontSize:"sm",children:r})]})]})]}),u1=()=>e.jsx(de,{bg:"blue.50",py:[12,20],children:e.jsxs(bi,{maxW:"container.lg",children:[e.jsxs(et,{spacing:3,mb:[8,12],children:[e.jsx(V,{color:"blue.500",fontWeight:"bold",fontSize:["sm","md"],children:"SUCCESS STORIES"}),e.jsx(ut,{textAlign:"center",size:["xl","2xl"],color:"blue.900",children:"Stories from Our Community"})]}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)"},gap:[4,8],children:[e.jsx(Dh,{name:"Ali Ghoul",role:"Mechanical Engineer",text:"I once get the same questions from in my exam that I found on the platform and it helped me a lot.",avatar:xi,rating:5}),e.jsx(Dh,{name:"Mahdi Alayan",role:"Computer Science",text:"I submitted a section change request and multiple seniors shared curated resources within the hour.",avatar:xi,rating:5})]})]})}),h1=()=>e.jsx(de,{py:[12,20],bg:"white",children:e.jsx(bi,{maxW:"container.md",textAlign:"center",children:e.jsxs(de,{bg:"blue.50",borderRadius:["xl","3xl"],p:[6,12],boxShadow:"lg",children:[e.jsx(V,{color:"blue.500",fontWeight:"bold",mb:4,fontSize:["sm","md"],children:"START LEARNING TODAY"}),e.jsx(ut,{size:["xl","2xl"],color:"blue.900",mb:[4,6],children:"Join Our Academic Community"}),e.jsx(V,{fontSize:["md","xl"],color:"gray.600",mb:[4,8],children:"Sign in with your MU email and explore unlimited resources"}),e.jsx(ke,{justify:"center",children:e.jsxs(Rr,{maxW:["100%","400px"],flexDirection:["column","row"],gap:4,children:[e.jsx(Pt,{placeholder:"you@stu.maaraf.edu",size:["md","lg"],borderRadius:"xl",mb:[2,0]}),e.jsx(Ee,{colorScheme:"blue",size:["md","lg"],borderRadius:"xl",px:[6,8],w:["full","auto"],children:"Join Free"})]})})]})})});function bp(t,r){return function(){return t.apply(r,arguments)}}const{toString:f1}=Object.prototype,{getPrototypeOf:Xu}=Object,{iterator:Uc,toStringTag:yp}=Symbol,Hc=(t=>r=>{const n=f1.call(r);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ni=t=>(t=t.toLowerCase(),r=>Hc(r)===t),$c=t=>r=>typeof r===t,{isArray:ua}=Array,nl=$c("undefined");function p1(t){return t!==null&&!nl(t)&&t.constructor!==null&&!nl(t.constructor)&&Xn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vp=Ni("ArrayBuffer");function m1(t){let r;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&vp(t.buffer),r}const g1=$c("string"),Xn=$c("function"),wp=$c("number"),Gc=t=>t!==null&&typeof t=="object",x1=t=>t===!0||t===!1,fc=t=>{if(Hc(t)!=="object")return!1;const r=Xu(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(yp in t)&&!(Uc in t)},b1=Ni("Date"),y1=Ni("File"),v1=Ni("Blob"),w1=Ni("FileList"),j1=t=>Gc(t)&&Xn(t.pipe),S1=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||Xn(t.append)&&((r=Hc(t))==="formdata"||r==="object"&&Xn(t.toString)&&t.toString()==="[object FormData]"))},C1=Ni("URLSearchParams"),[_1,k1,A1,L1]=["ReadableStream","Request","Response","Headers"].map(Ni),P1=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ul(t,r,{allOwnKeys:n=!1}={}){if(t===null||typeof t=="undefined")return;let i,o;if(typeof t!="object"&&(t=[t]),ua(t))for(i=0,o=t.length;i<o;i++)r.call(null,t[i],i,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let c;for(i=0;i<a;i++)c=s[i],r.call(null,t[c],c,t)}}function jp(t,r){r=r.toLowerCase();const n=Object.keys(t);let i=n.length,o;for(;i-- >0;)if(o=n[i],r===o.toLowerCase())return o;return null}const Ks=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,Sp=t=>!nl(t)&&t!==Ks;function ku(){const{caseless:t}=Sp(this)&&this||{},r={},n=(i,o)=>{const s=t&&jp(r,o)||o;fc(r[s])&&fc(i)?r[s]=ku(r[s],i):fc(i)?r[s]=ku({},i):ua(i)?r[s]=i.slice():r[s]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&ul(arguments[i],n);return r}const N1=(t,r,n,{allOwnKeys:i}={})=>(ul(r,(o,s)=>{n&&Xn(o)?t[s]=bp(o,n):t[s]=o},{allOwnKeys:i}),t),O1=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),R1=(t,r,n,i)=>{t.prototype=Object.create(r.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),n&&Object.assign(t.prototype,n)},E1=(t,r,n,i)=>{let o,s,a;const c={};if(r=r||{},t==null)return r;do{for(o=Object.getOwnPropertyNames(t),s=o.length;s-- >0;)a=o[s],(!i||i(a,t,r))&&!c[a]&&(r[a]=t[a],c[a]=!0);t=n!==!1&&Xu(t)}while(t&&(!n||n(t,r))&&t!==Object.prototype);return r},T1=(t,r,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=r.length;const i=t.indexOf(r,n);return i!==-1&&i===n},z1=t=>{if(!t)return null;if(ua(t))return t;let r=t.length;if(!wp(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=t[r];return n},F1=(t=>r=>t&&r instanceof t)(typeof Uint8Array!="undefined"&&Xu(Uint8Array)),I1=(t,r)=>{const i=(t&&t[Uc]).call(t);let o;for(;(o=i.next())&&!o.done;){const s=o.value;r.call(t,s[0],s[1])}},M1=(t,r)=>{let n;const i=[];for(;(n=t.exec(r))!==null;)i.push(n);return i},D1=Ni("HTMLFormElement"),B1=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),Bh=(({hasOwnProperty:t})=>(r,n)=>t.call(r,n))(Object.prototype),q1=Ni("RegExp"),Cp=(t,r)=>{const n=Object.getOwnPropertyDescriptors(t),i={};ul(n,(o,s)=>{let a;(a=r(o,s,t))!==!1&&(i[s]=a||o)}),Object.defineProperties(t,i)},W1=t=>{Cp(t,(r,n)=>{if(Xn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Xn(i)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},U1=(t,r)=>{const n={},i=o=>{o.forEach(s=>{n[s]=!0})};return ua(t)?i(t):i(String(t).split(r)),n},H1=()=>{},$1=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function G1(t){return!!(t&&Xn(t.append)&&t[yp]==="FormData"&&t[Uc])}const V1=t=>{const r=new Array(10),n=(i,o)=>{if(Gc(i)){if(r.indexOf(i)>=0)return;if(!("toJSON"in i)){r[o]=i;const s=ua(i)?[]:{};return ul(i,(a,c)=>{const u=n(a,o+1);!nl(u)&&(s[c]=u)}),r[o]=void 0,s}}return i};return n(t,0)},Y1=Ni("AsyncFunction"),J1=t=>t&&(Gc(t)||Xn(t))&&Xn(t.then)&&Xn(t.catch),_p=((t,r)=>t?setImmediate:r?((n,i)=>(Ks.addEventListener("message",({source:o,data:s})=>{o===Ks&&s===n&&i.length&&i.shift()()},!1),o=>{i.push(o),Ks.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Xn(Ks.postMessage)),X1=typeof queueMicrotask!="undefined"?queueMicrotask.bind(Ks):typeof process!="undefined"&&process.nextTick||_p,K1=t=>t!=null&&Xn(t[Uc]),Be={isArray:ua,isArrayBuffer:vp,isBuffer:p1,isFormData:S1,isArrayBufferView:m1,isString:g1,isNumber:wp,isBoolean:x1,isObject:Gc,isPlainObject:fc,isReadableStream:_1,isRequest:k1,isResponse:A1,isHeaders:L1,isUndefined:nl,isDate:b1,isFile:y1,isBlob:v1,isRegExp:q1,isFunction:Xn,isStream:j1,isURLSearchParams:C1,isTypedArray:F1,isFileList:w1,forEach:ul,merge:ku,extend:N1,trim:P1,stripBOM:O1,inherits:R1,toFlatObject:E1,kindOf:Hc,kindOfTest:Ni,endsWith:T1,toArray:z1,forEachEntry:I1,matchAll:M1,isHTMLForm:D1,hasOwnProperty:Bh,hasOwnProp:Bh,reduceDescriptors:Cp,freezeMethods:W1,toObjectSet:U1,toCamelCase:B1,noop:H1,toFiniteNumber:$1,findKey:jp,global:Ks,isContextDefined:Sp,isSpecCompliantForm:G1,toJSONObject:V1,isAsyncFn:Y1,isThenable:J1,setImmediate:_p,asap:X1,isIterable:K1};function Zt(t,r,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}Be.inherits(Zt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.status}}});const kp=Zt.prototype,Ap={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ap[t]={value:t}});Object.defineProperties(Zt,Ap);Object.defineProperty(kp,"isAxiosError",{value:!0});Zt.from=(t,r,n,i,o,s)=>{const a=Object.create(kp);return Be.toFlatObject(t,a,function(u){return u!==Error.prototype},c=>c!=="isAxiosError"),Zt.call(a,t.message,r,n,i,o),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const Q1=null;function Au(t){return Be.isPlainObject(t)||Be.isArray(t)}function Lp(t){return Be.endsWith(t,"[]")?t.slice(0,-2):t}function qh(t,r,n){return t?t.concat(r).map(function(o,s){return o=Lp(o),!n&&s?"["+o+"]":o}).join(n?".":""):r}function Z1(t){return Be.isArray(t)&&!t.some(Au)}const e2=Be.toFlatObject(Be,{},null,function(r){return/^is[A-Z]/.test(r)});function Vc(t,r,n){if(!Be.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,n=Be.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,O){return!Be.isUndefined(O[w])});const i=n.metaTokens,o=n.visitor||p,s=n.dots,a=n.indexes,u=(n.Blob||typeof Blob!="undefined"&&Blob)&&Be.isSpecCompliantForm(r);if(!Be.isFunction(o))throw new TypeError("visitor must be a function");function h(_){if(_===null)return"";if(Be.isDate(_))return _.toISOString();if(Be.isBoolean(_))return _.toString();if(!u&&Be.isBlob(_))throw new Zt("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(_)||Be.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,w,O){let k=_;if(_&&!O&&typeof _=="object"){if(Be.endsWith(w,"{}"))w=i?w:w.slice(0,-2),_=JSON.stringify(_);else if(Be.isArray(_)&&Z1(_)||(Be.isFileList(_)||Be.endsWith(w,"[]"))&&(k=Be.toArray(_)))return w=Lp(w),k.forEach(function(H,Z){!(Be.isUndefined(H)||H===null)&&r.append(a===!0?qh([w],Z,s):a===null?w:w+"[]",h(H))}),!1}return Au(_)?!0:(r.append(qh(O,w,s),h(_)),!1)}const x=[],b=Object.assign(e2,{defaultVisitor:p,convertValue:h,isVisitable:Au});function m(_,w){if(!Be.isUndefined(_)){if(x.indexOf(_)!==-1)throw Error("Circular reference detected in "+w.join("."));x.push(_),Be.forEach(_,function(k,T){(!(Be.isUndefined(k)||k===null)&&o.call(r,k,Be.isString(T)?T.trim():T,w,b))===!0&&m(k,w?w.concat(T):[T])}),x.pop()}}if(!Be.isObject(t))throw new TypeError("data must be an object");return m(t),r}function Wh(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return r[i]})}function Ku(t,r){this._pairs=[],t&&Vc(t,this,r)}const Pp=Ku.prototype;Pp.append=function(r,n){this._pairs.push([r,n])};Pp.toString=function(r){const n=r?function(i){return r.call(this,i,Wh)}:Wh;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function t2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Np(t,r,n){if(!r)return t;const i=n&&n.encode||t2;Be.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let s;if(o?s=o(r,n):s=Be.isURLSearchParams(r)?r.toString():new Ku(r,n).toString(i),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Uh{constructor(){this.handlers=[]}use(r,n,i){return this.handlers.push({fulfilled:r,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Be.forEach(this.handlers,function(i){i!==null&&r(i)})}}const Op={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r2=typeof URLSearchParams!="undefined"?URLSearchParams:Ku,n2=typeof FormData!="undefined"?FormData:null,i2=typeof Blob!="undefined"?Blob:null,s2={isBrowser:!0,classes:{URLSearchParams:r2,FormData:n2,Blob:i2},protocols:["http","https","file","blob","url","data"]},Qu=typeof window!="undefined"&&typeof document!="undefined",Lu=typeof navigator=="object"&&navigator||void 0,o2=Qu&&(!Lu||["ReactNative","NativeScript","NS"].indexOf(Lu.product)<0),a2=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",l2=Qu&&window.location.href||"http://localhost",c2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qu,hasStandardBrowserEnv:o2,hasStandardBrowserWebWorkerEnv:a2,navigator:Lu,origin:l2},Symbol.toStringTag,{value:"Module"})),En={...c2,...s2};function d2(t,r){return Vc(t,new En.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,s){return En.isNode&&Be.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},r))}function u2(t){return Be.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function h2(t){const r={},n=Object.keys(t);let i;const o=n.length;let s;for(i=0;i<o;i++)s=n[i],r[s]=t[s];return r}function Rp(t){function r(n,i,o,s){let a=n[s++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),u=s>=n.length;return a=!a&&Be.isArray(o)?o.length:a,u?(Be.hasOwnProp(o,a)?o[a]=[o[a],i]:o[a]=i,!c):((!o[a]||!Be.isObject(o[a]))&&(o[a]=[]),r(n,i,o[a],s)&&Be.isArray(o[a])&&(o[a]=h2(o[a])),!c)}if(Be.isFormData(t)&&Be.isFunction(t.entries)){const n={};return Be.forEachEntry(t,(i,o)=>{r(u2(i),o,n,0)}),n}return null}function f2(t,r,n){if(Be.isString(t))try{return(r||JSON.parse)(t),Be.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const hl={transitional:Op,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,s=Be.isObject(r);if(s&&Be.isHTMLForm(r)&&(r=new FormData(r)),Be.isFormData(r))return o?JSON.stringify(Rp(r)):r;if(Be.isArrayBuffer(r)||Be.isBuffer(r)||Be.isStream(r)||Be.isFile(r)||Be.isBlob(r)||Be.isReadableStream(r))return r;if(Be.isArrayBufferView(r))return r.buffer;if(Be.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return d2(r,this.formSerializer).toString();if((c=Be.isFileList(r))||i.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Vc(c?{"files[]":r}:r,u&&new u,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),f2(r)):r}],transformResponse:[function(r){const n=this.transitional||hl.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Be.isResponse(r)||Be.isReadableStream(r))return r;if(r&&Be.isString(r)&&(i&&!this.responseType||o)){const a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(c){if(a)throw c.name==="SyntaxError"?Zt.from(c,Zt.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:En.classes.FormData,Blob:En.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],t=>{hl.headers[t]={}});const p2=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),m2=t=>{const r={};let n,i,o;return t&&t.split(`
`).forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),i=a.substring(o+1).trim(),!(!n||r[n]&&p2[n])&&(n==="set-cookie"?r[n]?r[n].push(i):r[n]=[i]:r[n]=r[n]?r[n]+", "+i:i)}),r},Hh=Symbol("internals");function Ha(t){return t&&String(t).trim().toLowerCase()}function pc(t){return t===!1||t==null?t:Be.isArray(t)?t.map(pc):String(t)}function g2(t){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)r[i[1]]=i[2];return r}const x2=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function $d(t,r,n,i,o){if(Be.isFunction(i))return i.call(this,r,n);if(o&&(r=n),!!Be.isString(r)){if(Be.isString(i))return r.indexOf(i)!==-1;if(Be.isRegExp(i))return i.test(r)}}function b2(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,i)=>n.toUpperCase()+i)}function y2(t,r){const n=Be.toCamelCase(" "+r);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(o,s,a){return this[i].call(this,r,o,s,a)},configurable:!0})})}let Kn=class{constructor(r){r&&this.set(r)}set(r,n,i){const o=this;function s(c,u,h){const p=Ha(u);if(!p)throw new Error("header name must be a non-empty string");const x=Be.findKey(o,p);(!x||o[x]===void 0||h===!0||h===void 0&&o[x]!==!1)&&(o[x||u]=pc(c))}const a=(c,u)=>Be.forEach(c,(h,p)=>s(h,p,u));if(Be.isPlainObject(r)||r instanceof this.constructor)a(r,n);else if(Be.isString(r)&&(r=r.trim())&&!x2(r))a(m2(r),n);else if(Be.isObject(r)&&Be.isIterable(r)){let c={},u,h;for(const p of r){if(!Be.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[h=p[0]]=(u=c[h])?Be.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}a(c,n)}else r!=null&&s(n,r,i);return this}get(r,n){if(r=Ha(r),r){const i=Be.findKey(this,r);if(i){const o=this[i];if(!n)return o;if(n===!0)return g2(o);if(Be.isFunction(n))return n.call(this,o,i);if(Be.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=Ha(r),r){const i=Be.findKey(this,r);return!!(i&&this[i]!==void 0&&(!n||$d(this,this[i],i,n)))}return!1}delete(r,n){const i=this;let o=!1;function s(a){if(a=Ha(a),a){const c=Be.findKey(i,a);c&&(!n||$d(i,i[c],c,n))&&(delete i[c],o=!0)}}return Be.isArray(r)?r.forEach(s):s(r),o}clear(r){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const s=n[i];(!r||$d(this,this[s],s,r,!0))&&(delete this[s],o=!0)}return o}normalize(r){const n=this,i={};return Be.forEach(this,(o,s)=>{const a=Be.findKey(i,s);if(a){n[a]=pc(o),delete n[s];return}const c=r?b2(s):String(s).trim();c!==s&&delete n[s],n[c]=pc(o),i[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return Be.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=r&&Be.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const i=new this(r);return n.forEach(o=>i.set(o)),i}static accessor(r){const i=(this[Hh]=this[Hh]={accessors:{}}).accessors,o=this.prototype;function s(a){const c=Ha(a);i[c]||(y2(o,a),i[c]=!0)}return Be.isArray(r)?r.forEach(s):s(r),this}};Kn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(Kn.prototype,({value:t},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(i){this[n]=i}}});Be.freezeMethods(Kn);function Gd(t,r){const n=this||hl,i=r||n,o=Kn.from(i.headers);let s=i.data;return Be.forEach(t,function(c){s=c.call(n,s,o.normalize(),r?r.status:void 0)}),o.normalize(),s}function Ep(t){return!!(t&&t.__CANCEL__)}function ha(t,r,n){Zt.call(this,t==null?"canceled":t,Zt.ERR_CANCELED,r,n),this.name="CanceledError"}Be.inherits(ha,Zt,{__CANCEL__:!0});function Tp(t,r,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):r(new Zt("Request failed with status code "+n.status,[Zt.ERR_BAD_REQUEST,Zt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function v2(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function w2(t,r){t=t||10;const n=new Array(t),i=new Array(t);let o=0,s=0,a;return r=r!==void 0?r:1e3,function(u){const h=Date.now(),p=i[s];a||(a=h),n[o]=u,i[o]=h;let x=s,b=0;for(;x!==o;)b+=n[x++],x=x%t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),h-a<r)return;const m=p&&h-p;return m?Math.round(b*1e3/m):void 0}}function j2(t,r){let n=0,i=1e3/r,o,s;const a=(h,p=Date.now())=>{n=p,o=null,s&&(clearTimeout(s),s=null),t.apply(null,h)};return[(...h)=>{const p=Date.now(),x=p-n;x>=i?a(h,p):(o=h,s||(s=setTimeout(()=>{s=null,a(o)},i-x)))},()=>o&&a(o)]}const Nc=(t,r,n=3)=>{let i=0;const o=w2(50,250);return j2(s=>{const a=s.loaded,c=s.lengthComputable?s.total:void 0,u=a-i,h=o(u),p=a<=c;i=a;const x={loaded:a,total:c,progress:c?a/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&p?(c-a)/h:void 0,event:s,lengthComputable:c!=null,[r?"download":"upload"]:!0};t(x)},n)},$h=(t,r)=>{const n=t!=null;return[i=>r[0]({lengthComputable:n,total:t,loaded:i}),r[1]]},Gh=t=>(...r)=>Be.asap(()=>t(...r)),S2=En.hasStandardBrowserEnv?((t,r)=>n=>(n=new URL(n,En.origin),t.protocol===n.protocol&&t.host===n.host&&(r||t.port===n.port)))(new URL(En.origin),En.navigator&&/(msie|trident)/i.test(En.navigator.userAgent)):()=>!0,C2=En.hasStandardBrowserEnv?{write(t,r,n,i,o,s){const a=[t+"="+encodeURIComponent(r)];Be.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Be.isString(i)&&a.push("path="+i),Be.isString(o)&&a.push("domain="+o),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _2(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function k2(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function zp(t,r,n){let i=!_2(r);return t&&(i||n==!1)?k2(t,r):r}const Vh=t=>t instanceof Kn?{...t}:t;function so(t,r){r=r||{};const n={};function i(h,p,x,b){return Be.isPlainObject(h)&&Be.isPlainObject(p)?Be.merge.call({caseless:b},h,p):Be.isPlainObject(p)?Be.merge({},p):Be.isArray(p)?p.slice():p}function o(h,p,x,b){if(Be.isUndefined(p)){if(!Be.isUndefined(h))return i(void 0,h,x,b)}else return i(h,p,x,b)}function s(h,p){if(!Be.isUndefined(p))return i(void 0,p)}function a(h,p){if(Be.isUndefined(p)){if(!Be.isUndefined(h))return i(void 0,h)}else return i(void 0,p)}function c(h,p,x){if(x in r)return i(h,p);if(x in t)return i(void 0,h)}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(h,p,x)=>o(Vh(h),Vh(p),x,!0)};return Be.forEach(Object.keys(Object.assign({},t,r)),function(p){const x=u[p]||o,b=x(t[p],r[p],p);Be.isUndefined(b)&&x!==c||(n[p]=b)}),n}const Fp=t=>{const r=so({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:c}=r;r.headers=a=Kn.from(a),r.url=Np(zp(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let u;if(Be.isFormData(n)){if(En.hasStandardBrowserEnv||En.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[h,...p]=u?u.split(";").map(x=>x.trim()).filter(Boolean):[];a.setContentType([h||"multipart/form-data",...p].join("; "))}}if(En.hasStandardBrowserEnv&&(i&&Be.isFunction(i)&&(i=i(r)),i||i!==!1&&S2(r.url))){const h=o&&s&&C2.read(s);h&&a.set(o,h)}return r},A2=typeof XMLHttpRequest!="undefined",L2=A2&&function(t){return new Promise(function(n,i){const o=Fp(t);let s=o.data;const a=Kn.from(o.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=o,p,x,b,m,_;function w(){m&&m(),_&&_(),o.cancelToken&&o.cancelToken.unsubscribe(p),o.signal&&o.signal.removeEventListener("abort",p)}let O=new XMLHttpRequest;O.open(o.method.toUpperCase(),o.url,!0),O.timeout=o.timeout;function k(){if(!O)return;const H=Kn.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),P={data:!c||c==="text"||c==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:H,config:t,request:O};Tp(function(B){n(B),w()},function(B){i(B),w()},P),O=null}"onloadend"in O?O.onloadend=k:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(k)},O.onabort=function(){O&&(i(new Zt("Request aborted",Zt.ECONNABORTED,t,O)),O=null)},O.onerror=function(){i(new Zt("Network Error",Zt.ERR_NETWORK,t,O)),O=null},O.ontimeout=function(){let Z=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const P=o.transitional||Op;o.timeoutErrorMessage&&(Z=o.timeoutErrorMessage),i(new Zt(Z,P.clarifyTimeoutError?Zt.ETIMEDOUT:Zt.ECONNABORTED,t,O)),O=null},s===void 0&&a.setContentType(null),"setRequestHeader"in O&&Be.forEach(a.toJSON(),function(Z,P){O.setRequestHeader(P,Z)}),Be.isUndefined(o.withCredentials)||(O.withCredentials=!!o.withCredentials),c&&c!=="json"&&(O.responseType=o.responseType),h&&([b,_]=Nc(h,!0),O.addEventListener("progress",b)),u&&O.upload&&([x,m]=Nc(u),O.upload.addEventListener("progress",x),O.upload.addEventListener("loadend",m)),(o.cancelToken||o.signal)&&(p=H=>{O&&(i(!H||H.type?new ha(null,t,O):H),O.abort(),O=null)},o.cancelToken&&o.cancelToken.subscribe(p),o.signal&&(o.signal.aborted?p():o.signal.addEventListener("abort",p)));const T=v2(o.url);if(T&&En.protocols.indexOf(T)===-1){i(new Zt("Unsupported protocol "+T+":",Zt.ERR_BAD_REQUEST,t));return}O.send(s||null)})},P2=(t,r)=>{const{length:n}=t=t?t.filter(Boolean):[];if(r||n){let i=new AbortController,o;const s=function(h){if(!o){o=!0,c();const p=h instanceof Error?h:this.reason;i.abort(p instanceof Zt?p:new ha(p instanceof Error?p.message:p))}};let a=r&&setTimeout(()=>{a=null,s(new Zt(`timeout ${r} of ms exceeded`,Zt.ETIMEDOUT))},r);const c=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),t=null)};t.forEach(h=>h.addEventListener("abort",s));const{signal:u}=i;return u.unsubscribe=()=>Be.asap(c),u}},N2=function*(t,r){let n=t.byteLength;if(n<r){yield t;return}let i=0,o;for(;i<n;)o=i+r,yield t.slice(i,o),i=o},O2=async function*(t,r){for await(const n of R2(t))yield*N2(n,r)},R2=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:n,value:i}=await r.read();if(n)break;yield i}}finally{await r.cancel()}},Yh=(t,r,n,i)=>{const o=O2(t,r);let s=0,a,c=u=>{a||(a=!0,i&&i(u))};return new ReadableStream({async pull(u){try{const{done:h,value:p}=await o.next();if(h){c(),u.close();return}let x=p.byteLength;if(n){let b=s+=x;n(b)}u.enqueue(new Uint8Array(p))}catch(h){throw c(h),h}},cancel(u){return c(u),o.return()}},{highWaterMark:2})},Yc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ip=Yc&&typeof ReadableStream=="function",E2=Yc&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Mp=(t,...r)=>{try{return!!t(...r)}catch{return!1}},T2=Ip&&Mp(()=>{let t=!1;const r=new Request(En.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),Jh=64*1024,Pu=Ip&&Mp(()=>Be.isReadableStream(new Response("").body)),Oc={stream:Pu&&(t=>t.body)};Yc&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Oc[r]&&(Oc[r]=Be.isFunction(t[r])?n=>n[r]():(n,i)=>{throw new Zt(`Response type '${r}' is not supported`,Zt.ERR_NOT_SUPPORT,i)})})})(new Response);const z2=async t=>{if(t==null)return 0;if(Be.isBlob(t))return t.size;if(Be.isSpecCompliantForm(t))return(await new Request(En.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Be.isArrayBufferView(t)||Be.isArrayBuffer(t))return t.byteLength;if(Be.isURLSearchParams(t)&&(t=t+""),Be.isString(t))return(await E2(t)).byteLength},F2=async(t,r)=>{const n=Be.toFiniteNumber(t.getContentLength());return n==null?z2(r):n},I2=Yc&&(async t=>{let{url:r,method:n,data:i,signal:o,cancelToken:s,timeout:a,onDownloadProgress:c,onUploadProgress:u,responseType:h,headers:p,withCredentials:x="same-origin",fetchOptions:b}=Fp(t);h=h?(h+"").toLowerCase():"text";let m=P2([o,s&&s.toAbortSignal()],a),_;const w=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let O;try{if(u&&T2&&n!=="get"&&n!=="head"&&(O=await F2(p,i))!==0){let P=new Request(r,{method:"POST",body:i,duplex:"half"}),D;if(Be.isFormData(i)&&(D=P.headers.get("content-type"))&&p.setContentType(D),P.body){const[B,G]=$h(O,Nc(Gh(u)));i=Yh(P.body,Jh,B,G)}}Be.isString(x)||(x=x?"include":"omit");const k="credentials"in Request.prototype;_=new Request(r,{...b,signal:m,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:i,duplex:"half",credentials:k?x:void 0});let T=await fetch(_,b);const H=Pu&&(h==="stream"||h==="response");if(Pu&&(c||H&&w)){const P={};["status","statusText","headers"].forEach(R=>{P[R]=T[R]});const D=Be.toFiniteNumber(T.headers.get("content-length")),[B,G]=c&&$h(D,Nc(Gh(c),!0))||[];T=new Response(Yh(T.body,Jh,B,()=>{G&&G(),w&&w()}),P)}h=h||"text";let Z=await Oc[Be.findKey(Oc,h)||"text"](T,t);return!H&&w&&w(),await new Promise((P,D)=>{Tp(P,D,{data:Z,headers:Kn.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:_})})}catch(k){throw w&&w(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Zt("Network Error",Zt.ERR_NETWORK,t,_),{cause:k.cause||k}):Zt.from(k,k&&k.code,t,_)}}),Nu={http:Q1,xhr:L2,fetch:I2};Be.forEach(Nu,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const Xh=t=>`- ${t}`,M2=t=>Be.isFunction(t)||t===null||t===!1,Dp={getAdapter:t=>{t=Be.isArray(t)?t:[t];const{length:r}=t;let n,i;const o={};for(let s=0;s<r;s++){n=t[s];let a;if(i=n,!M2(n)&&(i=Nu[(a=String(n)).toLowerCase()],i===void 0))throw new Zt(`Unknown adapter '${a}'`);if(i)break;o[a||"#"+s]=i}if(!i){const s=Object.entries(o).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=r?s.length>1?`since :
`+s.map(Xh).join(`
`):" "+Xh(s[0]):"as no adapter specified";throw new Zt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:Nu};function Vd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ha(null,t)}function Kh(t){return Vd(t),t.headers=Kn.from(t.headers),t.data=Gd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Dp.getAdapter(t.adapter||hl.adapter)(t).then(function(i){return Vd(t),i.data=Gd.call(t,t.transformResponse,i),i.headers=Kn.from(i.headers),i},function(i){return Ep(i)||(Vd(t),i&&i.response&&(i.response.data=Gd.call(t,t.transformResponse,i.response),i.response.headers=Kn.from(i.response.headers))),Promise.reject(i)})}const Bp="1.10.0",Jc={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Jc[t]=function(i){return typeof i===t||"a"+(r<1?"n ":" ")+t}});const Qh={};Jc.transitional=function(r,n,i){function o(s,a){return"[Axios v"+Bp+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,c)=>{if(r===!1)throw new Zt(o(a," has been removed"+(n?" in "+n:"")),Zt.ERR_DEPRECATED);return n&&!Qh[a]&&(Qh[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(s,a,c):!0}};Jc.spelling=function(r){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${r}`),!0)};function D2(t,r,n){if(typeof t!="object")throw new Zt("options must be an object",Zt.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const s=i[o],a=r[s];if(a){const c=t[s],u=c===void 0||a(c,s,t);if(u!==!0)throw new Zt("option "+s+" must be "+u,Zt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Zt("Unknown option "+s,Zt.ERR_BAD_OPTION)}}const mc={assertOptions:D2,validators:Jc},Di=mc.validators;let Qs=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Uh,response:new Uh}}async request(r,n){try{return await this._request(r,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=so(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:s}=n;i!==void 0&&mc.assertOptions(i,{silentJSONParsing:Di.transitional(Di.boolean),forcedJSONParsing:Di.transitional(Di.boolean),clarifyTimeoutError:Di.transitional(Di.boolean)},!1),o!=null&&(Be.isFunction(o)?n.paramsSerializer={serialize:o}:mc.assertOptions(o,{encode:Di.function,serialize:Di.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),mc.assertOptions(n,{baseUrl:Di.spelling("baseURL"),withXsrfToken:Di.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&Be.merge(s.common,s[n.method]);s&&Be.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=Kn.concat(a,s);const c=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(u=u&&w.synchronous,c.unshift(w.fulfilled,w.rejected))});const h=[];this.interceptors.response.forEach(function(w){h.push(w.fulfilled,w.rejected)});let p,x=0,b;if(!u){const _=[Kh.bind(this),void 0];for(_.unshift.apply(_,c),_.push.apply(_,h),b=_.length,p=Promise.resolve(n);x<b;)p=p.then(_[x++],_[x++]);return p}b=c.length;let m=n;for(x=0;x<b;){const _=c[x++],w=c[x++];try{m=_(m)}catch(O){w.call(this,O);break}}try{p=Kh.call(this,m)}catch(_){return Promise.reject(_)}for(x=0,b=h.length;x<b;)p=p.then(h[x++],h[x++]);return p}getUri(r){r=so(this.defaults,r);const n=zp(r.baseURL,r.url,r.allowAbsoluteUrls);return Np(n,r.params,r.paramsSerializer)}};Be.forEach(["delete","get","head","options"],function(r){Qs.prototype[r]=function(n,i){return this.request(so(i||{},{method:r,url:n,data:(i||{}).data}))}});Be.forEach(["post","put","patch"],function(r){function n(i){return function(s,a,c){return this.request(so(c||{},{method:r,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Qs.prototype[r]=n(),Qs.prototype[r+"Form"]=n(!0)});let B2=class qp{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(o=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](o);i._listeners=null}),this.promise.then=o=>{let s;const a=new Promise(c=>{i.subscribe(c),s=c}).then(o);return a.cancel=function(){i.unsubscribe(s)},a},r(function(s,a,c){i.reason||(i.reason=new ha(s,a,c),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=i=>{r.abort(i)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new qp(function(o){r=o}),cancel:r}}};function q2(t){return function(n){return t.apply(null,n)}}function W2(t){return Be.isObject(t)&&t.isAxiosError===!0}const Ou={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ou).forEach(([t,r])=>{Ou[r]=t});function Wp(t){const r=new Qs(t),n=bp(Qs.prototype.request,r);return Be.extend(n,Qs.prototype,r,{allOwnKeys:!0}),Be.extend(n,r,null,{allOwnKeys:!0}),n.create=function(o){return Wp(so(t,o))},n}const Pr=Wp(hl);Pr.Axios=Qs;Pr.CanceledError=ha;Pr.CancelToken=B2;Pr.isCancel=Ep;Pr.VERSION=Bp;Pr.toFormData=Vc;Pr.AxiosError=Zt;Pr.Cancel=Pr.CanceledError;Pr.all=function(r){return Promise.all(r)};Pr.spread=q2;Pr.isAxiosError=W2;Pr.mergeConfig=so;Pr.AxiosHeaders=Kn;Pr.formToJSON=t=>Rp(Be.isHTMLForm(t)?new FormData(t):t);Pr.getAdapter=Dp.getAdapter;Pr.HttpStatusCode=Ou;Pr.default=Pr;const{Axios:Uv,AxiosError:Hv,CanceledError:$v,isCancel:Gv,CancelToken:Vv,VERSION:Yv,all:Jv,Cancel:Xv,isAxiosError:Kv,spread:Qv,toFormData:Zv,AxiosHeaders:ew,HttpStatusCode:tw,formToJSON:rw,getAdapter:nw,mergeConfig:iw}=Pr,Yd="https://mu-connect.me/api",U2="https://mu-connect.me",Es=Yd==null?void 0:Yd.replace(/\/$/,""),os=U2.replace(/\/$/,"");Es||console.warn("[env] VITE_API_BASE_URL is not defined. API calls will fail until it is set.");const yt=Pr.create({baseURL:Es,timeout:15e3,withCredentials:!1});yt.interceptors.request.use(t=>{try{const r=localStorage.getItem("authToken");r&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${r}`)}catch{}return t});yt.interceptors.response.use(t=>t,t=>{var n,i,o,s,a,c;const r={message:((i=(n=t.response)==null?void 0:n.data)==null?void 0:i.message)||t.message||"Request failed",status:(o=t.response)==null?void 0:o.status,data:(s=t.response)==null?void 0:s.data,url:(a=t.config)==null?void 0:a.url,method:(c=t.config)==null?void 0:c.method};return Promise.reject(r)});const Up=t=>{t&&localStorage.setItem("authToken",t)},H2=async t=>{var r,n,i,o;try{const s=await yt.post("/auth/google/complete-registration",t);return s.data.token&&(localStorage.setItem("authToken",s.data.token),(r=s.data.user)!=null&&r.faculty&&(localStorage.setItem("userFaculty",s.data.user.faculty.name),localStorage.setItem("faculty_id",s.data.user.faculty.id)),(n=s.data.user)!=null&&n.major&&(localStorage.setItem("userMajor",s.data.user.major.name),localStorage.setItem("major_id",s.data.user.major.id)),(i=s.data.user)!=null&&i.roles&&s.data.user.roles[0]&&localStorage.setItem("role",s.data.user.roles[0])),s.data}catch(s){throw((o=s.response)==null?void 0:o.data)||{message:"Registration completion failed"}}},$2=()=>localStorage.getItem("googleTempToken"),G2=t=>{localStorage.setItem("googleTempToken",t)},gn={NETWORK:"network",VALIDATION:"validation",AUTHENTICATION:"authentication",AUTHORIZATION:"authorization",NOT_FOUND:"not_found",SERVER:"server",UNKNOWN:"unknown"},Zh={[gn.NETWORK]:"Unable to connect to the server. Please check your internet connection and try again.",[gn.VALIDATION]:"Please check your input and try again.",[gn.AUTHENTICATION]:"Your session has expired. Please log in again.",[gn.AUTHORIZATION]:"You don't have permission to perform this action.",[gn.NOT_FOUND]:"The requested resource was not found.",[gn.SERVER]:"Something went wrong on our end. Please try again later.",[gn.UNKNOWN]:"An unexpected error occurred. Please try again later."},V2=t=>{var r;if(!t.status&&(t.code==="NETWORK_ERROR"||(r=t.message)!=null&&r.includes("Network Error")))return gn.NETWORK;switch(t.status){case 400:return gn.VALIDATION;case 401:return gn.AUTHENTICATION;case 403:return gn.AUTHORIZATION;case 404:return gn.NOT_FOUND;case 422:return gn.VALIDATION;case 500:case 502:case 503:case 504:return gn.SERVER;default:return gn.UNKNOWN}},Y2=(t,r=null)=>{var s,a;const n=V2(t);let i="Error",o=r||Zh[n];if(n===gn.VALIDATION&&((s=t.data)!=null&&s.errors)){const c=Object.values(t.data.errors).flat();c.length>0&&(o=c[0],i="Validation Error")}else(a=t.data)!=null&&a.message&&J2(t.data.message)?o=t.data.message:n===gn.SERVER&&(o=Zh[gn.SERVER],i="Server Error");return{title:i,description:o,type:n}},J2=t=>!t||typeof t!="string"?!1:![/database/i,/sql/i,/connection/i,/internal server/i,/stack trace/i,/exception/i,/error at line/i,/query failed/i,/undefined method/i,/class not found/i].some(n=>n.test(t)),ks=(t,r=null)=>{const n=Y2(t,r);return{title:n.title,description:n.description,status:"error",duration:5e3,isClosable:!0}},Jd=(t,r=null,n=3e3)=>({title:t,description:r,status:"success",duration:n,isClosable:!0}),ns=(t,r)=>{console.error(`[${t}]`,{message:r.message,status:r.status,url:r.url,method:r.method})},Hp=Es,Xc=()=>localStorage.getItem("authToken");Pr.interceptors.request.use(t=>{const r=Xc();return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const Zu=async t=>{var r;try{const n=await yt.post("/register",t);return n.data.token&&Up(n.data.token),t.faculty&&localStorage.setItem("userFaculty",t.faculty),t.major&&localStorage.setItem("userMajor",t.major),n.data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Registration failed"}}},$p=async t=>{try{const r=await yt.post("/login",t);return r.data.token&&Up(r.data.token),r.data}catch(r){throw r.message?{message:r.message}:{message:"Login failed"}}},eh=async()=>{try{Xc()&&await yt.post("/logout")}catch{}localStorage.clear(),sessionStorage.clear(),window.location.reload()},Js=async()=>{if(!Xc()){const r=sessionStorage.getItem("currentUser");return r?(console.log("Using cached user data from Google authentication"),JSON.parse(r)):null}try{const r=await yt.get("/users/me");return r.data&&!r.data.id&&r.data.user_id&&(r.data.id=r.data.user_id),r.data&&r.data.avatar&&!r.data.avatar.startsWith("http")?r.data.avatar_url=`${os}/storage/avatars/${r.data.avatar}`:r.data&&r.data.avatar&&(r.data.avatar_url=r.data.avatar),r.data.faculty&&r.data.faculty.name&&(localStorage.setItem("userFaculty",r.data.faculty.name),localStorage.setItem("faculty_id",r.data.faculty.id)),r.data.major&&r.data.major.name&&(localStorage.setItem("userMajor",r.data.major.name),localStorage.setItem("major_id",r.data.major.id)),r.data.roles&&r.data.roles.length>0?localStorage.setItem("role",r.data.roles[0]):r.data.role_names&&r.data.role_names.length>0&&localStorage.setItem("role",r.data.role_names[0]),r.data&&r.data.id&&localStorage.setItem("user_id",r.data.id),sessionStorage.setItem("currentUser",JSON.stringify(r.data)),r.data}catch(r){console.error("Error fetching current user:",r);const n=sessionStorage.getItem("currentUser");return n?JSON.parse(n):null}},Gp=()=>{try{const t=sessionStorage.getItem("currentUser");if(t){const n=JSON.parse(t);return n.id||(n.id=localStorage.getItem("user_id")||null),!n.role&&localStorage.getItem("role")&&(n.role=localStorage.getItem("role")),n}const r=localStorage.getItem("user_id");return r?{id:r,first_name:localStorage.getItem("first_name")||"User",last_name:localStorage.getItem("last_name")||"",role:localStorage.getItem("role")}:null}catch(t){return console.error("Error getting cached user:",t),null}},Vp=async()=>{var t;try{return(await Pr.get(`${Hp}/registration/faculties`,{withCredentials:!0})).data}catch(r){throw((t=r.response)==null?void 0:t.data)||{message:"Failed to load faculties"}}},Yp=async t=>{var r;try{return(await Pr.get(`${Hp}/registration/faculties/${t}/majors`,{withCredentials:!0})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to load majors"}}},ef=Object.freeze(Object.defineProperty({__proto__:null,getCurrentUser:Js,getCurrentUserSync:Gp,getFaculties:Vp,getMajors:Yp,getToken:Xc,login:$p,logout:eh,register:Zu},Symbol.toStringTag,{value:"Module"})),Jp=W.createContext(),X2=({children:t})=>{const[r,n]=W.useState(null),[i,o]=W.useState(!0),[s,a]=W.useState(null);W.useEffect(()=>{Js().then(n).catch(()=>n(null)).finally(()=>o(!1))},[]);const c=W.useCallback(async b=>{o(!0),a(null);try{await $p(b);const m=await Js();return n(m),a(null),m}catch(m){throw a(m.message||"Login failed"),n(null),m}finally{o(!1)}},[]),u=W.useCallback(async()=>{o(!0);try{await eh(),n(null)}finally{o(!1)}},[]),h=W.useCallback(async b=>{o(!0),a(null);try{await Zu(b);const m=await Js();return n(m),a(null),m}catch(m){throw a(m.message||"Registration failed"),n(null),m}finally{o(!1)}},[]),p=W.useCallback(async b=>{o(!0),a(null);try{await H2(b);const m=await Js();return n(m),a(null),m}catch(m){throw a(m.message||"Google registration failed"),n(null),m}finally{o(!1)}},[]),x=W.useCallback(async b=>{o(!0);try{if(!localStorage.getItem("authToken")){const _="google_auth_"+Math.random().toString(36).substring(2,15);localStorage.setItem("authToken",_)}return n(b),sessionStorage.setItem("currentUser",JSON.stringify(b)),await Js(),b}catch(m){throw console.error("Google auth error:",m),a(m.message||"Failed to process Google authentication"),n(null),m}finally{o(!1)}},[]);return e.jsx(Jp.Provider,{value:{user:r,loading:i,authError:s,login:c,logout:u,register:h,completeGoogleSignUp:p,handleGoogleAuthSuccess:x},children:t})},ai=()=>{const t=W.useContext(Jp);return t||(console.warn("useAuth must be used within an AuthProvider. Falling back to default context."),{user:null,loading:!1,authError:null,login:async()=>{},logout:async()=>{},register:async()=>{},completeGoogleSignUp:async()=>{},handleGoogleAuthSuccess:async()=>{}})},K2=()=>{const[t,r]=W.useState({login:"",password:""}),[n,i]=W.useState({}),o=Ir();Vr();const{user:s,loading:a,login:c}=ai(),u=x=>{r({...t,[x.target.name]:x.target.value}),i({...n,[x.target.name]:""})},h=()=>{const x={};return t.login||(x.login="Username/Email is required"),t.password||(x.password="Password is required"),i(x),Object.keys(x).length===0},p=async x=>{if(x.preventDefault(),!!h())try{await c(t),o({title:"Login successful",status:"success",duration:3e3})}catch(b){ns("handleSubmit",b);const m=(b==null?void 0:b.message)||(b==null?void 0:b.error)||"Login failedddd";o({title:"Error",description:m,status:"error",duration:5e3,isClosable:!0})}};return a?e.jsx(bn,{minH:"100vh",children:e.jsx(en,{size:"xl",color:"blue.500"})}):s?e.jsx(kc,{to:"/dashboard",replace:!0}):e.jsx(ke,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",align:"center",justify:"center",children:e.jsx(bi,{maxW:"container.md",px:[4,8],children:e.jsxs(de,{bg:"white",p:[6,12],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:"linear(to-r, blue.500, teal.400)",borderRadius:"2xl",zIndex:-1},children:[e.jsxs(ke,{align:"center",mb:8,gap:3,justify:"center",children:[e.jsx(Cr,{src:xi,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(ut,{size:"xl",bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"MU Connect"})]}),e.jsxs(yr,{spacing:8,children:[e.jsx(de,{textAlign:"center",children:e.jsx(ut,{size:"2xl",mb:2,bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"Welcome Back!"})}),e.jsx("form",{onSubmit:p,children:e.jsxs(yr,{spacing:6,children:[e.jsxs(ht,{isRequired:!0,isInvalid:!!n.login,children:[e.jsx(ft,{color:"gray.600",children:"Username/Email"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Qo,color:"blue.500","aria-label":"Username icon"})}),e.jsx(Pt,{name:"login",placeholder:"id@mu.edu.lb",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800",value:t.login,onChange:u})]}),n.login&&e.jsx(V,{color:"red.500",fontSize:"sm",mt:1,children:n.login})]}),e.jsxs(ht,{isRequired:!0,isInvalid:!!n.password,children:[e.jsx(ft,{color:"gray.600",children:"Password"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Su,color:"blue.500","aria-label":"Password icon"})}),e.jsx(Pt,{type:"password",placeholder:"••••••••",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800",name:"password",value:t.password,onChange:u})]}),n.password&&e.jsx(V,{color:"red.500",fontSize:"sm",mt:1,children:n.password})]}),e.jsx(ke,{justify:"space-between",align:"center",children:e.jsx(jc,{as:Hi,to:"/forgot-password",color:"blue.500",fontSize:"sm",_hover:{textDecoration:"underline"},children:"Forgot Password?"})}),e.jsx(Ee,{type:"submit",colorScheme:"blue",size:"lg",height:"60px",fontSize:"lg",rightIcon:e.jsx(ct,{as:Jo,"aria-label":"Sign in"}),isLoading:a,bgGradient:"linear(to-r, blue.500, teal.400)",_hover:{bgGradient:"linear(to-r, blue.600, teal.500)"},_active:{transform:"scale(0.98)"},w:"full",children:"Sign In"})]})}),e.jsxs(V,{textAlign:"center",color:"gray.600",children:["New to MU Connect?"," ",e.jsx(jc,{as:Hi,to:"/register",color:"blue.500",fontWeight:"600",_hover:{textDecoration:"underline"},children:"Create account"})]})]})]})})})},Q2="modulepreload",Z2=function(t){return"/"+t},tf={},oo=function(r,n,i){let o=Promise.resolve();if(n&&n.length>0){let a=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=a(n.map(h=>{if(h=Z2(h),h in tf)return;tf[h]=!0;const p=h.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${x}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":Q2,p||(b.as="script"),b.crossOrigin="",b.href=h,u&&b.setAttribute("nonce",u),document.head.appendChild(b),p)return new Promise((m,_)=>{b.addEventListener("load",m),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return o.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return r().catch(s)})},ex=()=>{var Q,ie;const[t,r]=W.useState(0),[n,i]=W.useState({first_name:"",last_name:"",username:"",email:"",password:"",password_confirmation:"",faculty_id:"",major_id:""}),[o,s]=W.useState([]),[a,c]=W.useState([]),[u,h]=W.useState(!0),[p,x]=W.useState(!1),[b,m]=W.useState(""),[_,w]=W.useState(""),[O,k]=W.useState({}),[T,H]=W.useState(!1),[Z,P]=W.useState(0),D=Ir(),B=Vr(),G="linear(to-br, blue.50 0%, white 50%, blue.50 100%)",R="white",L="linear(to-r, blue.500, teal.400)",j="linear(to-r, blue.600, teal.500)",A="gray.700",E="gray.200",z=[{id:"welcome",title:"Welcome"},{id:"name",title:"Your Name"},{id:"username",title:"Create Username"},{id:"email",title:"Your Email"},{id:"password",title:"Set Password"},{id:"faculty",title:"Your Faculty"},{id:"major",title:"Your Major"},{id:"complete",title:"Complete"}],oe=ue=>{const{name:le,value:ge}=ue.target;i(xe=>({...xe,[le]:ge})),le==="username"&&O.username&&k(xe=>({...xe,username:void 0}))},re=ue=>{const le=ue.target.value;i(ge=>({...ge,faculty_id:le,major_id:""}))},v=ue=>{const le=ue.target.value;i(ge=>({...ge,major_id:le}))},ne=(ue=t)=>{const le={};switch(ue){case 1:n.first_name.trim()||(le.first_name="First name is required."),n.last_name.trim()||(le.last_name="Last name is required.");break;case 2:n.username.trim()||(le.username="Username is required.");break;case 3:n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.email.endsWith("@mu.edu.lb")||(le.email="Email must be a university email (@mu.edu.lb)."):le.email="Invalid email address format.":le.email="Email is required.";break;case 4:n.password?n.password.length<6&&(le.password="Password must be at least 6 characters."):le.password="Password is required.",n.password_confirmation?n.password!==n.password_confirmation&&(le.password_confirmation="Passwords do not match."):le.password_confirmation="Please confirm your password.";break;case 5:n.faculty_id||(le.faculty_id="Faculty is required.");break;case 6:n.major_id||(le.major_id="Major is required.");break}return k(le),Object.keys(le).length===0},M=()=>ne(t),y=()=>{if(t===2&&O.username){D({title:O.username,status:"error",duration:3e3});return}M()?t<z.length-1&&r(t+1):D({title:"Please correct the errors",status:"error",duration:2500})},Y=ue=>{ue.key==="Enter"&&M()&&t<7&&(ue.preventDefault(),y())},C=()=>{t>0&&r(t-1)},q=async ue=>{ue&&ue.preventDefault();for(let ge=1;ge<=6;ge++)if(!ne(ge)){D({title:"Incomplete Information",description:"Please fill out all required fields correctly.",status:"error",duration:3e3}),r(ge);return}H(!0),P(0);const le=setInterval(()=>{P(ge=>Math.min(ge+Math.random()*15,90))},400);try{const ge={first_name:n.first_name,last_name:n.last_name,username:n.username,email:n.email,password:n.password,password_confirmation:n.password_confirmation,faculty_id:n.faculty_id,major_id:n.major_id};await Zu(ge),clearInterval(le),P(100),D({title:"Registration successful!",description:"Welcome to Maaref. We're glad to have you.",status:"success",duration:3e3,isClosable:!0}),setTimeout(()=>{B("/dashboard")},500)}catch(ge){if(clearInterval(le),H(!1),ge&&typeof ge=="object"&&ge.errors){k(Ie=>({...Ie,...ge.errors}));const xe={first_name:1,last_name:1,username:2,email:3,password:4,password_confirmation:4,faculty_id:5,major_id:6},ze=Object.keys(ge.errors).reduce((Ie,We)=>Math.min(Ie,xe[We]||8),8);r(ze),D({title:"Please correct the highlighted error(s).",status:"error",duration:3e3})}else D({title:ge.message||"An unexpected error occurred.",description:"Please try again later.",status:"error",duration:4e3})}};W.useEffect(()=>{h(!0),oo(async()=>{const{getFaculties:ue}=await Promise.resolve().then(()=>ef);return{getFaculties:ue}},void 0).then(({getFaculties:ue})=>{ue().then(le=>{s(le),h(!1),m("")}).catch(le=>{s([]),h(!1),m("Failed to load faculties. Please try again later."),D({title:"Failed to load faculties",description:(le==null?void 0:le.message)||"Please check your connection and try again.",status:"error",duration:5e3})})})},[]),W.useEffect(()=>{n.faculty_id?(x(!0),c([]),oo(async()=>{const{getMajors:ue}=await Promise.resolve().then(()=>ef);return{getMajors:ue}},void 0).then(({getMajors:ue})=>{ue(n.faculty_id).then(le=>{c(le),x(!1),w("")}).catch(le=>{c([]),x(!1),w("Failed to load majors. Please try again later."),D({title:"Failed to load majors",description:(le==null?void 0:le.message)||"Please check your connection and try again.",status:"error",duration:5e3})})})):c([]),i(ue=>({...ue,major_id:""}))},[n.faculty_id]);const{user:N,loading:$}=ai();return $?e.jsx(bn,{minH:"100vh",children:e.jsx(en,{size:"xl",color:"blue.500"})}):N?e.jsx(kc,{to:"/dashboard",replace:!0}):e.jsx(ke,{minH:"100vh",bgGradient:G,align:"center",justify:"center",children:T?e.jsx(de,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1000",bg:G,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:e.jsx(zm,{initialScale:.9,in:T,children:e.jsxs(et,{spacing:8,maxW:"500px",textAlign:"center",p:4,children:[e.jsx(Cr,{src:xi,boxSize:"80px",alt:"Maaref Logo"}),e.jsx(ut,{fontSize:"3xl",bgGradient:"linear(to-r, blue.500, teal.400)",bgClip:"text",letterSpacing:"tight",children:"Setting up your personalized experience"}),e.jsxs(de,{w:"full",children:[e.jsx(V,{mb:2,fontWeight:"medium",color:A,children:Z<30?"Analyzing your academic profile...":Z<60?"Finding relevant resources...":Z<90?"Preparing your personalized feed...":"Almost done!"}),e.jsx(tl,{value:Z,colorScheme:"blue",h:"10px",rounded:"full",mb:3,hasStripe:!0,isAnimated:!0})]}),e.jsxs(V,{color:"gray.500",fontSize:"md",children:["Customizing your campus experience based on your major.",e.jsx("br",{}),"This will only take a moment..."]})]})})}):e.jsx(bi,{maxW:"container.md",py:8,children:e.jsxs(de,{bg:R,p:[6,8],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:L,borderRadius:"2xl",zIndex:-1},children:[e.jsxs(ke,{align:"center",mb:6,gap:3,justify:"center",children:[e.jsx(Cr,{src:xi,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(ut,{size:"xl",bgGradient:L,bgClip:"text",children:"MU Connect"})]}),t>0&&t<z.length-1&&e.jsxs(de,{mb:6,children:[e.jsx(tl,{value:t/(z.length-2)*100,size:"sm",colorScheme:"blue",borderRadius:"full"}),e.jsxs(ke,{justify:"space-between",mt:2,children:[e.jsxs(V,{fontSize:"sm",color:"gray.500",children:["Step ",t," of ",z.length-2]}),e.jsx(V,{fontSize:"sm",color:"gray.500",children:z[t].title})]})]}),e.jsxs(de,{minH:"320px",display:"flex",flexDirection:"column",justifyContent:"center",children:[t===0&&e.jsx(ws,{in:t===0,offsetY:"20px",children:e.jsxs(et,{spacing:6,textAlign:"center",py:4,children:[e.jsx(ut,{bgGradient:L,bgClip:"text",size:"xl",children:"Welcome to MU Connect"}),e.jsx(V,{fontSize:"lg",color:A,children:"Let's set up your personalized academic experience."}),e.jsx(V,{color:"gray.500",children:"We'll ask you a few questions to customize your campus experience and show you resources relevant to your academic interests."}),e.jsx(Ee,{colorScheme:"blue",size:"lg",rightIcon:e.jsx(Jo,{}),onClick:y,bgGradient:L,_hover:{bgGradient:j},mt:4,children:"Get Started"})]})}),t===1&&e.jsx(ws,{in:t===1,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"What's your name?"}),e.jsxs(pr,{templateColumns:["1fr","1fr 1fr"],gap:6,width:"100%",children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{color:"gray.600",children:"First Name"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Qo,color:"blue.500"})}),e.jsx(Pt,{name:"first_name",placeholder:"John",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.first_name,onChange:oe,onKeyDown:Y})]})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{color:"gray.600",children:"Last Name"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Qo,color:"blue.500"})}),e.jsx(Pt,{name:"last_name",placeholder:"Doe",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.last_name,onChange:oe,onKeyDown:Y})]})]})]})]})}),t===2&&e.jsx(ws,{in:t===2,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"Create a username"}),e.jsxs(ht,{isRequired:!0,width:"100%",children:[e.jsx(ft,{color:"gray.600",children:"Username"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Qo,color:"blue.500"})}),e.jsx(Pt,{name:"username",placeholder:"@johndoe",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.username,onChange:oe,onKeyDown:Y,_placeholder:{color:"gray.400"}})]}),e.jsx(V,{fontSize:"sm",color:"gray.500",mt:2,children:"This will be your unique identifier on MU Connect"})]})]})}),t===3&&e.jsx(ws,{in:t===3,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"What's your email address?"}),e.jsxs(ht,{isRequired:!0,width:"100%",isInvalid:!!O.email,children:[e.jsx(ft,{color:"gray.600",children:"Email"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Gu,color:"blue.500"})}),e.jsx(Pt,{type:"email",name:"email",placeholder:"id@mu.edu.lb",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.email,onChange:oe,onKeyDown:Y,_placeholder:{color:"gray.400"}})]}),O.email&&e.jsx(V,{color:"red.500",fontSize:"sm",mt:1,children:O.email}),e.jsx(V,{fontSize:"sm",color:"gray.500",mt:2,children:"We'll use this to verify your account"})]})]})}),t===4&&e.jsx(ws,{in:t===4,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"Create a secure password"}),e.jsxs(pr,{templateColumns:["1fr","1fr 1fr"],gap:6,width:"100%",children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{color:"gray.600",children:"Password"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Su,color:"blue.500"})}),e.jsx(Pt,{type:"password",name:"password",placeholder:"••••••••",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.password,onChange:oe,onKeyDown:Y,_placeholder:{color:"gray.400"}})]})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{color:"gray.600",children:"Confirm Password"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Su,color:"blue.500"})}),e.jsx(Pt,{type:"password",name:"password_confirmation",placeholder:"••••••••",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.password_confirmation,onChange:oe,onKeyDown:Y,_placeholder:{color:"gray.400"}})]})]})]})]})}),t===5&&e.jsx(ws,{in:t===5,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"What faculty are you in?"}),e.jsxs(ht,{isRequired:!0,width:"100%",isInvalid:!!O.faculty_id,children:[e.jsx(ft,{color:"gray.600",children:"Select your faculty"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Ls,color:"blue.500"})}),e.jsx(Li,{name:"faculty_id",placeholder:u?"Loading...":"Choose a faculty",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.faculty_id,onChange:re,pl:10,isDisabled:u,_placeholder:{color:"gray.400"},children:o.map(ue=>e.jsx("option",{value:ue.id,children:ue.name},ue.id))})]}),b&&e.jsx(V,{color:"red.500",fontSize:"sm",mt:1,children:b}),O.faculty_id&&e.jsx(V,{color:"red.500",fontSize:"sm",mt:1,children:O.faculty_id}),e.jsx(V,{fontSize:"sm",color:"gray.500",mt:2,children:"This helps us show you relevant resources"})]})]})}),t===6&&e.jsx(ws,{in:t===6,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:4,children:[e.jsx(ut,{fontSize:"2xl",color:A,textAlign:"center",children:"What's your major?"}),e.jsxs(ht,{isRequired:!0,width:"100%",isInvalid:!!O.major_id,children:[e.jsx(ft,{color:"gray.600",children:"Select your major"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:$i,color:"blue.500"})}),e.jsx(Li,{name:"major_id",placeholder:p?"Loading...":n.faculty_id?"Choose a major":"Choose a faculty first",focusBorderColor:"blue.500",size:"lg",color:"gray.800",value:n.major_id,onChange:v,pl:10,isDisabled:!n.faculty_id||p,_placeholder:{color:"gray.400"},children:a.map(ue=>e.jsx("option",{value:ue.id,children:ue.name},ue.id))})]}),_&&e.jsx(V,{color:"red.500",fontSize:"sm",mt:1,children:_}),O.major_id&&e.jsx(V,{color:"red.500",fontSize:"sm",mt:1,children:O.major_id}),e.jsx(V,{fontSize:"sm",color:"gray.500",mt:2,children:"We'll personalize your experience based on your major"})]})]})}),t===7&&e.jsx(ws,{in:t===7,offsetY:"20px",children:e.jsxs(et,{spacing:8,py:6,textAlign:"center",children:[e.jsx(Sc,{size:"80px",bg:"green.100",color:"green.500",children:e.jsx(ct,{as:Pi,boxSize:"40px"})}),e.jsx(ut,{fontSize:"2xl",color:A,children:"Ready to create your account"}),e.jsx(de,{borderWidth:"1px",borderColor:E,borderRadius:"lg",p:6,w:"full",bg:"white",boxShadow:"lg",children:e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)"},gap:6,w:"100%",children:[e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(V,{fontSize:"sm",color:"gray.500",children:"First Name"}),e.jsx(V,{fontWeight:"bold",fontSize:"lg",children:n.first_name})]}),e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(V,{fontSize:"sm",color:"gray.500",children:"Last Name"}),e.jsx(V,{fontWeight:"bold",fontSize:"lg",children:n.last_name})]}),e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(V,{fontSize:"sm",color:"gray.500",children:"Username"}),e.jsx(V,{fontWeight:"bold",fontSize:"lg",children:n.username})]}),e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(V,{fontSize:"sm",color:"gray.500",children:"Email"}),e.jsx(V,{fontWeight:"bold",fontSize:"lg",children:n.email})]}),e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(V,{fontSize:"sm",color:"gray.500",children:"Faculty"}),e.jsx(V,{fontWeight:"bold",fontSize:"lg",children:((Q=o.find(ue=>ue.id===parseInt(n.faculty_id)))==null?void 0:Q.name)||"N/A"})]}),e.jsxs(et,{spacing:1,align:"start",children:[e.jsx(V,{fontSize:"sm",color:"gray.500",children:"Major"}),e.jsx(V,{fontWeight:"bold",fontSize:"lg",children:((ie=a.find(ue=>ue.id===parseInt(n.major_id)))==null?void 0:ie.name)||"N/A"})]})]})}),e.jsxs(yr,{spacing:4,children:[e.jsx(Ee,{w:"full",colorScheme:"blue",bgGradient:L,_hover:{bgGradient:j},rightIcon:e.jsx(Jo,{}),onClick:q,isLoading:T,loadingText:"Personalizing your feed...",children:"Confirm & Create Account"}),e.jsx(Ee,{variant:"outline",colorScheme:"blue",size:"md",leftIcon:e.jsx(Bn,{}),onClick:C,children:"Go Back"})]})]})})]}),t>0&&t<7&&e.jsxs(ke,{justify:"space-between",mt:6,children:[e.jsx(Ee,{leftIcon:e.jsx(Bn,{}),onClick:C,variant:"outline",colorScheme:"blue",color:"blue.600",children:"Back"}),e.jsx(Ee,{rightIcon:e.jsx(Jo,{}),onClick:y,colorScheme:"blue",bgGradient:L,_hover:{bgGradient:j},children:"Next"})]}),t!==7&&e.jsxs(de,{mt:8,textAlign:"center",children:[e.jsxs(ke,{align:"center",gap:4,justify:"center",mb:2,children:[e.jsx(tn,{flex:"1",maxW:"100px"}),e.jsx(V,{color:"gray.500",fontSize:"sm",fontWeight:"medium",children:"OR"}),e.jsx(tn,{flex:"1",maxW:"100px"})]}),e.jsxs(V,{color:"gray.500",fontWeight:"medium",children:["Already part of MU Connect?"," ",e.jsx(jc,{as:Hi,to:"/login",color:"blue.500",fontWeight:"600",_hover:{textDecoration:"underline"},children:"Sign in here"})]})]})]})})})},tx=()=>{const[t,r]=W.useState("processing"),n=Vr(),i=ll(),o=Ir(),{handleGoogleAuthSuccess:s}=ai();return W.useEffect(()=>{(async()=>{const c=new URLSearchParams(i.search);if(c.get("error")){o({title:"Authentication Error",description:c.get("error")||"Failed to authenticate with Google",status:"error",duration:5e3,isClosable:!0}),r("error"),setTimeout(()=>n("/login"),2e3);return}try{const u=c.get("data");console.log("Raw data from URL:",u);const h=JSON.parse(u||"{}");if(console.log("Parsed response data:",h),h.is_new_user)r("new-user"),G2(h.temp_token),setTimeout(()=>{n("/complete-google-registration",{state:{email:h.email,name:h.name,temp_token:h.temp_token}})},1e3);else if(r("success"),console.log("Processing existing user login:",h),h.user){console.log("Token from response:",h.token);const p=h.token;p?(console.log("Sanctum token received from backend"),localStorage.setItem("authToken",p)):(console.error("No Sanctum token found in response - authentication may fail"),console.log("Response structure:",Object.keys(h))),h.user.faculty&&(localStorage.setItem("userFaculty",h.user.faculty.name),localStorage.setItem("faculty_id",h.user.faculty.id)),h.user.major&&(localStorage.setItem("userMajor",h.user.major.name),localStorage.setItem("major_id",h.user.major.id)),h.user.role_names&&h.user.role_names.length>0?localStorage.setItem("role",h.user.role_names[0]):h.user.roles&&h.user.roles.length>0&&localStorage.setItem("role",h.user.roles[0]);try{console.log("Updating auth context with user data"),await s(h.user),o({title:"Login Successful",description:h.message||"You have been logged in with Google",status:"success",duration:3e3,isClosable:!0}),console.log("Authentication successful, redirecting to dashboard"),setTimeout(()=>{const x=localStorage.getItem("authToken");console.log("Before redirect - Auth token exists:",!!x),n("/dashboard")},1500)}catch(x){console.error("Error updating auth context:",x),o({title:"Authentication Error",description:"Error setting up your user profile",status:"error",duration:5e3}),setTimeout(()=>n("/login"),2e3)}}else throw new Error("User data not found in response")}catch(u){console.error("Error processing Google callback:",u),r("error"),o({title:"Authentication Error",description:"Failed to process Google authentication",status:"error",duration:5e3,isClosable:!0}),setTimeout(()=>n("/login"),2e3)}})()},[i.search,n,o,s]),e.jsx(bn,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",children:e.jsxs(et,{spacing:6,children:[e.jsx(Cr,{src:xi,boxSize:"80px",alt:"Maaref Logo"}),e.jsxs(ut,{size:"xl",bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:[t==="processing"&&"Processing Authentication",t==="success"&&"Authentication Successful",t==="new-user"&&"Almost There!",t==="error"&&"Authentication Error"]}),e.jsxs(de,{children:[t==="processing"&&e.jsx(en,{size:"xl",color:"blue.500"}),t==="success"&&e.jsx(V,{children:"You will be redirected to the dashboard momentarily..."}),t==="new-user"&&e.jsx(V,{children:"Redirecting to complete your registration..."}),t==="error"&&e.jsx(V,{children:"Redirecting back to login page..."})]})]})})},rx=()=>{const[t,r]=W.useState({username:"",faculty_id:"",major_id:"",temp_token:"",email:"",name:""}),[n,i]=W.useState({}),[o,s]=W.useState([]),[a,c]=W.useState([]),[u,h]=W.useState(!0),[p,x]=W.useState(!1),[b,m]=W.useState(!1),[_,w]=W.useState(!1),[O,k]=W.useState(!1),[T,H]=W.useState(null),[Z,P]=W.useState(null),D=Ir(),B=Vr(),G=ll(),{completeGoogleSignUp:R,user:L}=ai();W.useEffect(()=>{var oe;if((oe=G.state)!=null&&oe.temp_token)r(re=>({...re,temp_token:G.state.temp_token,email:G.state.email||"",name:G.state.name||""}));else{const re=$2();if(!re){D({title:"Session expired",description:"Your registration session has expired or is invalid. Please start over.",status:"error",duration:5e3}),w(!0),setTimeout(()=>B("/login"),2e3);return}r(v=>({...v,temp_token:re}))}const E=1800*1e3,z=setInterval(()=>{const re=Math.max(0,E-(Date.now()-new Date().getTime()));if(re<=0){clearInterval(z),w(!0),D({title:"Session expired",description:"Your registration token has expired. Please start over.",status:"warning",duration:5e3}),B("/login");return}P(Math.floor(re/1e3/60))},6e4);return()=>clearInterval(z)},[G.state,B,D]),W.useEffect(()=>{h(!0),Vp().then(E=>{s(E),h(!1)}).catch(()=>{h(!1),D({title:"Failed to load faculties",description:"Please try refreshing the page.",status:"error",duration:5e3})})},[D]),W.useEffect(()=>{t.faculty_id?(x(!0),Yp(t.faculty_id).then(E=>{c(E),x(!1)}).catch(()=>{x(!1),D({title:"Failed to load majors",description:"Please try selecting a different faculty.",status:"error",duration:5e3})})):c([])},[t.faculty_id,D]),W.useEffect(()=>{L&&B("/dashboard",{replace:!0})},[L,B]);const j=E=>{const{name:z,value:oe}=E.target;r(re=>({...re,[z]:oe})),n[z]&&i(re=>({...re,[z]:void 0}))},A=async E=>{var z,oe,re,v;E.preventDefault(),k(!0),H(null);try{if(!t.username)throw new Error("Username is required");if(!t.faculty_id)throw new Error("Faculty selection is required");if(!t.major_id)throw new Error("Major selection is required");const ne=((z=G.state)==null?void 0:z.temp_token)||localStorage.getItem("googleTempToken");if(!ne)throw new Error("Registration token not found. Please try signing in with Google again.");const M=await R({temp_token:ne,username:t.username,faculty_id:parseInt(t.faculty_id),major_id:parseInt(t.major_id)});console.log("Registration completed, response:",M),M&&M.token?(console.log("Sanctum token received from backend after registration"),localStorage.setItem("authToken",M.token)):console.warn("No Sanctum token found in registration response"),D({title:"Registration Complete!",description:"Your account has been created successfully.",status:"success",duration:5e3,isClosable:!0}),localStorage.removeItem("googleTempToken"),localStorage.removeItem("googleTokenExpiry"),B("/dashboard")}catch(ne){console.error("Registration error:",ne);const M=((re=(oe=ne.response)==null?void 0:oe.data)==null?void 0:re.message)||ne.message||"Failed to complete registration. Please try again.";H(M),(M.includes("expired")||M.includes("invalid")||((v=ne.response)==null?void 0:v.status)===400)&&w(!0)}finally{k(!1)}};return _?e.jsx(bn,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",children:e.jsxs(et,{spacing:6,children:[e.jsx(Cr,{src:xi,boxSize:"80px",alt:"Maaref Logo"}),e.jsx(ut,{size:"xl",color:"red.500",children:"Session Expired"}),e.jsx(V,{children:"Redirecting to login page..."}),e.jsx(en,{size:"md",color:"blue.500"})]})}):e.jsx(ke,{minH:"100vh",bgGradient:"linear(to-br, blue.50 0%, white 50%, blue.50 100%)",align:"center",justify:"center",children:e.jsx(bi,{maxW:"container.md",px:[4,8],children:e.jsxs(de,{bg:"white",p:[6,12],rounded:"2xl",shadow:"xl",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"-4px",right:"-4px",bottom:"-4px",bgGradient:"linear(to-r, blue.500, teal.400)",borderRadius:"2xl",zIndex:-1},children:[e.jsxs(ke,{align:"center",mb:8,gap:3,justify:"center",children:[e.jsx(Cr,{src:xi,boxSize:"50px",alt:"Maaref Logo"}),e.jsx(ut,{size:"xl",bgGradient:"linear(to-r, blue.600, teal.500)",bgClip:"text",children:"Complete Your Registration"})]}),Z!==null&&e.jsxs(eo,{status:"info",mb:6,borderRadius:"md",children:[e.jsx(to,{}),"Please complete your registration within ",Z," minutes."]}),e.jsx("form",{onSubmit:A,children:e.jsxs(yr,{spacing:6,children:[e.jsxs(ht,{isReadOnly:!0,children:[e.jsx(ft,{color:"gray.600",children:"Email"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Gu,color:"blue.500","aria-label":"Email icon"})}),e.jsx(Pt,{name:"email",value:t.email,placeholder:"your.email@mu.edu.lb",size:"lg",bg:"gray.50",focusBorderColor:"blue.500",color:"gray.600"})]})]}),e.jsxs(ht,{isRequired:!0,isInvalid:!!n.username,children:[e.jsx(ft,{color:"gray.600",children:"Username"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Qo,color:"blue.500","aria-label":"Username icon"})}),e.jsx(Pt,{name:"username",value:t.username,onChange:j,placeholder:"Choose a unique username",size:"lg",focusBorderColor:"blue.500",_placeholder:{color:"gray.400"},color:"gray.800"})]}),n.username&&e.jsx(Mn,{children:n.username})]}),e.jsxs(ht,{isRequired:!0,isInvalid:!!n.faculty_id,children:[e.jsx(ft,{color:"gray.600",children:"Faculty"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Ls,color:"blue.500","aria-label":"Faculty icon"})}),e.jsx(Li,{name:"faculty_id",value:t.faculty_id,onChange:j,placeholder:u?"Loading faculties...":"Select your faculty",size:"lg",focusBorderColor:"blue.500",color:"gray.800",isDisabled:u,children:o.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))})]}),n.faculty_id&&e.jsx(Mn,{children:n.faculty_id})]}),e.jsxs(ht,{isRequired:!0,isInvalid:!!n.major_id,children:[e.jsx(ft,{color:"gray.600",children:"Major"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:$i,color:"blue.500","aria-label":"Major icon"})}),e.jsx(Li,{name:"major_id",value:t.major_id,onChange:j,placeholder:t.faculty_id?p?"Loading majors...":"Select your major":"Select a faculty first",size:"lg",focusBorderColor:"blue.500",color:"gray.800",isDisabled:!t.faculty_id||p,children:a.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))})]}),n.major_id&&e.jsx(Mn,{children:n.major_id})]}),T&&e.jsxs(eo,{status:"error",borderRadius:"md",children:[e.jsx(to,{}),T]}),e.jsx(Ee,{type:"submit",colorScheme:"blue",size:"lg",height:"60px",fontSize:"lg",rightIcon:e.jsx(ct,{as:Jo,"aria-label":"Complete"}),isLoading:O,loadingText:"Submitting",bgGradient:"linear(to-r, blue.500, teal.400)",_hover:{bgGradient:"linear(to-r, blue.600, teal.500)"},_active:{transform:"scale(0.98)"},children:"Complete Registration"})]})})]})})})},nx=()=>{var T,H,Z;const t=se("white","gray.800"),r=se("gray.800","whiteAlpha.900"),n=se("gray.600","gray.400"),i=se("gray.200","gray.700"),o=se("blue.600","blue.400"),s=se("yellow.400","yellow.500"),[a,c]=W.useState(null),[u,h]=W.useState(!0),[p,x]=W.useState(null);W.useEffect(()=>{(async()=>{try{const D=await yt.get("/overview");c(D.data)}catch(D){x(D.message||"Failed to fetch dashboard data."),console.error(D)}finally{h(!1)}})()},[]);const b=()=>{const P=new Date().getHours();return P<12?"Good morning":P<18?"Good afternoon":"Good evening"};if(u)return e.jsx(ke,{justify:"center",align:"center",minH:"50vh",children:e.jsx(en,{size:"xl"})});if(p)return e.jsxs(eo,{status:"error",borderRadius:"md",children:[e.jsx(to,{}),e.jsx(V,{children:"There was an error fetching your dashboard data. Please try again later."})]});if(!a)return null;const{user:m,overview:_,general:w}=a,O={events:{count:_.events.registered,label:"Registered Events",link:"/events",icon:kn},clubs:{count:_.clubs.total,label:"Active Clubs",link:"/clubs",icon:ju},resources:{count:w.latest_resources.length,label:"Latest Resources",link:"/resources",icon:Ls},studyGroups:{count:_.study_groups.total,label:"Study Groups",link:"/study-groups",icon:qn}},k=[{title:"Resources",description:"Access study materials, guides, and educational resources.",icon:Ls,link:"/resources",stat:`${_.resources.saved} saved`,preview:w.latest_resources.length>0?`Latest: ${((T=w.latest_resources[0])==null?void 0:T.title)||"Untitled"}`:"No new resources"},{title:"Events",description:"See upcoming campus events and register.",icon:kn,link:"/events",stat:`${_.events.upcoming} upcoming`,preview:w.upcoming_events.length>0?`Next: ${((H=w.upcoming_events[0])==null?void 0:H.title)||"Untitled"}`:"No upcoming events"},{title:"Clubs",description:"Discover, join, and interact with campus clubs.",icon:ju,link:"/clubs",stat:`${_.clubs.total} active clubs`,preview:"Check out the latest club activities and news."},{title:"Study Groups",description:"Collaborate with peers and excel in your courses.",icon:qn,link:"/study-groups",stat:`${_.study_groups.leading} led by you`,preview:"Find or create a study group for your classes."}];return e.jsxs(de,{children:[e.jsx(hr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(er,{mb:6,p:6,borderRadius:"xl",borderWidth:"1px",borderColor:i,bg:t,boxShadow:"md",children:e.jsx(ke,{direction:{base:"column",md:"row"},alignItems:"center",justifyContent:"space-between",children:e.jsxs(at,{spacing:4,mb:{base:4,md:0},children:[e.jsx(Tr,{size:"lg",src:m.avatar,name:`${m.first_name||""} ${m.last_name||""}`.trim()||"User"}),e.jsxs(et,{align:"start",spacing:1,children:[e.jsxs(ut,{size:"md",color:r,children:[b(),", ",m.first_name,"!"]}),e.jsx(V,{fontSize:"sm",color:n,children:((Z=m.major)==null?void 0:Z.name)||"Major not specified"})]})]})})})}),e.jsxs(de,{mb:6,children:[e.jsx(ut,{size:"md",mb:4,color:o,children:"My Overview"}),e.jsx(si,{columns:{base:2,md:4},spacing:4,children:Object.values(O).map(P=>e.jsx(hr.div,{whileHover:{y:-3,scale:1.03},transition:{duration:.15},children:e.jsx(er,{bg:t,borderRadius:"lg",borderWidth:"1px",borderColor:i,p:4,variant:"outline",as:Hi,to:P.link,_hover:{textDecoration:"none",shadow:"md",bg:`${s}10`},children:e.jsx(gi,{label:P.label,placement:"top",hasArrow:!0,children:e.jsxs(at,{spacing:3,align:"center",children:[e.jsx(ct,{as:P.icon,boxSize:6,color:s}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(V,{fontSize:"xl",fontWeight:"bold",color:r,children:P.count}),e.jsx(V,{fontSize:"xs",color:n,whiteSpace:"nowrap",children:P.label})]})]})})})},P.label))})]}),e.jsxs(de,{mb:6,children:[e.jsx(ut,{size:"md",mb:4,color:o,children:"Explore Sections"}),e.jsx(si,{columns:{base:1,md:2},spacing:6,children:k.map(P=>e.jsx(Hi,{to:P.link,style:{textDecoration:"none"},children:e.jsx(hr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:{scale:1.02,y:-4},children:e.jsx(er,{bg:t,borderColor:i,borderWidth:"1px",borderRadius:"xl",boxShadow:"sm",p:6,_hover:{bg:`${s}10`},transition:"all 0.2s ease",h:"100%",children:e.jsxs(ke,{direction:"column",h:"100%",children:[e.jsxs(ke,{align:"center",mb:3,gap:3,children:[e.jsx(de,{fontSize:"2xl",as:P.icon,color:s}),e.jsx(ut,{size:"md",color:o,children:P.title})]}),e.jsx(V,{color:n,mb:4,flexGrow:1,children:P.description}),e.jsx(V,{fontWeight:"bold",color:s,mb:2,children:P.stat}),e.jsxs(at,{mt:"auto",pt:3,borderTopWidth:"1px",borderColor:i,spacing:2,children:[e.jsx(V,{fontSize:"xs",color:n,noOfLines:1,children:P.preview}),e.jsx(ct,{as:Jo,boxSize:4,color:n,ml:"auto"})]})]})})})},P.title))})]})]})},Xp=os,oc=async(t={})=>{const r=await yt.get("/events",{params:t});return r.data&&Array.isArray(r.data.data)&&(r.data.data=r.data.data.map(n=>({...n,media:n.image_path?`${Xp}/api/storage/${n.image_path.replace(/^events[\\\/]/,"events/")}`:void 0}))),r.data},ix=async t=>(await yt.post(`/events/${t}/register`)).data,sx=async t=>(await yt.post(`/events/${t}/unregister`)).data,ox=async(t={})=>{const r=await yt.get("/events/my-events",{params:t});return r.data&&Array.isArray(r.data.data)&&(r.data.data=r.data.data.map(n=>({...n,media:n.image_path?`${Xp}/api/storage/${n.image_path.replace(/^events[\\\/]/,"events/")}`:void 0}))),r.data},ax=async t=>{var r;try{let n=t,i={};if(!(t instanceof FormData)){const s=new FormData;Object.entries(t||{}).forEach(([a,c])=>{c!=null&&(Array.isArray(c)?c.forEach(u=>s.append(`${a}[]`,u)):s.append(a,c))}),n=s}return i["Content-Type"]="multipart/form-data",(await yt.post("/events",n,{headers:i})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to create event"}}},lx=async(t,r)=>{var n;try{let i=r,o={};if(!(r instanceof FormData)){const a=new FormData;return Object.entries(r||{}).forEach(([u,h])=>{h!=null&&(Array.isArray(h)?h.forEach(p=>a.append(`${u}[]`,p)):a.append(u,h))}),a.append("_method","PUT"),i=a,o["Content-Type"]="multipart/form-data",(await yt.post(`/events/${t}`,i,{headers:o})).data}return o["Content-Type"]="multipart/form-data",(await yt.put(`/events/${t}`,i,{headers:o})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to update event"}}},cx=async t=>(await yt.delete(`/events/${t}`)).data,Kp=async t=>(await yt.post(`/events/${t}/toggleSave`)).data,dx=hr(er),ux=()=>{const t=localStorage.getItem("role"),r=t==="admin"||t==="moderator",n=Vr(),i=Ir(),o=se("gray.50","gray.900"),s=se("white","gray.800"),a=se("gray.800","white"),c=se("gray.500","gray.400"),u=se("purple.500","purple.300"),h=se("gray.200","gray.700"),p=ia({base:!0,md:!1}),{isOpen:x,onOpen:b,onClose:m}=Er(),[_,w]=W.useState(null),{isOpen:O,onOpen:k,onClose:T}=Er(),[H,Z]=W.useState(!1),[P,D]=W.useState(null),[B,G]=W.useState(""),[R,L]=W.useState("All"),[j,A]=W.useState([]),[E,z]=W.useState(!1),[oe,re]=W.useState(!1),[v,ne]=W.useState(!1),[M,y]=W.useState([]),[Y,C]=W.useState([]),[q,N]=W.useState(!0),[$,Q]=W.useState(null),[ie,ue]=W.useState(1),[le,ge]=W.useState(1);W.useEffect(()=>{(async()=>{try{const Pe=((await ox()).data||[]).map(De=>De.id);A(Pe)}catch{}})()},[]),W.useEffect(()=>{(async()=>{N(!0),Q(null);try{const ve={page:ie};B&&(ve.search=B),R&&R!=="All"&&(R==="Today"?ve.time_filter="today":R==="This Week"?ve.time_filter="this_week":R==="This Month"&&(ve.time_filter="this_month"));const Pe=await oc(ve),De=(Pe.data||[]).map(_e=>({id:_e.id,title:_e.title,date:_e.event_datetime,location:_e.location,organizer:_e.organizer,description:_e.description,attendees:_e.attendees_count||0,media:_e.media,mediaType:_e.media?_e.media.endsWith(".mp4")?"video":"image":void 0,speakers:_e.speaker_names?_e.speaker_names.split(",").map(Fe=>({name:Fe.trim(),title:""})):[]}));C(De),ue(Pe.current_page||1),ge(Pe.last_page||1)}catch(ve){Q(ve.message||"Failed to fetch events")}finally{N(!1)}})()},[ie,B,R]);const xe=Y,ze=async Ce=>{if(j.includes(Ce)){re(!0);try{await sx(Ce),A(ve=>ve.filter(Pe=>Pe!==Ce)),i({title:"Registration canceled",description:"You've been removed from the event",status:"info",duration:3e3,isClosable:!0})}catch(ve){i({title:"Failed to unregister",description:ve.message||"Could not unregister from event.",status:"error",duration:3e3,isClosable:!0})}finally{re(!1),m()}}else{z(!0);try{await ix(Ce),A(ve=>[...ve,Ce]),i({title:"Registration successful!",description:"You're now registered for this event",status:"success",duration:3e3,isClosable:!0})}catch(ve){i({title:"Failed to register",description:ve.message||"Could not register for event.",status:"error",duration:3e3,isClosable:!0})}finally{z(!1),m()}}},Ie=async Ce=>{try{await Kp(Ce),y(ve=>{const Pe=ve.includes(Ce),De=Pe?ve.filter(_e=>_e!==Ce):[...ve,Ce];return i({title:Pe?"Event unsaved":"Event saved",description:Pe?"Removed from your bookmarks":"Added to your bookmarks",status:"success",duration:2e3,isClosable:!0}),De})}catch(ve){i({title:"Failed to toggle save",description:(ve==null?void 0:ve.message)||"Could not update bookmark.",status:"error",duration:2e3,isClosable:!0})}},We=async Ce=>{ne(!0);try{await ax(Ce);const Pe=((await oc()).data||[]).map(De=>({id:De.id,title:De.title,date:De.event_datetime,location:De.location,organizer:De.organizer,description:De.description,attendees:De.attendees_count||0,maxAttendees:De.max_attendees||0,media:De.media,mediaType:De.image_path?De.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:De.speaker_names?De.speaker_names.split(",").map(_e=>({name:_e.trim(),title:""})):[]}));C(Pe),i({title:"Event created!",description:"Your event has been successfully created",status:"success",duration:3e3,isClosable:!0})}catch(ve){i({title:"Failed to create event",description:ve.message||"Could not create event.",status:"error",duration:3e3,isClosable:!0})}finally{ne(!1)}},be=Ce=>{D(Ce),Z(!0)},ee=()=>{Z(!1),D(null)},Ae=async(Ce,ve)=>{try{await lx(Ce,ve);const De=((await oc()).data||[]).map(_e=>({id:_e.id,title:_e.title,date:_e.event_datetime,location:_e.location,organizer:_e.organizer,description:_e.description,attendees:_e.attendees_count||0,maxAttendees:_e.max_attendees||0,media:_e.media,mediaType:_e.image_path?_e.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:_e.speaker_names?_e.speaker_names.split(",").map(Fe=>({name:Fe.trim(),title:""})):[]}));C(De),i({title:"Event updated!",description:"The event has been updated.",status:"success",duration:2e3,isClosable:!0}),ee()}catch(Pe){i({title:"Failed to update event",description:(Pe==null?void 0:Pe.message)||"Could not update event.",status:"error",duration:2e3,isClosable:!0})}},Se=async Ce=>{try{await cx(Ce);const Pe=((await oc()).data||[]).map(De=>({id:De.id,title:De.title,date:De.event_datetime,location:De.location,organizer:De.organizer,description:De.description,attendees:De.attendees_count||0,maxAttendees:De.max_attendees||0,media:De.media,mediaType:De.image_path?De.image_path.endsWith(".mp4")?"video":"image":void 0,speakers:De.speaker_names?De.speaker_names.split(",").map(_e=>({name:_e.trim(),title:""})):[]}));C(Pe),i({title:"Event deleted!",description:"The event has been removed.",status:"success",duration:2e3,isClosable:!0})}catch(ve){i({title:"Failed to delete event",description:(ve==null?void 0:ve.message)||"Could not delete event.",status:"error",duration:2e3,isClosable:!0})}},ce=Ce=>{w(Ce),b()},Me=()=>{n(-1)},Xe=({event:Ce})=>e.jsx(dx,{onClick:()=>ce(Ce),cursor:"pointer",bg:s,position:"relative",whileHover:{y:-5},transition:{duration:.2},boxShadow:"md",borderRadius:"xl",overflow:"hidden",borderWidth:"1px",borderColor:h,children:e.jsx(ln,{p:0,children:e.jsxs(yr,{spacing:0,children:[e.jsxs(de,{position:"relative",height:"180px",overflow:"hidden",children:[e.jsx(Cr,{src:Ce.media,alt:Ce.title,objectFit:"cover",width:"100%",height:"100%",filter:"brightness(0.9)"}),e.jsxs(de,{position:"absolute",top:3,left:3,bg:"rgba(0,0,0,0.7)",py:1,px:2,borderRadius:"md",color:"white",textAlign:"center",children:[e.jsx(V,{fontSize:"xs",fontWeight:"bold",children:new Date(Ce.date).toLocaleDateString("en-US",{month:"short"}).toUpperCase()}),e.jsx(V,{fontSize:"xl",fontWeight:"bold",children:new Date(Ce.date).getDate()})]}),e.jsx(Mt,{"aria-label":M.includes(Ce.id)?"Unsave event":"Bookmark event",icon:e.jsx($i,{fill:M.includes(Ce.id)?"currentColor":"none"}),position:"absolute",top:3,right:12,colorScheme:"purple",variant:"ghost",size:"lg",borderRadius:"full",onClick:ve=>{ve.stopPropagation(),Ie(Ce.id)}}),e.jsxs(yn,{placement:"bottom-end",children:[e.jsx(vn,{as:Mt,"aria-label":"Event options",icon:e.jsx(Wc,{}),position:"absolute",top:3,right:3,size:"lg",variant:"ghost",borderRadius:"full",zIndex:1,onClick:ve=>ve.stopPropagation()}),e.jsxs(wn,{minW:"140px",zIndex:2,children:[e.jsx(rr,{icon:e.jsx(da,{}),onClick:ve=>{ve.stopPropagation();const Pe=`${window.location.origin}/events/${Ce.id}`;navigator.clipboard.writeText(Pe),i({title:"Link copied!",description:"Event link copied to clipboard.",status:"info",duration:2e3,isClosable:!0})},children:"Share"}),(localStorage.getItem("role")==="admin"||localStorage.getItem("role")==="moderator")&&e.jsxs(e.Fragment,{children:[e.jsx(rr,{icon:e.jsx(ro,{}),onClick:ve=>{ve.stopPropagation(),be(Ce)},children:"Edit"}),e.jsx(rr,{icon:e.jsx(cl,{}),color:"red.500",onClick:async ve=>{ve.stopPropagation(),await Se(Ce.id)},children:"Delete"})]})]})]})]}),e.jsxs(yr,{p:4,spacing:3,children:[e.jsx(ut,{size:"md",color:a,noOfLines:1,children:Ce.title}),e.jsxs(ke,{direction:"column",gap:2,children:[e.jsxs(ke,{align:"center",gap:2,children:[e.jsx(ct,{as:Go,color:u,boxSize:4}),e.jsx(V,{fontSize:"sm",color:c,noOfLines:1,children:Ce.location})]}),e.jsxs(ke,{align:"center",gap:2,children:[e.jsx(ct,{as:kn,color:u,boxSize:4}),e.jsx(V,{fontSize:"sm",color:c,children:new Date(Ce.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]}),j.includes(Ce.id)&&e.jsx(Lr,{colorScheme:"green",alignSelf:"flex-start",px:2,py:1,borderRadius:"full",children:e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ct,{as:Pi}),e.jsx(V,{children:"Registered"})]})})]})]})})},Ce.id),Ze=W.memo(({isOpen:Ce,onClose:ve,event:Pe,onEventUpdate:De})=>{var tt,rt;const[_e,Fe]=W.useState({title:(Pe==null?void 0:Pe.title)||"",date:Pe?(tt=Pe.date)==null?void 0:tt.split("T")[0]:"",time:Pe&&Pe.date?new Date(Pe.date).toISOString().slice(11,16):"",location:(Pe==null?void 0:Pe.location)||"",organizer:(Pe==null?void 0:Pe.organizer)||"",description:(Pe==null?void 0:Pe.description)||"",speakerNames:((rt=Pe==null?void 0:Pe.speakers)==null?void 0:rt.map(gt=>gt.name).join(", "))||"",mediaUrl:(Pe==null?void 0:Pe.media)||"",imageFile:null}),[Ne,st]=W.useState((Pe==null?void 0:Pe.media)||null),Ge=W.useRef(null),[ot,Nt]=W.useState({}),Ct=se("white","gray.800"),dt=se("gray.800","white"),mt=se("gray.500","gray.400");W.useEffect(()=>{var gt,jt;Pe&&(Fe({title:Pe.title||"",date:((gt=Pe.date)==null?void 0:gt.split("T")[0])||"",time:Pe.date?new Date(Pe.date).toISOString().slice(11,16):"",location:Pe.location||"",organizer:Pe.organizer||"",description:Pe.description||"",speakerNames:((jt=Pe.speakers)==null?void 0:jt.map(It=>It.name).join(", "))||"",mediaUrl:Pe.media||"",imageFile:null}),st(Pe.media||null))},[Pe]);const zt=gt=>{const{name:jt,value:It}=gt.target;Fe(Ve=>({...Ve,[jt]:It})),ot[jt]&&Nt(Ve=>({...Ve,[jt]:null}))},Ft=gt=>{const jt=gt.target.files[0];if(!jt)return;Fe(Ve=>({...Ve,imageFile:jt}));const It=new FileReader;It.onload=()=>st(It.result),It.readAsDataURL(jt)},fr=()=>Ge.current.click(),Te=()=>{Nt({}),ve()},He=()=>{const gt={};if(_e.title.trim()||(gt.title="Title is required"),_e.date||(gt.date="Date is required"),_e.time||(gt.time="Time is required"),_e.location.trim()||(gt.location="Location is required"),_e.organizer.trim()||(gt.organizer="Organizer is required"),_e.description.trim()||(gt.description="Description is required"),Object.keys(gt).length>0){Nt(gt);return}const jt={title:_e.title,event_datetime:`${_e.date} ${_e.time}:00`,location:_e.location,organizer:_e.organizer,description:_e.description,speaker_names:_e.speakerNames,image_path:_e.imageFile};De(Pe.id,jt)};return e.jsxs(cn,{isOpen:Ce,onClose:Te,size:"xl",children:[e.jsx(kr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(dn,{bg:Ct,borderRadius:"xl",children:[e.jsx(Fr,{color:dt,children:"Edit Event"}),e.jsx(rn,{}),e.jsx(Ar,{pb:6,children:e.jsxs(pr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:6,children:[e.jsxs(ht,{isRequired:!0,isInvalid:ot.title,children:[e.jsx(ft,{children:"Event Title"}),e.jsx(Pt,{name:"title",value:_e.title,onChange:zt,placeholder:"Enter event title"}),ot.title&&e.jsx(Mn,{children:ot.title})]}),e.jsxs(ht,{isRequired:!0,isInvalid:ot.date,children:[e.jsx(ft,{children:"Date"}),e.jsx(Pt,{name:"date",type:"date",value:_e.date,onChange:zt}),ot.date&&e.jsx(Mn,{children:ot.date})]}),e.jsxs(ht,{isRequired:!0,isInvalid:ot.time,children:[e.jsx(ft,{children:"Time"}),e.jsx(Pt,{name:"time",type:"time",value:_e.time,onChange:zt}),ot.time&&e.jsx(Mn,{children:ot.time})]}),e.jsxs(ht,{isRequired:!0,isInvalid:ot.location,children:[e.jsx(ft,{children:"Location"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Go,color:mt})}),e.jsx(Pt,{name:"location",value:_e.location,onChange:zt,placeholder:"Event location"})]}),ot.location&&e.jsx(Mn,{children:ot.location})]}),e.jsxs(ht,{isRequired:!0,isInvalid:ot.organizer,children:[e.jsx(ft,{children:"Organizer"}),e.jsx(Pt,{name:"organizer",value:_e.organizer,onChange:zt,placeholder:"Organizing department or group"}),ot.organizer&&e.jsx(Mn,{children:ot.organizer})]}),e.jsxs(ht,{gridColumn:{md:"span 2"},isRequired:!0,isInvalid:ot.description,children:[e.jsx(ft,{children:"Description"}),e.jsx(Qn,{name:"description",value:_e.description,onChange:zt,placeholder:"Provide details about your event",rows:5}),ot.description&&e.jsx(Mn,{children:ot.description})]}),e.jsxs(ht,{gridColumn:{md:"span 2"},children:[e.jsx(ft,{children:"Speaker Names"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Mh,color:mt})}),e.jsx(Pt,{name:"speakerNames",value:_e.speakerNames,onChange:zt,placeholder:"Names separated by commas"})]}),e.jsx(Zl,{children:"If applicable, add featured speakers"})]}),e.jsxs(ht,{gridColumn:{md:"span 2"},children:[e.jsx(ft,{children:"Event Image"}),e.jsxs(de,{position:"relative",children:[Ne?e.jsxs(de,{position:"relative",onClick:fr,cursor:"pointer",borderRadius:"md",overflow:"hidden",mb:3,children:[e.jsx(Cr,{src:Ne,alt:"Event preview",height:"200px",width:"100%",objectFit:"cover"}),e.jsx(de,{position:"absolute",top:0,left:0,right:0,bottom:0,bg:"blackAlpha.400",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx(V,{color:"white",fontWeight:"bold",children:"Change Image"})})]}):e.jsx(Ee,{leftIcon:e.jsx(rl,{}),onClick:fr,width:"100%",height:"200px",variant:"outline",mb:3,py:10,children:e.jsxs(et,{spacing:2,children:[e.jsx(V,{children:"Click to upload event image"}),e.jsx(V,{fontSize:"xs",color:mt,children:"JPEG, PNG or GIF, recommended size 1200×630px"})]})}),e.jsx(Pt,{type:"file",accept:"image/*",display:"none",ref:Ge,onChange:Ft})]}),e.jsx(Zl,{children:"A default image will be used if not provided"})]})]})}),e.jsxs(Ur,{children:[e.jsx(Ee,{variant:"outline",mr:3,onClick:Te,children:"Cancel"}),e.jsx(Ee,{colorScheme:"purple",onClick:He,leftIcon:e.jsx(ro,{}),children:"Update Event"})]})]})]})}),pt=W.memo(({isOpen:Ce,onClose:ve,onEventCreate:Pe})=>{const[De,_e]=W.useState({title:"",date:"",time:"",location:"",organizer:"",description:"",speakerNames:"",mediaUrl:""}),[Fe,Ne]=W.useState(null),st=W.useRef(null),[Ge,ot]=W.useState({}),Nt=se("white","gray.800"),Ct=se("gray.800","white"),dt=se("gray.500","gray.400"),{user:mt}=ai(),zt=rt=>{const{name:gt,value:jt}=rt.target;_e(It=>({...It,[gt]:jt})),Ge[gt]&&ot(It=>({...It,[gt]:null}))},Ft=rt=>{const gt=rt.target.files[0];if(!gt)return;_e(It=>({...It,imageFile:gt}));const jt=new FileReader;jt.onload=()=>{Ne(jt.result),_e(It=>({...It,mediaUrl:jt.result}))},jt.readAsDataURL(gt)},fr=()=>{st.current.click()},Te=()=>{_e({title:"",date:"",time:"",location:"",organizer:"",description:"",speakerNames:"",mediaUrl:""}),Ne(null),ot({})},He=()=>{Te(),ve()},tt=()=>{const rt={};if(De.title.trim()||(rt.title="Title is required"),De.date||(rt.date="Date is required"),De.time||(rt.time="Time is required"),De.location.trim()||(rt.location="Location is required"),De.organizer.trim()||(rt.organizer="Organizer is required"),De.description.trim()||(rt.description="Description is required"),Object.keys(rt).length>0){ot(rt);return}const gt={user_id:mt==null?void 0:mt.id,title:De.title,event_datetime:`${De.date} ${De.time}:00`,location:De.location,organizer:De.organizer,description:De.description,speaker_names:De.speakerNames,image_path:De.imageFile};Pe(gt),Te(),ve()};return e.jsxs(cn,{isOpen:Ce,onClose:He,size:"xl",children:[e.jsx(kr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(dn,{bg:Nt,borderRadius:"xl",children:[e.jsx(Fr,{color:Ct,children:"Create New Event"}),e.jsx(rn,{}),e.jsx(Ar,{pb:6,children:e.jsxs(pr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:6,children:[e.jsxs(ht,{isRequired:!0,isInvalid:Ge.title,children:[e.jsx(ft,{children:"Event Title"}),e.jsx(Pt,{name:"title",value:De.title,onChange:zt,placeholder:"Enter event title"}),Ge.title&&e.jsx(Mn,{children:Ge.title})]}),e.jsxs(ht,{isRequired:!0,isInvalid:Ge.date,children:[e.jsx(ft,{children:"Date"}),e.jsx(Pt,{name:"date",type:"date",value:De.date,onChange:zt}),Ge.date&&e.jsx(Mn,{children:Ge.date})]}),e.jsxs(ht,{isRequired:!0,isInvalid:Ge.time,children:[e.jsx(ft,{children:"Time"}),e.jsx(Pt,{name:"time",type:"time",value:De.time,onChange:zt}),Ge.time&&e.jsx(Mn,{children:Ge.time})]}),e.jsxs(ht,{isRequired:!0,isInvalid:Ge.location,children:[e.jsx(ft,{children:"Location"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Go,color:dt})}),e.jsx(Pt,{name:"location",value:De.location,onChange:zt,placeholder:"Event location"})]}),Ge.location&&e.jsx(Mn,{children:Ge.location})]}),e.jsxs(ht,{isRequired:!0,isInvalid:Ge.organizer,children:[e.jsx(ft,{children:"Organizer"}),e.jsx(Pt,{name:"organizer",value:De.organizer,onChange:zt,placeholder:"Organizing department or group"}),Ge.organizer&&e.jsx(Mn,{children:Ge.organizer})]}),e.jsxs(ht,{gridColumn:{md:"span 2"},isRequired:!0,isInvalid:Ge.description,children:[e.jsx(ft,{children:"Description"}),e.jsx(Qn,{name:"description",value:De.description,onChange:zt,placeholder:"Provide details about your event",rows:5}),Ge.description&&e.jsx(Mn,{children:Ge.description})]}),e.jsxs(ht,{gridColumn:{md:"span 2"},children:[e.jsx(ft,{children:"Speaker Names"}),e.jsxs(Rr,{children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:Mh,color:dt})}),e.jsx(Pt,{name:"speakerNames",value:De.speakerNames,onChange:zt,placeholder:"Names separated by commas"})]}),e.jsx(Zl,{children:"If applicable, add featured speakers"})]}),e.jsxs(ht,{gridColumn:{md:"span 2"},children:[e.jsx(ft,{children:"Event Image"}),e.jsxs(de,{position:"relative",children:[Fe?e.jsxs(de,{position:"relative",onClick:fr,cursor:"pointer",borderRadius:"md",overflow:"hidden",mb:3,children:[e.jsx(Cr,{src:Fe,alt:"Event preview",height:"200px",width:"100%",objectFit:"cover"}),e.jsx(de,{position:"absolute",top:0,left:0,right:0,bottom:0,bg:"blackAlpha.400",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx(V,{color:"white",fontWeight:"bold",children:"Change Image"})})]}):e.jsx(Ee,{leftIcon:e.jsx(rl,{}),onClick:fr,width:"100%",height:"200px",variant:"outline",mb:3,py:10,children:e.jsxs(et,{spacing:2,children:[e.jsx(V,{children:"Click to upload event image"}),e.jsx(V,{fontSize:"xs",color:dt,children:"JPEG, PNG or GIF, recommended size 1200×630px"})]})}),e.jsx(Pt,{type:"file",accept:"image/*",display:"none",ref:st,onChange:Ft})]}),e.jsx(Zl,{children:"A default image will be used if not provided"})]})]})}),e.jsxs(Ur,{children:[e.jsx(Ee,{variant:"outline",mr:3,onClick:He,children:"Cancel"}),e.jsx(Ee,{colorScheme:"purple",onClick:tt,leftIcon:e.jsx(Jn,{}),children:"Create Event"})]})]})]})}),Ue=()=>{if(!_)return null;const Ce=new Date(_.date),ve=Ce<new Date,Pe=j.includes(_.id);return e.jsxs(cn,{isOpen:x,onClose:m,size:"xl",children:[e.jsx(kr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(dn,{bg:s,borderRadius:"xl",children:[e.jsx(Fr,{color:a,children:_.title}),e.jsx(rn,{}),e.jsxs(Ar,{pb:6,children:[e.jsx(de,{position:"relative",mb:6,children:e.jsx(Cr,{src:_.media,alt:_.title,w:"100%",h:"250px",objectFit:"cover",borderRadius:"lg"})}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"2fr 1fr"},gap:6,children:[e.jsxs(de,{children:[e.jsx(ut,{size:"md",mb:3,color:a,children:"About This Event"}),e.jsx(V,{color:a,mb:4,children:_.description}),_.speakers&&_.speakers.length>0&&e.jsxs(de,{mt:5,children:[e.jsx(ut,{size:"sm",mb:3,color:a,children:"Featured Speakers"}),e.jsx(et,{align:"start",spacing:3,children:_.speakers.map((De,_e)=>e.jsxs(at,{spacing:3,children:[e.jsx(Tr,{size:"sm",name:De.name}),e.jsx(de,{children:e.jsx(V,{fontWeight:"bold",fontSize:"sm",children:De.name})})]},_e))})]})]}),e.jsx(de,{children:e.jsxs(et,{align:"start",spacing:4,p:4,bg:se("gray.50","gray.700"),borderRadius:"lg",children:[e.jsx(ut,{size:"sm",color:a,children:"Event Details"}),e.jsxs(at,{children:[e.jsx(ct,{as:kn,color:u}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(V,{fontSize:"sm",fontWeight:"bold",children:"Date & Time"}),e.jsx(V,{fontSize:"sm",children:Ce.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx(V,{fontSize:"sm",children:Ce.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]}),e.jsxs(at,{children:[e.jsx(ct,{as:Go,color:u}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(V,{fontSize:"sm",fontWeight:"bold",children:"Location"}),e.jsx(V,{fontSize:"sm",children:_.location})]})]}),e.jsxs(at,{children:[e.jsx(ct,{as:Ps,color:u}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(V,{fontSize:"sm",fontWeight:"bold",children:"Organizer"}),e.jsx(V,{fontSize:"sm",children:_.organizer})]})]})]})})]})]}),e.jsxs(Ur,{children:[e.jsx(Ee,{variant:"outline",mr:3,onClick:m,children:"Close"}),ve?e.jsx(V,{color:c,children:"Event Finished"}):e.jsx(Ee,{colorScheme:Pe?"red":"purple",onClick:()=>ze(_.id),isLoading:E,children:Pe?"Cancel Registration":"Register Now"})]})]})]})};return e.jsxs(de,{minH:"100vh",bg:o,py:6,px:{base:4,md:6},children:[e.jsxs(bi,{maxW:"1200px",children:[e.jsxs(ke,{mb:8,align:"center",justify:"space-between",children:[e.jsxs(ke,{align:"center",children:[e.jsx(Mt,{icon:e.jsx(ss,{}),onClick:Me,"aria-label":"Go back",variant:"ghost",color:a,size:"lg",mr:3,_hover:{bg:se("gray.100","gray.700")}}),e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(ut,{size:"lg",color:a,children:"Campus Events"}),e.jsx(V,{fontSize:"sm",color:c,children:"Discover and register for upcoming events"})]})]}),r&&e.jsx(Ee,{onClick:k,colorScheme:"purple",leftIcon:e.jsx(Jn,{}),size:p?"sm":"md",display:{base:"none",md:"flex"},children:"Create Event"})]}),e.jsx(de,{bg:s,p:5,borderRadius:"xl",boxShadow:"sm",mb:8,borderWidth:"1px",borderColor:h,children:e.jsxs(ke,{direction:{base:"column",md:"row"},gap:4,justify:"space-between",align:{base:"stretch",md:"center"},children:[e.jsxs(Rr,{maxW:{base:"100%",md:"400px"},children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:no,color:c})}),e.jsx(Pt,{placeholder:"Search for events...",value:B,onChange:Ce=>G(Ce.target.value),focusBorderColor:u})]}),e.jsx(at,{spacing:3,children:e.jsxs(yn,{children:[e.jsx(vn,{as:Ee,rightIcon:e.jsx(is,{}),variant:"outline",size:"md",children:e.jsxs(ke,{align:"center",children:[e.jsx(ct,{as:kn,mr:2}),e.jsx(V,{children:R})]})}),e.jsxs(wn,{children:[e.jsx(rr,{onClick:()=>L("All"),fontWeight:R==="All"?"bold":"normal",children:"All"}),e.jsx(rr,{onClick:()=>L("Today"),fontWeight:R==="Today"?"bold":"normal",children:"Today"}),e.jsx(rr,{onClick:()=>L("This Week"),fontWeight:R==="This Week"?"bold":"normal",children:"This Week"}),e.jsx(rr,{onClick:()=>L("This Month"),fontWeight:R==="This Month"?"bold":"normal",children:"This Month"})]})]})})]})}),e.jsxs(sa,{variant:"soft-rounded",colorScheme:"purple",children:[e.jsxs(oa,{mb:6,children:[e.jsxs(Yn,{_selected:{bg:`${u}20`,color:u,fontWeight:"semibold"},children:["All Events (",xe.length,")"]}),e.jsxs(Yn,{_selected:{bg:`${u}20`,color:u,fontWeight:"semibold"},children:["My Events (",j.length,")"]})]}),e.jsxs(al,{children:[e.jsx(oi,{p:0,children:q?e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:[...Array(6)].map((Ce,ve)=>e.jsx(Sr,{height:"300px",borderRadius:"xl"},ve))}):xe.length>0?e.jsxs(e.Fragment,{children:[e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:xe.map(Ce=>e.jsx(Xe,{event:Ce},Ce.id))}),e.jsxs(ke,{justify:"center",mt:8,gap:2,align:"center",children:[e.jsx(Ee,{onClick:()=>ue(Ce=>Math.max(1,Ce-1)),disabled:ie===1,variant:"outline",children:"Previous"}),e.jsxs(V,{px:3,fontWeight:"medium",children:["Page ",ie," of ",le]}),e.jsx(Ee,{onClick:()=>ue(Ce=>Math.min(le,Ce+1)),disabled:ie===le,variant:"outline",children:"Next"})]})]}):e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:h,borderRadius:"lg",children:e.jsx(V,{color:c,children:"No Events Found!"})})}),e.jsx(oi,{p:0,children:j.length>0?e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)"},gap:6,children:Y.filter(Ce=>j.includes(Ce.id)).map(Ce=>e.jsx(Xe,{event:Ce},Ce.id))}):e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:h,borderRadius:"lg",children:e.jsx(V,{color:c,children:"You haven't registered for any events yet"})})})]})]})]}),e.jsx(Mt,{position:"fixed",bottom:"24px",right:"24px","aria-label":"Create event",icon:e.jsx(Jn,{}),colorScheme:"purple",isRound:!0,boxShadow:"lg",size:"lg",onClick:k,display:{base:"flex",md:"none"},zIndex:2}),e.jsx(Ue,{}),H&&e.jsx(Ze,{isOpen:H,onClose:ee,event:P,onEventUpdate:Ae}),e.jsx(pt,{isOpen:O,onClose:T,onEventCreate:We})]})},Qp="/assets/mu-connect-DfdYbfk5.png",Ru=Es,hx=async()=>{try{return(await Pr.get(`${Ru}/my-profile`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}})).data}catch(t){throw console.error("Error fetching user profile:",t),t}},fx=async(t,r)=>{try{const n=r.avatarFile instanceof File;let i;if(n){const o=new FormData;o.append("avatar",r.avatarFile),o.append("_method","PUT"),Object.keys(r).forEach(s=>{s!=="avatarFile"&&s!=="avatar"&&r[s]!==void 0&&o.append(s,r[s])}),i=await Pr.post(`${Ru}/user/${t}`,o,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"multipart/form-data"}})}else i=await Pr.put(`${Ru}/user/${t}`,r,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});return i.data}catch(n){throw console.error("Error updating user profile:",n),n}},px=async(t="")=>{try{const r=t?`/users?search=${encodeURIComponent(t)}`:"/users";return(await yt.get(r)).data}catch(r){throw console.error("Error fetching users:",r),r}},mx=async t=>{try{return(await yt.patch(`/users/${t}/toggle-active`,{})).data}catch(r){throw console.error("Error toggling user active status:",r),r}},gx=async(t="me")=>{try{return(await yt.get(`/users/${t}`)).data}catch(r){throw console.error("Error fetching visitor profile:",r),r}},xx=async(t,r)=>{try{return(await yt.put(`/users/${t}/roles`,{role:r})).data}catch(n){throw console.error("Error updating user role:",n),n}},Zp=6048e5,bx=864e5,rf=Symbol.for("constructDateFrom");function Ns(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&rf in t?t[rf](r):t instanceof Date?new t.constructor(r):new Date(r)}function Oi(t,r){return Ns(r||t,t)}let yx={};function Kc(){return yx}function il(t,r){var c,u,h,p,x,b,m,_;const n=Kc(),i=(_=(m=(p=(h=r==null?void 0:r.weekStartsOn)!=null?h:(u=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)!=null?p:n.weekStartsOn)!=null?m:(b=(x=n.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)!=null?_:0,o=Oi(t,r==null?void 0:r.in),s=o.getDay(),a=(s<i?7:0)+s-i;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Rc(t,r){return il(t,{...r,weekStartsOn:1})}function e0(t,r){const n=Oi(t,r==null?void 0:r.in),i=n.getFullYear(),o=Ns(n,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);const s=Rc(o),a=Ns(n,0);a.setFullYear(i,0,4),a.setHours(0,0,0,0);const c=Rc(a);return n.getTime()>=s.getTime()?i+1:n.getTime()>=c.getTime()?i:i-1}function nf(t){const r=Oi(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function vx(t,...r){const n=Ns.bind(null,r.find(i=>typeof i=="object"));return r.map(n)}function sf(t,r){const n=Oi(t,r==null?void 0:r.in);return n.setHours(0,0,0,0),n}function wx(t,r,n){const[i,o]=vx(n==null?void 0:n.in,t,r),s=sf(i),a=sf(o),c=+s-nf(s),u=+a-nf(a);return Math.round((c-u)/bx)}function jx(t,r){const n=e0(t,r),i=Ns(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Rc(i)}function Sx(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Cx(t){return!(!Sx(t)&&typeof t!="number"||isNaN(+Oi(t)))}function _x(t,r){const n=Oi(t,r==null?void 0:r.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const kx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ax=(t,r,n)=>{let i;const o=kx[t];return typeof o=="string"?i=o:r===1?i=o.one:i=o.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Xd(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Lx={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Px={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Nx={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ox={date:Xd({formats:Lx,defaultWidth:"full"}),time:Xd({formats:Px,defaultWidth:"full"}),dateTime:Xd({formats:Nx,defaultWidth:"full"})},Rx={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ex=(t,r,n,i)=>Rx[t];function $a(t){return(r,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let o;if(i==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):a;o=t.formattingValues[c]||t.formattingValues[a]}else{const a=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[c]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(r):r;return o[s]}}const Tx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Fx={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ix={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Dx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Bx=(t,r)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},qx={ordinalNumber:Bx,era:$a({values:Tx,defaultWidth:"wide"}),quarter:$a({values:zx,defaultWidth:"wide",argumentCallback:t=>t-1}),month:$a({values:Fx,defaultWidth:"wide"}),day:$a({values:Ix,defaultWidth:"wide"}),dayPeriod:$a({values:Mx,defaultWidth:"wide",formattingValues:Dx,defaultFormattingWidth:"wide"})};function Ga(t){return(r,n={})=>{const i=n.width,o=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],s=r.match(o);if(!s)return null;const a=s[0],c=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?Ux(c,x=>x.test(a)):Wx(c,x=>x.test(a));let h;h=t.valueCallback?t.valueCallback(u):u,h=n.valueCallback?n.valueCallback(h):h;const p=r.slice(a.length);return{value:h,rest:p}}}function Wx(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function Ux(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function Hx(t){return(r,n={})=>{const i=r.match(t.matchPattern);if(!i)return null;const o=i[0],s=r.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const c=r.slice(o.length);return{value:a,rest:c}}}const $x=/^(\d+)(th|st|nd|rd)?/i,Gx=/\d+/i,Vx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Yx={any:[/^b/i,/^(a|c)/i]},Jx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xx={any:[/1/i,/2/i,/3/i,/4/i]},Kx={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Qx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Zx={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},e5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},t5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},r5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},n5={ordinalNumber:Hx({matchPattern:$x,parsePattern:Gx,valueCallback:t=>parseInt(t,10)}),era:Ga({matchPatterns:Vx,defaultMatchWidth:"wide",parsePatterns:Yx,defaultParseWidth:"any"}),quarter:Ga({matchPatterns:Jx,defaultMatchWidth:"wide",parsePatterns:Xx,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ga({matchPatterns:Kx,defaultMatchWidth:"wide",parsePatterns:Qx,defaultParseWidth:"any"}),day:Ga({matchPatterns:Zx,defaultMatchWidth:"wide",parsePatterns:e5,defaultParseWidth:"any"}),dayPeriod:Ga({matchPatterns:t5,defaultMatchWidth:"any",parsePatterns:r5,defaultParseWidth:"any"})},i5={code:"en-US",formatDistance:Ax,formatLong:Ox,formatRelative:Ex,localize:qx,match:n5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function s5(t,r){const n=Oi(t,r==null?void 0:r.in);return wx(n,_x(n))+1}function o5(t,r){const n=Oi(t,r==null?void 0:r.in),i=+Rc(n)-+jx(n);return Math.round(i/Zp)+1}function t0(t,r){var p,x,b,m,_,w,O,k;const n=Oi(t,r==null?void 0:r.in),i=n.getFullYear(),o=Kc(),s=(k=(O=(m=(b=r==null?void 0:r.firstWeekContainsDate)!=null?b:(x=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)!=null?m:o.firstWeekContainsDate)!=null?O:(w=(_=o.locale)==null?void 0:_.options)==null?void 0:w.firstWeekContainsDate)!=null?k:1,a=Ns((r==null?void 0:r.in)||t,0);a.setFullYear(i+1,0,s),a.setHours(0,0,0,0);const c=il(a,r),u=Ns((r==null?void 0:r.in)||t,0);u.setFullYear(i,0,s),u.setHours(0,0,0,0);const h=il(u,r);return+n>=+c?i+1:+n>=+h?i:i-1}function a5(t,r){var c,u,h,p,x,b,m,_;const n=Kc(),i=(_=(m=(p=(h=r==null?void 0:r.firstWeekContainsDate)!=null?h:(u=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)!=null?p:n.firstWeekContainsDate)!=null?m:(b=(x=n.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)!=null?_:1,o=t0(t,r),s=Ns((r==null?void 0:r.in)||t,0);return s.setFullYear(o,0,i),s.setHours(0,0,0,0),il(s,r)}function l5(t,r){const n=Oi(t,r==null?void 0:r.in),i=+il(n,r)-+a5(n,r);return Math.round(i/Zp)+1}function br(t,r){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(r,"0");return n+i}const js={y(t,r){const n=t.getFullYear(),i=n>0?n:1-n;return br(r==="yy"?i%100:i,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):br(n+1,2)},d(t,r){return br(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return br(t.getHours()%12||12,r.length)},H(t,r){return br(t.getHours(),r.length)},m(t,r){return br(t.getMinutes(),r.length)},s(t,r){return br(t.getSeconds(),r.length)},S(t,r){const n=r.length,i=t.getMilliseconds(),o=Math.trunc(i*Math.pow(10,n-3));return br(o,r.length)}},Mo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},of={G:function(t,r,n){const i=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const i=t.getFullYear(),o=i>0?i:1-i;return n.ordinalNumber(o,{unit:"year"})}return js.y(t,r)},Y:function(t,r,n,i){const o=t0(t,i),s=o>0?o:1-o;if(r==="YY"){const a=s%100;return br(a,2)}return r==="Yo"?n.ordinalNumber(s,{unit:"year"}):br(s,r.length)},R:function(t,r){const n=e0(t);return br(n,r.length)},u:function(t,r){const n=t.getFullYear();return br(n,r.length)},Q:function(t,r,n){const i=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(i);case"QQ":return br(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,r,n){const i=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(i);case"qq":return br(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,r,n){const i=t.getMonth();switch(r){case"M":case"MM":return js.M(t,r);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,r,n){const i=t.getMonth();switch(r){case"L":return String(i+1);case"LL":return br(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,r,n,i){const o=l5(t,i);return r==="wo"?n.ordinalNumber(o,{unit:"week"}):br(o,r.length)},I:function(t,r,n){const i=o5(t);return r==="Io"?n.ordinalNumber(i,{unit:"week"}):br(i,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):js.d(t,r)},D:function(t,r,n){const i=s5(t);return r==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):br(i,r.length)},E:function(t,r,n){const i=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,r,n,i){const o=t.getDay(),s=(o-i.weekStartsOn+8)%7||7;switch(r){case"e":return String(s);case"ee":return br(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,r,n,i){const o=t.getDay(),s=(o-i.weekStartsOn+8)%7||7;switch(r){case"c":return String(s);case"cc":return br(s,r.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,r,n){const i=t.getDay(),o=i===0?7:i;switch(r){case"i":return String(o);case"ii":return br(o,r.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,r,n){const o=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,r,n){const i=t.getHours();let o;switch(i===12?o=Mo.noon:i===0?o=Mo.midnight:o=i/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,r,n){const i=t.getHours();let o;switch(i>=17?o=Mo.evening:i>=12?o=Mo.afternoon:i>=4?o=Mo.morning:o=Mo.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return js.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):js.H(t,r)},K:function(t,r,n){const i=t.getHours()%12;return r==="Ko"?n.ordinalNumber(i,{unit:"hour"}):br(i,r.length)},k:function(t,r,n){let i=t.getHours();return i===0&&(i=24),r==="ko"?n.ordinalNumber(i,{unit:"hour"}):br(i,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):js.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):js.s(t,r)},S:function(t,r){return js.S(t,r)},X:function(t,r,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(r){case"X":return lf(i);case"XXXX":case"XX":return Vs(i);case"XXXXX":case"XXX":default:return Vs(i,":")}},x:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"x":return lf(i);case"xxxx":case"xx":return Vs(i);case"xxxxx":case"xxx":default:return Vs(i,":")}},O:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+af(i,":");case"OOOO":default:return"GMT"+Vs(i,":")}},z:function(t,r,n){const i=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+af(i,":");case"zzzz":default:return"GMT"+Vs(i,":")}},t:function(t,r,n){const i=Math.trunc(+t/1e3);return br(i,r.length)},T:function(t,r,n){return br(+t,r.length)}};function af(t,r=""){const n=t>0?"-":"+",i=Math.abs(t),o=Math.trunc(i/60),s=i%60;return s===0?n+String(o):n+String(o)+r+br(s,2)}function lf(t,r){return t%60===0?(t>0?"-":"+")+br(Math.abs(t)/60,2):Vs(t,r)}function Vs(t,r=""){const n=t>0?"-":"+",i=Math.abs(t),o=br(Math.trunc(i/60),2),s=br(i%60,2);return n+o+r+s}const cf=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},r0=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},c5=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],o=n[2];if(!o)return cf(t,r);let s;switch(i){case"P":s=r.dateTime({width:"short"});break;case"PP":s=r.dateTime({width:"medium"});break;case"PPP":s=r.dateTime({width:"long"});break;case"PPPP":default:s=r.dateTime({width:"full"});break}return s.replace("{{date}}",cf(i,r)).replace("{{time}}",r0(o,r))},d5={p:r0,P:c5},u5=/^D+$/,h5=/^Y+$/,f5=["D","DD","YY","YYYY"];function p5(t){return u5.test(t)}function m5(t){return h5.test(t)}function g5(t,r,n){const i=x5(t,r,n);if(console.warn(i),f5.includes(t))throw new RangeError(i)}function x5(t,r,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const b5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,y5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,v5=/^'([^]*?)'?$/,w5=/''/g,j5=/[a-zA-Z]/;function df(t,r,n){var p,x,b,m,_,w,O,k,T;const i=Kc(),o=(p=i.locale)!=null?p:i5,s=(_=(m=i.firstWeekContainsDate)!=null?m:(b=(x=i.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)!=null?_:1,a=(T=(k=i.weekStartsOn)!=null?k:(O=(w=i.locale)==null?void 0:w.options)==null?void 0:O.weekStartsOn)!=null?T:0,c=Oi(t,n==null?void 0:n.in);if(!Cx(c))throw new RangeError("Invalid time value");let u=r.match(y5).map(H=>{const Z=H[0];if(Z==="p"||Z==="P"){const P=d5[Z];return P(H,o.formatLong)}return H}).join("").match(b5).map(H=>{if(H==="''")return{isToken:!1,value:"'"};const Z=H[0];if(Z==="'")return{isToken:!1,value:S5(H)};if(of[Z])return{isToken:!0,value:H};if(Z.match(j5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Z+"`");return{isToken:!1,value:H}});o.localize.preprocessor&&(u=o.localize.preprocessor(c,u));const h={firstWeekContainsDate:s,weekStartsOn:a,locale:o};return u.map(H=>{if(!H.isToken)return H.value;const Z=H.value;(m5(Z)||p5(Z))&&g5(Z,r,String(t));const P=of[Z[0]];return P(c,Z,o.localize,h)}).join("")}function S5(t){const r=t.match(v5);return r?r[1].replace(w5,"'"):t}mg.register(gg,xg,bg,yg,vg,wg,jg);const C5=()=>{var Ne,st,Ge,ot,Nt,Ct,dt,mt,zt,Ft,fr,Te,He,tt,rt,gt,jt,It,Ve,Ye,Et,lt;const t=Vr(),r=Ir(),[n,i]=W.useState(!1),[o,s]=W.useState(!0),[a,c]=W.useState(null),[u,h]=W.useState(null),[p,x]=W.useState(null),[b,m]=W.useState(!1),[_,w]=W.useState(""),[O,k]=W.useState([]),[T,H]=W.useState(!1),[Z,P]=W.useState(""),D=localStorage.getItem("role"),[B,G]=W.useState("overview"),{isOpen:R,onOpen:L,onClose:j}=Er(),[A,E]=W.useState(null),[z,oe]=W.useState(""),[re,v]=W.useState(!1);W.useEffect(()=>{$()},[r]);const ne=se("white","gray.700"),M=se("gray.800","white"),y=se("gray.500","gray.400"),Y=je=>{const{name:Ot,value:Ht}=je.target;c(sr=>({...sr,[Ot]:Ht})),v(!0)},C=je=>{const Ot=je.target.files[0];if(Ot){const Ht=new FileReader;Ht.onloadend=()=>{c(sr=>({...sr,avatar:Ht.result,avatarFile:Ot})),v(!0)},Ht.readAsDataURL(Ot)}},q=async()=>{try{const je={username:a.username,first_name:a.first_name,last_name:a.last_name,email:a.email,bio:a.bio};_&&(je.password=_),a.avatarFile&&(je.avatarFile=a.avatarFile),await fx(a.id,je),await $(),r({title:"Profile updated",description:"Your profile has been updated successfully.",status:"success",duration:5e3,isClosable:!0}),w(""),i(!1),v(!1)}catch(je){ns("handleSave",je),r(ks(je,"There was an error updating your profile"))}},N=()=>{n&&!window.confirm("Are you sure you want to leave? Your changes will be lost.")||(n?(i(!1),w(""),$()):t(-1))},$=async()=>{try{s(!0);const je=await hx();c(je.user),x(je.analytics),s(!1)}catch(je){ns("fetchProfileData",je),r(ks(je,"There was an error loading your profile data")),s(!1)}},Q=async(je="")=>{var Ot;try{H(!0);const Ht=await px(je),sr=Ht.data?Ht.data:((Ot=Ht.data)==null?void 0:Ot.data)||Ht.users||Ht;k(sr),H(!1)}catch(Ht){ns("fetchUsers",Ht),r(ks(Ht,"There was an error loading the users list")),H(!1)}},ie=()=>{P(""),Q("")},ue=async je=>{try{const Ot=await mx(je);k(Ht=>Ht.map(sr=>sr.id===je?{...sr,is_active:Ot.is_active}:sr)),r({title:"Updated",description:`User is now ${Ot.is_active?"active":"inactive"}.`,status:"success",duration:4e3,isClosable:!0})}catch{r({title:"Error",description:"Failed to update user status.",status:"error",duration:4e3,isClosable:!0})}},le=je=>{E(je),oe(je.primary_role),L()},ge=async()=>{if(!(!A||!z))try{await xx(A.id,z),k(je=>je.map(Ot=>Ot.id===A.id?{...Ot,primary_role:z}:Ot)),r({title:"Role Updated",description:`${A.username}'s role has been updated to ${z}.`,status:"success",duration:4e3,isClosable:!0}),j()}catch{r({title:"Error",description:"Failed to update user role.",status:"error",duration:4e3,isClosable:!0})}},xe=je=>je?je.avatar&&je.avatar.startsWith("data:")?je.avatar:je.avatar_url||null:null,ze=je=>je?`${je.first_name||""} ${je.last_name||""}`.trim():"",Ie=[{key:"resources_shared",label:"Resources Shared",icon:Dn,value:((Ne=p==null?void 0:p.resources)==null?void 0:Ne.shared)||0},{key:"study_groups_total",label:"Study Groups",icon:qn,value:((st=p==null?void 0:p.study_groups)==null?void 0:st.total)||0},{key:"events_registered",label:"Events Registered",icon:kn,value:((Ge=p==null?void 0:p.events)==null?void 0:Ge.registered)||0},{key:"applications_total",label:"Applications",icon:fp,value:((ot=p==null?void 0:p.applications)==null?void 0:ot.total)||0}],We={labels:["Comments Made","Upvotes Given","Upvotes Received"],datasets:[{label:"Contributions",data:[(p==null?void 0:p.contributions.comments_made)||0,(p==null?void 0:p.contributions.upvotes_given)||0,(p==null?void 0:p.contributions.upvotes_received)||0],backgroundColor:["#3498db","#2ecc71","#e74c3c"],borderWidth:1}]},be={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(je){return`${je.label}: ${je.raw}`}}}}},ee={labels:((Ct=(Nt=p==null?void 0:p.charts)==null?void 0:Nt.top_posting_users)==null?void 0:Ct.map(je=>je.username))||[],datasets:[{label:"Resources Shared",data:((mt=(dt=p==null?void 0:p.charts)==null?void 0:dt.top_posting_users)==null?void 0:mt.map(je=>je.resources_count))||[],backgroundColor:"#3498db",borderColor:"#2980b9",borderWidth:1}]},Ae={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Resources Shared"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Posting Users",font:{size:18}}}},Se={labels:((Ft=(zt=p==null?void 0:p.charts)==null?void 0:zt.top_commenting_users)==null?void 0:Ft.map(je=>je.username))||[],datasets:[{label:"Comments Made",data:((Te=(fr=p==null?void 0:p.charts)==null?void 0:fr.top_commenting_users)==null?void 0:Te.map(je=>je.comments_count))||[],backgroundColor:"#2ecc71",borderColor:"#27ae60",borderWidth:1}]},ce={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Comments Made"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Commenting Users",font:{size:18}}}},Me={labels:((tt=(He=p==null?void 0:p.charts)==null?void 0:He.top_upvoting_users)==null?void 0:tt.map(je=>je.username))||[],datasets:[{label:"Upvotes Given",data:((gt=(rt=p==null?void 0:p.charts)==null?void 0:rt.top_upvoting_users)==null?void 0:gt.map(je=>je.upvotes_given))||[],backgroundColor:"#e74c3c",borderColor:"#c0392b",borderWidth:1}]},Xe={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Upvotes Given"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Upvoting Users",font:{size:18}}}},Ze={labels:((It=(jt=p==null?void 0:p.charts)==null?void 0:jt.top_courses)==null?void 0:It.map(je=>je.code))||[],datasets:[{label:"Resources Posted",data:((Ye=(Ve=p==null?void 0:p.charts)==null?void 0:Ve.top_courses)==null?void 0:Ye.map(je=>je.resources_count))||[],backgroundColor:"#f39c12",borderColor:"#d35400",borderWidth:1}]},pt={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Resources Posted"}},y:{title:{display:!0,text:"Course"}}},plugins:{title:{display:!0,text:"Top Courses",font:{size:18}}}},Ue=(je=[],Ot,Ht)=>{var ye;if(!a)return"";const sr=((ye=je[0])==null?void 0:ye[Ot])||0,jn=je.find(vt=>vt.username===a.username),cr=jn?jn[Ot]:0,nn=sr-cr;return nn>0?`You're ${nn} ${Ht} away from the top spot!`:cr===sr&&sr!==0?`You're the top ${Ht.toLowerCase()}!`:""},Ce=p!=null&&p.charts?Ue(p==null?void 0:p.charts.top_posting_users,"resources_count","resources"):"",ve=p!=null&&p.charts?Ue(p==null?void 0:p.charts.top_commenting_users,"comments_count","comments"):"",Pe=p!=null&&p.charts?Ue(p==null?void 0:p.charts.top_upvoting_users,"upvotes_given","upvotes"):"",_e=(je=>{const Ot=[];return je>=5&&Ot.push({name:"Helpful",color:"bg-green-100 text-green-800"}),je>=10&&Ot.push({name:"Insightful",color:"bg-blue-100 text-blue-800"}),je>=20&&Ot.push({name:"Expert",color:"bg-purple-100 text-purple-800"}),Ot})((p==null?void 0:p.contributions.upvotes_received)||0),Fe=je=>{G(je),je==="users"&&(Q(Z),Q())};return o?e.jsx(ke,{height:"100vh",width:"100%",align:"center",justify:"center",children:e.jsx(en,{size:"xl"})}):e.jsx(ke,{minH:"100vh",p:4,bg:se("gray.50","gray.800"),justify:"center",children:e.jsx(de,{w:{base:"full",md:"90%",lg:"80%"},children:e.jsxs(er,{bg:ne,p:0,overflow:"hidden",children:[e.jsxs(de,{position:"relative",h:"180px",mb:"60px",children:[e.jsx(Cr,{src:Qp,alt:"Cover Photo",objectFit:"cover",w:"full",h:"full"}),e.jsxs(ke,{position:"absolute",top:4,left:{base:2,md:4},right:{base:2,md:4},justify:"space-between",zIndex:1,children:[e.jsx(Mt,{icon:e.jsx(Bn,{}),"aria-label":"Go back",onClick:N,bg:se("white","gray.800"),color:M,_hover:{bg:se("gray.100","gray.700")},boxShadow:"md",title:"Go back",size:{base:"sm",md:"md"}}),e.jsx(ke,{gap:2,flexWrap:"wrap",justify:{base:"flex-start",sm:"flex-end"},children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{leftIcon:e.jsx(t1,{}),colorScheme:"green",onClick:q,boxShadow:"md",size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},isDisabled:!re&&!_,children:"Save"}),e.jsx(Ee,{colorScheme:"red",leftIcon:e.jsx(io,{}),onClick:()=>{u&&c(u),i(!1),w(""),v(!1)},size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Cancel"})]}):e.jsx(Ee,{leftIcon:e.jsx(ro,{}),colorScheme:"blue",onClick:()=>{h(a),i(!0),v(!1)},boxShadow:"md",size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Edit Profile"})})]}),n?e.jsx(de,{position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},cursor:"pointer",children:e.jsxs("label",{htmlFor:"avatar-upload",style:{cursor:"pointer"},children:[e.jsx(Tr,{size:"xl",src:xe(a),name:ze(a),boxShadow:"lg",border:"4px solid",borderColor:se("white","gray.800"),_hover:{opacity:.8,boxShadow:"xl"}}),e.jsx(de,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"rgba(0,0,0,0.3)",color:"white",borderRadius:"full",p:2,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(Yu,{})}),e.jsx("input",{type:"file",id:"avatar-upload",name:"avatar",accept:"image/jpeg,image/png,image/gif",style:{display:"none"},onChange:C})]})}):e.jsx(Tr,{size:"xl",src:xe(a),name:ze(a),position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},boxShadow:"lg",border:"4px solid",borderColor:se("white","gray.800")})]}),e.jsx(de,{px:{base:4,md:6},children:e.jsxs(ke,{justify:{base:"center",md:"flex-start"},align:"center",mb:6,mt:{base:5,md:0},flexWrap:"wrap",gap:2,children:[e.jsx(ut,{size:{base:"md",sm:"lg",md:"xl"},color:M,textAlign:{base:"center",md:"left"},children:!n&&ze(a)}),e.jsx(Lr,{ml:{base:0,sm:3},fontSize:{base:"0.7em",md:"0.8em"},colorScheme:(a==null?void 0:a.primary_role)==="moderator"?"purple":(a==null?void 0:a.primary_role)==="admin"?"red":"blue",textTransform:"capitalize",children:(a==null?void 0:a.primary_role)||"Student"})]})}),e.jsxs(de,{mx:{base:2,md:6},mt:{base:0,md:6},children:[e.jsxs(at,{spacing:0,mb:8,borderBottom:"1px solid",borderColor:"gray.200",justify:{base:"flex-start",md:"center"},overflowX:"auto",overflowY:"hidden",css:{"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:se("gray.300","gray.600"),borderRadius:"2px"}},children:[e.jsx(Ee,{variant:B==="overview"?"solid":"ghost",borderRadius:0,borderBottom:B==="overview"?"2px solid":"none",borderColor:"blue.500",color:B==="overview"?"blue.500":"gray.500",onClick:()=>Fe("overview"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Overview"}),e.jsx(Ee,{variant:B==="activity"?"solid":"ghost",borderRadius:0,borderBottom:B==="activity"?"2px solid":"none",borderColor:"blue.500",color:B==="activity"?"blue.500":"gray.500",onClick:()=>Fe("activity"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Activity"}),D==="admin"&&e.jsx(Ee,{variant:B==="analytics"?"solid":"ghost",borderRadius:0,borderBottom:B==="analytics"?"2px solid":"none",borderColor:"blue.500",color:B==="analytics"?"blue.500":"gray.500",onClick:()=>Fe("analytics"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Analytics"}),D==="admin"&&e.jsx(Ee,{variant:B==="users"?"solid":"ghost",borderRadius:0,borderBottom:B==="users"?"2px solid":"none",borderColor:"blue.500",color:B==="users"?"blue.500":"gray.500",onClick:()=>Fe("users"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Users"})]}),B==="overview"&&e.jsxs(et,{spacing:8,align:"stretch",children:[e.jsxs(er,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Personal Information"}),n?e.jsxs(yr,{spacing:4,children:[e.jsxs(ht,{children:[e.jsx(ft,{children:"First Name"}),e.jsx(Pt,{name:"first_name",value:(a==null?void 0:a.first_name)||"",onChange:Y})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Last Name"}),e.jsx(Pt,{name:"last_name",value:(a==null?void 0:a.last_name)||"",onChange:Y})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Email"}),e.jsx(Pt,{name:"email",value:(a==null?void 0:a.email)||"",onChange:Y})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Username"}),e.jsx(Pt,{name:"username",value:(a==null?void 0:a.username)||"",onChange:Y})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Bio"}),e.jsx(Qn,{name:"bio",value:(a==null?void 0:a.bio)||"",onChange:Y,rows:3})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Password (leave blank to keep current)"}),e.jsxs(Rr,{children:[e.jsx(Pt,{type:b?"text":"password",value:_,onChange:je=>{w(je.target.value),je.target.value&&v(!0)},placeholder:"Enter new password"}),e.jsx(Cc,{children:e.jsx(Mt,{h:"1.75rem",size:"sm",onClick:()=>m(!b),icon:b?e.jsx(Dg,{}):e.jsx(Bg,{}),"aria-label":b?"Hide password":"Show password"})})]})]})]}):e.jsxs(pr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(de,{children:[e.jsx(V,{fontWeight:"bold",color:y,children:"First Name"}),e.jsx(V,{color:M,children:(a==null?void 0:a.first_name)||"-"})]}),e.jsxs(de,{children:[e.jsx(V,{fontWeight:"bold",color:y,children:"Last Name"}),e.jsx(V,{color:M,children:(a==null?void 0:a.last_name)||"-"})]}),e.jsxs(de,{children:[e.jsx(V,{fontWeight:"bold",color:y,children:"Email"}),e.jsx(V,{color:M,children:(a==null?void 0:a.email)||"-"})]}),e.jsxs(de,{children:[e.jsx(V,{fontWeight:"bold",color:y,children:"Username"}),e.jsx(V,{color:M,children:(a==null?void 0:a.username)||"-"})]}),e.jsxs(de,{gridColumn:{md:"span 2"},children:[e.jsx(V,{fontWeight:"bold",color:y,children:"Bio"}),e.jsx(V,{color:M,children:(a==null?void 0:a.bio)||"No bio provided."})]})]})]}),e.jsxs(er,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Academic Information"}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(de,{children:[e.jsx(V,{fontWeight:"bold",color:y,children:"Faculty"}),e.jsx(V,{color:M,children:((Et=a==null?void 0:a.faculty)==null?void 0:Et.name)||"Not specified"})]}),e.jsxs(de,{children:[e.jsx(V,{fontWeight:"bold",color:y,children:"Major"}),e.jsx(V,{color:M,children:((lt=a==null?void 0:a.major)==null?void 0:lt.name)||"Not specified"})]})]})]}),e.jsx(si,{columns:{base:1,sm:2,lg:4},spacing:4,children:Ie.map(je=>e.jsx(er,{p:4,shadow:"sm",bg:ne,borderLeft:"4px solid",borderColor:"blue.500",children:e.jsxs(ke,{align:"center",children:[e.jsx(ct,{as:je.icon,boxSize:6,color:"blue.500",mr:3}),e.jsxs(de,{children:[e.jsx(V,{fontSize:"sm",color:y,children:je.label}),e.jsx(V,{fontSize:"2xl",fontWeight:"bold",color:M,children:je.value})]})]})},je.key))}),e.jsxs(er,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Contribution Mix"}),e.jsx(de,{h:"300px",w:"100%",maxW:"500px",mx:"auto",children:e.jsx(Sg,{data:We,options:be})})]}),_e.length>0&&e.jsxs(er,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Achievements"}),e.jsx(ke,{flexWrap:"wrap",gap:2,children:_e.map((je,Ot)=>e.jsx(Lr,{px:3,py:1,borderRadius:"full",fontSize:"sm",fontWeight:"medium",colorScheme:je.color.split("-")[1],children:je.name},Ot))})]}),e.jsxs(er,{p:6,shadow:"md",bgGradient:se("linear(to-r, blue.50, indigo.50)","linear(to-r, blue.900, indigo.900)"),children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Community Standing"}),e.jsxs(et,{align:"start",spacing:2,children:[Ce&&e.jsx(V,{color:se("blue.700","blue.200"),fontWeight:"medium",children:Ce}),ve&&e.jsx(V,{color:se("blue.700","blue.200"),fontWeight:"medium",children:ve}),Pe&&e.jsx(V,{color:se("blue.700","blue.200"),fontWeight:"medium",children:Pe})]})]})]}),B==="users"&&D==="admin"&&e.jsx(et,{spacing:8,align:"stretch",children:e.jsxs(er,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"User Management"}),e.jsxs(Rr,{mb:4,maxW:{base:"100%",md:"400px"},size:{base:"sm",md:"md"},children:[e.jsx(Pt,{placeholder:"Search users...",value:Z,onChange:je=>P(je.target.value),bg:se("white","gray.700"),fontSize:{base:"xs",md:"sm"}}),e.jsxs(Cc,{width:{base:"6rem",md:"7rem"},display:"flex",justifyContent:"flex-end",alignItems:"center",children:[Z&&e.jsx(Mt,{"aria-label":"Clear",icon:e.jsx(io,{}),size:"xs",mr:1,onClick:ie}),e.jsx(Ee,{h:"100%",size:"xs",onClick:()=>Q(Z),fontSize:{base:"xs",sm:"sm"},children:"Search"})]})]}),T?e.jsx(ke,{justify:"center",children:e.jsx(en,{})}):e.jsx(de,{overflowX:"auto",overflowY:"hidden",w:"100%",children:e.jsxs(Fm,{variant:"simple",size:{base:"sm",md:"md"},children:[e.jsx(Im,{children:e.jsxs(Eh,{children:[e.jsx(zo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Username"}),e.jsx(zo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Name"}),e.jsx(zo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Email"}),e.jsx(zo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Role"}),e.jsx(zo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Status"}),e.jsx(zo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Action"})]})}),e.jsx(Mm,{children:O.map(je=>e.jsxs(Eh,{children:[e.jsx(Fo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:je.username}),e.jsx(Fo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:`${je.first_name} ${je.last_name}`}),e.jsx(Fo,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:je.email}),e.jsx(Fo,{textTransform:"capitalize",whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:je.primary_role}),e.jsx(Fo,{whiteSpace:"nowrap",children:e.jsx(Lr,{colorScheme:je.is_active?"green":"red",variant:"solid",fontSize:{base:"xs",md:"sm"},px:2,py:1,borderRadius:"md",children:je.is_active?"Active":"Inactive"})}),e.jsx(Fo,{whiteSpace:"nowrap",children:e.jsxs(yn,{children:[e.jsx(vn,{as:Mt,icon:e.jsx(Wc,{}),variant:"ghost",size:"sm","aria-label":"Options"}),e.jsxs(wn,{children:[e.jsx(rr,{icon:e.jsx(o1,{}),onClick:()=>le(je),fontSize:{base:"xs",md:"sm"},children:"Update Role"}),e.jsx(Dm,{}),e.jsx(rr,{color:je.is_active?"red.500":"green.500",onClick:()=>ue(je.id),fontSize:{base:"xs",md:"sm"},children:je.is_active?"Deactivate User":"Activate User"})]})]})})]},je.id))})]})})]})}),B==="activity"&&e.jsx(et,{spacing:8,align:"stretch",children:e.jsxs(er,{p:6,shadow:"md",bg:ne,children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Recent Activity"}),e.jsxs(de,{position:"relative",children:[e.jsx(de,{position:"absolute",left:{base:"20px",md:"50%"},transform:{base:"none",md:"translateX(-50%)"},h:"100%",w:"2px",bg:"gray.200"}),p!=null&&p.activity&&p.activity.length>0?p.activity.map((je,Ot)=>{const Ht=Ot%2===0,sr=je.type==="event_registration"?kn:je.type==="study_group_join"?qn:Eg,jn=je.type==="event_registration"?"blue":je.type==="study_group_join"?"green":"purple";return e.jsxs(ke,{mb:8,justify:{base:"flex-start",md:"space-between"},align:"center",w:"100%",direction:{base:"row",md:Ht?"row-reverse":"row"},position:"relative",pl:{base:"50px",md:0},children:[e.jsx(de,{w:{base:"100%",md:"45%"},textAlign:{base:"left",md:"center"},p:3,borderRadius:"lg",display:{base:"none",md:"block"},children:e.jsx(V,{fontWeight:"medium",color:M,fontSize:{base:"xs",md:"sm"},children:df(new Date(je.date),"MMM d, yyyy HH:mm")})}),e.jsx(de,{position:"absolute",left:{base:"10px",md:"50%"},transform:{base:"none",md:"translateX(-50%)"},w:{base:8,md:10},h:{base:8,md:10},borderRadius:"full",zIndex:10,bg:`${jn}.100`,color:`${jn}.600`,display:"flex",alignItems:"center",justifyContent:"center",shadow:"lg",border:"4px solid white",children:e.jsx(ct,{as:sr,boxSize:{base:3,md:4}})}),e.jsxs(de,{w:{base:"100%",md:"45%"},bg:ne,p:{base:2,md:3},borderRadius:"lg",shadow:"sm",border:"1px solid",borderColor:"gray.100",children:[e.jsx(V,{fontWeight:"medium",color:M,textTransform:"capitalize",fontSize:{base:"xs",md:"sm"},children:je.type==="event_registration"?"Event Registration":je.type==="study_group_join"?"Joined Study Group":"Task Completed"}),e.jsx(V,{fontSize:{base:"xs",md:"sm"},color:y,children:je.type==="event_registration"?"Registered for an event":je.type==="study_group_join"?`Joined: ${je.data.group_name}`:"Completed a task"}),e.jsx(V,{fontSize:"xs",color:y,mt:1,display:{base:"block",md:"none"},children:df(new Date(je.date),"MMM d, yyyy HH:mm")})]})]},Ot)}):e.jsx(V,{color:y,textAlign:"center",py:4,fontSize:{base:"xs",md:"sm"},children:"No recent activity to display."})]})]})}),B==="analytics"&&D==="admin"&&(p==null?void 0:p.charts)&&e.jsx(et,{spacing:8,align:"stretch",children:e.jsx(si,{columns:{base:1,md:2},spacing:6,children:e.jsxs(er,{p:6,shadow:"md",bg:ne,gridColumn:{lg:D==="admin"?"span 4":"span 3"},children:[e.jsx(ut,{size:"md",mb:4,color:M,children:"Community Leaderboards"}),e.jsx(V,{color:y,mb:4,children:"Track your standing in the community based on your contributions."}),e.jsxs(si,{columns:{base:1,md:2},spacing:6,children:[e.jsxs(er,{p:4,shadow:"sm",bg:ne,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ut,{size:"sm",mb:2,color:M,children:"Top Posters"}),e.jsx(de,{h:"400px",w:"100%",children:e.jsx(ic,{data:ee,options:Ae})})]}),e.jsxs(er,{p:4,shadow:"sm",bg:ne,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ut,{size:"sm",mb:2,color:M,children:"Top Commenters"}),e.jsx(de,{h:"400px",w:"100%",children:e.jsx(ic,{data:Se,options:ce})})]}),e.jsxs(er,{p:4,shadow:"sm",bg:ne,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ut,{size:"sm",mb:2,color:M,children:"Top Upvoters"}),e.jsx(de,{h:"400px",w:"100%",children:e.jsx(ic,{data:Me,options:Xe})})]}),D==="admin"&&e.jsxs(er,{p:4,shadow:"sm",bg:ne,border:"1px solid",borderColor:"gray.100",children:[e.jsx(ut,{size:"sm",mb:2,color:M,children:"Top Courses"}),e.jsx(de,{h:"400px",w:"100%",children:e.jsx(ic,{data:Ze,options:pt})})]})]})]})})}),e.jsxs(cn,{isOpen:R,onClose:j,children:[e.jsx(kr,{}),e.jsxs(dn,{children:[e.jsx(Fr,{children:"Update User Role"}),e.jsx(rn,{}),e.jsx(Ar,{children:A&&e.jsxs(e.Fragment,{children:[e.jsxs(V,{mb:4,children:["Update role for ",e.jsx("strong",{children:A.username})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Select Role"}),e.jsxs(Li,{value:z,onChange:je=>oe(je.target.value),children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]})}),e.jsxs(Ur,{children:[e.jsx(Ee,{variant:"ghost",mr:3,onClick:j,children:"Cancel"}),e.jsx(Ee,{colorScheme:"blue",onClick:ge,children:"Update Role"})]})]})]})]})]})})})},_5="https://via.placeholder.com/150";hr(de);const k5=()=>{const t=Vr(),{userId:r}=Dc(),[n,i]=W.useState(!0),[o,s]=W.useState(null),a=se("white","gray.700"),c=se("gray.800","white"),u=se("gray.500","gray.400");se("gray.50","gray.900"),se("gray.200","gray.700"),W.useEffect(()=>{(async()=>{var b,m;i(!0);try{const _=await gx(r||"me"),w={id:_.id,name:`${_.first_name||""} ${_.last_name||""}`.trim()||_.username,username:_.username,email:_.email,bio:_.bio,major:((b=_.major)==null?void 0:b.name)||"N/A",faculty:((m=_.faculty)==null?void 0:m.name)||"N/A",roles:(_.roles||[]).map(O=>typeof O=="string"?O:O.name),verified:_.is_admin||_.is_moderator,avatar:_.avatar?`${os}/storage/avatars/${_.avatar}`:_5,joinDate:_.created_at};s(w)}catch(_){console.error("Failed to load visitor profile",_),s(null)}finally{i(!1)}})()},[r]);const h=()=>t(-1);if(n)return e.jsx(ke,{height:"100vh",width:"100%",align:"center",justify:"center",children:e.jsx(en,{size:"xl",thickness:"4px",color:"blue.500"})});if(!o)return e.jsxs(bi,{maxW:"container.xl",py:8,textAlign:"center",children:[e.jsx(ut,{children:"User Not Found"}),e.jsx(V,{children:"The user profile you are looking for does not exist."}),e.jsx(Mt,{icon:e.jsx(Bn,{}),onClick:h,"aria-label":"Go back",mt:4})]});const p=({icon:x,title:b,value:m})=>e.jsxs(at,{spacing:4,p:4,bg:se("gray.50","gray.800"),borderRadius:"lg",w:"full",children:[e.jsx(de,{as:x,color:"blue.500",boxSize:6}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(V,{fontSize:"sm",color:u,children:b}),e.jsx(V,{fontWeight:"medium",color:c,children:m})]})]});return e.jsx(ke,{minH:"100vh",p:4,bg:se("gray.50","gray.800"),justify:"center",children:e.jsx(de,{w:{base:"full",md:"90%",lg:"80%"},children:e.jsxs(er,{bg:a,p:0,overflow:"hidden",children:[e.jsxs(de,{position:"relative",h:"180px",mb:"60px",children:[e.jsx(Cr,{src:Qp,alt:"Cover Photo",objectFit:"cover",w:"full",h:"full"}),e.jsx(ke,{position:"absolute",top:4,left:4,right:4,justify:"space-between",zIndex:1,children:e.jsx(Mt,{icon:e.jsx(Bn,{}),"aria-label":"Go back",onClick:h,bg:se("white","gray.800"),color:c,_hover:{bg:se("gray.100","gray.700")},boxShadow:"md",title:"Go back"})}),e.jsx(Tr,{size:"xl",src:o.avatar,name:o.name,position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},boxShadow:"lg",border:"4px solid",borderColor:se("white","gray.800")})]}),e.jsxs(de,{px:{base:4,md:6},children:[e.jsxs(ke,{justify:{base:"center",md:"flex-start"},align:"center",mb:6,mt:{base:5,md:0},children:[e.jsxs(ut,{size:{base:"lg",md:"xl"},color:c,textAlign:{base:"center",md:"left"},children:[o.name,o.verified&&e.jsx(Sc,{size:"24px",bg:"blue.500",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",ml:2,verticalAlign:"middle",children:e.jsx(Pi,{size:"16px"})})]}),e.jsxs(V,{color:u,fontSize:"md",ml:3,children:["@",o.username]})]}),e.jsx(ke,{mb:4,flexWrap:"wrap",gap:2,justify:{base:"center",md:"flex-start"},children:o.roles.map(x=>e.jsx(Lr,{colorScheme:x==="moderator"?"purple":x==="admin"?"red":"blue",textTransform:"capitalize",children:x},x))}),o.email&&e.jsx(p,{icon:Gu,title:"Email",value:o.email})]}),e.jsxs(de,{p:6,borderTop:"1px solid",borderColor:se("gray.100","gray.700"),children:[e.jsx(ut,{size:"md",mb:4,children:"About"}),e.jsx(V,{color:c,children:o.bio||"No bio available."})]}),e.jsxs(si,{columns:{base:1,md:3},spacing:{base:3,md:6},p:6,bg:a,borderTop:"1px solid",borderColor:se("gray.100","gray.700"),children:[e.jsxs(et,{spacing:1,alignItems:"flex-start",children:[e.jsxs(at,{children:[e.jsx(ct,{as:fp,color:"blue.500"}),e.jsx(V,{fontSize:"sm",color:u,children:"Major"})]}),e.jsx(V,{fontWeight:"bold",fontSize:"md",children:o.major})]}),e.jsxs(et,{spacing:1,alignItems:"flex-start",children:[e.jsxs(at,{children:[e.jsx(ct,{as:Ls,color:"blue.500"}),e.jsx(V,{fontSize:"sm",color:u,children:"Faculty"})]}),e.jsx(V,{fontWeight:"bold",fontSize:"md",children:o.faculty})]}),e.jsxs(et,{spacing:1,alignItems:"flex-start",children:[e.jsxs(at,{children:[e.jsx(ct,{as:kn,color:"blue.500"}),e.jsx(V,{fontSize:"sm",color:u,children:"Joined"})]}),e.jsx(V,{fontWeight:"bold",fontSize:"md",children:new Date(o.joinDate).toLocaleDateString()})]})]})]})})})},uf={whatsapp:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32px" height="32px"><path fill="#fff" d="M4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98c-0.001,0,0,0,0,0h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303z"/><path fill="#fff" d="M4.868,43.803c-0.132,0-0.26-0.052-0.355-0.148c-0.125-0.127-0.174-0.312-0.127-0.483l2.639-9.636c-1.636-2.906-2.499-6.206-2.497-9.556C4.532,13.238,13.273,4.5,24.014,4.5c5.21,0.002,10.105,2.031,13.784,5.713c3.679,3.683,5.704,8.577,5.702,13.781c-0.004,10.741-8.746,19.48-19.486,19.48c-3.189-0.001-6.344-0.788-9.144-2.277l-9.875,2.589C4.953,43.798,4.911,43.803,4.868,43.803z"/><path fill="#cfd8dc" d="M24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,4C24.014,4,24.014,4,24.014,4C12.998,4,4.032,12.962,4.027,23.979c-0.001,3.367,0.849,6.685,2.461,9.622l-2.585,9.439c-0.094,0.345,0.002,0.713,0.254,0.967c0.19,0.192,0.447,0.297,0.711,0.297c0.085,0,0.17-0.011,0.254-0.033l9.687-2.54c2.828,1.468,5.998,2.243,9.197,2.244c11.024,0,19.99-8.963,19.995-19.98c0.002-5.339-2.075-10.359-5.848-14.135C34.378,6.083,29.357,4.002,24.014,4L24.014,4z"/><path fill="#40c351" d="M35.176,12.832c-2.98-2.982-6.941-4.625-11.157-4.626c-8.704,0-15.783,7.076-15.787,15.774c-0.001,2.981,0.833,5.883,2.413,8.396l0.376,0.597l-1.595,5.821l5.973-1.566l0.577,0.342c2.422,1.438,5.2,2.198,8.032,2.199h0.006c8.698,0,15.777-7.077,15.78-15.776C39.795,19.778,38.156,15.814,35.176,12.832z"/><path fill="#fff" fill-rule="evenodd" d="M19.268,16.045c-0.355-0.79-0.729-0.806-1.068-0.82c-0.277-0.012-0.593-0.011-0.909-0.011c-0.316,0-0.83,0.119-1.265,0.594c-0.435,0.475-1.661,1.622-1.661,3.956c0,2.334,1.7,4.59,1.937,4.906c0.237,0.316,3.282,5.259,8.104,7.161c4.007,1.58,4.823,1.266,5.693,1.187c0.87-0.079,2.807-1.147,3.202-2.255c0.395-1.108,0.395-2.057,0.277-2.255c-0.119-0.198-0.435-0.316-0.909-0.554s-2.807-1.385-3.242-1.543c-0.435-0.158-0.751-0.237-1.068,0.238c-0.316,0.474-1.225,1.543-1.502,1.859c-0.277,0.317-0.554,0.357-1.028,0.119c-0.474-0.238-2.002-0.738-3.815-2.354c-1.41-1.257-2.362-2.81-2.639-3.285c-0.277-0.474-0.03-0.731,0.208-0.968c0.213-0.213,0.474-0.554,0.712-0.831c0.237-0.277,0.316-0.475,0.474-0.791c0.158-0.317,0.079-0.594-0.04-0.831C20.612,19.329,19.69,16.983,19.268,16.045z" clip-rule="evenodd"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32px" height="32px"><path fill="#90CAF9" d="M40 45H16c-1.1 0-2-.9-2-2V13c0-1.1.9-2 2-2h24c1.1 0 2 .9 2 2v30c0 1.1-.9 2-2 2z"/><path fill="#E1F5FE" d="M38 17H18v24h20V17z"/><path fill="#1976D2" d="M25 13h-9V5c0-1.1.9-2 2-2h24c1.1 0 2 .9 2 2v30c0 1.1-.9 2-2 2h-8v-9c0-2.2-1.8-4-4-4h-5v-5c0-2.2-1.8-4-4-4z"/><path fill="#E1F5FE" d="M34 9H20v4h14V9zm0 7H20v14h14V16z"/></svg>'},fa=()=>localStorage.getItem("authToken"),n0=async(t={})=>{var r;try{const n={...t};if(!n.faculty_id||!n.major_id){const o=JSON.parse(localStorage.getItem("user")||"{}");n.faculty_id||(n.faculty_id=o.faculty_id||localStorage.getItem("faculty_id")),n.major_id||(n.major_id=o.major_id||localStorage.getItem("major_id"))}const i=await yt.get("/resources",{params:n});if(Array.isArray(i.data))return i.data;if(i.data&&Array.isArray(i.data.data)){const o=i.data.data;return o.pagination=i.data.pagination||null,o}return[]}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch resources"}}},gc=async t=>{var r;try{const n=await yt.get(`/resources/${t}`);return console.log("Resource fetched successfully:",n.data),n.data}catch(n){throw console.error("Error fetching resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch resource"}}},i0=async({title:t,description:r,attachments:n,course_id:i,major_id:o,faculty_id:s,type:a,poll:c})=>{var u;try{const h=new FormData;if(t&&h.append("title",t),r&&h.append("description",r),i&&h.append("course_id",i),o&&h.append("major_id",o),s&&h.append("faculty_id",s),a&&h.append("type",a),n&&n.length)for(let x=0;x<n.length;x++)h.append("attachments[]",n[x]);c&&c.question&&c.options&&c.options.length>0&&(h.append("poll[question]",c.question),c.options.forEach(x=>{const b=typeof x=="string"?x.trim():"";b&&h.append("poll[options][]",b)}),console.log("Poll data added to FormData for creation:",c));const p=await yt.post("/resources",h,{headers:{"Content-Type":"multipart/form-data"}});return p.data.resource||p.data}catch(h){throw((u=h.response)==null?void 0:u.data)||{message:"Failed to create resource"}}},s0=async(t,{title:r,description:n,newAttachments:i,removeAttachmentIds:o})=>{var s,a;try{console.log("Updating resource with ID:",t);const c=new FormData;if(c.append("_method","PUT"),r!==void 0&&(console.log("Setting title:",r),c.append("title",r)),n!==void 0&&(console.log("Setting description:",n),c.append("description",n)),i&&i.length){console.log(`Adding ${i.length} new attachment(s)`);for(let h=0;h<i.length;h++)c.append("attachments[]",i[h]),console.log(`Added attachment: ${i[h].name}`)}if(o){const h=Array.isArray(o)?o:[o];h.length&&(console.log(`Removing ${h.length} attachment(s)`),h.forEach(p=>{p&&(console.log(`Marking attachment for removal: ${p}`),c.append("remove_attachments[]",p.toString()))}))}const u=await yt.post(`/resources/${t}`,c);return console.log("Resource updated successfully:",u.data),u.data.resource||u.data}catch(c){throw console.error("Error updating resource:",c),console.error("Error details:",((s=c.response)==null?void 0:s.data)||"Unknown error"),((a=c.response)==null?void 0:a.data)||{message:"Failed to update resource"}}},th=async t=>{try{return(await yt.post(`/resources/${t}/toggle-upvote`,{},{headers:{Authorization:`Bearer ${fa()}`}})).data}catch(r){throw console.error("Error toggling upvote:",r),r}},o0=async(t,r)=>{try{return(await yt.post(`/resources/${t}/comments`,{body:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${fa()}`}})).data}catch(n){throw console.error("Error adding comment:",n),n}},a0=async(t,r)=>{try{return(await yt.put(`/comments/${t}`,{body:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${fa()}`}})).data}catch(n){throw console.error("Error updating comment:",n),n}},l0=async t=>{try{return(await yt.delete(`/comments/${t}`,{headers:{Authorization:`Bearer ${fa()}`}})).data}catch(r){throw console.error("Error deleting comment:",r),r}},rh=async t=>{var r;try{return(await yt.post(`/poll-options/${t}/vote`,{},{headers:{Authorization:`Bearer ${fa()}`}})).data}catch(n){throw console.error("Error voting poll option:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to record vote"}}},c0=async t=>{try{return(await yt.post(`/comments/${t}/toggle-upvote`,{},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${fa()}`}})).data}catch(r){throw console.error("Error toggling comment upvote:",r),r}},d0=async t=>{var r;try{return(await yt.delete(`/resources/${t}`)).data}catch(n){throw console.error("Error deleting resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to delete resource"}}},Qc=async t=>{var r;try{return(await yt.post(`/resources/${t}/toggleSave`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to save resource"}}},u0=async(t={})=>{var r;try{return(await yt.get("/saved-items",{params:t})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch saved items"}}},h0=async t=>{var r;try{return(await yt.get("/top-contributors",{params:{limit:t}})).data}catch(n){throw console.error("Error fetching top contributors:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch top contributors"}}},f0=async(t,r=null)=>{var n;try{const i={};return r&&(i.attachment_id=r),(await yt.get(`/resources/${t}/generate-quiz`,{params:i})).data}catch(i){throw console.error("Error initiating quiz generation:",i),((n=i.response)==null?void 0:n.data)||{message:"Failed to initiate quiz generation"}}},p0=async(t,r=null)=>{var n;try{const i={};return r&&(i.attachment_id=r),(await yt.get(`/resources/${t}/generate-summary`,{params:i})).data}catch(i){throw console.error("Error initiating summary generation:",i),((n=i.response)==null?void 0:n.data)||{message:"Failed to initiate summary generation"}}},m0=async(t={})=>{var r;try{return(await yt.get("/admin/resources/pending",{params:t})).data}catch(n){throw console.error("Error fetching pending resources:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch pending resources"}}},g0=async t=>{var r;try{return(await yt.post(`/admin/resources/${t}/approve`)).data}catch(n){throw console.error("Error approving resource:",n),((r=n.response)==null?void 0:r.data)||{message:"Failed to approve resource"}}},x0=async(t,r)=>{var n;try{const i=r?{reason:r.trim()}:{};return(await yt.post(`/admin/resources/${t}/reject`,i)).data}catch(i){throw console.error("Error rejecting resource:",i),((n=i.response)==null?void 0:n.data)||{message:"Failed to reject resource"}}},A5=Object.freeze(Object.defineProperty({__proto__:null,addComment:o0,approveResource:g0,createResource:i0,deleteComment:l0,deleteResource:d0,generateQuiz:f0,generateSummary:p0,getAllResources:n0,getPendingResources:m0,getResourceById:gc,getSavedItems:u0,getTopContributors:h0,rejectResource:x0,toggleCommentUpvote:c0,toggleSaveResource:Qc,toggleUpvote:th,updateComment:a0,updateResource:s0,votePollOption:rh},Symbol.toStringTag,{value:"Module"}));var Kd={},Qd={},Va={},Zd={},hf;function L5(){return hf||(hf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};t.default=r}(Zd)),Zd}var eu,ff;function P5(){if(ff)return eu;ff=1;var t="Expected a function",r=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,c=parseInt,u=typeof nc=="object"&&nc&&nc.Object===Object&&nc,h=typeof self=="object"&&self&&self.Object===Object&&self,p=u||h||Function("return this")(),x=Object.prototype,b=x.toString,m=Math.max,_=Math.min,w=function(){return p.Date.now()};function O(P,D,B){var G,R,L,j,A,E,z=0,oe=!1,re=!1,v=!0;if(typeof P!="function")throw new TypeError(t);D=Z(D)||0,k(B)&&(oe=!!B.leading,re="maxWait"in B,L=re?m(Z(B.maxWait)||0,D):L,v="trailing"in B?!!B.trailing:v);function ne(ie){var ue=G,le=R;return G=R=void 0,z=ie,j=P.apply(le,ue),j}function M(ie){return z=ie,A=setTimeout(C,D),oe?ne(ie):j}function y(ie){var ue=ie-E,le=ie-z,ge=D-ue;return re?_(ge,L-le):ge}function Y(ie){var ue=ie-E,le=ie-z;return E===void 0||ue>=D||ue<0||re&&le>=L}function C(){var ie=w();if(Y(ie))return q(ie);A=setTimeout(C,y(ie))}function q(ie){return A=void 0,v&&G?ne(ie):(G=R=void 0,j)}function N(){A!==void 0&&clearTimeout(A),z=0,G=E=R=A=void 0}function $(){return A===void 0?j:q(w())}function Q(){var ie=w(),ue=Y(ie);if(G=arguments,R=this,E=ie,ue){if(A===void 0)return M(E);if(re)return A=setTimeout(C,D),ne(E)}return A===void 0&&(A=setTimeout(C,D)),j}return Q.cancel=N,Q.flush=$,Q}function k(P){var D=typeof P;return!!P&&(D=="object"||D=="function")}function T(P){return!!P&&typeof P=="object"}function H(P){return typeof P=="symbol"||T(P)&&b.call(P)==n}function Z(P){if(typeof P=="number")return P;if(H(P))return r;if(k(P)){var D=typeof P.valueOf=="function"?P.valueOf():P;P=k(D)?D+"":D}if(typeof P!="string")return P===0?P:+P;P=P.replace(i,"");var B=s.test(P);return B||a.test(P)?c(P.slice(2),B?2:8):o.test(P)?r:+P}return eu=O,eu}var tu={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var pf;function Zc(){return pf||(pf=1,function(t){(function(){var r={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(s=o(s,i(c)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var c in s)r.call(s,c)&&s[c]&&(a=o(a,c));return a}function o(s,a){return a?s?s+" "+a:s+a:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(tu)),tu.exports}var St={},ru={},mf;function b0(){return mf||(mf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(lo());function n(o){return o&&o.__esModule?o:{default:o}}var i={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(s){return r.default.createElement("ul",{style:{display:"block"}},s)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(s){return r.default.createElement("button",null,s+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null,unslick:!1};t.default=i}(ru)),ru}var gf;function fl(){if(gf)return St;gf=1,Object.defineProperty(St,"__esModule",{value:!0}),St.checkSpecKeys=St.checkNavigable=St.changeSlide=St.canUseDOM=St.canGoNext=void 0,St.clamp=h,St.extractObject=void 0,St.filterSettings=ne,St.validSettings=St.swipeStart=St.swipeMove=St.swipeEnd=St.slidesOnRight=St.slidesOnLeft=St.slideHandler=St.siblingDirection=St.safePreventDefault=St.lazyStartIndex=St.lazySlidesOnRight=St.lazySlidesOnLeft=St.lazyEndIndex=St.keyHandler=St.initializedState=St.getWidth=St.getTrackLeft=St.getTrackCSS=St.getTrackAnimateCSS=St.getTotalSlides=St.getSwipeDirection=St.getSlideCount=St.getRequiredLazySlides=St.getPreClones=St.getPostClones=St.getOnDemandLazySlides=St.getNavigableIndexes=St.getHeight=void 0;var t=n(lo()),r=n(b0());function n(M){return M&&M.__esModule?M:{default:M}}function i(M){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},i(M)}function o(M,y){var Y=Object.keys(M);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(M);y&&(C=C.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),Y.push.apply(Y,C)}return Y}function s(M){for(var y=1;y<arguments.length;y++){var Y=arguments[y]!=null?arguments[y]:{};y%2?o(Object(Y),!0).forEach(function(C){a(M,C,Y[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(Y)):o(Object(Y)).forEach(function(C){Object.defineProperty(M,C,Object.getOwnPropertyDescriptor(Y,C))})}return M}function a(M,y,Y){return y=c(y),y in M?Object.defineProperty(M,y,{value:Y,enumerable:!0,configurable:!0,writable:!0}):M[y]=Y,M}function c(M){var y=u(M,"string");return i(y)=="symbol"?y:String(y)}function u(M,y){if(i(M)!="object"||!M)return M;var Y=M[Symbol.toPrimitive];if(Y!==void 0){var C=Y.call(M,y);if(i(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(M)}function h(M,y,Y){return Math.max(y,Math.min(M,Y))}var p=St.safePreventDefault=function(y){var Y=["onTouchStart","onTouchMove","onWheel"];Y.includes(y._reactName)||y.preventDefault()},x=St.getOnDemandLazySlides=function(y){for(var Y=[],C=b(y),q=m(y),N=C;N<q;N++)y.lazyLoadedList.indexOf(N)<0&&Y.push(N);return Y};St.getRequiredLazySlides=function(y){for(var Y=[],C=b(y),q=m(y),N=C;N<q;N++)Y.push(N);return Y};var b=St.lazyStartIndex=function(y){return y.currentSlide-_(y)},m=St.lazyEndIndex=function(y){return y.currentSlide+w(y)},_=St.lazySlidesOnLeft=function(y){return y.centerMode?Math.floor(y.slidesToShow/2)+(parseInt(y.centerPadding)>0?1:0):0},w=St.lazySlidesOnRight=function(y){return y.centerMode?Math.floor((y.slidesToShow-1)/2)+1+(parseInt(y.centerPadding)>0?1:0):y.slidesToShow},O=St.getWidth=function(y){return y&&y.offsetWidth||0},k=St.getHeight=function(y){return y&&y.offsetHeight||0},T=St.getSwipeDirection=function(y){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C,q,N,$;return C=y.startX-y.curX,q=y.startY-y.curY,N=Math.atan2(q,C),$=Math.round(N*180/Math.PI),$<0&&($=360-Math.abs($)),$<=45&&$>=0||$<=360&&$>=315?"left":$>=135&&$<=225?"right":Y===!0?$>=35&&$<=135?"up":"down":"vertical"},H=St.canGoNext=function(y){var Y=!0;return y.infinite||(y.centerMode&&y.currentSlide>=y.slideCount-1||y.slideCount<=y.slidesToShow||y.currentSlide>=y.slideCount-y.slidesToShow)&&(Y=!1),Y};St.extractObject=function(y,Y){var C={};return Y.forEach(function(q){return C[q]=y[q]}),C},St.initializedState=function(y){var Y=t.default.Children.count(y.children),C=y.listRef,q=Math.ceil(O(C)),N=y.trackRef&&y.trackRef.node,$=Math.ceil(O(N)),Q;if(y.vertical)Q=q;else{var ie=y.centerMode&&parseInt(y.centerPadding)*2;typeof y.centerPadding=="string"&&y.centerPadding.slice(-1)==="%"&&(ie*=q/100),Q=Math.ceil((q-ie)/y.slidesToShow)}var ue=C&&k(C.querySelector('[data-index="0"]')),le=ue*y.slidesToShow,ge=y.currentSlide===void 0?y.initialSlide:y.currentSlide;y.rtl&&y.currentSlide===void 0&&(ge=Y-1-y.initialSlide);var xe=y.lazyLoadedList||[],ze=x(s(s({},y),{},{currentSlide:ge,lazyLoadedList:xe}));xe=xe.concat(ze);var Ie={slideCount:Y,slideWidth:Q,listWidth:q,trackWidth:$,currentSlide:ge,slideHeight:ue,listHeight:le,lazyLoadedList:xe};return y.autoplaying===null&&y.autoplay&&(Ie.autoplaying="playing"),Ie},St.slideHandler=function(y){var Y=y.waitForAnimate,C=y.animating,q=y.fade,N=y.infinite,$=y.index,Q=y.slideCount,ie=y.lazyLoad,ue=y.currentSlide,le=y.centerMode,ge=y.slidesToScroll,xe=y.slidesToShow,ze=y.useCSS,Ie=y.lazyLoadedList;if(Y&&C)return{};var We=$,be,ee,Ae,Se={},ce={},Me=N?$:h($,0,Q-1);if(q){if(!N&&($<0||$>=Q))return{};$<0?We=$+Q:$>=Q&&(We=$-Q),ie&&Ie.indexOf(We)<0&&(Ie=Ie.concat(We)),Se={animating:!0,currentSlide:We,lazyLoadedList:Ie,targetSlide:We},ce={animating:!1,targetSlide:We}}else be=We,We<0?(be=We+Q,N?Q%ge!==0&&(be=Q-Q%ge):be=0):!H(y)&&We>ue?We=be=ue:le&&We>=Q?(We=N?Q:Q-1,be=N?0:Q-1):We>=Q&&(be=We-Q,N?Q%ge!==0&&(be=0):be=Q-xe),!N&&We+xe>=Q&&(be=Q-xe),ee=L(s(s({},y),{},{slideIndex:We})),Ae=L(s(s({},y),{},{slideIndex:be})),N||(ee===Ae&&(We=be),ee=Ae),ie&&(Ie=Ie.concat(x(s(s({},y),{},{currentSlide:We})))),ze?(Se={animating:!0,currentSlide:be,trackStyle:R(s(s({},y),{},{left:ee})),lazyLoadedList:Ie,targetSlide:Me},ce={animating:!1,currentSlide:be,trackStyle:G(s(s({},y),{},{left:Ae})),swipeLeft:null,targetSlide:Me}):Se={currentSlide:be,trackStyle:G(s(s({},y),{},{left:Ae})),lazyLoadedList:Ie,targetSlide:Me};return{state:Se,nextState:ce}},St.changeSlide=function(y,Y){var C,q,N,$,Q,ie=y.slidesToScroll,ue=y.slidesToShow,le=y.slideCount,ge=y.currentSlide,xe=y.targetSlide,ze=y.lazyLoad,Ie=y.infinite;if($=le%ie!==0,C=$?0:(le-ge)%ie,Y.message==="previous")N=C===0?ie:ue-C,Q=ge-N,ze&&!Ie&&(q=ge-N,Q=q===-1?le-1:q),Ie||(Q=xe-ie);else if(Y.message==="next")N=C===0?ie:C,Q=ge+N,ze&&!Ie&&(Q=(ge+ie)%le+C),Ie||(Q=xe+ie);else if(Y.message==="dots")Q=Y.index*Y.slidesToScroll;else if(Y.message==="children"){if(Q=Y.index,Ie){var We=z(s(s({},y),{},{targetSlide:Q}));Q>Y.currentSlide&&We==="left"?Q=Q-le:Q<Y.currentSlide&&We==="right"&&(Q=Q+le)}}else Y.message==="index"&&(Q=Number(Y.index));return Q},St.keyHandler=function(y,Y,C){return y.target.tagName.match("TEXTAREA|INPUT|SELECT")||!Y?"":y.keyCode===37?C?"next":"previous":y.keyCode===39?C?"previous":"next":""},St.swipeStart=function(y,Y,C){return y.target.tagName==="IMG"&&p(y),!Y||!C&&y.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:y.touches?y.touches[0].pageX:y.clientX,startY:y.touches?y.touches[0].pageY:y.clientY,curX:y.touches?y.touches[0].pageX:y.clientX,curY:y.touches?y.touches[0].pageY:y.clientY}}},St.swipeMove=function(y,Y){var C=Y.scrolling,q=Y.animating,N=Y.vertical,$=Y.swipeToSlide,Q=Y.verticalSwiping,ie=Y.rtl,ue=Y.currentSlide,le=Y.edgeFriction,ge=Y.edgeDragged,xe=Y.onEdge,ze=Y.swiped,Ie=Y.swiping,We=Y.slideCount,be=Y.slidesToScroll,ee=Y.infinite,Ae=Y.touchObject,Se=Y.swipeEvent,ce=Y.listHeight,Me=Y.listWidth;if(!C){if(q)return p(y);N&&$&&Q&&p(y);var Xe,Ze={},pt=L(Y);Ae.curX=y.touches?y.touches[0].pageX:y.clientX,Ae.curY=y.touches?y.touches[0].pageY:y.clientY,Ae.swipeLength=Math.round(Math.sqrt(Math.pow(Ae.curX-Ae.startX,2)));var Ue=Math.round(Math.sqrt(Math.pow(Ae.curY-Ae.startY,2)));if(!Q&&!Ie&&Ue>10)return{scrolling:!0};Q&&(Ae.swipeLength=Ue);var Ce=(ie?-1:1)*(Ae.curX>Ae.startX?1:-1);Q&&(Ce=Ae.curY>Ae.startY?1:-1);var ve=Math.ceil(We/be),Pe=T(Y.touchObject,Q),De=Ae.swipeLength;return ee||(ue===0&&(Pe==="right"||Pe==="down")||ue+1>=ve&&(Pe==="left"||Pe==="up")||!H(Y)&&(Pe==="left"||Pe==="up"))&&(De=Ae.swipeLength*le,ge===!1&&xe&&(xe(Pe),Ze.edgeDragged=!0)),!ze&&Se&&(Se(Pe),Ze.swiped=!0),N?Xe=pt+De*(ce/Me)*Ce:ie?Xe=pt-De*Ce:Xe=pt+De*Ce,Q&&(Xe=pt+De*Ce),Ze=s(s({},Ze),{},{touchObject:Ae,swipeLeft:Xe,trackStyle:G(s(s({},Y),{},{left:Xe}))}),Math.abs(Ae.curX-Ae.startX)<Math.abs(Ae.curY-Ae.startY)*.8||Ae.swipeLength>10&&(Ze.swiping=!0,p(y)),Ze}},St.swipeEnd=function(y,Y){var C=Y.dragging,q=Y.swipe,N=Y.touchObject,$=Y.listWidth,Q=Y.touchThreshold,ie=Y.verticalSwiping,ue=Y.listHeight,le=Y.swipeToSlide,ge=Y.scrolling,xe=Y.onSwipe,ze=Y.targetSlide,Ie=Y.currentSlide,We=Y.infinite;if(!C)return q&&p(y),{};var be=ie?ue/Q:$/Q,ee=T(N,ie),Ae={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(ge||!N.swipeLength)return Ae;if(N.swipeLength>be){p(y),xe&&xe(ee);var Se,ce,Me=We?Ie:ze;switch(ee){case"left":case"up":ce=Me+D(Y),Se=le?P(Y,ce):ce,Ae.currentDirection=0;break;case"right":case"down":ce=Me-D(Y),Se=le?P(Y,ce):ce,Ae.currentDirection=1;break;default:Se=Me}Ae.triggerSlideHandler=Se}else{var Xe=L(Y);Ae.trackStyle=R(s(s({},Y),{},{left:Xe}))}return Ae};var Z=St.getNavigableIndexes=function(y){for(var Y=y.infinite?y.slideCount*2:y.slideCount,C=y.infinite?y.slidesToShow*-1:0,q=y.infinite?y.slidesToShow*-1:0,N=[];C<Y;)N.push(C),C=q+y.slidesToScroll,q+=Math.min(y.slidesToScroll,y.slidesToShow);return N},P=St.checkNavigable=function(y,Y){var C=Z(y),q=0;if(Y>C[C.length-1])Y=C[C.length-1];else for(var N in C){if(Y<C[N]){Y=q;break}q=C[N]}return Y},D=St.getSlideCount=function(y){var Y=y.centerMode?y.slideWidth*Math.floor(y.slidesToShow/2):0;if(y.swipeToSlide){var C,q=y.listRef,N=q.querySelectorAll&&q.querySelectorAll(".slick-slide")||[];if(Array.from(N).every(function(ie){if(y.vertical){if(ie.offsetTop+k(ie)/2>y.swipeLeft*-1)return C=ie,!1}else if(ie.offsetLeft-Y+O(ie)/2>y.swipeLeft*-1)return C=ie,!1;return!0}),!C)return 0;var $=y.rtl===!0?y.slideCount-y.currentSlide:y.currentSlide,Q=Math.abs(C.dataset.index-$)||1;return Q}else return y.slidesToScroll},B=St.checkSpecKeys=function(y,Y){return Y.reduce(function(C,q){return C&&y.hasOwnProperty(q)},!0)?null:console.error("Keys Missing:",y)},G=St.getTrackCSS=function(y){B(y,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var Y,C,q=y.slideCount+2*y.slidesToShow;y.vertical?C=q*y.slideHeight:Y=E(y)*y.slideWidth;var N={opacity:1,transition:"",WebkitTransition:""};if(y.useTransform){var $=y.vertical?"translate3d(0px, "+y.left+"px, 0px)":"translate3d("+y.left+"px, 0px, 0px)",Q=y.vertical?"translate3d(0px, "+y.left+"px, 0px)":"translate3d("+y.left+"px, 0px, 0px)",ie=y.vertical?"translateY("+y.left+"px)":"translateX("+y.left+"px)";N=s(s({},N),{},{WebkitTransform:$,transform:Q,msTransform:ie})}else y.vertical?N.top=y.left:N.left=y.left;return y.fade&&(N={opacity:1}),Y&&(N.width=Y),C&&(N.height=C),window&&!window.addEventListener&&window.attachEvent&&(y.vertical?N.marginTop=y.left+"px":N.marginLeft=y.left+"px"),N},R=St.getTrackAnimateCSS=function(y){B(y,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var Y=G(y);return y.useTransform?(Y.WebkitTransition="-webkit-transform "+y.speed+"ms "+y.cssEase,Y.transition="transform "+y.speed+"ms "+y.cssEase):y.vertical?Y.transition="top "+y.speed+"ms "+y.cssEase:Y.transition="left "+y.speed+"ms "+y.cssEase,Y},L=St.getTrackLeft=function(y){if(y.unslick)return 0;B(y,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var Y=y.slideIndex,C=y.trackRef,q=y.infinite,N=y.centerMode,$=y.slideCount,Q=y.slidesToShow,ie=y.slidesToScroll,ue=y.slideWidth,le=y.listWidth,ge=y.variableWidth,xe=y.slideHeight,ze=y.fade,Ie=y.vertical,We=0,be,ee,Ae=0;if(ze||y.slideCount===1)return 0;var Se=0;if(q?(Se=-j(y),$%ie!==0&&Y+ie>$&&(Se=-(Y>$?Q-(Y-$):$%ie)),N&&(Se+=parseInt(Q/2))):($%ie!==0&&Y+ie>$&&(Se=Q-$%ie),N&&(Se=parseInt(Q/2))),We=Se*ue,Ae=Se*xe,Ie?be=Y*xe*-1+Ae:be=Y*ue*-1+We,ge===!0){var ce,Me=C&&C.node;if(ce=Y+j(y),ee=Me&&Me.childNodes[ce],be=ee?ee.offsetLeft*-1:0,N===!0){ce=q?Y+j(y):Y,ee=Me&&Me.children[ce],be=0;for(var Xe=0;Xe<ce;Xe++)be-=Me&&Me.children[Xe]&&Me.children[Xe].offsetWidth;be-=parseInt(y.centerPadding),be+=ee&&(le-ee.offsetWidth)/2}}return be},j=St.getPreClones=function(y){return y.unslick||!y.infinite?0:y.variableWidth?y.slideCount:y.slidesToShow+(y.centerMode?1:0)},A=St.getPostClones=function(y){return y.unslick||!y.infinite?0:y.slideCount},E=St.getTotalSlides=function(y){return y.slideCount===1?1:j(y)+y.slideCount+A(y)},z=St.siblingDirection=function(y){return y.targetSlide>y.currentSlide?y.targetSlide>y.currentSlide+oe(y)?"left":"right":y.targetSlide<y.currentSlide-re(y)?"right":"left"},oe=St.slidesOnRight=function(y){var Y=y.slidesToShow,C=y.centerMode,q=y.rtl,N=y.centerPadding;if(C){var $=(Y-1)/2+1;return parseInt(N)>0&&($+=1),q&&Y%2===0&&($+=1),$}return q?0:Y-1},re=St.slidesOnLeft=function(y){var Y=y.slidesToShow,C=y.centerMode,q=y.rtl,N=y.centerPadding;if(C){var $=(Y-1)/2+1;return parseInt(N)>0&&($+=1),!q&&Y%2===0&&($+=1),$}return q?Y-1:0};St.canUseDOM=function(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)};var v=St.validSettings=Object.keys(r.default);function ne(M){return v.reduce(function(y,Y){return M.hasOwnProperty(Y)&&(y[Y]=M[Y]),y},{})}return St}var Ya={},xf;function N5(){if(xf)return Ya;xf=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.Track=void 0;var t=i(lo()),r=i(Zc()),n=fl();function i(R){return R&&R.__esModule?R:{default:R}}function o(R){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},o(R)}function s(){return s=Object.assign?Object.assign.bind():function(R){for(var L=1;L<arguments.length;L++){var j=arguments[L];for(var A in j)Object.prototype.hasOwnProperty.call(j,A)&&(R[A]=j[A])}return R},s.apply(this,arguments)}function a(R,L){if(!(R instanceof L))throw new TypeError("Cannot call a class as a function")}function c(R,L){for(var j=0;j<L.length;j++){var A=L[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,H(A.key),A)}}function u(R,L,j){return L&&c(R.prototype,L),Object.defineProperty(R,"prototype",{writable:!1}),R}function h(R,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(L&&L.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),L&&p(R,L)}function p(R,L){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,E){return A.__proto__=E,A},p(R,L)}function x(R){var L=_();return function(){var A=w(R),E;if(L){var z=w(this).constructor;E=Reflect.construct(A,arguments,z)}else E=A.apply(this,arguments);return b(this,E)}}function b(R,L){if(L&&(o(L)==="object"||typeof L=="function"))return L;if(L!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(R)}function m(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function _(){try{var R=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_=function(){return!!R})()}function w(R){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},w(R)}function O(R,L){var j=Object.keys(R);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(R);L&&(A=A.filter(function(E){return Object.getOwnPropertyDescriptor(R,E).enumerable})),j.push.apply(j,A)}return j}function k(R){for(var L=1;L<arguments.length;L++){var j=arguments[L]!=null?arguments[L]:{};L%2?O(Object(j),!0).forEach(function(A){T(R,A,j[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(j)):O(Object(j)).forEach(function(A){Object.defineProperty(R,A,Object.getOwnPropertyDescriptor(j,A))})}return R}function T(R,L,j){return L=H(L),L in R?Object.defineProperty(R,L,{value:j,enumerable:!0,configurable:!0,writable:!0}):R[L]=j,R}function H(R){var L=Z(R,"string");return o(L)=="symbol"?L:String(L)}function Z(R,L){if(o(R)!="object"||!R)return R;var j=R[Symbol.toPrimitive];if(j!==void 0){var A=j.call(R,L);if(o(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(R)}var P=function(L){var j,A,E,z,oe;L.rtl?oe=L.slideCount-1-L.index:oe=L.index,E=oe<0||oe>=L.slideCount,L.centerMode?(z=Math.floor(L.slidesToShow/2),A=(oe-L.currentSlide)%L.slideCount===0,oe>L.currentSlide-z-1&&oe<=L.currentSlide+z&&(j=!0)):j=L.currentSlide<=oe&&oe<L.currentSlide+L.slidesToShow;var re;L.targetSlide<0?re=L.targetSlide+L.slideCount:L.targetSlide>=L.slideCount?re=L.targetSlide-L.slideCount:re=L.targetSlide;var v=oe===re;return{"slick-slide":!0,"slick-active":j,"slick-center":A,"slick-cloned":E,"slick-current":v}},D=function(L){var j={};return(L.variableWidth===void 0||L.variableWidth===!1)&&(j.width=L.slideWidth),L.fade&&(j.position="relative",L.vertical?j.top=-L.index*parseInt(L.slideHeight):j.left=-L.index*parseInt(L.slideWidth),j.opacity=L.currentSlide===L.index?1:0,j.zIndex=L.currentSlide===L.index?999:998,L.useCSS&&(j.transition="opacity "+L.speed+"ms "+L.cssEase+", visibility "+L.speed+"ms "+L.cssEase)),j},B=function(L,j){return L.key||j},G=function(L){var j,A=[],E=[],z=[],oe=t.default.Children.count(L.children),re=(0,n.lazyStartIndex)(L),v=(0,n.lazyEndIndex)(L);return t.default.Children.forEach(L.children,function(ne,M){var y,Y={message:"children",index:M,slidesToScroll:L.slidesToScroll,currentSlide:L.currentSlide};!L.lazyLoad||L.lazyLoad&&L.lazyLoadedList.indexOf(M)>=0?y=ne:y=t.default.createElement("div",null);var C=D(k(k({},L),{},{index:M})),q=y.props.className||"",N=P(k(k({},L),{},{index:M}));if(A.push(t.default.cloneElement(y,{key:"original"+B(y,M),"data-index":M,className:(0,r.default)(N,q),tabIndex:"-1","aria-hidden":!N["slick-active"],style:k(k({outline:"none"},y.props.style||{}),C),onClick:function(ie){y.props&&y.props.onClick&&y.props.onClick(ie),L.focusOnSelect&&L.focusOnSelect(Y)}})),L.infinite&&L.fade===!1){var $=oe-M;$<=(0,n.getPreClones)(L)&&(j=-$,j>=re&&(y=ne),N=P(k(k({},L),{},{index:j})),E.push(t.default.cloneElement(y,{key:"precloned"+B(y,j),"data-index":j,tabIndex:"-1",className:(0,r.default)(N,q),"aria-hidden":!N["slick-active"],style:k(k({},y.props.style||{}),C),onClick:function(ie){y.props&&y.props.onClick&&y.props.onClick(ie),L.focusOnSelect&&L.focusOnSelect(Y)}}))),j=oe+M,j<v&&(y=ne),N=P(k(k({},L),{},{index:j})),z.push(t.default.cloneElement(y,{key:"postcloned"+B(y,j),"data-index":j,tabIndex:"-1",className:(0,r.default)(N,q),"aria-hidden":!N["slick-active"],style:k(k({},y.props.style||{}),C),onClick:function(ie){y.props&&y.props.onClick&&y.props.onClick(ie),L.focusOnSelect&&L.focusOnSelect(Y)}}))}}),L.rtl?E.concat(A,z).reverse():E.concat(A,z)};return Ya.Track=function(R){h(j,R);var L=x(j);function j(){var A;a(this,j);for(var E=arguments.length,z=new Array(E),oe=0;oe<E;oe++)z[oe]=arguments[oe];return A=L.call.apply(L,[this].concat(z)),T(m(A),"node",null),T(m(A),"handleRef",function(re){A.node=re}),A}return u(j,[{key:"render",value:function(){var E=G(this.props),z=this.props,oe=z.onMouseEnter,re=z.onMouseOver,v=z.onMouseLeave,ne={onMouseEnter:oe,onMouseOver:re,onMouseLeave:v};return t.default.createElement("div",s({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},ne),E)}}]),j}(t.default.PureComponent),Ya}var Ja={},bf;function O5(){if(bf)return Ja;bf=1;function t(P){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},t(P)}Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.Dots=void 0;var r=o(lo()),n=o(Zc()),i=fl();function o(P){return P&&P.__esModule?P:{default:P}}function s(P,D){var B=Object.keys(P);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(P);D&&(G=G.filter(function(R){return Object.getOwnPropertyDescriptor(P,R).enumerable})),B.push.apply(B,G)}return B}function a(P){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?s(Object(B),!0).forEach(function(G){c(P,G,B[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(B)):s(Object(B)).forEach(function(G){Object.defineProperty(P,G,Object.getOwnPropertyDescriptor(B,G))})}return P}function c(P,D,B){return D=x(D),D in P?Object.defineProperty(P,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):P[D]=B,P}function u(P,D){if(!(P instanceof D))throw new TypeError("Cannot call a class as a function")}function h(P,D){for(var B=0;B<D.length;B++){var G=D[B];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(P,x(G.key),G)}}function p(P,D,B){return D&&h(P.prototype,D),Object.defineProperty(P,"prototype",{writable:!1}),P}function x(P){var D=b(P,"string");return t(D)=="symbol"?D:String(D)}function b(P,D){if(t(P)!="object"||!P)return P;var B=P[Symbol.toPrimitive];if(B!==void 0){var G=B.call(P,D);if(t(G)!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(P)}function m(P,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(D&&D.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),D&&_(P,D)}function _(P,D){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,R){return G.__proto__=R,G},_(P,D)}function w(P){var D=T();return function(){var G=H(P),R;if(D){var L=H(this).constructor;R=Reflect.construct(G,arguments,L)}else R=G.apply(this,arguments);return O(this,R)}}function O(P,D){if(D&&(t(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(P)}function k(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function T(){try{var P=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T=function(){return!!P})()}function H(P){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)},H(P)}var Z=function(D){var B;return D.infinite?B=Math.ceil(D.slideCount/D.slidesToScroll):B=Math.ceil((D.slideCount-D.slidesToShow)/D.slidesToScroll)+1,B};return Ja.Dots=function(P){m(B,P);var D=w(B);function B(){return u(this,B),D.apply(this,arguments)}return p(B,[{key:"clickHandler",value:function(R,L){L.preventDefault(),this.props.clickHandler(R)}},{key:"render",value:function(){for(var R=this.props,L=R.onMouseEnter,j=R.onMouseOver,A=R.onMouseLeave,E=R.infinite,z=R.slidesToScroll,oe=R.slidesToShow,re=R.slideCount,v=R.currentSlide,ne=Z({slideCount:re,slidesToScroll:z,slidesToShow:oe,infinite:E}),M={onMouseEnter:L,onMouseOver:j,onMouseLeave:A},y=[],Y=0;Y<ne;Y++){var C=(Y+1)*z-1,q=E?C:(0,i.clamp)(C,0,re-1),N=q-(z-1),$=E?N:(0,i.clamp)(N,0,re-1),Q=(0,n.default)({"slick-active":E?v>=$&&v<=q:v===$}),ie={message:"dots",index:Y,slidesToScroll:z,currentSlide:v},ue=this.clickHandler.bind(this,ie);y=y.concat(r.default.createElement("li",{key:Y,className:Q},r.default.cloneElement(this.props.customPaging(Y),{onClick:ue})))}return r.default.cloneElement(this.props.appendDots(y),a({className:this.props.dotsClass},M))}}]),B}(r.default.PureComponent),Ja}var Gs={},yf;function R5(){if(yf)return Gs;yf=1;function t(P){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},t(P)}Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.PrevArrow=Gs.NextArrow=void 0;var r=o(lo()),n=o(Zc()),i=fl();function o(P){return P&&P.__esModule?P:{default:P}}function s(){return s=Object.assign?Object.assign.bind():function(P){for(var D=1;D<arguments.length;D++){var B=arguments[D];for(var G in B)Object.prototype.hasOwnProperty.call(B,G)&&(P[G]=B[G])}return P},s.apply(this,arguments)}function a(P,D){var B=Object.keys(P);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(P);D&&(G=G.filter(function(R){return Object.getOwnPropertyDescriptor(P,R).enumerable})),B.push.apply(B,G)}return B}function c(P){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?a(Object(B),!0).forEach(function(G){u(P,G,B[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(B)):a(Object(B)).forEach(function(G){Object.defineProperty(P,G,Object.getOwnPropertyDescriptor(B,G))})}return P}function u(P,D,B){return D=b(D),D in P?Object.defineProperty(P,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):P[D]=B,P}function h(P,D){if(!(P instanceof D))throw new TypeError("Cannot call a class as a function")}function p(P,D){for(var B=0;B<D.length;B++){var G=D[B];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(P,b(G.key),G)}}function x(P,D,B){return D&&p(P.prototype,D),Object.defineProperty(P,"prototype",{writable:!1}),P}function b(P){var D=m(P,"string");return t(D)=="symbol"?D:String(D)}function m(P,D){if(t(P)!="object"||!P)return P;var B=P[Symbol.toPrimitive];if(B!==void 0){var G=B.call(P,D);if(t(G)!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(P)}function _(P,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(D&&D.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),D&&w(P,D)}function w(P,D){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,R){return G.__proto__=R,G},w(P,D)}function O(P){var D=H();return function(){var G=Z(P),R;if(D){var L=Z(this).constructor;R=Reflect.construct(G,arguments,L)}else R=G.apply(this,arguments);return k(this,R)}}function k(P,D){if(D&&(t(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(P)}function T(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function H(){try{var P=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H=function(){return!!P})()}function Z(P){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)},Z(P)}return Gs.PrevArrow=function(P){_(B,P);var D=O(B);function B(){return h(this,B),D.apply(this,arguments)}return x(B,[{key:"clickHandler",value:function(R,L){L&&L.preventDefault(),this.props.clickHandler(R,L)}},{key:"render",value:function(){var R={"slick-arrow":!0,"slick-prev":!0},L=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(R["slick-disabled"]=!0,L=null);var j={key:"0","data-role":"none",className:(0,n.default)(R),style:{display:"block"},onClick:L},A={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},E;return this.props.prevArrow?E=r.default.cloneElement(this.props.prevArrow,c(c({},j),A)):E=r.default.createElement("button",s({key:"0",type:"button"},j)," ","Previous"),E}}]),B}(r.default.PureComponent),Gs.NextArrow=function(P){_(B,P);var D=O(B);function B(){return h(this,B),D.apply(this,arguments)}return x(B,[{key:"clickHandler",value:function(R,L){L&&L.preventDefault(),this.props.clickHandler(R,L)}},{key:"render",value:function(){var R={"slick-arrow":!0,"slick-next":!0},L=this.clickHandler.bind(this,{message:"next"});(0,i.canGoNext)(this.props)||(R["slick-disabled"]=!0,L=null);var j={key:"1","data-role":"none",className:(0,n.default)(R),style:{display:"block"},onClick:L},A={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},E;return this.props.nextArrow?E=r.default.cloneElement(this.props.nextArrow,c(c({},j),A)):E=r.default.createElement("button",s({key:"1",type:"button"},j)," ","Next"),E}}]),B}(r.default.PureComponent),Gs}var y0=function(){if(typeof Map!="undefined")return Map;function t(r,n){var i=-1;return r.some(function(o,s){return o[0]===n?(i=s,!0):!1}),i}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(n){var i=t(this.__entries__,n),o=this.__entries__[i];return o&&o[1]},r.prototype.set=function(n,i){var o=t(this.__entries__,n);~o?this.__entries__[o][1]=i:this.__entries__.push([n,i])},r.prototype.delete=function(n){var i=this.__entries__,o=t(i,n);~o&&i.splice(o,1)},r.prototype.has=function(n){return!!~t(this.__entries__,n)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var o=0,s=this.__entries__;o<s.length;o++){var a=s[o];n.call(i,a[1],a[0])}},r}()}(),Eu=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Ec=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),E5=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Ec):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),T5=2;function z5(t,r){var n=!1,i=!1,o=0;function s(){n&&(n=!1,t()),i&&c()}function a(){E5(s)}function c(){var u=Date.now();if(n){if(u-o<T5)return;i=!0}else n=!0,i=!1,setTimeout(a,r);o=u}return c}var F5=20,I5=["top","right","bottom","left","width","height","size","weight"],M5=typeof MutationObserver!="undefined",D5=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=z5(this.refresh.bind(this),F5)}return t.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},t.prototype.removeObserver=function(r){var n=this.observers_,i=n.indexOf(r);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},t.prototype.updateObservers_=function(){var r=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return r.forEach(function(n){return n.broadcastActive()}),r.length>0},t.prototype.connect_=function(){!Eu||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),M5?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!Eu||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(r){var n=r.propertyName,i=n===void 0?"":n,o=I5.some(function(s){return!!~i.indexOf(s)});o&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),v0=function(t,r){for(var n=0,i=Object.keys(r);n<i.length;n++){var o=i[n];Object.defineProperty(t,o,{value:r[o],enumerable:!1,writable:!1,configurable:!0})}return t},na=function(t){var r=t&&t.ownerDocument&&t.ownerDocument.defaultView;return r||Ec},w0=ed(0,0,0,0);function Tc(t){return parseFloat(t)||0}function vf(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return r.reduce(function(i,o){var s=t["border-"+o+"-width"];return i+Tc(s)},0)}function B5(t){for(var r=["top","right","bottom","left"],n={},i=0,o=r;i<o.length;i++){var s=o[i],a=t["padding-"+s];n[s]=Tc(a)}return n}function q5(t){var r=t.getBBox();return ed(0,0,r.width,r.height)}function W5(t){var r=t.clientWidth,n=t.clientHeight;if(!r&&!n)return w0;var i=na(t).getComputedStyle(t),o=B5(i),s=o.left+o.right,a=o.top+o.bottom,c=Tc(i.width),u=Tc(i.height);if(i.boxSizing==="border-box"&&(Math.round(c+s)!==r&&(c-=vf(i,"left","right")+s),Math.round(u+a)!==n&&(u-=vf(i,"top","bottom")+a)),!H5(t)){var h=Math.round(c+s)-r,p=Math.round(u+a)-n;Math.abs(h)!==1&&(c-=h),Math.abs(p)!==1&&(u-=p)}return ed(o.left,o.top,c,u)}var U5=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof na(t).SVGGraphicsElement}:function(t){return t instanceof na(t).SVGElement&&typeof t.getBBox=="function"}}();function H5(t){return t===na(t).document.documentElement}function $5(t){return Eu?U5(t)?q5(t):W5(t):w0}function G5(t){var r=t.x,n=t.y,i=t.width,o=t.height,s=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return v0(a,{x:r,y:n,width:i,height:o,top:n,right:r+i,bottom:o+n,left:r}),a}function ed(t,r,n,i){return{x:t,y:r,width:n,height:i}}var V5=function(){function t(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ed(0,0,0,0),this.target=r}return t.prototype.isActive=function(){var r=$5(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},t}(),Y5=function(){function t(r,n){var i=G5(n);v0(this,{target:r,contentRect:i})}return t}(),J5=function(){function t(r,n,i){if(this.activeObservations_=[],this.observations_=new y0,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(r instanceof na(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(r)||(n.set(r,new V5(r)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(r instanceof na(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(r)&&(n.delete(r),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&r.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new Y5(i.target,i.broadcastRect())});this.callback_.call(r,n,r),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),j0=typeof WeakMap!="undefined"?new WeakMap:new y0,S0=function(){function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=D5.getInstance(),i=new J5(r,n,this);j0.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){S0.prototype[t]=function(){var r;return(r=j0.get(this))[t].apply(r,arguments)}});var X5=function(){return typeof Ec.ResizeObserver!="undefined"?Ec.ResizeObserver:S0}();const K5=Object.freeze(Object.defineProperty({__proto__:null,default:X5},Symbol.toStringTag,{value:"Module"})),Q5=ug(K5);var wf;function Z5(){if(wf)return Va;wf=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.InnerSlider=void 0;var t=h(lo()),r=h(L5()),n=h(P5()),i=h(Zc()),o=fl(),s=N5(),a=O5(),c=R5(),u=h(Q5);function h(E){return E&&E.__esModule?E:{default:E}}function p(E){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},p(E)}function x(){return x=Object.assign?Object.assign.bind():function(E){for(var z=1;z<arguments.length;z++){var oe=arguments[z];for(var re in oe)Object.prototype.hasOwnProperty.call(oe,re)&&(E[re]=oe[re])}return E},x.apply(this,arguments)}function b(E,z){if(E==null)return{};var oe=m(E,z),re,v;if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(E);for(v=0;v<ne.length;v++)re=ne[v],!(z.indexOf(re)>=0)&&Object.prototype.propertyIsEnumerable.call(E,re)&&(oe[re]=E[re])}return oe}function m(E,z){if(E==null)return{};var oe={},re=Object.keys(E),v,ne;for(ne=0;ne<re.length;ne++)v=re[ne],!(z.indexOf(v)>=0)&&(oe[v]=E[v]);return oe}function _(E,z){var oe=Object.keys(E);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(E);z&&(re=re.filter(function(v){return Object.getOwnPropertyDescriptor(E,v).enumerable})),oe.push.apply(oe,re)}return oe}function w(E){for(var z=1;z<arguments.length;z++){var oe=arguments[z]!=null?arguments[z]:{};z%2?_(Object(oe),!0).forEach(function(re){L(E,re,oe[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(oe)):_(Object(oe)).forEach(function(re){Object.defineProperty(E,re,Object.getOwnPropertyDescriptor(oe,re))})}return E}function O(E,z){if(!(E instanceof z))throw new TypeError("Cannot call a class as a function")}function k(E,z){for(var oe=0;oe<z.length;oe++){var re=z[oe];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(E,j(re.key),re)}}function T(E,z,oe){return z&&k(E.prototype,z),Object.defineProperty(E,"prototype",{writable:!1}),E}function H(E,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(z&&z.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),z&&Z(E,z)}function Z(E,z){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(re,v){return re.__proto__=v,re},Z(E,z)}function P(E){var z=G();return function(){var re=R(E),v;if(z){var ne=R(this).constructor;v=Reflect.construct(re,arguments,ne)}else v=re.apply(this,arguments);return D(this,v)}}function D(E,z){if(z&&(p(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(E)}function B(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function G(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G=function(){return!!E})()}function R(E){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},R(E)}function L(E,z,oe){return z=j(z),z in E?Object.defineProperty(E,z,{value:oe,enumerable:!0,configurable:!0,writable:!0}):E[z]=oe,E}function j(E){var z=A(E,"string");return p(z)=="symbol"?z:String(z)}function A(E,z){if(p(E)!="object"||!E)return E;var oe=E[Symbol.toPrimitive];if(oe!==void 0){var re=oe.call(E,z);if(p(re)!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(E)}return Va.InnerSlider=function(E){H(oe,E);var z=P(oe);function oe(re){var v;O(this,oe),v=z.call(this,re),L(B(v),"listRefHandler",function(M){return v.list=M}),L(B(v),"trackRefHandler",function(M){return v.track=M}),L(B(v),"adaptHeight",function(){if(v.props.adaptiveHeight&&v.list){var M=v.list.querySelector('[data-index="'.concat(v.state.currentSlide,'"]'));v.list.style.height=(0,o.getHeight)(M)+"px"}}),L(B(v),"componentDidMount",function(){if(v.props.onInit&&v.props.onInit(),v.props.lazyLoad){var M=(0,o.getOnDemandLazySlides)(w(w({},v.props),v.state));M.length>0&&(v.setState(function(Y){return{lazyLoadedList:Y.lazyLoadedList.concat(M)}}),v.props.onLazyLoad&&v.props.onLazyLoad(M))}var y=w({listRef:v.list,trackRef:v.track},v.props);v.updateState(y,!0,function(){v.adaptHeight(),v.props.autoplay&&v.autoPlay("update")}),v.props.lazyLoad==="progressive"&&(v.lazyLoadTimer=setInterval(v.progressiveLazyLoad,1e3)),v.ro=new u.default(function(){v.state.animating?(v.onWindowResized(!1),v.callbackTimers.push(setTimeout(function(){return v.onWindowResized()},v.props.speed))):v.onWindowResized()}),v.ro.observe(v.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(Y){Y.onfocus=v.props.pauseOnFocus?v.onSlideFocus:null,Y.onblur=v.props.pauseOnFocus?v.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",v.onWindowResized):window.attachEvent("onresize",v.onWindowResized)}),L(B(v),"componentWillUnmount",function(){v.animationEndCallback&&clearTimeout(v.animationEndCallback),v.lazyLoadTimer&&clearInterval(v.lazyLoadTimer),v.callbackTimers.length&&(v.callbackTimers.forEach(function(M){return clearTimeout(M)}),v.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",v.onWindowResized):window.detachEvent("onresize",v.onWindowResized),v.autoplayTimer&&clearInterval(v.autoplayTimer),v.ro.disconnect()}),L(B(v),"componentDidUpdate",function(M){if(v.checkImagesLoad(),v.props.onReInit&&v.props.onReInit(),v.props.lazyLoad){var y=(0,o.getOnDemandLazySlides)(w(w({},v.props),v.state));y.length>0&&(v.setState(function(q){return{lazyLoadedList:q.lazyLoadedList.concat(y)}}),v.props.onLazyLoad&&v.props.onLazyLoad(y))}v.adaptHeight();var Y=w(w({listRef:v.list,trackRef:v.track},v.props),v.state),C=v.didPropsChange(M);C&&v.updateState(Y,C,function(){v.state.currentSlide>=t.default.Children.count(v.props.children)&&v.changeSlide({message:"index",index:t.default.Children.count(v.props.children)-v.props.slidesToShow,currentSlide:v.state.currentSlide}),v.props.autoplay?v.autoPlay("update"):v.pause("paused")})}),L(B(v),"onWindowResized",function(M){v.debouncedResize&&v.debouncedResize.cancel(),v.debouncedResize=(0,n.default)(function(){return v.resizeWindow(M)},50),v.debouncedResize()}),L(B(v),"resizeWindow",function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,y=!!(v.track&&v.track.node);if(y){var Y=w(w({listRef:v.list,trackRef:v.track},v.props),v.state);v.updateState(Y,M,function(){v.props.autoplay?v.autoPlay("update"):v.pause("paused")}),v.setState({animating:!1}),clearTimeout(v.animationEndCallback),delete v.animationEndCallback}}),L(B(v),"updateState",function(M,y,Y){var C=(0,o.initializedState)(M);M=w(w(w({},M),C),{},{slideIndex:C.currentSlide});var q=(0,o.getTrackLeft)(M);M=w(w({},M),{},{left:q});var N=(0,o.getTrackCSS)(M);(y||t.default.Children.count(v.props.children)!==t.default.Children.count(M.children))&&(C.trackStyle=N),v.setState(C,Y)}),L(B(v),"ssrInit",function(){if(v.props.variableWidth){var M=0,y=0,Y=[],C=(0,o.getPreClones)(w(w(w({},v.props),v.state),{},{slideCount:v.props.children.length})),q=(0,o.getPostClones)(w(w(w({},v.props),v.state),{},{slideCount:v.props.children.length}));v.props.children.forEach(function(ee){Y.push(ee.props.style.width),M+=ee.props.style.width});for(var N=0;N<C;N++)y+=Y[Y.length-1-N],M+=Y[Y.length-1-N];for(var $=0;$<q;$++)M+=Y[$];for(var Q=0;Q<v.state.currentSlide;Q++)y+=Y[Q];var ie={width:M+"px",left:-y+"px"};if(v.props.centerMode){var ue="".concat(Y[v.state.currentSlide],"px");ie.left="calc(".concat(ie.left," + (100% - ").concat(ue,") / 2 ) ")}return{trackStyle:ie}}var le=t.default.Children.count(v.props.children),ge=w(w(w({},v.props),v.state),{},{slideCount:le}),xe=(0,o.getPreClones)(ge)+(0,o.getPostClones)(ge)+le,ze=100/v.props.slidesToShow*xe,Ie=100/xe,We=-Ie*((0,o.getPreClones)(ge)+v.state.currentSlide)*ze/100;v.props.centerMode&&(We+=(100-Ie*ze/100)/2);var be={width:ze+"%",left:We+"%"};return{slideWidth:Ie+"%",trackStyle:be}}),L(B(v),"checkImagesLoad",function(){var M=v.list&&v.list.querySelectorAll&&v.list.querySelectorAll(".slick-slide img")||[],y=M.length,Y=0;Array.prototype.forEach.call(M,function(C){var q=function(){return++Y&&Y>=y&&v.onWindowResized()};if(!C.onclick)C.onclick=function(){return C.parentNode.focus()};else{var N=C.onclick;C.onclick=function($){N($),C.parentNode.focus()}}C.onload||(v.props.lazyLoad?C.onload=function(){v.adaptHeight(),v.callbackTimers.push(setTimeout(v.onWindowResized,v.props.speed))}:(C.onload=q,C.onerror=function(){q(),v.props.onLazyLoadError&&v.props.onLazyLoadError()}))})}),L(B(v),"progressiveLazyLoad",function(){for(var M=[],y=w(w({},v.props),v.state),Y=v.state.currentSlide;Y<v.state.slideCount+(0,o.getPostClones)(y);Y++)if(v.state.lazyLoadedList.indexOf(Y)<0){M.push(Y);break}for(var C=v.state.currentSlide-1;C>=-(0,o.getPreClones)(y);C--)if(v.state.lazyLoadedList.indexOf(C)<0){M.push(C);break}M.length>0?(v.setState(function(q){return{lazyLoadedList:q.lazyLoadedList.concat(M)}}),v.props.onLazyLoad&&v.props.onLazyLoad(M)):v.lazyLoadTimer&&(clearInterval(v.lazyLoadTimer),delete v.lazyLoadTimer)}),L(B(v),"slideHandler",function(M){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Y=v.props,C=Y.asNavFor,q=Y.beforeChange,N=Y.onLazyLoad,$=Y.speed,Q=Y.afterChange,ie=v.state.currentSlide,ue=(0,o.slideHandler)(w(w(w({index:M},v.props),v.state),{},{trackRef:v.track,useCSS:v.props.useCSS&&!y})),le=ue.state,ge=ue.nextState;if(le){q&&q(ie,le.currentSlide);var xe=le.lazyLoadedList.filter(function(ze){return v.state.lazyLoadedList.indexOf(ze)<0});N&&xe.length>0&&N(xe),!v.props.waitForAnimate&&v.animationEndCallback&&(clearTimeout(v.animationEndCallback),Q&&Q(ie),delete v.animationEndCallback),v.setState(le,function(){C&&v.asNavForIndex!==M&&(v.asNavForIndex=M,C.innerSlider.slideHandler(M)),ge&&(v.animationEndCallback=setTimeout(function(){var ze=ge.animating,Ie=b(ge,["animating"]);v.setState(Ie,function(){v.callbackTimers.push(setTimeout(function(){return v.setState({animating:ze})},10)),Q&&Q(le.currentSlide),delete v.animationEndCallback})},$))})}}),L(B(v),"changeSlide",function(M){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Y=w(w({},v.props),v.state),C=(0,o.changeSlide)(Y,M);if(!(C!==0&&!C)&&(y===!0?v.slideHandler(C,y):v.slideHandler(C),v.props.autoplay&&v.autoPlay("update"),v.props.focusOnSelect)){var q=v.list.querySelectorAll(".slick-current");q[0]&&q[0].focus()}}),L(B(v),"clickHandler",function(M){v.clickable===!1&&(M.stopPropagation(),M.preventDefault()),v.clickable=!0}),L(B(v),"keyHandler",function(M){var y=(0,o.keyHandler)(M,v.props.accessibility,v.props.rtl);y!==""&&v.changeSlide({message:y})}),L(B(v),"selectHandler",function(M){v.changeSlide(M)}),L(B(v),"disableBodyScroll",function(){var M=function(Y){Y=Y||window.event,Y.preventDefault&&Y.preventDefault(),Y.returnValue=!1};window.ontouchmove=M}),L(B(v),"enableBodyScroll",function(){window.ontouchmove=null}),L(B(v),"swipeStart",function(M){v.props.verticalSwiping&&v.disableBodyScroll();var y=(0,o.swipeStart)(M,v.props.swipe,v.props.draggable);y!==""&&v.setState(y)}),L(B(v),"swipeMove",function(M){var y=(0,o.swipeMove)(M,w(w(w({},v.props),v.state),{},{trackRef:v.track,listRef:v.list,slideIndex:v.state.currentSlide}));y&&(y.swiping&&(v.clickable=!1),v.setState(y))}),L(B(v),"swipeEnd",function(M){var y=(0,o.swipeEnd)(M,w(w(w({},v.props),v.state),{},{trackRef:v.track,listRef:v.list,slideIndex:v.state.currentSlide}));if(y){var Y=y.triggerSlideHandler;delete y.triggerSlideHandler,v.setState(y),Y!==void 0&&(v.slideHandler(Y),v.props.verticalSwiping&&v.enableBodyScroll())}}),L(B(v),"touchEnd",function(M){v.swipeEnd(M),v.clickable=!0}),L(B(v),"slickPrev",function(){v.callbackTimers.push(setTimeout(function(){return v.changeSlide({message:"previous"})},0))}),L(B(v),"slickNext",function(){v.callbackTimers.push(setTimeout(function(){return v.changeSlide({message:"next"})},0))}),L(B(v),"slickGoTo",function(M){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(M=Number(M),isNaN(M))return"";v.callbackTimers.push(setTimeout(function(){return v.changeSlide({message:"index",index:M,currentSlide:v.state.currentSlide},y)},0))}),L(B(v),"play",function(){var M;if(v.props.rtl)M=v.state.currentSlide-v.props.slidesToScroll;else if((0,o.canGoNext)(w(w({},v.props),v.state)))M=v.state.currentSlide+v.props.slidesToScroll;else return!1;v.slideHandler(M)}),L(B(v),"autoPlay",function(M){v.autoplayTimer&&clearInterval(v.autoplayTimer);var y=v.state.autoplaying;if(M==="update"){if(y==="hovered"||y==="focused"||y==="paused")return}else if(M==="leave"){if(y==="paused"||y==="focused")return}else if(M==="blur"&&(y==="paused"||y==="hovered"))return;v.autoplayTimer=setInterval(v.play,v.props.autoplaySpeed+50),v.setState({autoplaying:"playing"})}),L(B(v),"pause",function(M){v.autoplayTimer&&(clearInterval(v.autoplayTimer),v.autoplayTimer=null);var y=v.state.autoplaying;M==="paused"?v.setState({autoplaying:"paused"}):M==="focused"?(y==="hovered"||y==="playing")&&v.setState({autoplaying:"focused"}):y==="playing"&&v.setState({autoplaying:"hovered"})}),L(B(v),"onDotsOver",function(){return v.props.autoplay&&v.pause("hovered")}),L(B(v),"onDotsLeave",function(){return v.props.autoplay&&v.state.autoplaying==="hovered"&&v.autoPlay("leave")}),L(B(v),"onTrackOver",function(){return v.props.autoplay&&v.pause("hovered")}),L(B(v),"onTrackLeave",function(){return v.props.autoplay&&v.state.autoplaying==="hovered"&&v.autoPlay("leave")}),L(B(v),"onSlideFocus",function(){return v.props.autoplay&&v.pause("focused")}),L(B(v),"onSlideBlur",function(){return v.props.autoplay&&v.state.autoplaying==="focused"&&v.autoPlay("blur")}),L(B(v),"render",function(){var M=(0,i.default)("slick-slider",v.props.className,{"slick-vertical":v.props.vertical,"slick-initialized":!0}),y=w(w({},v.props),v.state),Y=(0,o.extractObject)(y,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),C=v.props.pauseOnHover;Y=w(w({},Y),{},{onMouseEnter:C?v.onTrackOver:null,onMouseLeave:C?v.onTrackLeave:null,onMouseOver:C?v.onTrackOver:null,focusOnSelect:v.props.focusOnSelect&&v.clickable?v.selectHandler:null});var q;if(v.props.dots===!0&&v.state.slideCount>=v.props.slidesToShow){var N=(0,o.extractObject)(y,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),$=v.props.pauseOnDotsHover;N=w(w({},N),{},{clickHandler:v.changeSlide,onMouseEnter:$?v.onDotsLeave:null,onMouseOver:$?v.onDotsOver:null,onMouseLeave:$?v.onDotsLeave:null}),q=t.default.createElement(a.Dots,N)}var Q,ie,ue=(0,o.extractObject)(y,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);ue.clickHandler=v.changeSlide,v.props.arrows&&(Q=t.default.createElement(c.PrevArrow,ue),ie=t.default.createElement(c.NextArrow,ue));var le=null;v.props.vertical&&(le={height:v.state.listHeight});var ge=null;v.props.vertical===!1?v.props.centerMode===!0&&(ge={padding:"0px "+v.props.centerPadding}):v.props.centerMode===!0&&(ge={padding:v.props.centerPadding+" 0px"});var xe=w(w({},le),ge),ze=v.props.touchMove,Ie={className:"slick-list",style:xe,onClick:v.clickHandler,onMouseDown:ze?v.swipeStart:null,onMouseMove:v.state.dragging&&ze?v.swipeMove:null,onMouseUp:ze?v.swipeEnd:null,onMouseLeave:v.state.dragging&&ze?v.swipeEnd:null,onTouchStart:ze?v.swipeStart:null,onTouchMove:v.state.dragging&&ze?v.swipeMove:null,onTouchEnd:ze?v.touchEnd:null,onTouchCancel:v.state.dragging&&ze?v.swipeEnd:null,onKeyDown:v.props.accessibility?v.keyHandler:null},We={className:M,dir:"ltr",style:v.props.style};return v.props.unslick&&(Ie={className:"slick-list"},We={className:M}),t.default.createElement("div",We,v.props.unslick?"":Q,t.default.createElement("div",x({ref:v.listRefHandler},Ie),t.default.createElement(s.Track,x({ref:v.trackRefHandler},Y),v.props.children)),v.props.unslick?"":ie,v.props.unslick?"":q)}),v.list=null,v.track=null,v.state=w(w({},r.default),{},{currentSlide:v.props.initialSlide,targetSlide:v.props.initialSlide?v.props.initialSlide:0,slideCount:t.default.Children.count(v.props.children)}),v.callbackTimers=[],v.clickable=!0,v.debouncedResize=null;var ne=v.ssrInit();return v.state=w(w({},v.state),ne),v}return T(oe,[{key:"didPropsChange",value:function(v){for(var ne=!1,M=0,y=Object.keys(this.props);M<y.length;M++){var Y=y[M];if(!v.hasOwnProperty(Y)){ne=!0;break}if(!(p(v[Y])==="object"||typeof v[Y]=="function"||isNaN(v[Y]))&&v[Y]!==this.props[Y]){ne=!0;break}}return ne||t.default.Children.count(this.props.children)!==t.default.Children.count(v.children)}}]),oe}(t.default.Component),Va}var nu,jf;function eb(){if(jf)return nu;jf=1;var t=function(r){return r.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()}).toLowerCase()};return nu=t,nu}var iu,Sf;function tb(){if(Sf)return iu;Sf=1;var t=eb(),r=function(o){var s=/[height|width]$/;return s.test(o)},n=function(o){var s="",a=Object.keys(o);return a.forEach(function(c,u){var h=o[c];c=t(c),r(c)&&typeof h=="number"&&(h=h+"px"),h===!0?s+=c:h===!1?s+="not "+c:s+="("+c+": "+h+")",u<a.length-1&&(s+=" and ")}),s},i=function(o){var s="";return typeof o=="string"?o:o instanceof Array?(o.forEach(function(a,c){s+=n(a),c<o.length-1&&(s+=", ")}),s):n(o)};return iu=i,iu}var su,Cf;function rb(){if(Cf)return su;Cf=1;function t(r){this.options=r,!r.deferSetup&&this.setup()}return t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(r){return this.options===r||this.options.match===r}},su=t,su}var ou,_f;function C0(){if(_f)return ou;_f=1;function t(i,o){var s=0,a=i.length,c;for(s;s<a&&(c=o(i[s],s),c!==!1);s++);}function r(i){return Object.prototype.toString.apply(i)==="[object Array]"}function n(i){return typeof i=="function"}return ou={isFunction:n,isArray:r,each:t},ou}var au,kf;function nb(){if(kf)return au;kf=1;var t=rb(),r=C0().each;function n(i,o){this.query=i,this.isUnconditional=o,this.handlers=[],this.mql=window.matchMedia(i);var s=this;this.listener=function(a){s.mql=a.currentTarget||a,s.assess()},this.mql.addListener(this.listener)}return n.prototype={constuctor:n,addHandler:function(i){var o=new t(i);this.handlers.push(o),this.matches()&&o.on()},removeHandler:function(i){var o=this.handlers;r(o,function(s,a){if(s.equals(i))return s.destroy(),!o.splice(a,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){r(this.handlers,function(i){i.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var i=this.matches()?"on":"off";r(this.handlers,function(o){o[i]()})}},au=n,au}var lu,Af;function ib(){if(Af)return lu;Af=1;var t=nb(),r=C0(),n=r.each,i=r.isFunction,o=r.isArray;function s(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return s.prototype={constructor:s,register:function(a,c,u){var h=this.queries,p=u&&this.browserIsIncapable;return h[a]||(h[a]=new t(a,p)),i(c)&&(c={match:c}),o(c)||(c=[c]),n(c,function(x){i(x)&&(x={match:x}),h[a].addHandler(x)}),this},unregister:function(a,c){var u=this.queries[a];return u&&(c?u.removeHandler(c):(u.clear(),delete this.queries[a])),this}},lu=s,lu}var cu,Lf;function sb(){if(Lf)return cu;Lf=1;var t=ib();return cu=new t,cu}var Pf;function ob(){return Pf||(Pf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(lo()),n=Z5(),i=a(tb()),o=a(b0()),s=fl();function a(R){return R&&R.__esModule?R:{default:R}}function c(R){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},c(R)}function u(){return u=Object.assign?Object.assign.bind():function(R){for(var L=1;L<arguments.length;L++){var j=arguments[L];for(var A in j)Object.prototype.hasOwnProperty.call(j,A)&&(R[A]=j[A])}return R},u.apply(this,arguments)}function h(R,L){var j=Object.keys(R);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(R);L&&(A=A.filter(function(E){return Object.getOwnPropertyDescriptor(R,E).enumerable})),j.push.apply(j,A)}return j}function p(R){for(var L=1;L<arguments.length;L++){var j=arguments[L]!=null?arguments[L]:{};L%2?h(Object(j),!0).forEach(function(A){P(R,A,j[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(j)):h(Object(j)).forEach(function(A){Object.defineProperty(R,A,Object.getOwnPropertyDescriptor(j,A))})}return R}function x(R,L){if(!(R instanceof L))throw new TypeError("Cannot call a class as a function")}function b(R,L){for(var j=0;j<L.length;j++){var A=L[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,D(A.key),A)}}function m(R,L,j){return L&&b(R.prototype,L),Object.defineProperty(R,"prototype",{writable:!1}),R}function _(R,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(L&&L.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),L&&w(R,L)}function w(R,L){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,E){return A.__proto__=E,A},w(R,L)}function O(R){var L=H();return function(){var A=Z(R),E;if(L){var z=Z(this).constructor;E=Reflect.construct(A,arguments,z)}else E=A.apply(this,arguments);return k(this,E)}}function k(R,L){if(L&&(c(L)==="object"||typeof L=="function"))return L;if(L!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(R)}function T(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function H(){try{var R=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H=function(){return!!R})()}function Z(R){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},Z(R)}function P(R,L,j){return L=D(L),L in R?Object.defineProperty(R,L,{value:j,enumerable:!0,configurable:!0,writable:!0}):R[L]=j,R}function D(R){var L=B(R,"string");return c(L)=="symbol"?L:String(L)}function B(R,L){if(c(R)!="object"||!R)return R;var j=R[Symbol.toPrimitive];if(j!==void 0){var A=j.call(R,L);if(c(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(R)}var G=(0,s.canUseDOM)()&&sb();t.default=function(R){_(j,R);var L=O(j);function j(A){var E;return x(this,j),E=L.call(this,A),P(T(E),"innerSliderRefHandler",function(z){return E.innerSlider=z}),P(T(E),"slickPrev",function(){return E.innerSlider.slickPrev()}),P(T(E),"slickNext",function(){return E.innerSlider.slickNext()}),P(T(E),"slickGoTo",function(z){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return E.innerSlider.slickGoTo(z,oe)}),P(T(E),"slickPause",function(){return E.innerSlider.pause("paused")}),P(T(E),"slickPlay",function(){return E.innerSlider.autoPlay("play")}),E.state={breakpoint:null},E._responsiveMediaHandlers=[],E}return m(j,[{key:"media",value:function(E,z){G.register(E,z),this._responsiveMediaHandlers.push({query:E,handler:z})}},{key:"componentDidMount",value:function(){var E=this;if(this.props.responsive){var z=this.props.responsive.map(function(re){return re.breakpoint});z.sort(function(re,v){return re-v}),z.forEach(function(re,v){var ne;v===0?ne=(0,i.default)({minWidth:0,maxWidth:re}):ne=(0,i.default)({minWidth:z[v-1]+1,maxWidth:re}),(0,s.canUseDOM)()&&E.media(ne,function(){E.setState({breakpoint:re})})});var oe=(0,i.default)({minWidth:z.slice(-1)[0]});(0,s.canUseDOM)()&&this.media(oe,function(){E.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(E){G.unregister(E.query,E.handler)})}},{key:"render",value:function(){var E=this,z,oe;this.state.breakpoint?(oe=this.props.responsive.filter(function($){return $.breakpoint===E.state.breakpoint}),z=oe[0].settings==="unslick"?"unslick":p(p(p({},o.default),this.props),oe[0].settings)):z=p(p({},o.default),this.props),z.centerMode&&(z.slidesToScroll>1,z.slidesToScroll=1),z.fade&&(z.slidesToShow>1,z.slidesToScroll>1,z.slidesToShow=1,z.slidesToScroll=1);var re=r.default.Children.toArray(this.props.children);re=re.filter(function($){return typeof $=="string"?!!$.trim():!!$}),z.variableWidth&&(z.rows>1||z.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),z.variableWidth=!1);for(var v=[],ne=null,M=0;M<re.length;M+=z.rows*z.slidesPerRow){for(var y=[],Y=M;Y<M+z.rows*z.slidesPerRow;Y+=z.slidesPerRow){for(var C=[],q=Y;q<Y+z.slidesPerRow&&(z.variableWidth&&re[q].props.style&&(ne=re[q].props.style.width),!(q>=re.length));q+=1)C.push(r.default.cloneElement(re[q],{key:100*M+10*Y+q,tabIndex:-1,style:{width:"".concat(100/z.slidesPerRow,"%"),display:"inline-block"}}));y.push(r.default.createElement("div",{key:10*M+Y},C))}z.variableWidth?v.push(r.default.createElement("div",{key:M,style:{width:ne}},y)):v.push(r.default.createElement("div",{key:M},y))}if(z==="unslick"){var N="regular slider "+(this.props.className||"");return r.default.createElement("div",{className:N},re)}else v.length<=z.slidesToShow&&!z.infinite&&(z.unslick=!0);return r.default.createElement(n.InnerSlider,u({style:this.props.style,ref:this.innerSliderRefHandler},(0,s.filterSettings)(z)),v)}}]),j}(r.default.Component)}(Qd)),Qd}var Nf;function ab(){return Nf||(Nf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(ob());function n(i){return i&&i.__esModule?i:{default:i}}t.default=r.default}(Kd)),Kd}var lb=ab();const _0=hg(lb),Of=hr(er);hr(de);hr(ke);hr(V);hr(Cr);hr(Lr);hr(Tr);const cb=t=>{const r=[],n=[],i=[],o=[];if(t.attachments&&Array.isArray(t.attachments)&&t.attachments.forEach(s=>{const a=s.url?`${os}${s.url}`:`${Es}/storage/${s.file_path}`;switch(s.file_type){case"image":n.push({id:s.id,url:a,mediaType:"image",original_name:s.original_name||"Image"});break;case"video":r.push({id:s.id,url:a,mediaType:"video",original_name:s.original_name||"Video"});break;default:i.push({id:s.id,url:a,name:s.original_name||"Document",size:s.size||0,mediaType:"document",mime_type:s.mime_type})}}),t.videos&&Array.isArray(t.videos)?r.push(...t.videos.map(s=>({...s,mediaType:"video"}))):t.media&&t.mediaType==="video"&&r.push({id:"main-video",url:t.media,mediaType:"video"}),t.images&&Array.isArray(t.images))n.push(...t.images.map(s=>({...s,mediaType:"image"})));else if(t.imageUrl||t.media&&t.mediaType!=="video"){const s=t.imageUrl||t.media;s&&!n.some(a=>a.url===s)&&n.push({id:"main-image",url:s,mediaType:"image"})}if(t.documents&&Array.isArray(t.documents)?i.push(...t.documents.map(s=>({...s,mediaType:"document"}))):t.file&&i.push({id:"main-doc",url:t.file,name:t.original_name||"Document",size:t.fileSize||0,mediaType:"document"}),t.polls){const s=Array.isArray(t.polls)?t.polls:[t.polls];o.push(...s.map(a=>({id:a.id,question:a.question,options:(a.options||[]).map(c=>{var u,h,p,x;return{id:c.id,text:(h=(u=c.option_text)!=null?u:c.text)!=null?h:"",votes:(x=(p=c.vote_count)!=null?p:c.votes)!=null?x:0}}),mediaType:"poll"})))}else t.hasPoll&&o.push({id:"main-poll",question:t.pollQuestion||"Poll",options:(t.pollOptions||[]).map((s,a)=>{var c,u,h,p,x;return{id:(c=s.id)!=null?c:a,text:(h=(u=s.option_text)!=null?u:s.text)!=null?h:String(s),votes:(x=(p=s.vote_count)!=null?p:s.votes)!=null?x:0}}),mediaType:"poll"});return{videos:r,images:n,documents:i,polls:o,all:[...r,...n,...i,...o]}},Rf=async(t,r,n)=>{try{console.log("Download request for:",{url:t,fileName:r,fileType:n});const i=t.split("/"),o=i[i.length-1];let s=n;s||(t.includes("/images/")||t.includes("image")?s="images":t.includes("/videos/")||t.includes("video")?s="videos":s="documents");const a=`${Es}/resources/download/${s}/${o}`,c=localStorage.getItem("authToken"),u={};c&&(u.Authorization=`Bearer ${c}`),console.log("Making download request to:",a);const h=await fetch(a,{headers:u});if(!h.ok){const m=await h.json().catch(()=>({message:"Download failed"}));throw new Error(m.message||`Download failed with status: ${h.status}`)}const p=await h.blob(),x=window.URL.createObjectURL(p),b=document.createElement("a");b.href=x,b.download=r||o||"download",b.style.display="none",document.body.appendChild(b),b.click(),setTimeout(()=>{document.body.removeChild(b),window.URL.revokeObjectURL(x)},100)}catch(i){console.error("Download failed:",i)}},db=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(de,{className:r,style:{...n,left:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},ub=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(de,{className:r,style:{...n,right:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},zc=W.memo(({resource:t,onCardClick:r,onBookmark:n,onUpvote:i,onEdit:o,onDelete:s,currentUser:a,cardBg:c,textColor:u,mutedText:h,borderColor:p})=>{var Ie,We,be,ee;if(!t)return e.jsx(Of,{p:5,borderWidth:"1px",borderRadius:"lg",borderColor:p,bg:c,textAlign:"center",h:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(V,{color:h,children:"This saved resource is no longer available."})});const x=Ir(),[b,m]=W.useState(0),[_,w]=W.useState(!1),[O,k]=W.useState(t.is_upvoted||!1),[T,H]=W.useState(t.upvote_count||0),[Z,P]=W.useState(!1),[D,B]=W.useState({}),[G,R]=W.useState({}),[L,j]=W.useState(!1),[A,E]=W.useState([]),z=Ae=>{var Se;return{id:Ae.id,question:Ae.question,options:(Ae.options||[]).map(ce=>{var Me,Xe,Ze,pt,Ue;return{id:ce.id,text:(Xe=(Me=ce.option_text)!=null?Me:ce.text)!=null?Xe:"",votes:(pt=(Ze=ce.vote_count)!=null?Ze:ce.votes)!=null?pt:0,is_selected:(Ue=ce.is_selected)!=null?Ue:!1}}),user_option_id:(Se=Ae.user_option_id)!=null?Se:null}};W.useEffect(()=>{if(!t)return;let Ae=[];Array.isArray(t.polls)?Ae=t.polls.map(z):t.polls&&(Ae=[z(t.polls)]),E(Ae);const Se={},ce={};Ae.forEach(Me=>{var Ze;const Xe=Me.user_option_id||((Ze=Me.options.find(pt=>pt.is_selected))==null?void 0:Ze.id);Xe&&(Se[Me.id]=Xe,ce[Me.id]=!0)}),B(Se),R(ce)},[t]);const[oe,re]=W.useState(!1),v=Vr();W.useEffect(()=>{const Ae=Gp(),Se=Ae&&t.user&&Ae.id&&String(Ae.id)===String(t.user.id),ce=Ae&&["admin","moderator"].includes(Ae.primary_role||Ae.role);re(Se||ce)},[t]);const[ne,M]=W.useState(null),y=W.useRef(),[Y,C]=W.useState(!1);Er();const q=async()=>{var Ae,Se;if(t.id){P(!0);try{await d0(t.id),j(!1),x({title:"Resource deleted",description:"The resource has been successfully deleted.",status:"success",duration:3e3,isClosable:!0}),s&&s(t.id)}catch(ce){console.error("Error deleting resource:",ce),x({title:"Delete failed",description:((Se=(Ae=ce.response)==null?void 0:Ae.data)==null?void 0:Se.message)||"Failed to delete the resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}finally{P(!1)}}},{videos:N,images:$,documents:Q,polls:ie,all:ue}=W.useMemo(()=>cb(t),[t]),le={dots:!0,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:N.length+$.length>1,prevArrow:N.length+$.length>1?e.jsx(db,{}):null,nextArrow:N.length+$.length>1?e.jsx(ub,{}):null},ge=N.length+$.length+Q.length+ie.length,xe=Ae=>!Ae||isNaN(Ae)?"":Ae<1024?Ae+" B":Ae<1048576?(Ae/1024).toFixed(1)+" KB":(Ae/1048576).toFixed(1)+" MB",ze=Ae=>{if(!Ae)return"Just now";const Se=new Date,ce=new Date(Ae);if(isNaN(ce.getTime()))return"Just now";const Me=Math.floor((Se-ce)/1e3),Xe=Math.floor(Me/60),Ze=Math.floor(Xe/60),pt=Math.floor(Ze/24),Ue=ce.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(Me<60)return"Just now";if(Xe<60)return`${Xe} ${Xe===1?"minute":"minutes"} ago`;if(Ze<24)return`${Ze} ${Ze===1?"hour":"hours"} ago`;if(pt===1)return`Yesterday at ${Ue}`;if(pt<7)return`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][ce.getDay()]} at ${Ue}`;const Ce=Se.getFullYear(),ve=ce.getFullYear();return Ce===ve?`${["January","February","March","April","May","June","July","August","September","October","November","December"][ce.getMonth()]} ${ce.getDate()} at ${Ue}`:`${ce.toLocaleDateString([],{month:"long",day:"numeric",year:"numeric"})} at ${Ue}`};return e.jsxs(Of,{bg:se("white","gray.800"),borderRadius:"2xl",borderWidth:"1px",borderColor:se("rgba(226, 232, 240, 0.8)","gray.700"),overflow:"hidden",width:"100%",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.05)",_hover:{boxShadow:"0px 8px 24px rgba(0, 0, 0, 0.08)",transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx(ao,{p:4,pb:0,children:e.jsxs(ke,{align:"center",justify:"space-between",children:[e.jsxs(ke,{align:"center",gap:3,children:[e.jsx(Tr,{size:"md",src:(Ie=t.user)==null?void 0:Ie.avatar_url,name:t.user?`${t.user.first_name} ${t.user.last_name}`:"Anonymous",cursor:"pointer",onClick:Ae=>{Ae.stopPropagation(),t.user&&t.user.id&&v(`/user/${t.user.id}`)}}),e.jsxs(de,{children:[e.jsxs(ke,{align:"center",gap:2,mb:1,children:[e.jsx(V,{fontWeight:"bold",fontSize:"md",cursor:"pointer",onClick:Ae=>{Ae.stopPropagation(),t.user&&t.user.id&&v(`/user/${t.user.id}`)},children:t.user?t.user.id===a.id?"You":`${t.user.first_name} ${t.user.last_name}`:"Anonymous"}),(((We=t.user)==null?void 0:We.primary_role)==="admin"||((be=t.user)==null?void 0:be.primary_role)==="moderator")&&e.jsx(Sc,{size:"16px",bg:"blue.500",color:"white",children:e.jsx(Pi,{size:"10px"})})]}),e.jsxs(ke,{align:"center",gap:2,fontSize:"sm",color:h,children:[e.jsx(V,{children:ze(t.created_at||t.dateAdded)}),((ee=t.course)==null?void 0:ee.code)&&e.jsx(Vn,{size:"sm",colorScheme:"blue",variant:"subtle",borderRadius:"full",children:t.course.code})]})]})]}),oe&&e.jsxs(yn,{placement:"bottom-end",onClick:Ae=>Ae.stopPropagation(),children:[e.jsx(vn,{as:Mt,icon:e.jsx(gp,{}),variant:"ghost",size:"sm",borderRadius:"full"}),e.jsxs(wn,{shadow:"lg",borderRadius:"xl",children:[e.jsx(rr,{icon:e.jsx(Ig,{}),onClick:Ae=>{if(Ae.stopPropagation(),console.log("Editing resource with attachments:",t.attachments),M({title:t.title,description:t.description,attachments:t.attachments||[]}),o){const Se={...t,attachments:t.attachments||[]};o(Se)}},children:"Edit resource"}),e.jsx(rr,{icon:e.jsx(dl,{}),onClick:Ae=>{Ae.stopPropagation(),j(!0)},children:"Delete resource"})]})]})]})}),e.jsxs(ln,{p:4,pt:3,children:[e.jsxs(de,{mb:3,lineHeight:"1.5",children:[e.jsx(ut,{as:"h3",fontSize:"lg",fontWeight:"semibold",mb:2,color:se("blue.700","blue.300"),cursor:"pointer",onClick:()=>r(t.id),_hover:{textDecoration:"underline"},children:t.title}),e.jsx(V,{fontSize:"md",cursor:"pointer",onClick:()=>r(t.id),children:t.description})]}),ge>0&&e.jsxs(de,{mb:4,borderRadius:"xl",overflow:"hidden",children:[(N.length>0||$.length>0)&&e.jsx(de,{mb:3,children:e.jsx(_0,{...le,style:{position:"relative",zIndex:0},children:[...N,...$].map((Ae,Se)=>e.jsxs(de,{position:"relative",children:[Ae.mediaType==="video"?e.jsx(_s,{ratio:16/9,children:e.jsx("video",{src:Ae.url,controls:!0,style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx(_s,{ratio:16/9,children:e.jsx(Cr,{src:Ae.url,alt:Ae.original_name||`Image ${Se+1}`,objectFit:"cover"})}),e.jsx(Mt,{icon:e.jsx(Ai,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"whiteAlpha.900"},onClick:ce=>{ce.stopPropagation();const Me=Ae.name||(Ae.mediaType==="video"?`Video-${t.id}-${Se}`:`Image-${t.id}-${Se}`);Rf(Ae.url,Me),x({title:`Downloading ${Ae.mediaType}`,description:`${Me} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":`Download ${Ae.mediaType}`})]},Ae.id||Se))})}),Q.length>0&&e.jsxs(et,{spacing:2,mb:3,align:"stretch",children:[Q.slice(0,2).map((Ae,Se)=>e.jsxs(ke,{p:3,bg:se("gray.50","gray.700"),borderRadius:"lg",align:"center",cursor:"pointer",_hover:{bg:se("gray.100","gray.600")},children:[e.jsx(Sc,{size:"40px",bg:"blue.100",color:"blue.600",mr:3,children:e.jsx(Dn,{size:20})}),e.jsxs(de,{flex:"1",children:[e.jsx(V,{fontWeight:"medium",fontSize:"sm",children:Ae.name||`Document ${Se+1}`}),e.jsx(V,{fontSize:"xs",color:h,children:xe(Ae.size)})]}),e.jsx(Mt,{icon:e.jsx(Ai,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:ce=>{ce.stopPropagation();const Me=Ae.name||`Document-${Se+1}`;Rf(Ae.url,Me,"documents"),x({title:"Downloading file",description:`${Me} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":"Download file"})]},Ae.id||`doc-${Se}`)),Q.length>2&&e.jsxs(V,{fontSize:"sm",color:h,textAlign:"center",children:["+",Q.length-2," more"]})]}),A.length>0&&e.jsx(de,{children:A.slice(0,1).map((Ae,Se)=>{var pt,Ue;const ce=Ae.id||`poll-${Se}`,Me=((pt=Ae.options)==null?void 0:pt.reduce((Ce,ve)=>Ce+(ve.votes||0),0))||0;G[ce];const Xe=D[ce],Ze=async Ce=>{try{const{message:ve,poll:Pe}=await rh(Ce),De={id:Pe.id,question:Pe.question,options:(Pe.options||[]).map(_e=>{var Fe,Ne,st,Ge;return{id:_e.id,text:(Ne=(Fe=_e.option_text)!=null?Fe:_e.text)!=null?Ne:"",votes:(Ge=(st=_e.vote_count)!=null?st:_e.votes)!=null?Ge:0}})};E(_e=>_e.map(Fe=>Fe.id===De.id?De:Fe)),ve.startsWith("Vote removed")?(B(_e=>({..._e,[Pe.id]:null})),R(_e=>({..._e,[Pe.id]:!1}))):(B(_e=>({..._e,[Pe.id]:Ce})),R(_e=>({..._e,[Pe.id]:!0}))),x({title:ve,status:"success",duration:2e3,isClosable:!0})}catch(ve){console.error("Vote error",ve),x({title:"Failed to record vote",description:ve.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}};return e.jsxs(de,{bg:se("gray.50","gray.700"),p:4,borderRadius:"xl",onClick:Ce=>Ce.stopPropagation(),children:[e.jsx(V,{fontWeight:"semibold",mb:3,children:Ae.question}),e.jsx(et,{spacing:2,align:"stretch",children:(Ue=Ae.options)==null?void 0:Ue.map((Ce,ve)=>{const Pe=Ce.id||`option-${ve}`,De=Xe===Pe,_e=Ce.votes||0,Fe=Me>0?Math.round(_e/Me*100):0;return e.jsxs(de,{position:"relative",p:3,borderRadius:"lg",cursor:"pointer",onClick:()=>Ze(Pe),bg:se("white","gray.800"),border:"2px solid",borderColor:De?"blue.400":"transparent",_hover:{borderColor:De?"blue.500":se("gray.200","gray.600")},children:[e.jsx(de,{position:"absolute",left:0,top:0,bottom:0,width:`${Fe}%`,bg:De?"blue.100":se("gray.100","gray.700"),opacity:.3,borderRadius:"lg"}),e.jsxs(ke,{justify:"space-between",align:"center",position:"relative",children:[e.jsx(V,{children:Ce.text}),e.jsxs(V,{fontWeight:"bold",color:De?"blue.500":h,children:[Fe,"%"]})]})]},Pe)})}),e.jsxs(V,{fontSize:"sm",color:h,mt:2,textAlign:"center",children:[Me," ",Me===1?"vote":"votes"]})]},ce)})})]})]}),e.jsx(aa,{p:4,pt:0,children:e.jsxs(et,{width:"100%",spacing:2,align:"stretch",children:[e.jsxs(ke,{justify:"space-between",align:"center",width:"100%",children:[e.jsxs(at,{spacing:4,children:[e.jsxs(at,{spacing:1.5,align:"center",children:[e.jsx(ct,{as:Pc,boxSize:5,color:t.is_upvoted?"red.500":"inherit",fill:t.is_upvoted?"currentColor":"none",cursor:"pointer",onClick:Ae=>{Ae.stopPropagation(),i(t.id)}}),e.jsx(V,{fontSize:"sm",fontWeight:"medium",children:t.upvote_count||0})]}),e.jsxs(at,{spacing:1.5,align:"center",children:[e.jsx(ct,{as:Cu,boxSize:5}),e.jsx(V,{fontSize:"sm",fontWeight:"medium",children:t.comment_count||0})]}),e.jsxs(yn,{placement:"top",isLazy:!0,children:[e.jsx(vn,{as:Mt,icon:e.jsx(da,{}),variant:"ghost",size:"sm",p:0,minW:"auto","aria-label":"Share options",onClick:Ae=>Ae.stopPropagation()}),e.jsxs(wn,{shadow:"lg",borderRadius:"xl",p:4,children:[e.jsx(V,{fontWeight:"semibold",mb:3,children:"Share this post"}),e.jsxs(si,{columns:2,spacing:3,children:[e.jsxs(et,{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/resources/${t.id}`),x({title:"Link copied!",status:"success",duration:2e3})},cursor:"pointer",p:2,borderRadius:"lg",_hover:{bg:se("gray.100","gray.700")},children:[e.jsx(de,{dangerouslySetInnerHTML:{__html:uf.copy}}),e.jsx(V,{fontSize:"xs",children:"Copy Link"})]}),e.jsxs(et,{onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(`Check out: ${t.title} ${window.location.origin}/resources/${t.id}`)}`,"_blank"),cursor:"pointer",p:2,borderRadius:"lg",_hover:{bg:se("gray.100","gray.700")},children:[e.jsx(de,{dangerouslySetInnerHTML:{__html:uf.whatsapp}}),e.jsx(V,{fontSize:"xs",children:"WhatsApp"})]})]})]})]})]}),e.jsx(Mt,{icon:e.jsx($i,{fill:t.is_saved?"currentColor":"none"}),variant:"ghost",size:"lg",p:0,minW:"auto",color:t.is_saved?"blue.500":h,onClick:Ae=>{Ae.stopPropagation(),n(t.id,t.title)},"aria-label":"Bookmark"})]}),e.jsx(la,{isOpen:L,leastDestructiveRef:y,onClose:()=>j(!1),children:e.jsx(kr,{children:e.jsxs(ca,{children:[e.jsx(Fr,{fontSize:"lg",fontWeight:"bold",children:"Delete Resource"}),e.jsx(Ar,{children:"Are you sure you want to delete this resource? This action cannot be undone."}),e.jsxs(Ur,{children:[e.jsx(Ee,{ref:y,onClick:()=>j(!1),children:"Cancel"}),e.jsx(Ee,{colorScheme:"red",onClick:q,ml:3,isLoading:Z,loadingText:"Deleting",children:"Delete"})]})]})})}),t.viewCount&&e.jsxs(V,{fontSize:"sm",color:h,children:[t.viewCount," views"]})]})})]})}),hb=({resources:t,onBookmark:r,onUpvote:n,currentUser:i,onShare:o,onAddComment:s,onFollow:a,onCardClick:c,onEdit:u,onDelete:h,cardBg:p,textColor:x,mutedText:b,borderColor:m,isLoading:_,feedType:w})=>{if(_)return e.jsx(et,{spacing:6,align:"stretch",w:"full",children:[1,2,3].map(H=>e.jsxs(de,{as:hr.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{delay:H*.1}},bg:se("rgba(255, 255, 255, 0.7)","rgba(45, 55, 72, 0.7)"),backdropFilter:"blur(10px)",borderRadius:"24px",borderWidth:"1px",borderColor:se("brand.navy","rgba(74, 85, 104, 0.3)"),p:6,w:"full",overflow:"hidden",boxShadow:"0 10px 30px -15px rgba(0, 0, 0, 0.1)",children:[e.jsxs(at,{mb:4,children:[e.jsx(Sr,{height:"40px",width:"40px",borderRadius:"full"}),e.jsxs(et,{align:"start",spacing:2,flex:1,children:[e.jsx(Sr,{height:"10px",width:"120px"}),e.jsx(Sr,{height:"8px",width:"80px"})]})]}),e.jsx(Sr,{height:"16px",width:"70%",mb:4}),e.jsx(Sr,{height:"12px",width:"90%",mb:2}),e.jsx(Sr,{height:"12px",width:"60%",mb:4}),e.jsx(Sr,{height:"200px",width:"100%",borderRadius:"xl",mb:4}),e.jsxs(at,{spacing:4,justify:"space-between",children:[e.jsxs(at,{children:[e.jsx(Sr,{height:"30px",width:"30px",borderRadius:"full"}),e.jsx(Sr,{height:"30px",width:"30px",borderRadius:"full"}),e.jsx(Sr,{height:"30px",width:"30px",borderRadius:"full"})]}),e.jsx(Sr,{height:"10px",width:"60px"})]})]},H))});const O={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1,duration:.5}}},k={hidden:{opacity:0,y:20,scale:.98},show:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:260,damping:20,duration:.5}}},T=w==="grid"?e.jsx(de,{w:"full",position:"relative",as:hr.div,variants:O,initial:"hidden",animate:"show",children:e.jsx(si,{columns:{base:1,sm:2,lg:3},spacing:"20px",children:t&&t.map((H,Z)=>e.jsx(de,{as:hr.div,variants:k,gridRow:Z%5===0?"span 2":"span 1",gridColumn:Z%7===0?"span 2":"span 1",zIndex:100-Z,transformOrigin:"center",children:e.jsx(zc,{resource:H,onBookmark:r,onUpvote:n,currentUser:i,onCardClick:c,onEdit:u,onDelete:h,onShare:o,onAddComment:s,onFollow:a,cardBg:p,textColor:x,mutedText:b,borderColor:m})},H.id))})}):e.jsx(et,{spacing:8,align:"stretch",w:"full",as:hr.div,variants:O,initial:"hidden",animate:"show",children:t&&t.map((H,Z)=>e.jsx(de,{as:hr.div,variants:k,transformOrigin:"center",children:e.jsx(zc,{resource:H,onBookmark:r,onUpvote:n,currentUser:i,onCardClick:c,onEdit:u,onDelete:h,onAddComment:s,onFollow:a,cardBg:p,textColor:x,mutedText:b,borderColor:m})},H.id))});return e.jsx(de,{w:"full",children:_?e.jsx(de,{}):t&&t.length>0?T:e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:se("rgba(226, 232, 240, 0.8)","rgba(74, 85, 104, 0.3)"),borderRadius:"2xl",bg:se("rgba(255, 255, 255, 0.6)","rgba(45, 55, 72, 0.6)"),backdropFilter:"blur(8px)",boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.05)",as:hr.div,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(et,{spacing:4,children:[e.jsx(de,{p:4,borderRadius:"full",bg:se("gray.50","gray.700"),boxShadow:"inner",children:e.jsx(no,{size:30,color:se("#A0AEC0","#718096")})}),e.jsx(V,{color:b,fontSize:"lg",children:"No resources found matching your filters"}),e.jsx(V,{color:b,fontSize:"sm",children:"Try adjusting your search or filters"})]})})})},fb=({searchQuery:t,facultyFilter:r,setFacultyFilter:n,courseFilter:i,setCourseFilter:o,majorFilter:s,setMajorFilter:a,faculties:c,majors:u,courses:h,coursePagination:p,onCoursePageChange:x,isLoadingFilters:b,onClearFilters:m,mutedText:_})=>{se("blue.50","blue.900"),se("blue.100","blue.800"),se("gray.100","gray.700");const w=t!==""||r!=="All"||i!=="All"||s!=="All",O=H=>{var Z;return((Z=c.find(P=>P.id===H))==null?void 0:Z.name)||"Faculty"},k=H=>{var Z;return((Z=u.find(P=>P.id===H))==null?void 0:Z.name)||"Major"},T=H=>{var Z;return((Z=h.find(P=>P.id===H))==null?void 0:Z.title)||"Course"};return e.jsxs(ke,{direction:"column",w:"full",gap:3,children:[e.jsxs(ke,{justify:"space-between",align:"center",w:"full",mb:2,children:[e.jsxs(at,{children:[e.jsx(ct,{as:qc}),e.jsx(V,{fontWeight:"medium",children:"Filters"}),b&&e.jsx(en,{size:"sm",ml:2}),w&&!b&&e.jsx(Lr,{ml:1,colorScheme:"blue",borderRadius:"full",px:2,children:(t?1:0)+(r!=="All"?1:0)+(i!=="All"?1:0)+(s!=="All"?1:0)})]}),w&&e.jsx(Ee,{size:"xs",variant:"ghost",colorScheme:"blue",onClick:m,children:"Clear All"})]}),e.jsxs(ke,{direction:{base:"column",md:"row"},gap:3,mb:2,children:[e.jsxs(yn,{children:[e.jsx(vn,{as:Ee,rightIcon:e.jsx(is,{}),w:"full",isDisabled:b,children:r==="All"?"Faculty":O(r)}),e.jsxs(wn,{children:[e.jsx(rr,{onClick:()=>n("All"),children:"All Faculties"}),c&&c.map(H=>e.jsx(rr,{onClick:()=>n(H.id),children:H.name},H.id))]})]}),e.jsxs(yn,{children:[e.jsx(vn,{as:Ee,rightIcon:e.jsx(is,{}),w:"full",isDisabled:b||r==="All",children:s==="All"?"Major":k(s)}),e.jsxs(wn,{children:[e.jsx(rr,{onClick:()=>a("All"),children:"All Majors"}),u&&u.map(H=>e.jsx(rr,{onClick:()=>a(H.id),children:H.name},H.id))]})]}),e.jsxs(yn,{children:[e.jsx(vn,{as:Ee,rightIcon:e.jsx(is,{}),w:"full",isDisabled:b||s==="All",children:i==="All"?"Course":T(i)}),e.jsxs(wn,{children:[e.jsx(rr,{onClick:()=>o("All"),children:"All Courses"}),h&&h.map(H=>e.jsx(rr,{onClick:()=>o(H.id),children:H.title},H.id)),p&&p.last_page>1&&e.jsx(de,{px:3,py:2,children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(Ee,{size:"sm",onClick:()=>x(p.current_page-1),isDisabled:p.current_page===1,children:"Prev"}),e.jsxs(V,{fontSize:"sm",children:["Page ",p.current_page," of ",p.last_page]}),e.jsx(Ee,{size:"sm",onClick:()=>x(p.current_page+1),isDisabled:p.current_page===p.last_page,children:"Next"})]})})]})]})]}),w&&e.jsx(de,{mt:3,children:e.jsxs(Bm,{spacing:2,children:[r!=="All"&&e.jsx(ec,{children:e.jsxs(Vn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"green",children:[e.jsx(tc,{children:e.jsxs(at,{spacing:1,children:[e.jsx(V,{fontSize:"xs",children:"Faculty:"}),e.jsx(V,{fontSize:"sm",fontWeight:"medium",children:O(r)})]})}),e.jsx(qd,{onClick:()=>n("All")})]})}),s!=="All"&&e.jsx(ec,{children:e.jsxs(Vn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"purple",children:[e.jsx(tc,{children:e.jsxs(at,{spacing:1,children:[e.jsx(V,{fontSize:"xs",children:"Major:"}),e.jsx(V,{fontSize:"sm",fontWeight:"medium",children:k(s)})]})}),e.jsx(qd,{onClick:()=>a("All")})]})}),i!=="All"&&e.jsx(ec,{children:e.jsxs(Vn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"orange",children:[e.jsx(tc,{children:e.jsxs(at,{spacing:1,children:[e.jsx(V,{fontSize:"xs",children:"Course:"}),e.jsx(V,{fontSize:"sm",fontWeight:"medium",children:T(i)})]})}),e.jsx(qd,{onClick:()=>o("All")})]})}),t&&e.jsx(ec,{children:e.jsx(Vn,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"purple",children:e.jsx(tc,{children:e.jsxs(at,{spacing:1,children:[e.jsx(V,{fontSize:"xs",children:"Search:"}),e.jsxs(V,{fontSize:"sm",fontWeight:"medium",children:['"',t,'"']})]})})})})]})})]})},pb=({limit:t})=>{const[r,n]=W.useState([]),[i,o]=W.useState(!0),[s,a]=W.useState(null);Vr();const c=se("white","gray.800"),u=se("brand.navy","gray.700"),h=se("brand.navy","blue.300"),p=se("gray.700","gray.300"),x=se("linear-gradient(to bottom, white, blue.50)","linear-gradient(to bottom, gray.800, gray.900)");return W.useEffect(()=>{(async()=>{o(!0);try{const _=(await h0(t)).data||[];n(_)}catch(m){console.error("Error fetching top contributors:",m),a("Failed to load top contributors")}finally{o(!1)}})()},[t]),s?e.jsxs(de,{p:4,bg:c,borderRadius:"md",boxShadow:"sm",border:"1px",borderColor:u,children:[e.jsx(ut,{size:"sm",mb:3,color:"red.500",children:"Error"}),e.jsx(V,{fontSize:"sm",children:s})]}):e.jsxs(de,{p:4,bg:x,borderRadius:"lg",boxShadow:"md",border:"1px",borderColor:u,position:"sticky",top:"20px",children:[e.jsx(ut,{size:"md",mb:4,color:h,textAlign:"center",children:"Top Contributors"}),i?e.jsx(et,{spacing:4,align:"stretch",children:[...Array(t)].map((b,m)=>e.jsxs(at,{spacing:3,children:[e.jsx(qm,{size:"10"}),e.jsx(de,{flex:"1",children:e.jsx(Yo,{noOfLines:2,spacing:"2"})})]},m))}):e.jsx(et,{spacing:3,align:"stretch",children:r.length===0?e.jsx(V,{fontSize:"sm",textAlign:"center",color:p,children:"No contributors found"}):r.map((b,m)=>e.jsxs(de,{p:3,borderRadius:"md",bg:m===0?"yellow.100":m===1?"gray.100":m===2?"orange.100":"transparent",_dark:{bg:m===0?"yellow.900":m===1?"gray.700":m===2?"orange.900":"transparent"},_hover:{transform:"translateY(-2px)",transition:"transform 0.2s"},children:[e.jsxs(at,{spacing:3,children:[e.jsx(Tr,{size:"sm",name:`${b.first_name} ${b.last_name}`,src:b.avatar_url,border:m<3?"2px solid":"none",borderColor:m===0?"yellow.500":m===1?"gray.400":m===2?"orange.500":"transparent"}),e.jsxs(et,{spacing:1,align:"start",flex:"1",children:[e.jsxs(at,{children:[e.jsxs(V,{fontWeight:"medium",fontSize:"sm",children:[b.first_name," ",b.last_name]}),m<3&&e.jsxs(Lr,{colorScheme:m===0?"yellow":m===1?"gray":"orange",variant:"solid",fontSize:"xs",children:["#",m+1]})]}),e.jsx(V,{fontSize:"xs",color:"gray.500",_dark:{color:"gray.400"},children:b.major_name?` ${b.major_name}`:""})]})]}),e.jsxs(at,{mt:2,spacing:4,fontSize:"xs",color:"gray.500",children:[e.jsx(gi,{label:"Resources created",children:e.jsxs(ke,{align:"center",children:[e.jsx(Dn,{style:{marginRight:"4px"}}),e.jsx(V,{children:b.resources_count})]})}),e.jsx(gi,{label:"Total upvotes received",children:e.jsxs(ke,{align:"center",children:[e.jsx(_u,{style:{marginRight:"4px"}}),e.jsx(V,{children:b.user_upvote_count+b.resource_upvote_count})]})}),e.jsxs(Lr,{colorScheme:"blue",variant:"outline",ml:"auto",children:["Score: ",b.contribution_score]})]})]},b.id))})]})},sl=async(t={})=>(await yt.get("/courses",{params:t})).data,mb=({handleImageUpload:t,handleVideoUpload:r,handleDocumentUpload:n,handlePollAdd:i})=>{const o=W.useRef(null),s=W.useRef(null),a=W.useRef(null),c=se("gray.200","gray.600"),u=se("gray.50","gray.700");se("blue.500","blue.200");const h=[{type:"images",icon:rl,label:"Photo",ref:o,accept:"image/*",handler:t},{type:"videos",icon:Ju,label:"Video",ref:s,accept:"video/*",handler:r},{type:"documents",icon:Dn,label:"Document",ref:a,accept:".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx",handler:n},{type:"poll",icon:Xo,label:"Poll",handler:i}];return e.jsxs(e.Fragment,{children:[e.jsx(tn,{my:4,borderColor:c}),e.jsx(at,{spacing:2,justify:"space-between",children:e.jsx(ke,{children:h.map(p=>e.jsx(Wi.Fragment,{children:p.ref?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{size:"sm",leftIcon:e.jsx(ct,{as:p.icon}),variant:"ghost",colorScheme:"blue",onClick:()=>{var x;return(x=p.ref.current)==null?void 0:x.click()},_hover:{bg:u},px:3,children:p.label}),e.jsx("input",{type:"file",multiple:!0,hidden:!0,ref:p.ref,accept:p.accept,onChange:p.handler})]}):e.jsx(Ee,{size:"sm",leftIcon:e.jsx(ct,{as:p.icon}),variant:"ghost",colorScheme:"blue",onClick:p.handler,_hover:{bg:u},px:3,children:p.label})},p.type))})})]})},Do=t=>{const r=t.images||[],n=t.videos||[],i=t.documents||[],o=t.polls||[];return[...r.map(a=>({...a,mediaType:"image"})),...n.map(a=>({...a,mediaType:"video"})),...i.map(a=>({...a,mediaType:"document"})),...o.map(a=>({...a,mediaType:"poll"}))].sort((a,c)=>{if(!a.id||!c.id)return 0;let u=0,h=0;try{typeof a.id=="string"&&a.id.includes("-")&&(u=parseInt(a.id.split("-")[1])||0),typeof c.id=="string"&&c.id.includes("-")&&(h=parseInt(c.id.split("-")[1])||0)}catch(p){console.error("Error parsing attachment ID:",p)}return h-u})},Ef=t=>t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB",gb=({attachments:t,removeAttachment:r})=>{const n=se("gray.200","gray.600"),i=se("gray.50","gray.700"),o=Wi.useMemo(()=>{var a;return[t.images.length>0,t.videos.length>0,t.documents.length>0,((a=t.polls)==null?void 0:a.length)>0].filter(Boolean).length>1},[t]);return t.images.length===0&&t.videos.length===0&&t.documents.length===0&&(!t.polls||t.polls.length===0)?null:e.jsxs(de,{borderWidth:"1px",borderRadius:"lg",p:3,borderColor:n,bg:i,children:[e.jsxs(ke,{justify:"space-between",align:"center",mb:2,children:[e.jsx(V,{fontSize:"sm",fontWeight:"medium",children:"Attachments:"}),o&&e.jsx(Lr,{colorScheme:"purple",px:2,py:1,borderRadius:"full",fontSize:"xs",children:"Mixed Content"})]}),o&&e.jsxs(ke,{mb:3,gap:3,justify:"flex-start",children:[t.images.length>0&&e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ct,{as:rl,color:"green.500"}),e.jsxs(V,{fontSize:"xs",children:[t.images.length," image",t.images.length!==1?"s":""]})]}),t.videos.length>0&&e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ct,{as:Ju,color:"red.500"}),e.jsxs(V,{fontSize:"xs",children:[t.videos.length," video",t.videos.length!==1?"s":""]})]}),t.documents.length>0&&e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ct,{as:Dn,color:"blue.500"}),e.jsxs(V,{fontSize:"xs",children:[t.documents.length," document",t.documents.length!==1?"s":""]})]}),t.polls&&t.polls.length>0&&e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ct,{as:Xo,color:"teal.500"}),e.jsxs(V,{fontSize:"xs",children:[t.polls.length," poll",t.polls.length!==1?"s":""]})]})]}),Do({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length>0&&e.jsx(de,{children:Do({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length===1?e.jsxs(de,{position:"relative",borderRadius:"md",overflow:"hidden",children:[(()=>{const s=Do({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls})[0];if(s.mediaType==="poll")return e.jsxs(de,{p:4,bg:"blackAlpha.50",borderRadius:"md",children:[e.jsx(ke,{justifyContent:"space-between",alignItems:"flex-start",mb:3,children:e.jsxs(ke,{alignItems:"center",gap:2,children:[e.jsx(ct,{as:Xo,color:"teal.500"}),e.jsx(V,{fontWeight:"semibold",children:s.question})]})}),e.jsx(et,{spacing:3,align:"stretch",children:s.options.map((a,c)=>e.jsxs(de,{borderRadius:"md",borderWidth:"1px",p:2,children:[e.jsx(V,{fontSize:"sm",mb:1,children:a.text}),e.jsx(tl,{value:0,size:"sm",colorScheme:"teal",borderRadius:"full"})]},a.id))})]});if(s.mediaType==="video")return e.jsx(_s,{ratio:16/9,children:e.jsx(de,{as:"video",src:s.url,controls:!0,borderRadius:"md"})});if(s.mediaType==="image")return e.jsx(_s,{ratio:4/3,children:e.jsx(Cr,{src:s.url,alt:s.name,borderRadius:"md",objectFit:"cover"})});if(s.mediaType==="document")return e.jsx(ke,{p:4,borderRadius:"md",bg:"blackAlpha.50",align:"center",justify:"space-between",height:"100px",children:e.jsxs(ke,{align:"center",children:[e.jsx(ct,{as:Dn,boxSize:10,mr:3,color:"blue.500"}),e.jsxs(de,{children:[e.jsx(V,{fontSize:"md",fontWeight:"medium",noOfLines:1,children:s.name}),e.jsx(V,{fontSize:"sm",color:"gray.500",children:Ef(s.size)})]})]})})})(),e.jsx(Th,{position:"absolute",top:1,right:1,size:"sm",bg:"blackAlpha.700",color:"white",onClick:()=>{const s=Do({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls})[0],a=s.mediaType==="image"?"images":s.mediaType==="video"?"videos":s.mediaType==="poll"?"polls":"documents";r(a,s.id)},_hover:{bg:"blackAlpha.800"}})]}):e.jsx(si,{columns:Math.min(Do({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).length,3),spacing:2,children:Do({images:t.images,videos:t.videos,documents:t.documents,polls:t.polls}).map(s=>e.jsxs(de,{position:"relative",borderRadius:"md",overflow:"hidden",children:[s.mediaType==="poll"?e.jsxs(de,{p:3,bg:"blackAlpha.50",borderRadius:"md",height:"100%",children:[e.jsx(ke,{justifyContent:"space-between",alignItems:"flex-start",mb:2,children:e.jsxs(ke,{alignItems:"center",gap:1,children:[e.jsx(ct,{as:Xo,color:"teal.500",boxSize:4}),e.jsx(V,{fontWeight:"semibold",fontSize:"sm",noOfLines:1,children:s.question})]})}),e.jsxs(V,{fontSize:"xs",color:"gray.500",children:[s.options.length," options"]})]}):s.mediaType==="video"?e.jsx(_s,{ratio:1,children:e.jsx(de,{as:"video",src:s.url,controls:!0,borderRadius:"md"})}):s.mediaType==="image"?e.jsx(_s,{ratio:1,children:e.jsx(Cr,{src:s.url,alt:s.name,borderRadius:"md",objectFit:"cover"})}):e.jsx(_s,{ratio:1,children:e.jsxs(ke,{direction:"column",p:3,bg:"blackAlpha.50",align:"center",justify:"center",borderRadius:"md",height:"100%",width:"100%",children:[e.jsx(ct,{as:Dn,boxSize:10,mb:2,color:"blue.500"}),e.jsx(V,{fontSize:"sm",fontWeight:"medium",noOfLines:1,textAlign:"center",children:s.name}),e.jsx(V,{fontSize:"xs",color:"gray.500",children:Ef(s.size)})]})}),e.jsx(Th,{position:"absolute",top:1,right:1,size:"sm",bg:"blackAlpha.700",color:"white",onClick:()=>{const a=s.mediaType==="image"?"images":s.mediaType==="video"?"videos":"documents";r(a,s.id)},_hover:{bg:"blackAlpha.800"}})]},s.id))})})]})},du=t=>new Promise((r,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>r(i.result),i.onerror=o=>n(o)}),xb=({isOpen:t,onClose:r,addNewPost:n,updateResource:i,editResource:o,user:s})=>{var De,_e;const{user:a}=ai(),c=s||a,u=se("blue.500","blue.200"),h=se("gray.200","gray.600");se("gray.50","gray.700");const p=se("blue.500","blue.200"),x=Ir(),[b,m]=W.useState(""),[_,w]=W.useState(""),[O,k]=W.useState(""),[T,H]=W.useState(!1),[Z,P]=W.useState(""),[D,B]=W.useState(""),[G,R]=W.useState(""),[L,j]=W.useState(""),[A,E]=W.useState(!1),[z,oe]=W.useState([]),[re,v]=W.useState(!1),[ne,M]=W.useState(1),[y,Y]=W.useState(1),[C,q]=W.useState(!1),[N,$]=W.useState(""),[Q,ie]=W.useState(["",""]),[ue,le]=W.useState(!1),[ge,xe]=W.useState({images:[],videos:[],documents:[],polls:[]}),[ze,Ie]=W.useState([]),[We,be]=W.useState([]),ee=W.useMemo(()=>[ge.images.length>0,ge.videos.length>0,ge.documents.length>0,ge.polls.length>0].filter(Boolean).length>1,[ge]);W.useRef(null),W.useEffect(()=>{if(o&&t){if(H(!0),m(o.title||""),w(o.description||""),o.attachments&&Array.isArray(o.attachments)){const Fe={images:[],videos:[],documents:[],polls:[]};o.attachments.forEach(Ne=>{const st=Ne.url?`${os}${Ne.url}`:`${Es}/storage/${Ne.file_path}`,Ge={id:Ne.id,url:st,name:Ne.original_name||"File",preview:st};switch(Ne.file_type){case"image":Fe.images.push(Ge);break;case"video":Fe.videos.push(Ge);break;case"document":Fe.documents.push(Ge);break}}),xe(Fe)}}else H(!1),m(""),w(""),k(""),P(""),B(""),R(""),j(""),xe({images:[],videos:[],documents:[],polls:[]}),Ie([])},[o,t]),W.useRef(null),W.useRef(null),W.useEffect(()=>{t&&(async(Ne=1)=>{var st,Ge;v(!0);try{const ot=localStorage.getItem("major_id"),Nt=localStorage.getItem("faculty_id"),Ct={...ot?{major_id:ot}:Nt?{faculty_id:Nt}:{},page:Ne,per_page:10},dt=await sl(Ct);oe(dt.data||[]),M(dt.current_page||1),Y(dt.last_page||1)}catch(ot){x({title:"Failed to fetch courses",description:((Ge=(st=ot.response)==null?void 0:st.data)==null?void 0:Ge.message)||ot.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})}finally{v(!1)}})(1)},[t]);const Ae=async Fe=>{var Ne,st;if(!(Fe<1||Fe>y)){v(!0);try{const Ge=localStorage.getItem("major_id"),ot=localStorage.getItem("faculty_id"),Nt={...Ge?{major_id:Ge}:ot?{faculty_id:ot}:{},page:Fe,per_page:10},Ct=await sl(Nt);oe(Ct.data||[]),M(Ct.current_page||Fe),Y(Ct.last_page||1)}catch(Ge){x({title:"Failed to fetch courses",description:((st=(Ne=Ge.response)==null?void 0:Ne.data)==null?void 0:st.message)||Ge.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})}finally{v(!1)}}},Se=()=>{m(""),w(""),k(""),P(""),B(""),R(""),j(""),$(""),ie(["",""]),le(!1),xe({images:[],videos:[],documents:[],polls:[]}),Ie([])},ce=async()=>{var Fe,Ne,st,Ge,ot,Nt;if(!b.trim()){x({title:"Title required",description:"Please add a title for your post",status:"error",duration:3e3,isClosable:!0});return}E(!0);try{const Ct={};if(Ct.content=_,Ct.title=b,Ct.type=O||"Default",!O&&ee?Ct.type="Mixed Content":ge.images.length>0&&!O&&!ee||ge.videos.length>0&&!O&&!ee?Ct.type="Media":ge.documents.length>0&&!O&&!ee?Ct.type="Course Material":ge.polls.length>0&&!O&&!ee&&(Ct.type="Poll"),T&&o)try{console.log("Updating resource with ID:",o.id);const dt=new FormData;if(b.trim()&&dt.append("title",b.trim()),_.trim()&&dt.append("description",_.trim()),ze&&ze.length>0?(console.log(`Adding ${ze.length} new attachment(s)`),console.log("Attachment files to add:",ze),ze.forEach(mt=>{dt.append("attachments[]",mt),console.log("Added file to form data:",mt.name)})):console.log("No new attachment files to add"),We&&We.length>0&&(console.log(`Removing ${We.length} attachment(s):`,We),We.forEach(mt=>{dt.append("remove_attachments[]",mt)})),console.log("Resource ID for update:",o.id),!o.id)throw new Error("Cannot update resource: Missing resource ID");if(typeof i=="function"){const mt={id:o.id,title:b.trim(),description:_.trim(),newAttachments:ze,removeAttachmentIds:We};console.log("[CreatePostModal.jsx] Calling props.updateResource with:",JSON.stringify(mt,(zt,Ft)=>Ft instanceof File?Ft.name:Ft,2)),await i(mt)}else console.log(`Updating resource ${o.id} with:`,{title:b.trim(),description:_.trim(),newAttachments:ze,removeAttachmentIds:We}),console.log(`Attachment files count: ${ze.length}`),console.log(`Attachments to remove count: ${We.length}`),await s0(o.id,{title:b.trim(),description:_.trim(),newAttachments:ze,removeAttachmentIds:We});x({title:"Resource updated",description:"Your resource has been successfully updated with attachment changes",status:"success",duration:3e3,isClosable:!0}),r()}catch(dt){console.error("Error updating resource with attachments:",dt),x({title:"Update failed",description:((Ne=(Fe=dt.response)==null?void 0:Fe.data)==null?void 0:Ne.message)||"Failed to update the resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}else{const dt=localStorage.getItem("major_id")||s&&(s.major_id||((st=s.major)==null?void 0:st.id)),mt=localStorage.getItem("faculty_id")||s&&(s.faculty_id||((Ge=s.faculty)==null?void 0:Ge.id));if(!dt||!mt){x({title:"Missing profile information",description:"Your major or faculty information is missing. Please re-login or complete your profile before posting.",status:"error",duration:4e3,isClosable:!0}),E(!1);return}const zt=new FormData;if(zt.append("title",b.trim()),zt.append("description",_.trim()),zt.append("type",Ct.type),zt.append("major_id",dt),zt.append("faculty_id",mt),Z&&zt.append("course_id",Z),O==="event"?(zt.append("event_date",D),zt.append("location",G)):O==="study_group"&&zt.append("study_date",L),ue&&(zt.append("poll[question]",N),Q.forEach(Ft=>{Ft.trim()&&zt.append("poll[options][]",Ft.trim())})),ze.forEach(Ft=>{zt.append("attachments[]",Ft)}),typeof n=="function"){const Ft=localStorage.getItem("major_id"),fr=localStorage.getItem("faculty_id"),Te={title:Ct.title,type:Ct.type,attachments:ze,course_id:Z,major_id:Ft,faculty_id:fr};ue&&(Te.poll={question:N,options:Q.filter(He=>He.trim()!=="")}),await n(Ct.content,Te.type,Te)}else await n(zt);Se(),r()}}catch(Ct){console.error("Error with resource:",Ct),x({title:"Error",description:((Nt=(ot=Ct.response)==null?void 0:ot.data)==null?void 0:Nt.message)||"Failed to process resource. Please try again.",status:"error",duration:4e3,isClosable:!0})}finally{E(!1)}},Me=async Fe=>{const Ne=Array.from(Fe.target.files);if(Ne.length!==0)try{x({title:"Uploading images...",status:"info",duration:2e3,isClosable:!0});const st=[],Ge=[];for(const ot of Ne){if(!ot.type.startsWith("image/")){x({title:"Invalid file type",description:`${ot.name} is not an image file.`,status:"error",duration:3e3,isClosable:!0});continue}if(Ge.push(ot),ot.size>5*1024*1024){x({title:"File too large",description:`${ot.name} exceeds the 5MB limit.`,status:"error",duration:3e3,isClosable:!0});continue}const Nt=Date.now(),Ct=Math.random().toString(36).substring(2,9),dt=`img-${Nt}-${Ct}`,mt=await du(ot);st.push({id:dt,name:ot.name,type:ot.type,size:ot.size,url:mt})}Ie(ot=>[...ot,...Ge]),xe(ot=>{const Nt=ot.videos.length>0||ot.documents.length>0;return Nt&&!O?k("Mixed Content"):!Nt&&!O&&k("Media"),{...ot,images:[...ot.images,...st]}}),st.length>0&&x({title:"Images uploaded successfully",status:"success",duration:3e3,isClosable:!0})}catch(st){x({title:"Error uploading images",description:st.message,status:"error",duration:3e3,isClosable:!0})}},Xe=async Fe=>{const Ne=Array.from(Fe.target.files);if(Ne.length!==0)try{E(!0);const st=Ne.filter(dt=>dt.type.startsWith("video/")||dt.name.match(/\.(mp4|mov|avi|wmv|flv|webm|mkv)$/i));st.length!==Ne.length&&x({title:"Invalid file type",description:"Only video files are allowed for video upload",status:"warning",duration:3e3,isClosable:!0});const Ge=20*1024*1024,ot=st.filter(dt=>dt.size<=Ge);ot.length!==st.length&&x({title:"File too large",description:"Some videos exceed the 20MB size limit and will be skipped",status:"warning",duration:3e3,isClosable:!0});const Ct=(await Promise.all(ot.map(async dt=>{try{const mt=await du(dt);return{id:`video-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:dt.name,url:mt,size:dt.size,type:"video",mimeType:dt.type||"video/mp4"}}catch(mt){return console.error(`Error processing video ${dt.name}:`,mt),null}}))).filter(dt=>dt!==null);Ct.length>0?(xe(dt=>{const mt=dt.images.length>0||dt.documents.length>0;return O!=="Media"&&!mt?k("Media"):mt&&!O&&k("Mixed Content"),{...dt,videos:[...dt.videos,...Ct].slice(0,2)}}),Ie(dt=>[...dt,...ot]),x({title:"Videos uploaded",description:`Successfully added ${Ct.length} videos`,status:"success",duration:3e3,isClosable:!0})):x({title:"Upload failed",description:"Failed to process any videos. Please try different files.",status:"error",duration:3e3,isClosable:!0}),Fe.target.value=null}catch(st){console.error("Error processing videos:",st),x({title:"Error uploading videos",description:"Please try again with different videos",status:"error",duration:3e3,isClosable:!0})}finally{E(!1)}},Ze=async Fe=>{const Ne=Array.from(Fe.target.files);if(Ne.length!==0)try{E(!0);const st=Ne.filter(dt=>dt.name.match(/\.(pdf|doc|docx|xls|xlsx|ppt|pptx|txt)$/i));st.length!==Ne.length&&x({title:"Invalid file type",description:"Only document file types (PDF, Word, Excel, PowerPoint, etc.) are allowed",status:"warning",duration:3e3,isClosable:!0});const Ge=10*1024*1024,ot=st.filter(dt=>dt.size<=Ge);ot.length!==st.length&&x({title:"File too large",description:"Some documents exceed the 10MB size limit and will be skipped",status:"warning",duration:3e3,isClosable:!0});const Ct=(await Promise.all(ot.map(async dt=>{try{const mt=await du(dt),zt=dt.name.split(".").pop().toLowerCase();let Ft=dt.type||"application/octet-stream";return(!dt.type||dt.type==="application/octet-stream")&&(zt==="pdf"?Ft="application/pdf":["doc","docx"].includes(zt)?Ft="application/msword":["xls","xlsx"].includes(zt)?Ft="application/vnd.ms-excel":["ppt","pptx"].includes(zt)?Ft="application/vnd.ms-powerpoint":zt==="txt"&&(Ft="text/plain")),{id:`doc-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:dt.name,url:mt,size:dt.size,type:"document",mimeType:Ft}}catch(mt){return console.error(`Error processing document ${dt.name}:`,mt),null}}))).filter(dt=>dt!==null);Ct.length>0?(xe(dt=>{const mt=dt.images.length>0||dt.videos.length>0;return O!=="Course Material"&&!mt?k("Course Material"):mt&&!O&&k("Mixed Content"),{...dt,documents:[...dt.documents,...Ct].slice(0,4)}}),Ie(dt=>[...dt,...ot]),x({title:"Documents uploaded",description:`Successfully added ${Ct.length} documents`,status:"success",duration:3e3,isClosable:!0})):x({title:"Upload failed",description:"Failed to process any documents. Please try different files.",status:"error",duration:3e3,isClosable:!0}),Fe.target.value=null}catch(st){console.error("Error processing documents:",st),x({title:"Error uploading documents",description:"Please try again with different documents",status:"error",duration:3e3,isClosable:!0})}finally{E(!1)}},pt=(Fe,Ne)=>{const st=ge[Fe].find(Ge=>Ge.id===Ne);xe(Ge=>{const ot={...Ge};return ot[Fe]=Ge[Fe].filter(Nt=>Nt.id!==Ne),ot}),T&&st&&!isNaN(parseInt(st.id))&&(console.log(`Adding attachment ${st.id} to removal list`),be(Ge=>[...Ge,st.id])),st&&Ie(Ge=>Ge.filter(ot=>ot.name!==st.name))},Ue=()=>{q(!0)},Ce=()=>{Q.length<6?ie([...Q,""]):x({title:"Maximum poll options reached",description:"You can add up to 6 options",status:"warning",duration:2e3,isClosable:!0})},ve=Fe=>{if(Q.length>1){const Ne=[...Q];Ne.splice(Fe,1),ie(Ne)}else x({title:"Minimum poll options required",description:"You need at least 1 option for a poll",status:"warning",duration:2e3,isClosable:!0})},Pe=()=>{if(!N.trim()){x({title:"Poll question is required",status:"error",duration:2e3,isClosable:!0});return}const Fe=Q.filter(Ge=>Ge.trim()!=="");if(Fe.length<1){x({title:"At least 1 poll option is required",status:"error",duration:2e3,isClosable:!0});return}const Ne=`poll-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,st={id:Ne,question:N,options:Fe.map((Ge,ot)=>({id:`option-${ot}-${Ne}`,text:Ge,votes:0})),createdAt:new Date().toISOString(),voters:[]};xe(Ge=>{const ot=Ge.images.length>0||Ge.videos.length>0||Ge.documents.length>0;return ot&&!O?k("Mixed Content"):!ot&&!O&&k("Poll"),{...Ge,polls:[st]}}),le(!0),q(!1),x({title:"Poll added successfully",status:"success",duration:2e3,isClosable:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs(cn,{isOpen:t,onClose:r,size:"lg",children:[e.jsx(kr,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),e.jsxs(dn,{borderRadius:"2xl",mx:4,overflow:"hidden",children:[e.jsx(Fr,{bg:se("gray.50","gray.800"),borderBottomWidth:"1px",borderColor:h,pb:4,pt:3,children:e.jsxs(ke,{align:"center",gap:3,children:[e.jsx(Tr,{src:(c==null?void 0:c.avatar_url)||(c==null?void 0:c.avatar)||"https://i.pravatar.cc/150?img=12",size:"md",name:`${(c==null?void 0:c.first_name)||""} ${(c==null?void 0:c.last_name)||""}`.trim()||"You",border:"2px solid",borderColor:u}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(V,{fontWeight:"bold",lineHeight:"short",color:p,children:`${(c==null?void 0:c.first_name)||""} ${(c==null?void 0:c.last_name)||""}`.trim()||"You"}),e.jsx(at,{spacing:1,mt:1,children:e.jsx(V,{fontSize:"xs",color:se("gray.500","gray.400"),children:"Visible to everyone"})})]})]})}),e.jsx(rn,{size:"lg",mt:1}),e.jsx(Ar,{pt:5,pb:2,children:e.jsxs(et,{spacing:5,align:"stretch",children:[e.jsxs(ht,{children:[e.jsx(ft,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,color:se("gray.700","gray.300"),children:"Title"}),e.jsx(Pt,{placeholder:"Enter a title for your post...",value:b,onChange:Fe=>m(Fe.target.value),size:"md",borderRadius:"md",borderWidth:"2px",bg:se("white","gray.700"),p:3,_placeholder:{color:se("gray.400","gray.400")},_focus:{borderColor:u,boxShadow:`0 0 0 1px ${u}`}})]}),e.jsxs(ht,{children:[e.jsx(ft,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,color:se("gray.700","gray.300"),children:"Content"}),e.jsx(Qn,{placeholder:"Share your knowledge, resources, or ask a question...",value:_,onChange:Fe=>w(Fe.target.value),size:"md",borderRadius:"md",borderWidth:"2px",bg:se("white","gray.700"),minHeight:"140px",p:3,_placeholder:{color:se("gray.400","gray.400")},_focus:{borderColor:u,boxShadow:`0 0 0 1px ${u}`}}),e.jsx(ke,{justify:"flex-end",mt:1.5,children:e.jsxs(V,{fontSize:"xs",color:_.length>480?"orange.500":"gray.500",children:[_.length,"/500 characters"]})})]}),e.jsxs(ht,{children:[e.jsx(ft,{fontSize:"sm",fontWeight:"semibold",mb:1,ml:1,children:"Course"}),e.jsxs(yn,{children:[e.jsx(vn,{as:Ee,rightIcon:e.jsx(is,{}),w:"100%",variant:"outline",textAlign:"left",fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:Z&&z.length>0?`${(De=z.find(Fe=>Fe.id===Number(Z)))==null?void 0:De.code} - ${(_e=z.find(Fe=>Fe.id===Number(Z)))==null?void 0:_e.title}`:"Select course"}),e.jsxs(wn,{maxH:"320px",overflowY:"auto",children:[re?e.jsx(ke,{justify:"center",align:"center",h:"100px",children:e.jsx(en,{})}):z.map(Fe=>{var Ne;return e.jsx(rr,{onClick:()=>P(Fe.id),children:e.jsxs(de,{children:[e.jsxs(V,{fontWeight:"medium",children:[Fe.code," - ",Fe.title]}),e.jsx(V,{fontSize:"sm",color:"gray.500",children:(Ne=Fe.major)==null?void 0:Ne.name})]})},Fe.id)}),y>1&&e.jsx(de,{borderTop:"1px solid",borderColor:h,mt:2,pt:2,px:2,children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(Ee,{size:"xs",variant:"outline",onClick:Fe=>{Fe.stopPropagation(),Ae(ne-1)},isDisabled:ne<=1||re,children:"Prev"}),e.jsxs(V,{fontSize:"xs",color:"gray.500",children:["Page ",ne," of ",y]}),e.jsx(Ee,{size:"xs",variant:"outline",onClick:Fe=>{Fe.stopPropagation(),Ae(ne+1)},isDisabled:ne>=y||re,children:"Next"})]})})]})]})]}),e.jsx(gb,{attachments:ge,removeAttachment:pt}),e.jsx(mb,{handleImageUpload:Me,handleVideoUpload:Xe,handleDocumentUpload:Ze,handlePollAdd:Ue})]})}),e.jsx(Ur,{justifyContent:"end",px:4,py:3,borderTopWidth:"1px",borderColor:h,children:e.jsx(Ee,{colorScheme:"blue",leftIcon:e.jsx(xp,{}),isLoading:A,onClick:ce,children:"Post"})})]})]}),e.jsxs(cn,{isOpen:C,onClose:()=>q(!1),size:"md",children:[e.jsx(kr,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),e.jsxs(dn,{borderRadius:"xl",children:[e.jsx(Fr,{children:"Create Poll"}),e.jsx(rn,{}),e.jsx(Ar,{pb:6,children:e.jsxs(et,{spacing:4,align:"stretch",children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Poll Question"}),e.jsx(Pt,{placeholder:"Enter your question",value:N,onChange:Fe=>$(Fe.target.value),autoFocus:!0})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Poll Options"}),e.jsx(et,{spacing:2,align:"stretch",children:Q.map((Fe,Ne)=>e.jsxs(ke,{alignItems:"center",children:[e.jsx(Pt,{placeholder:`Option ${Ne+1}`,value:Fe,onChange:st=>{const Ge=[...Q];Ge[Ne]=st.target.value,ie(Ge)},mr:2}),Q.length>2&&e.jsx(Ee,{size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>ve(Ne),children:e.jsx(ct,{as:cl})})]},Ne))})]}),e.jsx(Ee,{leftIcon:e.jsx(ct,{as:Jn}),variant:"outline",colorScheme:"blue",size:"sm",onClick:Ce,isDisabled:Q.length>=6,children:"Add Option"})]})}),e.jsxs(Ur,{children:[e.jsx(Ee,{colorScheme:"blue",mr:3,leftIcon:e.jsx(ct,{as:Xo}),onClick:Pe,children:"Create Poll"}),e.jsx(Ee,{onClick:()=>{$(""),ie(["",""]),q(!1)},children:"Cancel"})]})]})]})]})},bb=async()=>{try{return(await yt.get("/registration/faculties")).data}catch(t){return console.error("Error fetching faculties:",t),[]}},yb=async t=>{if(!t)return[];try{return(await yt.get(`/registration/faculties/${t}/majors`)).data}catch(r){return console.error("Error fetching majors:",r),[]}},vb=async(t,r=1)=>{if(!t)return{data:[],current_page:1,last_page:1};try{return(await yt.get("/courses",{params:{major_id:t,page:r}})).data}catch(n){return console.error("Error fetching courses:",n),{data:[],current_page:1,last_page:1}}},wb=()=>{const t=se("rgba(255, 255, 255, 0.8)","rgba(45, 55, 72, 0.8)"),r=se("gray.800","white"),n=se("gray.500","gray.400"),i=se("blue.500","blue.200"),o=se("brand.navy","rgba(74, 85, 104, 0.3)");se("gray.50","gray.800"),se("blue.50","blue.900");const s=se("linear-gradient(135deg, #f0f4f8 0%, #eff6ff 50%, #f0f4f8 100%)","linear-gradient(135deg, #1a202c 0%, #2d3748 50%, #1a202c 100%)"),a=Ir(),c=Vr();Er();const{isOpen:u,onOpen:h,onClose:p}=Er(),x=()=>{be(null),p()},[b,m]=W.useState("feed"),[_,w]=W.useState(!0),[O,k]=W.useState("All"),[T,H]=W.useState("All"),[Z,P]=W.useState("All"),[D,B]=W.useState(""),[G,R]=W.useState(!1),[L,j]=W.useState([]),[A,E]=W.useState([]),[z,oe]=W.useState({data:[],current_page:1,last_page:1}),[re,v]=W.useState(1),[ne,M]=W.useState(!1),{user:y}=ai(),[Y,C]=W.useState([]),[q,N]=W.useState(1),[$,Q]=W.useState(1),[ie,ue]=W.useState(!1),[le,ge]=W.useState(0),[xe,ze]=W.useState(!0),Ie=W.useRef(null),[We,be]=W.useState(null);W.useEffect(()=>{(async()=>{M(!0);const Ce=await bb();j(Ce);const ve=JSON.parse(localStorage.getItem("user"));ve!=null&&ve.faculty_id&&k(ve.faculty_id),M(!1)})()},[]),W.useEffect(()=>{if(!O||O==="All"){E([]),P("All");return}(async()=>{M(!0);const Ce=await yb(O);E(Ce);const ve=JSON.parse(localStorage.getItem("user"));ve!=null&&ve.major_id&&parseInt(ve.faculty_id)===parseInt(O)?P(ve.major_id):P("All"),M(!1)})()},[O]),W.useEffect(()=>{if(!Z||Z==="All"){oe({data:[],current_page:1,last_page:1}),H("All"),v(1);return}(async Ce=>{M(!0);const ve=await vb(Z,Ce);oe(ve),M(!1)})(re)},[Z,re]);const ee=W.useCallback(async(Ue=1,Ce=!1)=>{var ve,Pe;Ue===1?w(!0):ue(!0);try{const De={page:Ue,per_page:10,faculty_id:O!=="All"?O:void 0,major_id:Z!=="All"?Z:void 0,course_id:T!=="All"?T:void 0,search:D||void 0};Object.keys(De).forEach(st=>De[st]===void 0&&delete De[st]);const _e=await n0(De,!0),Fe=Array.isArray(_e)?_e:_e.data||[],Ne=_e.pagination||{};Ce&&Ue>1?C(st=>[...st,...Fe]):C(Fe),N(Ne.current_page||Ue),Q(Ne.last_page||1),ze(Ne.current_page<Ne.last_page)}catch(De){console.error("Error loading resource data:",De),a({title:"Error loading resources",description:((Pe=(ve=De.response)==null?void 0:ve.data)==null?void 0:Pe.message)||"There was a problem loading the API resource data.",status:"error",duration:3e3,isClosable:!0})}finally{w(!1),ue(!1)}},[O,Z,T,D,a]);W.useEffect(()=>{ee(1,!1),N(1),ze(!0)},[ee]),W.useEffect(()=>{const Ue=new IntersectionObserver(ve=>{const[Pe]=ve;Pe.isIntersecting&&xe&&!ie&&!_&&ee(q+1,!0)},{threshold:1}),Ce=Ie.current;return Ce&&Ue.observe(Ce),()=>{Ce&&Ue.unobserve(Ce)}},[q,xe,ie,_,ee]);const Ae=W.useCallback(Ue=>{c(`/resources/${Ue}`)},[c]),Se=W.useCallback((Ue,Ce)=>{const ve=Y.findIndex(Fe=>Fe.id===Ue);if(ve===-1)return;const Pe=Y[ve],De=Pe.is_saved,_e=[...Y];_e[ve]={...Pe,is_saved:!De},C(_e),Qc(Ue).then(Fe=>{a(Jd(`${De?"Removed from":"Added to"} bookmarks: ${Ce}`,null,2e3));const Ne=typeof(Fe==null?void 0:Fe.is_saved)=="boolean"?Fe.is_saved:!De,st=[...Y];st[ve]={...st[ve],is_saved:Ne},C(st)}).catch(Fe=>{ns("handleBookmark",Fe);const Ne=[...Y];Ne[ve]={...Pe,is_saved:De},C(Ne),a(ks(Fe,`Failed to ${De?"remove from":"add to"} bookmarks`))})},[Y,a]),ce=W.useCallback(Ue=>{const Ce=Y.findIndex(_e=>_e.id===Ue);if(Ce===-1)return;const ve=Y[Ce],Pe={...ve,is_upvoted:!ve.is_upvoted,upvote_count:ve.upvote_count+(ve.is_upvoted?-1:1)},De=[...Y];De[Ce]=Pe,C(De),th(Ue).then(_e=>{const Fe=Y.findIndex(st=>st.id===Ue);if(Fe===-1)return;const Ne=[...Y];Ne[Fe]={...Ne[Fe],is_upvoted:_e.upvoted,upvote_count:_e.upvote_count},C(Ne)}).catch(_e=>{ns("toggleUpvote",_e);const Fe=Y.findIndex(Ge=>Ge.id===Ue);if(Fe===-1)return;const Ne={...Y[Fe],is_upvoted:ve.is_upvoted,upvote_count:ve.upvote_count},st=[...Y];st[Fe]=Ne,C(st),a(ks(_e,"Failed to update upvote"))})},[Y,a]);W.useCallback(async(Ue,Ce)=>{try{const ve=await addComment(Ue,Ce),Pe=Y.findIndex(_e=>_e.id===Ue);if(Pe===-1)return;const De=[...Y];return De[Pe]={...De[Pe],comment_count:ve.comment_count},C(De),a(Jd("Comment added",null,2e3)),ve.comment}catch(ve){ns("handleAddComment",ve),a(ks(ve,"Failed to add comment"))}},[Y,a]);const Me=W.useCallback((Ue,Ce)=>{console.log(`Resource ${Ue} shared via ${Ce||"general"}`),(!Ce||Ce==="general")&&a({title:`Shared resource #${Ue}`,status:"info",duration:1500,isClosable:!0})},[a]),Xe=(Ue,Ce,ve)=>{w(!0);const Pe=ve.title||"New Resource",De=Ue,_e=ve.attachments||[];_e.length>0&&console.log(`Uploading ${_e.length} attachments with resource`);const Fe={title:Pe,description:De,attachments:_e,course_id:ve.course_id,major_id:ve.major_id,faculty_id:ve.faculty_id,type:Ce};ve.poll&&ve.poll.question&&ve.poll.options&&(Fe.poll={question:ve.poll.question,options:ve.poll.options},console.log("Adding poll data to createResource payload:",Fe.poll)),i0(Fe).then(Ne=>{a({title:"Resource submitted successfully",description:"Your resource has been submitted and is pending approval. You will be notified once it is reviewed.",status:"success",duration:5e3,isClosable:!0})}).catch(Ne=>{var st,Ge;console.error("Error creating resource:",Ne),a({title:"Failed to create resource",description:Ne.message||((Ge=(st=Ne.response)==null?void 0:st.data)==null?void 0:Ge.message)||"Please try again later",status:"error",duration:3e3,isClosable:!0})}).finally(()=>{w(!1)})},Ze=W.useCallback(Ue=>{be({id:Ue.id,title:Ue.title,description:Ue.description,attachments:Ue.attachments||[]}),h()},[h]),pt=W.useCallback(async Ue=>{try{C(Ce=>Ce.filter(ve=>ve.id!==Ue))}catch(Ce){ns("handleDelete",Ce),a(ks(Ce,"There was a problem updating the UI after deletion"))}},[a]);return e.jsxs(de,{position:"relative",bg:s,minH:"calc(100vh - 60px)",py:5,px:{base:4,md:6,lg:8},overflow:"hidden",children:[e.jsx(de,{position:"absolute",top:"5%",right:"5%",width:"300px",height:"300px",borderRadius:"full",bg:"brand.navy",opacity:"0.05",filter:"blur(70px)",zIndex:0}),e.jsx(de,{position:"absolute",bottom:"10%",left:"5%",width:"250px",height:"250px",borderRadius:"full",bg:"brand.gold",opacity:"0.08",filter:"blur(60px)",zIndex:0}),_&&le<100&&e.jsx(de,{position:"fixed",top:"0",left:"0",right:"0",zIndex:"1000",children:e.jsx(tl,{size:"xs",value:le,colorScheme:"blue",isAnimated:!0})}),e.jsxs(ke,{maxW:"1400px",mx:"auto",gap:{base:2,md:4,lg:6},px:{base:2,md:4},children:[e.jsx(xb,{isOpen:u,onClose:x,user:y,addNewPost:Xe,editResource:We,updateResource:async Ue=>{var Ce,ve;try{const{updateResource:Pe}=await oo(async()=>{const{updateResource:_e}=await Promise.resolve().then(()=>A5);return{updateResource:_e}},void 0);console.log("Updating resource with full data:",Ue),console.log("Attachments data received:",{newAttachments:Ue.newAttachments||[],attachmentFiles:Ue.attachmentFiles||[],removeAttachmentIds:Ue.removeAttachmentIds||[],attachmentsToRemove:Ue.attachmentsToRemove||[]});const De=await Pe(Ue.id,{title:Ue.title,description:Ue.description,newAttachments:Ue.attachmentFiles||Ue.newAttachments||[],removeAttachmentIds:Ue.attachmentsToRemove||Ue.removeAttachmentIds||[]});return C(_e=>_e.map(Fe=>Fe.id===Ue.id?{...Fe,...De}:Fe)),a(Jd("Resource updated",((Ce=Ue.attachmentsToRemove)==null?void 0:Ce.length)>0||((ve=Ue.newAttachments)==null?void 0:ve.length)>0?"Resource and attachments updated successfully":"Resource updated successfully",3e3)),De}catch(Pe){throw ns("updateResource",Pe),a(ks(Pe,"Failed to update the resource")),Pe}}}),e.jsx(de,{flex:"1",maxW:{base:"100%",lg:"calc(100% - 340px)"},order:{base:1,lg:1},children:e.jsxs(et,{spacing:6,align:"stretch",children:[e.jsxs(at,{spacing:4,children:[e.jsx(Mt,{icon:e.jsx(Bn,{}),"aria-label":"Go back",onClick:()=>c(-1),variant:"ghost",borderRadius:"full"}),e.jsx(ut,{size:"xl",color:r,fontWeight:"700",children:"Resources Feed"})]}),e.jsxs(de,{position:"sticky",top:"0",zIndex:"10",py:4,backdropFilter:"blur(10px)",mb:4,children:[e.jsxs(ke,{align:"center",gap:4,maxW:"1000px",mx:"auto",children:[e.jsxs(Rr,{size:"lg",flex:"1",children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(no,{color:"gray.400"})}),e.jsx(Pt,{placeholder:"Search resources...",bg:se("white","gray.700"),borderRadius:"full",boxShadow:"0px 3px 10px rgba(0, 0, 0, 0.05)",value:D,onChange:Ue=>B(Ue.target.value),borderColor:se("rgba(226, 232, 240, 0.8)","gray.600"),_focus:{boxShadow:"0px 4px 12px rgba(66, 153, 225, 0.15)",borderColor:se("blue.300","blue.400")},_hover:{borderColor:se("blue.200","blue.500")}}),D&&e.jsx(Cc,{children:e.jsx(Mt,{size:"sm",variant:"ghost",icon:e.jsx(Bn,{}),onClick:()=>B(""),"aria-label":"Clear search",borderRadius:"full"})})]}),e.jsx(Ee,{leftIcon:e.jsx(qc,{}),onClick:()=>R(!G),bg:G?"blue.500":se("white","gray.700"),color:G?"white":r,borderRadius:"full",boxShadow:"0px 3px 10px rgba(0, 0, 0, 0.05)",borderColor:se("rgba(226, 232, 240, 0.8)","gray.600"),border:"1px solid",_hover:{bg:G?"blue.600":se("gray.50","gray.600"),transform:"translateY(-2px)",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.08)"},transition:"all 0.2s ease-in-out",children:e.jsx(V,{as:"span",children:"Filter"})})]}),G&&e.jsx(de,{mt:4,bg:t,p:4,borderRadius:"lg",boxShadow:"md",children:e.jsx(fb,{searchQuery:D,facultyFilter:O,setFacultyFilter:k,courseFilter:T,setCourseFilter:H,majorFilter:Z,setMajorFilter:P,faculties:L,majors:A,courses:z.data,coursePagination:z,onCoursePageChange:v,isLoadingFilters:ne,showFilters:G,onToggleFilters:()=>R(!G),onClearFilters:()=>{k("All"),H("All"),P("All")}})})]}),e.jsx(de,{bg:t,borderRadius:"xl",boxShadow:"sm",p:3,mb:6,border:"1px solid",borderColor:o,cursor:"pointer",onClick:h,_hover:{boxShadow:"md",transform:"translateY(-1px)"},transition:"all 0.2s ease",children:e.jsxs(at,{spacing:3,pointerEvents:"none",children:[e.jsx(Tr,{size:"md",name:y?`${y.first_name} ${y.last_name}`:"User",src:(y==null?void 0:y.avatar_url)||(y==null?void 0:y.avatar),border:"2px solid",borderColor:se("blue.200","blue.700")}),e.jsx(de,{flex:"1",bg:se("gray.50","gray.700"),borderRadius:"full",px:4,py:2.5,transition:"all 0.2s",border:"1px solid",borderColor:se("gray.200","gray.600"),children:e.jsx(V,{color:n,fontSize:"sm",children:"What's on your mind?"})})]})}),e.jsxs(de,{w:"full",maxW:{base:"100%",md:"650px",lg:"100%"},mx:"auto",position:"relative",children:[e.jsx(hb,{resources:Y,cardBg:t,textColor:r,mutedText:n,borderColor:o,isLoading:_,feedType:b,currentUser:y,onCardClick:Ae,onBookmark:Se,onUpvote:ce,onShare:Me,onEdit:Ze,onDelete:pt}),xe&&e.jsx(de,{ref:Ie,py:6,textAlign:"center",children:ie?e.jsx(en,{size:"md",color:i,thickness:"3px",speed:"0.65s"}):e.jsx(V,{fontSize:"sm",color:n,children:"Scroll for more"})}),!xe&&Y.length>10&&e.jsx(de,{py:6,textAlign:"center",children:e.jsx(V,{fontSize:"sm",color:n,children:"No more resources to load."})})]})]})}),e.jsx(de,{display:{base:"none",lg:"block"},order:{base:2,lg:2},width:"320px",flexShrink:"0",children:e.jsx(de,{position:"sticky",top:"20px",width:"320px",maxHeight:"calc(100vh - 40px)",overflowY:"auto",paddingRight:"2",css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{background:se("rgba(0,0,0,0.1)","rgba(255,255,255,0.1)"),borderRadius:"24px"}},children:e.jsx(pb,{limit:5})})})]})]})},Tf=async(t=1,r="")=>{var n;try{return(await yt.get("/clubs",{params:{page:t,query:r||void 0},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to fetch clubs"}}},jb=async t=>{var r;try{return(await yt.get(`/clubs/${t}`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to fetch club details"}}},Sb=async(t,r)=>{var n;try{return(await yt.post(`/clubs/${t}/members`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to add club member"}}},Cb=async(t,r,n)=>{var i;try{const o={};let s=`/clubs/${t}/members/${r}`;return n instanceof FormData&&(s+="?_method=PUT",o.headers={"Content-Type":"multipart/form-data"}),(await yt.post(s,n,o)).data}catch(o){throw((i=o.response)==null?void 0:i.data)||{message:"Failed to update club member"}}},_b=async(t,r)=>{var n;try{return(await yt.delete(`/clubs/${t}/members/${r}`)).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to delete club member"}}},kb=async t=>{var r;try{return(await yt.post("/clubs",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to create club"}}},Ab=async(t,r)=>{var n;try{return(await yt.post(`/clubs/${t}/events`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to create club event"}}},Lb=async(t,r)=>{var n;try{const i={};let o=`/clubs/${t}`;return r instanceof FormData&&(o+="?_method=PUT",i.headers={"Content-Type":"multipart/form-data"}),(await yt.post(o,r,i)).data}catch(i){throw((n=i.response)==null?void 0:n.data)||{message:"Failed to update club"}}},Pb=async t=>{var r;try{return(await yt.delete(`/clubs/${t}`)).data}catch(n){throw((r=n.response)==null?void 0:r.data)||{message:"Failed to delete club"}}},Nb=({isOpen:t,onClose:r,onClubCreated:n})=>{const[i,o]=W.useState(""),[s,a]=W.useState(""),[c,u]=W.useState(null),[h,p]=W.useState(!1),x=Ir(),b=_=>{u(_.target.files[0])},m=async _=>{_.preventDefault(),p(!0);const w=new FormData;w.append("name",i),w.append("description",s),c&&w.append("logo",c);try{await kb(w),x({title:"Club created.",description:"The new club has been successfully created.",status:"success",duration:5e3,isClosable:!0}),n(),r()}catch(O){x({title:"Creation failed.",description:O.message||"Could not create the club.",status:"error",duration:5e3,isClosable:!0})}finally{p(!1)}};return e.jsxs(cn,{isOpen:t,onClose:r,children:[e.jsx(kr,{}),e.jsxs(dn,{as:"form",onSubmit:m,children:[e.jsx(Fr,{children:"Create a New Club"}),e.jsx(rn,{}),e.jsx(Ar,{children:e.jsxs(et,{spacing:4,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Club Name"}),e.jsx(Pt,{value:i,onChange:_=>o(_.target.value),placeholder:"Enter club name"})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Description"}),e.jsx(Qn,{value:s,onChange:_=>a(_.target.value),placeholder:"Tell us about the club"})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Club Logo"}),e.jsx(Pt,{type:"file",onChange:b,accept:"image/*"})]})]})}),e.jsxs(Ur,{children:[e.jsx(Ee,{variant:"ghost",mr:3,onClick:r,children:"Cancel"}),e.jsx(Ee,{colorScheme:"blue",type:"submit",isLoading:h,children:"Create Club"})]})]})]})},Ob=({isOpen:t,onClose:r,club:n,onEventCreated:i})=>{const[o,s]=W.useState(""),[a,c]=W.useState(""),[u,h]=W.useState(""),[p,x]=W.useState(""),[b,m]=W.useState(""),[_,w]=W.useState(null),[O,k]=W.useState(!1),T=Ir(),H=P=>{w(P.target.files[0])},Z=async P=>{if(P.preventDefault(),!n)return;k(!0);const D=new FormData;D.append("title",o),D.append("event_datetime",a),D.append("location",u),D.append("description",p),D.append("speaker_names",b),_&&D.append("image_path",_);try{await Ab(n.id,D),T({title:"Event created.",description:`The event for ${n.name} has been successfully created.`,status:"success",duration:5e3,isClosable:!0}),i(),r()}catch(B){T({title:"Creation failed.",description:B.message||"Could not create the event.",status:"error",duration:5e3,isClosable:!0})}finally{k(!1)}};return e.jsxs(cn,{isOpen:t,onClose:r,children:[e.jsx(kr,{}),e.jsxs(dn,{as:"form",onSubmit:Z,children:[e.jsxs(Fr,{children:["Create Event for ",n==null?void 0:n.name]}),e.jsx(rn,{}),e.jsx(Ar,{children:e.jsxs(et,{spacing:4,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Event Title"}),e.jsx(Pt,{value:o,onChange:P=>s(P.target.value),placeholder:"Enter event title"})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Date and Time"}),e.jsx(Pt,{type:"datetime-local",value:a,onChange:P=>c(P.target.value)})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Location"}),e.jsx(Pt,{value:u,onChange:P=>h(P.target.value),placeholder:"Enter event location"})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Description"}),e.jsx(Qn,{value:p,onChange:P=>x(P.target.value),placeholder:"Event details"})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Speaker Names"}),e.jsx(Pt,{value:b,onChange:P=>m(P.target.value),placeholder:"e.g., John Doe, Jane Smith"})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Event Image"}),e.jsx(Pt,{type:"file",onChange:H,accept:"image/*"})]})]})}),e.jsxs(Ur,{children:[e.jsx(Ee,{variant:"ghost",mr:3,onClick:r,children:"Cancel"}),e.jsx(Ee,{colorScheme:"blue",type:"submit",isLoading:O,children:"Create Event"})]})]})]})},Rb=({isOpen:t,onClose:r,club:n,onClubUpdated:i})=>{const[o,s]=W.useState(""),[a,c]=W.useState(""),[u,h]=W.useState(null),[p,x]=W.useState(!1),b=Ir();W.useEffect(()=>{n&&(s(n.name||""),c(n.description||""),h(null))},[n,t]);const m=w=>{h(w.target.files[0])},_=async w=>{if(w.preventDefault(),!n)return;x(!0);const O=new FormData;O.append("name",o),O.append("description",a),u&&O.append("logo",u);try{await Lb(n.id,O),b({title:"Club updated",description:"The club has been successfully updated.",status:"success",duration:5e3,isClosable:!0}),i(),r()}catch(k){b({title:"Update failed",description:k.message||"Could not update the club.",status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}};return e.jsxs(cn,{isOpen:t,onClose:r,size:"lg",isCentered:!0,children:[e.jsx(kr,{}),e.jsxs(dn,{as:"form",onSubmit:_,children:[e.jsx(Fr,{children:"Edit Club"}),e.jsx(rn,{}),e.jsx(Ar,{children:e.jsxs(et,{spacing:4,align:"stretch",children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Club Name"}),e.jsx(Pt,{value:o,onChange:w=>s(w.target.value)})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Description"}),e.jsx(Qn,{value:a,onChange:w=>c(w.target.value)})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Club Logo (optional)"}),e.jsx(Pt,{type:"file",onChange:m,accept:"image/*"})]})]})}),e.jsxs(Ur,{children:[e.jsx(Ee,{variant:"ghost",mr:3,onClick:r,isDisabled:p,children:"Cancel"}),e.jsx(Ee,{colorScheme:"blue",type:"submit",isLoading:p,children:"Save Changes"})]})]})]})},Eb=({isOpen:t,onClose:r,clubId:n,onMemberAdded:i})=>{const[o,s]=W.useState(""),[a,c]=W.useState(null),[u,h]=W.useState(null),[p,x]=W.useState(!1),b=Ir(),m=se("gray.200","gray.600"),_=k=>{const T=k.target.files[0];if(T){c(T);const H=new FileReader;H.onloadend=()=>{h(H.result)},H.readAsDataURL(T)}},w=async k=>{if(k.preventDefault(),!o.trim()){b({title:"Error",description:"Please enter member name",status:"error",duration:3e3,isClosable:!0});return}if(!a){b({title:"Error",description:"Please select a member picture",status:"error",duration:3e3,isClosable:!0});return}x(!0);try{const T=new FormData;T.append("name",o),T.append("picture",a),await Sb(n,T),b({title:"Success",description:"Member added successfully",status:"success",duration:3e3,isClosable:!0}),s(""),c(null),h(null),i(),r()}catch(T){b({title:"Error",description:T.message||"Failed to add member",status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}},O=()=>{s(""),c(null),h(null),r()};return e.jsxs(cn,{isOpen:t,onClose:O,size:"md",children:[e.jsx(kr,{backdropFilter:"blur(4px)"}),e.jsxs(dn,{children:[e.jsx(Fr,{children:"Add New Member"}),e.jsx(rn,{}),e.jsxs("form",{onSubmit:w,children:[e.jsx(Ar,{children:e.jsxs(et,{spacing:4,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Member Name"}),e.jsx(Pt,{value:o,onChange:k=>s(k.target.value),placeholder:"Enter member name"})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Member Picture"}),e.jsx(de,{borderWidth:"2px",borderStyle:"dashed",borderColor:m,borderRadius:"lg",p:4,textAlign:"center",cursor:"pointer",_hover:{borderColor:"blue.500"},onClick:()=>document.getElementById("member-picture-input").click(),children:u?e.jsx(Cr,{src:u,alt:"Preview",maxH:"200px",mx:"auto",borderRadius:"md"}):e.jsxs(et,{spacing:2,children:[e.jsx(Yu,{size:40}),e.jsx(V,{fontSize:"sm",children:"Click to upload member picture"})]})}),e.jsx(Pt,{id:"member-picture-input",type:"file",accept:"image/*",onChange:_,display:"none"})]})]})}),e.jsxs(Ur,{children:[e.jsx(Ee,{variant:"ghost",mr:3,onClick:O,children:"Cancel"}),e.jsx(Ee,{colorScheme:"blue",type:"submit",isLoading:p,loadingText:"Adding...",children:"Add Member"})]})]})]})]})},Tb=({isOpen:t,onClose:r,clubId:n,member:i,onMemberUpdated:o})=>{const[s,a]=W.useState(""),[c,u]=W.useState(null),[h,p]=W.useState(null),[x,b]=W.useState(!1),m=Ir(),_=se("gray.200","gray.600");W.useEffect(()=>{i&&(a(i.name||""),p(`https://mu-connect.me/api/storage/${i.picture}`))},[i]);const w=T=>{const H=T.target.files[0];if(H){u(H);const Z=new FileReader;Z.onloadend=()=>{p(Z.result)},Z.readAsDataURL(H)}},O=async T=>{if(T.preventDefault(),!s.trim()){m({title:"Error",description:"Please enter member name",status:"error",duration:3e3,isClosable:!0});return}b(!0);try{const H=new FormData;H.append("name",s),c&&H.append("picture",c),await Cb(n,i.id,H),m({title:"Success",description:"Member updated successfully",status:"success",duration:3e3,isClosable:!0}),o(),r()}catch(H){m({title:"Error",description:H.message||"Failed to update member",status:"error",duration:5e3,isClosable:!0})}finally{b(!1)}},k=()=>{a(""),u(null),p(null),r()};return e.jsxs(cn,{isOpen:t,onClose:k,size:"md",children:[e.jsx(kr,{backdropFilter:"blur(4px)"}),e.jsxs(dn,{children:[e.jsx(Fr,{children:"Edit Member"}),e.jsx(rn,{}),e.jsxs("form",{onSubmit:O,children:[e.jsx(Ar,{children:e.jsxs(et,{spacing:4,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Member Name"}),e.jsx(Pt,{value:s,onChange:T=>a(T.target.value),placeholder:"Enter member name"})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Member Picture"}),e.jsx(de,{borderWidth:"2px",borderStyle:"dashed",borderColor:_,borderRadius:"lg",p:4,textAlign:"center",cursor:"pointer",_hover:{borderColor:"blue.500"},onClick:()=>document.getElementById("edit-member-picture-input").click(),children:h?e.jsx(Cr,{src:h,alt:"Preview",maxH:"200px",mx:"auto",borderRadius:"md"}):e.jsxs(et,{spacing:2,children:[e.jsx(Yu,{size:40}),e.jsx(V,{fontSize:"sm",children:"Click to upload member picture"})]})}),e.jsx(Pt,{id:"edit-member-picture-input",type:"file",accept:"image/*",onChange:w,display:"none"}),e.jsx(V,{fontSize:"xs",color:"gray.500",mt:2,children:"Leave empty to keep current picture"})]})]})}),e.jsxs(Ur,{children:[e.jsx(Ee,{variant:"ghost",mr:3,onClick:k,children:"Cancel"}),e.jsx(Ee,{colorScheme:"blue",type:"submit",isLoading:x,loadingText:"Updating...",children:"Update Member"})]})]})]})]})},zb=({members:t,textColor:r,mutedText:n,accentColor:i,borderColor:o,formatDate:s})=>{const[a,c]=W.useState(0),[u,h]=W.useState(0),[p,x]=W.useState(0),b=se("gray.50","gray.800"),m=()=>{c(H=>H===0?t.length-1:H-1)},_=()=>{c(H=>H===t.length-1?0:H+1)},w=H=>{h(H.targetTouches[0].clientX)},O=H=>{x(H.targetTouches[0].clientX)},k=()=>{if(!u||!p)return;const H=u-p,Z=H>50,P=H<-50;Z&&_(),P&&m(),h(0),x(0)},T=t[a];return e.jsxs(de,{position:"relative",py:4,children:[e.jsx(de,{onTouchStart:w,onTouchMove:O,onTouchEnd:k,cursor:"pointer",children:e.jsx(er,{bg:b,borderWidth:"2px",borderColor:i,borderRadius:"2xl",overflow:"hidden",boxShadow:"xl",maxW:"400px",mx:"auto",children:e.jsx(ln,{p:8,children:e.jsxs(et,{spacing:6,children:[e.jsxs(de,{position:"relative",children:[e.jsx(Tr,{size:"2xl",src:`https://mu-connect.me/api/storage/${T.picture}`,name:T.name,borderWidth:"4px",borderColor:i,boxShadow:"lg"}),e.jsxs(Lr,{position:"absolute",bottom:"-2",right:"-2",colorScheme:"blue",fontSize:"xs",px:2,py:1,borderRadius:"full",children:[a+1," / ",t.length]})]}),e.jsxs(et,{spacing:2,w:"full",children:[e.jsx(V,{fontWeight:"bold",fontSize:"2xl",color:r,textAlign:"center",children:T.name}),(localStorage.getItem("role")==="admin"||localStorage.getItem("role")==="moderator")&&e.jsxs(at,{spacing:2,mt:2,children:[e.jsx(Mt,{icon:e.jsx(ro,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>window.handleEditMember(T),"aria-label":"Edit member"}),e.jsx(Mt,{icon:e.jsx(dl,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>window.handleDeleteMember(T),"aria-label":"Delete member"})]})]})]})})})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(Mt,{icon:e.jsx(ss,{}),position:"absolute",left:{base:0,md:-4},top:"50%",transform:"translateY(-50%)",onClick:m,colorScheme:"blue",variant:"solid",borderRadius:"full",size:"lg",boxShadow:"lg","aria-label":"Previous member",zIndex:2}),e.jsx(Mt,{icon:e.jsx(co,{}),position:"absolute",right:{base:0,md:-4},top:"50%",transform:"translateY(-50%)",onClick:_,colorScheme:"blue",variant:"solid",borderRadius:"full",size:"lg",boxShadow:"lg","aria-label":"Next member",zIndex:2})]}),t.length>1&&e.jsx(at,{justify:"center",spacing:2,mt:6,children:t.map((H,Z)=>e.jsx(de,{w:a===Z?"24px":"8px",h:"8px",borderRadius:"full",bg:a===Z?i:o,transition:"all 0.3s",cursor:"pointer",onClick:()=>c(Z)},Z))}),t.length>1&&e.jsx(V,{textAlign:"center",fontSize:"xs",color:n,mt:4,fontStyle:"italic",children:"Swipe or use arrows to navigate"})]})},Fb=({isOpen:t,onClose:r,clubId:n})=>{const[i,o]=W.useState(null),[s,a]=W.useState(!1),[c,u]=W.useState(null),[h,p]=W.useState(null),[x,b]=W.useState(null),{isOpen:m,onOpen:_,onClose:w}=Er(),{isOpen:O,onOpen:k,onClose:T}=Er(),{isOpen:H,onOpen:Z,onClose:P}=Er(),D=Wi.useRef(),B=Ir(),G=localStorage.getItem("role"),R=G==="admin"||G==="moderator",L=se("white","gray.700"),j=se("gray.800","white"),A=se("gray.600","gray.400"),E=se("gray.200","gray.600"),z=se("blue.500","blue.300"),oe=se("linear(to-br, blue.50, purple.50)","linear(to-br, gray.800, gray.900)");W.useEffect(()=>{t&&n&&re()},[t,n]);const re=async()=>{a(!0),u(null);try{const Y=await jb(n);o(Y)}catch(Y){u(Y.message||"Failed to fetch club details")}finally{a(!1)}},v=Y=>new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),ne=Y=>{p(Y),k()},M=Y=>{b(Y),Z()},y=async()=>{if(x)try{await _b(n,x.id),B({title:"Success",description:"Member removed successfully",status:"success",duration:3e3,isClosable:!0}),P(),b(null),re()}catch(Y){B({title:"Error",description:Y.message||"Failed to remove member",status:"error",duration:5e3,isClosable:!0})}};return W.useEffect(()=>(window.handleEditMember=ne,window.handleDeleteMember=M,()=>{delete window.handleEditMember,delete window.handleDeleteMember}),[n]),e.jsxs(cn,{isOpen:t,onClose:r,size:"4xl",scrollBehavior:"inside",children:[e.jsx(kr,{backdropFilter:"blur(4px)"}),e.jsxs(dn,{maxH:"90vh",children:[e.jsx(Fr,{bgGradient:oe,borderTopRadius:"md",pb:4,children:e.jsx(V,{fontSize:"2xl",fontWeight:"bold",color:j,children:"Club Details"})}),e.jsx(rn,{top:4}),e.jsx(Ar,{p:6,children:s?e.jsx(ke,{justify:"center",align:"center",minH:"300px",children:e.jsx(en,{size:"xl",color:z,thickness:"4px"})}):c?e.jsx(de,{textAlign:"center",py:10,children:e.jsx(V,{color:"red.500",fontSize:"lg",children:c})}):i?e.jsxs(et,{spacing:6,align:"stretch",children:[e.jsx(er,{bg:L,boxShadow:"md",borderRadius:"xl",overflow:"hidden",children:e.jsx(ln,{p:0,children:e.jsxs(ke,{direction:{base:"column",md:"row"},align:"center",gap:6,p:6,children:[e.jsx(Cr,{src:`https://mu-connect.me/api/storage/${i.logo}`,alt:i.name,boxSize:{base:"120px",md:"150px"},objectFit:"cover",borderRadius:"xl",boxShadow:"lg"}),e.jsxs(et,{align:{base:"center",md:"flex-start"},flex:1,spacing:3,children:[e.jsx(ut,{size:"lg",color:j,textAlign:{base:"center",md:"left"},children:i.name}),e.jsx(V,{color:A,fontSize:"md",textAlign:{base:"center",md:"left"},children:i.description}),e.jsxs(at,{spacing:4,flexWrap:"wrap",justify:{base:"center",md:"flex-start"},children:[e.jsx(Lr,{colorScheme:"blue",px:3,py:1,borderRadius:"full",fontSize:"sm",children:e.jsxs(at,{spacing:1,children:[e.jsx(qn,{}),e.jsxs(V,{children:[i.members," members"]})]})}),i.upcoming_event&&e.jsx(Lr,{colorScheme:"purple",px:3,py:1,borderRadius:"full",fontSize:"sm",children:e.jsxs(at,{spacing:1,children:[e.jsx(kn,{}),e.jsx(V,{children:"Upcoming Event"})]})})]})]})]})})}),i.upcoming_event&&e.jsx(er,{bg:L,boxShadow:"md",borderRadius:"xl",children:e.jsxs(ln,{children:[e.jsx(ut,{size:"md",mb:4,color:j,children:"Upcoming Event"}),e.jsxs(et,{align:"stretch",spacing:2,children:[e.jsx(V,{fontSize:"lg",fontWeight:"semibold",color:z,children:i.upcoming_event.title}),e.jsx(V,{color:A,children:i.upcoming_event.description||"No description available"})]})]})}),e.jsx(er,{bg:L,boxShadow:"md",borderRadius:"xl",children:e.jsxs(ln,{children:[e.jsxs(ke,{justify:"space-between",align:"center",mb:4,children:[e.jsx(ut,{size:"md",color:j,children:"Meet the Members"}),R&&e.jsx(Ee,{leftIcon:e.jsx(Jn,{}),colorScheme:"blue",size:"sm",onClick:_,children:"Add Member"})]}),e.jsx(tn,{mb:4,borderColor:E}),i.club_members&&i.club_members.length>0?e.jsx(zb,{members:i.club_members,textColor:j,mutedText:A,accentColor:z,borderColor:E,formatDate:v}):e.jsxs(de,{textAlign:"center",py:8,children:[e.jsx(qn,{size:50,style:{margin:"0 auto 16px",opacity:.3}}),e.jsx(V,{color:A,fontSize:"lg",children:"No members found"})]})]})})]}):null}),e.jsx(Ur,{borderTop:"1px solid",borderColor:E,children:e.jsx(Ee,{colorScheme:"blue",onClick:r,children:"Close"})})]}),e.jsx(Eb,{isOpen:m,onClose:w,clubId:n,onMemberAdded:re}),e.jsx(Tb,{isOpen:O,onClose:T,clubId:n,member:h,onMemberUpdated:re}),e.jsx(la,{isOpen:H,leastDestructiveRef:D,onClose:P,children:e.jsx(kr,{children:e.jsxs(ca,{children:[e.jsx(Fr,{fontSize:"lg",fontWeight:"bold",children:"Remove Member"}),e.jsxs(Ar,{children:["Are you sure you want to remove ",e.jsx("strong",{children:x==null?void 0:x.name})," from the club? This action cannot be undone."]}),e.jsxs(Ur,{children:[e.jsx(Ee,{ref:D,onClick:P,children:"Cancel"}),e.jsx(Ee,{colorScheme:"red",onClick:y,ml:3,children:"Remove"})]})]})})})]})},Ib=hr(er),Mb=()=>{const[t,r]=W.useState([]),[n,i]=W.useState(!0),[o,s]=W.useState(null),[a,c]=W.useState(1),[u,h]=W.useState(1),[p,x]=W.useState(""),b=localStorage.getItem("role"),m=b==="admin"||b==="moderator",_=se("white","gray.700"),w=se("gray.800","white"),O=se("gray.500","gray.400"),k=se("blue.500","blue.200"),T=se("gray.200","gray.700"),H=Vr(),Z=ia({base:!0,md:!1}),P=Ir(),{isOpen:D,onOpen:B,onClose:G}=Er(),{isOpen:R,onOpen:L,onClose:j}=Er(),[A,E]=W.useState(null),{isOpen:z,onOpen:oe,onClose:re}=Er(),[v,ne]=W.useState(null),{isOpen:M,onOpen:y,onClose:Y}=Er(),[C,q]=W.useState(null),{isOpen:N,onOpen:$,onClose:Q}=Er(),[ie,ue]=W.useState(null),le=W.useRef(),ge=W.useCallback(async(Se,ce)=>{i(!0),s(null);try{const Me=await Tf(Se,ce);if(!Me||!Me.data){r([]);return}r(Me.data),h(Me.last_page||1),c(Me.current_page||1)}catch(Me){s(Me.message||"Failed to fetch clubs."),P({title:"Error",description:Me.message,status:"error",duration:5e3,isClosable:!0})}finally{i(!1)}},[P,Tf]);W.useEffect(()=>{const Se=setTimeout(()=>{ge(a,p)},300);return()=>clearTimeout(Se)},[a,p,ge]);const xe=Se=>{E(Se),L()},ze=Se=>{ne(Se),oe()},Ie=Se=>{q(Se),y()},We=Se=>{ue(Se),$()},be=async()=>{if(ie)try{await Pb(ie.id),P({title:"Club deleted",status:"success",duration:3e3,isClosable:!0}),Q(),ue(null),ge(a,p)}catch(Se){P({title:"Error",description:Se.message,status:"error",duration:5e3,isClosable:!0})}},ee=Se=>e.jsxs(Ib,{bg:_,boxShadow:"md",borderRadius:"lg",overflow:"hidden",whileHover:{y:-5},transition:{duration:.2},children:[e.jsx(de,{position:"relative",children:e.jsx(Cr,{src:`https://mu-connect.me/api/storage/${Se.logo}`,alt:`${Se.name} logo`,height:"130px",width:"100%",objectFit:"cover"})}),e.jsxs(ln,{pt:3,children:[e.jsx(ut,{size:"md",mb:2,color:w,children:Se.name}),e.jsx(V,{fontSize:"sm",color:O,noOfLines:2,mb:3,children:Se.description}),e.jsxs(yr,{spacing:2,mb:4,children:[e.jsxs(at,{children:[e.jsx(qn,{size:14,color:k}),e.jsxs(V,{fontSize:"sm",color:w,children:[Se.members," members"]})]}),Se.upcoming_event&&e.jsxs(at,{children:[e.jsx(kn,{size:14,color:k}),e.jsxs(V,{fontSize:"sm",color:w,children:["Upcoming: ",Se.upcoming_event.title]})]})]})]}),e.jsx(aa,{pt:0,borderTop:"1px solid",borderColor:T,children:e.jsxs(ke,{justify:"space-between",align:"center",w:"full",children:[e.jsx(Ee,{leftIcon:e.jsx(Gg,{}),variant:"ghost",colorScheme:"blue",size:"sm",onClick:()=>Ie(Se),children:"View Members"}),(b==="admin"||b==="moderator")&&e.jsxs(yn,{children:[e.jsx(vn,{as:Mt,icon:e.jsx(Wc,{}),size:"sm",variant:"ghost"}),e.jsxs(wn,{children:[e.jsx(rr,{icon:e.jsx(Jn,{}),onClick:()=>xe(Se),children:"Create Event"}),e.jsx(rr,{icon:e.jsx(ro,{}),onClick:()=>ze(Se),children:"Edit Club"}),e.jsx(rr,{icon:e.jsx(dl,{}),onClick:()=>We(Se),color:"red.500",children:"Delete Club"})]})]})]})})]},Se.id),Ae=Se=>{c(1),x(Se.target.value)};return e.jsx(ke,{minH:"100vh",p:{base:4,md:8},bg:se("gray.50","gray.800"),children:e.jsxs(de,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsxs(ke,{justify:"space-between",align:"center",mb:6,direction:Z?"column":"row",gap:4,children:[e.jsxs(at,{spacing:4,children:[e.jsx(Mt,{icon:e.jsx(Bn,{}),"aria-label":"Go back",onClick:()=>H("/dashboard"),variant:"ghost",borderRadius:"full"}),e.jsx(ut,{size:"xl",color:w,fontWeight:"800",letterSpacing:"tight",children:"Students Clubs"})]}),m&&e.jsx(Ee,{leftIcon:e.jsx(Jn,{}),colorScheme:"blue",onClick:B,size:"sm",children:"Create Club"})]}),e.jsx(ke,{justify:"space-between",align:Z?"flex-start":"center",direction:Z?"column":"row",gap:4,mb:6,children:e.jsxs(Rr,{maxW:"250px",children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(no,{color:O})}),e.jsx(Pt,{placeholder:"Search clubs...",size:"sm",borderRadius:"full",value:p,onChange:Ae,_focus:{boxShadow:`0 0 0 2px ${k}`}})]})}),n?e.jsx(ke,{justify:"center",py:10,children:e.jsx(en,{size:"xl"})}):o?e.jsx(V,{color:"red.500",children:o}):t.length>0?e.jsx(si,{columns:{base:1,md:2,lg:3},spacing:6,children:t.map(Se=>ee(Se))}):e.jsx(ke,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(de,{textAlign:"center",maxW:"400px",children:[e.jsx(no,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),e.jsx(ut,{size:"md",mb:2,color:w,children:"No clubs found"}),e.jsx(V,{color:O,children:p?`No clubs match your search "${p}". Try a different search term.`:"No clubs are available at the moment."})]})}),t.length>0&&e.jsx(ke,{justify:"center",mt:8,children:e.jsxs(at,{children:[e.jsx(Ee,{onClick:()=>c(Se=>Math.max(1,Se-1)),isDisabled:a<=1,children:"Previous"}),e.jsxs(V,{children:["Page ",a," of ",u]}),e.jsx(Ee,{onClick:()=>c(Se=>Math.min(u,Se+1)),isDisabled:a>=u,children:"Next"})]})}),e.jsx(Nb,{isOpen:D,onClose:G,onClubCreated:()=>ge(1,"")}),e.jsx(Ob,{isOpen:R,onClose:j,club:A,onEventCreated:()=>ge(a,p)}),e.jsx(Rb,{isOpen:z,onClose:re,club:v,onClubUpdated:()=>ge(a,p)}),e.jsx(Fb,{isOpen:M,onClose:Y,clubId:C==null?void 0:C.id}),e.jsx(la,{isOpen:N,leastDestructiveRef:le,onClose:Q,children:e.jsx(kr,{children:e.jsxs(ca,{children:[e.jsx(Fr,{fontSize:"lg",fontWeight:"bold",children:"Delete Club"}),e.jsxs(Ar,{children:["Are you sure you want to delete ",e.jsx("strong",{children:ie==null?void 0:ie.name}),"? This action cannot be undone."]}),e.jsxs(Ur,{children:[e.jsx(Ee,{ref:le,onClick:Q,children:"Cancel"}),e.jsx(Ee,{colorScheme:"red",onClick:be,ml:3,children:"Delete"})]})]})})})]})})},xc=hr(er),Db=hr(Uo),Bb=()=>{const{id:t}=Dc(),r=Vr(),n=se("white","gray.700");se("gray.800","white");const i=se("gray.500","gray.400"),o=se("blue.500","blue.300"),s=se("gray.50","gray.600");ia({base:!0,md:!1});const a={code:"CS 301",title:"Computer Architecture",members:142,activeGroups:8,resources:23,discussions:45,recentMaterials:[{type:"notes",title:"Midterm Prep Notes",author:"Sarah M",votes:15},{type:"video",title:"Cache Memory Explained",author:"Ali H",votes:9},{type:"notes",title:"Practice Problem Set",author:"Noura K",votes:22}],studyGroups:[{name:"Digital Logic Study Group",members:12,active:"2h ago"},{name:"Weekly Problem Solving",members:8,active:"5h ago"}]};return e.jsx(ke,{minH:"100vh",p:{base:4,md:8},bg:se("gray.50","gray.800"),children:e.jsxs(de,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsx(Ee,{leftIcon:e.jsx(Bn,{}),onClick:()=>r(-1),mb:8,variant:"ghost",color:o,borderRadius:"full",_hover:{bg:s},children:"Back to Courses"}),e.jsxs(xc,{bg:n,boxShadow:"xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsx(ao,{px:{base:4,md:8},py:8,bgGradient:`linear(to-r, ${o}, blue.400)`,color:"white",children:e.jsxs(yr,{spacing:4,children:[e.jsxs(at,{spacing:3,children:[e.jsx(Lr,{variant:"solid",fontSize:"lg",px:3,py:1,borderRadius:"full",children:a.code}),e.jsxs(ut,{size:"xl",children:[a.title," Community"]})]}),e.jsxs(ke,{gap:6,flexWrap:"wrap",children:[e.jsxs(at,{spacing:2,children:[e.jsx(ct,{as:qn,boxSize:5}),e.jsxs(V,{fontWeight:"500",children:[a.members," Members"]})]}),e.jsxs(at,{spacing:2,children:[e.jsx(ct,{as:Ls,boxSize:5}),e.jsxs(V,{fontWeight:"500",children:[a.activeGroups," Active Groups"]})]}),e.jsxs(at,{spacing:2,children:[e.jsx(ct,{as:Cu,boxSize:5}),e.jsxs(V,{fontWeight:"500",children:[a.discussions," Discussions"]})]})]})]})}),e.jsx(ln,{px:{base:4,md:8},py:8,children:e.jsxs(sa,{variant:"enclosed-colored",colorScheme:"blue",children:[e.jsxs(oa,{children:[e.jsxs(Yn,{_selected:{color:"white",bg:o},borderRadius:"md",children:["Resources (",a.resources,")"]}),e.jsxs(Yn,{_selected:{color:"white",bg:o},borderRadius:"md",children:["Study Groups (",a.activeGroups,")"]}),e.jsxs(Yn,{_selected:{color:"white",bg:o},borderRadius:"md",children:["Discussions (",a.discussions,")"]})]}),e.jsxs(al,{mt:6,children:[e.jsx(oi,{p:0,children:e.jsxs(yr,{spacing:6,children:[e.jsx(Ee,{leftIcon:e.jsx(Jn,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Share New Material"}),e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:6,children:a.recentMaterials.map((c,u)=>e.jsx(xc,{variant:"outline",whileHover:{y:-5},transition:{duration:.2},cursor:"pointer",onClick:()=>r(`/courses/${t}/resource/${c.id}`),children:e.jsxs(ln,{children:[e.jsxs(ke,{align:"center",mb:3,children:[e.jsx(ct,{as:c.type==="notes"?Dn:Ju,boxSize:6,color:o,mr:3}),e.jsx(V,{fontWeight:"700",fontSize:"lg",children:c.title})]}),e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsxs(ke,{align:"center",children:[e.jsx(Tr,{size:"sm",name:c.author,mr:2}),e.jsx(V,{fontSize:"sm",color:i,children:c.author})]}),e.jsxs(Lr,{colorScheme:"green",px:3,py:1,borderRadius:"full",display:"flex",alignItems:"center",children:[e.jsx(ct,{as:_u,mr:1})," ",c.votes]})]})]})},u))})]})}),e.jsx(oi,{p:0,children:e.jsxs(yr,{spacing:6,children:[e.jsx(Ee,{leftIcon:e.jsx(Jn,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Create New Group"}),e.jsx(wu,{spacing:4,children:a.studyGroups.map((c,u)=>e.jsx(Db,{p:4,borderWidth:"1px",borderRadius:"lg",_hover:{borderColor:o},whileHover:{x:5},transition:{duration:.2},children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsxs(de,{flex:1,children:[e.jsx(V,{fontWeight:"700",mb:1,children:c.name}),e.jsxs(at,{spacing:2,children:[e.jsx(ct,{as:Ps,color:i,boxSize:4}),e.jsxs(V,{fontSize:"sm",color:i,children:["Active ",c.active]})]})]}),e.jsxs(at,{spacing:2,children:[e.jsx(Wm,{size:"sm",max:4,children:[...Array(c.members)].map((h,p)=>e.jsx(Tr,{name:`Member ${p+1}`,src:`https://i.pravatar.cc/150?img=${p}`},p))}),e.jsx(V,{color:i,children:c.members})]})]})},u))})]})}),e.jsx(oi,{p:0,children:e.jsxs(yr,{spacing:6,children:[e.jsx(Ee,{leftIcon:e.jsx(Jn,{}),colorScheme:"blue",size:"lg",borderRadius:"full",_hover:{transform:"translateY(-2px)"},transition:"all 0.2s",children:"Start New Discussion"}),[1,2,3].map(c=>e.jsx(xc,{variant:"outline",whileHover:{x:5},transition:{duration:.2},children:e.jsxs(ln,{children:[e.jsxs(ke,{align:"center",mb:2,children:[e.jsx(Tr,{size:"sm",name:"Omar K",mr:3}),e.jsxs(de,{flex:1,children:[e.jsx(V,{fontWeight:"700",children:"Understanding Pipeline Hazards"}),e.jsxs(at,{mt:1,spacing:2,children:[e.jsx(Vn,{colorScheme:"blue",size:"sm",children:"Help Needed"}),e.jsx(Vn,{colorScheme:"purple",size:"sm",children:"CS 301"})]})]})]}),e.jsx(V,{color:i,noOfLines:2,mb:4,children:"Can someone explain the different types of pipeline hazards? I'm having trouble with this concept..."}),e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsxs(at,{spacing:4,children:[e.jsx(Ee,{variant:"ghost",size:"sm",leftIcon:e.jsx(_u,{}),children:"24 Helpful"}),e.jsx(Ee,{variant:"ghost",size:"sm",leftIcon:e.jsx($u,{}),children:"5 Answers"})]}),e.jsx(V,{fontSize:"sm",color:i,children:"3h ago"})]})]})},c))]})})]})]})}),e.jsx(aa,{px:{base:4,md:8},py:6,borderTopWidth:"1px",children:e.jsxs(yr,{w:"full",spacing:4,children:[e.jsx(V,{fontWeight:"700",fontSize:"xl",children:"Community Actions"}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:4,children:[e.jsx(ac,{icon:da,title:"Share Community",description:"Invite classmates to join"}),e.jsx(ac,{icon:Cu,title:"Discussions",description:"Browse all conversations"}),e.jsx(ac,{icon:qn,title:"Members",description:"Connect with peers"}),e.jsx(ac,{icon:Bc,title:"Resources",description:"View all materials"})]})]})})]})]})})},ac=({icon:t,title:r,description:n})=>(se("white","gray.700"),se("gray.50","gray.600"),e.jsx(xc,{p:4,variant:"outline",whileHover:{scale:1.02},transition:{duration:.2},cursor:"pointer",children:e.jsxs(yr,{spacing:3,children:[e.jsx(ct,{as:t,boxSize:6,color:"blue.500"}),e.jsx(V,{fontWeight:"700",children:r}),e.jsx(V,{fontSize:"sm",color:"gray.500",children:n})]})})),lc=async(t={})=>(await yt.get("/study-groups",{params:t})).data,qb=async t=>(await yt.post("/study-groups",t)).data,Wb=async t=>(await yt.post(`/study-groups/${t}/join`)).data,Ub=async t=>(await yt.post(`/study-groups/${t}/leave`)).data,uu=async(t={})=>(await yt.get("/study-groups/my-groups",{params:t})).data,Hb=async(t,r)=>(await yt.put(`/study-groups/${t}`,r)).data,$b=async t=>(await yt.delete(`/study-groups/${t}`)).data,Gb=hr(er),Vb=({group:t,onJoinLeave:r,onEdit:n,onDelete:i,currentUser:o})=>{const s=se("white","gray.700"),a=se("gray.800","white"),c=se("gray.500","gray.400"),u=se("gray.100","gray.600"),h=se("gray.200","gray.700"),p=Ir(),x=o&&t.creator&&o.id===t.creator.id,b=()=>{const m=`${window.location.origin}/study-groups/${t.id}`;navigator.share?navigator.share({title:`Join "${t.name}" Study Group`,text:`Join our study group for ${t.course}`,url:m}).catch(()=>{navigator.clipboard.writeText(m),p({title:"Link copied to clipboard",status:"success",duration:2e3})}):(navigator.clipboard.writeText(m),p({title:"Group link copied to clipboard",status:"success",duration:2e3}))};return e.jsxs(Gb,{bg:s,boxShadow:"md",borderRadius:"lg",overflow:"hidden",whileHover:{y:-5},transition:{duration:.2},children:[e.jsx(ao,{children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(ut,{size:"md",color:a,children:t.name||"Untitled Group"}),e.jsx(Vn,{colorScheme:"blue",children:t.course||"Unknown Course"})]})}),e.jsxs(ln,{children:[e.jsx(V,{color:a,mb:3,noOfLines:2,children:t.description}),e.jsx(at,{spacing:2,mb:4,flexWrap:"wrap",children:(t.tags||[]).map((m,_)=>e.jsx(Vn,{size:"sm",colorScheme:"gray",borderRadius:"full",children:m},_))}),e.jsx(tn,{my:4,borderColor:h}),e.jsxs(yr,{spacing:3,children:[e.jsxs(ke,{align:"center",color:c,children:[e.jsx(qn,{style:{marginRight:"8px"}}),e.jsxs(V,{children:[t.members||0," / ",t.capacity||15," Members"]})]}),e.jsxs(ke,{align:"center",color:c,children:[e.jsx(Ps,{style:{marginRight:"8px"}}),e.jsxs(V,{children:["Session: ",t.formattedTime||"TBD"]})]}),e.jsxs(ke,{align:"center",color:c,children:[e.jsx(Go,{style:{marginRight:"8px"}}),e.jsx(V,{noOfLines:1,children:t.location||"TBD"})]})]})]}),e.jsx(aa,{pt:0,borderTop:"1px solid",borderColor:h,children:e.jsxs(ke,{justify:"space-between",align:"center",w:"full",children:[e.jsxs(yn,{children:[e.jsx(vn,{as:Mt,"aria-label":"Options",icon:e.jsx(gp,{}),variant:"ghost",size:"sm",borderRadius:"full",_hover:{bg:u}}),e.jsxs(wn,{children:[x&&e.jsxs(e.Fragment,{children:[e.jsx(rr,{icon:e.jsx(ro,{}),onClick:()=>n&&n(t),children:"Edit Group"}),e.jsx(rr,{icon:e.jsx(cl,{}),onClick:()=>i&&i(t),color:"red.500",_hover:{bg:"red.50"},children:"Delete Group"})]}),e.jsx(rr,{icon:e.jsx(da,{}),onClick:b,children:"Share Group Link"})]})]}),e.jsx(Ee,{colorScheme:t.isJoined?"red":"blue",variant:t.isJoined?"outline":"solid",size:"sm",borderRadius:"full",onClick:()=>r(t.id),leftIcon:t.isJoined?void 0:e.jsx(Jn,{}),children:t.isJoined?"Leave Group":"Join Group"})]})})]})},Yb=({type:t="filter",title:r,message:n})=>{const i=se("gray.500","gray.400"),o={filter:"No study groups found",myGroups:"You haven't joined any study groups yet"},s={filter:"Try changing your search terms or filters",myGroups:"Join a study group to collaborate with others and improve your learning"},a=r||o[t],c=n||s[t];return e.jsx(ke,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(de,{textAlign:"center",maxW:"400px",children:[t==="filter"?e.jsx(Bc,{size:50,style:{margin:"0 auto 20px",opacity:.3}}):e.jsx(qn,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),e.jsx(ut,{size:"md",mb:2,children:a}),e.jsx(V,{color:i,mb:6,children:c})]})})},Jb=({groups:t,onJoinLeave:r,onEdit:n,onDelete:i,currentUser:o,emptyStateType:s})=>t.length===0?e.jsx(Yb,{type:s}):e.jsx(si,{columns:{base:1,md:2},spacing:6,children:t.map(a=>e.jsx(Vb,{group:a,onJoinLeave:r,onEdit:n,onDelete:i,currentUser:o},a.id))}),Xb=({isOpen:t,onClose:r,newGroup:n,onInputChange:i,onCreateGroup:o,courses:s=[],coursesLoading:a=!1,currentCoursePage:c=1,totalCoursePages:u=1,onCoursePageChange:h=()=>{}})=>{const p=se("gray.200","gray.700"),x=se("gray.500","gray.400");return e.jsxs(cn,{isOpen:t,onClose:r,size:"lg",isCentered:!0,children:[e.jsx(kr,{}),e.jsxs(dn,{borderRadius:"xl",children:[e.jsx(Fr,{borderBottomWidth:"1px",borderColor:p,pb:4,children:e.jsx(ut,{size:"md",children:"Create a New Study Group"})}),e.jsx(rn,{}),e.jsx(Ar,{py:6,children:e.jsxs(yr,{spacing:5,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{fontWeight:"medium",children:"Group Name"}),e.jsx(Pt,{name:"name",value:n.name,onChange:i,placeholder:"e.g., Calculus II Problem Solvers",borderRadius:"md"})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{fontWeight:"medium",children:"Course"}),e.jsxs(yn,{children:[e.jsx(vn,{as:Ee,rightIcon:e.jsx(is,{}),w:"100%",textAlign:"left",fontWeight:"normal",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:n.course_id&&s.length>0&&s.find(b=>b.id===Number(n.course_id))?`${s.find(b=>b.id===Number(n.course_id)).code} - ${s.find(b=>b.id===Number(n.course_id)).title}`:"Select course"}),e.jsxs(wn,{maxH:"320px",overflowY:"auto",minW:"400px",children:[a?e.jsx(ke,{justify:"center",align:"center",h:"100px",children:e.jsx(en,{})}):s.map(b=>{var m;return e.jsx(rr,{onClick:()=>i({target:{name:"course_id",value:b.id}}),children:e.jsxs(de,{children:[e.jsxs(V,{fontWeight:"medium",children:[b.code," - ",b.title]}),e.jsx(V,{fontSize:"sm",color:x,children:(m=b.major)==null?void 0:m.name})]})},b.id)}),u>1&&e.jsx(de,{borderTop:"1px solid",borderColor:p,mt:2,pt:2,px:2,children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(Ee,{size:"xs",onClick:b=>{b.stopPropagation(),h(c-1)},isDisabled:c<=1||a,variant:"outline",borderRadius:"md",children:"Prev"}),e.jsxs(V,{fontSize:"xs",color:x,mx:2,children:["Page ",c," of ",u]}),e.jsx(Ee,{size:"xs",onClick:b=>{b.stopPropagation(),h(c+1)},isDisabled:c>=u||a,variant:"outline",borderRadius:"md",children:"Next"})]})})]})]})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{fontWeight:"medium",children:"Description"}),e.jsx(Qn,{name:"description",value:n.description,onChange:i,placeholder:"Describe the purpose, goals, and activities of your study group...",borderRadius:"md",minHeight:"120px"})]}),e.jsxs(pr,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{fontWeight:"medium",children:"Meeting Time"}),e.jsx(Pt,{type:"datetime-local",name:"meeting_time",value:n.meeting_time,onChange:i,borderRadius:"md"})]}),e.jsxs(ht,{children:[e.jsx(ft,{fontWeight:"medium",children:"Location"}),e.jsx(Pt,{name:"location",value:n.location,onChange:i,placeholder:"e.g., Library Room 201",borderRadius:"md",isDisabled:n.isOnline})]})]}),e.jsx(ht,{children:e.jsx(Um,{name:"isOnline",isChecked:n.isOnline,onChange:i,children:"This is an online meeting"})})]})}),e.jsxs(Ur,{borderTopWidth:"1px",borderColor:p,pt:4,children:[e.jsx(Ee,{variant:"ghost",mr:3,onClick:r,borderRadius:"md",children:"Cancel"}),e.jsx(Ee,{colorScheme:"blue",leftIcon:e.jsx(Pi,{}),onClick:o,isDisabled:!n.name||!n.course_id||!n.description||!n.meeting_time||!n.isOnline&&!n.location,borderRadius:"md",children:"Create Group"})]})]})]})};hr(er);const Xa=(t,r)=>{if(!t)return"Unknown Course";if(typeof t=="string")return t;if(t.code)return`${t.code}`;const n=r.find(i=>i.id===t);return n?`${n.code} - ${n.title}`:"Unknown Course"},Bo=t=>t?new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"TBD",Kb=()=>{const t=Vr(),r=Ir(),{isOpen:n,onOpen:i,onClose:o}=Er(),{user:s}=ai(),{isOpen:a,onOpen:c,onClose:u}=Er(),[h,p]=W.useState(null),x=W.useRef(),{isOpen:b,onOpen:m,onClose:_}=Er(),[w,O]=W.useState(null),[k,T]=W.useState({}),H=se("white","gray.700"),Z=se("gray.800","white"),P=se("gray.500","gray.400"),D=se("blue.500","blue.300");se("gray.100","gray.600");const B=se("gray.200","gray.700"),[G,R]=W.useState(""),[L,j]=W.useState(0),[A,E]=W.useState(!1),[z,oe]=W.useState([]),[re,v]=W.useState([]),[ne,M]=W.useState([]),[y,Y]=W.useState(!1),[C,q]=W.useState(1),[N,$]=W.useState(1),[Q,ie]=W.useState(!0),[ue,le]=W.useState(!1),[ge,xe]=W.useState(!1),[ze,Ie]=W.useState(1),[We,be]=W.useState(1),[ee,Ae]=W.useState(0),[Se,ce]=W.useState({is_online:null,is_complete:null,course_id:""}),[Me,Xe]=W.useState({name:"",course_id:"",description:"",meeting_time:"",location:"",isOnline:!1}),Ze=async Te=>{if(!(Te<1||Te>N)){Y(!0);try{const He=localStorage.getItem("major_id"),tt=localStorage.getItem("faculty_id"),rt={...He?{major_id:He}:tt?{faculty_id:tt}:{},page:Te,per_page:10},gt=await sl(rt);M(gt.data||[]),q(gt.current_page||Te),$(gt.last_page||1)}catch(He){Ce("Failed to fetch courses",He)}finally{Y(!1)}}},pt=Te=>{Xe(He=>({...He,isOnline:Te.target.checked,location:Te.target.checked?"":He.location}))},Ue=Te=>{const{name:He,value:tt,type:rt,checked:gt}=Te.target;Xe(jt=>({...jt,[He]:rt==="checkbox"?gt:tt}))};W.useEffect(()=>{(async()=>{ie(!0),le(!0),Y(!0);try{const He=localStorage.getItem("major_id"),tt=localStorage.getItem("faculty_id");let rt={};He?rt.major_id=He:tt&&(rt.faculty_id=tt);const[gt,jt,It]=await Promise.all([lc(rt),uu(),sl({...He?{major_id:He}:tt?{faculty_id:tt}:{},page:1,per_page:10})]);M(It.data||[]),q(It.current_page||1),$(It.last_page||1);const Ve=lt=>({...lt,meetings:lt.meeting_time?[lt.meeting_time]:[],members:lt.members_count||1,tags:lt.major?[lt.major.name]:[],leader:lt.creator||{},course:Xa(lt.course,It.data||[]),formattedTime:Bo(lt.meeting_time),isPast:lt.meeting_time?new Date(lt.meeting_time)<new Date:!1}),Ye=Array.isArray(jt)?jt:jt.data||[],Et=new Set(Ye.map(lt=>lt.id));oe(gt.data.map(lt=>({...Ve(lt),isJoined:Et.has(lt.id)}))),gt.current_page!==void 0&&(Ie(gt.current_page),be(gt.last_page||1),Ae(gt.total||0)),v(Ye.map(lt=>({...Ve(lt),isJoined:!0})))}catch(He){Ce("Failed to load data",He)}finally{ie(!1),le(!1),Y(!1)}})()},[]);const Ce=(Te,He)=>{var tt,rt;r({title:Te,description:((rt=(tt=He==null?void 0:He.response)==null?void 0:tt.data)==null?void 0:rt.message)||He.message||"Unknown error",status:"error",duration:4e3,isClosable:!0})},ve=W.useCallback(async(Te=G,He=Se,tt=1)=>{xe(!0);try{const rt=localStorage.getItem("major_id"),gt=localStorage.getItem("faculty_id"),jt={...Te.trim()&&{q:Te.trim()},...He,...rt&&{major_id:rt},...gt&&{faculty_id:gt},page:tt,per_page:4};Object.keys(jt).forEach(je=>{(jt[je]===""||jt[je]===null)&&delete jt[je]});const It=await lc(jt),Ve=je=>({...je,meetings:je.meeting_time?[je.meeting_time]:[],members:je.members_count||1,tags:je.major?[je.major.name]:[],leader:je.creator||{},course:Xa(je.course,ne),formattedTime:Bo(je.meeting_time),isPast:je.meeting_time?new Date(je.meeting_time)<new Date:!1}),Ye=Array.isArray(re)?re:[],Et=new Set(Ye.map(je=>je.id)),lt=(It.data||It).map(je=>({...Ve(je),isJoined:Et.has(je.id)}));oe(lt),It.current_page!==void 0&&(Ie(It.current_page),be(It.last_page||1),Ae(It.total||0))}catch(rt){Ce("Search failed",rt)}finally{xe(!1)}},[G,Se,ne,re]),Pe=W.useCallback((Te,He)=>{const tt={...Se,[Te]:He};ce(tt),Ie(1),ve(G,tt,1)},[Se,G,ve]),De=W.useCallback(()=>{const Te={is_online:null,is_complete:null,course_id:""};ce(Te),Ie(1),ve(G,Te,1)},[G,ve]),_e=W.useCallback(Te=>{Ie(Te),ve(G,Se,Te)},[G,Se,ve]);W.useEffect(()=>{const Te=setTimeout(()=>{ve()},500);return()=>clearTimeout(Te)},[G,ve]);const Fe=W.useMemo(()=>z,[z]),Ne=W.useMemo(()=>{if(!G)return re;const Te=G.toLowerCase();return re.filter(He=>He.name.toLowerCase().includes(Te)||He.course.toLowerCase().includes(Te)||He.description.toLowerCase().includes(Te))},[re,G]),st=W.useCallback(async Te=>{try{const He=z.find(je=>je.id===Te);if(He.isPast){r({title:"Cannot join past session",status:"error",duration:3e3});return}await Wb(Te),le(!0);const tt=localStorage.getItem("major_id"),rt=localStorage.getItem("faculty_id");let gt={};tt?gt.major_id=tt:rt&&(gt.faculty_id=rt);const[jt,It]=await Promise.all([lc(gt),uu()]),Ve={};jt.data.forEach(je=>{Ve[je.id]={...je,members_count:je.members_count}});const Ye=je=>{const Ot=Ve[je.id];return{...je,meetings:je.meeting_time?[je.meeting_time]:[],members:Ot?Ot.members_count||1:je.members_count||1,tags:je.major?[je.major.name]:[],leader:je.creator||{},course:Xa(je.course,ne),formattedTime:Bo(je.meeting_time),isPast:je.meeting_time?new Date(je.meeting_time)<new Date:!1}},Et=Array.isArray(It)?It:It.data||[],lt=new Set(Et.map(je=>je.id));oe(jt.data.map(je=>({...Ye(je),isJoined:lt.has(je.id)}))),v(Et.map(je=>{const Ot=Ve[je.id];return{...Ye(je),members:Ot?Ot.members_count||1:je.members_count||1,isJoined:!0}})),le(!1),r({title:`Joined ${He.name}`,status:"success"})}catch(He){Ce("Failed to join group",He),le(!1)}},[z,ne]),Ge=W.useCallback(async Te=>{try{const He=await Ub(Te);ie(!0),le(!0);const tt=localStorage.getItem("major_id"),rt=localStorage.getItem("faculty_id");let gt={};tt?gt.major_id=tt:rt&&(gt.faculty_id=rt);const[jt,It]=await Promise.all([lc(gt),uu()]),Ve=lt=>({...lt,meetings:lt.meeting_time?[lt.meeting_time]:[],members:lt.members_count||1,tags:lt.major?[lt.major.name]:[],leader:lt.creator||{},course:Xa(lt.course,ne),formattedTime:Bo(lt.meeting_time),isPast:lt.meeting_time?new Date(lt.meeting_time)<new Date:!1}),Ye=Array.isArray(It)?It:It.data||[],Et=new Set(Ye.map(lt=>lt.id));oe(jt.data.map(lt=>({...Ve(lt),isJoined:Et.has(lt.id)}))),v(Ye.map(lt=>({...Ve(lt),isJoined:!0}))),ie(!1),le(!1),He&&He.message&&He.message.includes("The group has been deleted")?r({title:"Group deleted",description:He.message,status:"info",duration:4e3}):r({title:"Left group",description:(He==null?void 0:He.message)||void 0,status:"info",duration:3e3})}catch(He){Ce("Failed to leave group",He),ie(!1),le(!1)}},[ne]),ot=W.useCallback(async()=>{try{const Te=localStorage.getItem("major_id"),He=localStorage.getItem("faculty_id");if(!Te||!He){r({title:"Missing Profile Information",description:"Please complete your profile (major and faculty) before creating a group.",status:"error",duration:4e3});return}const tt={...Me,course_id:parseInt(Me.course_id),meeting_time:Me.meeting_time,capacity:15,is_online:Me.isOnline,location:Me.isOnline?"Online":Me.location,major_id:parseInt(Te),faculty_id:parseInt(He)},rt=await qb(tt);r({title:"Group created!",status:"success"}),o(),Xe({name:"",course_id:"",description:"",meeting_time:"",location:"",isOnline:!1});const gt={...rt,meetings:rt.meeting_time?[rt.meeting_time]:[],tags:rt.major?[rt.major.name]:[],formattedTime:Bo(rt.meeting_time),isPast:rt.meeting_time?new Date(rt.meeting_time)<new Date:!1,isJoined:!0,members:1,course:Xa(rt.course,ne),capacity:rt.capacity||15};oe(jt=>[gt,...jt]),v(jt=>[gt,...jt])}catch(Te){Ce("Failed to create group",Te)}},[Me,ne]),Nt=W.useCallback(Te=>{O(Te),T({name:Te.name,description:Te.description,meeting_time:Te.meeting_time?new Date(Te.meeting_time).toISOString().slice(0,16):"",location:Te.location||"",isOnline:Te.isOnline||!1}),m()},[m]),Ct=W.useCallback(Te=>{p(Te),c()},[c]),dt=W.useCallback(async()=>{if(h)try{await $b(h.id),oe(Te=>Te.filter(He=>He.id!==h.id)),v(Te=>Te.filter(He=>He.id!==h.id)),r({title:"Group deleted",description:"The study group has been successfully deleted.",status:"success",duration:3e3})}catch(Te){Ce("Failed to delete group",Te)}finally{u(),p(null)}},[h,u,r]),mt=W.useCallback(async()=>{if(!w||!k.name||!k.description){r({title:"Please fill in all required fields",status:"error",duration:3e3});return}try{const Te={name:k.name,description:k.description,meeting_time:k.meeting_time||null,location:k.isOnline?"Online":k.location,is_online:k.isOnline};await Hb(w.id,Te);const He={...w,...Te,formattedTime:Bo(k.meeting_time)};oe(tt=>tt.map(rt=>rt.id===w.id?He:rt)),v(tt=>tt.map(rt=>rt.id===w.id?He:rt)),r({title:"Group updated",description:"The study group has been successfully updated.",status:"success",duration:3e3}),_(),O(null),T({})}catch(Te){Ce("Failed to update group",Te)}},[w,k,_,r]),zt=(Te,He=!1)=>e.jsx(Jb,{groups:Te,onJoinLeave:tt=>{const rt=Te.find(gt=>gt.id===tt);rt&&rt.isJoined?Ge(tt):st(tt)},onEdit:Nt,onDelete:Ct,currentUser:s,emptyStateType:He?"myGroups":"allGroups"}),Ft=(Te,He,tt)=>e.jsx(ke,{direction:"column",align:"center",justify:"center",py:10,children:e.jsxs(de,{textAlign:"center",maxW:"400px",children:[Te,e.jsx(ut,{size:"md",mb:2,children:He}),e.jsx(V,{color:P,mb:6,children:tt}),L===0&&e.jsx(Ee,{colorScheme:"blue",onClick:i,children:"Create Your First Group"})]})}),fr=()=>e.jsx(si,{columns:{base:1,md:2},spacing:6,children:[...Array(4)].map((Te,He)=>e.jsxs(de,{p:6,bg:H,borderRadius:"lg",boxShadow:"md",children:[e.jsx(Sr,{height:"32px",mb:4}),e.jsx(Yo,{noOfLines:3,spacing:"4"}),e.jsxs(at,{mt:4,spacing:2,children:[e.jsx(Sr,{height:"24px",width:"60px"}),e.jsx(Sr,{height:"24px",width:"60px"})]}),e.jsx(tn,{my:4}),e.jsxs(yr,{spacing:3,children:[e.jsx(Sr,{height:"20px"}),e.jsx(Sr,{height:"20px"}),e.jsx(Sr,{height:"20px"})]}),e.jsx(tn,{my:4}),e.jsxs(ke,{justify:"space-between",mt:4,children:[e.jsx(Sr,{height:"32px",width:"100px"}),e.jsx(Sr,{height:"32px",width:"100px"})]})]},He))});return e.jsxs(ke,{minH:"100vh",p:{base:4,md:8},bg:se("gray.50","gray.800"),children:[e.jsxs(de,{maxW:"container.lg",mx:"auto",w:"full",children:[e.jsxs(ke,{justify:"space-between",align:"center",mb:6,flexWrap:"wrap",gap:4,children:[e.jsxs(at,{spacing:4,children:[e.jsx(Mt,{icon:e.jsx(Bn,{}),"aria-label":"Go back",onClick:()=>t(-1),variant:"ghost",borderRadius:"full"}),e.jsx(ut,{size:"xl",color:Z,fontWeight:"700",children:"Study Groups"})]}),e.jsx(Ee,{leftIcon:e.jsx(Jn,{}),colorScheme:"blue",onClick:i,borderRadius:"full",children:"Create Group"})]}),e.jsxs(sa,{colorScheme:"blue",mb:6,variant:"soft-rounded",index:L,onChange:j,children:[e.jsxs(ke,{justify:"space-between",align:"center",gap:4,mb:4,flexWrap:"wrap",children:[e.jsxs(oa,{children:[e.jsx(Yn,{children:"All Groups"}),e.jsx(Yn,{children:"My Groups"})]}),e.jsxs(at,{spacing:2,children:[e.jsxs(Ee,{leftIcon:e.jsx(qc,{}),variant:"outline",size:"sm",onClick:()=>E(!A),colorScheme:Object.values(Se).some(Te=>Te!==null&&Te!=="")?"blue":"gray",children:["Filters",Object.values(Se).some(Te=>Te!==null&&Te!=="")&&e.jsx(Lr,{ml:2,colorScheme:"blue",variant:"solid",children:Object.values(Se).filter(Te=>Te!==null&&Te!=="").length})]}),e.jsxs(Rr,{maxW:{base:"250px",md:"300px"},children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(no,{color:P})}),e.jsx(Pt,{placeholder:"Search study sessions...",size:"md",borderRadius:"lg",value:G,onChange:Te=>R(Te.target.value),_focus:{borderColor:D,boxShadow:`0 0 0 1px ${D}`},bg:se("white","gray.700")}),(G||ge)&&e.jsx(Cc,{children:ge?e.jsx(en,{size:"sm"}):e.jsx(Mt,{icon:e.jsx(io,{}),size:"sm",variant:"ghost","aria-label":"Clear search",onClick:()=>R("")})})]})]})]}),e.jsx(Hm,{in:A,animateOpacity:!0,children:e.jsx(de,{p:4,bg:se("gray.50","gray.700"),borderRadius:"lg",mb:4,border:"1px solid",borderColor:B,children:e.jsxs(et,{spacing:4,align:"stretch",children:[e.jsxs(at,{justify:"space-between",align:"center",children:[e.jsx(V,{fontWeight:"medium",fontSize:"sm",color:Z,children:"Filter Groups"}),e.jsx(Ee,{size:"xs",variant:"ghost",onClick:De,disabled:!Object.values(Se).some(Te=>Te!==null&&Te!==""),children:"Clear All"})]}),"                ",e.jsxs(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:4,children:[e.jsxs(ht,{children:[e.jsx(ft,{fontSize:"sm",mb:1,children:"Course"}),e.jsxs(yn,{children:[e.jsx(vn,{as:Ee,size:"sm",w:"100%",rightIcon:e.jsx(is,{}),textAlign:"left",fontWeight:"normal",bg:se("white","gray.600"),overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:Se.course_id&&ne.find(Te=>Te.id===Number(Se.course_id))?`${ne.find(Te=>Te.id===Number(Se.course_id)).code} - ${ne.find(Te=>Te.id===Number(Se.course_id)).title}`:"Any course"}),e.jsx($m,{children:e.jsxs(wn,{maxH:"320px",overflowY:"auto",minW:"400px",children:[e.jsx(rr,{onClick:()=>Pe("course_id",""),children:"Any course"}),y?e.jsx(ke,{justify:"center",align:"center",h:"100px",children:e.jsx(en,{})}):ne.map(Te=>{var He;return e.jsx(rr,{onClick:()=>Pe("course_id",Te.id),children:e.jsxs(de,{children:[e.jsxs(V,{fontWeight:"medium",children:[Te.code," - ",Te.title]}),e.jsx(V,{fontSize:"sm",color:P,children:(He=Te.major)==null?void 0:He.name})]})},Te.id)}),N>1&&e.jsx(de,{borderTop:"1px solid",borderColor:B,mt:2,pt:2,px:2,children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(Ee,{size:"xs",onClick:Te=>{Te.stopPropagation(),Ze(C-1)},isDisabled:C<=1||y,variant:"outline",borderRadius:"md",children:"Prev"}),e.jsxs(V,{fontSize:"xs",color:P,mx:2,children:["Page ",C," of ",N]}),e.jsx(Ee,{size:"xs",onClick:Te=>{Te.stopPropagation(),Ze(C+1)},isDisabled:C>=N||y,variant:"outline",borderRadius:"md",children:"Next"})]})})]})})]})]}),e.jsxs(ht,{children:[e.jsx(ft,{fontSize:"sm",mb:1,children:"Meeting Type"}),e.jsxs(Li,{size:"sm",value:Se.is_online===null?"":Se.is_online.toString(),onChange:Te=>Pe("is_online",Te.target.value===""?null:Te.target.value==="true"),placeholder:"Any type",bg:se("white","gray.600"),children:[e.jsx("option",{value:"true",children:"Online"}),e.jsx("option",{value:"false",children:"In-person"})]})]}),e.jsxs(ht,{children:[e.jsx(ft,{fontSize:"sm",mb:1,children:"Status"}),e.jsxs(Li,{size:"sm",value:Se.is_complete===null?"":Se.is_complete.toString(),onChange:Te=>Pe("is_complete",Te.target.value===""?null:Te.target.value==="true"),placeholder:"Any status",bg:se("white","gray.600"),children:[e.jsx("option",{value:"false",children:"Active"}),e.jsx("option",{value:"true",children:"Completed"})]})]})]}),Object.entries(Se).some(([Te,He])=>He!==null&&He!=="")&&e.jsxs(de,{children:[e.jsx(V,{fontSize:"xs",color:P,mb:2,children:"Active Filters:"}),e.jsx(at,{spacing:2,flexWrap:"wrap",children:Object.entries(Se).map(([Te,He])=>{if(He===null||He==="")return null;let tt="",rt=He;switch(Te){case"course_id":const gt=ne.find(jt=>jt.id.toString()===He.toString());tt="Course",rt=gt?gt.code:He;break;case"is_online":tt="Type",rt=He?"Online":"In-person";break;case"is_complete":tt="Status",rt=He?"Completed":"Active";break}return e.jsxs(Vn,{size:"sm",colorScheme:"blue",variant:"solid",cursor:"pointer",onClick:()=>Pe(Te,Te==="is_online"||Te==="is_complete"?null:""),children:[tt,": ",rt,e.jsx(io,{style:{marginLeft:"4px"}})]},Te)})})]})]})})}),e.jsxs(al,{children:[e.jsx(oi,{px:0,children:Q?fr():Fe.length>0?e.jsxs(e.Fragment,{children:[zt(Fe),We>1&&e.jsxs(de,{mt:8,children:[e.jsx(ke,{justify:"center",mb:4,display:{base:"flex",md:"none"},children:e.jsxs(V,{fontSize:"sm",color:P,textAlign:"center",px:4,children:["Page ",ze," of ",We]})}),e.jsxs(ke,{justify:"space-between",align:"center",p:6,bg:se("white","gray.700"),borderRadius:"xl",borderWidth:"1px",borderColor:B,shadow:"sm",_hover:{shadow:"md",borderColor:se("gray.300","gray.600")},transition:"all 0.2s",flexDirection:{base:"column",md:"row"},gap:{base:4,md:0},children:[e.jsxs(V,{fontSize:"sm",color:P,fontWeight:"medium",display:{base:"none",md:"block"},children:["Showing page ",ze," of ",We," • ",ee," total groups"]}),e.jsxs(at,{spacing:2,children:[e.jsx(Ee,{leftIcon:e.jsx(ss,{}),onClick:()=>_e(ze-1),isDisabled:ze===1||ge,variant:"outline",size:"md",borderRadius:"lg",_hover:{bg:se("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",isLoading:ge,loadingText:"Previous",children:"Previous"}),e.jsx(at,{spacing:1,mx:2,children:(()=>{const Te=[],He=window.innerWidth<768?3:5;let tt=Math.max(1,ze-Math.floor(He/2)),rt=Math.min(We,tt+He-1);rt-tt+1<He&&(tt=Math.max(1,rt-He+1)),tt>1&&(Te.push(e.jsx(Ee,{onClick:()=>_e(1),isDisabled:ge,variant:"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",_hover:{bg:se("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"1"},1)),tt>2&&Te.push(e.jsx(V,{color:P,px:2,fontSize:"lg",children:"..."},"ellipsis1")));for(let gt=tt;gt<=rt;gt++){const jt=gt===ze;Te.push(e.jsx(Ee,{onClick:()=>_e(gt),isDisabled:ge,colorScheme:jt?"blue":void 0,variant:jt?"solid":"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",fontWeight:jt?"bold":"medium",_hover:jt?{}:{bg:se("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",shadow:jt?"md":"sm",children:gt},gt))}return rt<We&&(rt<We-1&&Te.push(e.jsx(V,{color:P,px:2,fontSize:"lg",children:"..."},"ellipsis2")),Te.push(e.jsx(Ee,{onClick:()=>_e(We),isDisabled:ge,variant:"outline",size:"md",minW:"44px",h:"44px",borderRadius:"lg",_hover:{bg:se("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:We},We))),Te})()}),e.jsx(Ee,{rightIcon:e.jsx(co,{}),onClick:()=>_e(ze+1),isDisabled:ze===We||ge,variant:"outline",size:"md",borderRadius:"lg",_hover:{bg:se("blue.50","blue.900"),borderColor:"blue.300",transform:"translateY(-1px)"},_active:{transform:"translateY(0)"},transition:"all 0.2s",isLoading:ge,loadingText:"Next",children:"Next"})]})]})]})]}):Ft(e.jsx(Bc,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),"No study groups found","Try changing your search terms or create a new group")}),e.jsx(oi,{px:0,children:ue?fr():Ne.length>0?zt(Ne,!0):Ft(e.jsx(qn,{size:50,style:{margin:"0 auto 20px",opacity:.3}}),"You haven't joined any groups yet","Join a study group to collaborate with others")})]})]})]}),e.jsx(Xb,{isOpen:n,onClose:o,newGroup:Me,onInputChange:Ue,onCreateGroup:ot,onToggleOnline:pt,subjects:["All",...new Set(ne.map(Te=>{var He;return(He=Te.major)==null?void 0:He.name}).filter(Boolean))],courses:ne,coursesLoading:y,currentCoursePage:C,totalCoursePages:N,onCoursePageChange:Ze}),e.jsxs(cn,{isOpen:b,onClose:_,size:"lg",isCentered:!0,children:[e.jsx(kr,{}),e.jsxs(dn,{borderRadius:"xl",children:[e.jsx(Fr,{borderBottomWidth:"1px",borderColor:B,pb:4,children:"Edit Study Group"}),e.jsx(rn,{}),e.jsx(Ar,{py:6,children:e.jsxs(yr,{spacing:4,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Group Name"}),e.jsx(Pt,{value:k.name||"",onChange:Te=>T(He=>({...He,name:Te.target.value})),placeholder:"Enter group name"})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Description"}),e.jsx(Qn,{value:k.description||"",onChange:Te=>T(He=>({...He,description:Te.target.value})),placeholder:"Describe your study group",rows:3})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Meeting Time"}),e.jsx(Pt,{type:"datetime-local",value:k.meeting_time||"",onChange:Te=>T(He=>({...He,meeting_time:Te.target.value}))})]}),e.jsxs(ht,{display:"flex",alignItems:"center",children:[e.jsx(ft,{mb:"0",children:"Online Meeting"}),e.jsx(Gm,{isChecked:k.isOnline||!1,onChange:Te=>T(He=>({...He,isOnline:Te.target.checked}))})]}),!k.isOnline&&e.jsxs(ht,{children:[e.jsx(ft,{children:"Location"}),e.jsx(Pt,{value:k.location||"",onChange:Te=>T(He=>({...He,location:Te.target.value})),placeholder:"Enter meeting location"})]})]})}),e.jsxs(Ur,{borderTopWidth:"1px",borderColor:B,pt:4,children:[e.jsx(Ee,{variant:"ghost",mr:3,onClick:_,children:"Cancel"}),e.jsx(Ee,{colorScheme:"blue",onClick:mt,isDisabled:!k.name||!k.description,children:"Update Group"})]})]})]}),e.jsx(la,{isOpen:a,leastDestructiveRef:x,onClose:u,isCentered:!0,children:e.jsx(kr,{children:e.jsxs(ca,{borderRadius:"xl",children:[e.jsx(Fr,{fontSize:"lg",fontWeight:"bold",children:"Delete Study Group"}),e.jsxs(Ar,{children:['Are you sure you want to delete "',h==null?void 0:h.name,'"? This action cannot be undone and will remove all group data.']}),e.jsxs(Ur,{children:[e.jsx(Ee,{ref:x,onClick:u,children:"Cancel"}),e.jsx(Ee,{colorScheme:"red",onClick:dt,ml:3,children:"Delete"})]})]})})})]})},Qb=()=>{const t=ll(),r=Vr(),n=Ir(),{docId:i}=Dc(),[o,s]=W.useState(!0),[a,c]=W.useState(null);W.useEffect(()=>{var T;s(!0),(T=t.state)!=null&&T.document?setTimeout(()=>{c(t.state.document),s(!1)},800):(s(!1),n({title:"Document not found",description:"The requested document could not be loaded.",status:"error",duration:5e3,isClosable:!0}))},[t,i,n]);const u=()=>{if(a){const T=a.createElement("a");T.href=a.url,T.setAttribute("download",a.name),a.body.appendChild(T),T.click(),a.body.removeChild(T),n({title:"Download started",description:`${a.name} is downloading.`,status:"success",duration:3e3,isClosable:!0})}},h=()=>{n({title:"Document bookmarked",description:"You can access this document in your bookmarks.",status:"success",duration:3e3,isClosable:!0})},p=()=>{navigator.clipboard.writeText(window.location.href),n({title:"Link copied",description:"Document link copied to clipboard.",status:"info",duration:3e3,isClosable:!0})},x=()=>{window.print()},b=se("white","gray.800"),m=se("gray.200","gray.600"),_=se("gray.600","gray.400"),w=se("brand.gold","brand.goldDark"),O=se("brand.navy","brand.navyDark"),k=se("gray.50","gray.800");return e.jsx(e.Fragment,{children:e.jsxs(de,{px:{base:4,md:6},py:6,maxW:"1400px",mx:"auto",bg:k,children:[e.jsx(Ee,{leftIcon:e.jsx(Bn,{}),variant:"ghost",mb:6,onClick:()=>r(-1),size:"sm",color:O,_hover:{bg:"transparent",color:w},children:"Back"}),e.jsxs(pr,{templateColumns:{base:"1fr",lg:"3fr 1fr"},gap:6,children:[e.jsx(_c,{children:e.jsxs(er,{bg:b,shadow:"md",borderRadius:"lg",overflow:"hidden",children:[e.jsxs(ke,{p:6,borderBottom:"1px",borderColor:m,direction:{base:"column",md:"row"},justify:"space-between",align:{base:"start",md:"center"},gap:4,children:[e.jsxs(de,{children:[e.jsx(ut,{as:"h1",size:"lg",mb:2,color:O,children:o?e.jsx(Sr,{height:"36px",width:"300px"}):(a==null?void 0:a.name)||"Document not found"}),e.jsx(ke,{align:"center",gap:3,color:_,flexWrap:"wrap",children:o?e.jsx(Sr,{height:"20px",width:"180px"}):e.jsxs(e.Fragment,{children:[e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ct,{as:Dn,color:w}),e.jsx(V,{children:(a==null?void 0:a.type)||"Unknown type"})]}),(a==null?void 0:a.size)&&e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ct,{as:pp,color:w}),e.jsx(V,{children:a.size})]}),e.jsxs(ke,{align:"center",gap:1,children:[e.jsx(ct,{as:Ps,color:w}),e.jsxs(V,{children:["Uploaded ",(a==null?void 0:a.uploadDate)||"recently"]})]})]})})]}),e.jsxs(ke,{gap:2,children:[e.jsx(gi,{label:"Download",children:e.jsx(Mt,{"aria-label":"Download document",icon:e.jsx(Ai,{}),onClick:u,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:w}})}),e.jsx(gi,{label:"Bookmark",children:e.jsx(Mt,{"aria-label":"Bookmark document",icon:e.jsx($i,{}),onClick:h,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:w}})}),e.jsx(gi,{label:"Share",children:e.jsx(Mt,{"aria-label":"Share document",icon:e.jsx(da,{}),onClick:p,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:w}})}),e.jsx(gi,{label:"Print",children:e.jsx(Mt,{"aria-label":"Print document",icon:e.jsx(e1,{}),onClick:x,isDisabled:o||!a,bg:O,color:"white",_hover:{bg:w}})})]})]}),e.jsx(de,{p:6,children:o?e.jsx(Sr,{height:"600px",width:"100%"}):a?e.jsx(_s,{ratio:4/3,maxH:"800px",children:e.jsx(de,{as:"iframe",src:a.url,borderRadius:"md",bg:k,border:"1px",borderColor:m,width:"100%",height:"100%","aria-label":"Document preview"})}):e.jsxs(ke,{direction:"column",align:"center",justify:"center",py:20,bg:k,borderRadius:"md",children:[e.jsx(ct,{as:Dn,boxSize:16,color:_,mb:4}),e.jsx(ut,{size:"md",mb:2,color:O,children:"Document Not Found"}),e.jsx(V,{color:_,children:"The document you're looking for could not be loaded."}),e.jsx(Ee,{mt:6,leftIcon:e.jsx(Bn,{}),onClick:()=>r(-1),bg:O,color:"white",_hover:{bg:w},children:"Go Back"})]})})]})}),e.jsx(_c,{children:e.jsx(er,{bg:b,shadow:"md",borderRadius:"lg",children:e.jsxs(ln,{children:[e.jsx(ut,{size:"md",mb:4,color:O,children:"Document Information"}),e.jsx(tn,{mb:4,borderColor:m}),o?e.jsx(ke,{direction:"column",gap:3,children:[...Array(5)].map((T,H)=>e.jsx(Sr,{height:"24px"},H))}):a?e.jsxs(wu,{spacing:3,children:[e.jsxs(Uo,{children:[e.jsx(rc,{as:Qo,color:w}),e.jsx(V,{as:"span",fontWeight:"bold",mr:2,color:O,children:"Owner:"}),e.jsx(V,{as:"span",children:a.owner||"Unknown"})]}),e.jsxs(Uo,{children:[e.jsx(rc,{as:kn,color:w}),e.jsx(V,{as:"span",fontWeight:"bold",mr:2,color:O,children:"Created:"}),e.jsx(V,{as:"span",children:a.created||"Unknown"})]}),e.jsxs(Uo,{children:[e.jsx(rc,{as:Dn,color:w}),e.jsx(V,{as:"span",fontWeight:"bold",mr:2,color:O,children:"File Type:"}),e.jsx(V,{as:"span",children:a.type||"Unknown"})]}),e.jsxs(Uo,{children:[e.jsx(rc,{as:Vu,color:w}),e.jsx(V,{as:"span",fontWeight:"bold",mr:2,color:O,children:"Rating:"}),e.jsx(Lr,{px:2,py:1,borderRadius:"full",bg:w,color:"white",children:a.rating||"Not rated"})]})]}):e.jsx(V,{color:_,children:"No document information available"}),e.jsx(tn,{my:4,borderColor:m}),e.jsx(ut,{size:"md",mb:4,color:O,children:"Related Documents"}),o?e.jsx(ke,{direction:"column",gap:3,children:[...Array(3)].map((T,H)=>e.jsx(Sr,{height:"60px"},H))}):a?e.jsx(wu,{spacing:3,children:(a.relatedDocuments||[{id:1,name:"Course Syllabus",type:"PDF"},{id:2,name:"Lecture Notes",type:"DOCX"},{id:3,name:"Assignment 1",type:"PDF"}]).map(T=>e.jsx(Uo,{p:2,_hover:{bg:k},borderRadius:"md",children:e.jsxs(ke,{align:"center",children:[e.jsx(ct,{as:Dn,mr:3,color:w}),e.jsxs(de,{children:[e.jsx(V,{fontWeight:"medium",color:O,children:T.name}),e.jsx(V,{fontSize:"sm",color:_,children:T.type})]})]})},T.id))}):e.jsx(V,{color:_,children:"No related documents available"}),e.jsx(Ee,{mt:6,width:"full",leftIcon:e.jsx(Ai,{}),bg:O,color:"white",_hover:{bg:w},onClick:u,isDisabled:o||!a,children:"Download Document"})]})})})]})]})})},Zb=async(t=1)=>{try{return(await yt.get("/notifications",{params:{page:t}})).data}catch(r){throw r}},ey=async t=>{try{return(await yt.patch(`/notifications/${t}/read`,{})).data}catch(r){throw r}},ty=async t=>{try{return(await yt.delete(`/notifications/${t}`)).data}catch(r){throw r}},ry=async()=>{try{return(await yt.put("/notifications",{})).data}catch(t){throw t}},k0=W.createContext(),ny=({children:t})=>{const[r,n]=W.useState([]),[i,o]=W.useState(!0),[s,a]=W.useState(null),[c,u]=W.useState(0),[h,p]=W.useState(1),[x,b]=W.useState(1),[m,_]=W.useState(!1),w=W.useCallback(R=>{var L,j,A;return{id:R.id,user:R.sender_name||"System",avatar:R.sender_avatar,content:((L=R.data)==null?void 0:L.message)||"",isRead:!!R.read,time:O(R.created_at),url:R.url||((j=R.data)==null?void 0:j.url),created_at:R.created_at,type:R.type,reason:(A=R.data)==null?void 0:A.reason}},[]),O=W.useCallback(R=>{if(!R)return"";const L=new Date,j=new Date(R),A=(L-j)/1e3;return A<60?`${Math.floor(A)}s ago`:A<3600?`${Math.floor(A/60)}m ago`:A<86400?`${Math.floor(A/3600)}h ago`:A<604800?`${Math.floor(A/86400)}d ago`:j.toLocaleDateString()},[]),k=W.useCallback(async(R=1,L=!1)=>{try{L||o(!0),a(null);const j=await Zb(R);let A=[];Array.isArray(j)?A=j:Array.isArray(j.data)?(A=j.data,p(j.current_page||R),b(j.last_page||1),_((j.current_page||R)<(j.last_page||1))):Array.isArray(j.notifications)&&(A=j.notifications);const E=A.map(w);L&&R>1?n(oe=>[...oe,...E]):n(E);const z=E.filter(oe=>!oe.isRead);L||u(z.length)}catch(j){a("Failed to load notifications"),console.error("Error fetching notifications:",j)}finally{o(!1)}},[w]),T=W.useCallback(()=>r.filter(R=>!R.isRead).sort((R,L)=>new Date(L.created_at)-new Date(R.created_at)).slice(0,3),[r]),H=W.useCallback(async R=>{n(j=>j.map(A=>A.id===R?{...A,isRead:!0}:A));const L=Math.max(0,c-1);u(L);try{await ey(R)}catch(j){console.error("Error marking notification as read:",j),n(A=>A.map(E=>E.id===R?{...E,isRead:!1}:E)),u(A=>A+1)}},[c]),Z=W.useCallback(async()=>{const R=r.filter(L=>!L.isRead);n(L=>L.map(j=>({...j,isRead:!0}))),u(0);try{await ry()}catch(L){console.error("Error marking all notifications as read:",L),n(j=>j.map(A=>R.find(z=>z.id===A.id)?{...A,isRead:!1}:A)),u(R.length)}},[r]),P=W.useCallback(async R=>{const L=r.find(j=>j.id===R);n(j=>j.filter(A=>A.id!==R)),L&&!L.isRead&&u(j=>Math.max(0,j-1));try{await ty(R)}catch(j){throw console.error("Error deleting notification:",j),n(A=>[...A,L].sort((E,z)=>new Date(z.created_at)-new Date(E.created_at))),L&&!L.isRead&&u(A=>A+1),j}},[r]),D=W.useCallback(()=>{k(1,!1)},[k]),B=W.useCallback(()=>{m&&!i&&h<x&&k(h+1,!0)},[m,i,h,x,k]);W.useEffect(()=>{k(1,!1)},[k]),W.useEffect(()=>{const R=setInterval(()=>{document.visibilityState==="visible"&&D()},3e4);return()=>clearInterval(R)},[D]);const G={notifications:r,loading:i,error:s,unreadCount:c,currentPage:h,totalPages:x,hasMore:m,unreadNotifications:T(),fetchNotifications:k,markAsRead:H,markAllAsRead:Z,deleteNotification:P,refreshNotifications:D,loadMoreNotifications:B};return e.jsx(k0.Provider,{value:G,children:t})},A0=()=>{const t=W.useContext(k0);if(!t)throw new Error("useNotifications must be used within a NotificationsProvider");return t},iy=()=>{const t=se("#f0f4f8","gray.900"),r=se("white","gray.800"),n=se("gray.200","gray.600"),i=se("brand.navy","white"),o=se("gray.600","gray.400"),s=se("brand.gold","brand.goldDark"),a=se("brand.navy","brand.navyDark"),c=se("0 4px 20px rgba(0, 0, 0, 0.1)","0 4px 20px rgba(0, 0, 0, 0.3)"),u=se("gray.50","gray.700");ia({base:!0,md:!1});const h=Ir(),p=Vr(),{notifications:x,loading:b,error:m,unreadCount:_,currentPage:w,totalPages:O,hasMore:k,markAsRead:T,markAllAsRead:H,deleteNotification:Z,fetchNotifications:P}=A0(),D=async()=>{try{await H(),h({title:"All notifications marked as read",status:"success",duration:3e3,isClosable:!0,position:"top"})}catch{h({title:"Failed to mark all as read",status:"error",duration:3e3,isClosable:!0,position:"top"})}},B=async j=>{try{await T(j)}catch{}},G=async j=>{try{await Z(j),h({title:"Notification deleted",status:"success",duration:3e3,isClosable:!0,position:"top"})}catch{h({title:"Failed to delete notification",status:"error",duration:3e3,isClosable:!0,position:"top"})}},R=j=>{j>=1&&j<=O&&P(j,!1)},L=async j=>{if(j.isRead||B(j.id),j.url)try{const A=new URL(j.url).pathname;p(A)}catch{console.error("Invalid URL for notification:",j.url),h({title:"Invalid notification link",status:"error",duration:3e3,isClosable:!0,position:"top"})}};return e.jsx(de,{minH:"100vh",bg:t,py:{base:4,md:8},px:{base:3,md:6},children:e.jsx(bi,{maxW:"900px",children:e.jsxs(ke,{direction:"column",mx:"auto",bg:r,borderRadius:"xl",overflow:"hidden",boxShadow:c,children:[e.jsxs(ke,{p:4,align:"center",justify:"space-between",borderBottom:"1px solid",borderColor:n,bg:se("gray.50","gray.750"),children:[e.jsxs(at,{spacing:3,children:[e.jsx(Mt,{as:Hi,to:"/dashboard",icon:e.jsx(ss,{size:18}),variant:"ghost","aria-label":"Go back",color:i,borderRadius:"full",size:"md",_hover:{bg:`${s}20`}}),e.jsx(ct,{as:Ko,color:s,boxSize:5}),e.jsx(ut,{size:"md",color:i,children:"Notifications"}),_>0&&e.jsxs(Lr,{px:2,py:1,bg:s,color:a,borderRadius:"full",fontWeight:"medium",children:[_," new"]})]}),e.jsx(Ee,{size:"sm",colorScheme:"gray",variant:"ghost",onClick:D,leftIcon:e.jsx(Pi,{}),isDisabled:_===0,_hover:{bg:`${s}20`},children:"Mark all as read"})]}),e.jsx(de,{children:b?e.jsx(bn,{py:16,children:e.jsx(V,{color:o,children:"Loading notifications..."})}):m?e.jsx(bn,{py:16,children:e.jsx(V,{color:"red.400",children:m})}):x.length>0?e.jsxs(e.Fragment,{children:[e.jsx(et,{spacing:0,align:"stretch",divider:e.jsx(tn,{borderColor:n}),children:x.map(j=>e.jsx(de,{children:e.jsx(ke,{p:5,position:"relative",bg:j.isRead?"transparent":`${s}10`,_hover:{bg:u},transition:"all 0.2s ease",borderLeft:"3px solid",borderLeftColor:j.isRead?"transparent":s,onClick:()=>L(j),cursor:j.url?"pointer":"default",direction:"column",children:e.jsxs(ke,{align:"flex-start",gap:4,children:[e.jsxs(de,{position:"relative",flexShrink:0,children:[e.jsx(Tr,{size:"md",name:j.user,src:j.avatar,border:"2px solid",borderColor:j.isRead?n:s}),!j.isRead&&e.jsx(Lr,{position:"absolute",top:"-1",right:"-1",bg:s,boxSize:"10px",borderRadius:"full",border:"2px solid",borderColor:r})]}),e.jsxs(de,{ml:0,flex:"1",minW:0,children:[e.jsxs(ke,{align:"baseline",justify:"space-between",children:[e.jsx(V,{fontWeight:j.isRead?"medium":"bold",color:i,children:j.user}),e.jsx(V,{fontSize:"sm",color:o,children:j.time})]}),e.jsx(V,{mt:1,color:j.isRead?o:i,children:j.content}),j.type==="resource_rejected"&&j.reason&&e.jsxs(eo,{mt:3,status:"warning",variant:"subtle",borderRadius:"md",fontSize:"sm",children:[e.jsx(to,{as:$u}),e.jsxs(de,{children:[e.jsx(V,{fontWeight:"semibold",mb:1,children:"Rejection Reason:"}),e.jsx(V,{children:j.reason})]})]})]}),e.jsx(Mt,{icon:e.jsx(cl,{}),variant:"ghost",colorScheme:"red",size:"sm",onClick:A=>{A.stopPropagation(),G(j.id)},"aria-label":"Delete notification",alignSelf:"center",borderRadius:"full",opacity:.7,_hover:{opacity:1},flexShrink:0})]})})},j.id))}),O>1&&e.jsxs(ke,{justify:"center",align:"center",p:4,borderTop:"1px solid",borderColor:n,children:[e.jsx(Ee,{onClick:()=>R(w-1),isDisabled:w===1,leftIcon:e.jsx(ss,{}),mr:2,children:"Previous"}),e.jsxs(V,{color:o,children:["Page ",w," of ",O]}),e.jsx(Ee,{onClick:()=>R(w+1),isDisabled:w===O,rightIcon:e.jsx(co,{}),ml:2,children:"Next"})]})]}):e.jsx(bn,{py:16,children:e.jsxs(et,{spacing:4,children:[e.jsx(de,{p:4,borderRadius:"full",bg:`${s}20`,children:e.jsx(ct,{as:Ko,fontSize:"3xl",color:s})}),e.jsx(ut,{size:"md",color:i,children:"No notifications"}),e.jsx(V,{color:o,textAlign:"center",maxW:"350px",children:"You're all caught up! Check back later for updates and activities from your courses and study groups."}),e.jsx(Ee,{as:Hi,to:"/dashboard",mt:2,leftIcon:e.jsx(Bn,{}),colorScheme:"gray",variant:"outline",_hover:{bg:`${s}20`,borderColor:s},children:"Return to Dashboard"})]})})})]})})})},sy=async(t={})=>(await yt.get("/requests",{params:t})).data,oy=async(t={})=>{const r={};return t.course_name&&(r.course_name=t.course_name),t.current_day&&(r.current_day=t.current_day),t.desired_day&&(r.desired_day=t.desired_day),(await yt.get("/requests",{params:r})).data},ay=async(t={})=>(await yt.get("/my-requests",{params:t})).data,ly=async()=>(await yt.get("/my-applications")).data,cy=async t=>(await yt.post("/requests",t)).data,dy=async t=>(await yt.get(`/requests/${t}`)).data,L0=async(t,r)=>(await yt.put(`/requests/${t}`,r)).data,uy=async t=>(await yt.delete(`/requests/${t}`)).data,hy=async(t,r={})=>(await yt.post(`/requests/${t}/apply`,r)).data,fy=async t=>(await yt.get(`/requests/${t}/applications`)).data,zf=async(t,r)=>(await yt.put(`/applications/${t}`,r)).data,py=async t=>(await yt.put(`/applications/${t}/withdraw`)).data,Fc=({currentPage:t,totalPages:r,onPageChange:n,isLoading:i})=>e.jsxs(at,{spacing:2,justify:"center",mt:4,children:[e.jsx(Ee,{size:"sm",onClick:()=>n(t-1),isDisabled:i||t<=1,children:"Prev"}),e.jsxs(V,{fontSize:"sm",children:["Page ",t," of ",r]}),e.jsx(Ee,{size:"sm",onClick:()=>n(t+1),isDisabled:i||t>=r,children:"Next"})]}),my=5;function P0({perPage:t=my,trigger:r=!0}={}){const[n,i]=W.useState([]),[o,s]=W.useState(!1),[a,c]=W.useState(null),[u,h]=W.useState(1),[p,x]=W.useState(1),b=W.useCallback(async(m=1)=>{s(!0),c(null);try{const _=localStorage.getItem("major_id"),w=localStorage.getItem("faculty_id"),O={..._?{major_id:_}:{},...w?{faculty_id:w}:{},page:m,per_page:t},k=await sl(O);i(k.data||[]),x(k.last_page||1),h(k.current_page||1)}catch(_){c(_.message||"Failed to load courses")}finally{s(!1)}},[t]);return W.useEffect(()=>{r&&b(u)},[u,r]),{courses:n,coursesLoading:o,coursesError:a,coursesPage:u,coursesTotalPages:p,setCoursesPage:h,fetchPaginatedCourses:b}}const td="https://bit.ly/dan-abramov",Ff=t=>t?{id:t.id,userId:t.user_id,userName:t.user&&t.user.first_name&&t.user.last_name?`${t.user.first_name} ${t.user.last_name}`:t.user&&t.user.username||t.userName||"You",userAvatar:t.user&&t.user.avatar_url||t.userAvatar||td,reason:t.reason,createdAt:t.created_at||t.createdAt,status:t.status,request:t.request}:{},Ka=(t,r)=>{if(!t)return{};const n=t.requester||r||{};return{id:t.id,courseName:t.course_name,currentSection:t.current_section,desiredSection:t.desired_section,currentDay:t.current_day,currentTime:t.current_time,desiredDay:t.desired_day,desiredTime:t.desired_time,reason:t.reason,status:t.status,requesterId:n.id,requesterName:n.first_name&&n.last_name?`${n.first_name} ${n.last_name}`:n.name||"You",requesterAvatar:n.avatar_url||td,createdAt:t.created_at,applications:Array.isArray(t.applications)?t.applications.map(i=>({id:i.id,requestId:t.id,userId:i.user_id||(i.user?i.user.id:void 0),status:i.status,user:i.user?{id:i.user.id,name:`${i.user.first_name} ${i.user.last_name}`}:{}})):[]}},If=({request:t,userId:r,onApply:n,onCancel:i,onDelete:o,onViewApplications:s,onUpdateApplication:a,onUpdateApplicationStatus:c,onEdit:u})=>{var T;typeof window!="undefined"&&localStorage.getItem("role");const h=t.requesterId===r,p=se("white","gray.800"),x=se("gray.800","white"),b=se("gray.600","gray.400"),m=se("yellow.400","yellow.500"),_=se("gray.100","gray.700"),w=(T=t.applications)==null?void 0:T.some(H=>H.userId===r&&(H.status==="pending"||H.status==="accepted")),O={pending:"orange",accepted:"green",declined:"red",cancelled:"gray"},k=H=>{if(!H)return"";try{const[Z,P]=H.split(":"),D=parseInt(Z,10),B=D>=12?"PM":"AM";return`${D%12||12}:${P} ${B}`}catch{return H}};return e.jsxs(er,{bg:p,boxShadow:"sm",border:"1px solid",borderColor:_,borderRadius:"lg",overflow:"hidden",transition:"all 0.2s",_hover:{transform:"translateY(-2px)",boxShadow:"md"},children:[t.status!=="pending"&&e.jsx(Lr,{position:"absolute",top:2,right:2,colorScheme:O[t.status],variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:t.status}),e.jsx(ao,{pb:3,pt:{base:8,md:4},children:e.jsxs(ke,{justify:"space-between",align:"start",direction:{base:"column",sm:"row"},gap:{base:3,sm:0},children:[e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(ut,{size:{base:"xs",sm:"sm"},color:x,children:t.courseName}),e.jsxs(V,{fontSize:"xs",color:b,children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsxs(at,{spacing:2,flexShrink:0,children:[e.jsx(Vn,{size:{base:"sm",md:"sm"},colorScheme:"blue",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:t.currentSection}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:"gray.500",children:"→"}),e.jsx(Vn,{size:{base:"sm",md:"sm"},colorScheme:"green",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:t.desiredSection})]})]})}),e.jsxs(ln,{py:0,children:[e.jsxs(pr,{templateColumns:{base:"1fr",sm:"repeat(2, 1fr)"},gap:{base:3,sm:4},py:3,children:[e.jsxs(et,{align:"start",spacing:2,children:[e.jsxs(ke,{align:"center",children:[e.jsx(de,{as:kn,mr:2,color:m}),e.jsxs(et,{spacing:0,align:"start",children:[e.jsx(V,{fontSize:"xs",color:b,children:"Current Day"}),e.jsx(V,{fontSize:"sm",color:x,children:t.currentDay})]})]}),e.jsxs(ke,{align:"center",children:[e.jsx(de,{as:Ps,mr:2,color:m}),e.jsxs(et,{spacing:0,align:"start",children:[e.jsx(V,{fontSize:"xs",color:b,children:"Time"}),e.jsx(V,{fontSize:"sm",color:x,children:k(t.currentTime)})]})]})]}),e.jsxs(et,{align:"start",spacing:2,children:[e.jsxs(ke,{align:"center",children:[e.jsx(de,{as:kn,mr:2,color:m}),e.jsxs(et,{spacing:0,align:"start",children:[e.jsx(V,{fontSize:"xs",color:b,children:"Desired Day"}),e.jsx(V,{fontSize:"sm",color:x,children:t.desiredDay})]})]}),e.jsxs(ke,{align:"center",children:[e.jsx(de,{as:Ps,mr:2,color:m}),e.jsxs(et,{spacing:0,align:"start",children:[e.jsx(V,{fontSize:"xs",color:b,children:"Time"}),e.jsx(V,{fontSize:"sm",color:x,children:k(t.desiredTime)})]})]})]})]}),t.reason&&e.jsxs(de,{mt:2,p:3,bg:se("gray.50","gray.700"),borderRadius:"md",children:[e.jsx(V,{fontSize:"sm",color:b,noOfLines:2,children:t.reason}),c&&t.applications&&t.applications.length>0&&e.jsxs(de,{pt:4,mt:4,borderTopWidth:"1px",borderColor:_,children:[e.jsx(ut,{size:"sm",mb:3,color:x,children:"Applicants"}),e.jsx(et,{spacing:4,align:"stretch",children:t.applications.map(H=>e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsxs(ke,{align:"center",children:[e.jsx(Tr,{size:"sm",name:H.user.username,src:H.user.avatar}),e.jsxs(de,{ml:3,children:[e.jsx(V,{fontWeight:"bold",color:x,children:H.user.username}),e.jsx(V,{fontSize:"sm",color:b,children:H.reason})]})]}),e.jsx(de,{textAlign:"right",children:H.status==="pending"?e.jsxs(at,{spacing:2,children:[e.jsx(Ee,{size:"xs",colorScheme:"green",onClick:()=>c(H.id,"approved"),children:"Approve"}),e.jsx(Ee,{size:"xs",colorScheme:"red",onClick:()=>c(H.id,"declined"),children:"Decline"})]}):e.jsx(Lr,{colorScheme:H.status==="approved"?"green":"red",children:H.status.charAt(0).toUpperCase()+H.status.slice(1)})})]},H.id))})]})]})]}),e.jsx(aa,{pt:3,children:e.jsxs(ke,{w:"100%",justify:"space-between",align:"center",direction:{base:"column",sm:"row"},gap:{base:3,sm:0},children:[e.jsxs(at,{spacing:2,children:[e.jsx(Tr,{size:"xs",src:t.requesterAvatar,name:t.requesterName}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:x,fontWeight:"medium",children:t.requesterName})]}),t.status==="pending"&&e.jsxs(at,{spacing:2,flexWrap:"wrap",justify:{base:"center",sm:"flex-end"},children:[h&&e.jsxs(e.Fragment,{children:[e.jsx(Ee,{size:{base:"xs",sm:"sm"},variant:"solid",colorScheme:"blue",onClick:()=>s(t.id),fontSize:{base:"xs",sm:"sm"},children:t.applications&&t.applications.length>0?`Applicants (${t.applications.length})`:"No Applicants"}),e.jsxs(yn,{children:[e.jsx(vn,{as:Mt,"aria-label":"More actions",icon:e.jsx(ss,{style:{transform:"rotate(-90deg)"}}),size:"sm",variant:"ghost"}),e.jsxs(wn,{children:[e.jsx(rr,{icon:e.jsx(io,{}),onClick:()=>i(t.id),children:"Cancel"}),e.jsx(rr,{icon:e.jsx(Fg,{}),onClick:()=>u(t),children:"Edit"}),e.jsx(rr,{icon:e.jsx(dl,{}),color:"red.500",onClick:()=>o(t.id),children:"Delete"})]})]})]}),!h&&w&&e.jsx(Ee,{size:{base:"xs",sm:"sm"},colorScheme:"gray",variant:"solid",isDisabled:!0,fontSize:{base:"xs",sm:"sm"},children:"Applied"}),!h&&!w&&typeof n=="function"&&e.jsx(Ee,{size:{base:"xs",sm:"sm"},colorScheme:"green",variant:"solid",leftIcon:e.jsx(Pi,{}),onClick:()=>n(t.id),fontSize:{base:"xs",sm:"sm"},children:"Apply"})]})]})})]})},gy=({application:t,onWithdraw:r})=>{const[n,i]=W.useState(!1),o=W.useRef(),s=se("white","gray.800"),a=se("gray.800","white"),c=se("gray.600","gray.400"),u=se("gray.100","gray.700"),h={pending:"orange",accepted:"green",declined:"red",cancelled:"gray"},p=t.request,x=(p==null?void 0:p.courseName)||`Request #${t.request_id}`,b=(p==null?void 0:p.currentSection)||"-",m=(p==null?void 0:p.desiredSection)||"-",_=(p==null?void 0:p.currentDay)||"-",w=(p==null?void 0:p.desiredDay)||"-",O=(p==null?void 0:p.currentTime)||"-",k=(p==null?void 0:p.desiredTime)||"-";return p!=null&&p.requesterAvatar,p!=null&&p.requesterName,e.jsxs(er,{bg:s,boxShadow:"sm",border:"1px solid",borderColor:u,borderRadius:"lg",overflow:"hidden",transition:"all 0.2s",_hover:{transform:"translateY(-2px)",boxShadow:"md"},children:[e.jsx(Lr,{position:"absolute",top:2,right:2,colorScheme:h[t.status],variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:t.status}),e.jsx(ao,{pb:3,pt:{base:8,md:4},children:e.jsx(ke,{justify:"space-between",align:"start",children:e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(ut,{size:{base:"xs",sm:"sm"},color:a,children:x}),e.jsxs(V,{fontSize:"xs",color:c,children:["Applied: ",new Date(t.createdAt).toLocaleDateString()]})]})})}),e.jsxs(ln,{py:0,children:[e.jsxs(pr,{templateColumns:{base:"1fr",sm:"repeat(2, 1fr)"},gap:{base:3,sm:4},py:3,children:[e.jsxs(et,{align:"start",spacing:2,children:[e.jsx(V,{fontSize:{base:"xs",sm:"sm"},fontWeight:"medium",color:a,children:"Current Section"}),e.jsx(Vn,{size:{base:"sm",sm:"md"},colorScheme:"blue",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:b}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:c,mt:2,children:"Current Day"}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:a,children:_}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:c,mt:2,children:"Current Time"}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:a,children:O})]}),e.jsxs(et,{align:"start",spacing:2,children:[e.jsx(V,{fontSize:{base:"xs",sm:"sm"},fontWeight:"medium",color:a,children:"Desired Section"}),e.jsx(Vn,{size:{base:"sm",sm:"md"},colorScheme:"green",variant:"subtle",minW:"max-content",fontSize:{base:"xs",sm:"sm"},children:m}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:c,mt:2,children:"Desired Day"}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:a,children:w}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:c,mt:2,children:"Desired Time"}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:a,children:k})]})]}),e.jsxs(de,{mt:2,p:{base:2,sm:3},bg:se("gray.50","gray.700"),borderRadius:"md",children:[e.jsx(V,{fontSize:{base:"xs",sm:"sm"},fontWeight:"medium",color:a,children:"Your Reason:"}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:c,children:t.reason})]})]}),e.jsx(aa,{pt:3,children:e.jsx(ke,{w:"100%",justify:"space-between",align:"center",children:r&&t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(Ee,{size:{base:"xs",sm:"sm"},colorScheme:"red",variant:"outline",onClick:()=>i(!0),"aria-label":"Withdraw Application",fontSize:{base:"xs",sm:"sm"},children:"Withdraw"}),e.jsx(la,{isOpen:n,leastDestructiveRef:o,onClose:()=>i(!1),children:e.jsx(kr,{children:e.jsxs(ca,{children:[e.jsx(Fr,{fontSize:"lg",fontWeight:"bold",children:"Withdraw Application"}),e.jsx(Ar,{children:"Are you sure you want to withdraw this application? This action cannot be undone."}),e.jsxs(Ur,{children:[e.jsx(Ee,{ref:o,onClick:()=>i(!1),children:"Cancel"}),e.jsx(Ee,{colorScheme:"red",ml:3,onClick:()=>{i(!1),r(t.id)},children:"Confirm"})]})]})})})]})})})]})},xy=W.forwardRef(({onEditRequest:t},r)=>{const{isOpen:n,onOpen:i,onClose:o}=Er(),s=Ir(),a=Vr(),{user:c}=ai(),{isOpen:u,onOpen:h,onClose:p}=Er(),{courses:x,coursesLoading:b,coursesError:m,coursesPage:_,coursesTotalPages:w,setCoursesPage:O}=P0({trigger:n||u}),k=se("gray.50","gray.900"),T=se("white","gray.800"),H=se("gray.800","white"),Z=se("gray.600","gray.400"),P=se("yellow.400","yellow.500"),D=se("gray.100","gray.700"),[B,G]=W.useState([]),[R,L]=W.useState(1),[j,A]=W.useState(1),[E,z]=W.useState("created_at"),[oe,re]=W.useState("desc"),[v,ne]=W.useState([]),[M,y]=W.useState(1),[Y,C]=W.useState(1),[q,N]=W.useState("created_at"),[$,Q]=W.useState("desc"),[ie,ue]=W.useState([]),[le,ge]=W.useState(1),[xe,ze]=W.useState(1),[Ie,We]=W.useState("created_at"),[be,ee]=W.useState("desc"),[Ae,Se]=W.useState(!0),[ce,Me]=W.useState({course_code:"",current_day:"",desired_day:""}),[Xe,Ze]=W.useState(!1);W.useImperativeHandle(r,()=>({fetchAvailableRequestsPaginated:Nt,fetchMyRequestsPaginated:Ct,fetchMyApplicationsPaginated:dt}));const[pt,Ue]=W.useState(!1),[Ce,ve]=W.useState(!1),[Pe,De]=W.useState(null),[_e,Fe]=W.useState(""),[Ne,st]=W.useState(!1),[Ge,ot]=W.useState([]),Nt=async(Ve=1,Ye=E,Et=oe)=>{Se(!0);try{const lt=await sy({page:Ve,sort_by:Ye,sort_order:Et});G(Array.isArray(lt.data)?lt.data.map(Ka):[]),A(lt.last_page||1),L(lt.current_page||1)}catch(lt){s({title:"Failed to load available requests",description:lt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{Se(!1)}},Ct=async(Ve=1,Ye=q,Et=$)=>{Se(!0);try{const lt=await ay({page:Ve,sort_by:Ye,sort_order:Et});let je=[];Array.isArray(lt.data)&&(je=lt.data.map(Ot=>Ka(Ot,c))),ne(je),C(lt.last_page||1),y(lt.current_page||1)}catch(lt){s({title:"Failed to load your requests",description:lt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{Se(!1)}},dt=async(Ve=1,Ye=Ie,Et=be)=>{Se(!0);try{const lt=await ly({page:Ve,sort_by:Ye,sort_order:Et});ze(lt.last_page||1),ge(lt.current_page||1);const je=lt.data||[],Ot=Array.isArray(je)?je.map(cr=>cr&&cr.request_id).filter(Boolean):[],Ht=await Promise.all(Ot.map(cr=>dy(cr).catch(()=>null))),sr={};Ht.forEach((cr,nn)=>{cr&&cr.id&&(sr[cr.id]=cr)});const jn=Array.isArray(je)?je.map(cr=>{const nn=Ff(cr),ye=cr&&cr.request?Ka(cr.request):cr&&sr[cr.request_id]?Ka(sr[cr.request_id]):void 0;return{...nn,request:ye}}):[];ue(jn)}catch(lt){s({title:"Failed to load applications",description:lt.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{Se(!1)}};W.useEffect(()=>{Nt(R,E,oe)},[R,E,oe]),W.useEffect(()=>{Ct(M,q,$)},[M,q,$]),W.useEffect(()=>{dt(le,Ie,be)},[le,Ie,be]);const mt=Ve=>{const{name:Ye,value:Et}=Ve.target;Me(lt=>({...lt,[Ye]:Et}))},zt=async()=>{Ze(!0);try{const Ve=await oy({course_name:ce.course_code,current_day:ce.current_day,desired_day:ce.desired_day});G(Array.isArray(Ve.data)?Ve.data.map(Ka):[]),p()}catch(Ve){s({title:"Failed to apply filters",description:Ve.message||"Please try again later",status:"error",duration:4e3,isClosable:!0})}finally{Ze(!1)}},Ft=async Ve=>{try{await py(Ve),ue(Ye=>Ye.filter(Et=>Et.id!==Ve)),Nt(),s({title:"Application withdrawn",description:"Your application has been successfully withdrawn.",status:"info",duration:3e3,isClosable:!0})}catch(Ye){s({title:"Failed to withdraw application",description:Ye.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},fr=async Ve=>{if(window.confirm("Are you sure you want to delete this request? This cannot be undone."))try{await uy(Ve),ne(Ye=>Ye.filter(Et=>Et.id!==Ve)),s({title:"Request deleted",status:"info",duration:3e3,isClosable:!0})}catch(Ye){s({title:"Failed to delete request",description:Ye.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},Te=Ve=>{De(Ve),Fe(""),Ue(!0)},He=async()=>{if(!Ne){st(!0);try{await hy(Pe,{reason:_e}),G(Ve=>Ve.map(Ye=>Ye.id===Pe?{...Ye,applications:[...Ye.applications||[],{id:Date.now().toString(),userId:c.id,userName:"You",userAvatar:td,reason:_e,createdAt:new Date().toISOString(),status:"pending"}]}:Ye)),await dt(),s({title:"Application submitted",description:"Your application has been submitted to the request owner.",status:"success",duration:3e3,isClosable:!0}),Ue(!1),Fe(""),De(null)}catch(Ve){s({title:"Failed to submit application",description:Ve.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}finally{st(!1)}}},tt=async Ve=>{try{const Ye=await fy(Ve);De(Ve),ot(Ye.map(Ff)),ve(!0)}catch(Ye){s({title:"Failed to load applications",description:Ye.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},rt=async Ve=>{try{await zf(Ve,{status:"accepted"});const Ye=Ge.map(Et=>Et.id===Ve?{...Et,status:"accepted"}:{...Et,status:Et.status==="pending"?"declined":Et.status});ot(Ye),ne(Et=>Et.map(lt=>lt.id===Pe?{...lt,status:"accepted",applications:Ye}:lt)),ve(!1),s({title:"Application accepted",description:"You have accepted the application for your class exchange request.",status:"success",duration:3e3,isClosable:!0})}catch(Ye){s({title:"Failed to accept application",description:Ye.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},gt=async Ve=>{try{await zf(Ve,{status:"declined"});const Ye=Ge.map(Et=>Et.id===Ve?{...Et,status:"declined"}:Et);ot(Ye),ne(Et=>Et.map(lt=>lt.id===Pe?{...lt,applications:Ye}:lt)),s({title:"Application declined",description:"You have declined the application for your class exchange request.",status:"info",duration:3e3,isClosable:!0})}catch(Ye){s({title:"Failed to decline application",description:Ye.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},jt=async Ve=>{try{await L0(Ve,{status:"cancelled"}),ne(Ye=>Ye.map(Et=>Et.id===Ve?{...Et,status:"cancelled"}:Et)),s({title:"Request cancelled",description:"Your class exchange request has been cancelled.",status:"info",duration:3e3,isClosable:!0})}catch(Ye){s({title:"Failed to cancel request",description:Ye.message||"Please try again later",status:"error",duration:5e3,isClosable:!0})}},It=()=>{a(-1)};return e.jsxs(de,{minH:"100vh",bg:k,p:{base:2,sm:4,md:6},children:[e.jsxs(bi,{maxW:"7xl",children:[e.jsxs(ke,{mb:{base:4,md:8},align:"center",children:[e.jsx(Mt,{icon:e.jsx(ss,{}),onClick:It,"aria-label":"Go back",variant:"ghost",color:H,size:{base:"md",md:"lg"},mr:{base:2,md:3},_hover:{bg:se("gray.100","gray.700")}}),e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(ut,{size:{base:"md",md:"lg"},color:H,children:"Class Exchange Requests"}),e.jsx(V,{fontSize:{base:"xs",sm:"sm"},color:Z,display:{base:"none",sm:"block"},children:"Manage your class time exchange requests"})]})]}),e.jsxs(de,{bg:T,borderRadius:"xl",boxShadow:"sm",borderWidth:"1px",borderColor:D,children:[e.jsxs(ke,{justify:"flex-end",p:{base:3,md:6},borderBottomWidth:"1px",borderColor:D,gap:{base:2,md:3},flexWrap:"wrap",children:[e.jsx(Ee,{colorScheme:"yellow",leftIcon:e.jsx(qc,{}),onClick:h,size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Filters"}),e.jsx(Ee,{leftIcon:e.jsx(Jn,{}),onClick:i,colorScheme:"yellow",size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"New Request"})]}),e.jsxs(cn,{isOpen:u,onClose:p,isCentered:!0,children:[e.jsx(kr,{}),e.jsxs(dn,{children:[e.jsx(Fr,{children:"Filter Requests"}),e.jsx(rn,{}),e.jsx(Ar,{children:e.jsxs(yr,{spacing:4,children:[e.jsxs(ht,{children:[e.jsx(ft,{children:"Course"}),e.jsxs(yn,{isLazy:!0,children:[e.jsx(vn,{as:Ee,width:"100%",rightIcon:e.jsx("span",{style:{marginLeft:8},children:"▼"}),isLoading:b,isDisabled:b||!!m,textAlign:"left",children:ce.course_code?(()=>{const Ve=x.find(Ye=>Ye.code===ce.course_code);return Ve?`${Ve.code} - ${Ve.title}`:ce.course_code})():b?"Loading courses...":"Select course"}),e.jsxs(wn,{maxH:"250px",overflowY:"auto",minW:"250px",px:0,children:[m?e.jsx(rr,{isDisabled:!0,children:"Failed to load courses"}):x.length===0&&!b?e.jsx(rr,{isDisabled:!0,children:"No courses found"}):x.map(Ve=>e.jsx(rr,{value:Ve.title,onClick:()=>Me(Ye=>({...Ye,course_code:Ve.code})),_active:{bg:"gray.100"},_selected:{fontWeight:"bold",bg:"gray.200"},style:ce.course_code===Ve.code?{fontWeight:"bold",background:"#f7fafc"}:{},children:Ve.code?`${Ve.code} - ${Ve.title}`:Ve.title},Ve.id)),e.jsx(de,{borderTop:"1px solid #eee",mt:2,pt:2,px:2,children:e.jsxs(ke,{justify:"space-between",align:"center",children:[e.jsx(Ee,{size:"xs",onClick:Ve=>{Ve.stopPropagation(),O(Ye=>Math.max(1,Ye-1))},isDisabled:b||_<=1,children:"Prev"}),e.jsxs(V,{fontSize:"xs",children:["Page ",_," of ",w]}),e.jsx(Ee,{size:"xs",onClick:Ve=>{Ve.stopPropagation(),O(Ye=>Math.min(w,Ye+1))},isDisabled:b||_>=w,children:"Next"})]})})]})]})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Current Day"}),e.jsxs(Li,{placeholder:"Select current day",name:"current_day",value:ce.current_day,onChange:mt,children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Desired Day"}),e.jsxs(Li,{placeholder:"Select desired day",name:"desired_day",value:ce.desired_day,onChange:mt,children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]})]})}),e.jsxs(Ur,{children:[e.jsx(Ee,{onClick:p,mr:3,variant:"ghost",children:"Cancel"}),e.jsx(Ee,{colorScheme:"yellow",onClick:zt,isLoading:Xe,children:"Apply Filters"})]})]})]}),e.jsxs(sa,{variant:"soft-rounded",colorScheme:"yellow",children:[e.jsxs(oa,{px:{base:2,md:6},pt:4,pb:2,mb:4,overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",css:{"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:se("gray.300","gray.600"),borderRadius:"2px"}},children:[e.jsx(Yn,{fontSize:{base:"xs",sm:"sm"},px:{base:3,sm:4},_selected:{fontWeight:"semibold",color:H,bg:`${P}20`},children:"Available"}),e.jsxs(Yn,{fontSize:{base:"xs",sm:"sm"},px:{base:3,sm:4},_selected:{fontWeight:"semibold",color:H,bg:`${P}20`},children:["My Requests (",v.length,")"]}),e.jsx(Yn,{fontSize:{base:"xs",sm:"sm"},px:{base:3,sm:4},_selected:{fontWeight:"semibold",color:H,bg:`${P}20`},children:"My Applications"})]}),e.jsxs(al,{px:{base:2,md:6},py:0,children:[e.jsx(oi,{p:0,children:Ae?e.jsx(ke,{justify:"center",py:10,children:e.jsx(en,{size:"xl"})}):B.length>0?e.jsxs(e.Fragment,{children:[e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:{base:4,md:6},children:B.map(Ve=>e.jsx(If,{request:Ve,userId:c.id,onApply:Te,onViewApplications:tt,onEdit:t,onDelete:fr},Ve.id))}),e.jsx(Fc,{currentPage:R,totalPages:j,onPageChange:L,isLoading:Ae})]}):e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:D,borderRadius:"lg",children:e.jsx(V,{color:Z,children:"No available requests at this time"})})}),e.jsx(oi,{p:0,children:Ae?e.jsx(ke,{justify:"center",py:10,children:e.jsx(en,{size:"xl"})}):v.length>0?e.jsxs(e.Fragment,{children:[e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:{base:4,md:6},children:v.map(Ve=>e.jsx(If,{request:Ve,userId:c.id,onCancel:jt,onDelete:fr,onViewApplications:tt,onEdit:t},Ve.id))}),e.jsx(Fc,{currentPage:M,totalPages:Y,onPageChange:y,isLoading:Ae})]}):e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:D,borderRadius:"lg",children:e.jsx(V,{color:Z,children:"No personal requests found"})})}),e.jsx(oi,{p:0,children:Ae?e.jsx(ke,{justify:"center",py:10,children:e.jsx(en,{size:"xl"})}):ie.length>0?e.jsxs(e.Fragment,{children:[e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"},gap:{base:4,md:6},mb:6,children:ie.map(Ve=>e.jsx(gy,{application:Ve,onWithdraw:Ft},Ve.id))}),e.jsx(ke,{justify:"center",mt:6,mb:4,children:e.jsxs(Vm,{isAttached:!0,variant:"outline",size:"sm",children:[e.jsx(Mt,{icon:e.jsx(ss,{}),isDisabled:le<=1,onClick:()=>ge(Ve=>Math.max(Ve-1,1)),"aria-label":"Previous page"}),e.jsxs(Ee,{isDisabled:!0,children:["Page ",le," of ",xe]}),e.jsx(Mt,{icon:e.jsx(co,{}),isDisabled:le>=xe,onClick:()=>ge(Ve=>Math.min(Ve+1,xe)),"aria-label":"Next page"})]})})]}):e.jsx(de,{p:12,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:D,borderRadius:"lg",children:e.jsx(V,{color:Z,children:"No applications submitted yet"})})})]})]})]})]}),e.jsx(N0,{isOpen:n,onClose:o,mode:"create",initialData:{},onSubmit:async Ve=>{var Ye,Et;try{const lt=await cy({course_name:Ve.courseName,current_section:Ve.currentSection,desired_section:Ve.desiredSection,current_day:Ve.currentDay,current_time:Ve.currentTime,desired_day:Ve.desiredDay,desired_time:Ve.desiredTime,reason:Ve.reason});await Nt(),await Ct(),s({title:"Request created",description:"Your class exchange request has been submitted.",status:"success",duration:3e3,isClosable:!0}),o()}catch(lt){throw s({title:"Failed to create request",description:((Et=(Ye=lt.response)==null?void 0:Ye.data)==null?void 0:Et.message)||"Please try again later",status:"error",duration:5e3,isClosable:!0}),lt}},courses:x,coursesLoading:b,coursesError:m,coursesPage:_,coursesTotalPages:w,onCoursePageChange:O}),e.jsxs(cn,{isOpen:pt,onClose:()=>Ue(!1),size:"md",children:[e.jsx(kr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(dn,{bg:T,borderRadius:"xl",children:[e.jsx(Fr,{color:H,children:"Apply for Class Exchange"}),e.jsx(rn,{}),e.jsxs(Ar,{children:[e.jsxs(et,{spacing:4,align:"stretch",children:[e.jsx(V,{fontSize:"sm",color:Z,children:"Submit your application to exchange class times with the requester. The requester will review all applications and select one to accept."}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{color:H,children:"Why do you want to exchange?"}),e.jsx(Qn,{value:_e,onChange:Ve=>Fe(Ve.target.value),placeholder:"Explain why this exchange works for you...",color:H,resize:"vertical",rows:3})]})]}),e.jsxs(ke,{justify:"flex-end",mt:6,gap:3,children:[e.jsx(Ee,{variant:"ghost",onClick:()=>Ue(!1),children:"Cancel"}),e.jsx(Ee,{type:"button",colorScheme:"green",isDisabled:!_e.trim()||Ne,isLoading:Ne,onClick:He,children:"Submit Application"})]})]})]})]}),e.jsxs(cn,{isOpen:Ce,onClose:()=>ve(!1),size:"xl",children:[e.jsx(kr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(dn,{bg:T,borderRadius:"xl",children:[e.jsx(Fr,{color:H,children:"Applications for Your Request"}),e.jsx(rn,{}),e.jsx(Ar,{children:Ge.length>0?e.jsx(et,{spacing:4,align:"stretch",children:Ge.map(Ve=>{var Ye;return e.jsxs(er,{p:4,borderRadius:"md",borderWidth:"1px",borderColor:D,position:"relative",children:[Ve.status!=="pending"&&e.jsx(Lr,{position:"absolute",top:2,right:2,colorScheme:Ve.status==="accepted"?"green":"red",variant:"solid",borderRadius:"md",px:2,textTransform:"capitalize",fontSize:"xs",children:Ve.status}),e.jsxs(ke,{mb:3,children:[e.jsx(Tr,{size:"sm",src:Ve.userAvatar,name:(Ye=Ve.user)==null?void 0:Ye.name,mr:3}),e.jsxs(et,{align:"start",spacing:0,children:[e.jsx(V,{fontWeight:"medium",color:H,children:Ve.userName}),e.jsxs(V,{fontSize:"xs",color:Z,children:["Applied: ",new Date(Ve.createdAt).toLocaleDateString()]})]})]}),e.jsx(de,{p:3,bg:se("gray.50","gray.700"),borderRadius:"md",mb:3,children:e.jsx(V,{fontSize:"sm",color:Z,children:Ve.reason})}),Ve.status==="pending"&&e.jsxs(ke,{justifyContent:"flex-end",gap:2,children:[e.jsx(Ee,{size:"sm",colorScheme:"green",onClick:()=>rt(Ve.id),children:"Accept"}),e.jsx(Ee,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>gt(Ve.id),children:"Decline"})]})]},Ve.id)})}):e.jsx(de,{p:8,textAlign:"center",borderWidth:"2px",borderStyle:"dashed",borderColor:D,borderRadius:"lg",children:e.jsx(V,{color:Z,children:"No applications received yet"})})}),e.jsx(Ur,{children:e.jsx(Ee,{onClick:()=>ve(!1),children:"Close"})})]})]})]})});function N0({isOpen:t,onClose:r,mode:n="create",initialData:i={},onSubmit:o,courses:s=[],coursesLoading:a=!1,coursesError:c=null,coursesPage:u=1,coursesTotalPages:h=1,onCoursePageChange:p}){var T,H,Z,P;const x={id:"",courseName:"",currentSection:"",desiredSection:"",currentDay:"",currentTime:"",desiredDay:"",desiredTime:"",reason:""},[b,m]=W.useState({...x,...i}),[_,w]=W.useState(!1);W.useEffect(()=>{m({...x,...i})},[i]);const O=D=>{const{name:B,value:G}=D.target;m(R=>({...R,[B]:G}))},k=async D=>{D.preventDefault(),w(!0);try{await o(b)}catch{}finally{w(!1)}};return e.jsxs(cn,{isOpen:t,onClose:r,size:"lg",children:[e.jsx(kr,{bg:"blackAlpha.300",backdropFilter:"blur(5px)"}),e.jsxs(dn,{borderRadius:"xl",children:[e.jsx(Fr,{children:n==="edit"?"Edit Exchange Request":"Create Exchange Request"}),e.jsx(rn,{}),e.jsxs(Ar,{children:[e.jsxs(eo,{status:"info",variant:"left-accent",mb:4,borderRadius:"md",children:[e.jsx(to,{}),e.jsx(V,{fontSize:"sm",children:"You can only make up to 2 exchange requests per day."})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs(yr,{spacing:4,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Course"}),e.jsxs(yn,{isLazy:!0,children:[e.jsx(vn,{as:Ee,w:"100%",rightIcon:e.jsx("span",{style:{marginLeft:8},children:"▼"}),isLoading:a,isDisabled:a,variant:"outline",textAlign:"left",children:b.courseName?(T=s.find(D=>(D.code||D.name)===b.courseName))!=null&&T.code?`${(H=s.find(D=>(D.code||D.name)===b.courseName))==null?void 0:H.code} - ${(Z=s.find(D=>(D.code||D.name)===b.courseName))==null?void 0:Z.title}`:(P=s.find(D=>(D.code||D.name)===b.courseName))==null?void 0:P.name:a?"Loading courses...":"Select course"}),e.jsxs(wn,{maxH:"320px",overflowY:"auto",minW:"320px",px:0,children:[c&&e.jsx(de,{px:4,py:2,children:e.jsx(V,{color:"red.500",fontSize:"sm",children:c})}),a?e.jsx(de,{px:4,py:2,children:e.jsx(V,{fontSize:"sm",children:"Loading..."})}):s.length===0?e.jsx(de,{px:4,py:2,children:e.jsx(V,{fontSize:"sm",color:"gray.500",children:"No courses found."})}):s.map(D=>e.jsx(rr,{value:D.code||D.name,onClick:()=>m(B=>({...B,courseName:D.code||D.name})),bg:(D.code||D.name)===b.courseName?"blue.50":void 0,fontWeight:(D.code||D.name)===b.courseName?"bold":"normal",children:D.code?`${D.code} - ${D.title}`:D.name},D.id||D.code)),e.jsx(de,{borderTop:"1px solid",borderColor:"gray.100",mt:2,px:2,py:1,children:e.jsx(Fc,{currentPage:u,totalPages:h,onPageChange:p,isLoading:a})})]})]})]}),e.jsxs(pr,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Current Section"}),e.jsx(Pt,{name:"currentSection",value:b.currentSection,onChange:O,placeholder:"e.g., A, B, C"})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Desired Section"}),e.jsx(Pt,{name:"desiredSection",value:b.desiredSection,onChange:O,placeholder:"e.g., B, C, D"})]})]}),e.jsxs(pr,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Current Day"}),e.jsxs(Li,{name:"currentDay",value:b.currentDay,onChange:O,placeholder:"Select day",children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Current Time"}),e.jsx(Pt,{name:"currentTime",value:b.currentTime,onChange:O,type:"time"})]})]}),e.jsxs(pr,{templateColumns:"repeat(2, 1fr)",gap:4,children:[e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Desired Day"}),e.jsxs(Li,{name:"desiredDay",value:b.desiredDay,onChange:O,placeholder:"Select day",children:[e.jsx("option",{value:"Monday",children:"Monday"}),e.jsx("option",{value:"Tuesday",children:"Tuesday"}),e.jsx("option",{value:"Wednesday",children:"Wednesday"}),e.jsx("option",{value:"Thursday",children:"Thursday"}),e.jsx("option",{value:"Friday",children:"Friday"})]})]}),e.jsxs(ht,{isRequired:!0,children:[e.jsx(ft,{children:"Desired Time"}),e.jsx(Pt,{name:"desiredTime",value:b.desiredTime,onChange:O,type:"time"})]})]}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Reason (Optional)"}),e.jsx(Qn,{name:"reason",value:b.reason,onChange:O,placeholder:"Explain why you need to exchange class times...",resize:"vertical",rows:2})]})]}),e.jsxs(ke,{justify:"flex-end",mt:6,gap:3,children:[e.jsx(Ee,{variant:"ghost",onClick:r,children:"Cancel"}),e.jsx(Ee,{type:"submit",colorScheme:n==="edit"?"blue":"yellow",isLoading:_,children:n==="edit"?"Update":"Create Request"})]})]})]})]})]})}function by(t){const r=W.useRef(),n=Ir(),{courses:i,coursesLoading:o,coursesError:s,coursesPage:a,coursesTotalPages:c,setCoursesPage:u}=P0({trigger:t.editRequestModalOpen}),[h,p]=W.useState(!1),[x,b]=W.useState(null),[m,_]=W.useState(!1),w=k=>{b(k),p(!0)},O=async k=>{_(!0);try{const T={course_name:k.courseName,current_section:k.currentSection,desired_section:k.desiredSection,current_day:k.currentDay,desired_day:k.desiredDay,current_time:k.currentTime,desired_time:k.desiredTime,reason:k.reason};await L0(k.id,T),p(!1),b(null),r.current&&(r.current.fetchAvailableRequestsPaginated(),r.current.fetchMyRequestsPaginated()),n({title:"Request updated",status:"success",duration:3e3,isClosable:!0})}catch(T){n({title:"Failed to update request",description:T.message,status:"error",duration:4e3,isClosable:!0})}finally{_(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(xy,{ref:r,onEditRequest:w}),e.jsx(N0,{isOpen:h,onClose:()=>p(!1),mode:"edit",initialData:x||{},onSubmit:O,isLoading:m,courses:i,coursesLoading:o,coursesError:s,coursesPage:a,coursesTotalPages:c,onCoursePageChange:u})]})}const Mf=({textColor:t,mutedText:r,isCollapsed:n,onClose:i})=>{const{user:o}=ai(),s=se("rgba(250, 202, 21, 0.3)","rgba(202, 162, 18, 0.3)"),a=Vr(),c=ll(),u=localStorage.getItem("role"),h=(u||"").toLowerCase(),p=h==="admin"||h==="moderator",x=ia({base:!0,md:!1}),b=[{icon:Hg,label:"Home",path:"/dashboard"},{icon:Bc,label:"Resources",path:"/resources"},{icon:qn,label:"Study Groups",path:"/study-groups"},{icon:kn,label:"Events",path:"/events"},{icon:ju,label:"Clubs",path:"/clubs"},{icon:zg,label:"Grade Calculator",path:"/grade-calculator",hideOnMobile:!0},{icon:$g,label:"Requests",path:"/requests"},...p?[{icon:n1,label:"Moderate Resources",path:"/resource-moderation"}]:[]],m=w=>{a(w),i&&i()},_=w=>c.pathname===w||c.pathname.startsWith(w+"/");return e.jsxs(ke,{direction:"column",h:"100%",justify:"space-between",children:[e.jsxs(de,{children:[e.jsx(bn,{py:4,mb:2,children:e.jsx("img",{src:xi,alt:"maaref Logo",style:{maxWidth:n?"40px":"60px",height:"auto",transition:"max-width 0.3s ease",cursor:"pointer"},onClick:()=>m("/dashboard")})}),e.jsx(yr,{spacing:3,px:n?1:3,children:b.filter(w=>!(w.hideOnMobile&&x)).map(w=>e.jsx(gi,{label:w.label,placement:"right",isDisabled:!n,hasArrow:!0,children:e.jsxs(Ee,{leftIcon:n?null:e.jsx(w.icon,{}),justifyContent:n?"center":"flex-start",variant:"ghost",color:t,bg:_(w.path)?s:"transparent",onClick:()=>m(w.path),_hover:{bg:s},px:n?2:4,w:"full",size:"md",children:[!n&&w.label,n&&e.jsx(w.icon,{})]})},w.path))}),e.jsxs(de,{mt:6,children:[!n&&e.jsx(V,{px:3,fontSize:"xs",fontWeight:"medium",textTransform:"uppercase",color:r,mb:2,children:"Personal"}),e.jsx(tn,{mb:3,opacity:.3}),e.jsx(yr,{spacing:3,px:n?1:3,children:e.jsx(gi,{label:"Saved",placement:"right",isDisabled:!n,hasArrow:!0,children:e.jsxs(Ee,{leftIcon:n?null:e.jsx($i,{}),justifyContent:n?"center":"flex-start",variant:"ghost",color:t,bg:_("/saved-resources")?s:"transparent",onClick:()=>m("/saved-resources"),_hover:{bg:s},px:n?2:4,w:"full",size:"md",children:[!n&&"Saved",n&&e.jsx($i,{})]})})})]})]}),e.jsxs(de,{px:n?1:3,py:4,mt:"auto",children:[e.jsx(tn,{mb:4}),e.jsxs(yn,{placement:"top-end",strategy:"fixed",offset:[0,10],children:[e.jsx(vn,{as:Ee,variant:"ghost",w:"full",py:2,borderRadius:"md",textAlign:"left",_hover:{bg:s},children:e.jsxs(at,{spacing:3,justify:n?"center":"flex-start",children:[e.jsx(Tr,{size:"sm",name:o?`${o.first_name} ${o.last_name}`:"User",src:(o==null?void 0:o.avatar_url)||(o==null?void 0:o.avatar)}),!n&&e.jsxs(de,{children:[e.jsx(V,{fontSize:"sm",fontWeight:"medium",color:t,children:o?`${o.first_name} ${o.last_name}`:"Guest"}),e.jsx(V,{fontSize:"xs",color:r,children:u})]}),!n&&e.jsx(ct,{as:is,ml:"auto",fontSize:"sm",color:t})]})}),e.jsxs(wn,{zIndex:1500,shadow:"xl",children:[e.jsx(rr,{icon:e.jsx(r1,{}),onClick:()=>m("/settings"),children:"Settings"}),e.jsx(tn,{}),e.jsx(rr,{icon:e.jsx(Yg,{}),onClick:()=>{eh()},children:"Sign Out"})]})]})]})]})},yy=lp`
  0% { transform: rotate(0); }
  10% { transform: rotate(15deg); }
  20% { transform: rotate(-15deg); }
  30% { transform: rotate(7deg); }
  40% { transform: rotate(-7deg); }
  50% { transform: rotate(0); }
  100% { transform: rotate(0); }
`,vy=()=>{var B,G;const{isOpen:t,onOpen:r,onClose:n}=Er(),{unreadNotifications:i,unreadCount:o,loading:s,error:a,markAsRead:c,markAllAsRead:u}=A0(),h=Ym(),p=se("white","gray.800"),x=se("gray.200","gray.600"),b=se("gray.50","gray.700"),m=se("brand.navy","white"),_=se("gray.600","gray.400"),w=se("brand.gold","brand.goldDark"),O=se("brand.navy","brand.navyDark"),k=se("0 4px 20px rgba(0, 0, 0, 0.1)","0 4px 20px rgba(0, 0, 0, 0.3)"),T=`${yy} 1s ease-in-out`,H=se(`0 0 8px ${((B=h.colors.brand)==null?void 0:B.gold)||"#F2D944"}`,`0 0 8px ${((G=h.colors.brand)==null?void 0:G.goldDark)||"#D9C226"}`),Z=W.useRef(),[P,D]=W.useState(!1);return W.useEffect(()=>{if(o>0){D(!0);const R=setTimeout(()=>D(!1),1e3);return()=>clearTimeout(R)}},[o]),e.jsxs(Jm,{isOpen:t,onOpen:r,onClose:n,placement:"bottom-end",initialFocusRef:Z,closeOnBlur:!0,gutter:1,strategy:"fixed",children:[e.jsx(Xm,{children:e.jsxs(de,{position:"relative",display:"inline-block",children:[e.jsx(Mt,{icon:e.jsx(Ko,{size:20}),"aria-label":"Notifications",variant:"ghost",position:"relative",animation:P?T:void 0,_hover:{transform:"scale(1.05)",bg:`${w}20`,transition:"all 0.2s ease-in-out"},transition:"all 0.2s ease-in-out",borderRadius:"full"}),o>0&&e.jsx(Lr,{position:"absolute",top:"-2px",right:"-2px",bg:w,color:O,borderRadius:"full",boxSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"xs",fontWeight:"bold",boxShadow:P?H:"none",transition:"box-shadow 0.3s ease-in-out",border:"2px solid",borderColor:p,zIndex:2,children:o})]})}),e.jsxs(Km,{w:{base:"300px",sm:"350px"},maxH:"450px",bg:p,borderColor:x,boxShadow:k,borderRadius:"xl",_focus:{outline:"none"},overflow:"hidden",children:[e.jsx(Qm,{bg:p}),e.jsx(Zm,{color:m,size:"md"}),e.jsx(eg,{borderBottom:"1px solid",borderColor:x,p:4,fontWeight:"bold",color:m,bg:se("gray.50","gray.750"),children:e.jsx(ke,{justify:"space-between",align:"center",children:e.jsxs(at,{spacing:2,children:[e.jsx(ct,{as:Ko,color:w}),e.jsx(V,{fontSize:"md",children:"Notifications"})]})})}),e.jsx(tg,{p:0,overflowY:"auto",maxH:"300px",children:s?e.jsx(bn,{py:10,children:e.jsx(V,{color:_,children:"Loading notifications..."})}):a?e.jsx(bn,{py:10,children:e.jsx(V,{color:"red.400",children:a})}):i.length>0?e.jsx(et,{spacing:0,align:"stretch",divider:e.jsx(tn,{borderColor:x}),children:i.map(R=>e.jsx(de,{p:4,position:"relative",bg:R.isRead?"transparent":`${w}10`,_hover:{bg:b},transition:"all 0.2s",cursor:"pointer",onClick:()=>c(R.id),borderLeft:"3px solid",borderLeftColor:R.isRead?"transparent":w,children:e.jsxs(ke,{align:"center",children:[e.jsxs(de,{position:"relative",children:[e.jsx(Tr,{size:"md",name:R.user,border:"2px solid",borderColor:R.isRead?x:w}),!R.isRead&&e.jsx(Lr,{position:"absolute",top:"-1",right:"-1",bg:w,boxSize:"8px",borderRadius:"full",border:"2px solid",borderColor:p})]}),e.jsxs(de,{ml:4,flex:"1",children:[e.jsxs(ke,{align:"baseline",justify:"space-between",children:[e.jsx(V,{fontWeight:R.isRead?"medium":"bold",fontSize:"sm",color:m,noOfLines:1,children:R.user}),e.jsx(V,{fontSize:"xs",color:_,children:R.time})]}),e.jsx(V,{fontSize:"sm",color:R.isRead?_:m,mt:1,noOfLines:2,children:R.content})]})]})},R.id))}):e.jsx(bn,{py:10,children:e.jsxs(et,{spacing:2,children:[e.jsx(de,{p:3,borderRadius:"full",bg:`${w}20`,children:e.jsx(ct,{as:Ko,fontSize:"xl",color:w})}),e.jsx(V,{fontWeight:"medium",color:m,children:"No notifications"}),e.jsx(V,{fontSize:"sm",color:_,textAlign:"center",children:"You're all caught up!"})]})})}),e.jsx(rg,{p:0,borderTop:"1px solid",borderColor:x,children:e.jsx(Ee,{as:Hi,to:"/notifications",ref:Z,variant:"ghost",size:"md",color:O,_hover:{bg:`${w}20`},fontWeight:"medium",width:"100%",height:"50px",borderRadius:"0",rightIcon:e.jsx(co,{}),onClick:n,children:"See All Notifications"})})]})]})},wy=({isMobile:t,onLeftOpen:r,colorMode:n,toggleColorMode:i})=>(Vr(),se("white","gray.800"),se("gray.200","gray.700"),se("rgba(250, 202, 21, 0.3)","rgba(202, 162, 18, 0.3)"),e.jsxs(ke,{align:"center",gap:2,ml:"auto",children:[e.jsx(gi,{label:n==="light"?"Dark mode":"Light mode",children:e.jsx(Mt,{size:"md",variant:"ghost",icon:n==="light"?e.jsx(Kg,{}):e.jsx(i1,{}),onClick:i,"aria-label":`Toggle ${n==="light"?"Dark":"Light"} Mode`})}),e.jsx(vy,{})]})),jy=()=>{const{colorMode:t,toggleColorMode:r}=cp(),n=ia({base:!0,lg:!1}),i=se("white","gray.800"),o=se("gray.800","whiteAlpha.900"),s=se("gray.600","gray.400"),a=se("gray.200","gray.700"),c=se("gray.50","gray.900");se("blue.600","blue.400"),se("yellow.400","yellow.500");const u=se("gray.100","gray.700"),[h,p]=W.useState(!1),x=()=>p(!h),{isOpen:b,onOpen:m,onClose:_}=Er();return Er(),e.jsxs(ke,{direction:{base:"column",lg:"row"},width:"100%",bg:c,minH:"100vh",children:[!n&&e.jsxs(de,{bg:i,borderRight:"1px solid",borderColor:a,width:h?"70px":"240px",flexShrink:0,display:{base:"none",lg:"block"},position:"fixed",left:0,top:0,transition:"width 0.3s ease",height:"100vh",overflowY:"auto",overflowX:"hidden",zIndex:20,px:h?2:4,py:4,css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px"},"&::-webkit-scrollbar-thumb":{background:"gray.300",borderRadius:"24px"}},children:[e.jsx(Mt,{icon:h?e.jsx(co,{}):e.jsx(ss,{}),position:"absolute",right:"-12px",top:"20px",size:"sm",borderRadius:"full",bg:i,borderWidth:"1px",borderColor:a,zIndex:30,onClick:x,"aria-label":h?"Expand sidebar":"Collapse sidebar",boxShadow:"sm"}),e.jsx(Mf,{textColor:o,mutedText:s,highlightBg:u,isCollapsed:h})]}),e.jsxs(de,{flexGrow:1,overflowY:"auto",ml:{base:0,lg:h?"70px":"240px"},transition:"margin-left 0.3s ease",children:[e.jsxs(ke,{direction:{base:"column",md:"row"},align:{base:"flex-start",md:"center"},justify:"space-between",mb:4,gap:4,px:6,py:4,bg:i,borderBottom:"1px solid",borderColor:a,children:[e.jsx(ke,{align:"center",gap:2,children:n&&e.jsx(Mt,{icon:e.jsx(Jg,{}),variant:"ghost",onClick:m,"aria-label":"Open menu",mr:2})}),e.jsx(wy,{isMobile:n,onLeftOpen:m,colorMode:t,toggleColorMode:r})]}),e.jsx(de,{p:{base:4,md:6},children:e.jsx(dp,{})})]}),e.jsxs(ng,{isOpen:b,placement:"left",onClose:_,children:[e.jsx(kr,{}),e.jsxs(ig,{bg:i,children:[e.jsx(rn,{}),e.jsx(Ar,{p:4,pt:12,children:e.jsx(Mf,{textColor:o,mutedText:s,highlightBg:u,isCollapsed:!1,onClose:_})})]})]})]})},Sy=()=>{const t=se("gray.50","gray.800"),r=se("gray.600","gray.300"),n=se("brand.navy","white");return e.jsx(de,{bg:t,minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:e.jsxs(et,{spacing:8,textAlign:"center",maxW:"xl",children:[e.jsx(ut,{fontSize:{base:"6xl",md:"8xl"},fontWeight:"bold",color:n,children:"404"}),e.jsx(Cr,{src:xi,alt:"Page not found",boxSize:{base:"400px",md:"300px"}}),e.jsx(ut,{size:"xl",color:n,children:"Page Not Found"}),e.jsx(V,{fontSize:"lg",color:r,children:"The page you're looking for doesn't exist or has been moved."}),e.jsx(Ee,{as:Hi,to:"/dashboard",variant:"primary",size:"lg",mt:4,children:"Return to Dashboard"})]})})};function Cy(t){return wt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm32 160a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM96 352a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM64 416c0-17.7 14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32zM192 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zm64-64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM288 448a32 32 0 1 1 0-64 32 32 0 1 1 0 64z"},child:[]}]})(t)}const Df=[{id:1,name:"Partial Exam 1",weight:15,grade:""},{id:2,name:"Partial Exam 2",weight:15,grade:""},{id:3,name:"Quizzes (Avg)",weight:15,grade:""},{id:4,name:"Assignment",weight:10,grade:""},{id:5,name:"Attendance",weight:5,grade:""},{id:6,name:"Participation",weight:5,grade:""},{id:7,name:"Final Exam",weight:35,grade:""}],_y=t=>t>=95?"A+":t>=90?"A":t>=85?"B+":t>=80?"B":t>=75?"C+":t>=70?"C":t>=65?"D+":t>=60?"D":"F",ky=()=>{const t=Ir(),[r,n]=W.useState(Df),[i,o]=W.useState(70),[s,a]=W.useState(null),[c,u]=W.useState(7),[h,p]=W.useState(7),x=W.useMemo(()=>r.reduce((P,D)=>P+Number(D.weight||0),0),[r]),b=(P,D,B)=>{let G=B;if((D==="weight"||D==="grade")&&B!==""){const R=Number(B);if(isNaN(R)||R<0||R>100)return;G=R}n(r.map(R=>R.id===P?{...R,[D]:G}:R)),a(null)},m=()=>{n([...r,{id:c,name:"",weight:0,grade:""}]),u(c+1)},_=P=>{P===h&&p(null),n(r.filter(D=>D.id!==P)),a(null)},w=()=>{if(x!==100){t({title:"Invalid Weights",description:`Total weight must be 100%, but it is currently ${x}%.`,status:"error",duration:5e3,isClosable:!0});return}const P=h?r.find(B=>B.id===h):null;if(P&&P.grade!==""){let B=0;r.forEach(R=>{const L=parseFloat(R.grade),j=parseFloat(R.weight);!isNaN(L)&&!isNaN(j)&&(B+=L*j/100)});const G=_y(B);a({overall:B.toFixed(2),passed:B>=i,letterGrade:G})}else{if(!P){t({title:"Final Exam Not Set",description:"Please select which component is the final exam to calculate the required score.",status:"info",duration:5e3,isClosable:!0});return}let B=0;r.forEach(L=>{if(L.id!==h){const j=parseFloat(L.grade),A=parseFloat(L.weight);!isNaN(j)&&!isNaN(A)&&(B+=j*A/100)}});const G=parseFloat(P.weight);if(isNaN(G)||G===0){t({title:"Invalid Final Weight",description:"The final exam must have a weight greater than 0.",status:"error",duration:5e3,isClosable:!0});return}const R=(i-B)*100/G;a({currentTotal:B.toFixed(2),neededFinal:R})}},O=()=>{n(Df),o(70),a(null)},k=se("white","gray.800"),T=se("gray.800","whiteAlpha.900"),H=se("gray.600","gray.400"),Z=se("gray.200","gray.700");return e.jsxs(de,{children:[e.jsx(hr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(er,{mb:6,p:6,borderRadius:"xl",borderWidth:"1px",borderColor:Z,bg:k,children:e.jsxs(ke,{alignItems:"center",gap:4,children:[e.jsx(ct,{as:Ls,w:10,h:10,color:se("blue.600","blue.400")}),e.jsxs(de,{children:[e.jsx(ut,{size:"lg",color:T,children:"Dynamic Grade Calculator"}),e.jsx(V,{color:H,children:"Add, remove, and edit grade components to match any course structure."})]})]})})}),e.jsx(er,{bg:k,borderWidth:"1px",borderColor:Z,borderRadius:"lg",children:e.jsx(ln,{children:e.jsxs(et,{spacing:6,align:"stretch",children:[e.jsxs(et,{spacing:4,align:"stretch",p:4,borderWidth:"1px",borderRadius:"md",children:[e.jsx(ut,{size:"sm",children:"Settings"}),e.jsxs(ht,{children:[e.jsx(ft,{children:"Passing Grade (%)"}),e.jsx(Wd,{value:i,onChange:P=>o(Number(P)),min:0,max:100,children:e.jsx(Ud,{})})]}),e.jsxs(de,{children:[e.jsxs(V,{fontWeight:"bold",children:["Total Weight: ",x,"%"]}),x!==100&&e.jsxs(eo,{status:"warning",mt:2,borderRadius:"md",children:[e.jsx(to,{}),"Must equal 100%."]})]})]}),e.jsx(et,{spacing:4,align:"stretch",children:r.map((P,D)=>e.jsx(hr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:D*.05},children:e.jsxs(at,{spacing:3,p:3,borderWidth:"1px",borderRadius:"md",bg:se("gray.50","gray.700"),children:[e.jsx(gi,{label:"Set as Final Exam",placement:"top",children:e.jsx(Mt,{"aria-label":"Set as Final Exam",icon:e.jsx(Vu,{}),isRound:!0,variant:h===P.id?"solid":"ghost",colorScheme:h===P.id?"yellow":"gray",onClick:()=>p(P.id)})}),e.jsx(Pt,{placeholder:"Component Name (e.g., Midterm)",value:P.name,onChange:B=>b(P.id,"name",B.target.value),fontWeight:"bold"}),e.jsx(Wd,{value:P.weight,onChange:B=>b(P.id,"weight",B),min:0,max:100,w:"120px",children:e.jsx(Ud,{placeholder:"Weight %"})}),e.jsx(Wd,{value:P.grade,onChange:B=>b(P.id,"grade",B),min:0,max:100,w:"120px",children:e.jsx(Ud,{placeholder:"/100"})}),e.jsx(Mt,{"aria-label":"Delete component",icon:e.jsx(cl,{}),colorScheme:"red",variant:"ghost",onClick:()=>_(P.id)})]})},P.id))}),e.jsx(at,{spacing:4,mt:4,w:"full",children:e.jsx(Ee,{leftIcon:e.jsx(Jn,{}),onClick:m,w:"full",children:"Add Component"})}),e.jsxs(at,{spacing:4,mt:2,w:"full",children:[e.jsx(Ee,{leftIcon:e.jsx(Cy,{}),colorScheme:"blue",onClick:w,w:"full",children:"Calculate"}),e.jsx(Ee,{onClick:O,w:"full",children:"Reset"})]})]})})}),(()=>{if(!s)return null;let P="info",D="";s.overall?P=s.passed?"success":"error":s.neededFinal&&(s.neededFinal<=0?(P="success",D="You have already secured a passing grade! 🎉"):s.neededFinal>100?(P="error",D="It is impossible to reach the passing grade."):(P="info",D="This is the minimum score required on the final to pass."));const G={success:{bg:se("green.50","green.900"),borderColor:se("green.200","green.700")},error:{bg:se("red.50","red.900"),borderColor:se("red.200","red.700")},info:{bg:se("blue.50","blue.900"),borderColor:se("blue.200","blue.700")}}[P];return e.jsx(hr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(er,{mt:6,bg:G.bg,borderWidth:"1px",borderColor:G.borderColor,borderRadius:"lg",p:6,children:e.jsxs(et,{spacing:2,textAlign:"center",children:[s.overall&&e.jsxs(e.Fragment,{children:[e.jsx(ut,{size:"lg",children:"Result"}),e.jsxs(V,{fontSize:"4xl",fontWeight:"bold",children:[s.overall," ",e.jsxs(V,{as:"span",fontSize:"3xl",fontWeight:"medium",children:["(",s.letterGrade,")"]})]}),e.jsx(V,{fontSize:"md",color:H,mt:-2,children:"Overall Grade"}),e.jsx(tn,{my:3}),e.jsx(V,{fontSize:"lg",fontWeight:"semibold",children:s.passed?"Congratulations, you passed!":"You did not pass."})]}),s.currentTotal!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(ut,{size:"lg",children:"Calculation"}),e.jsxs(V,{fontSize:"lg",children:["Your current grade (without the final) is ",e.jsxs("strong",{children:[s.currentTotal,"%"]}),"."]}),e.jsx(tn,{my:3}),e.jsx(V,{fontSize:"lg",children:"To pass, you need at least:"}),e.jsxs(V,{fontSize:"4xl",fontWeight:"bold",children:[s.neededFinal.toFixed(2),"%"]}),e.jsx(V,{fontSize:"md",color:H,mt:-2,children:"on the Final Exam"}),e.jsx(V,{fontSize:"sm",mt:2,children:D})]})]})})})})()]})},Ay=({roles:t=[]})=>{const{user:r,loading:n}=ai();return n?e.jsx(bn,{minH:"80vh",children:e.jsx(en,{size:"xl",color:"blue.500"})}):r?t.length>0&&(!r.roles||!t.some(i=>r.roles.includes(i)))?e.jsx(kc,{to:"/unauthorized",replace:!0}):e.jsx(dp,{}):e.jsx(kc,{to:"/login",replace:!0})},Ly=({lastUpdated:t,likes:r=0,commentsCount:n=0,courseName:i="",courseCode:o=""})=>{const s=se("white","gray.800"),a=se("gray.200","gray.700"),c=se("gray.600","gray.400"),u=t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-",h=!!(i||o);return e.jsxs(er,{mb:6,bg:s,borderColor:a,borderWidth:"1px",boxShadow:"sm",children:[e.jsx(ao,{pb:2,children:e.jsx(ut,{size:"md",children:"Quick Info"})}),e.jsx(ln,{pt:0,children:e.jsxs(et,{spacing:4,align:"stretch",children:[h&&e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx(V,{fontSize:"sm",color:c,mb:1,children:"Course"}),e.jsx(at,{children:e.jsxs(V,{fontWeight:"medium",children:[o&&e.jsxs(e.Fragment,{children:[o," • "]}),i]})})]}),e.jsx(tn,{})]}),e.jsxs(de,{children:[e.jsx(V,{fontSize:"sm",color:c,mb:1,children:"Last Updated"}),e.jsx(at,{children:e.jsx(V,{fontWeight:"medium",children:u})})]}),e.jsx(tn,{}),e.jsxs(de,{children:[e.jsx(V,{fontSize:"sm",color:c,mb:1,children:"Upvotes"}),e.jsxs(at,{children:[e.jsx(ct,{as:Pc,color:c,boxSize:4}),e.jsx(V,{fontWeight:"medium",children:r})]})]}),e.jsx(tn,{}),e.jsxs(de,{children:[e.jsx(V,{fontSize:"sm",color:c,mb:1,children:"Comments"}),e.jsxs(at,{children:[e.jsx(ct,{as:Xg,color:c,boxSize:4}),e.jsx(V,{fontWeight:"medium",children:n})]})]})]})})]})};var Tn=Uint8Array,ii=Uint16Array,nh=Int32Array,rd=new Tn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nd=new Tn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tu=new Tn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O0=function(t,r){for(var n=new ii(31),i=0;i<31;++i)n[i]=r+=1<<t[i-1];for(var o=new nh(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)o[s]=s-n[i]<<5|i;return{b:n,r:o}},R0=O0(rd,2),E0=R0.b,zu=R0.r;E0[28]=258,zu[258]=28;var T0=O0(nd,0),Py=T0.b,Bf=T0.r,Fu=new ii(32768);for(var zr=0;zr<32768;++zr){var Ss=(zr&43690)>>1|(zr&21845)<<1;Ss=(Ss&52428)>>2|(Ss&13107)<<2,Ss=(Ss&61680)>>4|(Ss&3855)<<4,Fu[zr]=((Ss&65280)>>8|(Ss&255)<<8)>>1}var Ui=function(t,r,n){for(var i=t.length,o=0,s=new ii(r);o<i;++o)t[o]&&++s[t[o]-1];var a=new ii(r);for(o=1;o<r;++o)a[o]=a[o-1]+s[o-1]<<1;var c;if(n){c=new ii(1<<r);var u=15-r;for(o=0;o<i;++o)if(t[o])for(var h=o<<4|t[o],p=r-t[o],x=a[t[o]-1]++<<p,b=x|(1<<p)-1;x<=b;++x)c[Fu[x]>>u]=h}else for(c=new ii(i),o=0;o<i;++o)t[o]&&(c[o]=Fu[a[t[o]-1]++]>>15-t[o]);return c},Os=new Tn(288);for(var zr=0;zr<144;++zr)Os[zr]=8;for(var zr=144;zr<256;++zr)Os[zr]=9;for(var zr=256;zr<280;++zr)Os[zr]=7;for(var zr=280;zr<288;++zr)Os[zr]=8;var ol=new Tn(32);for(var zr=0;zr<32;++zr)ol[zr]=5;var Ny=Ui(Os,9,0),Oy=Ui(Os,9,1),Ry=Ui(ol,5,0),Ey=Ui(ol,5,1),hu=function(t){for(var r=t[0],n=1;n<t.length;++n)t[n]>r&&(r=t[n]);return r},Ci=function(t,r,n){var i=r/8|0;return(t[i]|t[i+1]<<8)>>(r&7)&n},fu=function(t,r){var n=r/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(r&7)},ih=function(t){return(t+7)/8|0},z0=function(t,r,n){return(n==null||n>t.length)&&(n=t.length),new Tn(t.subarray(r,n))},Ty=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ki=function(t,r,n){var i=new Error(r||Ty[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,ki),!n)throw i;return i},zy=function(t,r,n,i){var o=t.length,s=0;if(!o||r.f&&!r.l)return n||new Tn(0);var a=!n,c=a||r.i!=2,u=r.i;a&&(n=new Tn(o*3));var h=function(xe){var ze=n.length;if(xe>ze){var Ie=new Tn(Math.max(ze*2,xe));Ie.set(n),n=Ie}},p=r.f||0,x=r.p||0,b=r.b||0,m=r.l,_=r.d,w=r.m,O=r.n,k=o*8;do{if(!m){p=Ci(t,x,1);var T=Ci(t,x+1,3);if(x+=3,T)if(T==1)m=Oy,_=Ey,w=9,O=5;else if(T==2){var D=Ci(t,x,31)+257,B=Ci(t,x+10,15)+4,G=D+Ci(t,x+5,31)+1;x+=14;for(var R=new Tn(G),L=new Tn(19),j=0;j<B;++j)L[Tu[j]]=Ci(t,x+j*3,7);x+=B*3;for(var A=hu(L),E=(1<<A)-1,z=Ui(L,A,1),j=0;j<G;){var oe=z[Ci(t,x,E)];x+=oe&15;var H=oe>>4;if(H<16)R[j++]=H;else{var re=0,v=0;for(H==16?(v=3+Ci(t,x,3),x+=2,re=R[j-1]):H==17?(v=3+Ci(t,x,7),x+=3):H==18&&(v=11+Ci(t,x,127),x+=7);v--;)R[j++]=re}}var ne=R.subarray(0,D),M=R.subarray(D);w=hu(ne),O=hu(M),m=Ui(ne,w,1),_=Ui(M,O,1)}else ki(1);else{var H=ih(x)+4,Z=t[H-4]|t[H-3]<<8,P=H+Z;if(P>o){u&&ki(0);break}c&&h(b+Z),n.set(t.subarray(H,P),b),r.b=b+=Z,r.p=x=P*8,r.f=p;continue}if(x>k){u&&ki(0);break}}c&&h(b+131072);for(var y=(1<<w)-1,Y=(1<<O)-1,C=x;;C=x){var re=m[fu(t,x)&y],q=re>>4;if(x+=re&15,x>k){u&&ki(0);break}if(re||ki(2),q<256)n[b++]=q;else if(q==256){C=x,m=null;break}else{var N=q-254;if(q>264){var j=q-257,$=rd[j];N=Ci(t,x,(1<<$)-1)+E0[j],x+=$}var Q=_[fu(t,x)&Y],ie=Q>>4;Q||ki(3),x+=Q&15;var M=Py[ie];if(ie>3){var $=nd[ie];M+=fu(t,x)&(1<<$)-1,x+=$}if(x>k){u&&ki(0);break}c&&h(b+131072);var ue=b+N;if(b<M){var le=s-M,ge=Math.min(M,ue);for(le+b<0&&ki(3);b<ge;++b)n[b]=i[le+b]}for(;b<ue;++b)n[b]=n[b-M]}}r.l=m,r.p=C,r.b=b,r.f=p,m&&(p=1,r.m=w,r.d=_,r.n=O)}while(!p);return b!=n.length&&a?z0(n,0,b):n.subarray(0,b)},rs=function(t,r,n){n<<=r&7;var i=r/8|0;t[i]|=n,t[i+1]|=n>>8},Qa=function(t,r,n){n<<=r&7;var i=r/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},pu=function(t,r){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var o=n.length,s=n.slice();if(!o)return{t:I0,l:0};if(o==1){var a=new Tn(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(P,D){return P.f-D.f}),n.push({s:-1,f:25001});var c=n[0],u=n[1],h=0,p=1,x=2;for(n[0]={s:-1,f:c.f+u.f,l:c,r:u};p!=o-1;)c=n[n[h].f<n[x].f?h++:x++],u=n[h!=p&&n[h].f<n[x].f?h++:x++],n[p++]={s:-1,f:c.f+u.f,l:c,r:u};for(var b=s[0].s,i=1;i<o;++i)s[i].s>b&&(b=s[i].s);var m=new ii(b+1),_=Iu(n[p-1],m,0);if(_>r){var i=0,w=0,O=_-r,k=1<<O;for(s.sort(function(D,B){return m[B.s]-m[D.s]||D.f-B.f});i<o;++i){var T=s[i].s;if(m[T]>r)w+=k-(1<<_-m[T]),m[T]=r;else break}for(w>>=O;w>0;){var H=s[i].s;m[H]<r?w-=1<<r-m[H]++-1:++i}for(;i>=0&&w;--i){var Z=s[i].s;m[Z]==r&&(--m[Z],++w)}_=r}return{t:new Tn(m),l:_}},Iu=function(t,r,n){return t.s==-1?Math.max(Iu(t.l,r,n+1),Iu(t.r,r,n+1)):r[t.s]=n},qf=function(t){for(var r=t.length;r&&!t[--r];);for(var n=new ii(++r),i=0,o=t[0],s=1,a=function(u){n[i++]=u},c=1;c<=r;++c)if(t[c]==o&&c!=r)++s;else{if(!o&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(o),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(o);s=1,o=t[c]}return{c:n.subarray(0,i),n:r}},Za=function(t,r){for(var n=0,i=0;i<r.length;++i)n+=t[i]*r[i];return n},F0=function(t,r,n){var i=n.length,o=ih(r+2);t[o]=i&255,t[o+1]=i>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var s=0;s<i;++s)t[o+s+4]=n[s];return(o+4+i)*8},Wf=function(t,r,n,i,o,s,a,c,u,h,p){rs(r,p++,n),++o[256];for(var x=pu(o,15),b=x.t,m=x.l,_=pu(s,15),w=_.t,O=_.l,k=qf(b),T=k.c,H=k.n,Z=qf(w),P=Z.c,D=Z.n,B=new ii(19),G=0;G<T.length;++G)++B[T[G]&31];for(var G=0;G<P.length;++G)++B[P[G]&31];for(var R=pu(B,7),L=R.t,j=R.l,A=19;A>4&&!L[Tu[A-1]];--A);var E=h+5<<3,z=Za(o,Os)+Za(s,ol)+a,oe=Za(o,b)+Za(s,w)+a+14+3*A+Za(B,L)+2*B[16]+3*B[17]+7*B[18];if(u>=0&&E<=z&&E<=oe)return F0(r,p,t.subarray(u,u+h));var re,v,ne,M;if(rs(r,p,1+(oe<z)),p+=2,oe<z){re=Ui(b,m,0),v=b,ne=Ui(w,O,0),M=w;var y=Ui(L,j,0);rs(r,p,H-257),rs(r,p+5,D-1),rs(r,p+10,A-4),p+=14;for(var G=0;G<A;++G)rs(r,p+3*G,L[Tu[G]]);p+=3*A;for(var Y=[T,P],C=0;C<2;++C)for(var q=Y[C],G=0;G<q.length;++G){var N=q[G]&31;rs(r,p,y[N]),p+=L[N],N>15&&(rs(r,p,q[G]>>5&127),p+=q[G]>>12)}}else re=Ny,v=Os,ne=Ry,M=ol;for(var G=0;G<c;++G){var $=i[G];if($>255){var N=$>>18&31;Qa(r,p,re[N+257]),p+=v[N+257],N>7&&(rs(r,p,$>>23&31),p+=rd[N]);var Q=$&31;Qa(r,p,ne[Q]),p+=M[Q],Q>3&&(Qa(r,p,$>>5&8191),p+=nd[Q])}else Qa(r,p,re[$]),p+=v[$]}return Qa(r,p,re[256]),p+v[256]},Fy=new nh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),I0=new Tn(0),Iy=function(t,r,n,i,o,s){var a=s.z||t.length,c=new Tn(i+a+5*(1+Math.ceil(a/7e3))+o),u=c.subarray(i,c.length-o),h=s.l,p=(s.r||0)&7;if(r){p&&(u[0]=s.r>>3);for(var x=Fy[r-1],b=x>>13,m=x&8191,_=(1<<n)-1,w=s.p||new ii(32768),O=s.h||new ii(_+1),k=Math.ceil(n/3),T=2*k,H=function(We){return(t[We]^t[We+1]<<k^t[We+2]<<T)&_},Z=new nh(25e3),P=new ii(288),D=new ii(32),B=0,G=0,R=s.i||0,L=0,j=s.w||0,A=0;R+2<a;++R){var E=H(R),z=R&32767,oe=O[E];if(w[z]=oe,O[E]=z,j<=R){var re=a-R;if((B>7e3||L>24576)&&(re>423||!h)){p=Wf(t,u,0,Z,P,D,G,L,A,R-A,p),L=B=G=0,A=R;for(var v=0;v<286;++v)P[v]=0;for(var v=0;v<30;++v)D[v]=0}var ne=2,M=0,y=m,Y=z-oe&32767;if(re>2&&E==H(R-Y))for(var C=Math.min(b,re)-1,q=Math.min(32767,R),N=Math.min(258,re);Y<=q&&--y&&z!=oe;){if(t[R+ne]==t[R+ne-Y]){for(var $=0;$<N&&t[R+$]==t[R+$-Y];++$);if($>ne){if(ne=$,M=Y,$>C)break;for(var Q=Math.min(Y,$-2),ie=0,v=0;v<Q;++v){var ue=R-Y+v&32767,le=w[ue],ge=ue-le&32767;ge>ie&&(ie=ge,oe=ue)}}}z=oe,oe=w[z],Y+=z-oe&32767}if(M){Z[L++]=268435456|zu[ne]<<18|Bf[M];var xe=zu[ne]&31,ze=Bf[M]&31;G+=rd[xe]+nd[ze],++P[257+xe],++D[ze],j=R+ne,++B}else Z[L++]=t[R],++P[t[R]]}}for(R=Math.max(R,j);R<a;++R)Z[L++]=t[R],++P[t[R]];p=Wf(t,u,h,Z,P,D,G,L,A,R-A,p),h||(s.r=p&7|u[p/8|0]<<3,p-=7,s.h=O,s.p=w,s.i=R,s.w=j)}else{for(var R=s.w||0;R<a+h;R+=65535){var Ie=R+65535;Ie>=a&&(u[p/8|0]=h,Ie=a),p=F0(u,p+1,t.subarray(R,Ie))}s.i=a}return z0(c,0,i+ih(p)+o)},M0=function(){var t=1,r=0;return{p:function(n){for(var i=t,o=r,s=n.length|0,a=0;a!=s;){for(var c=Math.min(a+2655,s);a<c;++a)o+=i+=n[a];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}t=i,r=o},d:function(){return t%=65521,r%=65521,(t&255)<<24|(t&65280)<<8|(r&255)<<8|r>>8}}},My=function(t,r,n,i,o){if(!o&&(o={l:1},r.dictionary)){var s=r.dictionary.subarray(-32768),a=new Tn(s.length+t.length);a.set(s),a.set(t,s.length),t=a,o.w=s.length}return Iy(t,r.level==null?6:r.level,r.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+r.mem,n,i,o)},D0=function(t,r,n){for(;n;++r)t[r]=n,n>>>=8},Dy=function(t,r){var n=r.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(r.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,r.dictionary){var o=M0();o.p(r.dictionary),D0(t,2,o.d())}},By=function(t,r){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ki(6,"invalid zlib data"),(t[1]>>5&1)==1&&ki(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Mu(t,r){r||(r={});var n=M0();n.p(t);var i=My(t,r,r.dictionary?6:2,4);return Dy(i,r),D0(i,i.length-4,n.d()),i}function qy(t,r){return zy(t.subarray(By(t),-4),{i:2},r,r)}var Wy=typeof TextDecoder!="undefined"&&new TextDecoder,Uy=0;try{Wy.decode(I0,{stream:!0}),Uy=1}catch{}var Ut=function(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this}();function mu(){Ut.console&&typeof Ut.console.log=="function"&&Ut.console.log.apply(Ut.console,arguments)}var jr={log:mu,warn:function(t){Ut.console&&(typeof Ut.console.warn=="function"?Ut.console.warn.apply(Ut.console,arguments):mu.call(null,arguments))},error:function(t){Ut.console&&(typeof Ut.console.error=="function"?Ut.console.error.apply(Ut.console,arguments):mu(t))}};function gu(t,r,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){Ys(i.response,r,n)},i.onerror=function(){jr.error("could not download file")},i.send()}function Uf(t){var r=new XMLHttpRequest;r.open("HEAD",t,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function cc(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var el,Du,Ys=Ut.saveAs||((typeof window=="undefined"?"undefined":_r(window))!=="object"||window!==Ut?function(){}:typeof HTMLAnchorElement!="undefined"&&"download"in HTMLAnchorElement.prototype?function(t,r,n){var i=Ut.URL||Ut.webkitURL,o=document.createElement("a");r=r||t.name||"download",o.download=r,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?Uf(o.href)?gu(t,r,n):cc(o,o.target="_blank"):cc(o)):(o.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){cc(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,n){if(r=r||t.name||"download",typeof t=="string")if(Uf(t))gu(t,r,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){cc(i)})}else navigator.msSaveOrOpenBlob(function(o,s){return s===void 0?s={autoBom:!1}:_r(s)!=="object"&&(jr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,n),r)}:function(t,r,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return gu(t,r,n);var o=t.type==="application/octet-stream",s=/constructor/i.test(Ut.HTMLElement)||Ut.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||o&&s)&&(typeof FileReader=="undefined"?"undefined":_r(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=p:location=p,i=null},c.readAsDataURL(t)}else{var u=Ut.URL||Ut.webkitURL,h=u.createObjectURL(t);i?i.location=h:location.href=h,i=null,setTimeout(function(){u.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function B0(t){var r;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],i=0;i<n.length;i++){var o=n[i].re,s=n[i].process,a=o.exec(t);a&&(r=s(a),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),h=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),"#"+c+u+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xu(t,r){var n=t[0],i=t[1],o=t[2],s=t[3];n=Pn(n,i,o,s,r[0],7,-680876936),s=Pn(s,n,i,o,r[1],12,-389564586),o=Pn(o,s,n,i,r[2],17,606105819),i=Pn(i,o,s,n,r[3],22,-1044525330),n=Pn(n,i,o,s,r[4],7,-176418897),s=Pn(s,n,i,o,r[5],12,1200080426),o=Pn(o,s,n,i,r[6],17,-1473231341),i=Pn(i,o,s,n,r[7],22,-45705983),n=Pn(n,i,o,s,r[8],7,1770035416),s=Pn(s,n,i,o,r[9],12,-1958414417),o=Pn(o,s,n,i,r[10],17,-42063),i=Pn(i,o,s,n,r[11],22,-1990404162),n=Pn(n,i,o,s,r[12],7,1804603682),s=Pn(s,n,i,o,r[13],12,-40341101),o=Pn(o,s,n,i,r[14],17,-1502002290),n=Nn(n,i=Pn(i,o,s,n,r[15],22,1236535329),o,s,r[1],5,-165796510),s=Nn(s,n,i,o,r[6],9,-1069501632),o=Nn(o,s,n,i,r[11],14,643717713),i=Nn(i,o,s,n,r[0],20,-373897302),n=Nn(n,i,o,s,r[5],5,-701558691),s=Nn(s,n,i,o,r[10],9,38016083),o=Nn(o,s,n,i,r[15],14,-660478335),i=Nn(i,o,s,n,r[4],20,-405537848),n=Nn(n,i,o,s,r[9],5,568446438),s=Nn(s,n,i,o,r[14],9,-1019803690),o=Nn(o,s,n,i,r[3],14,-187363961),i=Nn(i,o,s,n,r[8],20,1163531501),n=Nn(n,i,o,s,r[13],5,-1444681467),s=Nn(s,n,i,o,r[2],9,-51403784),o=Nn(o,s,n,i,r[7],14,1735328473),n=On(n,i=Nn(i,o,s,n,r[12],20,-1926607734),o,s,r[5],4,-378558),s=On(s,n,i,o,r[8],11,-2022574463),o=On(o,s,n,i,r[11],16,1839030562),i=On(i,o,s,n,r[14],23,-35309556),n=On(n,i,o,s,r[1],4,-1530992060),s=On(s,n,i,o,r[4],11,1272893353),o=On(o,s,n,i,r[7],16,-155497632),i=On(i,o,s,n,r[10],23,-1094730640),n=On(n,i,o,s,r[13],4,681279174),s=On(s,n,i,o,r[0],11,-358537222),o=On(o,s,n,i,r[3],16,-722521979),i=On(i,o,s,n,r[6],23,76029189),n=On(n,i,o,s,r[9],4,-640364487),s=On(s,n,i,o,r[12],11,-421815835),o=On(o,s,n,i,r[15],16,530742520),n=Rn(n,i=On(i,o,s,n,r[2],23,-995338651),o,s,r[0],6,-198630844),s=Rn(s,n,i,o,r[7],10,1126891415),o=Rn(o,s,n,i,r[14],15,-1416354905),i=Rn(i,o,s,n,r[5],21,-57434055),n=Rn(n,i,o,s,r[12],6,1700485571),s=Rn(s,n,i,o,r[3],10,-1894986606),o=Rn(o,s,n,i,r[10],15,-1051523),i=Rn(i,o,s,n,r[1],21,-2054922799),n=Rn(n,i,o,s,r[8],6,1873313359),s=Rn(s,n,i,o,r[15],10,-30611744),o=Rn(o,s,n,i,r[6],15,-1560198380),i=Rn(i,o,s,n,r[13],21,1309151649),n=Rn(n,i,o,s,r[4],6,-145523070),s=Rn(s,n,i,o,r[11],10,-1120210379),o=Rn(o,s,n,i,r[2],15,718787259),i=Rn(i,o,s,n,r[9],21,-343485551),t[0]=As(n,t[0]),t[1]=As(i,t[1]),t[2]=As(o,t[2]),t[3]=As(s,t[3])}function id(t,r,n,i,o,s){return r=As(As(r,t),As(i,s)),As(r<<o|r>>>32-o,n)}function Pn(t,r,n,i,o,s,a){return id(r&n|~r&i,t,r,o,s,a)}function Nn(t,r,n,i,o,s,a){return id(r&i|n&~i,t,r,o,s,a)}function On(t,r,n,i,o,s,a){return id(r^n^i,t,r,o,s,a)}function Rn(t,r,n,i,o,s,a){return id(n^(r|~i),t,r,o,s,a)}function q0(t){var r,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=t.length;r+=64)xu(i,Hy(t.substring(r-64,r)));t=t.substring(r-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)o[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(xu(i,o),r=0;r<16;r++)o[r]=0;return o[14]=8*n,xu(i,o),i}function Hy(t){var r,n=[];for(r=0;r<64;r+=4)n[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return n}el=Ut.atob.bind(Ut),Du=Ut.btoa.bind(Ut);var Hf="0123456789abcdef".split("");function $y(t){for(var r="",n=0;n<4;n++)r+=Hf[t>>8*n+4&15]+Hf[t>>8*n&15];return r}function Gy(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Bu(t){return q0(t).map(Gy).join("")}var Vy=function(t){for(var r=0;r<t.length;r++)t[r]=$y(t[r]);return t.join("")}(q0("hello"))!="5d41402abc4b2a76b9719d911017c592";function As(t,r){if(Vy){var n=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(n>>16)<<16|65535&n}return t+r&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function qu(t,r){var n,i,o,s;if(t!==n){for(var a=(o=t,s=1+(256/t.length>>0),new Array(s+1).join(o)),c=[],u=0;u<256;u++)c[u]=u;var h=0;for(u=0;u<256;u++){var p=c[u];h=(h+p+a.charCodeAt(u))%256,c[u]=c[h],c[h]=p}n=t,i=c}else c=i;var x=r.length,b=0,m=0,_="";for(u=0;u<x;u++)m=(m+(p=c[b=(b+1)%256]))%256,c[b]=c[m],c[m]=p,a=c[(c[b]+c[m])%256],_+=String.fromCharCode(r.charCodeAt(u)^a);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var $f={print:4,modify:8,copy:16,"annot-forms":32};function Ho(t,r,n,i){this.v=1,this.r=2;var o=192;t.forEach(function(c){if($f.perm!==void 0)throw new Error("Invalid permission: "+c);o+=$f[c]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(r+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^o)),this.encryptionKey=Bu(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=qu(this.encryptionKey,this.padding)}function $o(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var r="",n=t.length,i=0;i<n;i++){var o=t.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?r+="#"+("0"+o.toString(16)).slice(-2):r+=t[i]}return r}function Gf(t){if(_r(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(n,i,o){if(o=o||!1,typeof n!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(n)||(r[n]={});var s=Math.random().toString(35);return r[n][s]=[i,!!o],s},this.unsubscribe=function(n){for(var i in r)if(r[i][n])return delete r[i][n],Object.keys(r[i]).length===0&&delete r[i],!0;return!1},this.publish=function(n){if(r.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var s in r[n]){var a=r[n][s];try{a[0].apply(t,i)}catch(c){Ut.console&&jr.error("jsPDF PubSub Error",c.message,c)}a[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function Ic(t){if(!(this instanceof Ic))return new Ic(t);var r="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&r.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function W0(t,r){this.gState=t,this.matrix=r,this.id="",this.objectNumber=-1}function Xs(t,r,n,i,o){if(!(this instanceof Xs))return new Xs(t,r,n,i,o);this.type=t==="axial"?2:3,this.coords=r,this.colors=n,W0.call(this,i,o)}function Vo(t,r,n,i,o){if(!(this instanceof Vo))return new Vo(t,r,n,i,o);this.boundingBox=t,this.xStep=r,this.yStep=n,this.stream="",this.cloneIndex=0,W0.call(this,i,o)}function qt(t){var r,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],s=arguments[3],a=[],c=1,u=16,h="S",p=null;_r(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,o=t.format||o,s=t.compress||t.compressPdf||s,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(r=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),h=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),i=i||"mm",n=(""+(n||"P")).toLowerCase();var x=t.putOnlyUsedFonts||!1,b={},m={internal:{},__private__:{}};m.__private__.PubSub=Gf;var _="1.3",w=m.__private__.getPdfVersion=function(){return _};m.__private__.setPdfVersion=function(f){_=f};var O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return O};var k=m.__private__.getPageFormat=function(f){return O[f]};o=o||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},H=T.COMPAT;function Z(){this.saveGraphicsState(),ee(new Ye(Ne,0,0,-Ne,0,cs()*Ne).toString()+" cm"),this.setFontSize(this.getFontSize()/Ne),h="n",H=T.ADVANCED}function P(){this.restoreGraphicsState(),h="S",H=T.COMPAT}var D=m.__private__.combineFontStyleAndFontWeight=function(f,I){if(f=="bold"&&I=="normal"||f=="bold"&&I==400||f=="normal"&&I=="italic"||f=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(f=I==400||I==="normal"?f==="italic"?"italic":"normal":I!=700&&I!=="bold"||f!=="normal"?(I==700?"bold":I)+""+f:"bold"),f};m.advancedAPI=function(f){var I=H===T.COMPAT;return I&&Z.call(this),typeof f!="function"||(f(this),I&&P.call(this)),this},m.compatAPI=function(f){var I=H===T.ADVANCED;return I&&P.call(this),typeof f!="function"||(f(this),I&&Z.call(this)),this},m.isAdvancedAPI=function(){return H===T.ADVANCED};var B,G=function(f){if(H!==T.ADVANCED)throw new Error(f+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(f,I){var ae=r||I;if(isNaN(f)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return f.toFixed(ae).replace(/0+$/,"")};B=m.hpf=m.__private__.hpf=typeof u=="number"?function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.hpf");return R(f,u)}:u==="smart"?function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.hpf");return R(f,f>-1&&f<1?16:5)}:function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.hpf");return R(f,16)};var L=m.f2=m.__private__.f2=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.f2");return R(f,2)},j=m.__private__.f3=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.f3");return R(f,3)},A=m.scale=m.__private__.scale=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.scale");return H===T.COMPAT?f*Ne:H===T.ADVANCED?f:void 0},E=function(f){return H===T.COMPAT?cs()-f:H===T.ADVANCED?f:void 0},z=function(f){return A(E(f))};m.__private__.setPrecision=m.setPrecision=function(f){typeof parseInt(f,10)=="number"&&(r=parseInt(f,10))};var oe,re="00000000000000000000000000000000",v=m.__private__.getFileId=function(){return re},ne=m.__private__.setFileId=function(f){return re=f!==void 0&&/^[a-fA-F0-9]{32}$/.test(f)?f.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(An=new Ho(p.userPermissions,p.userPassword,p.ownerPassword,re)),re};m.setFileId=function(f){return ne(f),this},m.getFileId=function(){return v()};var M=m.__private__.convertDateToPDFDate=function(f){var I=f.getTimezoneOffset(),ae=I<0?"+":"-",he=Math.floor(Math.abs(I/60)),Le=Math.abs(I%60),$e=[ae,N(he),"'",N(Le),"'"].join("");return["D:",f.getFullYear(),N(f.getMonth()+1),N(f.getDate()),N(f.getHours()),N(f.getMinutes()),N(f.getSeconds()),$e].join("")},y=m.__private__.convertPDFDateToDate=function(f){var I=parseInt(f.substr(2,4),10),ae=parseInt(f.substr(6,2),10)-1,he=parseInt(f.substr(8,2),10),Le=parseInt(f.substr(10,2),10),$e=parseInt(f.substr(12,2),10),it=parseInt(f.substr(14,2),10);return new Date(I,ae,he,Le,$e,it,0)},Y=m.__private__.setCreationDate=function(f){var I;if(f===void 0&&(f=new Date),f instanceof Date)I=M(f);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(f))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=f}return oe=I},C=m.__private__.getCreationDate=function(f){var I=oe;return f==="jsDate"&&(I=y(oe)),I};m.setCreationDate=function(f){return Y(f),this},m.getCreationDate=function(f){return C(f)};var q,N=m.__private__.padd2=function(f){return("0"+parseInt(f)).slice(-2)},$=m.__private__.padd2Hex=function(f){return("00"+(f=f.toString())).substr(f.length)},Q=0,ie=[],ue=[],le=0,ge=[],xe=[],ze=!1,Ie=ue,We=function(){Q=0,le=0,ue=[],ie=[],ge=[],cr=Ht(),nn=Ht()};m.__private__.setCustomOutputDestination=function(f){ze=!0,Ie=f};var be=function(f){ze||(Ie=f)};m.__private__.resetCustomOutputDestination=function(){ze=!1,Ie=ue};var ee=m.__private__.out=function(f){return f=f.toString(),le+=f.length+1,Ie.push(f),Ie},Ae=m.__private__.write=function(f){return ee(arguments.length===1?f.toString():Array.prototype.join.call(arguments," "))},Se=m.__private__.getArrayBuffer=function(f){for(var I=f.length,ae=new ArrayBuffer(I),he=new Uint8Array(ae);I--;)he[I]=f.charCodeAt(I);return ae},ce=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ce};var Me=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(f){return Me=H===T.ADVANCED?f/Ne:f,this};var Xe,Ze=m.__private__.getFontSize=m.getFontSize=function(){return H===T.COMPAT?Me:Me*Ne},pt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(f){return pt=f,this},m.__private__.getR2L=m.getR2L=function(){return pt};var Ue,Ce=m.__private__.setZoomMode=function(f){var I=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(f))Xe=f;else if(isNaN(f)){if(I.indexOf(f)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+f+'" is not recognized.');Xe=f}else Xe=parseInt(f,10)};m.__private__.getZoomMode=function(){return Xe};var ve,Pe=m.__private__.setPageMode=function(f){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(f)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+f+'" is not recognized.');Ue=f};m.__private__.getPageMode=function(){return Ue};var De=m.__private__.setLayoutMode=function(f){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(f)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+f+'" is not recognized.');ve=f};m.__private__.getLayoutMode=function(){return ve},m.__private__.setDisplayMode=m.setDisplayMode=function(f,I,ae){return Ce(f),De(I),Pe(ae),this};var _e={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(f){if(Object.keys(_e).indexOf(f)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _e[f]},m.__private__.getDocumentProperties=function(){return _e},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(f){for(var I in _e)_e.hasOwnProperty(I)&&f[I]&&(_e[I]=f[I]);return this},m.__private__.setDocumentProperty=function(f,I){if(Object.keys(_e).indexOf(f)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _e[f]=I};var Fe,Ne,st,Ge,ot,Nt={},Ct={},dt=[],mt={},zt={},Ft={},fr={},Te=null,He=0,tt=[],rt=new Gf(m),gt=t.hotfixes||[],jt={},It={},Ve=[],Ye=function f(I,ae,he,Le,$e,it){if(!(this instanceof f))return new f(I,ae,he,Le,$e,it);isNaN(I)&&(I=1),isNaN(ae)&&(ae=0),isNaN(he)&&(he=0),isNaN(Le)&&(Le=1),isNaN($e)&&($e=0),isNaN(it)&&(it=0),this._matrix=[I,ae,he,Le,$e,it]};Object.defineProperty(Ye.prototype,"sx",{get:function(){return this._matrix[0]},set:function(f){this._matrix[0]=f}}),Object.defineProperty(Ye.prototype,"shy",{get:function(){return this._matrix[1]},set:function(f){this._matrix[1]=f}}),Object.defineProperty(Ye.prototype,"shx",{get:function(){return this._matrix[2]},set:function(f){this._matrix[2]=f}}),Object.defineProperty(Ye.prototype,"sy",{get:function(){return this._matrix[3]},set:function(f){this._matrix[3]=f}}),Object.defineProperty(Ye.prototype,"tx",{get:function(){return this._matrix[4]},set:function(f){this._matrix[4]=f}}),Object.defineProperty(Ye.prototype,"ty",{get:function(){return this._matrix[5]},set:function(f){this._matrix[5]=f}}),Object.defineProperty(Ye.prototype,"a",{get:function(){return this._matrix[0]},set:function(f){this._matrix[0]=f}}),Object.defineProperty(Ye.prototype,"b",{get:function(){return this._matrix[1]},set:function(f){this._matrix[1]=f}}),Object.defineProperty(Ye.prototype,"c",{get:function(){return this._matrix[2]},set:function(f){this._matrix[2]=f}}),Object.defineProperty(Ye.prototype,"d",{get:function(){return this._matrix[3]},set:function(f){this._matrix[3]=f}}),Object.defineProperty(Ye.prototype,"e",{get:function(){return this._matrix[4]},set:function(f){this._matrix[4]=f}}),Object.defineProperty(Ye.prototype,"f",{get:function(){return this._matrix[5]},set:function(f){this._matrix[5]=f}}),Object.defineProperty(Ye.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ye.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ye.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ye.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ye.prototype.join=function(f){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(B).join(f)},Ye.prototype.multiply=function(f){var I=f.sx*this.sx+f.shy*this.shx,ae=f.sx*this.shy+f.shy*this.sy,he=f.shx*this.sx+f.sy*this.shx,Le=f.shx*this.shy+f.sy*this.sy,$e=f.tx*this.sx+f.ty*this.shx+this.tx,it=f.tx*this.shy+f.ty*this.sy+this.ty;return new Ye(I,ae,he,Le,$e,it)},Ye.prototype.decompose=function(){var f=this.sx,I=this.shy,ae=this.shx,he=this.sy,Le=this.tx,$e=this.ty,it=Math.sqrt(f*f+I*I),_t=(f/=it)*ae+(I/=it)*he;ae-=f*_t,he-=I*_t;var Tt=Math.sqrt(ae*ae+he*he);return _t/=Tt,f*(he/=Tt)<I*(ae/=Tt)&&(f=-f,I=-I,_t=-_t,it=-it),{scale:new Ye(it,0,0,Tt,0,0),translate:new Ye(1,0,0,1,Le,$e),rotate:new Ye(f,I,-I,f,0,0),skew:new Ye(1,0,_t,1,0,0)}},Ye.prototype.toString=function(f){return this.join(" ")},Ye.prototype.inversed=function(){var f=this.sx,I=this.shy,ae=this.shx,he=this.sy,Le=this.tx,$e=this.ty,it=1/(f*he-I*ae),_t=he*it,Tt=-I*it,Xt=-ae*it,Yt=f*it;return new Ye(_t,Tt,Xt,Yt,-_t*Le-Xt*$e,-Tt*Le-Yt*$e)},Ye.prototype.applyToPoint=function(f){var I=f.x*this.sx+f.y*this.shx+this.tx,ae=f.x*this.shy+f.y*this.sy+this.ty;return new yo(I,ae)},Ye.prototype.applyToRectangle=function(f){var I=this.applyToPoint(f),ae=this.applyToPoint(new yo(f.x+f.w,f.y+f.h));return new Ca(I.x,I.y,ae.x-I.x,ae.y-I.y)},Ye.prototype.clone=function(){var f=this.sx,I=this.shy,ae=this.shx,he=this.sy,Le=this.tx,$e=this.ty;return new Ye(f,I,ae,he,Le,$e)},m.Matrix=Ye;var Et=m.matrixMult=function(f,I){return I.multiply(f)},lt=new Ye(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=lt;var je=function(f,I){if(!zt[f]){var ae=(I instanceof Xs?"Sh":"P")+(Object.keys(mt).length+1).toString(10);I.id=ae,zt[f]=ae,mt[ae]=I,rt.publish("addPattern",I)}};m.ShadingPattern=Xs,m.TilingPattern=Vo,m.addShadingPattern=function(f,I){return G("addShadingPattern()"),je(f,I),this},m.beginTilingPattern=function(f){G("beginTilingPattern()"),Al(f.boundingBox[0],f.boundingBox[1],f.boundingBox[2]-f.boundingBox[0],f.boundingBox[3]-f.boundingBox[1],f.matrix)},m.endTilingPattern=function(f,I){G("endTilingPattern()"),I.stream=xe[q].join(`
`),je(f,I),rt.publish("endTilingPattern",I),Ve.pop().restore()};var Ot=m.__private__.newObject=function(){var f=Ht();return sr(f,!0),f},Ht=m.__private__.newObjectDeferred=function(){return Q++,ie[Q]=function(){return le},Q},sr=function(f,I){return I=typeof I=="boolean"&&I,ie[f]=le,I&&ee(f+" 0 obj"),f},jn=m.__private__.newAdditionalObject=function(){var f={objId:Ht(),content:""};return ge.push(f),f},cr=Ht(),nn=Ht(),ye=m.__private__.decodeColorString=function(f){var I=f.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length===5&&(I[4]==="k"||I[4]==="K")&&(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var ae=parseFloat(I[0]);I=[ae,ae,ae,"r"]}for(var he="#",Le=0;Le<3;Le++)he+=("0"+Math.floor(255*parseFloat(I[Le])).toString(16)).slice(-2);return he},vt=m.__private__.encodeColorString=function(f){var I;typeof f=="string"&&(f={ch1:f});var ae=f.ch1,he=f.ch2,Le=f.ch3,$e=f.ch4,it=f.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var _t=new B0(ae);if(_t.ok)ae=_t.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Tt=parseInt(ae.substr(1),16);ae=Tt>>16&255,he=Tt>>8&255,Le=255&Tt}if(he===void 0||$e===void 0&&ae===he&&he===Le)if(typeof ae=="string")I=ae+" "+it[0];else switch(f.precision){case 2:I=L(ae/255)+" "+it[0];break;case 3:default:I=j(ae/255)+" "+it[0]}else if($e===void 0||_r($e)==="object"){if($e&&!isNaN($e.a)&&$e.a===0)return I=["1.","1.","1.",it[1]].join(" ");if(typeof ae=="string")I=[ae,he,Le,it[1]].join(" ");else switch(f.precision){case 2:I=[L(ae/255),L(he/255),L(Le/255),it[1]].join(" ");break;default:case 3:I=[j(ae/255),j(he/255),j(Le/255),it[1]].join(" ")}}else if(typeof ae=="string")I=[ae,he,Le,$e,it[2]].join(" ");else switch(f.precision){case 2:I=[L(ae),L(he),L(Le),L($e),it[2]].join(" ");break;case 3:default:I=[j(ae),j(he),j(Le),j($e),it[2]].join(" ")}return I},At=m.__private__.getFilters=function(){return a},Rt=m.__private__.putStream=function(f){var I=(f=f||{}).data||"",ae=f.filters||At(),he=f.alreadyAppliedFilters||[],Le=f.addLength1||!1,$e=I.length,it=f.objectId,_t=function(Ln){return Ln};if(p!==null&&it===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(_t=An.encryptor(it,0));var Tt={};ae===!0&&(ae=["FlateEncode"]);var Xt=f.additionalKeyValues||[],Yt=(Tt=qt.API.processDataByFilters!==void 0?qt.API.processDataByFilters(I,ae):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(he)?he.join(" "):he.toString());if(Tt.data.length!==0&&(Xt.push({key:"Length",value:Tt.data.length}),Le===!0&&Xt.push({key:"Length1",value:$e})),Yt.length!=0)if(Yt.split("/").length-1==1)Xt.push({key:"Filter",value:Yt});else{Xt.push({key:"Filter",value:"["+Yt+"]"});for(var lr=0;lr<Xt.length;lr+=1)if(Xt[lr].key==="DecodeParms"){for(var Br=[],Hr=0;Hr<Tt.reverseChain.split("/").length-1;Hr+=1)Br.push("null");Br.push(Xt[lr].value),Xt[lr].value="["+Br.join(" ")+"]"}}ee("<<");for(var sn=0;sn<Xt.length;sn++)ee("/"+Xt[sn].key+" "+Xt[sn].value);ee(">>"),Tt.data.length!==0&&(ee("stream"),ee(_t(Tt.data)),ee("endstream"))},Wt=m.__private__.putPage=function(f){var I=f.number,ae=f.data,he=f.objId,Le=f.contentsObjId;sr(he,!0),ee("<</Type /Page"),ee("/Parent "+f.rootDictionaryObjId+" 0 R"),ee("/Resources "+f.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(B(f.mediaBox.bottomLeftX))+" "+parseFloat(B(f.mediaBox.bottomLeftY))+" "+B(f.mediaBox.topRightX)+" "+B(f.mediaBox.topRightY)+"]"),f.cropBox!==null&&ee("/CropBox ["+B(f.cropBox.bottomLeftX)+" "+B(f.cropBox.bottomLeftY)+" "+B(f.cropBox.topRightX)+" "+B(f.cropBox.topRightY)+"]"),f.bleedBox!==null&&ee("/BleedBox ["+B(f.bleedBox.bottomLeftX)+" "+B(f.bleedBox.bottomLeftY)+" "+B(f.bleedBox.topRightX)+" "+B(f.bleedBox.topRightY)+"]"),f.trimBox!==null&&ee("/TrimBox ["+B(f.trimBox.bottomLeftX)+" "+B(f.trimBox.bottomLeftY)+" "+B(f.trimBox.topRightX)+" "+B(f.trimBox.topRightY)+"]"),f.artBox!==null&&ee("/ArtBox ["+B(f.artBox.bottomLeftX)+" "+B(f.artBox.bottomLeftY)+" "+B(f.artBox.topRightX)+" "+B(f.artBox.topRightY)+"]"),typeof f.userUnit=="number"&&f.userUnit!==1&&ee("/UserUnit "+f.userUnit),rt.publish("putPage",{objId:he,pageContext:tt[I],pageNumber:I,page:ae}),ee("/Contents "+Le+" 0 R"),ee(">>"),ee("endobj");var $e=ae.join(`
`);return H===T.ADVANCED&&($e+=`
Q`),sr(Le,!0),Rt({data:$e,filters:At(),objectId:Le}),ee("endobj"),he},$t=m.__private__.putPages=function(){var f,I,ae=[];for(f=1;f<=He;f++)tt[f].objId=Ht(),tt[f].contentsObjId=Ht();for(f=1;f<=He;f++)ae.push(Wt({number:f,data:xe[f],objId:tt[f].objId,contentsObjId:tt[f].contentsObjId,mediaBox:tt[f].mediaBox,cropBox:tt[f].cropBox,bleedBox:tt[f].bleedBox,trimBox:tt[f].trimBox,artBox:tt[f].artBox,userUnit:tt[f].userUnit,rootDictionaryObjId:cr,resourceDictionaryObjId:nn}));sr(cr,!0),ee("<</Type /Pages");var he="/Kids [";for(I=0;I<He;I++)he+=ae[I]+" 0 R ";ee(he+"]"),ee("/Count "+He),ee(">>"),ee("endobj"),rt.publish("postPutPages")},ir=function(f){rt.publish("putFont",{font:f,out:ee,newObject:Ot,putStream:Rt}),f.isAlreadyPutted!==!0&&(f.objectNumber=Ot(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+$o(f.postScriptName)),ee("/Subtype /Type1"),typeof f.encoding=="string"&&ee("/Encoding /"+f.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},Gt=function(){for(var f in Nt)Nt.hasOwnProperty(f)&&(x===!1||x===!0&&b.hasOwnProperty(f))&&ir(Nt[f])},tr=function(f){f.objectNumber=Ot();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[B(f.x),B(f.y),B(f.x+f.width),B(f.y+f.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+f.matrix.toString()+"]"});var ae=f.pages[1].join(`
`);Rt({data:ae,additionalKeyValues:I,objectId:f.objectNumber}),ee("endobj")},nr=function(){for(var f in jt)jt.hasOwnProperty(f)&&tr(jt[f])},or=function(f,I){var ae,he=[],Le=1/(I-1);for(ae=0;ae<1;ae+=Le)he.push(ae);if(he.push(1),f[0].offset!=0){var $e={offset:0,color:f[0].color};f.unshift($e)}if(f[f.length-1].offset!=1){var it={offset:1,color:f[f.length-1].color};f.push(it)}for(var _t="",Tt=0,Xt=0;Xt<he.length;Xt++){for(ae=he[Xt];ae>f[Tt+1].offset;)Tt++;var Yt=f[Tt].offset,lr=(ae-Yt)/(f[Tt+1].offset-Yt),Br=f[Tt].color,Hr=f[Tt+1].color;_t+=$(Math.round((1-lr)*Br[0]+lr*Hr[0]).toString(16))+$(Math.round((1-lr)*Br[1]+lr*Hr[1]).toString(16))+$(Math.round((1-lr)*Br[2]+lr*Hr[2]).toString(16))}return _t.trim()},Bt=function(f,I){I||(I=21);var ae=Ot(),he=or(f.colors,I),Le=[];Le.push({key:"FunctionType",value:"0"}),Le.push({key:"Domain",value:"[0.0 1.0]"}),Le.push({key:"Size",value:"["+I+"]"}),Le.push({key:"BitsPerSample",value:"8"}),Le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Rt({data:he,additionalKeyValues:Le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),ee("endobj"),f.objectNumber=Ot(),ee("<< /ShadingType "+f.type),ee("/ColorSpace /DeviceRGB");var $e="/Coords ["+B(parseFloat(f.coords[0]))+" "+B(parseFloat(f.coords[1]))+" ";f.type===2?$e+=B(parseFloat(f.coords[2]))+" "+B(parseFloat(f.coords[3])):$e+=B(parseFloat(f.coords[2]))+" "+B(parseFloat(f.coords[3]))+" "+B(parseFloat(f.coords[4]))+" "+B(parseFloat(f.coords[5])),ee($e+="]"),f.matrix&&ee("/Matrix ["+f.matrix.toString()+"]"),ee("/Function "+ae+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},mr=function(f,I){var ae=Ht(),he=Ot();I.push({resourcesOid:ae,objectOid:he}),f.objectNumber=he;var Le=[];Le.push({key:"Type",value:"/Pattern"}),Le.push({key:"PatternType",value:"1"}),Le.push({key:"PaintType",value:"1"}),Le.push({key:"TilingType",value:"1"}),Le.push({key:"BBox",value:"["+f.boundingBox.map(B).join(" ")+"]"}),Le.push({key:"XStep",value:B(f.xStep)}),Le.push({key:"YStep",value:B(f.yStep)}),Le.push({key:"Resources",value:ae+" 0 R"}),f.matrix&&Le.push({key:"Matrix",value:"["+f.matrix.toString()+"]"}),Rt({data:f.stream,additionalKeyValues:Le,objectId:f.objectNumber}),ee("endobj")},Dr=function(f){var I;for(I in mt)mt.hasOwnProperty(I)&&(mt[I]instanceof Xs?Bt(mt[I]):mt[I]instanceof Vo&&mr(mt[I],f))},Sn=function(f){for(var I in f.objectNumber=Ot(),ee("<<"),f)switch(I){case"opacity":ee("/ca "+L(f[I]));break;case"stroke-opacity":ee("/CA "+L(f[I]))}ee(">>"),ee("endobj")},Kt=function(){var f;for(f in Ft)Ft.hasOwnProperty(f)&&Sn(Ft[f])},hn=function(){for(var f in ee("/XObject <<"),jt)jt.hasOwnProperty(f)&&jt[f].objectNumber>=0&&ee("/"+f+" "+jt[f].objectNumber+" 0 R");rt.publish("putXobjectDict"),ee(">>")},pa=function(){An.oid=Ot(),ee("<<"),ee("/Filter /Standard"),ee("/V "+An.v),ee("/R "+An.r),ee("/U <"+An.toHexString(An.U)+">"),ee("/O <"+An.toHexString(An.O)+">"),ee("/P "+An.P),ee(">>"),ee("endobj")},Yr=function(){for(var f in ee("/Font <<"),Nt)Nt.hasOwnProperty(f)&&(x===!1||x===!0&&b.hasOwnProperty(f))&&ee("/"+f+" "+Nt[f].objectNumber+" 0 R");ee(">>")},Ti=function(){if(Object.keys(mt).length>0){for(var f in ee("/Shading <<"),mt)mt.hasOwnProperty(f)&&mt[f]instanceof Xs&&mt[f].objectNumber>=0&&ee("/"+f+" "+mt[f].objectNumber+" 0 R");rt.publish("putShadingPatternDict"),ee(">>")}},li=function(f){if(Object.keys(mt).length>0){for(var I in ee("/Pattern <<"),mt)mt.hasOwnProperty(I)&&mt[I]instanceof m.TilingPattern&&mt[I].objectNumber>=0&&mt[I].objectNumber<f&&ee("/"+I+" "+mt[I].objectNumber+" 0 R");rt.publish("putTilingPatternDict"),ee(">>")}},ho=function(){if(Object.keys(Ft).length>0){var f;for(f in ee("/ExtGState <<"),Ft)Ft.hasOwnProperty(f)&&Ft[f].objectNumber>=0&&ee("/"+f+" "+Ft[f].objectNumber+" 0 R");rt.publish("putGStateDict"),ee(">>")}},Mr=function(f){sr(f.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Yr(),Ti(),li(f.objectOid),ho(),hn(),ee(">>"),ee("endobj")},Ts=function(){var f=[];Gt(),Kt(),nr(),Dr(f),rt.publish("putResources"),f.forEach(Mr),Mr({resourcesOid:nn,objectOid:Number.MAX_SAFE_INTEGER}),rt.publish("postPutResources")},zs=function(){rt.publish("putAdditionalObjects");for(var f=0;f<ge.length;f++){var I=ge[f];sr(I.objId,!0),ee(I.content),ee("endobj")}rt.publish("postPutAdditionalObjects")},pl=function(f){Ct[f.fontName]=Ct[f.fontName]||{},Ct[f.fontName][f.fontStyle]=f.id},ma=function(f,I,ae,he,Le){var $e={id:"F"+(Object.keys(Nt).length+1).toString(10),postScriptName:f,fontName:I,fontStyle:ae,encoding:he,isStandardFont:Le||!1,metadata:{}};return rt.publish("addFont",{font:$e,instance:this}),Nt[$e.id]=$e,pl($e),$e.id},sd=function(f){for(var I=0,ae=ce.length;I<ae;I++){var he=ma.call(this,f[I][0],f[I][1],f[I][2],ce[I][3],!0);x===!1&&(b[he]=!0);var Le=f[I][0].split("-");pl({id:he,fontName:Le[0],fontStyle:Le[1]||""})}rt.publish("addFonts",{fonts:Nt,dictionary:Ct})},yi=function(f){return f.foo=function(){try{return f.apply(this,arguments)}catch(he){var I=he.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var ae="Error in function "+I.split(`
`)[0].split("<")[0]+": "+he.message;if(!Ut.console)throw new Error(ae);Ut.console.error(ae,he),Ut.alert&&alert(ae)}},f.foo.bar=f,f.foo},fo=function(f,I){var ae,he,Le,$e,it,_t,Tt,Xt,Yt;if(Le=(I=I||{}).sourceEncoding||"Unicode",it=I.outputEncoding,(I.autoencode||it)&&Nt[Fe].metadata&&Nt[Fe].metadata[Le]&&Nt[Fe].metadata[Le].encoding&&($e=Nt[Fe].metadata[Le].encoding,!it&&Nt[Fe].encoding&&(it=Nt[Fe].encoding),!it&&$e.codePages&&(it=$e.codePages[0]),typeof it=="string"&&(it=$e[it]),it)){for(Tt=!1,_t=[],ae=0,he=f.length;ae<he;ae++)(Xt=it[f.charCodeAt(ae)])?_t.push(String.fromCharCode(Xt)):_t.push(f[ae]),_t[ae].charCodeAt(0)>>8&&(Tt=!0);f=_t.join("")}for(ae=f.length;Tt===void 0&&ae!==0;)f.charCodeAt(ae-1)>>8&&(Tt=!0),ae--;if(!Tt)return f;for(_t=I.noBOM?[]:[254,255],ae=0,he=f.length;ae<he;ae++){if((Yt=(Xt=f.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+f+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_t.push(Yt),_t.push(Xt-(Yt<<8))}return String.fromCharCode.apply(void 0,_t)},Wn=m.__private__.pdfEscape=m.pdfEscape=function(f,I){return fo(f,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ga=m.__private__.beginPage=function(f){xe[++He]=[],tt[He]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(f[0]),topRightY:Number(f[1])}},gl(He),be(xe[q])},ml=function(f,I){var ae,he,Le;switch(n=I||n,typeof f=="string"&&(ae=k(f.toLowerCase()),Array.isArray(ae)&&(he=ae[0],Le=ae[1])),Array.isArray(f)&&(he=f[0]*Ne,Le=f[1]*Ne),isNaN(he)&&(he=o[0],Le=o[1]),(he>14400||Le>14400)&&(jr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),he=Math.min(14400,he),Le=Math.min(14400,Le)),o=[he,Le],n.substr(0,1)){case"l":Le>he&&(o=[Le,he]);break;case"p":he>Le&&(o=[Le,he])}ga(o),jl(va),ee(vi),ja!==0&&ee(ja+" J"),Sa!==0&&ee(Sa+" j"),rt.publish("addPage",{pageNumber:He})},od=function(f){f>0&&f<=He&&(xe.splice(f,1),tt.splice(f,1),He--,q>He&&(q=He),this.setPage(q))},gl=function(f){f>0&&f<=He&&(q=f)},ad=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return xe.length-1},xl=function(f,I,ae){var he,Le=void 0;return ae=ae||{},f=f!==void 0?f:Nt[Fe].fontName,I=I!==void 0?I:Nt[Fe].fontStyle,he=f.toLowerCase(),Ct[he]!==void 0&&Ct[he][I]!==void 0?Le=Ct[he][I]:Ct[f]!==void 0&&Ct[f][I]!==void 0?Le=Ct[f][I]:ae.disableWarning===!1&&jr.warn("Unable to look up font label for font '"+f+"', '"+I+"'. Refer to getFontList() for available fonts."),Le||ae.noFallback||(Le=Ct.times[I])==null&&(Le=Ct.times.normal),Le},ld=m.__private__.putInfo=function(){var f=Ot(),I=function(he){return he};for(var ae in p!==null&&(I=An.encryptor(f,0)),ee("<<"),ee("/Producer ("+Wn(I("jsPDF "+qt.version))+")"),_e)_e.hasOwnProperty(ae)&&_e[ae]&&ee("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+Wn(I(_e[ae]))+")");ee("/CreationDate ("+Wn(I(oe))+")"),ee(">>"),ee("endobj")},xa=m.__private__.putCatalog=function(f){var I=(f=f||{}).rootDictionaryObjId||cr;switch(Ot(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+I+" 0 R"),Xe||(Xe="fullwidth"),Xe){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+Xe;ae.substr(ae.length-1)==="%"&&(Xe=parseInt(Xe)/100),typeof Xe=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+L(Xe)+"]")}switch(ve||(ve="continuous"),ve){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}Ue&&ee("/PageMode /"+Ue),rt.publish("putCatalog"),ee(">>"),ee("endobj")},cd=m.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(Q+1)),ee("/Root "+Q+" 0 R"),ee("/Info "+(Q-1)+" 0 R"),p!==null&&ee("/Encrypt "+An.oid+" 0 R"),ee("/ID [ <"+re+"> <"+re+"> ]"),ee(">>")},dd=m.__private__.putHeader=function(){ee("%PDF-"+_),ee("%ºß¬à")},ud=m.__private__.putXRef=function(){var f="0000000000";ee("xref"),ee("0 "+(Q+1)),ee("0000000000 65535 f ");for(var I=1;I<=Q;I++)typeof ie[I]=="function"?ee((f+ie[I]()).slice(-10)+" 00000 n "):ie[I]!==void 0?ee((f+ie[I]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},Vi=m.__private__.buildDocument=function(){We(),be(ue),rt.publish("buildDocument"),dd(),$t(),zs(),Ts(),p!==null&&pa(),ld(),xa();var f=le;return ud(),cd(),ee("startxref"),ee(""+f),ee("%%EOF"),be(xe[q]),ue.join(`
`)},po=m.__private__.getBlob=function(f){return new Blob([Se(f)],{type:"application/pdf"})},mo=m.output=m.__private__.output=yi(function(f,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",f){case void 0:return Vi();case"save":m.save(I.filename);break;case"arraybuffer":return Se(Vi());case"blob":return po(Vi());case"bloburi":case"bloburl":if(Ut.URL!==void 0&&typeof Ut.URL.createObjectURL=="function")return Ut.URL&&Ut.URL.createObjectURL(po(Vi()))||void 0;jr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",he=Vi();try{ae=Du(he)}catch{ae=Du(unescape(encodeURIComponent(he)))}return"data:application/pdf;filename="+I.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ut)==="[object Window]"){var Le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$e=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(Le=I.pdfObjectUrl,$e="");var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Le+'"'+$e+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",_t=Ut.open();return _t!==null&&_t.document.write(it),_t}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ut)==="[object Window]"){var Tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Xt=Ut.open();if(Xt!==null){Xt.document.write(Tt);var Yt=this;Xt.document.documentElement.querySelector("#pdfViewer").onload=function(){Xt.document.title=I.filename,Xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Yt.output("bloburl"))}}return Xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ut)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',Br=Ut.open();if(Br!==null&&(Br.document.write(lr),Br.document.title=I.filename),Br||typeof safari=="undefined")return Br;break;case"datauri":case"dataurl":return Ut.document.location.href=this.output("datauristring",I);default:return null}}),bl=function(f){return Array.isArray(gt)===!0&&gt.indexOf(f)>-1};switch(i){case"pt":Ne=1;break;case"mm":Ne=72/25.4;break;case"cm":Ne=72/2.54;break;case"in":Ne=72;break;case"px":Ne=bl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ne=12;break;case"ex":Ne=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Ne=i}var An=null;Y(),ne();var hd=function(f){return p!==null?An.encryptor(f,0):function(I){return I}},yl=m.__private__.getPageInfo=m.getPageInfo=function(f){if(isNaN(f)||f%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:tt[f].objId,pageNumber:f,pageContext:tt[f]}},Vt=m.__private__.getPageInfoByObjId=function(f){if(isNaN(f)||f%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in tt)if(tt[I].objId===f)break;return yl(I)},fd=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:tt[q].objId,pageNumber:q,pageContext:tt[q]}};m.addPage=function(){return ml.apply(this,arguments),this},m.setPage=function(){return gl.apply(this,arguments),be.call(this,xe[q]),this},m.insertPage=function(f){return this.addPage(),this.movePage(q,f),this},m.movePage=function(f,I){var ae,he;if(f>I){ae=xe[f],he=tt[f];for(var Le=f;Le>I;Le--)xe[Le]=xe[Le-1],tt[Le]=tt[Le-1];xe[I]=ae,tt[I]=he,this.setPage(I)}else if(f<I){ae=xe[f],he=tt[f];for(var $e=f;$e<I;$e++)xe[$e]=xe[$e+1],tt[$e]=tt[$e+1];xe[I]=ae,tt[I]=he,this.setPage(I)}return this},m.deletePage=function(){return od.apply(this,arguments),this},m.__private__.text=m.text=function(f,I,ae,he,Le){var $e,it,_t,Tt,Xt,Yt,lr,Br,Hr,sn=(he=he||{}).scope||this;if(typeof f=="number"&&typeof I=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Ln=ae;ae=I,I=f,f=Ln}if(arguments[3]instanceof Ye?(G("The transform parameter of text() with a Matrix value"),Hr=Le):(_t=arguments[4],Tt=arguments[5],_r(lr=arguments[3])==="object"&&lr!==null||(typeof _t=="string"&&(Tt=_t,_t=null),typeof lr=="string"&&(Tt=lr,lr=null),typeof lr=="number"&&(_t=lr,lr=null),he={flags:lr,angle:_t,align:Tt})),isNaN(I)||isNaN(ae)||f==null)throw new Error("Invalid arguments passed to jsPDF.text");if(f.length===0)return sn;var fn="",wi=!1,ei=typeof he.lineHeightFactor=="number"?he.lineHeightFactor:Is,Ii=sn.internal.scaleFactor;function Ll(Nr){return Nr=Nr.split("	").join(Array(he.TabLen||9).join(" ")),Wn(Nr,lr)}function La(Nr){for(var Or,Xr=Nr.concat(),un=[],Qi=Xr.length;Qi--;)typeof(Or=Xr.shift())=="string"?un.push(Or):Array.isArray(Nr)&&(Or.length===1||Or[1]===void 0&&Or[2]===void 0)?un.push(Or[0]):un.push([Or[0],Or[1],Or[2]]);return un}function Pa(Nr,Or){var Xr;if(typeof Nr=="string")Xr=Or(Nr)[0];else if(Array.isArray(Nr)){for(var un,Qi,Ia=Nr.concat(),No=[],El=Ia.length;El--;)typeof(un=Ia.shift())=="string"?No.push(Or(un)[0]):Array.isArray(un)&&typeof un[0]=="string"&&(Qi=Or(un[0],un[1],un[2]),No.push([Qi[0],Qi[1],Qi[2]]));Xr=No}return Xr}var wo=!1,Na=!0;if(typeof f=="string")wo=!0;else if(Array.isArray(f)){var Oa=f.concat();it=[];for(var jo,Cn=Oa.length;Cn--;)(typeof(jo=Oa.shift())!="string"||Array.isArray(jo)&&typeof jo[0]!="string")&&(Na=!1);wo=Na}if(wo===!1)throw new Error('Type of text must be string or Array. "'+f+'" is not recognized.');typeof f=="string"&&(f=f.match(/[\r?\n]/)?f.split(/\r\n|\r|\n/g):[f]);var So=Me/sn.internal.scaleFactor,Co=So*(ei-1);switch(he.baseline){case"bottom":ae-=Co;break;case"top":ae+=So-Co;break;case"hanging":ae+=So-2*Co;break;case"middle":ae+=So/2-Co}if((Yt=he.maxWidth||0)>0&&(typeof f=="string"?f=sn.splitTextToSize(f,Yt):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(Nr,Or){return Nr.concat(sn.splitTextToSize(Or,Yt))},[]))),$e={text:f,x:I,y:ae,options:he,mutex:{pdfEscape:Wn,activeFontKey:Fe,fonts:Nt,activeFontSize:Me}},rt.publish("preProcessText",$e),f=$e.text,_t=(he=$e.options).angle,!(Hr instanceof Ye)&&_t&&typeof _t=="number"){_t*=Math.PI/180,he.rotationDirection===0&&(_t=-_t),H===T.ADVANCED&&(_t=-_t);var _o=Math.cos(_t),Ra=Math.sin(_t);Hr=new Ye(_o,Ra,-Ra,_o,0,0)}else _t&&_t instanceof Ye&&(Hr=_t);H!==T.ADVANCED||Hr||(Hr=lt),(Xt=he.charSpace||bo)!==void 0&&(fn+=B(A(Xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Br=he.horizontalScale)!==void 0&&(fn+=B(100*Br)+` Tz
`),he.lang;var Un=-1,Sd=he.renderingMode!==void 0?he.renderingMode:he.stroke,Ea=sn.internal.getCurrentPageInfo().pageContext;switch(Sd){case 0:case!1:case"fill":Un=0;break;case 1:case!0:case"stroke":Un=1;break;case 2:case"fillThenStroke":Un=2;break;case 3:case"invisible":Un=3;break;case 4:case"fillAndAddForClipping":Un=4;break;case 5:case"strokeAndAddPathForClipping":Un=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Un=6;break;case 7:case"addToPathForClipping":Un=7}var Pl=Ea.usedRenderingMode!==void 0?Ea.usedRenderingMode:-1;Un!==-1?fn+=Un+` Tr
`:Pl!==-1&&(fn+=`0 Tr
`),Un!==-1&&(Ea.usedRenderingMode=Un),Tt=he.align||"left";var ci,ko=Me*ei,Nl=sn.internal.pageSize.getWidth(),Ol=Nt[Fe];Xt=he.charSpace||bo,Yt=he.maxWidth||0,lr=Object.assign({autoencode:!0,noBOM:!0},he.flags);var ds=[],Bs=function(Nr){return sn.getStringUnitWidth(Nr,{font:Ol,charSpace:Xt,fontSize:Me,doKerning:!1})*Me/Ii};if(Object.prototype.toString.call(f)==="[object Array]"){var Hn;it=La(f),Tt!=="left"&&(ci=it.map(Bs));var zn,us=0;if(Tt==="right"){I-=ci[0],f=[],Cn=it.length;for(var Ji=0;Ji<Cn;Ji++)Ji===0?(zn=Fi(I),Hn=Yi(ae)):(zn=A(us-ci[Ji]),Hn=-ko),f.push([it[Ji],zn,Hn]),us=ci[Ji]}else if(Tt==="center"){I-=ci[0]/2,f=[],Cn=it.length;for(var Xi=0;Xi<Cn;Xi++)Xi===0?(zn=Fi(I),Hn=Yi(ae)):(zn=A((us-ci[Xi])/2),Hn=-ko),f.push([it[Xi],zn,Hn]),us=ci[Xi]}else if(Tt==="left"){f=[],Cn=it.length;for(var Ao=0;Ao<Cn;Ao++)f.push(it[Ao])}else if(Tt==="justify"&&Ol.encoding==="Identity-H"){f=[],Cn=it.length,Yt=Yt!==0?Yt:Nl;for(var Ki=0,Jr=0;Jr<Cn;Jr++)if(Hn=Jr===0?Yi(ae):-ko,zn=Jr===0?Fi(I):Ki,Jr<Cn-1){var Ta=A((Yt-ci[Jr])/(it[Jr].split(" ").length-1)),Fn=it[Jr].split(" ");f.push([Fn[0]+" ",zn,Hn]),Ki=0;for(var di=1;di<Fn.length;di++){var Lo=(Bs(Fn[di-1]+" "+Fn[di])-Bs(Fn[di]))*Ii+Ta;di==Fn.length-1?f.push([Fn[di],Lo,0]):f.push([Fn[di]+" ",Lo,0]),Ki-=Lo}}else f.push([it[Jr],zn,Hn]);f.push(["",Ki,0])}else{if(Tt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(f=[],Cn=it.length,Yt=Yt!==0?Yt:Nl,Jr=0;Jr<Cn;Jr++)Hn=Jr===0?Yi(ae):-ko,zn=Jr===0?Fi(I):0,Jr<Cn-1?ds.push(B(A((Yt-ci[Jr])/(it[Jr].split(" ").length-1)))):ds.push(0),f.push([it[Jr],zn,Hn])}}var Rl=typeof he.R2L=="boolean"?he.R2L:pt;Rl===!0&&(f=Pa(f,function(Nr,Or,Xr){return[Nr.split("").reverse().join(""),Or,Xr]})),$e={text:f,x:I,y:ae,options:he,mutex:{pdfEscape:Wn,activeFontKey:Fe,fonts:Nt,activeFontSize:Me}},rt.publish("postProcessText",$e),f=$e.text,wi=$e.mutex.isHex||!1;var za=Nt[Fe].encoding;za!=="WinAnsiEncoding"&&za!=="StandardEncoding"||(f=Pa(f,function(Nr,Or,Xr){return[Ll(Nr),Or,Xr]})),it=La(f),f=[];for(var qs,Ws,hs,Us=0,Po=1,Hs=Array.isArray(it[0])?Po:Us,fs="",Fa=function(Nr,Or,Xr){var un="";return Xr instanceof Ye?(Xr=typeof he.angle=="number"?Et(Xr,new Ye(1,0,0,1,Nr,Or)):Et(new Ye(1,0,0,1,Nr,Or),Xr),H===T.ADVANCED&&(Xr=Et(new Ye(1,0,0,-1,0,0),Xr)),un=Xr.join(" ")+` Tm
`):un=B(Nr)+" "+B(Or)+` Td
`,un},ui=0;ui<it.length;ui++){switch(fs="",Hs){case Po:hs=(wi?"<":"(")+it[ui][0]+(wi?">":")"),qs=parseFloat(it[ui][1]),Ws=parseFloat(it[ui][2]);break;case Us:hs=(wi?"<":"(")+it[ui]+(wi?">":")"),qs=Fi(I),Ws=Yi(ae)}ds!==void 0&&ds[ui]!==void 0&&(fs=ds[ui]+` Tw
`),ui===0?f.push(fs+Fa(qs,Ws,Hr)+hs):Hs===Us?f.push(fs+hs):Hs===Po&&f.push(fs+Fa(qs,Ws,Hr)+hs)}f=Hs===Us?f.join(` Tj
T* `):f.join(` Tj
`),f+=` Tj
`;var hi=`BT
/`;return hi+=Fe+" "+Me+` Tf
`,hi+=B(Me*ei)+` TL
`,hi+=Ms+`
`,hi+=fn,hi+=f,ee(hi+="ET"),b[Fe]=!0,sn};var pd=m.__private__.clip=m.clip=function(f){return ee(f==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return pd("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ee("n"),this};var zi=m.__private__.isValidStyle=function(f){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(f)!==-1&&(I=!0),I};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(f){return zi(f)&&(h=f),this};var vl=m.__private__.getStyle=m.getStyle=function(f){var I=h;switch(f){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=f}return I},wl=m.close=function(){return ee("h"),this};m.stroke=function(){return ee("S"),this},m.fill=function(f){return go("f",f),this},m.fillEvenOdd=function(f){return go("f*",f),this},m.fillStroke=function(f){return go("B",f),this},m.fillStrokeEvenOdd=function(f){return go("B*",f),this};var go=function(f,I){_r(I)==="object"?gd(I,f):ee(f)},ba=function(f){f===null||H===T.ADVANCED&&f===void 0||(f=vl(f),ee(f))};function md(f,I,ae,he,Le){var $e=new Vo(I||this.boundingBox,ae||this.xStep,he||this.yStep,this.gState,Le||this.matrix);$e.stream=this.stream;var it=f+"$$"+this.cloneIndex+++"$$";return je(it,$e),$e}var gd=function(f,I){var ae=zt[f.key],he=mt[ae];if(he instanceof Xs)ee("q"),ee(xd(I)),he.gState&&m.setGState(he.gState),ee(f.matrix.toString()+" cm"),ee("/"+ae+" sh"),ee("Q");else if(he instanceof Vo){var Le=new Ye(1,0,0,-1,0,cs());f.matrix&&(Le=Le.multiply(f.matrix||lt),ae=md.call(he,f.key,f.boundingBox,f.xStep,f.yStep,Le).id),ee("q"),ee("/Pattern cs"),ee("/"+ae+" scn"),he.gState&&m.setGState(he.gState),ee(I),ee("Q")}},xd=function(f){switch(f){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ya=m.moveTo=function(f,I){return ee(B(A(f))+" "+B(z(I))+" m"),this},Fs=m.lineTo=function(f,I){return ee(B(A(f))+" "+B(z(I))+" l"),this},as=m.curveTo=function(f,I,ae,he,Le,$e){return ee([B(A(f)),B(z(I)),B(A(ae)),B(z(he)),B(A(Le)),B(z($e)),"c"].join(" ")),this};m.__private__.line=m.line=function(f,I,ae,he,Le){if(isNaN(f)||isNaN(I)||isNaN(ae)||isNaN(he)||!zi(Le))throw new Error("Invalid arguments passed to jsPDF.line");return H===T.COMPAT?this.lines([[ae-f,he-I]],f,I,[1,1],Le||"S"):this.lines([[ae-f,he-I]],f,I,[1,1]).stroke()},m.__private__.lines=m.lines=function(f,I,ae,he,Le,$e){var it,_t,Tt,Xt,Yt,lr,Br,Hr,sn,Ln,fn,wi;if(typeof f=="number"&&(wi=ae,ae=I,I=f,f=wi),he=he||[1,1],$e=$e||!1,isNaN(I)||isNaN(ae)||!Array.isArray(f)||!Array.isArray(he)||!zi(Le)||typeof $e!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ya(I,ae),it=he[0],_t=he[1],Xt=f.length,Ln=I,fn=ae,Tt=0;Tt<Xt;Tt++)(Yt=f[Tt]).length===2?(Ln=Yt[0]*it+Ln,fn=Yt[1]*_t+fn,Fs(Ln,fn)):(lr=Yt[0]*it+Ln,Br=Yt[1]*_t+fn,Hr=Yt[2]*it+Ln,sn=Yt[3]*_t+fn,Ln=Yt[4]*it+Ln,fn=Yt[5]*_t+fn,as(lr,Br,Hr,sn,Ln,fn));return $e&&wl(),ba(Le),this},m.path=function(f){for(var I=0;I<f.length;I++){var ae=f[I],he=ae.c;switch(ae.op){case"m":ya(he[0],he[1]);break;case"l":Fs(he[0],he[1]);break;case"c":as.apply(this,he);break;case"h":wl()}}return this},m.__private__.rect=m.rect=function(f,I,ae,he,Le){if(isNaN(f)||isNaN(I)||isNaN(ae)||isNaN(he)||!zi(Le))throw new Error("Invalid arguments passed to jsPDF.rect");return H===T.COMPAT&&(he=-he),ee([B(A(f)),B(z(I)),B(A(ae)),B(A(he)),"re"].join(" ")),ba(Le),this},m.__private__.triangle=m.triangle=function(f,I,ae,he,Le,$e,it){if(isNaN(f)||isNaN(I)||isNaN(ae)||isNaN(he)||isNaN(Le)||isNaN($e)||!zi(it))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-f,he-I],[Le-ae,$e-he],[f-Le,I-$e]],f,I,[1,1],it,!0),this},m.__private__.roundedRect=m.roundedRect=function(f,I,ae,he,Le,$e,it){if(isNaN(f)||isNaN(I)||isNaN(ae)||isNaN(he)||isNaN(Le)||isNaN($e)||!zi(it))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var _t=4/3*(Math.SQRT2-1);return Le=Math.min(Le,.5*ae),$e=Math.min($e,.5*he),this.lines([[ae-2*Le,0],[Le*_t,0,Le,$e-$e*_t,Le,$e],[0,he-2*$e],[0,$e*_t,-Le*_t,$e,-Le,$e],[2*Le-ae,0],[-Le*_t,0,-Le,-$e*_t,-Le,-$e],[0,2*$e-he],[0,-$e*_t,Le*_t,-$e,Le,-$e]],f+Le,I,[1,1],it,!0),this},m.__private__.ellipse=m.ellipse=function(f,I,ae,he,Le){if(isNaN(f)||isNaN(I)||isNaN(ae)||isNaN(he)||!zi(Le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $e=4/3*(Math.SQRT2-1)*ae,it=4/3*(Math.SQRT2-1)*he;return ya(f+ae,I),as(f+ae,I-it,f+$e,I-he,f,I-he),as(f-$e,I-he,f-ae,I-it,f-ae,I),as(f-ae,I+it,f-$e,I+he,f,I+he),as(f+$e,I+he,f+ae,I+it,f+ae,I),ba(Le),this},m.__private__.circle=m.circle=function(f,I,ae,he){if(isNaN(f)||isNaN(I)||isNaN(ae)||!zi(he))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(f,I,ae,ae,he)},m.setFont=function(f,I,ae){return ae&&(I=D(I,ae)),Fe=xl(f,I,{disableWarning:!1}),this};var bd=m.__private__.getFont=m.getFont=function(){return Nt[xl.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var f,I,ae={};for(f in Ct)if(Ct.hasOwnProperty(f))for(I in ae[f]=[],Ct[f])Ct[f].hasOwnProperty(I)&&ae[f].push(I);return ae},m.addFont=function(f,I,ae,he,Le){var $e=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$e.indexOf(arguments[3])!==-1?Le=arguments[3]:arguments[3]&&$e.indexOf(arguments[3])==-1&&(ae=D(ae,he)),Le=Le||"Identity-H",ma.call(this,f,I,ae,Le)};var Is,va=t.lineWidth||.200025,xo=m.__private__.getLineWidth=m.getLineWidth=function(){return va},jl=m.__private__.setLineWidth=m.setLineWidth=function(f){return va=f,ee(B(A(f))+" w"),this};m.__private__.setLineDash=qt.API.setLineDash=qt.API.setLineDashPattern=function(f,I){if(f=f||[],I=I||0,isNaN(I)||!Array.isArray(f))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return f=f.map(function(ae){return B(A(ae))}).join(" "),I=B(A(I)),ee("["+f+"] "+I+" d"),this};var Sl=m.__private__.getLineHeight=m.getLineHeight=function(){return Me*Is};m.__private__.getLineHeight=m.getLineHeight=function(){return Me*Is};var Cl=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(f){return typeof(f=f||1.15)=="number"&&(Is=f),this},_l=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Is};Cl(t.lineHeight);var Fi=m.__private__.getHorizontalCoordinate=function(f){return A(f)},Yi=m.__private__.getVerticalCoordinate=function(f){return H===T.ADVANCED?f:tt[q].mediaBox.topRightY-tt[q].mediaBox.bottomLeftY-A(f)},yd=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(f){return B(Fi(f))},ls=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(f){return B(Yi(f))},vi=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ye(vi)},m.__private__.setStrokeColor=m.setDrawColor=function(f,I,ae,he){return vi=vt({ch1:f,ch2:I,ch3:ae,ch4:he,pdfColorType:"draw",precision:2}),ee(vi),this};var wa=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ye(wa)},m.__private__.setFillColor=m.setFillColor=function(f,I,ae,he){return wa=vt({ch1:f,ch2:I,ch3:ae,ch4:he,pdfColorType:"fill",precision:2}),ee(wa),this};var Ms=t.textColor||"0 g",vd=m.__private__.getTextColor=m.getTextColor=function(){return ye(Ms)};m.__private__.setTextColor=m.setTextColor=function(f,I,ae,he){return Ms=vt({ch1:f,ch2:I,ch3:ae,ch4:he,pdfColorType:"text",precision:3}),this};var bo=t.charSpace,wd=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(bo||0)};m.__private__.setCharSpace=m.setCharSpace=function(f){if(isNaN(f))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return bo=f,this};var ja=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(f){var I=m.CapJoinStyles[f];if(I===void 0)throw new Error("Line cap style of '"+f+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ja=I,ee(I+" J"),this};var Sa=0;m.__private__.setLineJoin=m.setLineJoin=function(f){var I=m.CapJoinStyles[f];if(I===void 0)throw new Error("Line join style of '"+f+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sa=I,ee(I+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(f){if(f=f||0,isNaN(f))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(B(A(f))+" M"),this},m.GState=Ic,m.setGState=function(f){(f=typeof f=="string"?Ft[fr[f]]:kl(null,f)).equals(Te)||(ee("/"+f.id+" gs"),Te=f)};var kl=function(f,I){if(!f||!fr[f]){var ae=!1;for(var he in Ft)if(Ft.hasOwnProperty(he)&&Ft[he].equals(I)){ae=!0;break}if(ae)I=Ft[he];else{var Le="GS"+(Object.keys(Ft).length+1).toString(10);Ft[Le]=I,I.id=Le}return f&&(fr[f]=I.id),rt.publish("addGState",I),I}};m.addGState=function(f,I){return kl(f,I),this},m.saveGraphicsState=function(){return ee("q"),dt.push({key:Fe,size:Me,color:Ms}),this},m.restoreGraphicsState=function(){ee("Q");var f=dt.pop();return Fe=f.key,Me=f.size,Ms=f.color,Te=null,this},m.setCurrentTransformationMatrix=function(f){return ee(f.toString()+" cm"),this},m.comment=function(f){return ee("#"+f),this};var yo=function(f,I){var ae=f||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function($e){isNaN($e)||(ae=parseFloat($e))}});var he=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return he},set:function($e){isNaN($e)||(he=parseFloat($e))}});var Le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Le},set:function($e){Le=$e.toString()}}),this},Ca=function(f,I,ae,he){yo.call(this,f,I),this.type="rect";var Le=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Le},set:function(it){isNaN(it)||(Le=parseFloat(it))}});var $e=he||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $e},set:function(it){isNaN(it)||($e=parseFloat(it))}}),this},_a=function(){this.page=He,this.currentPage=q,this.pages=xe.slice(0),this.pagesContext=tt.slice(0),this.x=st,this.y=Ge,this.matrix=ot,this.width=Ds(q),this.height=cs(q),this.outputDestination=Ie,this.id="",this.objectNumber=-1};_a.prototype.restore=function(){He=this.page,q=this.currentPage,tt=this.pagesContext,xe=this.pages,st=this.x,Ge=this.y,ot=this.matrix,ka(q,this.width),Aa(q,this.height),Ie=this.outputDestination};var Al=function(f,I,ae,he,Le){Ve.push(new _a),He=q=0,xe=[],st=f,Ge=I,ot=Le,ga([ae,he])},jd=function(f){if(It[f])Ve.pop().restore();else{var I=new _a,ae="Xo"+(Object.keys(jt).length+1).toString(10);I.id=ae,It[f]=ae,jt[ae]=I,rt.publish("addFormObject",I),Ve.pop().restore()}};for(var vo in m.beginFormObject=function(f,I,ae,he,Le){return Al(f,I,ae,he,Le),this},m.endFormObject=function(f){return jd(f),this},m.doFormObject=function(f,I){var ae=jt[It[f]];return ee("q"),ee(I.toString()+" cm"),ee("/"+ae.id+" Do"),ee("Q"),this},m.getFormObject=function(f){var I=jt[It[f]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},m.save=function(f,I){return f=f||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(Ys(po(Vi()),f),typeof Ys.unload=="function"&&Ut.setTimeout&&setTimeout(Ys.unload,911),this):new Promise(function(ae,he){try{var Le=Ys(po(Vi()),f);typeof Ys.unload=="function"&&Ut.setTimeout&&setTimeout(Ys.unload,911),ae(Le)}catch($e){he($e.message)}})},qt.API)qt.API.hasOwnProperty(vo)&&(vo==="events"&&qt.API.events.length?function(f,I){var ae,he,Le;for(Le=I.length-1;Le!==-1;Le--)ae=I[Le][0],he=I[Le][1],f.subscribe.apply(f,[ae].concat(typeof he=="function"?[he]:he))}(rt,qt.API.events):m[vo]=qt.API[vo]);var Ds=m.getPageWidth=function(f){return(tt[f=f||q].mediaBox.topRightX-tt[f].mediaBox.bottomLeftX)/Ne},ka=m.setPageWidth=function(f,I){tt[f].mediaBox.topRightX=I*Ne+tt[f].mediaBox.bottomLeftX},cs=m.getPageHeight=function(f){return(tt[f=f||q].mediaBox.topRightY-tt[f].mediaBox.bottomLeftY)/Ne},Aa=m.setPageHeight=function(f,I){tt[f].mediaBox.topRightY=I*Ne+tt[f].mediaBox.bottomLeftY};return m.internal={pdfEscape:Wn,getStyle:vl,getFont:bd,getFontSize:Ze,getCharSpace:wd,getTextColor:vd,getLineHeight:Sl,getLineHeightFactor:_l,getLineWidth:xo,write:Ae,getHorizontalCoordinate:Fi,getVerticalCoordinate:Yi,getCoordinateString:yd,getVerticalCoordinateString:ls,collections:{},newObject:Ot,newAdditionalObject:jn,newObjectDeferred:Ht,newObjectDeferredBegin:sr,getFilters:At,putStream:Rt,events:rt,scaleFactor:Ne,pageSize:{getWidth:function(){return Ds(q)},setWidth:function(f){ka(q,f)},getHeight:function(){return cs(q)},setHeight:function(f){Aa(q,f)}},encryptionOptions:p,encryption:An,getEncryptor:hd,output:mo,getNumberOfPages:ad,pages:xe,out:ee,f2:L,f3:j,getPageInfo:yl,getPageInfoByObjId:Vt,getCurrentPageInfo:fd,getPDFVersion:w,Point:yo,Rectangle:Ca,Matrix:Ye,hasHotfix:bl},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ds(q)},set:function(f){ka(q,f)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return cs(q)},set:function(f){Aa(q,f)},enumerable:!0,configurable:!0}),sd.call(m,ce),Fe="F1",ml(o,n),rt.publish("initialized"),m}Ho.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ho.prototype.toHexString=function(t){return t.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ho.prototype.hexToBytes=function(t){for(var r=[],n=0;n<t.length;n+=2)r.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return r.join("")},Ho.prototype.processOwnerPassword=function(t,r){return qu(Bu(r).substr(0,5),t)},Ho.prototype.encryptor=function(t,r){var n=Bu(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&r,r>>8&255)).substr(0,10);return function(i){return qu(n,i)}},Ic.prototype.equals=function(t){var r,n="id,objectNumber,equals";if(!t||_r(t)!==_r(this))return!1;var i=0;for(r in this)if(!(n.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!t.hasOwnProperty(r)||this[r]!==t[r])return!1;i++}for(r in t)t.hasOwnProperty(r)&&n.indexOf(r)<0&&i--;return i===0},qt.API={events:[]},qt.version="3.0.1";var Gr=qt.API,sh=1,uo=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qo=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jt=function(t){return t.toFixed(2)},Cs=function(t){return t.toFixed(5)};Gr.__acroform__={};var Zn=function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t},Vf=function(t){return t*sh},Bi=function(t){var r=new H0,n=Lt.internal.getHeight(t)||0,i=Lt.internal.getWidth(t)||0;return r.BBox=[0,0,Number(Jt(i)),Number(Jt(n))],r},Yy=Gr.__acroform__.setBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<r},Jy=Gr.__acroform__.clearBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<r)},Xy=Gr.__acroform__.getBit=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<r)==0?0:1},Kr=Gr.__acroform__.getBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Xy(t,r-1)},Qr=Gr.__acroform__.setBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Yy(t,r-1)},Zr=Gr.__acroform__.clearBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Jy(t,r-1)},Ky=Gr.__acroform__.calculateCoordinates=function(t,r){var n=r.internal.getHorizontalCoordinate,i=r.internal.getVerticalCoordinate,o=t[0],s=t[1],a=t[2],c=t[3],u={};return u.lowerLeft_X=n(o)||0,u.lowerLeft_Y=i(s+c)||0,u.upperRight_X=n(o+a)||0,u.upperRight_Y=i(s)||0,[Number(Jt(u.lowerLeft_X)),Number(Jt(u.lowerLeft_Y)),Number(Jt(u.upperRight_X)),Number(Jt(u.upperRight_Y))]},Qy=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var r=[],n=t._V||t.DV,i=Wu(t,n),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(t.scope.__private__.encodeColorString(t.color)),r.push("/"+o+" "+Jt(i.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC");var s=Bi(t);return s.scope=t.scope,s.stream=r.join(`
`),s}},Wu=function(t,r){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},o=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");o=t.multiline?o.map(function(j){return j.split(`
`)}):o.map(function(j){return[j]});var s=n,a=Lt.internal.getHeight(t)||0;a=a<0?-a:a;var c=Lt.internal.getWidth(t)||0;c=c<0?-c:c;var u=function(j,A,E){if(j+1<o.length){var z=A+" "+o[j+1][0];return dc(z,t,E).width<=c-4}return!1};s++;e:for(;s>0;){r="",s--;var h,p,x=dc("3",t,s).height,b=t.multiline?a-s:(a-x)/2,m=b+=2,_=0,w=0,O=0;if(s<=0){r=`(...) Tj
`,r+="% Width of Text: "+dc(r,t,s=12).width+", FieldWidth:"+c+`
`;break}for(var k="",T=0,H=0;H<o.length;H++)if(o.hasOwnProperty(H)){var Z=!1;if(o[H].length!==1&&O!==o[H].length-1){if((x+2)*(T+2)+2>a)continue e;k+=o[H][O],Z=!0,w=H,H--}else{k=(k+=o[H][O]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var P=parseInt(H),D=u(P,k,s),B=H>=o.length-1;if(D&&!B){k+=" ",O=0;continue}if(D||B){if(B)w=P;else if(t.multiline&&(x+2)*(T+2)+2>a)continue e}else{if(!t.multiline||(x+2)*(T+2)+2>a)continue e;w=P}}for(var G="",R=_;R<=w;R++){var L=o[R];if(t.multiline){if(R===w){G+=L[O]+" ",O=(O+1)%L.length;continue}if(R===_){G+=L[L.length-1]+" ";continue}}G+=L[0]+" "}switch(G=G.substr(G.length-1)==" "?G.substr(0,G.length-1):G,p=dc(G,t,s).width,t.textAlign){case"right":h=c-p-2;break;case"center":h=(c-p)/2;break;case"left":default:h=2}r+=Jt(h)+" "+Jt(m)+` Td
`,r+="("+uo(G)+`) Tj
`,r+=-Jt(h)+` 0 Td
`,m=-(s+2),p=0,_=Z?w:w+1,T++,k=""}break}return i.text=r,i.fontSize=s,i},dc=function(t,r,n){var i=r.scope.internal.getFont(r.fontName,r.fontStyle),o=r.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:r.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},Zy={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ev=function(t,r){var n={type:"reference",object:t};r.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&r.internal.getPageInfo(t.page).pageContext.annotations.push(n)},tv=function(t,r){for(var n in t)if(t.hasOwnProperty(n)){var i=n,o=t[n];r.internal.newObjectDeferredBegin(o.objId,!0),_r(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[i]}},rv=function(t,r){if(r.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ri.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Zy)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");sh=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new $0,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s.objId=void 0,s.hasAnnotation&&ev(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,o){var s=!i;for(var a in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(a)){var c=i[a],u=[],h=c.Rect;if(c.Rect&&(c.Rect=Ky(c.Rect,o)),o.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Lt.createDefaultAppearanceStream(c),_r(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=h,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=Qy(c);u.push({key:"AP",value:"<</N "+p+">>"}),o.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var x="";for(var b in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(b)){var m=c.appearanceStreamContent[b];if(x+="/"+b+" ",x+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var _=m[a];typeof _=="function"&&(_=_.call(o,c)),x+="/"+a+" "+_+" ",o.internal.acroformPlugin.xForms.indexOf(_)>=0||o.internal.acroformPlugin.xForms.push(_)}}else typeof(_=m)=="function"&&(_=_.call(o,c)),x+="/"+a+" "+_,o.internal.acroformPlugin.xForms.indexOf(_)>=0||o.internal.acroformPlugin.xForms.push(_);x+=">>"}u.push({key:"AP",value:`<<
`+x+">>"})}o.internal.putStream({additionalKeyValues:u,objectId:c.objId}),o.internal.out("endobj")}s&&tv(o.internal.acroformPlugin.xForms,o)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},U0=Gr.__acroform__.arrayToPdfArray=function(t,r,n){var i=function(a){return a};if(Array.isArray(t)){for(var o="[",s=0;s<t.length;s++)switch(s!==0&&(o+=" "),_r(t[s])){case"boolean":case"number":case"object":o+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(r!==void 0&&n&&(i=n.internal.getEncryptor(r)),o+="("+uo(i(t[s].toString()))+")"):o+=t[s].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bu=function(t,r,n){var i=function(o){return o};return r!==void 0&&n&&(i=n.internal.getEncryptor(r)),(t=t||"").toString(),t="("+uo(i(t))+")"},qi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qi.prototype.toString=function(){return this.objId+" 0 R"},qi.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},qi.prototype.getKeyValueListForStream=function(){var t=[],r=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in r)if(Object.getOwnPropertyDescriptor(this,r[n]).configurable===!1){var i=r[n],o=this[i];o&&(Array.isArray(o)?t.push({key:i,value:U0(o,this.objId,this.scope)}):o instanceof qi?(o.scope=this.scope,t.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:i,value:o}))}return t};var H0=function(){qi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Zn(H0,qi);var $0=function(){qi.call(this);var t,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+uo(n(t))+")"}},set:function(n){t=n}})};Zn($0,qi);var Ri=function t(){qi.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');r=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Kr(r,3)},set:function(k){k?this.F=Qr(r,3):this.F=Zr(r,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');n=k}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(k){i=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(k){i[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(k){i[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(k){i[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(k){i[3]=k}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Mc)return;s="FieldObject"+t.FieldNum++}var k=function(T){return T};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+uo(k(s))+")"},set:function(k){s=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(k){s=k}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(k){c=k}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(k){u=k}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/sh:h},set:function(k){h=k}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(k){p=k}});var x="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!x||this instanceof Mc||this instanceof Zs))return bu(x,this.objId,this.scope)},set:function(k){k=k.toString(),x=k}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof xn?b:bu(b,this.objId,this.scope)},set:function(k){k=k.toString(),b=this instanceof xn?k:k.substr(0,1)==="("?qo(k.substr(1,k.length-2)):qo(k)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xn?qo(b.substr(1,b.length-1)):b},set:function(k){k=k.toString(),b=this instanceof xn?"/"+k:k}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof xn?m:bu(m,this.objId,this.scope)},set:function(k){k=k.toString(),m=this instanceof xn?k:k.substr(0,1)==="("?qo(k.substr(1,k.length-2)):qo(k)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xn?qo(m.substr(1,m.length-1)):m},set:function(k){k=k.toString(),m=this instanceof xn?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(k){k=!!k,w=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(k){_=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,1)},set:function(k){k?this.Ff=Qr(this.Ff,1):this.Ff=Zr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,2)},set:function(k){k?this.Ff=Qr(this.Ff,2):this.Ff=Zr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,3)},set:function(k){k?this.Ff=Qr(this.Ff,3):this.Ff=Zr(this.Ff,3)}});var O=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(O!==null)return O},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');O=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(O){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:O=2;break;case"center":case 1:O=1;break;case"left":case 0:default:O=0}}})};Zn(Ri,qi);var Zo=function(){Ri.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return U0(r,this.objId,this.scope)},set:function(n){var i,o;o=[],typeof(i=n)=="string"&&(o=function(s,a,c){c||(c=1);for(var u,h=[];u=a.exec(s);)h.push(u[c]);return h}(i,/\((.*?)\)/g)),r=o}}),this.getOptions=function(){return r},this.setOptions=function(n){r=n,this.sort&&r.sort()},this.addOption=function(n){n=(n=n||"").toString(),r.push(n),this.sort&&r.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();r.indexOf(n)!==-1&&(r.splice(r.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,18)},set:function(n){n?this.Ff=Qr(this.Ff,18):this.Ff=Zr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Qr(this.Ff,19):this.Ff=Zr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,20)},set:function(n){n?(this.Ff=Qr(this.Ff,20),r.sort()):this.Ff=Zr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,22)},set:function(n){n?this.Ff=Qr(this.Ff,22):this.Ff=Zr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,23)},set:function(n){n?this.Ff=Qr(this.Ff,23):this.Ff=Zr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,27)},set:function(n){n?this.Ff=Qr(this.Ff,27):this.Ff=Zr(this.Ff,27)}}),this.hasAppearanceStream=!1};Zn(Zo,Ri);var ea=function(){Zo.call(this),this.fontName="helvetica",this.combo=!1};Zn(ea,Zo);var ta=function(){ea.call(this),this.combo=!0};Zn(ta,ea);var bc=function(){ta.call(this),this.edit=!0};Zn(bc,ta);var xn=function(){Ri.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,15)},set:function(n){n?this.Ff=Qr(this.Ff,15):this.Ff=Zr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,16)},set:function(n){n?this.Ff=Qr(this.Ff,16):this.Ff=Zr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,17)},set:function(n){n?this.Ff=Qr(this.Ff,17):this.Ff=Zr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,26)},set:function(n){n?this.Ff=Qr(this.Ff,26):this.Ff=Zr(this.Ff,26)}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+uo(n(r[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){_r(n)==="object"&&(r=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(n){typeof n=="string"&&(r.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Zn(xn,Ri);var yc=function(){xn.call(this),this.pushButton=!0};Zn(yc,xn);var ra=function(){xn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r!==void 0?r:[]}})};Zn(ra,xn);var Mc=function(){var t,r;Ri.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(o){r=o}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(c){return c};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),i)a.push("/"+s+" ("+uo(o(i[s]))+")");return a.push(">>"),a.join(`
`)},set:function(o){_r(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Lt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Zn(Mc,Ri),ra.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var n=this.Kids[r];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},ra.prototype.createOption=function(t){var r=new Mc;return r.Parent=this,r.optionName=t,this.Kids.push(r),nv.call(this.scope,r),r};var vc=function(){xn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Lt.CheckBox.createAppearanceStream()};Zn(vc,xn);var Zs=function(){Ri.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,13)},set:function(r){r?this.Ff=Qr(this.Ff,13):this.Ff=Zr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,21)},set:function(r){r?this.Ff=Qr(this.Ff,21):this.Ff=Zr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,23)},set:function(r){r?this.Ff=Qr(this.Ff,23):this.Ff=Zr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,24)},set:function(r){r?this.Ff=Qr(this.Ff,24):this.Ff=Zr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,25)},set:function(r){r?this.Ff=Qr(this.Ff,25):this.Ff=Zr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,26)},set:function(r){r?this.Ff=Qr(this.Ff,26):this.Ff=Zr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){Number.isInteger(r)&&(t=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Zn(Zs,Ri);var wc=function(){Zs.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Kr(this.Ff,14)},set:function(t){t?this.Ff=Qr(this.Ff,14):this.Ff=Zr(this.Ff,14)}}),this.password=!0};Zn(wc,Zs);var Lt={CheckBox:{createAppearanceStream:function(){return{N:{On:Lt.CheckBox.YesNormal},D:{On:Lt.CheckBox.YesPushDown,Off:Lt.CheckBox.OffPushDown}}},YesPushDown:function(t){var r=Bi(t);r.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),s=Wu(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Jt(Lt.internal.getWidth(t))+" "+Jt(Lt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+Jt(s.fontSize)+" Tf "+o),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),r.stream=n.join(`
`),r},YesNormal:function(t){var r=Bi(t);r.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=[],s=Lt.internal.getHeight(t),a=Lt.internal.getWidth(t),c=Wu(t,t.caption);return o.push("1 g"),o.push("0 0 "+Jt(a)+" "+Jt(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Jt(a-1)+" "+Jt(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Jt(c.fontSize)+" Tf "+i),o.push(c.text),o.push("ET"),o.push("Q"),r.stream=o.join(`
`),r},OffPushDown:function(t){var r=Bi(t);r.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Jt(Lt.internal.getWidth(t))+" "+Jt(Lt.internal.getHeight(t))+" re"),n.push("f"),r.stream=n.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(t){var r={D:{Off:Lt.RadioButton.Circle.OffPushDown},N:{}};return r.N[t]=Lt.RadioButton.Circle.YesNormal,r.D[t]=Lt.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(t){var r=Bi(t);r.scope=t.scope;var n=[],i=Lt.internal.getWidth(t)<=Lt.internal.getHeight(t)?Lt.internal.getWidth(t)/4:Lt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Lt.internal.Bezier_C,s=Number((i*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Cs(Lt.internal.getWidth(t)/2)+" "+Cs(Lt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r},YesPushDown:function(t){var r=Bi(t);r.scope=t.scope;var n=[],i=Lt.internal.getWidth(t)<=Lt.internal.getHeight(t)?Lt.internal.getWidth(t)/4:Lt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),s=Number((o*Lt.internal.Bezier_C).toFixed(5)),a=Number((i*Lt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Cs(Lt.internal.getWidth(t)/2)+" "+Cs(Lt.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),n.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),n.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),n.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Cs(Lt.internal.getWidth(t)/2)+" "+Cs(Lt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r},OffPushDown:function(t){var r=Bi(t);r.scope=t.scope;var n=[],i=Lt.internal.getWidth(t)<=Lt.internal.getHeight(t)?Lt.internal.getWidth(t)/4:Lt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),s=Number((o*Lt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Cs(Lt.internal.getWidth(t)/2)+" "+Cs(Lt.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),n.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),n.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),n.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),n.push("f"),n.push("Q"),r.stream=n.join(`
`),r}},Cross:{createAppearanceStream:function(t){var r={D:{Off:Lt.RadioButton.Cross.OffPushDown},N:{}};return r.N[t]=Lt.RadioButton.Cross.YesNormal,r.D[t]=Lt.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(t){var r=Bi(t);r.scope=t.scope;var n=[],i=Lt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Jt(Lt.internal.getWidth(t)-2)+" "+Jt(Lt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Jt(i.x1.x)+" "+Jt(i.x1.y)+" m"),n.push(Jt(i.x2.x)+" "+Jt(i.x2.y)+" l"),n.push(Jt(i.x4.x)+" "+Jt(i.x4.y)+" m"),n.push(Jt(i.x3.x)+" "+Jt(i.x3.y)+" l"),n.push("s"),n.push("Q"),r.stream=n.join(`
`),r},YesPushDown:function(t){var r=Bi(t);r.scope=t.scope;var n=Lt.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+Jt(Lt.internal.getWidth(t))+" "+Jt(Lt.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Jt(Lt.internal.getWidth(t)-2)+" "+Jt(Lt.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(Jt(n.x1.x)+" "+Jt(n.x1.y)+" m"),i.push(Jt(n.x2.x)+" "+Jt(n.x2.y)+" l"),i.push(Jt(n.x4.x)+" "+Jt(n.x4.y)+" m"),i.push(Jt(n.x3.x)+" "+Jt(n.x3.y)+" l"),i.push("s"),i.push("Q"),r.stream=i.join(`
`),r},OffPushDown:function(t){var r=Bi(t);r.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Jt(Lt.internal.getWidth(t))+" "+Jt(Lt.internal.getHeight(t))+" re"),n.push("f"),r.stream=n.join(`
`),r}}},createDefaultAppearanceStream:function(t){var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+r+" "+t.fontSize+" Tf "+n}};Lt.internal={Bezier_C:.551915024494,calculateCross:function(t){var r=Lt.internal.getWidth(t),n=Lt.internal.getHeight(t),i=Math.min(r,n);return{x1:{x:(r-i)/2,y:(n-i)/2+i},x2:{x:(r-i)/2+i,y:(n-i)/2},x3:{x:(r-i)/2,y:(n-i)/2},x4:{x:(r-i)/2+i,y:(n-i)/2+i}}}},Lt.internal.getWidth=function(t){var r=0;return _r(t)==="object"&&(r=Vf(t.Rect[2])),r},Lt.internal.getHeight=function(t){var r=0;return _r(t)==="object"&&(r=Vf(t.Rect[3])),r};var nv=Gr.addField=function(t){if(rv(this,t),!(t instanceof Ri))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=t).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Gr.AcroFormChoiceField=Zo,Gr.AcroFormListBox=ea,Gr.AcroFormComboBox=ta,Gr.AcroFormEditBox=bc,Gr.AcroFormButton=xn,Gr.AcroFormPushButton=yc,Gr.AcroFormRadioButton=ra,Gr.AcroFormCheckBox=vc,Gr.AcroFormTextField=Zs,Gr.AcroFormPasswordField=wc,Gr.AcroFormAppearance=Lt,Gr.AcroForm={ChoiceField:Zo,ListBox:ea,ComboBox:ta,EditBox:bc,Button:xn,PushButton:yc,RadioButton:ra,CheckBox:vc,TextField:Zs,PasswordField:wc,Appearance:Lt},qt.AcroForm={ChoiceField:Zo,ListBox:ea,ComboBox:ta,EditBox:bc,Button:xn,PushButton:yc,RadioButton:ra,CheckBox:vc,TextField:Zs,PasswordField:wc,Appearance:Lt};qt.AcroForm;function G0(t){return t.reduce(function(r,n,i){return r[n]=i,r},{})}(function(t){t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(j,A){var E,z,oe,re,v,ne=r;if((A=A||r)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(D(j))for(v in n)for(oe=n[v],E=0;E<oe.length;E+=1){for(re=!0,z=0;z<oe[E].length;z+=1)if(oe[E][z]!==void 0&&oe[E][z]!==j[z]){re=!1;break}if(re===!0){ne=v;break}}else for(v in n)for(oe=n[v],E=0;E<oe.length;E+=1){for(re=!0,z=0;z<oe[E].length;z+=1)if(oe[E][z]!==void 0&&oe[E][z]!==j.charCodeAt(z)){re=!1;break}if(re===!0){ne=v;break}}return ne===r&&A!==r&&(ne=A),ne},o=function j(A){for(var E=this.internal.write,z=this.internal.putStream,oe=(0,this.internal.getFilters)();oe.indexOf("FlateEncode")!==-1;)oe.splice(oe.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:A.width}),re.push({key:"Height",value:A.height}),A.colorSpace===O.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===O.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var v="",ne=0,M=A.transparency.length;ne<M;ne++)v+=A.transparency[ne]+" "+A.transparency[ne]+" ";re.push({key:"Mask",value:"["+v+"]"})}A.sMask!==void 0&&re.push({key:"SMask",value:A.objectId+1+" 0 R"});var y=A.filter!==void 0?["/"+A.filter]:void 0;if(z({data:A.data,additionalKeyValues:re,alreadyAppliedFilters:y,objectId:A.objectId}),E("endobj"),"sMask"in A&&A.sMask!==void 0){var Y="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,C={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:Y,data:A.sMask};"filter"in A&&(C.filter=A.filter),j.call(this,C)}if(A.colorSpace===O.INDEXED){var q=this.internal.newObject();z({data:G(new Uint8Array(A.palette)),objectId:q}),E("endobj")}},s=function(){var j=this.internal.collections.addImage_images;for(var A in j)o.call(this,j[A])},a=function(){var j,A=this.internal.collections.addImage_images,E=this.internal.write;for(var z in A)E("/I"+(j=A[z]).index,j.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var j=this.internal.collections.addImage_images;return c.call(this),j},h=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(j){return typeof t["process"+j.toUpperCase()]=="function"},x=function(j){return _r(j)==="object"&&j.nodeType===1},b=function(j,A){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var E=""+j.getAttribute("src");if(E.indexOf("data:image/")===0)return el(unescape(E).split("base64,").pop());var z=t.loadFile(E,!0);if(z!==void 0)return z}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var oe;switch(A){case"PNG":oe="image/png";break;case"WEBP":oe="image/webp";break;case"JPEG":case"JPG":default:oe="image/jpeg"}return el(j.toDataURL(oe,1).split("base64,").pop())}},m=function(j){var A=this.internal.collections.addImage_images;if(A){for(var E in A)if(j===A[E].alias)return A[E]}},_=function(j,A,E){return j||A||(j=-96,A=-96),j<0&&(j=-1*E.width*72/j/this.internal.scaleFactor),A<0&&(A=-1*E.height*72/A/this.internal.scaleFactor),j===0&&(j=A*E.width/E.height),A===0&&(A=j*E.height/E.width),[j,A]},w=function(j,A,E,z,oe,re){var v=_.call(this,E,z,oe),ne=this.internal.getCoordinateString,M=this.internal.getVerticalCoordinateString,y=u.call(this);if(E=v[0],z=v[1],y[oe.index]=oe,re){re*=Math.PI/180;var Y=Math.cos(re),C=Math.sin(re),q=function($){return $.toFixed(4)},N=[q(Y),q(C),q(-1*C),q(Y),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,ne(j),M(A+z),"cm"].join(" ")),this.internal.write(N.join(" ")),this.internal.write([ne(E),"0","0",ne(z),"0","0","cm"].join(" "))):this.internal.write([ne(E),"0","0",ne(z),ne(j),M(A+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+oe.index+" Do"),this.internal.write("Q")},O=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=t.__addimage__.sHashCode=function(j){var A,E,z=0;if(typeof j=="string")for(E=j.length,A=0;A<E;A++)z=(z<<5)-z+j.charCodeAt(A),z|=0;else if(D(j))for(E=j.byteLength/2,A=0;A<E;A++)z=(z<<5)-z+j[A],z|=0;return z},H=t.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var A=!0;return j.length===0&&(A=!1),j.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(A=!1),A},Z=t.__addimage__.extractImageFromDataUrl=function(j){if(j==null||!(j=j.trim()).startsWith("data:"))return null;var A=j.indexOf(",");return A<0?null:j.substring(0,A).trim().endsWith("base64")?j.substring(A+1):null},P=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"};t.__addimage__.isArrayBuffer=function(j){return P()&&j instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(j){return P()&&typeof Uint32Array!="undefined"&&(j instanceof Int8Array||j instanceof Uint8Array||typeof Uint8ClampedArray!="undefined"&&j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array)},B=t.__addimage__.binaryStringToUint8Array=function(j){for(var A=j.length,E=new Uint8Array(A),z=0;z<A;z++)E[z]=j.charCodeAt(z);return E},G=t.__addimage__.arrayBufferToBinaryString=function(j){for(var A="",E=D(j)?j:new Uint8Array(j),z=0;z<E.length;z+=8192)A+=String.fromCharCode.apply(null,E.subarray(z,z+8192));return A};t.addImage=function(){var j,A,E,z,oe,re,v,ne,M;if(typeof arguments[1]=="number"?(A=r,E=arguments[1],z=arguments[2],oe=arguments[3],re=arguments[4],v=arguments[5],ne=arguments[6],M=arguments[7]):(A=arguments[1],E=arguments[2],z=arguments[3],oe=arguments[4],re=arguments[5],v=arguments[6],ne=arguments[7],M=arguments[8]),_r(j=arguments[0])==="object"&&!x(j)&&"imageData"in j){var y=j;j=y.imageData,A=y.format||A||r,E=y.x||E||0,z=y.y||z||0,oe=y.w||y.width||oe,re=y.h||y.height||re,v=y.alias||v,ne=y.compression||ne,M=y.rotation||y.angle||M}var Y=this.internal.getFilters();if(ne===void 0&&Y.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(E)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var C=R.call(this,j,A,v,ne);return w.call(this,E,z,oe,re,C,M),this};var R=function(j,A,E,z){var oe,re,v;if(typeof j=="string"&&i(j)===r){j=unescape(j);var ne=L(j,!1);(ne!==""||(ne=t.loadFile(j,!0))!==void 0)&&(j=ne)}if(x(j)&&(j=b(j,A)),A=i(j,A),!p(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((v=E)==null||v.length===0)&&(E=function(M){return typeof M=="string"||D(M)?T(M):D(M.data)?T(M.data):null}(j)),(oe=m.call(this,E))||(P()&&(j instanceof Uint8Array||A==="RGBA"||(re=j,j=B(j))),oe=this["process"+A.toUpperCase()](j,h.call(this),E,function(M){return M&&typeof M=="string"&&(M=M.toUpperCase()),M in t.image_compression?M:k.NONE}(z),re)),!oe)throw new Error("An unknown error occurred whilst processing the image.");return oe},L=t.__addimage__.convertBase64ToBinaryString=function(j,A){A=typeof A!="boolean"||A;var E,z="";if(typeof j=="string"){var oe;E=(oe=Z(j))!==null&&oe!==void 0?oe:j;try{z=el(E)}catch(re){if(A)throw H(E)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};t.getImageProperties=function(j){var A,E,z="";if(x(j)&&(j=b(j)),typeof j=="string"&&i(j)===r&&((z=L(j,!1))===""&&(z=t.loadFile(j)||""),j=z),E=i(j),!p(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(!P()||j instanceof Uint8Array||(j=B(j)),!(A=this["process"+E.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=E,A}})(qt.API),function(t){var r=function(n){if(n!==void 0&&n!="")return!0};qt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,o,s,a=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,p=!1,x=0;x<h.length&&!p;x++)switch((i=h[x]).type){case"link":(r(i.options.url)||r(i.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var b=0;b<h.length;b++){i=h[b];var m=this.internal.pdfEscape,_=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),O=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(w.objId),T=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+a(i.bounds.x)+" "+c(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y)+"] ")+"/Contents ("+m(k(i.contents))+")",s+=" /Popup "+O.objId+" 0 R",s+=" /P "+u.objId+" 0 R",s+=" /T ("+m(k(T))+") >>",w.content=s;var H=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+a(i.bounds.x+30)+" "+c(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+c(i.bounds.y)+"] ")+" /Parent "+H,i.open&&(s+=" /Open true"),s+=" >>",O.content=s,this.internal.write(w.objId,"0 R",O.objId,"0 R");break;case"freetext":o="/Rect ["+a(i.bounds.x)+" "+c(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y+i.bounds.h)+"] ";var Z=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+m(_(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var P=this.annotations._nameMap[i.options.name];i.options.pageNumber=P.page,i.options.top=P.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+m(_(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var D=c(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+D+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,o,s,a){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(n),y:h(i),w:u(n+o),h:h(i+s)},options:a,type:"link"})},t.textWithLink=function(n,i,o,s){var a,c,u=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){c=s.maxWidth;var p=this.splitTextToSize(n,c).length;a=Math.ceil(h*p)}else c=u,a=h;return this.text(n,i,o,s),o+=.2*h,s.align==="center"&&(i-=u/2),s.align==="right"&&(i-=u),this.link(i,o-h,c,a,s),u},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(qt.API),function(t){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(w){return r[w.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},c=t.__arabicParser__.isArabicEndLetter=function(w){return a(w)&&s(w)&&r[w.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(w){return a(w)&&o.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return a(w)&&s(w)&&r[w.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return a(w)&&s(w)&&r[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return a(w)&&s(w)&&r[w.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return a(w)&&s(w)&&r[w.charCodeAt(0)].length==4},x=t.__arabicParser__.resolveLigatures=function(w){var O=0,k=n,T="",H=0;for(O=0;O<w.length;O+=1)k[w.charCodeAt(O)]!==void 0?(H++,typeof(k=k[w.charCodeAt(O)])=="number"&&(T+=String.fromCharCode(k),k=n,H=0),O===w.length-1&&(k=n,T+=w.charAt(O-(H-1)),O-=H-1,H=0)):(k=n,T+=w.charAt(O-H),O-=H,H=0);return T};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&i[w.charCodeAt(0)]!==void 0};var b=t.__arabicParser__.getCorrectForm=function(w,O,k){return a(w)?s(w)===!1?-1:!h(w)||!a(O)&&!a(k)||!a(k)&&c(O)||c(w)&&!a(O)||c(w)&&u(O)||c(w)&&c(O)?0:p(w)&&a(O)&&!c(O)&&a(k)&&h(k)?3:c(w)||!a(k)?1:2:-1},m=function(w){var O=0,k=0,T=0,H="",Z="",P="",D=(w=w||"").split("\\s+"),B=[];for(O=0;O<D.length;O+=1){for(B.push(""),k=0;k<D[O].length;k+=1)H=D[O][k],Z=D[O][k-1],P=D[O][k+1],a(H)?(T=b(H,Z,P),B[O]+=T!==-1?String.fromCharCode(r[H.charCodeAt(0)][T]):H):B[O]+=H;B[O]=x(B[O])}return B.join(" ")},_=t.__arabicParser__.processArabic=t.processArabic=function(){var w,O=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(O)){var T=0;for(k=[],T=0;T<O.length;T+=1)Array.isArray(O[T])?k.push([m(O[T][0]),O[T][1],O[T][2]]):k.push([m(O[T])]);w=k}else w=m(O);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",_])}(qt.API),qt.API.autoPrint=function(t){var r;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})}return this},function(t){var r=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(c){o=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(c){s=c}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(c){a=c}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(n,i){var o;if((n=n||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])}(qt.API),function(t){var r={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var x=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return x},set:function(w){x=w}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(w){b=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(w){_=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return i.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,h){i.call(this);var p=(h=h||{}).fontSize||this.getFontSize(),x=h.font||this.getFont(),b=h.scaleFactor||this.internal.scaleFactor,m=0,_=0,w=0,O=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var k=h.maxWidth;k>0?typeof u=="string"?u=this.splitTextToSize(u,k):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(H,Z){return H.concat(O.splitTextToSize(Z,k))},[])):u=Array.isArray(u)?u:[u];for(var T=0;T<u.length;T++)m<(w=this.getStringUnitWidth(u[T],{font:x})*p)&&(m=w);return m!==0&&(_=u.length),{w:m/=b,h:Math.max((_*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/b,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var u=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new s(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var u;u=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var h=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,x=this.internal.__cell__.margins||r,b=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===u.lineNumber?(u.x=(h.x||0)+(h.width||0),u.y=h.y||0):h.y+h.height+u.height+x.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=x.top,m&&b&&(this.printHeaderRow(u.lineNumber,!0),u.y+=b[0].height)):u.y=h.y+h.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,n===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-p,u.y+p,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+p,{align:"center",baseline:"top",maxWidth:u.width-p-p}):this.text(u.text,u.x+p,u.y+p,{align:"left",baseline:"top",maxWidth:u.width-p-p})),this.internal.__cell__.lastCell=u,this};t.table=function(u,h,p,x,b){if(i.call(this),!p)throw new Error("No data for PDF table.");var m,_,w,O,k=[],T=[],H=[],Z={},P={},D=[],B=[],G=(b=b||{}).autoSize||!1,R=b.printHeaders!==!1,L=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,j=b.margins||Object.assign({width:this.getPageWidth()},r),A=typeof b.padding=="number"?b.padding:3,E=b.headerBackgroundColor||"#c8c8c8",z=b.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=E,this.internal.__cell__.headerTextColor=z,this.setFontSize(L),x==null)T=k=Object.keys(p[0]),H=k.map(function(){return"left"});else if(Array.isArray(x)&&_r(x[0])==="object")for(k=x.map(function(y){return y.name}),T=x.map(function(y){return y.prompt||y.name||""}),H=x.map(function(y){return y.align||"left"}),m=0;m<x.length;m+=1)P[x[m].name]=x[m].width*(19.049976/25.4);else Array.isArray(x)&&typeof x[0]=="string"&&(T=k=x,H=k.map(function(){return"left"}));if(G||Array.isArray(x)&&typeof x[0]=="string")for(m=0;m<k.length;m+=1){for(Z[O=k[m]]=p.map(function(y){return y[O]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(T[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=Z[O],this.setFont(void 0,"normal"),w=0;w<_.length;w+=1)D.push(this.getTextDimensions(_[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[O]=Math.max.apply(null,D)+A+A,D=[]}if(R){var oe={};for(m=0;m<k.length;m+=1)oe[k[m]]={},oe[k[m]].text=T[m],oe[k[m]].align=H[m];var re=c.call(this,oe,P);B=k.map(function(y){return new s(u,h,P[y],re,oe[y].text,void 0,oe[y].align)}),this.setTableHeaderRow(B),this.printHeaderRow(1,!1)}var v=x.reduce(function(y,Y){return y[Y.name]=Y.align,y},{});for(m=0;m<p.length;m+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:m,data:p[m]},this);var ne=c.call(this,p[m],P);for(w=0;w<k.length;w+=1){var M=p[m][k[w]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:m,col:w,data:M},this),a.call(this,new s(u,h,P[k[w]],ne,M,m+2,v[k[w]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=h,this};var c=function(u,h){var p=this.internal.__cell__.padding,x=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(u).map(function(m){var _=u[m];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,h[m]-p-p)},this).map(function(m){return this.getLineHeightFactor()*m.length*x/b+p+p},this).reduce(function(m,_){return Math.max(m,_)},0)};t.setTableHeaderRow=function(u){i.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,h){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var x=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(x[0],x[1],x[2],x[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){p=this.internal.__cell__.tableHeaderRow[m].clone(),h&&(p.y=this.internal.__cell__.margins.top||0,b.push(p)),p.lineNumber=u;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(_)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),n=!1}}(qt.API);var V0={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Y0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Uu=G0(Y0),J0=[100,200,300,400,500,600,700,800,900],iv=G0(J0);function Hu(t){var r=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return V0[s=s||"normal"]?s:"normal"}(t.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(s){return typeof Uu[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:r,style:n,weight:i,stretch:o,src:t.src||[],ref:t.ref||{name:r,style:[o,n,i].join(" ")}}}function Yf(t,r,n,i){var o;for(o=n;o>=0&&o<r.length;o+=i)if(t[r[o]])return t[r[o]];for(o=n;o>=0&&o<r.length;o-=i)if(t[r[o]])return t[r[o]]}var sv={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Jf={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Xf(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function ov(t,r,n){for(var i=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},sv,n.genericFontFamilies||{}),s=null,a=null,c=0;c<r.length;++c)if(o[(s=Hu(r[c])).family]&&(s.family=o[s.family]),t.hasOwnProperty(s.family)){a=t[s.family];break}if(!(a=a||t[i]))throw new Error("Could not find a font-family for the rule '"+Xf(s)+"' and default family '"+i+"'.");if(a=function(u,h){if(h[u])return h[u];var p=Uu[u],x=p<=Uu.normal?-1:1,b=Yf(h,Y0,p,x);if(!b)throw new Error("Could not find a matching font-stretch value for "+u);return b}(s.stretch,a),a=function(u,h){if(h[u])return h[u];for(var p=V0[u],x=0;x<p.length;++x)if(h[p[x]])return h[p[x]];throw new Error("Could not find a matching font-style for "+u)}(s.style,a),!(a=function(u,h){if(h[u])return h[u];if(u===400&&h[500])return h[500];if(u===500&&h[400])return h[400];var p=iv[u],x=Yf(h,J0,p,u<400?-1:1);if(!x)throw new Error("Could not find a matching font-weight for value "+u);return x}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Xf(s)+"'.");return a}function Kf(t){return t.trimLeft()}function av(t,r){for(var n=0;n<t.length;){if(t.charAt(n)===r)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function lv(t){var r=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],t.substring(r[0].length)]}var uc,Qf,Zf,yu=["times"];(function(t){var r,n,i,o,s,a,c,u,h,p=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new u,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new a,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new a,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new x(this),r=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,h=new p}]);var x=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=C;Object.defineProperty(this,"pdf",{get:function(){return q}});var N=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return N},set:function(be){N=!!be}});var $=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return $},set:function(be){$=!!be}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(be){isNaN(be)||(Q=be)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(be){isNaN(be)||(ie=be)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(be){var ee;typeof be=="number"?ee=[be,be,be,be]:((ee=new Array(4))[0]=be[0],ee[1]=be.length>=2?be[1]:ee[0],ee[2]=be.length>=3?be[2]:ee[0],ee[3]=be.length>=4?be[3]:ee[1]),h.margin=ee}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(be){ue=be}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(be){le=be}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(be){ge=be}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(be){be instanceof p&&(h=be)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(be){h.path=be}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(be){xe=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var ee;ee=b(be),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var ee=b(be);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var ze=null;function Ie(be,ee){if(ze===null){var Ae=function(Se){var ce=[];return Object.keys(Se).forEach(function(Me){Se[Me].forEach(function(Xe){var Ze=null;switch(Xe){case"bold":Ze={family:Me,weight:"bold"};break;case"italic":Ze={family:Me,style:"italic"};break;case"bolditalic":Ze={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":Ze={family:Me}}Ze!==null&&(Ze.ref={name:Me,style:Xe},ce.push(Ze))})}),ce}(be.getFontList());ze=function(Se){for(var ce={},Me=0;Me<Se.length;++Me){var Xe=Hu(Se[Me]),Ze=Xe.family,pt=Xe.stretch,Ue=Xe.style,Ce=Xe.weight;ce[Ze]=ce[Ze]||{},ce[Ze][pt]=ce[Ze][pt]||{},ce[Ze][pt][Ue]=ce[Ze][pt][Ue]||{},ce[Ze][pt][Ue][Ce]=Xe}return ce}(Ae.concat(ee))}return ze}var We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(be){ze=null,We=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var ee;if(this.ctx.font=be,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var Ae=ee[1];ee[2];var Se=ee[3],ce=ee[4];ee[5];var Me=ee[6],Xe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ce)[2];ce=Math.floor(Xe==="px"?parseFloat(ce)*this.pdf.internal.scaleFactor:Xe==="em"?parseFloat(ce)*this.pdf.getFontSize():parseFloat(ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ce);var Ze=function(_e){var Fe,Ne,st=[],Ge=_e.trim();if(Ge==="")return yu;if(Ge in Jf)return[Jf[Ge]];for(;Ge!=="";){switch(Ne=null,Fe=(Ge=Kf(Ge)).charAt(0)){case'"':case"'":Ne=av(Ge.substring(1),Fe);break;default:Ne=lv(Ge)}if(Ne===null||(st.push(Ne[0]),(Ge=Kf(Ne[1]))!==""&&Ge.charAt(0)!==","))return yu;Ge=Ge.replace(/^,/,"")}return st}(Me);if(this.fontFaces){var pt=ov(Ie(this.pdf,this.fontFaces),Ze.map(function(_e){return{family:_e,stretch:"normal",weight:Se,style:Ae}}));this.pdf.setFont(pt.ref.name,pt.ref.style)}else{var Ue="";(Se==="bold"||parseInt(Se,10)>=700||Ae==="bold")&&(Ue="bold"),Ae==="italic"&&(Ue+="italic"),Ue.length===0&&(Ue="normal");for(var Ce="",ve={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Pe=0;Pe<Ze.length;Pe++){if(this.pdf.internal.getFont(Ze[Pe],Ue,{noFallback:!0,disableWarning:!0})!==void 0){Ce=Ze[Pe];break}if(Ue==="bolditalic"&&this.pdf.internal.getFont(Ze[Pe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ce=Ze[Pe],Ue="bold";else if(this.pdf.internal.getFont(Ze[Pe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ce=Ze[Pe],Ue="normal";break}}if(Ce===""){for(var De=0;De<Ze.length;De++)if(ve[Ze[De]]){Ce=ve[Ze[De]];break}}Ce=Ce===""?"Times":Ce,this.pdf.setFont(Ce,Ue)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};x.prototype.setLineDash=function(C){this.lineDash=C},x.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},x.prototype.fill=function(){Z.call(this,"fill",!1)},x.prototype.stroke=function(){Z.call(this,"stroke",!1)},x.prototype.beginPath=function(){this.path=[{type:"begin"}]},x.prototype.moveTo=function(C,q){if(isNaN(C)||isNaN(q))throw jr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var N=this.ctx.transform.applyToPoint(new a(C,q));this.path.push({type:"mt",x:N.x,y:N.y}),this.ctx.lastPoint=new a(C,q)},x.prototype.closePath=function(){var C=new a(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&_r(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){C=new a(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(C.x,C.y)},x.prototype.lineTo=function(C,q){if(isNaN(C)||isNaN(q))throw jr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var N=this.ctx.transform.applyToPoint(new a(C,q));this.path.push({type:"lt",x:N.x,y:N.y}),this.ctx.lastPoint=new a(N.x,N.y)},x.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},x.prototype.quadraticCurveTo=function(C,q,N,$){if(isNaN(N)||isNaN($)||isNaN(C)||isNaN(q))throw jr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new a(N,$)),ie=this.ctx.transform.applyToPoint(new a(C,q));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(Q.x,Q.y)},x.prototype.bezierCurveTo=function(C,q,N,$,Q,ie){if(isNaN(Q)||isNaN(ie)||isNaN(C)||isNaN(q)||isNaN(N)||isNaN($))throw jr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new a(Q,ie)),le=this.ctx.transform.applyToPoint(new a(C,q)),ge=this.ctx.transform.applyToPoint(new a(N,$));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:ge.x,y2:ge.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new a(ue.x,ue.y)},x.prototype.arc=function(C,q,N,$,Q,ie){if(isNaN(C)||isNaN(q)||isNaN(N)||isNaN($)||isNaN(Q))throw jr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new a(C,q));C=ue.x,q=ue.y;var le=this.ctx.transform.applyToPoint(new a(0,N)),ge=this.ctx.transform.applyToPoint(new a(0,0));N=Math.sqrt(Math.pow(le.x-ge.x,2)+Math.pow(le.y-ge.y,2))}Math.abs(Q-$)>=2*Math.PI&&($=0,Q=2*Math.PI),this.path.push({type:"arc",x:C,y:q,radius:N,startAngle:$,endAngle:Q,counterclockwise:ie})},x.prototype.arcTo=function(C,q,N,$,Q){throw new Error("arcTo not implemented.")},x.prototype.rect=function(C,q,N,$){if(isNaN(C)||isNaN(q)||isNaN(N)||isNaN($))throw jr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,q),this.lineTo(C+N,q),this.lineTo(C+N,q+$),this.lineTo(C,q+$),this.lineTo(C,q),this.lineTo(C+N,q),this.lineTo(C,q)},x.prototype.fillRect=function(C,q,N,$){if(isNaN(C)||isNaN(q)||isNaN(N)||isNaN($))throw jr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,q,N,$),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},x.prototype.strokeRect=function(C,q,N,$){if(isNaN(C)||isNaN(q)||isNaN(N)||isNaN($))throw jr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(C,q,N,$),this.stroke())},x.prototype.clearRect=function(C,q,N,$){if(isNaN(C)||isNaN(q)||isNaN(N)||isNaN($))throw jr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,q,N,$))},x.prototype.save=function(C){C=typeof C!="boolean"||C;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,N=0;N<this.pdf.internal.getNumberOfPages();N++)this.pdf.setPage(N+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var $=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=$}},x.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,N=0;N<this.pdf.internal.getNumberOfPages();N++)this.pdf.setPage(N+1),this.pdf.internal.out("Q");this.pdf.setPage(q),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},x.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(C){var q,N,$,Q;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))q=0,N=0,$=0,Q=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(ie!==null)q=parseInt(ie[1]),N=parseInt(ie[2]),$=parseInt(ie[3]),Q=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)q=parseInt(ie[1]),N=parseInt(ie[2]),$=parseInt(ie[3]),Q=parseFloat(ie[4]);else{if(Q=1,typeof C=="string"&&C.charAt(0)!=="#"){var ue=new B0(C);C=ue.ok?ue.toHex():"#000000"}C.length===4?(q=C.substring(1,2),q+=q,N=C.substring(2,3),N+=N,$=C.substring(3,4),$+=$):(q=C.substring(1,3),N=C.substring(3,5),$=C.substring(5,7)),q=parseInt(q,16),N=parseInt(N,16),$=parseInt($,16)}}return{r:q,g:N,b:$,a:Q,style:C}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};x.prototype.fillText=function(C,q,N,$){if(isNaN(q)||isNaN(N)||typeof C!="string")throw jr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if($=isNaN($)?void 0:$,!m.call(this)){var Q=ne(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;A.call(this,{text:C,x:q,y:N,scale:ie,angle:Q,align:this.textAlign,maxWidth:$})}},x.prototype.strokeText=function(C,q,N,$){if(isNaN(q)||isNaN(N)||typeof C!="string")throw jr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){$=isNaN($)?void 0:$;var Q=ne(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;A.call(this,{text:C,x:q,y:N,scale:ie,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:$})}},x.prototype.measureText=function(C){if(typeof C!="string")throw jr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,N=this.pdf.internal.scaleFactor,$=q.internal.getFontSize(),Q=q.getStringUnitWidth(C)*$/q.internal.scaleFactor,ie=function(ue){var le=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return le}}),this};return new ie({width:Q*=Math.round(96*N/72*1e4)/1e4})},x.prototype.scale=function(C,q){if(isNaN(C)||isNaN(q))throw jr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var N=new u(C,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(N)},x.prototype.rotate=function(C){if(isNaN(C))throw jr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new u(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},x.prototype.translate=function(C,q){if(isNaN(C)||isNaN(q))throw jr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var N=new u(1,0,0,1,C,q);this.ctx.transform=this.ctx.transform.multiply(N)},x.prototype.transform=function(C,q,N,$,Q,ie){if(isNaN(C)||isNaN(q)||isNaN(N)||isNaN($)||isNaN(Q)||isNaN(ie))throw jr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new u(C,q,N,$,Q,ie);this.ctx.transform=this.ctx.transform.multiply(ue)},x.prototype.setTransform=function(C,q,N,$,Q,ie){C=isNaN(C)?1:C,q=isNaN(q)?0:q,N=isNaN(N)?0:N,$=isNaN($)?1:$,Q=isNaN(Q)?0:Q,ie=isNaN(ie)?0:ie,this.ctx.transform=new u(C,q,N,$,Q,ie)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};x.prototype.drawImage=function(C,q,N,$,Q,ie,ue,le,ge){var xe=this.pdf.getImageProperties(C),ze=1,Ie=1,We=1,be=1;$!==void 0&&le!==void 0&&(We=le/$,be=ge/Q,ze=xe.width/$*le/$,Ie=xe.height/Q*ge/Q),ie===void 0&&(ie=q,ue=N,q=0,N=0),$!==void 0&&le===void 0&&(le=$,ge=Q),$===void 0&&le===void 0&&(le=xe.width,ge=xe.height);for(var ee,Ae=this.ctx.transform.decompose(),Se=ne(Ae.rotate.shx),ce=new u,Me=(ce=(ce=(ce=ce.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale)).applyToRectangle(new c(ie-q*We,ue-N*be,$*ze,Q*Ie)),Xe=O.call(this,Me),Ze=[],pt=0;pt<Xe.length;pt+=1)Ze.indexOf(Xe[pt])===-1&&Ze.push(Xe[pt]);if(H(Ze),this.autoPaging)for(var Ue=Ze[0],Ce=Ze[Ze.length-1],ve=Ue;ve<Ce+1;ve++){this.pdf.setPage(ve);var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],De=ve===1?this.posY+this.margin[0]:this.margin[0],_e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ne=ve===1?0:_e+(ve-2)*Fe;if(this.ctx.clip_path.length!==0){var st=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(ee,this.posX+this.margin[3],-Ne+De+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=st}var Ge=JSON.parse(JSON.stringify(Me));Ge=T([Ge],this.posX+this.margin[3],-Ne+De+this.ctx.prevPageLastElemOffset)[0];var ot=(ve>Ue||ve<Ce)&&w.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,Fe,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",Ge.x,Ge.y,Ge.w,Ge.h,null,null,Se),ot&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,Se)};var O=function(C,q,N){var $=[];q=q||this.pdf.internal.pageSize.width,N=N||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":$.push(Math.floor((C.y+Q)/N)+1);break;case"arc":$.push(Math.floor((C.y+Q-C.radius)/N)+1),$.push(Math.floor((C.y+Q+C.radius)/N)+1);break;case"qct":var ie=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);$.push(Math.floor((ie.y+Q)/N)+1),$.push(Math.floor((ie.y+ie.h+Q)/N)+1);break;case"bct":var ue=y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);$.push(Math.floor((ue.y+Q)/N)+1),$.push(Math.floor((ue.y+ue.h+Q)/N)+1);break;case"rect":$.push(Math.floor((C.y+Q)/N)+1),$.push(Math.floor((C.y+C.h+Q)/N)+1)}for(var le=0;le<$.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<$[le];)k.call(this);return $},k=function(){var C=this.fillStyle,q=this.strokeStyle,N=this.font,$=this.lineCap,Q=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=q,this.font=N,this.lineCap=$,this.lineWidth=Q,this.lineJoin=ie},T=function(C,q,N){for(var $=0;$<C.length;$++)switch(C[$].type){case"bct":C[$].x2+=q,C[$].y2+=N;case"qct":C[$].x1+=q,C[$].y1+=N;case"mt":case"lt":case"arc":default:C[$].x+=q,C[$].y+=N}return C},H=function(C){return C.sort(function(q,N){return q-N})},Z=function(C,q){for(var N,$,Q=this.fillStyle,ie=this.strokeStyle,ue=this.lineCap,le=this.lineWidth,ge=Math.abs(le*this.ctx.transform.scaleX),xe=this.lineJoin,ze=JSON.parse(JSON.stringify(this.path)),Ie=JSON.parse(JSON.stringify(this.path)),We=[],be=0;be<Ie.length;be++)if(Ie[be].x!==void 0)for(var ee=O.call(this,Ie[be]),Ae=0;Ae<ee.length;Ae+=1)We.indexOf(ee[Ae])===-1&&We.push(ee[Ae]);for(var Se=0;Se<We.length;Se++)for(;this.pdf.internal.getNumberOfPages()<We[Se];)k.call(this);if(H(We),this.autoPaging)for(var ce=We[0],Me=We[We.length-1],Xe=ce;Xe<Me+1;Xe++){this.pdf.setPage(Xe),this.fillStyle=Q,this.strokeStyle=ie,this.lineCap=ue,this.lineWidth=ge,this.lineJoin=xe;var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=Xe===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ce=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ve=Xe===1?0:Ue+(Xe-2)*Ce;if(this.ctx.clip_path.length!==0){var Pe=this.path;N=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(N,this.posX+this.margin[3],-ve+pt+this.ctx.prevPageLastElemOffset),P.call(this,C,!0),this.path=Pe}if($=JSON.parse(JSON.stringify(ze)),this.path=T($,this.posX+this.margin[3],-ve+pt+this.ctx.prevPageLastElemOffset),q===!1||Xe===0){var De=(Xe>ce||Xe<Me)&&w.call(this);De&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,Ce,null).clip().discardPath()),P.call(this,C,q),De&&this.pdf.restoreGraphicsState()}this.lineWidth=le}else this.lineWidth=ge,P.call(this,C,q),this.lineWidth=le;this.path=ze},P=function(C,q){if((C!=="stroke"||q||!_.call(this))&&(C==="stroke"||q||!m.call(this))){for(var N,$,Q=[],ie=this.path,ue=0;ue<ie.length;ue++){var le=ie[ue];switch(le.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:le,deltas:[],abs:[]});break;case"lt":var ge=Q.length;if(ie[ue-1]&&!isNaN(ie[ue-1].x)&&(N=[le.x-ie[ue-1].x,le.y-ie[ue-1].y],ge>0)){for(;ge>=0;ge--)if(Q[ge-1].close!==!0&&Q[ge-1].begin!==!0){Q[ge-1].deltas.push(N),Q[ge-1].abs.push(le);break}}break;case"bct":N=[le.x1-ie[ue-1].x,le.y1-ie[ue-1].y,le.x2-ie[ue-1].x,le.y2-ie[ue-1].y,le.x-ie[ue-1].x,le.y-ie[ue-1].y],Q[Q.length-1].deltas.push(N);break;case"qct":var xe=ie[ue-1].x+2/3*(le.x1-ie[ue-1].x),ze=ie[ue-1].y+2/3*(le.y1-ie[ue-1].y),Ie=le.x+2/3*(le.x1-le.x),We=le.y+2/3*(le.y1-le.y),be=le.x,ee=le.y;N=[xe-ie[ue-1].x,ze-ie[ue-1].y,Ie-ie[ue-1].x,We-ie[ue-1].y,be-ie[ue-1].x,ee-ie[ue-1].y],Q[Q.length-1].deltas.push(N);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(le)}}$=q?null:C==="stroke"?"stroke":"fill";for(var Ae=!1,Se=0;Se<Q.length;Se++)if(Q[Se].arc)for(var ce=Q[Se].abs,Me=0;Me<ce.length;Me++){var Xe=ce[Me];Xe.type==="arc"?G.call(this,Xe.x,Xe.y,Xe.radius,Xe.startAngle,Xe.endAngle,Xe.counterclockwise,void 0,q,!Ae):E.call(this,Xe.x,Xe.y),Ae=!0}else if(Q[Se].close===!0)this.pdf.internal.out("h"),Ae=!1;else if(Q[Se].begin!==!0){var Ze=Q[Se].start.x,pt=Q[Se].start.y;z.call(this,Q[Se].deltas,Ze,pt),Ae=!0}$&&R.call(this,$),q&&L.call(this)}},D=function(C){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,N=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-N;case"top":return C+q-N;case"hanging":return C+q-2*N;case"middle":return C+q/2-N;case"ideographic":return C;case"alphabetic":default:return C}},B=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};x.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(q,N){this.colorStops.push([q,N])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},x.prototype.createPattern=function(){return this.createLinearGradient()},x.prototype.createRadialGradient=function(){return this.createLinearGradient()};var G=function(C,q,N,$,Q,ie,ue,le,ge){for(var xe=re.call(this,N,$,Q,ie),ze=0;ze<xe.length;ze++){var Ie=xe[ze];ze===0&&(ge?j.call(this,Ie.x1+C,Ie.y1+q):E.call(this,Ie.x1+C,Ie.y1+q)),oe.call(this,C,q,Ie.x2,Ie.y2,Ie.x3,Ie.y3,Ie.x4,Ie.y4)}le?L.call(this):R.call(this,ue)},R=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(C,q){this.pdf.internal.out(n(C)+" "+i(q)+" m")},A=function(C){var q;switch(C.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var N=this.pdf.getTextDimensions(C.text),$=D.call(this,C.y),Q=B.call(this,$)-N.h,ie=this.ctx.transform.applyToPoint(new a(C.x,$)),ue=this.ctx.transform.decompose(),le=new u;le=(le=(le=le.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var ge,xe,ze,Ie=this.ctx.transform.applyToRectangle(new c(C.x,$,N.w,N.h)),We=le.applyToRectangle(new c(C.x,Q,N.w,N.h)),be=O.call(this,We),ee=[],Ae=0;Ae<be.length;Ae+=1)ee.indexOf(be[Ae])===-1&&ee.push(be[Ae]);if(H(ee),this.autoPaging)for(var Se=ee[0],ce=ee[ee.length-1],Me=Se;Me<ce+1;Me++){this.pdf.setPage(Me);var Xe=Me===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[2],Ue=pt-this.margin[0],Ce=this.pdf.internal.pageSize.width-this.margin[1],ve=Ce-this.margin[3],Pe=Me===1?0:Ze+(Me-2)*Ue;if(this.ctx.clip_path.length!==0){var De=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(ge,this.posX+this.margin[3],-1*Pe+Xe),P.call(this,"fill",!0),this.path=De}var _e=T([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-Pe+Xe+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*C.scale),ze=this.lineWidth,this.lineWidth=ze*C.scale);var Fe=this.autoPaging!=="text";if(Fe||_e.y+_e.h<=pt){if(Fe||_e.y>=Xe&&_e.x<=Ce){var Ne=Fe?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||Ce-_e.x)[0],st=T([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-Pe+Xe+this.ctx.prevPageLastElemOffset)[0],Ge=Fe&&(Me>Se||Me<ce)&&w.call(this);Ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,Ue,null).clip().discardPath()),this.pdf.text(Ne,st.x,st.y,{angle:C.angle,align:q,renderingMode:C.renderingMode}),Ge&&this.pdf.restoreGraphicsState()}}else _e.y<pt&&(this.ctx.prevPageLastElemOffset+=pt-_e.y);C.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=ze)}else C.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*C.scale),ze=this.lineWidth,this.lineWidth=ze*C.scale),this.pdf.text(C.text,ie.x+this.posX,ie.y+this.posY,{angle:C.angle,align:q,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=ze)},E=function(C,q,N,$){N=N||0,$=$||0,this.pdf.internal.out(n(C+N)+" "+i(q+$)+" l")},z=function(C,q,N){return this.pdf.lines(C,q,N,null,null)},oe=function(C,q,N,$,Q,ie,ue,le){this.pdf.internal.out([r(o(N+C)),r(s($+q)),r(o(Q+C)),r(s(ie+q)),r(o(ue+C)),r(s(le+q)),"c"].join(" "))},re=function(C,q,N,$){for(var Q=2*Math.PI,ie=Math.PI/2;q>N;)q-=Q;var ue=Math.abs(N-q);ue<Q&&$&&(ue=Q-ue);for(var le=[],ge=$?-1:1,xe=q;ue>1e-5;){var ze=xe+ge*Math.min(ue,ie);le.push(v.call(this,C,xe,ze)),ue-=Math.abs(ze-xe),xe=ze}return le},v=function(C,q,N){var $=(N-q)/2,Q=C*Math.cos($),ie=C*Math.sin($),ue=Q,le=-ie,ge=ue*ue+le*le,xe=ge+ue*Q+le*ie,ze=4/3*(Math.sqrt(2*ge*xe)-xe)/(ue*ie-le*Q),Ie=ue-ze*le,We=le+ze*ue,be=Ie,ee=-We,Ae=$+q,Se=Math.cos(Ae),ce=Math.sin(Ae);return{x1:C*Math.cos(q),y1:C*Math.sin(q),x2:Ie*Se-We*ce,y2:Ie*ce+We*Se,x3:be*Se-ee*ce,y3:be*ce+ee*Se,x4:C*Math.cos(N),y4:C*Math.sin(N)}},ne=function(C){return 180*C/Math.PI},M=function(C,q,N,$,Q,ie){var ue=C+.5*(N-C),le=q+.5*($-q),ge=Q+.5*(N-Q),xe=ie+.5*($-ie),ze=Math.min(C,Q,ue,ge),Ie=Math.max(C,Q,ue,ge),We=Math.min(q,ie,le,xe),be=Math.max(q,ie,le,xe);return new c(ze,We,Ie-ze,be-We)},y=function(C,q,N,$,Q,ie,ue,le){var ge,xe,ze,Ie,We,be,ee,Ae,Se,ce,Me,Xe,Ze,pt,Ue=N-C,Ce=$-q,ve=Q-N,Pe=ie-$,De=ue-Q,_e=le-ie;for(xe=0;xe<41;xe++)Se=(ee=(ze=C+(ge=xe/40)*Ue)+ge*((We=N+ge*ve)-ze))+ge*(We+ge*(Q+ge*De-We)-ee),ce=(Ae=(Ie=q+ge*Ce)+ge*((be=$+ge*Pe)-Ie))+ge*(be+ge*(ie+ge*_e-be)-Ae),xe==0?(Me=Se,Xe=ce,Ze=Se,pt=ce):(Me=Math.min(Me,Se),Xe=Math.min(Xe,ce),Ze=Math.max(Ze,Se),pt=Math.max(pt,ce));return new c(Math.round(Me),Math.round(Xe),Math.round(Ze-Me),Math.round(pt-Xe))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,q,N=(C=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:q}));this.prevLineDash!==N&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=N)}}})(qt.API),function(t){var r=function(s){var a,c,u,h,p,x,b,m,_,w;for(c=[],u=0,h=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;h>u;u+=4)(p=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(x=(p=((p=((p=((p=(p-(w=p%85))/85)-(_=p%85))/85)-(m=p%85))/85)-(b=p%85))/85)%85,c.push(x+33,b+33,m+33,_+33,w+33)):c.push(122);return function(O,k){for(var T=k;T>0;T--)O.pop()}(c,a.length),String.fromCharCode.apply(String,c)+"~>"},n=function(s){var a,c,u,h,p,x=String,b="length",m=255,_="charCodeAt",w="slice",O="replace";for(s[w](-2),s=s[w](0,-2)[O](/\s/g,"")[O]("z","!!!!!"),u=[],h=0,p=(s+=a="uuuuu"[w](s[b]%5||5))[b];p>h;h+=5)c=52200625*(s[_](h)-33)+614125*(s[_](h+1)-33)+7225*(s[_](h+2)-33)+85*(s[_](h+3)-33)+(s[_](h+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(k,T){for(var H=T;H>0;H--)k.pop()}(u,a[b]),x.fromCharCode.apply(x,u)},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",u=0;u<s.length;u+=2)c+=String.fromCharCode("0x"+(s[u]+s[u+1]));return c},o=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return s=(a=Mu(a)).reduce(function(u,h){return u+String.fromCharCode(h)},"")};t.processDataByFilters=function(s,a){var c=0,u=s||"",h=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=r(u),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=o(u),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:u,reverseChain:h.reverse().join(" ")}}}(qt.API),function(t){t.loadFile=function(r,n,i){return function(o,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var c=void 0;try{c=function(u,h,p){var x=new XMLHttpRequest,b=0,m=function(_){var w=_.length,O=[],k=String.fromCharCode;for(b=0;b<w;b+=1)O.push(k(255&_.charCodeAt(b)));return O.join("")};if(x.open("GET",u,!h),x.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(x.onload=function(){x.status===200?p(m(this.responseText)):p(void 0)}),x.send(null),h&&x.status===200)return m(x.responseText)}(o,s,a)}catch{}return c}(r,n,i)},t.loadImageFile=t.loadFile}(qt.API),function(t){function r(){return(Ut.html2canvas?Promise.resolve(Ut.html2canvas):oo(()=>import("./html2canvas.esm-Dw6mdHwC.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(Ut.DOMPurify?Promise.resolve(Ut.DOMPurify):oo(()=>import("./purify.es-Co4A5LKW.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var i=function(a){var c=_r(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},o=function(a,c){var u=document.createElement(a);for(var h in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[h]=c.style[h];return u},s=function a(c){var u=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),h=a.convert(Promise.resolve(),u);return h=(h=h.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||function(u){switch(i(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(u){return this.set({src:o("div",{innerHTML:a,dompurify:u})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=function u(h,p){for(var x=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),b=h.firstChild;b;b=b.nextSibling)p!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||x.appendChild(u(b,p));return h.nodeType===1&&(h.nodeName==="CANVAS"?(x.width=h.width,x.height=h.height,x.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(x.value=h.value),x.addEventListener("load",function(){x.scrollTop=h.scrollTop,x.scrollLeft=h.scrollLeft},!0)),x}(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(r).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(r).then(function(c){var u=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=h,h)for(var b=0;b<h.length;++b){var m=h[b],_=m.src.find(function(w){return w.format==="truetype"});_&&u.addFont(_.url,m.ref.name,m.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,u.context2d.save(!0),c(this.prop.container,x)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(i(a)!=="object")return this;var c=Object.keys(a||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=a[u]};switch(u){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[u]=a[u]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var u=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(u):u})},s.prototype.setMargin=function(a){return this.then(function(){switch(i(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(u,h){return Math.floor(u*h/72*96)}return this.then(function(){(a=a||qt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,u,h){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,u,h){return this.setProgress(a?this.progress.val+a:null,c||null,u?this.progress.n+u:null,h?this.progress.stack.concat(h):null)},s.prototype.then=function(a,c){var u=this;return this.thenCore(a,c,function(h,p){return u.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(x){return u.updateProgress(null,h),x}).then(h,p).then(function(x){return u.updateProgress(1),x})})},s.prototype.thenCore=function(a,c,u){u=u||Promise.prototype.then,a&&(a=a.bind(this)),c&&(c=c.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=u.call(h,a,c);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(u){c=c.thenCore(u)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,qt.getPageSize=function(a,c,u){if(_r(a)==="object"){var h=a;a=h.orientation,c=h.unit||c,u=h.format||u}c=c||"mm",u=u||"a4",a=(""+(a||"P")).toLowerCase();var p,x=(""+u).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var m,_=0,w=0;if(b.hasOwnProperty(x))_=b[x][1]/p,w=b[x][0]/p;else try{_=u[1],w=u[0]}catch{throw new Error("Invalid format: "+u)}if(a==="p"||a==="portrait")a="p",w>_&&(m=w,w=_,_=m);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",_>w&&(m=w,w=_,_=m)}return{width:w,height:_,unit:c,k:p,orientation:a}},t.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Hu):null;var u=new s(c);return c.worker?u:u.from(a).doCallback()}}(qt.API),qt.API.addJS=function(t){return Zf=t,this.internal.events.subscribe("postPutResources",function(){uc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(uc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Qf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Zf+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){uc!==void 0&&Qf!==void 0&&this.internal.out("/Names <</JavaScript "+uc+" 0 R>>")}),this},function(t){var r;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),s=0;s<o.length;s++){var a=o[s],c=i.exec(a);if(c!=null){var u=c[1];n.internal.newObjectDeferredBegin(u,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,p=[];for(s=0;s<h;s++){var x=n.internal.newObject();p.push(x);var b=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),r=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+r+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,o,s){var a={title:o,options:s,children:[]};return i==null&&(i=this.root),i.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var a=i.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var c=this.count=this.count_r({count:0},a);if(c>0&&this.line("/Count "+c),a.options&&a.options.pageNumber){var u=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var h=0;h<i.children.length;h++)this.renderItems(i.children[h])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,o){for(var s=0;s<o.children.length;s++)i.count++,this.count_r(i,o.children[s]);return i.count}}])}(qt.API),function(t){var r=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,o,s,a,c){var u,h=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(u=function(x){for(var b,m=256*x.charCodeAt(4)+x.charCodeAt(5),_=x.length,w={width:0,height:0,numcomponents:1},O=4;O<_;O+=2){if(O+=m,r.indexOf(x.charCodeAt(O+1))!==-1){b=256*x.charCodeAt(O+5)+x.charCodeAt(O+6),w={width:256*x.charCodeAt(O+7)+x.charCodeAt(O+8),height:b,numcomponents:x.charCodeAt(O+9)};break}m=256*x.charCodeAt(O+2)+x.charCodeAt(O+3)}return w}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:n,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:h,index:i,alias:o}}return p}}(qt.API);var Wo,hc,ep,tp,rp,cv=function(){var t,r,n;function i(s){var a,c,u,h,p,x,b,m,_,w,O,k,T,H;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},x=null;;){switch(a=this.readUInt32(),_=function(){var Z,P;for(P=[],Z=0;Z<4;++Z)P.push(String.fromCharCode(this.data[this.pos++]));return P}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":x&&this.animation.frames.push(x),this.pos+=4,x={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),h=this.readUInt16()||100,x.delay=1e3*p/h,x.disposeOp=this.data[this.pos++],x.blendOp=this.data[this.pos++],x.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,a-=4),s=(x!=null?x.data:void 0)||this.imgData,k=0;0<=a?k<a:k>a;0<=a?++k:--k)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((w=u-this.transparency.indexed.length)>0)for(T=0;0<=w?T<w:T>w;0<=w?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":b=(O=this.read(a)).indexOf(0),m=String.fromCharCode.apply(String,O.slice(0,b)),this.text[m]=String.fromCharCode.apply(String,O.slice(b+1));break;case"IEND":return x&&this.animation.frames.push(x),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(H=this.colorType)===4||H===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var a,c;for(c=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)c.push(this.data[this.pos++]);return c},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*a),u=0,h=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(x,b,m,_){var w,O,k,T,H,Z,P,D,B,G,R,L,j,A,E,z,oe,re,v,ne,M,y=Math.ceil((h.width-x)/m),Y=Math.ceil((h.height-b)/_),C=h.width==y&&h.height==Y;for(A=a*y,L=C?c:new Uint8Array(A*Y),Z=s.length,j=0,O=0;j<Y&&u<Z;){switch(s[u++]){case 0:for(T=oe=0;oe<A;T=oe+=1)L[O++]=s[u++];break;case 1:for(T=re=0;re<A;T=re+=1)w=s[u++],H=T<a?0:L[O-a],L[O++]=(w+H)%256;break;case 2:for(T=v=0;v<A;T=v+=1)w=s[u++],k=(T-T%a)/a,E=j&&L[(j-1)*A+k*a+T%a],L[O++]=(E+w)%256;break;case 3:for(T=ne=0;ne<A;T=ne+=1)w=s[u++],k=(T-T%a)/a,H=T<a?0:L[O-a],E=j&&L[(j-1)*A+k*a+T%a],L[O++]=(w+Math.floor((H+E)/2))%256;break;case 4:for(T=M=0;M<A;T=M+=1)w=s[u++],k=(T-T%a)/a,H=T<a?0:L[O-a],j===0?E=z=0:(E=L[(j-1)*A+k*a+T%a],z=k&&L[(j-1)*A+(k-1)*a+T%a]),P=H+E-z,D=Math.abs(P-H),G=Math.abs(P-E),R=Math.abs(P-z),B=D<=G&&D<=R?H:G<=R?E:z,L[O++]=(w+B)%256;break;default:throw new Error("Invalid filter algorithm: "+s[u-1])}if(!C){var q=((b+j*_)*h.width+x)*a,N=j*A;for(T=0;T<y;T+=1){for(var $=0;$<a;$+=1)c[q++]=L[N++];q+=(m-1)*a}}j++}}return s=qy(s),h.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),c},i.prototype.decodePalette=function(){var s,a,c,u,h,p,x,b,m;for(c=this.palette,p=this.transparency.indexed||[],h=new Uint8Array((p.length||0)+c.length),u=0,s=0,a=x=0,b=c.length;x<b;a=x+=3)h[u++]=c[a],h[u++]=c[a+1],h[u++]=c[a+2],h[u++]=(m=p[s++])!=null?m:255;return h},i.prototype.copyToImageData=function(s,a){var c,u,h,p,x,b,m,_,w,O,k;if(u=this.colors,w=null,c=this.hasAlphaChannel,this.palette.length&&(w=(k=this._decodedPalette)!=null?k:this._decodedPalette=this.decodePalette(),u=4,c=!0),_=(h=s.data||s).length,x=w||a,p=b=0,u===1)for(;p<_;)m=w?4*a[p/4]:b,O=x[m++],h[p++]=O,h[p++]=O,h[p++]=O,h[p++]=c?x[m++]:255,b=m;else for(;p<_;)m=w?4*a[p/4]:b,h[p++]=x[m++],h[p++]=x[m++],h[p++]=x[m++],h[p++]=c?x[m++]:255,b=m},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var o=function(){if(Object.prototype.toString.call(Ut)==="[object Window]"){try{r=Ut.document.createElement("canvas"),n=r.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(s){var a;if(o()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=r.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var a,c,u,h,p,x,b,m;if(this.animation){for(m=[],c=p=0,x=(b=this.animation.frames).length;p<x;c=++p)a=b[c],u=s.createImageData(a.width,a.height),h=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(u,h),a.imageData=u,m.push(a.image=t(u));return m}},i.prototype.renderFrame=function(s,a){var c,u,h;return c=(u=this.animation.frames)[a],h=u[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?s.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&s.putImageData(h.imageData,h.xOffset,h.yOffset),c.blendOp===0&&s.clearRect(c.xOffset,c.yOffset,c.width,c.height),s.drawImage(c.image,c.xOffset,c.yOffset)},i.prototype.animate=function(s){var a,c,u,h,p,x,b=this;return c=0,x=this.animation,h=x.numFrames,u=x.frames,p=x.numPlays,(a=function(){var m,_;if(m=c++%h,_=u[m],b.renderFrame(s,m),h>1&&c/h<p)return b.animation._timeout=setTimeout(a,_.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var a,c;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(c=a.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),a.putImageData(c,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function dv(t){var r=0;if(t[r++]!==71||t[r++]!==73||t[r++]!==70||t[r++]!==56||(t[r++]+1&253)!=56||t[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[r++]|t[r++]<<8,i=t[r++]|t[r++]<<8,o=t[r++],s=o>>7,a=1<<(7&o)+1;t[r++],t[r++];var c=null,u=null;s&&(c=r,u=a,r+=3*a);var h=!0,p=[],x=0,b=null,m=0,_=null;for(this.width=n,this.height=i;h&&r<t.length;)switch(t[r++]){case 33:switch(t[r++]){case 255:if(t[r]!==11||t[r+1]==78&&t[r+2]==69&&t[r+3]==84&&t[r+4]==83&&t[r+5]==67&&t[r+6]==65&&t[r+7]==80&&t[r+8]==69&&t[r+9]==50&&t[r+10]==46&&t[r+11]==48&&t[r+12]==3&&t[r+13]==1&&t[r+16]==0)r+=14,_=t[r++]|t[r++]<<8,r++;else for(r+=12;;){if(!((j=t[r++])>=0))throw Error("Invalid block size");if(j===0)break;r+=j}break;case 249:if(t[r++]!==4||t[r+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[r++];x=t[r++]|t[r++]<<8,b=t[r++],(1&w)==0&&(b=null),m=w>>2&7,r++;break;case 254:for(;;){if(!((j=t[r++])>=0))throw Error("Invalid block size");if(j===0)break;r+=j}break;default:throw new Error("Unknown graphic control label: 0x"+t[r-1].toString(16))}break;case 44:var O=t[r++]|t[r++]<<8,k=t[r++]|t[r++]<<8,T=t[r++]|t[r++]<<8,H=t[r++]|t[r++]<<8,Z=t[r++],P=Z>>6&1,D=1<<(7&Z)+1,B=c,G=u,R=!1;Z>>7&&(R=!0,B=r,G=D,r+=3*D);var L=r;for(r++;;){var j;if(!((j=t[r++])>=0))throw Error("Invalid block size");if(j===0)break;r+=j}p.push({x:O,y:k,width:T,height:H,has_local_palette:R,palette_offset:B,palette_size:G,data_offset:L,data_length:r-L,transparent_index:b,interlaced:!!P,delay:x,disposal:m});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[r-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return _},this.frameInfo=function(A){if(A<0||A>=p.length)throw new Error("Frame index out of range.");return p[A]},this.decodeAndBlitFrameBGRA=function(A,E){var z=this.frameInfo(A),oe=z.width*z.height,re=new Uint8Array(oe);np(t,z.data_offset,re,oe);var v=z.palette_offset,ne=z.transparent_index;ne===null&&(ne=256);var M=z.width,y=n-M,Y=M,C=4*(z.y*n+z.x),q=4*((z.y+z.height)*n+z.x),N=C,$=4*y;z.interlaced===!0&&($+=4*n*7);for(var Q=8,ie=0,ue=re.length;ie<ue;++ie){var le=re[ie];if(Y===0&&(Y=M,(N+=$)>=q&&($=4*y+4*n*(Q-1),N=C+(M+y)*(Q<<1),Q>>=1)),le===ne)N+=4;else{var ge=t[v+3*le],xe=t[v+3*le+1],ze=t[v+3*le+2];E[N++]=ze,E[N++]=xe,E[N++]=ge,E[N++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(A,E){var z=this.frameInfo(A),oe=z.width*z.height,re=new Uint8Array(oe);np(t,z.data_offset,re,oe);var v=z.palette_offset,ne=z.transparent_index;ne===null&&(ne=256);var M=z.width,y=n-M,Y=M,C=4*(z.y*n+z.x),q=4*((z.y+z.height)*n+z.x),N=C,$=4*y;z.interlaced===!0&&($+=4*n*7);for(var Q=8,ie=0,ue=re.length;ie<ue;++ie){var le=re[ie];if(Y===0&&(Y=M,(N+=$)>=q&&($=4*y+4*n*(Q-1),N=C+(M+y)*(Q<<1),Q>>=1)),le===ne)N+=4;else{var ge=t[v+3*le],xe=t[v+3*le+1],ze=t[v+3*le+2];E[N++]=ge,E[N++]=xe,E[N++]=ze,E[N++]=255}--Y}}}function np(t,r,n,i){for(var o=t[r++],s=1<<o,a=s+1,c=a+1,u=o+1,h=(1<<u)-1,p=0,x=0,b=0,m=t[r++],_=new Int32Array(4096),w=null;;){for(;p<16&&m!==0;)x|=t[r++]<<p,p+=8,m===1?m=t[r++]:--m;if(p<u)break;var O=x&h;if(x>>=u,p-=u,O!==s){if(O===a)break;for(var k=O<c?O:w,T=0,H=k;H>s;)H=_[H]>>8,++T;var Z=H;if(b+T+(k!==O?1:0)>i)return void jr.log("Warning, gif stream longer than expected.");n[b++]=Z;var P=b+=T;for(k!==O&&(n[b++]=Z),H=k;T--;)H=_[H],n[--P]=255&H,H>>=8;w!==null&&c<4096&&(_[c++]=w<<8|Z,c>=h+1&&u<12&&(++u,h=h<<1|1)),w=O}else c=a+1,h=(1<<(u=o+1))-1,w=null}return b!==i&&jr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function vu(t){var r,n,i,o,s,a=Math.floor,c=new Array(64),u=new Array(64),h=new Array(64),p=new Array(64),x=new Array(65535),b=new Array(65535),m=new Array(64),_=new Array(64),w=[],O=0,k=7,T=new Array(64),H=new Array(64),Z=new Array(64),P=new Array(256),D=new Array(2048),B=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(C,q){for(var N=0,$=0,Q=new Array,ie=1;ie<=16;ie++){for(var ue=1;ue<=C[ie];ue++)Q[q[$]]=[],Q[q[$]][0]=N,Q[q[$]][1]=ie,$++,N++;N*=2}return Q}function v(C){for(var q=C[0],N=C[1]-1;N>=0;)q&1<<N&&(O|=1<<k),N--,--k<0&&(O==255?(ne(255),ne(0)):ne(O),k=7,O=0)}function ne(C){w.push(C)}function M(C){ne(C>>8&255),ne(255&C)}function y(C,q,N,$,Q){for(var ie,ue=Q[0],le=Q[240],ge=function(ce,Me){var Xe,Ze,pt,Ue,Ce,ve,Pe,De,_e,Fe,Ne=0;for(_e=0;_e<8;++_e){Xe=ce[Ne],Ze=ce[Ne+1],pt=ce[Ne+2],Ue=ce[Ne+3],Ce=ce[Ne+4],ve=ce[Ne+5],Pe=ce[Ne+6];var st=Xe+(De=ce[Ne+7]),Ge=Xe-De,ot=Ze+Pe,Nt=Ze-Pe,Ct=pt+ve,dt=pt-ve,mt=Ue+Ce,zt=Ue-Ce,Ft=st+mt,fr=st-mt,Te=ot+Ct,He=ot-Ct;ce[Ne]=Ft+Te,ce[Ne+4]=Ft-Te;var tt=.707106781*(He+fr);ce[Ne+2]=fr+tt,ce[Ne+6]=fr-tt;var rt=.382683433*((Ft=zt+dt)-(He=Nt+Ge)),gt=.5411961*Ft+rt,jt=1.306562965*He+rt,It=.707106781*(Te=dt+Nt),Ve=Ge+It,Ye=Ge-It;ce[Ne+5]=Ye+gt,ce[Ne+3]=Ye-gt,ce[Ne+1]=Ve+jt,ce[Ne+7]=Ve-jt,Ne+=8}for(Ne=0,_e=0;_e<8;++_e){Xe=ce[Ne],Ze=ce[Ne+8],pt=ce[Ne+16],Ue=ce[Ne+24],Ce=ce[Ne+32],ve=ce[Ne+40],Pe=ce[Ne+48];var Et=Xe+(De=ce[Ne+56]),lt=Xe-De,je=Ze+Pe,Ot=Ze-Pe,Ht=pt+ve,sr=pt-ve,jn=Ue+Ce,cr=Ue-Ce,nn=Et+jn,ye=Et-jn,vt=je+Ht,At=je-Ht;ce[Ne]=nn+vt,ce[Ne+32]=nn-vt;var Rt=.707106781*(At+ye);ce[Ne+16]=ye+Rt,ce[Ne+48]=ye-Rt;var Wt=.382683433*((nn=cr+sr)-(At=Ot+lt)),$t=.5411961*nn+Wt,ir=1.306562965*At+Wt,Gt=.707106781*(vt=sr+Ot),tr=lt+Gt,nr=lt-Gt;ce[Ne+40]=nr+$t,ce[Ne+24]=nr-$t,ce[Ne+8]=tr+ir,ce[Ne+56]=tr-ir,Ne++}for(_e=0;_e<64;++_e)Fe=ce[_e]*Me[_e],m[_e]=Fe>0?Fe+.5|0:Fe-.5|0;return m}(C,q),xe=0;xe<64;++xe)_[B[xe]]=ge[xe];var ze=_[0]-N;N=_[0],ze==0?v($[0]):(v($[b[ie=32767+ze]]),v(x[ie]));for(var Ie=63;Ie>0&&_[Ie]==0;)Ie--;if(Ie==0)return v(ue),N;for(var We,be=1;be<=Ie;){for(var ee=be;_[be]==0&&be<=Ie;)++be;var Ae=be-ee;if(Ae>=16){We=Ae>>4;for(var Se=1;Se<=We;++Se)v(le);Ae&=15}ie=32767+_[be],v(Q[(Ae<<4)+b[ie]]),v(x[ie]),be++}return Ie!=63&&v(ue),N}function Y(C){C=Math.min(Math.max(C,1),100),s!=C&&(function(q){for(var N=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$=0;$<64;$++){var Q=a((N[$]*q+50)/100);Q=Math.min(Math.max(Q,1),255),c[B[$]]=Q}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var le=a((ie[ue]*q+50)/100);le=Math.min(Math.max(le,1),255),u[B[ue]]=le}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,ze=0;ze<8;ze++)for(var Ie=0;Ie<8;Ie++)h[xe]=1/(c[B[xe]]*ge[ze]*ge[Ie]*8),p[xe]=1/(u[B[xe]]*ge[ze]*ge[Ie]*8),xe++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),s=C)}this.encode=function(C,q){q&&Y(q),w=new Array,O=0,k=7,M(65496),M(65504),M(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),M(1),M(1),ne(0),ne(0),function(){M(65499),M(132),ne(0);for(var Ze=0;Ze<64;Ze++)ne(c[Ze]);ne(1);for(var pt=0;pt<64;pt++)ne(u[pt])}(),function(Ze,pt){M(65472),M(17),ne(8),M(pt),M(Ze),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(C.width,C.height),function(){M(65476),M(418),ne(0);for(var Ze=0;Ze<16;Ze++)ne(G[Ze+1]);for(var pt=0;pt<=11;pt++)ne(R[pt]);ne(16);for(var Ue=0;Ue<16;Ue++)ne(L[Ue+1]);for(var Ce=0;Ce<=161;Ce++)ne(j[Ce]);ne(1);for(var ve=0;ve<16;ve++)ne(A[ve+1]);for(var Pe=0;Pe<=11;Pe++)ne(E[Pe]);ne(17);for(var De=0;De<16;De++)ne(z[De+1]);for(var _e=0;_e<=161;_e++)ne(oe[_e])}(),M(65498),M(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var N=0,$=0,Q=0;O=0,k=7,this.encode.displayName="_encode_";for(var ie,ue,le,ge,xe,ze,Ie,We,be,ee=C.data,Ae=C.width,Se=C.height,ce=4*Ae,Me=0;Me<Se;){for(ie=0;ie<ce;){for(xe=ce*Me+ie,Ie=-1,We=0,be=0;be<64;be++)ze=xe+(We=be>>3)*ce+(Ie=4*(7&be)),Me+We>=Se&&(ze-=ce*(Me+1+We-Se)),ie+Ie>=ce&&(ze-=ie+Ie-ce+4),ue=ee[ze++],le=ee[ze++],ge=ee[ze++],T[be]=(D[ue]+D[le+256>>0]+D[ge+512>>0]>>16)-128,H[be]=(D[ue+768>>0]+D[le+1024>>0]+D[ge+1280>>0]>>16)-128,Z[be]=(D[ue+1280>>0]+D[le+1536>>0]+D[ge+1792>>0]>>16)-128;N=y(T,h,N,r,i),$=y(H,p,$,n,o),Q=y(Z,p,Q,n,o),ie+=32}Me+=8}if(k>=0){var Xe=[];Xe[1]=k+1,Xe[0]=(1<<k+1)-1,v(Xe)}return M(65497),new Uint8Array(w)},t=t||50,function(){for(var C=String.fromCharCode,q=0;q<256;q++)P[q]=C(q)}(),r=re(G,R),n=re(A,E),i=re(L,j),o=re(z,oe),function(){for(var C=1,q=2,N=1;N<=15;N++){for(var $=C;$<q;$++)b[32767+$]=N,x[32767+$]=[],x[32767+$][1]=N,x[32767+$][0]=$;for(var Q=-(q-1);Q<=-C;Q++)b[32767+Q]=N,x[32767+Q]=[],x[32767+Q][1]=N,x[32767+Q][0]=q-1+Q;C<<=1,q<<=1}}(),function(){for(var C=0;C<256;C++)D[C]=19595*C,D[C+256>>0]=38470*C,D[C+512>>0]=7471*C+32768,D[C+768>>0]=-11059*C,D[C+1024>>0]=-21709*C,D[C+1280>>0]=32768*C+8421375,D[C+1536>>0]=-27439*C,D[C+1792>>0]=-5329*C}(),Y(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _i(t,r){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ip(t){function r(G){if(!G)throw Error("assert :P")}function n(G,R,L){for(var j=0;4>j;j++)if(G[R+j]!=L.charCodeAt(j))return!0;return!1}function i(G,R,L,j,A){for(var E=0;E<A;E++)G[R+E]=L[j+E]}function o(G,R,L,j){for(var A=0;A<j;A++)G[R+A]=L}function s(G){return new Int32Array(G)}function a(G,R){for(var L=[],j=0;j<G;j++)L.push(new R);return L}function c(G,R){var L=[];return function j(A,E,z){for(var oe=z[E],re=0;re<oe&&(A.push(z.length>E+1?[]:new R),!(z.length<E+1));re++)j(A[re],E+1,z)}(L,0,G),L}var u=function(){var G=this;function R(l,d){for(var g=1<<d-1>>>0;l&g;)g>>>=1;return g?(l&g-1)+g:l}function L(l,d,g,S,F){r(!(S%g));do l[d+(S-=g)]=F;while(0<S)}function j(l,d,g,S,F){if(r(2328>=F),512>=F)var U=s(512);else if((U=s(F))==null)return 0;return function(J,X,K,te,fe,Oe){var Re,we,Qe=X,qe=1<<K,pe=s(16),me=s(16);for(r(fe!=0),r(te!=null),r(J!=null),r(0<K),we=0;we<fe;++we){if(15<te[we])return 0;++pe[te[we]]}if(pe[0]==fe)return 0;for(me[1]=0,Re=1;15>Re;++Re){if(pe[Re]>1<<Re)return 0;me[Re+1]=me[Re]+pe[Re]}for(we=0;we<fe;++we)Re=te[we],0<te[we]&&(Oe[me[Re]++]=we);if(me[15]==1)return(te=new A).g=0,te.value=Oe[0],L(J,Qe,1,qe,te),qe;var Je,nt=-1,Ke=qe-1,kt=0,xt=1,Dt=1,bt=1<<K;for(we=0,Re=1,fe=2;Re<=K;++Re,fe<<=1){if(xt+=Dt<<=1,0>(Dt-=pe[Re]))return 0;for(;0<pe[Re];--pe[Re])(te=new A).g=Re,te.value=Oe[we++],L(J,Qe+kt,fe,bt,te),kt=R(kt,Re)}for(Re=K+1,fe=2;15>=Re;++Re,fe<<=1){if(xt+=Dt<<=1,0>(Dt-=pe[Re]))return 0;for(;0<pe[Re];--pe[Re]){if(te=new A,(kt&Ke)!=nt){for(Qe+=bt,Je=1<<(nt=Re)-K;15>nt&&!(0>=(Je-=pe[nt]));)++nt,Je<<=1;qe+=bt=1<<(Je=nt-K),J[X+(nt=kt&Ke)].g=Je+K,J[X+nt].value=Qe-X-nt}te.g=Re-K,te.value=Oe[we++],L(J,Qe+(kt>>K),fe,bt,te),kt=R(kt,Re)}}return xt!=2*me[15]-1?0:qe}(l,d,g,S,F,U)}function A(){this.value=this.g=0}function E(){this.value=this.g=0}function z(){this.G=a(5,A),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Cn,E)}function oe(l,d,g,S){r(l!=null),r(d!=null),r(2147483648>S),l.Ca=254,l.I=0,l.b=-8,l.Ka=0,l.oa=d,l.pa=g,l.Jd=d,l.Yc=g+S,l.Zc=4<=S?g+S-4+1:g,ie(l)}function re(l,d){for(var g=0;0<d--;)g|=le(l,128)<<d;return g}function v(l,d){var g=re(l,d);return ue(l)?-g:g}function ne(l,d,g,S){var F,U=0;for(r(l!=null),r(d!=null),r(4294967288>S),l.Sb=S,l.Ra=0,l.u=0,l.h=0,4<S&&(S=4),F=0;F<S;++F)U+=d[g+F]<<8*F;l.Ra=U,l.bb=S,l.oa=d,l.pa=g}function M(l){for(;8<=l.u&&l.bb<l.Sb;)l.Ra>>>=8,l.Ra+=l.oa[l.pa+l.bb]<<_o-8>>>0,++l.bb,l.u-=8;N(l)&&(l.h=1,l.u=0)}function y(l,d){if(r(0<=d),!l.h&&d<=Co){var g=q(l)&So[d];return l.u+=d,M(l),g}return l.h=1,l.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(l){return l.Ra>>>(l.u&_o-1)>>>0}function N(l){return r(l.bb<=l.Sb),l.h||l.bb==l.Sb&&l.u>_o}function $(l,d){l.u=d,l.h=N(l)}function Q(l){l.u>=Ra&&(r(l.u>=Ra),M(l))}function ie(l){r(l!=null&&l.oa!=null),l.pa<l.Zc?(l.I=(l.oa[l.pa++]|l.I<<8)>>>0,l.b+=8):(r(l!=null&&l.oa!=null),l.pa<l.Yc?(l.b+=8,l.I=l.oa[l.pa++]|l.I<<8):l.Ka?l.b=0:(l.I<<=8,l.b+=8,l.Ka=1))}function ue(l){return re(l,1)}function le(l,d){var g=l.Ca;0>l.b&&ie(l);var S=l.b,F=g*d>>>8,U=(l.I>>>S>F)+0;for(U?(g-=F,l.I-=F+1<<S>>>0):g=F+1,S=g,F=0;256<=S;)F+=8,S>>=8;return S=7^F+Un[S],l.b-=S,l.Ca=(g<<S)-1,U}function ge(l,d,g){l[d+0]=g>>24&255,l[d+1]=g>>16&255,l[d+2]=g>>8&255,l[d+3]=g>>0&255}function xe(l,d){return l[d+0]<<0|l[d+1]<<8}function ze(l,d){return xe(l,d)|l[d+2]<<16}function Ie(l,d){return xe(l,d)|xe(l,d+2)<<16}function We(l,d){var g=1<<d;return r(l!=null),r(0<d),l.X=s(g),l.X==null?0:(l.Mb=32-d,l.Xa=d,1)}function be(l,d){r(l!=null),r(d!=null),r(l.Xa==d.Xa),i(d.X,0,l.X,0,1<<d.Xa)}function ee(){this.X=[],this.Xa=this.Mb=0}function Ae(l,d,g,S){r(g!=null),r(S!=null);var F=g[0],U=S[0];return F==0&&(F=(l*U+d/2)/d),U==0&&(U=(d*F+l/2)/l),0>=F||0>=U?0:(g[0]=F,S[0]=U,1)}function Se(l,d){return l+(1<<d)-1>>>d}function ce(l,d){return((4278255360&l)+(4278255360&d)>>>0&4278255360)+((16711935&l)+(16711935&d)>>>0&16711935)>>>0}function Me(l,d){G[d]=function(g,S,F,U,J,X,K){var te;for(te=0;te<J;++te){var fe=G[l](X[K+te-1],F,U+te);X[K+te]=ce(g[S+te],fe)}}}function Xe(){this.ud=this.hd=this.jd=0}function Ze(l,d){return((4278124286&(l^d))>>>1)+(l&d)>>>0}function pt(l){return 0<=l&&256>l?l:0>l?0:255<l?255:void 0}function Ue(l,d){return pt(l+(l-d+.5>>1))}function Ce(l,d,g){return Math.abs(d-g)-Math.abs(l-g)}function ve(l,d,g,S,F,U,J){for(S=U[J-1],g=0;g<F;++g)U[J+g]=S=ce(l[d+g],S)}function Pe(l,d,g,S,F){var U;for(U=0;U<g;++U){var J=l[d+U],X=J>>8&255,K=16711935&(K=(K=16711935&J)+((X<<16)+X));S[F+U]=(4278255360&J)+K>>>0}}function De(l,d){d.jd=l>>0&255,d.hd=l>>8&255,d.ud=l>>16&255}function _e(l,d,g,S,F,U){var J;for(J=0;J<S;++J){var X=d[g+J],K=X>>>8,te=X,fe=255&(fe=(fe=X>>>16)+((l.jd<<24>>24)*(K<<24>>24)>>>5));te=255&(te=(te=te+((l.hd<<24>>24)*(K<<24>>24)>>>5))+((l.ud<<24>>24)*(fe<<24>>24)>>>5)),F[U+J]=(4278255360&X)+(fe<<16)+te}}function Fe(l,d,g,S,F){G[d]=function(U,J,X,K,te,fe,Oe,Re,we){for(K=Oe;K<Re;++K)for(Oe=0;Oe<we;++Oe)te[fe++]=F(X[S(U[J++])])},G[l]=function(U,J,X,K,te,fe,Oe){var Re=8>>U.b,we=U.Ea,Qe=U.K[0],qe=U.w;if(8>Re)for(U=(1<<U.b)-1,qe=(1<<Re)-1;J<X;++J){var pe,me=0;for(pe=0;pe<we;++pe)pe&U||(me=S(K[te++])),fe[Oe++]=F(Qe[me&qe]),me>>=Re}else G["VP8LMapColor"+g](K,te,Qe,qe,fe,Oe,J,X,we)}}function Ne(l,d,g,S,F){for(g=d+g;d<g;){var U=l[d++];S[F++]=U>>16&255,S[F++]=U>>8&255,S[F++]=U>>0&255}}function st(l,d,g,S,F){for(g=d+g;d<g;){var U=l[d++];S[F++]=U>>16&255,S[F++]=U>>8&255,S[F++]=U>>0&255,S[F++]=U>>24&255}}function Ge(l,d,g,S,F){for(g=d+g;d<g;){var U=(J=l[d++])>>16&240|J>>12&15,J=J>>0&240|J>>28&15;S[F++]=U,S[F++]=J}}function ot(l,d,g,S,F){for(g=d+g;d<g;){var U=(J=l[d++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;S[F++]=U,S[F++]=J}}function Nt(l,d,g,S,F){for(g=d+g;d<g;){var U=l[d++];S[F++]=U>>0&255,S[F++]=U>>8&255,S[F++]=U>>16&255}}function Ct(l,d,g,S,F,U){if(U==0)for(g=d+g;d<g;)ge(S,((U=l[d++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),F+=32;else i(S,F,l,d,g)}function dt(l,d){G[d][0]=G[l+"0"],G[d][1]=G[l+"1"],G[d][2]=G[l+"2"],G[d][3]=G[l+"3"],G[d][4]=G[l+"4"],G[d][5]=G[l+"5"],G[d][6]=G[l+"6"],G[d][7]=G[l+"7"],G[d][8]=G[l+"8"],G[d][9]=G[l+"9"],G[d][10]=G[l+"10"],G[d][11]=G[l+"11"],G[d][12]=G[l+"12"],G[d][13]=G[l+"13"],G[d][14]=G[l+"0"],G[d][15]=G[l+"0"]}function mt(l){return l==kd||l==Ad||l==Dl||l==Ld}function zt(){this.eb=[],this.size=this.A=this.fb=0}function Ft(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function fr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new zt,this.f.kb=new Ft,this.sd=null}function Te(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function He(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function tt(l){return alert("todo:WebPSamplerProcessPlane"),l.T}function rt(l,d){var g=l.T,S=d.ba.f.RGBA,F=S.eb,U=S.fb+l.ka*S.A,J=pi[d.ba.S],X=l.y,K=l.O,te=l.f,fe=l.N,Oe=l.ea,Re=l.W,we=d.cc,Qe=d.dc,qe=d.Mc,pe=d.Nc,me=l.ka,Je=l.ka+l.T,nt=l.U,Ke=nt+1>>1;for(me==0?J(X,K,null,null,te,fe,Oe,Re,te,fe,Oe,Re,F,U,null,null,nt):(J(d.ec,d.fc,X,K,we,Qe,qe,pe,te,fe,Oe,Re,F,U-S.A,F,U,nt),++g);me+2<Je;me+=2)we=te,Qe=fe,qe=Oe,pe=Re,fe+=l.Rc,Re+=l.Rc,U+=2*S.A,J(X,(K+=2*l.fa)-l.fa,X,K,we,Qe,qe,pe,te,fe,Oe,Re,F,U-S.A,F,U,nt);return K+=l.fa,l.j+Je<l.o?(i(d.ec,d.fc,X,K,nt),i(d.cc,d.dc,te,fe,Ke),i(d.Mc,d.Nc,Oe,Re,Ke),g--):1&Je||J(X,K,null,null,te,fe,Oe,Re,te,fe,Oe,Re,F,U+S.A,null,null,nt),g}function gt(l,d,g){var S=l.F,F=[l.J];if(S!=null){var U=l.U,J=d.ba.S,X=J==Ml||J==Dl;d=d.ba.f.RGBA;var K=[0],te=l.ka;K[0]=l.T,l.Kb&&(te==0?--K[0]:(--te,F[0]-=l.width),l.j+l.ka+l.T==l.o&&(K[0]=l.o-l.j-te));var fe=d.eb;te=d.fb+te*d.A,l=Or(S,F[0],l.width,U,K,fe,te+(X?0:3),d.A),r(g==K),l&&mt(J)&&hi(fe,te,X,U,K,d.A)}return 0}function jt(l){var d=l.ma,g=d.ba.S,S=11>g,F=g==Fl||g==Il||g==Ml||g==_d||g==12||mt(g);if(d.memory=null,d.Ib=null,d.Jb=null,d.Nd=null,!Na(d.Oa,l,F?11:12))return 0;if(F&&mt(g)&&it(),l.da)alert("todo:use_scaling");else{if(S){if(d.Ib=tt,l.Kb){if(g=l.U+1>>1,d.memory=s(l.U+2*g),d.memory==null)return 0;d.ec=d.memory,d.fc=0,d.cc=d.ec,d.dc=d.fc+l.U,d.Mc=d.cc,d.Nc=d.dc+g,d.Ib=rt,it()}}else alert("todo:EmitYUV");F&&(d.Jb=gt,S&&Le())}if(S&&!mh){for(l=0;256>l;++l)gm[l]=89858*(l-128)+ql>>Bl,ym[l]=-22014*(l-128)+ql,bm[l]=-45773*(l-128),xm[l]=113618*(l-128)+ql>>Bl;for(l=Da;l<Od;++l)d=76283*(l-16)+ql>>Bl,vm[l-Da]=ei(d,255),wm[l-Da]=ei(d+8>>4,15);mh=1}return 1}function It(l){var d=l.ma,g=l.U,S=l.T;return r(!(1&l.ka)),0>=g||0>=S?0:(g=d.Ib(l,d),d.Jb!=null&&d.Jb(l,d,g),d.Dc+=g,1)}function Ve(l){l.ma.memory=null}function Ye(l,d,g,S){return y(l,8)!=47?0:(d[0]=y(l,14)+1,g[0]=y(l,14)+1,S[0]=y(l,1),y(l,3)!=0?0:!l.h)}function Et(l,d){if(4>l)return l+1;var g=l-2>>1;return(2+(1&l)<<g)+y(d,g)+1}function lt(l,d){return 120<d?d-120:1<=(g=((g=rm[d-1])>>4)*l+(8-(15&g)))?g:1;var g}function je(l,d,g){var S=q(g),F=l[d+=255&S].g-8;return 0<F&&($(g,g.u+8),S=q(g),d+=l[d].value,d+=S&(1<<F)-1),$(g,g.u+l[d].g),l[d].value}function Ot(l,d,g){return g.g+=l.g,g.value+=l.value<<d>>>0,r(8>=g.g),l.g}function Ht(l,d,g){var S=l.xc;return r((d=S==0?0:l.vc[l.md*(g>>S)+(d>>S)])<l.Wb),l.Ya[d]}function sr(l,d,g,S){var F=l.ab,U=l.c*d,J=l.C;d=J+d;var X=g,K=S;for(S=l.Ta,g=l.Ua;0<F--;){var te=l.gc[F],fe=J,Oe=d,Re=X,we=K,Qe=(K=S,X=g,te.Ea);switch(r(fe<Oe),r(Oe<=te.nc),te.hc){case 2:Pl(Re,we,(Oe-fe)*Qe,K,X);break;case 0:var qe=fe,pe=Oe,me=K,Je=X,nt=(bt=te).Ea;qe==0&&(Sd(Re,we,null,null,1,me,Je),ve(Re,we+1,0,0,nt-1,me,Je+1),we+=nt,Je+=nt,++qe);for(var Ke=1<<bt.b,kt=Ke-1,xt=Se(nt,bt.b),Dt=bt.K,bt=bt.w+(qe>>bt.b)*xt;qe<pe;){var ur=Dt,gr=bt,dr=1;for(Ea(Re,we,me,Je-nt,1,me,Je);dr<nt;){var ar=(dr&~kt)+Ke;ar>nt&&(ar=nt),(0,ds[ur[gr++]>>8&15])(Re,we+ +dr,me,Je+dr-nt,ar-dr,me,Je+dr),dr=ar}we+=nt,Je+=nt,++qe&kt||(bt+=xt)}Oe!=te.nc&&i(K,X-Qe,K,X+(Oe-fe-1)*Qe,Qe);break;case 1:for(Qe=Re,pe=we,nt=(Re=te.Ea)-(Je=Re&~(me=(we=1<<te.b)-1)),qe=Se(Re,te.b),Ke=te.K,te=te.w+(fe>>te.b)*qe;fe<Oe;){for(kt=Ke,xt=te,Dt=new Xe,bt=pe+Je,ur=pe+Re;pe<bt;)De(kt[xt++],Dt),Bs(Dt,Qe,pe,we,K,X),pe+=we,X+=we;pe<ur&&(De(kt[xt++],Dt),Bs(Dt,Qe,pe,nt,K,X),pe+=nt,X+=nt),++fe&me||(te+=qe)}break;case 3:if(Re==K&&we==X&&0<te.b){for(pe=K,Re=Qe=X+(Oe-fe)*Qe-(Je=(Oe-fe)*Se(te.Ea,te.b)),we=K,me=X,qe=[],Je=(nt=Je)-1;0<=Je;--Je)qe[Je]=we[me+Je];for(Je=nt-1;0<=Je;--Je)pe[Re+Je]=qe[Je];ci(te,fe,Oe,K,Qe,K,X)}else ci(te,fe,Oe,Re,we,K,X)}X=S,K=g}K!=g&&i(S,g,X,K,U)}function jn(l,d){var g=l.V,S=l.Ba+l.c*l.C,F=d-l.C;if(r(d<=l.l.o),r(16>=F),0<F){var U=l.l,J=l.Ta,X=l.Ua,K=U.width;if(sr(l,F,g,S),F=X=[X],r((g=l.C)<(S=d)),r(U.v<U.va),S>U.o&&(S=U.o),g<U.j){var te=U.j-g;g=U.j,F[0]+=te*K}if(g>=S?g=0:(F[0]+=4*U.v,U.ka=g-U.j,U.U=U.va-U.v,U.T=S-g,g=1),g){if(X=X[0],11>(g=l.ca).S){var fe=g.f.RGBA,Oe=(S=g.S,F=U.U,U=U.T,te=fe.eb,fe.A),Re=U;for(fe=fe.fb+l.Ma*fe.A;0<Re--;){var we=J,Qe=X,qe=F,pe=te,me=fe;switch(S){case zl:Hn(we,Qe,qe,pe,me);break;case Fl:zn(we,Qe,qe,pe,me);break;case kd:zn(we,Qe,qe,pe,me),hi(pe,me,0,qe,1,0);break;case oh:Xi(we,Qe,qe,pe,me);break;case Il:Ct(we,Qe,qe,pe,me,1);break;case Ad:Ct(we,Qe,qe,pe,me,1),hi(pe,me,0,qe,1,0);break;case Ml:Ct(we,Qe,qe,pe,me,0);break;case Dl:Ct(we,Qe,qe,pe,me,0),hi(pe,me,1,qe,1,0);break;case _d:us(we,Qe,qe,pe,me);break;case Ld:us(we,Qe,qe,pe,me),Nr(pe,me,qe,1,0);break;case ah:Ji(we,Qe,qe,pe,me);break;default:r(0)}X+=K,fe+=Oe}l.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");r(l.Ma<=g.height)}}l.C=d,r(l.C<=l.i)}function cr(l){var d;if(0<l.ua)return 0;for(d=0;d<l.Wb;++d){var g=l.Ya[d].G,S=l.Ya[d].H;if(0<g[1][S[1]+0].g||0<g[2][S[2]+0].g||0<g[3][S[3]+0].g)return 0}return 1}function nn(l,d,g,S,F,U){if(l.Z!=0){var J=l.qd,X=l.rd;for(r(ms[l.Z]!=null);d<g;++d)ms[l.Z](J,X,S,F,S,F,U),J=S,X=F,F+=U;l.qd=J,l.rd=X}}function ye(l,d){var g=l.l.ma,S=g.Z==0||g.Z==1?l.l.j:l.C;if(S=l.C<S?S:l.C,r(d<=l.l.o),d>S){var F=l.l.width,U=g.ca,J=g.tb+F*S,X=l.V,K=l.Ba+l.c*S,te=l.gc;r(l.ab==1),r(te[0].hc==3),Nl(te[0],S,d,X,K,U,J),nn(g,S,d,U,J,F)}l.C=l.Ma=d}function vt(l,d,g,S,F,U,J){var X=l.$/S,K=l.$%S,te=l.m,fe=l.s,Oe=g+l.$,Re=Oe;F=g+S*F;var we=g+S*U,Qe=280+fe.ua,qe=l.Pb?X:16777216,pe=0<fe.ua?fe.Wa:null,me=fe.wc,Je=Oe<we?Ht(fe,K,X):null;r(l.C<U),r(we<=F);var nt=!1;e:for(;;){for(;nt||Oe<we;){var Ke=0;if(X>=qe){var kt=Oe-g;r((qe=l).Pb),qe.wd=qe.m,qe.xd=kt,0<qe.s.ua&&be(qe.s.Wa,qe.s.vb),qe=X+im}if(K&me||(Je=Ht(fe,K,X)),r(Je!=null),Je.Qb&&(d[Oe]=Je.qb,nt=!0),!nt)if(Q(te),Je.jc){Ke=te,kt=d;var xt=Oe,Dt=Je.pd[q(Ke)&Cn-1];r(Je.jc),256>Dt.g?($(Ke,Ke.u+Dt.g),kt[xt]=Dt.value,Ke=0):($(Ke,Ke.u+Dt.g-256),r(256<=Dt.value),Ke=Dt.value),Ke==0&&(nt=!0)}else Ke=je(Je.G[0],Je.H[0],te);if(te.h)break;if(nt||256>Ke){if(!nt)if(Je.nd)d[Oe]=(Je.qb|Ke<<8)>>>0;else{if(Q(te),nt=je(Je.G[1],Je.H[1],te),Q(te),kt=je(Je.G[2],Je.H[2],te),xt=je(Je.G[3],Je.H[3],te),te.h)break;d[Oe]=(xt<<24|nt<<16|Ke<<8|kt)>>>0}if(nt=!1,++Oe,++K>=S&&(K=0,++X,J!=null&&X<=U&&!(X%16)&&J(l,X),pe!=null))for(;Re<Oe;)Ke=d[Re++],pe.X[(506832829*Ke&4294967295)>>>pe.Mb]=Ke}else if(280>Ke){if(Ke=Et(Ke-256,te),kt=je(Je.G[4],Je.H[4],te),Q(te),kt=lt(S,kt=Et(kt,te)),te.h)break;if(Oe-g<kt||F-Oe<Ke)break e;for(xt=0;xt<Ke;++xt)d[Oe+xt]=d[Oe+xt-kt];for(Oe+=Ke,K+=Ke;K>=S;)K-=S,++X,J!=null&&X<=U&&!(X%16)&&J(l,X);if(r(Oe<=F),K&me&&(Je=Ht(fe,K,X)),pe!=null)for(;Re<Oe;)Ke=d[Re++],pe.X[(506832829*Ke&4294967295)>>>pe.Mb]=Ke}else{if(!(Ke<Qe))break e;for(nt=Ke-280,r(pe!=null);Re<Oe;)Ke=d[Re++],pe.X[(506832829*Ke&4294967295)>>>pe.Mb]=Ke;Ke=Oe,r(!(nt>>>(kt=pe).Xa)),d[Ke]=kt.X[nt],nt=!0}nt||r(te.h==N(te))}if(l.Pb&&te.h&&Oe<F)r(l.m.h),l.a=5,l.m=l.wd,l.$=l.xd,0<l.s.ua&&be(l.s.vb,l.s.Wa);else{if(te.h)break e;J!=null&&J(l,X>U?U:X),l.a=0,l.$=Oe-g}return 1}return l.a=3,0}function At(l){r(l!=null),l.vc=null,l.yc=null,l.Ya=null;var d=l.Wa;d!=null&&(d.X=null),l.vb=null,r(l!=null)}function Rt(){var l=new jd;return l==null?null:(l.a=0,l.xb=dh,dt("Predictor","VP8LPredictors"),dt("Predictor","VP8LPredictors_C"),dt("PredictorAdd","VP8LPredictorsAdd"),dt("PredictorAdd","VP8LPredictorsAdd_C"),Pl=Pe,Bs=_e,Hn=Ne,zn=st,us=Ge,Ji=ot,Xi=Nt,G.VP8LMapColor32b=ko,G.VP8LMapColor8b=Ol,l)}function Wt(l,d,g,S,F){var U=1,J=[l],X=[d],K=S.m,te=S.s,fe=null,Oe=0;e:for(;;){if(g)for(;U&&y(K,1);){var Re=J,we=X,Qe=S,qe=1,pe=Qe.m,me=Qe.gc[Qe.ab],Je=y(pe,2);if(Qe.Oc&1<<Je)U=0;else{switch(Qe.Oc|=1<<Je,me.hc=Je,me.Ea=Re[0],me.nc=we[0],me.K=[null],++Qe.ab,r(4>=Qe.ab),Je){case 0:case 1:me.b=y(pe,3)+2,qe=Wt(Se(me.Ea,me.b),Se(me.nc,me.b),0,Qe,me.K),me.K=me.K[0];break;case 3:var nt,Ke=y(pe,8)+1,kt=16<Ke?0:4<Ke?1:2<Ke?2:3;if(Re[0]=Se(me.Ea,kt),me.b=kt,nt=qe=Wt(Ke,1,0,Qe,me.K)){var xt,Dt=Ke,bt=me,ur=1<<(8>>bt.b),gr=s(ur);if(gr==null)nt=0;else{var dr=bt.K[0],ar=bt.w;for(gr[0]=bt.K[0][0],xt=1;xt<1*Dt;++xt)gr[xt]=ce(dr[ar+xt],gr[xt-1]);for(;xt<4*ur;++xt)gr[xt]=0;bt.K[0]=null,bt.K[0]=gr,nt=1}}qe=nt;break;case 2:break;default:r(0)}U=qe}}if(J=J[0],X=X[0],U&&y(K,1)&&!(U=1<=(Oe=y(K,4))&&11>=Oe)){S.a=3;break e}var wr;if(wr=U)t:{var vr,Qt,on,$n=S,an=J,Gn=X,xr=Oe,ri=g,ni=$n.m,pn=$n.s,_n=[null],In=1,mi=0,Mi=nm[xr];r:for(;;){if(ri&&y(ni,1)){var mn=y(ni,3)+2,es=Se(an,mn),$s=Se(Gn,mn),Oo=es*$s;if(!Wt(es,$s,0,$n,_n))break r;for(_n=_n[0],pn.xc=mn,vr=0;vr<Oo;++vr){var gs=_n[vr]>>8&65535;_n[vr]=gs,gs>=In&&(In=gs+1)}}if(ni.h)break r;for(Qt=0;5>Qt;++Qt){var $r=lh[Qt];!Qt&&0<xr&&($r+=1<<xr),mi<$r&&(mi=$r)}var Rd=a(In*Mi,A),bh=In,yh=a(bh,z);if(yh==null)var Ul=null;else r(65536>=bh),Ul=yh;var Ba=s(mi);if(Ul==null||Ba==null||Rd==null){$n.a=1;break r}var Hl=Rd;for(vr=on=0;vr<In;++vr){var Si=Ul[vr],Ro=Si.G,Eo=Si.H,vh=0,$l=1,wh=0;for(Qt=0;5>Qt;++Qt){$r=lh[Qt],Ro[Qt]=Hl,Eo[Qt]=on,!Qt&&0<xr&&($r+=1<<xr);i:{var Gl,Ed=$r,Vl=$n,qa=Ba,Cm=Hl,_m=on,Td=0,xs=Vl.m,km=y(xs,1);if(o(qa,0,0,Ed),km){var Am=y(xs,1)+1,Lm=y(xs,1),jh=y(xs,Lm==0?1:8);qa[jh]=1,Am==2&&(qa[jh=y(xs,8)]=1);var Yl=1}else{var Sh=s(19),Ch=y(xs,4)+4;if(19<Ch){Vl.a=3;var Jl=0;break i}for(Gl=0;Gl<Ch;++Gl)Sh[tm[Gl]]=y(xs,3);var zd=void 0,Wa=void 0,_h=Vl,Pm=Sh,Xl=Ed,kh=qa,Fd=0,bs=_h.m,Ah=8,Lh=a(128,A);n:for(;j(Lh,0,7,Pm,19);){if(y(bs,1)){var Nm=2+2*y(bs,3);if((zd=2+y(bs,Nm))>Xl)break n}else zd=Xl;for(Wa=0;Wa<Xl&&zd--;){Q(bs);var Ph=Lh[0+(127&q(bs))];$(bs,bs.u+Ph.g);var To=Ph.value;if(16>To)kh[Wa++]=To,To!=0&&(Ah=To);else{var Om=To==16,Nh=To-16,Rm=Z0[Nh],Oh=y(bs,Q0[Nh])+Rm;if(Wa+Oh>Xl)break n;for(var Em=Om?Ah:0;0<Oh--;)kh[Wa++]=Em}}Fd=1;break n}Fd||(_h.a=3),Yl=Fd}(Yl=Yl&&!xs.h)&&(Td=j(Cm,_m,8,qa,Ed)),Yl&&Td!=0?Jl=Td:(Vl.a=3,Jl=0)}if(Jl==0)break r;if($l&&em[Qt]==1&&($l=Hl[on].g==0),vh+=Hl[on].g,on+=Jl,3>=Qt){var Ua,Id=Ba[0];for(Ua=1;Ua<$r;++Ua)Ba[Ua]>Id&&(Id=Ba[Ua]);wh+=Id}}if(Si.nd=$l,Si.Qb=0,$l&&(Si.qb=(Ro[3][Eo[3]+0].value<<24|Ro[1][Eo[1]+0].value<<16|Ro[2][Eo[2]+0].value)>>>0,vh==0&&256>Ro[0][Eo[0]+0].value&&(Si.Qb=1,Si.qb+=Ro[0][Eo[0]+0].value<<8)),Si.jc=!Si.Qb&&6>wh,Si.jc){var Kl,ts=Si;for(Kl=0;Kl<Cn;++Kl){var ys=Kl,vs=ts.pd[ys],Ql=ts.G[0][ts.H[0]+ys];256<=Ql.value?(vs.g=Ql.g+256,vs.value=Ql.value):(vs.g=0,vs.value=0,ys>>=Ot(Ql,8,vs),ys>>=Ot(ts.G[1][ts.H[1]+ys],16,vs),ys>>=Ot(ts.G[2][ts.H[2]+ys],0,vs),Ot(ts.G[3][ts.H[3]+ys],24,vs))}}}pn.vc=_n,pn.Wb=In,pn.Ya=Ul,pn.yc=Rd,wr=1;break t}wr=0}if(!(U=wr)){S.a=3;break e}if(0<Oe){if(te.ua=1<<Oe,!We(te.Wa,Oe)){S.a=1,U=0;break e}}else te.ua=0;var Md=S,Rh=J,Tm=X,Dd=Md.s,Bd=Dd.xc;if(Md.c=Rh,Md.i=Tm,Dd.md=Se(Rh,Bd),Dd.wc=Bd==0?-1:(1<<Bd)-1,g){S.xb=um;break e}if((fe=s(J*X))==null){S.a=1,U=0;break e}U=(U=vt(S,fe,0,J,X,X,null))&&!K.h;break e}return U?(F!=null?F[0]=fe:(r(fe==null),r(g)),S.$=0,g||At(te)):At(te),U}function $t(l,d){var g=l.c*l.i,S=g+d+16*d;return r(l.c<=d),l.V=s(S),l.V==null?(l.Ta=null,l.Ua=0,l.a=1,0):(l.Ta=l.V,l.Ua=l.Ba+g+d,1)}function ir(l,d){var g=l.C,S=d-g,F=l.V,U=l.Ba+l.c*g;for(r(d<=l.l.o);0<S;){var J=16<S?16:S,X=l.l.ma,K=l.l.width,te=K*J,fe=X.ca,Oe=X.tb+K*g,Re=l.Ta,we=l.Ua;sr(l,J,F,U),Xr(Re,we,fe,Oe,te),nn(X,g,g+J,fe,Oe,K),S-=J,F+=J*l.c,g+=J}r(g==d),l.C=l.Ma=d}function Gt(){this.ub=this.yd=this.td=this.Rb=0}function tr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function nr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function or(){this.Yb=function(){var l=[];return function d(g,S,F){for(var U=F[S],J=0;J<U&&(g.push(F.length>S+1?[]:0),!(F.length<S+1));J++)d(g[J],S+1,F)}(l,0,[3,11]),l}()}function Bt(){this.jb=s(3),this.Wc=c([4,8],or),this.Xc=c([4,17],or)}function mr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Dr(){this.ld=this.La=this.dd=this.tc=0}function Sn(){this.Na=this.la=0}function Kt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hn(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pa(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dr),this.Y=0,this.ya=Array(new hn),this.aa=0,this.l=new li}function Yr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ti(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new Gt,this.Kc=new tr,this.ed=new mr,this.Qa=new nr,this.Ic=this.$c=this.Aa=0,this.D=new pa,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Y),this.ia=0,this.pb=a(4,Kt),this.Pa=new Bt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Yr),this.Hd=0,this.rb=Array(new Sn),this.sb=0,this.wa=Array(new Dr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hn),this.L=this.aa=0,this.gd=c([4,2],Dr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function li(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ho(){var l=new Ti;return l!=null&&(l.a=0,l.sc="OK",l.cb=0,l.Xb=0,Ma||(Ma=pl)),l}function Mr(l,d,g){return l.a==0&&(l.a=d,l.sc=g,l.cb=0),0}function Ts(l,d,g){return 3<=g&&l[d+0]==157&&l[d+1]==1&&l[d+2]==42}function zs(l,d){if(l==null)return 0;if(l.a=0,l.sc="OK",d==null)return Mr(l,2,"null VP8Io passed to VP8GetHeaders()");var g=d.data,S=d.w,F=d.ha;if(4>F)return Mr(l,7,"Truncated header.");var U=g[S+0]|g[S+1]<<8|g[S+2]<<16,J=l.Od;if(J.Rb=!(1&U),J.td=U>>1&7,J.yd=U>>4&1,J.ub=U>>5,3<J.td)return Mr(l,3,"Incorrect keyframe parameters.");if(!J.yd)return Mr(l,4,"Frame not displayable.");S+=3,F-=3;var X=l.Kc;if(J.Rb){if(7>F)return Mr(l,7,"cannot parse picture header");if(!Ts(g,S,F))return Mr(l,3,"Bad code word");X.c=16383&(g[S+4]<<8|g[S+3]),X.Td=g[S+4]>>6,X.i=16383&(g[S+6]<<8|g[S+5]),X.Ud=g[S+6]>>6,S+=7,F-=7,l.za=X.c+15>>4,l.Ub=X.i+15>>4,d.width=X.c,d.height=X.i,d.Da=0,d.j=0,d.v=0,d.va=d.width,d.o=d.height,d.da=0,d.ib=d.width,d.hb=d.height,d.U=d.width,d.T=d.height,o((U=l.Pa).jb,0,255,U.jb.length),r((U=l.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,o(U.Zb,0,0,U.Zb.length),o(U.Lb,0,0,U.Lb)}if(J.ub>F)return Mr(l,7,"bad partition length");oe(U=l.m,g,S,J.ub),S+=J.ub,F-=J.ub,J.Rb&&(X.Ld=ue(U),X.Kd=ue(U)),X=l.Qa;var K,te=l.Pa;if(r(U!=null),r(X!=null),X.Cb=ue(U),X.Cb){if(X.Bb=ue(U),ue(U)){for(X.Fb=ue(U),K=0;4>K;++K)X.Zb[K]=ue(U)?v(U,7):0;for(K=0;4>K;++K)X.Lb[K]=ue(U)?v(U,6):0}if(X.Bb)for(K=0;3>K;++K)te.jb[K]=ue(U)?re(U,8):255}else X.Bb=0;if(U.Ka)return Mr(l,3,"cannot parse segment header");if((X=l.ed).zd=ue(U),X.Tb=re(U,6),X.wb=re(U,3),X.Pc=ue(U),X.Pc&&ue(U)){for(te=0;4>te;++te)ue(U)&&(X.vd[te]=v(U,6));for(te=0;4>te;++te)ue(U)&&(X.od[te]=v(U,6))}if(l.L=X.Tb==0?0:X.zd?1:2,U.Ka)return Mr(l,3,"cannot parse filter header");var fe=F;if(F=K=S,S=K+fe,X=fe,l.Xb=(1<<re(l.m,2))-1,fe<3*(te=l.Xb))g=7;else{for(K+=3*te,X-=3*te,fe=0;fe<te;++fe){var Oe=g[F+0]|g[F+1]<<8|g[F+2]<<16;Oe>X&&(Oe=X),oe(l.Jc[+fe],g,K,Oe),K+=Oe,X-=Oe,F+=3}oe(l.Jc[+te],g,K,X),g=K<S?0:5}if(g!=0)return Mr(l,g,"cannot parse partitions");for(g=re(K=l.m,7),F=ue(K)?v(K,4):0,S=ue(K)?v(K,4):0,X=ue(K)?v(K,4):0,te=ue(K)?v(K,4):0,K=ue(K)?v(K,4):0,fe=l.Qa,Oe=0;4>Oe;++Oe){if(fe.Cb){var Re=fe.Zb[Oe];fe.Fb||(Re+=g)}else{if(0<Oe){l.pb[Oe]=l.pb[0];continue}Re=g}var we=l.pb[Oe];we.Sc[0]=Pd[ei(Re+F,127)],we.Sc[1]=Nd[ei(Re+0,127)],we.Eb[0]=2*Pd[ei(Re+S,127)],we.Eb[1]=101581*Nd[ei(Re+X,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=Pd[ei(Re+te,117)],we.Qc[1]=Nd[ei(Re+K,127)],we.lc=Re+K}if(!J.Rb)return Mr(l,4,"Not a key frame.");for(ue(U),J=l.Pa,g=0;4>g;++g){for(F=0;8>F;++F)for(S=0;3>S;++S)for(X=0;11>X;++X)te=le(U,cm[g][F][S][X])?re(U,8):am[g][F][S][X],J.Wc[g][F].Yb[S][X]=te;for(F=0;17>F;++F)J.Xc[g][F]=J.Wc[g][dm[F]]}return l.kc=ue(U),l.kc&&(l.Bd=re(U,8)),l.cb=1}function pl(l,d,g,S,F,U,J){var X=d[F].Yb[g];for(g=0;16>F;++F){if(!le(l,X[g+0]))return F;for(;!le(l,X[g+1]);)if(X=d[++F].Yb[0],g=0,F==16)return 16;var K=d[F+1].Yb;if(le(l,X[g+2])){var te=l,fe=0;if(le(te,(Re=X)[(Oe=g)+3]))if(le(te,Re[Oe+6])){for(X=0,Oe=2*(fe=le(te,Re[Oe+8]))+(Re=le(te,Re[Oe+9+fe])),fe=0,Re=sm[Oe];Re[X];++X)fe+=fe+le(te,Re[X]);fe+=3+(8<<Oe)}else le(te,Re[Oe+7])?(fe=7+2*le(te,165),fe+=le(te,145)):fe=5+le(te,159);else fe=le(te,Re[Oe+4])?3+le(te,Re[Oe+5]):2;X=K[2]}else fe=1,X=K[1];K=J+om[F],0>(te=l).b&&ie(te);var Oe,Re=te.b,we=(Oe=te.Ca>>1)-(te.I>>Re)>>31;--te.b,te.Ca+=we,te.Ca|=1,te.I-=(Oe+1&we)<<Re,U[K]=((fe^we)-we)*S[(0<F)+0]}return 16}function ma(l){var d=l.rb[l.sb-1];d.la=0,d.Na=0,o(l.zc,0,0,l.zc.length),l.ja=0}function sd(l,d){if(l==null)return 0;if(d==null)return Mr(l,2,"NULL VP8Io parameter in VP8Decode().");if(!l.cb&&!zs(l,d))return 0;if(r(l.cb),d.ac==null||d.ac(d)){d.ob&&(l.L=0);var g=Wl[l.L];if(l.L==2?(l.yb=0,l.zb=0):(l.yb=d.v-g>>4,l.zb=d.j-g>>4,0>l.yb&&(l.yb=0),0>l.zb&&(l.zb=0)),l.Va=d.o+15+g>>4,l.Hb=d.va+15+g>>4,l.Hb>l.za&&(l.Hb=l.za),l.Va>l.Ub&&(l.Va=l.Ub),0<l.L){var S=l.ed;for(g=0;4>g;++g){var F;if(l.Qa.Cb){var U=l.Qa.Lb[g];l.Qa.Fb||(U+=S.Tb)}else U=S.Tb;for(F=0;1>=F;++F){var J=l.gd[g][F],X=U;if(S.Pc&&(X+=S.vd[0],F&&(X+=S.od[0])),0<(X=0>X?0:63<X?63:X)){var K=X;0<S.wb&&(K=4<S.wb?K>>2:K>>1)>9-S.wb&&(K=9-S.wb),1>K&&(K=1),J.dd=K,J.tc=2*X+K,J.ld=40<=X?2:15<=X?1:0}else J.tc=0;J.La=F}}}g=0}else Mr(l,6,"Frame setup failed"),g=l.a;if(g=g==0){if(g){l.$c=0,0<l.Aa||(l.Ic=Sm);e:{g=l.Ic,S=4*(K=l.za);var te=32*K,fe=K+1,Oe=0<l.L?K*(0<l.Aa?2:1):0,Re=(l.Aa==2?2:1)*K;if((J=S+832+(F=3*(16*g+Wl[l.L])/2*te)+(U=l.Fa!=null&&0<l.Fa.length?l.Kc.c*l.Kc.i:0))!=J)g=0;else{if(J>l.Vb){if(l.Vb=0,l.Ec=s(J),l.Fc=0,l.Ec==null){g=Mr(l,1,"no memory during frame initialization.");break e}l.Vb=J}J=l.Ec,X=l.Fc,l.Ac=J,l.Bc=X,X+=S,l.Gd=a(te,Yr),l.Hd=0,l.rb=a(fe+1,Sn),l.sb=1,l.wa=Oe?a(Oe,Dr):null,l.Y=0,l.D.Nb=0,l.D.wa=l.wa,l.D.Y=l.Y,0<l.Aa&&(l.D.Y+=K),r(!0),l.oc=J,l.pc=X,X+=832,l.ya=a(Re,hn),l.aa=0,l.D.ya=l.ya,l.D.aa=l.aa,l.Aa==2&&(l.D.aa+=K),l.R=16*K,l.B=8*K,K=(te=Wl[l.L])*l.R,te=te/2*l.B,l.sa=J,l.ta=X+K,l.qa=l.sa,l.ra=l.ta+16*g*l.R+te,l.Ha=l.qa,l.Ia=l.ra+8*g*l.B+te,l.$c=0,X+=F,l.mb=U?J:null,l.nb=U?X:null,r(X+U<=l.Fc+l.Vb),ma(l),o(l.Ac,l.Bc,0,S),g=1}}if(g){if(d.ka=0,d.y=l.sa,d.O=l.ta,d.f=l.qa,d.N=l.ra,d.ea=l.Ha,d.Vd=l.Ia,d.fa=l.R,d.Rc=l.B,d.F=null,d.J=0,!El){for(g=-255;255>=g;++g)un[255+g]=0>g?-g:g;for(g=-1020;1020>=g;++g)Qi[1020+g]=-128>g?-128:127<g?127:g;for(g=-112;112>=g;++g)Ia[112+g]=-16>g?-16:15<g?15:g;for(g=-255;510>=g;++g)No[255+g]=0>g?0:255<g?255:g;El=1}Ao=ld,Ki=od,Ta=gl,Fn=ad,di=xl,Jr=ml,Lo=wa,Rl=Ms,za=wd,qs=ja,Ws=vd,hs=bo,Us=Sa,Po=kl,Hs=_l,fs=Fi,Fa=Yi,ui=yd,ji[0]=zi,ji[1]=cd,ji[2]=fd,ji[3]=pd,ji[4]=vl,ji[5]=go,ji[6]=wl,ji[7]=ba,ji[8]=gd,ji[9]=md,ps[0]=bl,ps[1]=ud,ps[2]=Vi,ps[3]=po,ps[4]=An,ps[5]=hd,ps[6]=yl,Zi[0]=as,Zi[1]=dd,Zi[2]=xd,Zi[3]=ya,Zi[4]=Is,Zi[5]=bd,Zi[6]=va,g=1}else g=0}g&&(g=function(we,Qe){for(we.M=0;we.M<we.Va;++we.M){var qe,pe=we.Jc[we.M&we.Xb],me=we.m,Je=we;for(qe=0;qe<Je.za;++qe){var nt=me,Ke=Je,kt=Ke.Ac,xt=Ke.Bc+4*qe,Dt=Ke.zc,bt=Ke.ya[Ke.aa+qe];if(Ke.Qa.Bb?bt.$b=le(nt,Ke.Pa.jb[0])?2+le(nt,Ke.Pa.jb[2]):le(nt,Ke.Pa.jb[1]):bt.$b=0,Ke.kc&&(bt.Ad=le(nt,Ke.Bd)),bt.Za=!le(nt,145)+0,bt.Za){var ur=bt.Ob,gr=0;for(Ke=0;4>Ke;++Ke){var dr,ar=Dt[0+Ke];for(dr=0;4>dr;++dr){ar=lm[kt[xt+dr]][ar];for(var wr=ch[le(nt,ar[0])];0<wr;)wr=ch[2*wr+le(nt,ar[wr])];ar=-wr,kt[xt+dr]=ar}i(ur,gr,kt,xt,4),gr+=4,Dt[0+Ke]=ar}}else ar=le(nt,156)?le(nt,128)?1:3:le(nt,163)?2:0,bt.Ob[0]=ar,o(kt,xt,ar,4),o(Dt,0,ar,4);bt.Dd=le(nt,142)?le(nt,114)?le(nt,183)?1:3:2:0}if(Je.m.Ka)return Mr(we,7,"Premature end-of-partition0 encountered.");for(;we.ja<we.za;++we.ja){if(Je=pe,nt=(me=we).rb[me.sb-1],kt=me.rb[me.sb+me.ja],qe=me.ya[me.aa+me.ja],xt=me.kc?qe.Ad:0)nt.la=kt.la=0,qe.Za||(nt.Na=kt.Na=0),qe.Hc=0,qe.Gc=0,qe.ia=0;else{var vr,Qt;if(nt=kt,kt=Je,xt=me.Pa.Xc,Dt=me.ya[me.aa+me.ja],bt=me.pb[Dt.$b],Ke=Dt.ad,ur=0,gr=me.rb[me.sb-1],ar=dr=0,o(Ke,ur,0,384),Dt.Za)var on=0,$n=xt[3];else{wr=s(16);var an=nt.Na+gr.Na;if(an=Ma(kt,xt[1],an,bt.Eb,0,wr,0),nt.Na=gr.Na=(0<an)+0,1<an)Ao(wr,0,Ke,ur);else{var Gn=wr[0]+3>>3;for(wr=0;256>wr;wr+=16)Ke[ur+wr]=Gn}on=1,$n=xt[0]}var xr=15&nt.la,ri=15&gr.la;for(wr=0;4>wr;++wr){var ni=1&ri;for(Gn=Qt=0;4>Gn;++Gn)xr=xr>>1|(ni=(an=Ma(kt,$n,an=ni+(1&xr),bt.Sc,on,Ke,ur))>on)<<7,Qt=Qt<<2|(3<an?3:1<an?2:Ke[ur+0]!=0),ur+=16;xr>>=4,ri=ri>>1|ni<<7,dr=(dr<<8|Qt)>>>0}for($n=xr,on=ri>>4,vr=0;4>vr;vr+=2){for(Qt=0,xr=nt.la>>4+vr,ri=gr.la>>4+vr,wr=0;2>wr;++wr){for(ni=1&ri,Gn=0;2>Gn;++Gn)an=ni+(1&xr),xr=xr>>1|(ni=0<(an=Ma(kt,xt[2],an,bt.Qc,0,Ke,ur)))<<3,Qt=Qt<<2|(3<an?3:1<an?2:Ke[ur+0]!=0),ur+=16;xr>>=2,ri=ri>>1|ni<<5}ar|=Qt<<4*vr,$n|=xr<<4<<vr,on|=(240&ri)<<vr}nt.la=$n,gr.la=on,Dt.Hc=dr,Dt.Gc=ar,Dt.ia=43690&ar?0:bt.ia,xt=!(dr|ar)}if(0<me.L&&(me.wa[me.Y+me.ja]=me.gd[qe.$b][qe.Za],me.wa[me.Y+me.ja].La|=!xt),Je.Ka)return Mr(we,7,"Premature end-of-file encountered.")}if(ma(we),me=Qe,Je=1,qe=(pe=we).D,nt=0<pe.L&&pe.M>=pe.zb&&pe.M<=pe.Va,pe.Aa==0)e:{if(qe.M=pe.M,qe.uc=nt,Pa(pe,qe),Je=1,qe=(Qt=pe.D).Nb,nt=(ar=Wl[pe.L])*pe.R,kt=ar/2*pe.B,wr=16*qe*pe.R,Gn=8*qe*pe.B,xt=pe.sa,Dt=pe.ta-nt+wr,bt=pe.qa,Ke=pe.ra-kt+Gn,ur=pe.Ha,gr=pe.Ia-kt+Gn,ri=(xr=Qt.M)==0,dr=xr>=pe.Va-1,pe.Aa==2&&Pa(pe,Qt),Qt.uc)for(ni=(an=pe).D.M,r(an.D.uc),Qt=an.yb;Qt<an.Hb;++Qt){on=Qt,$n=ni;var pn=(_n=($r=an).D).Nb;vr=$r.R;var _n=_n.wa[_n.Y+on],In=$r.sa,mi=$r.ta+16*pn*vr+16*on,Mi=_n.dd,mn=_n.tc;if(mn!=0)if(r(3<=mn),$r.L==1)0<on&&fs(In,mi,vr,mn+4),_n.La&&ui(In,mi,vr,mn),0<$n&&Hs(In,mi,vr,mn+4),_n.La&&Fa(In,mi,vr,mn);else{var es=$r.B,$s=$r.qa,Oo=$r.ra+8*pn*es+8*on,gs=$r.Ha,$r=$r.Ia+8*pn*es+8*on;pn=_n.ld,0<on&&(Rl(In,mi,vr,mn+4,Mi,pn),qs($s,Oo,gs,$r,es,mn+4,Mi,pn)),_n.La&&(hs(In,mi,vr,mn,Mi,pn),Po($s,Oo,gs,$r,es,mn,Mi,pn)),0<$n&&(Lo(In,mi,vr,mn+4,Mi,pn),za($s,Oo,gs,$r,es,mn+4,Mi,pn)),_n.La&&(Ws(In,mi,vr,mn,Mi,pn),Us($s,Oo,gs,$r,es,mn,Mi,pn))}}if(pe.ia&&alert("todo:DitherRow"),me.put!=null){if(Qt=16*xr,xr=16*(xr+1),ri?(me.y=pe.sa,me.O=pe.ta+wr,me.f=pe.qa,me.N=pe.ra+Gn,me.ea=pe.Ha,me.W=pe.Ia+Gn):(Qt-=ar,me.y=xt,me.O=Dt,me.f=bt,me.N=Ke,me.ea=ur,me.W=gr),dr||(xr-=ar),xr>me.o&&(xr=me.o),me.F=null,me.J=null,pe.Fa!=null&&0<pe.Fa.length&&Qt<xr&&(me.J=Aa(pe,me,Qt,xr-Qt),me.F=pe.mb,me.F==null&&me.F.length==0)){Je=Mr(pe,3,"Could not decode alpha data.");break e}Qt<me.j&&(ar=me.j-Qt,Qt=me.j,r(!(1&ar)),me.O+=pe.R*ar,me.N+=pe.B*(ar>>1),me.W+=pe.B*(ar>>1),me.F!=null&&(me.J+=me.width*ar)),Qt<xr&&(me.O+=me.v,me.N+=me.v>>1,me.W+=me.v>>1,me.F!=null&&(me.J+=me.v),me.ka=Qt-me.j,me.U=me.va-me.v,me.T=xr-Qt,Je=me.put(me))}qe+1!=pe.Ic||dr||(i(pe.sa,pe.ta-nt,xt,Dt+16*pe.R,nt),i(pe.qa,pe.ra-kt,bt,Ke+8*pe.B,kt),i(pe.Ha,pe.Ia-kt,ur,gr+8*pe.B,kt))}if(!Je)return Mr(we,6,"Output aborted.")}return 1}(l,d)),d.bc!=null&&d.bc(d),g&=1}return g?(l.cb=0,g):0}function yi(l,d,g,S,F){F=l[d+g+32*S]+(F>>3),l[d+g+32*S]=-256&F?0>F?0:255:F}function fo(l,d,g,S,F,U){yi(l,d,0,g,S+F),yi(l,d,1,g,S+U),yi(l,d,2,g,S-U),yi(l,d,3,g,S-F)}function Wn(l){return(20091*l>>16)+l}function ga(l,d,g,S){var F,U=0,J=s(16);for(F=0;4>F;++F){var X=l[d+0]+l[d+8],K=l[d+0]-l[d+8],te=(35468*l[d+4]>>16)-Wn(l[d+12]),fe=Wn(l[d+4])+(35468*l[d+12]>>16);J[U+0]=X+fe,J[U+1]=K+te,J[U+2]=K-te,J[U+3]=X-fe,U+=4,d++}for(F=U=0;4>F;++F)X=(l=J[U+0]+4)+J[U+8],K=l-J[U+8],te=(35468*J[U+4]>>16)-Wn(J[U+12]),yi(g,S,0,0,X+(fe=Wn(J[U+4])+(35468*J[U+12]>>16))),yi(g,S,1,0,K+te),yi(g,S,2,0,K-te),yi(g,S,3,0,X-fe),U++,S+=32}function ml(l,d,g,S){var F=l[d+0]+4,U=35468*l[d+4]>>16,J=Wn(l[d+4]),X=35468*l[d+1]>>16;fo(g,S,0,F+J,l=Wn(l[d+1]),X),fo(g,S,1,F+U,l,X),fo(g,S,2,F-U,l,X),fo(g,S,3,F-J,l,X)}function od(l,d,g,S,F){ga(l,d,g,S),F&&ga(l,d+16,g,S+4)}function gl(l,d,g,S){Ki(l,d+0,g,S,1),Ki(l,d+32,g,S+128,1)}function ad(l,d,g,S){var F;for(l=l[d+0]+4,F=0;4>F;++F)for(d=0;4>d;++d)yi(g,S,d,F,l)}function xl(l,d,g,S){l[d+0]&&Fn(l,d+0,g,S),l[d+16]&&Fn(l,d+16,g,S+4),l[d+32]&&Fn(l,d+32,g,S+128),l[d+48]&&Fn(l,d+48,g,S+128+4)}function ld(l,d,g,S){var F,U=s(16);for(F=0;4>F;++F){var J=l[d+0+F]+l[d+12+F],X=l[d+4+F]+l[d+8+F],K=l[d+4+F]-l[d+8+F],te=l[d+0+F]-l[d+12+F];U[0+F]=J+X,U[8+F]=J-X,U[4+F]=te+K,U[12+F]=te-K}for(F=0;4>F;++F)J=(l=U[0+4*F]+3)+U[3+4*F],X=U[1+4*F]+U[2+4*F],K=U[1+4*F]-U[2+4*F],te=l-U[3+4*F],g[S+0]=J+X>>3,g[S+16]=te+K>>3,g[S+32]=J-X>>3,g[S+48]=te-K>>3,S+=64}function xa(l,d,g){var S,F=d-32,U=ti,J=255-l[F-1];for(S=0;S<g;++S){var X,K=U,te=J+l[d-1];for(X=0;X<g;++X)l[d+X]=K[te+l[F+X]];d+=32}}function cd(l,d){xa(l,d,4)}function dd(l,d){xa(l,d,8)}function ud(l,d){xa(l,d,16)}function Vi(l,d){var g;for(g=0;16>g;++g)i(l,d+32*g,l,d-32,16)}function po(l,d){var g;for(g=16;0<g;--g)o(l,d,l[d-1],16),d+=32}function mo(l,d,g){var S;for(S=0;16>S;++S)o(d,g+32*S,l,16)}function bl(l,d){var g,S=16;for(g=0;16>g;++g)S+=l[d-1+32*g]+l[d+g-32];mo(S>>5,l,d)}function An(l,d){var g,S=8;for(g=0;16>g;++g)S+=l[d-1+32*g];mo(S>>4,l,d)}function hd(l,d){var g,S=8;for(g=0;16>g;++g)S+=l[d+g-32];mo(S>>4,l,d)}function yl(l,d){mo(128,l,d)}function Vt(l,d,g){return l+2*d+g+2>>2}function fd(l,d){var g,S=d-32;for(S=new Uint8Array([Vt(l[S-1],l[S+0],l[S+1]),Vt(l[S+0],l[S+1],l[S+2]),Vt(l[S+1],l[S+2],l[S+3]),Vt(l[S+2],l[S+3],l[S+4])]),g=0;4>g;++g)i(l,d+32*g,S,0,S.length)}function pd(l,d){var g=l[d-1],S=l[d-1+32],F=l[d-1+64],U=l[d-1+96];ge(l,d+0,16843009*Vt(l[d-1-32],g,S)),ge(l,d+32,16843009*Vt(g,S,F)),ge(l,d+64,16843009*Vt(S,F,U)),ge(l,d+96,16843009*Vt(F,U,U))}function zi(l,d){var g,S=4;for(g=0;4>g;++g)S+=l[d+g-32]+l[d-1+32*g];for(S>>=3,g=0;4>g;++g)o(l,d+32*g,S,4)}function vl(l,d){var g=l[d-1+0],S=l[d-1+32],F=l[d-1+64],U=l[d-1-32],J=l[d+0-32],X=l[d+1-32],K=l[d+2-32],te=l[d+3-32];l[d+0+96]=Vt(S,F,l[d-1+96]),l[d+1+96]=l[d+0+64]=Vt(g,S,F),l[d+2+96]=l[d+1+64]=l[d+0+32]=Vt(U,g,S),l[d+3+96]=l[d+2+64]=l[d+1+32]=l[d+0+0]=Vt(J,U,g),l[d+3+64]=l[d+2+32]=l[d+1+0]=Vt(X,J,U),l[d+3+32]=l[d+2+0]=Vt(K,X,J),l[d+3+0]=Vt(te,K,X)}function wl(l,d){var g=l[d+1-32],S=l[d+2-32],F=l[d+3-32],U=l[d+4-32],J=l[d+5-32],X=l[d+6-32],K=l[d+7-32];l[d+0+0]=Vt(l[d+0-32],g,S),l[d+1+0]=l[d+0+32]=Vt(g,S,F),l[d+2+0]=l[d+1+32]=l[d+0+64]=Vt(S,F,U),l[d+3+0]=l[d+2+32]=l[d+1+64]=l[d+0+96]=Vt(F,U,J),l[d+3+32]=l[d+2+64]=l[d+1+96]=Vt(U,J,X),l[d+3+64]=l[d+2+96]=Vt(J,X,K),l[d+3+96]=Vt(X,K,K)}function go(l,d){var g=l[d-1+0],S=l[d-1+32],F=l[d-1+64],U=l[d-1-32],J=l[d+0-32],X=l[d+1-32],K=l[d+2-32],te=l[d+3-32];l[d+0+0]=l[d+1+64]=U+J+1>>1,l[d+1+0]=l[d+2+64]=J+X+1>>1,l[d+2+0]=l[d+3+64]=X+K+1>>1,l[d+3+0]=K+te+1>>1,l[d+0+96]=Vt(F,S,g),l[d+0+64]=Vt(S,g,U),l[d+0+32]=l[d+1+96]=Vt(g,U,J),l[d+1+32]=l[d+2+96]=Vt(U,J,X),l[d+2+32]=l[d+3+96]=Vt(J,X,K),l[d+3+32]=Vt(X,K,te)}function ba(l,d){var g=l[d+0-32],S=l[d+1-32],F=l[d+2-32],U=l[d+3-32],J=l[d+4-32],X=l[d+5-32],K=l[d+6-32],te=l[d+7-32];l[d+0+0]=g+S+1>>1,l[d+1+0]=l[d+0+64]=S+F+1>>1,l[d+2+0]=l[d+1+64]=F+U+1>>1,l[d+3+0]=l[d+2+64]=U+J+1>>1,l[d+0+32]=Vt(g,S,F),l[d+1+32]=l[d+0+96]=Vt(S,F,U),l[d+2+32]=l[d+1+96]=Vt(F,U,J),l[d+3+32]=l[d+2+96]=Vt(U,J,X),l[d+3+64]=Vt(J,X,K),l[d+3+96]=Vt(X,K,te)}function md(l,d){var g=l[d-1+0],S=l[d-1+32],F=l[d-1+64],U=l[d-1+96];l[d+0+0]=g+S+1>>1,l[d+2+0]=l[d+0+32]=S+F+1>>1,l[d+2+32]=l[d+0+64]=F+U+1>>1,l[d+1+0]=Vt(g,S,F),l[d+3+0]=l[d+1+32]=Vt(S,F,U),l[d+3+32]=l[d+1+64]=Vt(F,U,U),l[d+3+64]=l[d+2+64]=l[d+0+96]=l[d+1+96]=l[d+2+96]=l[d+3+96]=U}function gd(l,d){var g=l[d-1+0],S=l[d-1+32],F=l[d-1+64],U=l[d-1+96],J=l[d-1-32],X=l[d+0-32],K=l[d+1-32],te=l[d+2-32];l[d+0+0]=l[d+2+32]=g+J+1>>1,l[d+0+32]=l[d+2+64]=S+g+1>>1,l[d+0+64]=l[d+2+96]=F+S+1>>1,l[d+0+96]=U+F+1>>1,l[d+3+0]=Vt(X,K,te),l[d+2+0]=Vt(J,X,K),l[d+1+0]=l[d+3+32]=Vt(g,J,X),l[d+1+32]=l[d+3+64]=Vt(S,g,J),l[d+1+64]=l[d+3+96]=Vt(F,S,g),l[d+1+96]=Vt(U,F,S)}function xd(l,d){var g;for(g=0;8>g;++g)i(l,d+32*g,l,d-32,8)}function ya(l,d){var g;for(g=0;8>g;++g)o(l,d,l[d-1],8),d+=32}function Fs(l,d,g){var S;for(S=0;8>S;++S)o(d,g+32*S,l,8)}function as(l,d){var g,S=8;for(g=0;8>g;++g)S+=l[d+g-32]+l[d-1+32*g];Fs(S>>4,l,d)}function bd(l,d){var g,S=4;for(g=0;8>g;++g)S+=l[d+g-32];Fs(S>>3,l,d)}function Is(l,d){var g,S=4;for(g=0;8>g;++g)S+=l[d-1+32*g];Fs(S>>3,l,d)}function va(l,d){Fs(128,l,d)}function xo(l,d,g){var S=l[d-g],F=l[d+0],U=3*(F-S)+Cd[1020+l[d-2*g]-l[d+g]],J=Tl[112+(U+4>>3)];l[d-g]=ti[255+S+Tl[112+(U+3>>3)]],l[d+0]=ti[255+F-J]}function jl(l,d,g,S){var F=l[d+0],U=l[d+g];return fi[255+l[d-2*g]-l[d-g]]>S||fi[255+U-F]>S}function Sl(l,d,g,S){return 4*fi[255+l[d-g]-l[d+0]]+fi[255+l[d-2*g]-l[d+g]]<=S}function Cl(l,d,g,S,F){var U=l[d-3*g],J=l[d-2*g],X=l[d-g],K=l[d+0],te=l[d+g],fe=l[d+2*g],Oe=l[d+3*g];return 4*fi[255+X-K]+fi[255+J-te]>S?0:fi[255+l[d-4*g]-U]<=F&&fi[255+U-J]<=F&&fi[255+J-X]<=F&&fi[255+Oe-fe]<=F&&fi[255+fe-te]<=F&&fi[255+te-K]<=F}function _l(l,d,g,S){var F=2*S+1;for(S=0;16>S;++S)Sl(l,d+S,g,F)&&xo(l,d+S,g)}function Fi(l,d,g,S){var F=2*S+1;for(S=0;16>S;++S)Sl(l,d+S*g,1,F)&&xo(l,d+S*g,1)}function Yi(l,d,g,S){var F;for(F=3;0<F;--F)_l(l,d+=4*g,g,S)}function yd(l,d,g,S){var F;for(F=3;0<F;--F)Fi(l,d+=4,g,S)}function ls(l,d,g,S,F,U,J,X){for(U=2*U+1;0<F--;){if(Cl(l,d,g,U,J))if(jl(l,d,g,X))xo(l,d,g);else{var K=l,te=d,fe=g,Oe=K[te-2*fe],Re=K[te-fe],we=K[te+0],Qe=K[te+fe],qe=K[te+2*fe],pe=27*(Je=Cd[1020+3*(we-Re)+Cd[1020+Oe-Qe]])+63>>7,me=18*Je+63>>7,Je=9*Je+63>>7;K[te-3*fe]=ti[255+K[te-3*fe]+Je],K[te-2*fe]=ti[255+Oe+me],K[te-fe]=ti[255+Re+pe],K[te+0]=ti[255+we-pe],K[te+fe]=ti[255+Qe-me],K[te+2*fe]=ti[255+qe-Je]}d+=S}}function vi(l,d,g,S,F,U,J,X){for(U=2*U+1;0<F--;){if(Cl(l,d,g,U,J))if(jl(l,d,g,X))xo(l,d,g);else{var K=l,te=d,fe=g,Oe=K[te-fe],Re=K[te+0],we=K[te+fe],Qe=Tl[112+((qe=3*(Re-Oe))+4>>3)],qe=Tl[112+(qe+3>>3)],pe=Qe+1>>1;K[te-2*fe]=ti[255+K[te-2*fe]+pe],K[te-fe]=ti[255+Oe+qe],K[te+0]=ti[255+Re-Qe],K[te+fe]=ti[255+we-pe]}d+=S}}function wa(l,d,g,S,F,U){ls(l,d,g,1,16,S,F,U)}function Ms(l,d,g,S,F,U){ls(l,d,1,g,16,S,F,U)}function vd(l,d,g,S,F,U){var J;for(J=3;0<J;--J)vi(l,d+=4*g,g,1,16,S,F,U)}function bo(l,d,g,S,F,U){var J;for(J=3;0<J;--J)vi(l,d+=4,1,g,16,S,F,U)}function wd(l,d,g,S,F,U,J,X){ls(l,d,F,1,8,U,J,X),ls(g,S,F,1,8,U,J,X)}function ja(l,d,g,S,F,U,J,X){ls(l,d,1,F,8,U,J,X),ls(g,S,1,F,8,U,J,X)}function Sa(l,d,g,S,F,U,J,X){vi(l,d+4*F,F,1,8,U,J,X),vi(g,S+4*F,F,1,8,U,J,X)}function kl(l,d,g,S,F,U,J,X){vi(l,d+4,1,F,8,U,J,X),vi(g,S+4,1,F,8,U,J,X)}function yo(){this.ba=new fr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new He,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ca(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function _a(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Al(){this.ua=0,this.Wa=new ee,this.vb=new ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new A}function jd(){this.xb=this.a=0,this.l=new li,this.ca=new fr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Al,this.ab=0,this.gc=a(4,_a),this.Oc=0}function vo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new li,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ds(l,d,g,S,F,U,J){for(l=l==null?0:l[d+0],d=0;d<J;++d)F[U+d]=l+g[S+d]&255,l=F[U+d]}function ka(l,d,g,S,F,U,J){var X;if(l==null)Ds(null,null,g,S,F,U,J);else for(X=0;X<J;++X)F[U+X]=l[d+X]+g[S+X]&255}function cs(l,d,g,S,F,U,J){if(l==null)Ds(null,null,g,S,F,U,J);else{var X,K=l[d+0],te=K,fe=K;for(X=0;X<J;++X)te=fe+(K=l[d+X])-te,fe=g[S+X]+(-256&te?0>te?0:255:te)&255,te=K,F[U+X]=fe}}function Aa(l,d,g,S){var F=d.width,U=d.o;if(r(l!=null&&d!=null),0>g||0>=S||g+S>U)return null;if(!l.Cc){if(l.ga==null){var J;if(l.ga=new vo,(J=l.ga==null)||(J=d.width*d.o,r(l.Gb.length==0),l.Gb=s(J),l.Uc=0,l.Gb==null?J=0:(l.mb=l.Gb,l.nb=l.Uc,l.rc=null,J=1),J=!J),!J){J=l.ga;var X=l.Fa,K=l.P,te=l.qc,fe=l.mb,Oe=l.nb,Re=K+1,we=te-1,Qe=J.l;if(r(X!=null&&fe!=null&&d!=null),ms[0]=null,ms[1]=Ds,ms[2]=ka,ms[3]=cs,J.ca=fe,J.tb=Oe,J.c=d.width,J.i=d.height,r(0<J.c&&0<J.i),1>=te)d=0;else if(J.$a=X[K+0]>>0&3,J.Z=X[K+0]>>2&3,J.Lc=X[K+0]>>4&3,K=X[K+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||K)d=0;else if(Qe.put=It,Qe.ac=jt,Qe.bc=Ve,Qe.ma=J,Qe.width=d.width,Qe.height=d.height,Qe.Da=d.Da,Qe.v=d.v,Qe.va=d.va,Qe.j=d.j,Qe.o=d.o,J.$a)e:{r(J.$a==1),d=Rt();t:for(;;){if(d==null){d=0;break e}if(r(J!=null),J.mc=d,d.c=J.c,d.i=J.i,d.l=J.l,d.l.ma=J,d.l.width=J.c,d.l.height=J.i,d.a=0,ne(d.m,X,Re,we),!Wt(J.c,J.i,1,d,null)||(d.ab==1&&d.gc[0].hc==3&&cr(d.s)?(J.ic=1,X=d.c*d.i,d.Ta=null,d.Ua=0,d.V=s(X),d.Ba=0,d.V==null?(d.a=1,d=0):d=1):(J.ic=0,d=$t(d,J.c)),!d))break t;d=1;break e}J.mc=null,d=0}else d=we>=J.c*J.i;J=!d}if(J)return null;l.ga.Lc!=1?l.Ga=0:S=U-g}r(l.ga!=null),r(g+S<=U);e:{if(d=(X=l.ga).c,U=X.l.o,X.$a==0){if(Re=l.rc,we=l.Vc,Qe=l.Fa,K=l.P+1+g*d,te=l.mb,fe=l.nb+g*d,r(K<=l.P+l.qc),X.Z!=0)for(r(ms[X.Z]!=null),J=0;J<S;++J)ms[X.Z](Re,we,Qe,K,te,fe,d),Re=te,we=fe,fe+=d,K+=d;else for(J=0;J<S;++J)i(te,fe,Qe,K,d),Re=te,we=fe,fe+=d,K+=d;l.rc=Re,l.Vc=we}else{if(r(X.mc!=null),d=g+S,r((J=X.mc)!=null),r(d<=J.i),J.C>=d)d=1;else if(X.ic||Le(),X.ic){X=J.V,Re=J.Ba,we=J.c;var qe=J.i,pe=(Qe=1,K=J.$/we,te=J.$%we,fe=J.m,Oe=J.s,J.$),me=we*qe,Je=we*d,nt=Oe.wc,Ke=pe<Je?Ht(Oe,te,K):null;r(pe<=me),r(d<=qe),r(cr(Oe));t:for(;;){for(;!fe.h&&pe<Je;){if(te&nt||(Ke=Ht(Oe,te,K)),r(Ke!=null),Q(fe),256>(qe=je(Ke.G[0],Ke.H[0],fe)))X[Re+pe]=qe,++pe,++te>=we&&(te=0,++K<=d&&!(K%16)&&ye(J,K));else{if(!(280>qe)){Qe=0;break t}qe=Et(qe-256,fe);var kt,xt=je(Ke.G[4],Ke.H[4],fe);if(Q(fe),!(pe>=(xt=lt(we,xt=Et(xt,fe)))&&me-pe>=qe)){Qe=0;break t}for(kt=0;kt<qe;++kt)X[Re+pe+kt]=X[Re+pe+kt-xt];for(pe+=qe,te+=qe;te>=we;)te-=we,++K<=d&&!(K%16)&&ye(J,K);pe<Je&&te&nt&&(Ke=Ht(Oe,te,K))}r(fe.h==N(fe))}ye(J,K>d?d:K);break t}!Qe||fe.h&&pe<me?(Qe=0,J.a=fe.h?5:3):J.$=pe,d=Qe}else d=vt(J,J.V,J.Ba,J.c,J.i,d,ir);if(!d){S=0;break e}}g+S>=U&&(l.Cc=1),S=1}if(!S)return null;if(l.Cc&&((S=l.ga)!=null&&(S.mc=null),l.ga=null,0<l.Ga))return alert("todo:WebPDequantizeLevels"),null}return l.nb+g*F}function f(l,d,g,S,F,U){for(;0<F--;){var J,X=l,K=d+(g?1:0),te=l,fe=d+(g?0:3);for(J=0;J<S;++J){var Oe=te[fe+4*J];Oe!=255&&(Oe*=32897,X[K+4*J+0]=X[K+4*J+0]*Oe>>23,X[K+4*J+1]=X[K+4*J+1]*Oe>>23,X[K+4*J+2]=X[K+4*J+2]*Oe>>23)}d+=U}}function I(l,d,g,S,F){for(;0<S--;){var U;for(U=0;U<g;++U){var J=l[d+2*U+0],X=15&(te=l[d+2*U+1]),K=4369*X,te=(240&te|te>>4)*K>>16;l[d+2*U+0]=(240&J|J>>4)*K>>16&240|(15&J|J<<4)*K>>16>>4&15,l[d+2*U+1]=240&te|X}d+=F}}function ae(l,d,g,S,F,U,J,X){var K,te,fe=255;for(te=0;te<F;++te){for(K=0;K<S;++K){var Oe=l[d+K];U[J+4*K]=Oe,fe&=Oe}d+=g,J+=X}return fe!=255}function he(l,d,g,S,F){var U;for(U=0;U<F;++U)g[S+U]=l[d+U]>>8}function Le(){hi=f,Nr=I,Or=ae,Xr=he}function $e(l,d,g){G[l]=function(S,F,U,J,X,K,te,fe,Oe,Re,we,Qe,qe,pe,me,Je,nt){var Ke,kt=nt-1>>1,xt=X[K+0]|te[fe+0]<<16,Dt=Oe[Re+0]|we[Qe+0]<<16;r(S!=null);var bt=3*xt+Dt+131074>>2;for(d(S[F+0],255&bt,bt>>16,qe,pe),U!=null&&(bt=3*Dt+xt+131074>>2,d(U[J+0],255&bt,bt>>16,me,Je)),Ke=1;Ke<=kt;++Ke){var ur=X[K+Ke]|te[fe+Ke]<<16,gr=Oe[Re+Ke]|we[Qe+Ke]<<16,dr=xt+ur+Dt+gr+524296,ar=dr+2*(ur+Dt)>>3;bt=ar+xt>>1,xt=(dr=dr+2*(xt+gr)>>3)+ur>>1,d(S[F+2*Ke-1],255&bt,bt>>16,qe,pe+(2*Ke-1)*g),d(S[F+2*Ke-0],255&xt,xt>>16,qe,pe+(2*Ke-0)*g),U!=null&&(bt=dr+Dt>>1,xt=ar+gr>>1,d(U[J+2*Ke-1],255&bt,bt>>16,me,Je+(2*Ke-1)*g),d(U[J+2*Ke+0],255&xt,xt>>16,me,Je+(2*Ke+0)*g)),xt=ur,Dt=gr}1&nt||(bt=3*xt+Dt+131074>>2,d(S[F+nt-1],255&bt,bt>>16,qe,pe+(nt-1)*g),U!=null&&(bt=3*Dt+xt+131074>>2,d(U[J+nt-1],255&bt,bt>>16,me,Je+(nt-1)*g)))}}function it(){pi[zl]=hm,pi[Fl]=uh,pi[oh]=fm,pi[Il]=hh,pi[Ml]=fh,pi[_d]=ph,pi[ah]=pm,pi[kd]=uh,pi[Ad]=hh,pi[Dl]=fh,pi[Ld]=ph}function _t(l){return l&-16384?0>l?0:255:l>>mm}function Tt(l,d){return _t((19077*l>>8)+(26149*d>>8)-14234)}function Xt(l,d,g){return _t((19077*l>>8)-(6419*d>>8)-(13320*g>>8)+8708)}function Yt(l,d){return _t((19077*l>>8)+(33050*d>>8)-17685)}function lr(l,d,g,S,F){S[F+0]=Tt(l,g),S[F+1]=Xt(l,d,g),S[F+2]=Yt(l,d)}function Br(l,d,g,S,F){S[F+0]=Yt(l,d),S[F+1]=Xt(l,d,g),S[F+2]=Tt(l,g)}function Hr(l,d,g,S,F){var U=Xt(l,d,g);d=U<<3&224|Yt(l,d)>>3,S[F+0]=248&Tt(l,g)|U>>5,S[F+1]=d}function sn(l,d,g,S,F){var U=240&Yt(l,d)|15;S[F+0]=240&Tt(l,g)|Xt(l,d,g)>>4,S[F+1]=U}function Ln(l,d,g,S,F){S[F+0]=255,lr(l,d,g,S,F+1)}function fn(l,d,g,S,F){Br(l,d,g,S,F),S[F+3]=255}function wi(l,d,g,S,F){lr(l,d,g,S,F),S[F+3]=255}function ei(l,d){return 0>l?0:l>d?d:l}function Ii(l,d,g){G[l]=function(S,F,U,J,X,K,te,fe,Oe){for(var Re=fe+(-2&Oe)*g;fe!=Re;)d(S[F+0],U[J+0],X[K+0],te,fe),d(S[F+1],U[J+0],X[K+0],te,fe+g),F+=2,++J,++K,fe+=2*g;1&Oe&&d(S[F+0],U[J+0],X[K+0],te,fe)}}function Ll(l,d,g){return g==0?l==0?d==0?6:5:d==0?4:0:g}function La(l,d,g,S,F){switch(l>>>30){case 3:Ki(d,g,S,F,0);break;case 2:Jr(d,g,S,F);break;case 1:Fn(d,g,S,F)}}function Pa(l,d){var g,S,F=d.M,U=d.Nb,J=l.oc,X=l.pc+40,K=l.oc,te=l.pc+584,fe=l.oc,Oe=l.pc+600;for(g=0;16>g;++g)J[X+32*g-1]=129;for(g=0;8>g;++g)K[te+32*g-1]=129,fe[Oe+32*g-1]=129;for(0<F?J[X-1-32]=K[te-1-32]=fe[Oe-1-32]=129:(o(J,X-32-1,127,21),o(K,te-32-1,127,9),o(fe,Oe-32-1,127,9)),S=0;S<l.za;++S){var Re=d.ya[d.aa+S];if(0<S){for(g=-1;16>g;++g)i(J,X+32*g-4,J,X+32*g+12,4);for(g=-1;8>g;++g)i(K,te+32*g-4,K,te+32*g+4,4),i(fe,Oe+32*g-4,fe,Oe+32*g+4,4)}var we=l.Gd,Qe=l.Hd+S,qe=Re.ad,pe=Re.Hc;if(0<F&&(i(J,X-32,we[Qe].y,0,16),i(K,te-32,we[Qe].f,0,8),i(fe,Oe-32,we[Qe].ea,0,8)),Re.Za){var me=J,Je=X-32+16;for(0<F&&(S>=l.za-1?o(me,Je,we[Qe].y[15],4):i(me,Je,we[Qe+1].y,0,4)),g=0;4>g;g++)me[Je+128+g]=me[Je+256+g]=me[Je+384+g]=me[Je+0+g];for(g=0;16>g;++g,pe<<=2)me=J,Je=X+gh[g],ji[Re.Ob[g]](me,Je),La(pe,qe,16*+g,me,Je)}else if(me=Ll(S,F,Re.Ob[0]),ps[me](J,X),pe!=0)for(g=0;16>g;++g,pe<<=2)La(pe,qe,16*+g,J,X+gh[g]);for(g=Re.Gc,me=Ll(S,F,Re.Dd),Zi[me](K,te),Zi[me](fe,Oe),pe=qe,me=K,Je=te,255&(Re=g>>0)&&(170&Re?Ta(pe,256,me,Je):di(pe,256,me,Je)),Re=fe,pe=Oe,255&(g>>=8)&&(170&g?Ta(qe,320,Re,pe):di(qe,320,Re,pe)),F<l.Ub-1&&(i(we[Qe].y,0,J,X+480,16),i(we[Qe].f,0,K,te+224,8),i(we[Qe].ea,0,fe,Oe+224,8)),g=8*U*l.B,we=l.sa,Qe=l.ta+16*S+16*U*l.R,qe=l.qa,Re=l.ra+8*S+g,pe=l.Ha,me=l.Ia+8*S+g,g=0;16>g;++g)i(we,Qe+g*l.R,J,X+32*g,16);for(g=0;8>g;++g)i(qe,Re+g*l.B,K,te+32*g,8),i(pe,me+g*l.B,fe,Oe+32*g,8)}}function wo(l,d,g,S,F,U,J,X,K){var te=[0],fe=[0],Oe=0,Re=K!=null?K.kd:0,we=K!=null?K:new Ca;if(l==null||12>g)return 7;we.data=l,we.w=d,we.ha=g,d=[d],g=[g],we.gb=[we.gb];e:{var Qe=d,qe=g,pe=we.gb;if(r(l!=null),r(qe!=null),r(pe!=null),pe[0]=0,12<=qe[0]&&!n(l,Qe[0],"RIFF")){if(n(l,Qe[0]+8,"WEBP")){pe=3;break e}var me=Ie(l,Qe[0]+4);if(12>me||4294967286<me){pe=3;break e}if(Re&&me>qe[0]-8){pe=7;break e}pe[0]=me,Qe[0]+=12,qe[0]-=12}pe=0}if(pe!=0)return pe;for(me=0<we.gb[0],g=g[0];;){e:{var Je=l;qe=d,pe=g;var nt=te,Ke=fe,kt=Qe=[0];if((bt=Oe=[Oe])[0]=0,8>pe[0])pe=7;else{if(!n(Je,qe[0],"VP8X")){if(Ie(Je,qe[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var xt=Ie(Je,qe[0]+8),Dt=1+ze(Je,qe[0]+12);if(2147483648<=Dt*(Je=1+ze(Je,qe[0]+15))){pe=3;break e}kt!=null&&(kt[0]=xt),nt!=null&&(nt[0]=Dt),Ke!=null&&(Ke[0]=Je),qe[0]+=18,pe[0]-=18,bt[0]=1}pe=0}}if(Oe=Oe[0],Qe=Qe[0],pe!=0)return pe;if(qe=!!(2&Qe),!me&&Oe)return 3;if(U!=null&&(U[0]=!!(16&Qe)),J!=null&&(J[0]=qe),X!=null&&(X[0]=0),J=te[0],Qe=fe[0],Oe&&qe&&K==null){pe=0;break}if(4>g){pe=7;break}if(me&&Oe||!me&&!Oe&&!n(l,d[0],"ALPH")){g=[g],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{xt=l,pe=d,me=g;var bt=we.gb;nt=we.na,Ke=we.P,kt=we.Sa,Dt=22,r(xt!=null),r(me!=null),Je=pe[0];var ur=me[0];for(r(nt!=null),r(kt!=null),nt[0]=null,Ke[0]=null,kt[0]=0;;){if(pe[0]=Je,me[0]=ur,8>ur){pe=7;break e}var gr=Ie(xt,Je+4);if(4294967286<gr){pe=3;break e}var dr=8+gr+1&-2;if(Dt+=dr,0<bt&&Dt>bt){pe=3;break e}if(!n(xt,Je,"VP8 ")||!n(xt,Je,"VP8L")){pe=0;break e}if(ur[0]<dr){pe=7;break e}n(xt,Je,"ALPH")||(nt[0]=xt,Ke[0]=Je+8,kt[0]=gr),Je+=dr,ur-=dr}}if(g=g[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],pe!=0)break}g=[g],we.Ja=[we.Ja],we.xa=[we.xa];e:if(bt=l,pe=d,me=g,nt=we.gb[0],Ke=we.Ja,kt=we.xa,xt=pe[0],Je=!n(bt,xt,"VP8 "),Dt=!n(bt,xt,"VP8L"),r(bt!=null),r(me!=null),r(Ke!=null),r(kt!=null),8>me[0])pe=7;else{if(Je||Dt){if(bt=Ie(bt,xt+4),12<=nt&&bt>nt-12){pe=3;break e}if(Re&&bt>me[0]-8){pe=7;break e}Ke[0]=bt,pe[0]+=8,me[0]-=8,kt[0]=Dt}else kt[0]=5<=me[0]&&bt[xt+0]==47&&!(bt[xt+4]>>5),Ke[0]=me[0];pe=0}if(g=g[0],we.Ja=we.Ja[0],we.xa=we.xa[0],d=d[0],pe!=0)break;if(4294967286<we.Ja)return 3;if(X==null||qe||(X[0]=we.xa?2:1),J=[J],Qe=[Qe],we.xa){if(5>g){pe=7;break}X=J,Re=Qe,qe=U,l==null||5>g?l=0:5<=g&&l[d+0]==47&&!(l[d+4]>>5)?(me=[0],bt=[0],nt=[0],ne(Ke=new C,l,d,g),Ye(Ke,me,bt,nt)?(X!=null&&(X[0]=me[0]),Re!=null&&(Re[0]=bt[0]),qe!=null&&(qe[0]=nt[0]),l=1):l=0):l=0}else{if(10>g){pe=7;break}X=Qe,l==null||10>g||!Ts(l,d+3,g-3)?l=0:(Re=l[d+0]|l[d+1]<<8|l[d+2]<<16,qe=16383&(l[d+7]<<8|l[d+6]),l=16383&(l[d+9]<<8|l[d+8]),1&Re||3<(Re>>1&7)||!(Re>>4&1)||Re>>5>=we.Ja||!qe||!l?l=0:(J&&(J[0]=qe),X&&(X[0]=l),l=1))}if(!l||(J=J[0],Qe=Qe[0],Oe&&(te[0]!=J||fe[0]!=Qe)))return 3;K!=null&&(K[0]=we,K.offset=d-K.w,r(4294967286>d-K.w),r(K.offset==K.ha-g));break}return pe==0||pe==7&&Oe&&K==null?(U!=null&&(U[0]|=we.na!=null&&0<we.na.length),S!=null&&(S[0]=J),F!=null&&(F[0]=Qe),0):pe}function Na(l,d,g){var S=d.width,F=d.height,U=0,J=0,X=S,K=F;if(d.Da=l!=null&&0<l.Da,d.Da&&(X=l.cd,K=l.bd,U=l.v,J=l.j,11>g||(U&=-2,J&=-2),0>U||0>J||0>=X||0>=K||U+X>S||J+K>F))return 0;if(d.v=U,d.j=J,d.va=U+X,d.o=J+K,d.U=X,d.T=K,d.da=l!=null&&0<l.da,d.da){if(!Ae(X,K,g=[l.ib],U=[l.hb]))return 0;d.ib=g[0],d.hb=U[0]}return d.ob=l!=null&&l.ob,d.Kb=l==null||!l.Sd,d.da&&(d.ob=d.ib<3*S/4&&d.hb<3*F/4,d.Kb=0),1}function Oa(l){if(l==null)return 2;if(11>l.S){var d=l.f.RGBA;d.fb+=(l.height-1)*d.A,d.A=-d.A}else d=l.f.kb,l=l.height,d.O+=(l-1)*d.fa,d.fa=-d.fa,d.N+=(l-1>>1)*d.Ab,d.Ab=-d.Ab,d.W+=(l-1>>1)*d.Db,d.Db=-d.Db,d.F!=null&&(d.J+=(l-1)*d.lb,d.lb=-d.lb);return 0}function jo(l,d,g,S){if(S==null||0>=l||0>=d)return 2;if(g!=null){if(g.Da){var F=g.cd,U=g.bd,J=-2&g.v,X=-2&g.j;if(0>J||0>X||0>=F||0>=U||J+F>l||X+U>d)return 2;l=F,d=U}if(g.da){if(!Ae(l,d,F=[g.ib],U=[g.hb]))return 2;l=F[0],d=U[0]}}S.width=l,S.height=d;e:{var K=S.width,te=S.height;if(l=S.S,0>=K||0>=te||!(l>=zl&&13>l))l=2;else{if(0>=S.Rd&&S.sd==null){J=U=F=d=0;var fe=(X=K*xh[l])*te;if(11>l||(U=(te+1)/2*(d=(K+1)/2),l==12&&(J=(F=K)*te)),(te=s(fe+2*U+J))==null){l=1;break e}S.sd=te,11>l?((K=S.f.RGBA).eb=te,K.fb=0,K.A=X,K.size=fe):((K=S.f.kb).y=te,K.O=0,K.fa=X,K.Fd=fe,K.f=te,K.N=0+fe,K.Ab=d,K.Cd=U,K.ea=te,K.W=0+fe+U,K.Db=d,K.Ed=U,l==12&&(K.F=te,K.J=0+fe+2*U),K.Tc=J,K.lb=F)}if(d=1,F=S.S,U=S.width,J=S.height,F>=zl&&13>F)if(11>F)l=S.f.RGBA,d&=(X=Math.abs(l.A))*(J-1)+U<=l.size,d&=X>=U*xh[F],d&=l.eb!=null;else{l=S.f.kb,X=(U+1)/2,fe=(J+1)/2,K=Math.abs(l.fa),te=Math.abs(l.Ab);var Oe=Math.abs(l.Db),Re=Math.abs(l.lb),we=Re*(J-1)+U;d&=K*(J-1)+U<=l.Fd,d&=te*(fe-1)+X<=l.Cd,d=(d&=Oe*(fe-1)+X<=l.Ed)&K>=U&te>=X&Oe>=X,d&=l.y!=null,d&=l.f!=null,d&=l.ea!=null,F==12&&(d&=Re>=U,d&=we<=l.Tc,d&=l.F!=null)}else d=0;l=d?0:2}}return l!=0||g!=null&&g.fd&&(l=Oa(S)),l}var Cn=64,So=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Co=24,_o=32,Ra=8,Un=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Me("Predictor0","PredictorAdd0"),G.Predictor0=function(){return 4278190080},G.Predictor1=function(l){return l},G.Predictor2=function(l,d,g){return d[g+0]},G.Predictor3=function(l,d,g){return d[g+1]},G.Predictor4=function(l,d,g){return d[g-1]},G.Predictor5=function(l,d,g){return Ze(Ze(l,d[g+1]),d[g+0])},G.Predictor6=function(l,d,g){return Ze(l,d[g-1])},G.Predictor7=function(l,d,g){return Ze(l,d[g+0])},G.Predictor8=function(l,d,g){return Ze(d[g-1],d[g+0])},G.Predictor9=function(l,d,g){return Ze(d[g+0],d[g+1])},G.Predictor10=function(l,d,g){return Ze(Ze(l,d[g-1]),Ze(d[g+0],d[g+1]))},G.Predictor11=function(l,d,g){var S=d[g+0];return 0>=Ce(S>>24&255,l>>24&255,(d=d[g-1])>>24&255)+Ce(S>>16&255,l>>16&255,d>>16&255)+Ce(S>>8&255,l>>8&255,d>>8&255)+Ce(255&S,255&l,255&d)?S:l},G.Predictor12=function(l,d,g){var S=d[g+0];return(pt((l>>24&255)+(S>>24&255)-((d=d[g-1])>>24&255))<<24|pt((l>>16&255)+(S>>16&255)-(d>>16&255))<<16|pt((l>>8&255)+(S>>8&255)-(d>>8&255))<<8|pt((255&l)+(255&S)-(255&d)))>>>0},G.Predictor13=function(l,d,g){var S=d[g-1];return(Ue((l=Ze(l,d[g+0]))>>24&255,S>>24&255)<<24|Ue(l>>16&255,S>>16&255)<<16|Ue(l>>8&255,S>>8&255)<<8|Ue(l>>0&255,S>>0&255))>>>0};var Sd=G.PredictorAdd0;G.PredictorAdd1=ve,Me("Predictor2","PredictorAdd2"),Me("Predictor3","PredictorAdd3"),Me("Predictor4","PredictorAdd4"),Me("Predictor5","PredictorAdd5"),Me("Predictor6","PredictorAdd6"),Me("Predictor7","PredictorAdd7"),Me("Predictor8","PredictorAdd8"),Me("Predictor9","PredictorAdd9"),Me("Predictor10","PredictorAdd10"),Me("Predictor11","PredictorAdd11"),Me("Predictor12","PredictorAdd12"),Me("Predictor13","PredictorAdd13");var Ea=G.PredictorAdd2;Fe("ColorIndexInverseTransform","MapARGB","32b",function(l){return l>>8&255},function(l){return l}),Fe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(l){return l},function(l){return l>>8&255});var Pl,ci=G.ColorIndexInverseTransform,ko=G.MapARGB,Nl=G.VP8LColorIndexInverseTransformAlpha,Ol=G.MapAlpha,ds=G.VP8LPredictorsAdd=[];ds.length=16,(G.VP8LPredictors=[]).length=16,(G.VP8LPredictorsAdd_C=[]).length=16,(G.VP8LPredictors_C=[]).length=16;var Bs,Hn,zn,us,Ji,Xi,Ao,Ki,Jr,Ta,Fn,di,Lo,Rl,za,qs,Ws,hs,Us,Po,Hs,fs,Fa,ui,hi,Nr,Or,Xr,un=s(511),Qi=s(2041),Ia=s(225),No=s(767),El=0,Cd=Qi,Tl=Ia,ti=No,fi=un,zl=0,Fl=1,oh=2,Il=3,Ml=4,_d=5,ah=6,kd=7,Ad=8,Dl=9,Ld=10,Q0=[2,3,7],Z0=[3,3,11],lh=[280,256,256,256,40],em=[0,1,1,1,0],tm=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],rm=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],nm=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],im=8,Pd=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Nd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ma=null,sm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],om=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ch=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],am=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],lm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],dm=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ps=[],ji=[],Zi=[],um=1,dh=2,ms=[],pi=[];$e("UpsampleRgbLinePair",lr,3),$e("UpsampleBgrLinePair",Br,3),$e("UpsampleRgbaLinePair",wi,4),$e("UpsampleBgraLinePair",fn,4),$e("UpsampleArgbLinePair",Ln,4),$e("UpsampleRgba4444LinePair",sn,2),$e("UpsampleRgb565LinePair",Hr,2);var hm=G.UpsampleRgbLinePair,fm=G.UpsampleBgrLinePair,uh=G.UpsampleRgbaLinePair,hh=G.UpsampleBgraLinePair,fh=G.UpsampleArgbLinePair,ph=G.UpsampleRgba4444LinePair,pm=G.UpsampleRgb565LinePair,Bl=16,ql=1<<Bl-1,Da=-227,Od=482,mm=6,mh=0,gm=s(256),xm=s(256),bm=s(256),ym=s(256),vm=s(Od-Da),wm=s(Od-Da);Ii("YuvToRgbRow",lr,3),Ii("YuvToBgrRow",Br,3),Ii("YuvToRgbaRow",wi,4),Ii("YuvToBgraRow",fn,4),Ii("YuvToArgbRow",Ln,4),Ii("YuvToRgba4444Row",sn,2),Ii("YuvToRgb565Row",Hr,2);var gh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wl=[0,2,8],jm=[8,7,6,4,4,2,2,2,1,1,1,1],Sm=1;this.WebPDecodeRGBA=function(l,d,g,S,F){var U=Fl,J=new yo,X=new fr;J.ba=X,X.S=U,X.width=[X.width],X.height=[X.height];var K=X.width,te=X.height,fe=new Te;if(fe==null||l==null)var Oe=2;else r(fe!=null),Oe=wo(l,d,g,fe.width,fe.height,fe.Pd,fe.Qd,fe.format,null);if(Oe!=0?K=0:(K!=null&&(K[0]=fe.width[0]),te!=null&&(te[0]=fe.height[0]),K=1),K){X.width=X.width[0],X.height=X.height[0],S!=null&&(S[0]=X.width),F!=null&&(F[0]=X.height);e:{if(S=new li,(F=new Ca).data=l,F.w=d,F.ha=g,F.kd=1,d=[0],r(F!=null),((l=wo(F.data,F.w,F.ha,null,null,null,d,null,F))==0||l==7)&&d[0]&&(l=4),(d=l)==0){if(r(J!=null),S.data=F.data,S.w=F.w+F.offset,S.ha=F.ha-F.offset,S.put=It,S.ac=jt,S.bc=Ve,S.ma=J,F.xa){if((l=Rt())==null){J=1;break e}if(function(Re,we){var Qe=[0],qe=[0],pe=[0];t:for(;;){if(Re==null)return 0;if(we==null)return Re.a=2,0;if(Re.l=we,Re.a=0,ne(Re.m,we.data,we.w,we.ha),!Ye(Re.m,Qe,qe,pe)){Re.a=3;break t}if(Re.xb=dh,we.width=Qe[0],we.height=qe[0],!Wt(Qe[0],qe[0],1,Re,null))break t;return 1}return r(Re.a!=0),0}(l,S)){if(S=(d=jo(S.width,S.height,J.Oa,J.ba))==0){t:{S=l;r:for(;;){if(S==null){S=0;break t}if(r(S.s.yc!=null),r(S.s.Ya!=null),r(0<S.s.Wb),r((g=S.l)!=null),r((F=g.ma)!=null),S.xb!=0){if(S.ca=F.ba,S.tb=F.tb,r(S.ca!=null),!Na(F.Oa,g,Il)){S.a=2;break r}if(!$t(S,g.width)||g.da)break r;if((g.da||mt(S.ca.S))&&Le(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&Le()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!We(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!vt(S,S.V,S.Ba,S.c,S.i,g.o,jn))break r;F.Dc=S.Ma,S=1;break t}r(S.a!=0),S=0}S=!S}S&&(d=l.a)}else d=l.a}else{if((l=new ho)==null){J=1;break e}if(l.Fa=F.na,l.P=F.P,l.qc=F.Sa,zs(l,S)){if((d=jo(S.width,S.height,J.Oa,J.ba))==0){if(l.Aa=0,g=J.Oa,r((F=l)!=null),g!=null){if(0<(K=0>(K=g.Md)?0:100<K?255:255*K/100)){for(te=fe=0;4>te;++te)12>(Oe=F.pb[te]).lc&&(Oe.ia=K*jm[0>Oe.lc?0:Oe.lc]>>3),fe|=Oe.ia;fe&&(alert("todo:VP8InitRandom"),F.ia=1)}F.Ga=g.Id,100<F.Ga?F.Ga=100:0>F.Ga&&(F.Ga=0)}sd(l,S)||(d=l.a)}}else d=l.a}d==0&&J.Oa!=null&&J.Oa.fd&&(d=Oa(J.ba))}J=d}U=J!=0?null:11>U?X.f.RGBA.eb:X.f.kb.y}else U=null;return U};var xh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(G,R){for(var L="",j=0;j<4;j++)L+=String.fromCharCode(G[R++]);return L}function p(G,R){return(G[R+0]<<0|G[R+1]<<8|G[R+2]<<16)>>>0}function x(G,R){return(G[R+0]<<0|G[R+1]<<8|G[R+2]<<16|G[R+3]<<24)>>>0}new u;var b=[0],m=[0],_=[],w=new u,O=t,k=function(G,R){var L={},j=0,A=!1,E=0,z=0;if(L.frames=[],!function(q,N,$,Q){for(var ie=0;ie<Q;ie++)if(q[N+ie]!=$.charCodeAt(ie))return!0;return!1}(G,R,"RIFF",4)){for(x(G,R+=4),R+=8;R<G.length;){var oe=h(G,R),re=x(G,R+=4);R+=4;var v=re+(1&re);switch(oe){case"VP8 ":case"VP8L":L.frames[j]===void 0&&(L.frames[j]={}),(y=L.frames[j]).src_off=A?z:R-8,y.src_size=E+re+8,j++,A&&(A=!1,E=0,z=0);break;case"VP8X":(y=L.header={}).feature_flags=G[R];var ne=R+4;y.canvas_width=1+p(G,ne),ne+=3,y.canvas_height=1+p(G,ne),ne+=3;break;case"ALPH":A=!0,E=v+8,z=R-8;break;case"ANIM":(y=L.header).bgcolor=x(G,R),ne=R+4,y.loop_count=(Y=G)[(C=ne)+0]<<0|Y[C+1]<<8,ne+=2;break;case"ANMF":var M,y;(y=L.frames[j]={}).offset_x=2*p(G,R),R+=3,y.offset_y=2*p(G,R),R+=3,y.width=1+p(G,R),R+=3,y.height=1+p(G,R),R+=3,y.duration=p(G,R),R+=3,M=G[R++],y.dispose=1&M,y.blend=M>>1&1}oe!="ANMF"&&(R+=v)}var Y,C;return L}}(O,0);k.response=O,k.rgbaoutput=!0,k.dataurl=!1;var T=k.header?k.header:null,H=k.frames?k.frames:null;if(T){T.loop_counter=T.loop_count,b=[T.canvas_height],m=[T.canvas_width];for(var Z=0;Z<H.length&&H[Z].blend!=0;Z++);}var P=H[0],D=w.WebPDecodeRGBA(O,P.src_off,P.src_size,m,b);P.rgba=D,P.imgwidth=m[0],P.imgheight=b[0];for(var B=0;B<m[0]*b[0]*4;B++)_[B]=D[B];return this.width=m,this.height=b,this.data=_,this}(function(t){var r=function(){return typeof Mu=="function"},n=function(b,m,_,w){var O=4,k=a;switch(w){case t.image_compression.FAST:O=1,k=s;break;case t.image_compression.MEDIUM:O=6,k=c;break;case t.image_compression.SLOW:O=9,k=u}b=i(b,m,_,k);var T=Mu(b,{level:O});return t.__addimage__.arrayBufferToBinaryString(T)},i=function(b,m,_,w){for(var O,k,T,H=b.length/m,Z=new Uint8Array(b.length+H),P=p(),D=0;D<H;D+=1){if(T=D*m,O=b.subarray(T,T+m),w)Z.set(w(O,_,k),T+D);else{for(var B,G=P.length,R=[];B<G;B+=1)R[B]=P[B](O,_,k);var L=x(R.concat());Z.set(R[L],T+D)}k=O}return Z},o=function(b){var m=Array.apply([],b);return m.unshift(0),m},s=function(b,m){var _,w=[],O=b.length;w[0]=1;for(var k=0;k<O;k+=1)_=b[k-m]||0,w[k+1]=b[k]-_+256&255;return w},a=function(b,m,_){var w,O=[],k=b.length;O[0]=2;for(var T=0;T<k;T+=1)w=_&&_[T]||0,O[T+1]=b[T]-w+256&255;return O},c=function(b,m,_){var w,O,k=[],T=b.length;k[0]=3;for(var H=0;H<T;H+=1)w=b[H-m]||0,O=_&&_[H]||0,k[H+1]=b[H]+256-(w+O>>>1)&255;return k},u=function(b,m,_){var w,O,k,T,H=[],Z=b.length;H[0]=4;for(var P=0;P<Z;P+=1)w=b[P-m]||0,O=_&&_[P]||0,k=_&&_[P-m]||0,T=h(w,O,k),H[P+1]=b[P]-T+256&255;return H},h=function(b,m,_){if(b===m&&m===_)return b;var w=Math.abs(m-_),O=Math.abs(b-_),k=Math.abs(b+m-_-_);return w<=O&&w<=k?b:O<=k?m:_},p=function(){return[o,s,a,c,u]},x=function(b){var m=b.map(function(_){return _.reduce(function(w,O){return w+Math.abs(O)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(b,m,_,w){var O,k,T,H,Z,P,D,B,G,R,L,j,A,E,z,oe=this.decode.FLATE_DECODE,re="";if(this.__addimage__.isArrayBuffer(b)&&(b=new Uint8Array(b)),this.__addimage__.isArrayBufferView(b)){if(b=(T=new cv(b)).imgData,k=T.bits,O=T.colorSpace,Z=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){G=(B=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,L=new Uint8Array(G*T.colors),R=new Uint8Array(G);var v,ne=T.pixelBitlength-T.bits;for(E=0,z=0;E<G;E++){for(A=B[E],v=0;v<ne;)L[z++]=A>>>v&255,v+=T.bits;R[E]=A>>>v&255}}if(T.bits===16){G=(B=new Uint32Array(T.decodePixels().buffer)).length,L=new Uint8Array(G*(32/T.pixelBitlength)*T.colors),R=new Uint8Array(G*(32/T.pixelBitlength)),j=T.colors>1,E=0,z=0;for(var M=0;E<G;)A=B[E++],L[z++]=A>>>0&255,j&&(L[z++]=A>>>16&255,A=B[E++],L[z++]=A>>>0&255),R[M++]=A>>>16&255;k=8}w!==t.image_compression.NONE&&r()?(b=n(L,T.width*T.colors,T.colors,w),D=n(R,T.width,1,w)):(b=L,D=R,oe=void 0)}if(T.colorType===3&&(O=this.color_spaces.INDEXED,P=T.palette,T.transparency.indexed)){var y=T.transparency.indexed,Y=0;for(E=0,G=y.length;E<G;++E)Y+=y[E];if((Y/=255)===G-1&&y.indexOf(0)!==-1)H=[y.indexOf(0)];else if(Y!==G){for(B=T.decodePixels(),R=new Uint8Array(B.length),E=0,G=B.length;E<G;E++)R[E]=y[B[E]];D=n(R,T.width,1)}}var C=function(q){var N;switch(q){case t.image_compression.FAST:N=11;break;case t.image_compression.MEDIUM:N=13;break;case t.image_compression.SLOW:N=14;break;default:N=12}return N}(w);return oe===this.decode.FLATE_DECODE&&(re="/Predictor "+C+" "),re+="/Colors "+Z+" /BitsPerComponent "+k+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:_,data:b,index:m,filter:oe,decodeParameters:re,transparency:H,palette:P,sMask:D,predictor:C,width:T.width,height:T.height,bitsPerComponent:k,colorSpace:O}}}})(qt.API),function(t){t.processGIF89A=function(r,n,i,o){var s=new dv(r),a=s.width,c=s.height,u=[];s.decodeAndBlitFrameRGBA(0,u);var h={data:u,width:a,height:c},p=new vu(100).encode(h,100);return t.processJPEG.call(this,p,n,i,o)},t.processGIF87A=t.processGIF89A}(qt.API),_i.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var r=0;r<t;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:o,green:i,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_i.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Uint8Array(r),this[t]()}catch(n){jr.log("bit decode error:"+n)}},_i.prototype.bit1=function(){var t,r=Math.ceil(this.width/8),n=r%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,o=0;o<r;o++)for(var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*o*4,c=0;c<8&&8*o+c<this.width;c++){var u=this.palette[s>>7-c&1];this.data[a+4*c]=u.blue,this.data[a+4*c+1]=u.green,this.data[a+4*c+2]=u.red,this.data[a+4*c+3]=255}n!==0&&(this.pos+=4-n)}},_i.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),r=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<t;o++){var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*o*4,c=s>>4,u=15&s,h=this.palette[c];if(this.data[a]=h.blue,this.data[a+1]=h.green,this.data[a+2]=h.red,this.data[a+3]=255,2*o+1>=this.width)break;h=this.palette[u],this.data[a+4]=h.blue,this.data[a+4+1]=h.green,this.data[a+4+2]=h.red,this.data[a+4+3]=255}r!==0&&(this.pos+=4-r)}},_i.prototype.bit8=function(){for(var t=this.width%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*i;if(o<this.palette.length){var a=this.palette[o];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},_i.prototype.bit15=function(){for(var t=this.width%3,r=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&r)/r*255|0,c=(s>>5&r)/r*255|0,u=(s>>10&r)/r*255|0,h=s>>15?255:0,p=i*this.width*4+4*o;this.data[p]=u,this.data[p+1]=c,this.data[p+2]=a,this.data[p+3]=h}this.pos+=t}},_i.prototype.bit16=function(){for(var t=this.width%3,r=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&r)/r*255|0,u=(a>>5&n)/n*255|0,h=(a>>11)/r*255|0,p=o*this.width*4+4*s;this.data[p]=h,this.data[p+1]=u,this.data[p+2]=c,this.data[p+3]=255}this.pos+=t}},_i.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;this.data[a]=s,this.data[a+1]=o,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},_i.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+4*n;this.data[c]=s,this.data[c+1]=o,this.data[c+2]=i,this.data[c+3]=a}},_i.prototype.getData=function(){return this.data},function(t){t.processBMP=function(r,n,i,o){var s=new _i(r,!1),a=s.width,c=s.height,u={data:s.getData(),width:a,height:c},h=new vu(100).encode(u,100);return t.processJPEG.call(this,h,n,i,o)}}(qt.API),ip.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(r,n,i,o){var s=new ip(r),a=s.width,c=s.height,u={data:s.getData(),width:a,height:c},h=new vu(100).encode(u,100);return t.processJPEG.call(this,h,n,i,o)}}(qt.API),qt.API.processRGBA=function(t,r,n){for(var i=t.data,o=i.length,s=new Uint8Array(o/4*3),a=new Uint8Array(o/4),c=0,u=0,h=0;h<o;h+=4){var p=i[h],x=i[h+1],b=i[h+2],m=i[h+3];s[c++]=p,s[c++]=x,s[c++]=b,a[u++]=m}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:_,index:r,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},qt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Wo=qt.API,hc=Wo.getCharWidthsArray=function(t,r){var n,i,o=(r=r||{}).font||this.internal.getFont(),s=r.fontSize||this.internal.getFontSize(),a=r.charSpace||this.internal.getCharSpace(),c=r.widths?r.widths:o.metadata.Unicode.widths,u=c.fof?c.fof:1,h=r.kerning?r.kerning:o.metadata.Unicode.kerning,p=h.fof?h.fof:1,x=r.doKerning!==!1,b=0,m=t.length,_=0,w=c[0]||u,O=[];for(n=0;n<m;n++)i=t.charCodeAt(n),typeof o.metadata.widthOfString=="function"?O.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+a*(1e3/s)||0)/1e3):(b=x&&_r(h[i])==="object"&&!isNaN(parseInt(h[i][_],10))?h[i][_]/p:0,O.push((c[i]||w)/u+b)),_=i;return O},ep=Wo.getStringUnitWidth=function(t,r){var n=(r=r||{}).fontSize||this.internal.getFontSize(),i=r.font||this.internal.getFont(),o=r.charSpace||this.internal.getCharSpace();return Wo.processArabic&&(t=Wo.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,o)/n:hc.apply(this,arguments).reduce(function(s,a){return s+a},0)},tp=function(t,r,n,i){for(var o=[],s=0,a=t.length,c=0;s!==a&&c+r[s]<n;)c+=r[s],s++;o.push(t.slice(0,s));var u=s;for(c=0;s!==a;)c+r[s]>i&&(o.push(t.slice(u,s)),c=0,u=s),c+=r[s],s++;return u!==s&&o.push(t.slice(u,s)),o},rp=function(t,r,n){n||(n={});var i,o,s,a,c,u,h,p=[],x=[p],b=n.textIndent||0,m=0,_=0,w=t.split(" "),O=hc.apply(this,[" ",n])[0];if(u=n.lineIndent===-1?w[0].length+2:n.lineIndent||0){var k=Array(u).join(" "),T=[];w.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?T=T.concat(Z.map(function(P,D){return(D&&P.length?`
`:"")+P})):T.push(Z[0])}),w=T,u=ep.apply(this,[k,n])}for(s=0,a=w.length;s<a;s++){var H=0;if(i=w[s],u&&i[0]==`
`&&(i=i.substr(1),H=1),b+m+(_=(o=hc.apply(this,[i,n])).reduce(function(Z,P){return Z+P},0))>r||H){if(_>r){for(c=tp.apply(this,[i,o,r-(b+m),r]),p.push(c.shift()),p=[c.pop()];c.length;)x.push([c.shift()]);_=o.slice(i.length-(p[0]?p[0].length:0)).reduce(function(Z,P){return Z+P},0)}else p=[i];x.push(p),b=_+u,m=O}else p.push(i),b+=m+_,m=O}return h=u?function(Z,P){return(P?k:"")+Z.join(" ")}:function(Z){return Z.join(" ")},x.map(h)},Wo.splitTextToSize=function(t,r,n){var i,o=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var x=this.internal.getFont(p.fontName,p.fontStyle);return x.metadata.Unicode?{widths:x.metadata.Unicode.widths||{0:1},kerning:x.metadata.Unicode.kerning||{}}:{font:x.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*r/o;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=n.lineIndent;var c,u,h=[];for(c=0,u=i.length;c<u;c++)h=h.concat(rp.apply(this,[i[c],a,s]));return h},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var r="klmnopqrstuvwxyz",n={},i={},o=0;o<r.length;o++)n[r[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=r[o];var s=function(x){return"0x"+parseInt(x,10).toString(16)},a=t.__fontmetrics__.compress=function(x){var b,m,_,w,O=["{"];for(var k in x){if(b=x[k],isNaN(parseInt(k,10))?m="'"+k+"'":(k=parseInt(k,10),m=(m=s(k).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof b=="number")b<0?(_=s(b).slice(3),w="-"):(_=s(b).slice(2),w=""),_=w+_.slice(0,-1)+i[_.slice(-1)];else{if(_r(b)!=="object")throw new Error("Don't know what to do with value type "+_r(b)+".");_=a(b)}O.push(m+_)}return O.push("}"),O.join("")},c=t.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,m,_,w,O={},k=1,T=O,H=[],Z="",P="",D=x.length-1,B=1;B<D;B+=1)(w=x[B])=="'"?b?(_=b.join(""),b=void 0):b=[]:b?b.push(w):w=="{"?(H.push([T,_]),T={},_=void 0):w=="}"?((m=H.pop())[0][m[1]]=T,_=void 0,T=m[0]):w=="-"?k=-1:_===void 0?n.hasOwnProperty(w)?(Z+=n[w],_=parseInt(Z,16)*k,k=1,Z=""):Z+=w:n.hasOwnProperty(w)?(P+=n[w],T[_]=parseInt(P,16)*k,k=1,_=void 0,P=""):P+=w;return O},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(x){var b=x.font,m=p.Unicode[b.postScriptName];m&&(b.metadata.Unicode={},b.metadata.Unicode.widths=m.widths,b.metadata.Unicode.kerning=m.kerning);var _=h.Unicode[b.postScriptName];_&&(b.metadata.Unicode.encoding=_,b.encoding=_.codePages[0])}])}(qt.API),function(t){var r=function(n){for(var i=n.length,o=new Uint8Array(i),s=0;s<i;s++)o[s]=n.charCodeAt(s);return o};t.API.events.push(["addFont",function(n){var i=void 0,o=n.font,s=n.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(a,c){c=/^\x00\x01\x00\x00/.test(c)?r(c):r(el(c)),a.metadata=t.API.TTFFont.open(c),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(o,i)}}])}(qt),function(t){function r(){return(Ut.canvg?Promise.resolve(Ut.canvg):oo(()=>import("./index.es-CXh8elN4.js"),__vite__mapDeps([0,1,2]))).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}qt.API.addSvgAsImage=function(n,i,o,s,a,c,u,h){if(isNaN(i)||isNaN(o))throw jr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw jr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var x=p.getContext("2d");x.fillStyle="#fff",x.fillRect(0,0,p.width,p.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return r().then(function(_){return _.fromString(x,n,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(b)}).then(function(){m.addImage(p.toDataURL("image/jpeg",1),i,o,s,a,u,h)})}}(),qt.API.putTotalPages=function(t){var r,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(r,n);return this},qt.API.viewerPreferences=function(t,r){var n;t=t||{},r=r||!1;var i,o,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(a),u=[],h=0,p=0,x=0;function b(_,w){var O,k=!1;for(O=0;O<_.length;O+=1)_[O]===w&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||r===!0){var m=c.length;for(x=0;x<m;x+=1)n[c[x]].value=n[c[x]].defaultValue,n[c[x]].explicitSet=!1}if(_r(t)==="object"){for(o in t)if(s=t[o],b(c,o)&&s!==void 0){if(n[o].type==="boolean"&&typeof s=="boolean")n[o].value=s;else if(n[o].type==="name"&&b(n[o].valueSet,s))n[o].value=s;else if(n[o].type==="integer"&&Number.isInteger(s))n[o].value=s;else if(n[o].type==="array"){for(h=0;h<s.length;h+=1)if(i=!0,s[h].length===1&&typeof s[h][0]=="number")u.push(String(s[h]-1));else if(s[h].length>1){for(p=0;p<s[h].length;p+=1)typeof s[h][p]!="number"&&(i=!1);i===!0&&u.push([s[h][0]-1,s[h][1]-1].join(" "))}n[o].value="["+u.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,w=[];for(_ in n)n[_].explicitSet===!0&&(n[_].type==="name"?w.push("/"+_+" /"+n[_].value):w.push("/"+_+" "+n[_].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var r=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),h=s.length+a.length+c.length+o.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(o+s+a+c+u),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",r)),this}}(qt.API),function(t){var r=t.API,n=r.pdfEscape16=function(s,a){for(var c,u=a.metadata.Unicode.widths,h=["","0","00","000","0000"],p=[""],x=0,b=s.length;x<b;++x){if(c=a.metadata.characterToGlyph(s.charCodeAt(x)),a.metadata.glyIdsUsed.push(c),a.metadata.toUnicode[c]=s.charCodeAt(x),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(a.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(h[4-c.length],c)}return p.join("")},i=function(s){var a,c,u,h,p,x,b;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],x=0,b=(c=Object.keys(s).sort(function(m,_){return m-_})).length;x<b;x++)a=c[x],u.length>=100&&(p+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(h=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),u.push("<"+a+"><"+h+">"));return u.length&&(p+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(s){(function(a){var c=a.font,u=a.out,h=a.newObject,p=a.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var x=c.metadata.Unicode.widths,b=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),m="",_=0;_<b.length;_++)m+=String.fromCharCode(b[_]);var w=h();p({data:m,addLength1:!0,objectId:w}),u("endobj");var O=h();p({data:i(c.metadata.toUnicode),addLength1:!0,objectId:O}),u("endobj");var k=h();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+$o(c.fontName)),u("/FontFile2 "+w+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var T=h();u("<<"),u("/Type /Font"),u("/BaseFont /"+$o(c.fontName)),u("/FontDescriptor "+k+" 0 R"),u("/W "+t.API.PDFObject.convert(x)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=h(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+O+" 0 R"),u("/BaseFont /"+$o(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+T+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]),r.events.push(["putFont",function(s){(function(a){var c=a.font,u=a.out,h=a.newObject,p=a.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var x=c.metadata.rawData,b="",m=0;m<x.length;m++)b+=String.fromCharCode(x[m]);var _=h();p({data:b,addLength1:!0,objectId:_}),u("endobj");var w=h();p({data:i(c.metadata.toUnicode),addLength1:!0,objectId:w}),u("endobj");var O=h();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+_+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+$o(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=h();for(var k=0;k<c.metadata.hmtx.widths.length;k++)c.metadata.hmtx.widths[k]=parseInt(c.metadata.hmtx.widths[k]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+$o(c.fontName)+"/FontDescriptor "+O+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]);var o=function(s){var a,c=s.text||"",u=s.x,h=s.y,p=s.options||{},x=s.mutex||{},b=x.pdfEscape,m=x.activeFontKey,_=x.fonts,w=m,O="",k=0,T="",H=_[w].encoding;if(_[w].encoding!=="Identity-H")return{text:c,x:u,y:h,options:p,mutex:x};for(T=c,w=m,Array.isArray(c)&&(T=c[0]),k=0;k<T.length;k+=1)_[w].metadata.hasOwnProperty("cmap")&&(a=_[w].metadata.cmap.unicode.codeMap[T[k].charCodeAt(0)]),a||T[k].charCodeAt(0)<256&&_[w].metadata.hasOwnProperty("Unicode")?O+=T[k]:O+="";var Z="";return parseInt(w.slice(1))<14||H==="WinAnsiEncoding"?Z=b(O,w).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):H==="Identity-H"&&(Z=n(O,_[w])),x.isHex=!0,{text:Z,x:u,y:h,options:p,mutex:x}};r.events.push(["postProcessText",function(s){var a=s.text||"",c=[],u={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var h=0;for(h=0;h<a.length;h+=1)Array.isArray(a[h])&&a[h].length===3?c.push([o(Object.assign({},u,{text:a[h][0]})).text,a[h][1],a[h][2]]):c.push(o(Object.assign({},u,{text:a[h]})).text);s.text=c}else s.text=o(Object.assign({},u,{text:a})).text}])}(qt),function(t){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return r.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return r.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return r.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(qt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var o,s,a,c,u,h,p,x=r,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},O=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,H=0;this.__bidiEngine__={};var Z=function(j){var A=j.charCodeAt(),E=A>>8,z=w[E];return z!==void 0?x[256*z+(255&A)]:E===252||E===253?"AL":k.test(E)?"L":E===8?"R":"N"},P=function(j){for(var A,E=0;E<j.length;E++){if((A=Z(j.charAt(E)))==="L")return!1;if(A==="R")return!0}return!1},D=function(j,A,E,z){var oe,re,v,ne,M=A[z];switch(M){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(M="AN");break;case"AL":T=!0,M="R";break;case"WS":M="N";break;case"CS":z<1||z+1>=A.length||(oe=E[z-1])!=="EN"&&oe!=="AN"||(re=A[z+1])!=="EN"&&re!=="AN"?M="N":T&&(re="AN"),M=re===oe?re:"N";break;case"ES":M=(oe=z>0?E[z-1]:"B")==="EN"&&z+1<A.length&&A[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&E[z-1]==="EN"){M="EN";break}if(T){M="N";break}for(v=z+1,ne=A.length;v<ne&&A[v]==="ET";)v++;M=v<ne&&A[v]==="EN"?"EN":"N";break;case"NSM":if(a&&!c){for(ne=A.length,v=z+1;v<ne&&A[v]==="NSM";)v++;if(v<ne){var y=j[z],Y=y>=1425&&y<=2303||y===64286;if(oe=A[v],Y&&(oe==="R"||oe==="AL")){M="R";break}}}M=z<1||(oe=A[z-1])==="B"?"N":E[z-1];break;case"B":T=!1,o=!0,M=H;break;case"S":s=!0,M="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":M="N"}return M},B=function(j,A,E){var z=j.split("");return E&&G(z,E,{hiLevel:H}),z.reverse(),A&&A.reverse(),z.join("")},G=function(j,A,E){var z,oe,re,v,ne,M=-1,y=j.length,Y=0,C=[],q=H?m:b,N=[];for(T=!1,o=!1,s=!1,oe=0;oe<y;oe++)N[oe]=Z(j[oe]);for(re=0;re<y;re++){if(ne=Y,C[re]=D(j,N,C,re),z=240&(Y=q[ne][_[C[re]]]),Y&=15,A[re]=v=q[Y][5],z>0)if(z===16){for(oe=M;oe<re;oe++)A[oe]=1;M=-1}else M=-1;if(q[Y][6])M===-1&&(M=re);else if(M>-1){for(oe=M;oe<re;oe++)A[oe]=v;M=-1}N[re]==="B"&&(A[re]=0),E.hiLevel|=v}s&&function($,Q,ie){for(var ue=0;ue<ie;ue++)if($[ue]==="S"){Q[ue]=H;for(var le=ue-1;le>=0&&$[le]==="WS";le--)Q[le]=H}}(N,A,y)},R=function(j,A,E,z,oe){if(!(oe.hiLevel<j)){if(j===1&&H===1&&!o)return A.reverse(),void(E&&E.reverse());for(var re,v,ne,M,y=A.length,Y=0;Y<y;){if(z[Y]>=j){for(ne=Y+1;ne<y&&z[ne]>=j;)ne++;for(M=Y,v=ne-1;M<v;M++,v--)re=A[M],A[M]=A[v],A[v]=re,E&&(re=E[M],E[M]=E[v],E[v]=re);Y=ne}Y++}}},L=function(j,A,E){var z=j.split(""),oe={hiLevel:H};return E||(E=[]),G(z,E,oe),function(re,v,ne){if(ne.hiLevel!==0&&p)for(var M,y=0;y<re.length;y++)v[y]===1&&(M=O.indexOf(re[y]))>=0&&(re[y]=O[M+1])}(z,E,oe),R(2,z,A,E,oe),R(1,z,A,E,oe),z.join("")};return this.__bidiEngine__.doBidiReorder=function(j,A,E){if(function(oe,re){if(re)for(var v=0;v<oe.length;v++)re[v]=v;c===void 0&&(c=P(oe)),h===void 0&&(h=P(oe))}(j,A),a||!u||h)if(a&&u&&c^h)H=c?1:0,j=B(j,A,E);else if(!a&&u&&h)H=c?1:0,j=L(j,A,E),j=B(j,A);else if(!a||c||u||h){if(a&&!u&&c^h)j=B(j,A),c?(H=0,j=L(j,A,E)):(H=1,j=L(j,A,E),j=B(j,A));else if(a&&c&&!u&&h)H=1,j=L(j,A,E),j=B(j,A);else if(!a&&!u&&c^h){var z=p;c?(H=1,j=L(j,A,E),H=0,p=!1,j=L(j,A,E),p=z):(H=0,j=L(j,A,E),j=B(j,A),H=1,p=!1,j=L(j,A,E),p=z,j=B(j,A))}}else H=0,j=L(j,A,E);else H=c?1:0,j=L(j,A,E);return j},this.__bidiEngine__.setOptions=function(j){j&&(a=j.isInputVisual,u=j.isOutputVisual,c=j.isInputRtl,h=j.isOutputRtl,p=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var o=i.text;i.x,i.y;var s=i.options||{};i.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var c=0;for(a=[],c=0;c<o.length;c+=1)Object.prototype.toString.call(o[c])==="[object Array]"?a.push([n.doBidiReorder(o[c][0]),o[c][1],o[c][2]]):a.push([n.doBidiReorder(o[c])]);i.text=a}else i.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(qt),qt.API.TTFFont=function(){function t(r){var n;if(this.rawData=r,n=this.contents=new Rs(r),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new _v(this),this.registerTTF()}return t.open=function(r){return new t(r)},t.prototype.parse=function(){return this.directory=new uv(this.contents),this.head=new fv(this),this.name=new bv(this),this.cmap=new X0(this),this.toUnicode={},this.hhea=new pv(this),this.maxp=new yv(this),this.hmtx=new vv(this),this.post=new gv(this),this.os2=new mv(this),this.loca=new Cv(this),this.glyf=new wv(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var r,n,i,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var a,c,u,h;for(h=[],a=0,c=(u=this.bbox).length;a<c;a++)r=u[a],h.push(Math.round(r*this.scaleFactor));return h}.call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),(32768&(n=o>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(r){var n;return((n=this.cmap.unicode)!=null?n.codeMap[r]:void 0)||0},t.prototype.widthOfGlyph=function(r){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*n},t.prototype.widthOfString=function(r,n,i){var o,s,a,c;for(a=0,s=0,c=(r=""+r).length;0<=c?s<c:s>c;s=0<=c?++s:--s)o=r.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(r,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*r},t}();var Ei,Rs=function(){function t(r){this.data=r!=null?r:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(r){return this.data[this.pos++]=r},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},t.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},t.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},t.prototype.readString=function(r){var n,i;for(i=[],n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(r){var n,i,o;for(o=[],n=0,i=r.length;0<=i?n<i:n>i;n=0<=i?++n:--n)o.push(this.writeByte(r.charCodeAt(n)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(r){return this.writeInt16(r)},t.prototype.readLongLong=function(){var r,n,i,o,s,a,c,u;return r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),u=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^s)+65536*(255^a)+256*(255^c)+(255^u)+1):72057594037927940*r+281474976710656*n+1099511627776*i+4294967296*o+16777216*s+65536*a+256*c+u},t.prototype.writeLongLong=function(r){var n,i;return n=Math.floor(r/4294967296),i=4294967295&r,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(r){return this.writeInt32(r)},t.prototype.read=function(r){var n,i;for(n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(r){var n,i,o,s;for(s=[],i=0,o=r.length;i<o;i++)n=r[i],s.push(this.writeByte(n));return s},t}(),uv=function(){var t;function r(n){var i,o,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return r.prototype.encode=function(n){var i,o,s,a,c,u,h,p,x,b,m,_,w;for(w in m=Object.keys(n).length,u=Math.log(2),x=16*Math.floor(Math.log(m)/u),a=Math.floor(x/u),p=16*m-x,(o=new Rs).writeInt(this.scalarType),o.writeShort(m),o.writeShort(x),o.writeShort(a),o.writeShort(p),s=16*m,h=o.pos+s,c=null,_=[],n)for(b=n[w],o.writeString(w),o.writeInt(t(b)),o.writeInt(h),o.writeInt(b.length),_=_.concat(b),w==="head"&&(c=h),h+=b.length;h%4;)_.push(0),h++;return o.write(_),i=2981146554-t(o.data),o.pos=c+8,o.writeUInt32(i),o.data},t=function(n){var i,o,s,a;for(n=K0.call(n);n.length%4;)n.push(0);for(s=new Rs(n),o=0,i=0,a=n.length;i<a;i=i+=4)o+=s.readUInt32();return 4294967295&o},r}(),hv={}.hasOwnProperty,Gi=function(t,r){for(var n in r)hv.call(r,n)&&(t[n]=r[n]);function i(){this.constructor=t}return i.prototype=r.prototype,t.prototype=new i,t.__super__=r.prototype,t};Ei=function(){function t(r){var n;this.file=r,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var fv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Gi(r,Ei),r.prototype.tag="head",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},r.prototype.encode=function(n){var i;return(i=new Rs).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},r}(),sp=function(){function t(r,n){var i,o,s,a,c,u,h,p,x,b,m,_,w,O,k,T,H;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=n+r.readInt(),x=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=r.readByte();break;case 4:for(m=r.readUInt16(),b=m/2,r.pos+=6,s=function(){var Z,P;for(P=[],u=Z=0;0<=b?Z<b:Z>b;u=0<=b?++Z:--Z)P.push(r.readUInt16());return P}(),r.pos+=2,w=function(){var Z,P;for(P=[],u=Z=0;0<=b?Z<b:Z>b;u=0<=b?++Z:--Z)P.push(r.readUInt16());return P}(),h=function(){var Z,P;for(P=[],u=Z=0;0<=b?Z<b:Z>b;u=0<=b?++Z:--Z)P.push(r.readUInt16());return P}(),p=function(){var Z,P;for(P=[],u=Z=0;0<=b?Z<b:Z>b;u=0<=b?++Z:--Z)P.push(r.readUInt16());return P}(),o=(this.length-r.pos+this.offset)/2,c=function(){var Z,P;for(P=[],u=Z=0;0<=o?Z<o:Z>o;u=0<=o?++Z:--Z)P.push(r.readUInt16());return P}(),u=k=0,H=s.length;k<H;u=++k)for(O=s[u],i=T=_=w[u];_<=O?T<=O:T>=O;i=_<=O?++T:--T)p[u]===0?a=i+h[u]:(a=c[p[u]/2+(i-_)-(b-u)]||0)!==0&&(a+=h[u]),this.codeMap[i]=65535&a}r.pos=x}return t.encode=function(r,n){var i,o,s,a,c,u,h,p,x,b,m,_,w,O,k,T,H,Z,P,D,B,G,R,L,j,A,E,z,oe,re,v,ne,M,y,Y,C,q,N,$,Q,ie,ue,le,ge,xe,ze;switch(z=new Rs,a=Object.keys(r).sort(function(Ie,We){return Ie-We}),n){case"macroman":for(w=0,O=function(){var Ie=[];for(_=0;_<256;++_)Ie.push(0);return Ie}(),T={0:0},s={},oe=0,M=a.length;oe<M;oe++)T[le=r[o=a[oe]]]==null&&(T[le]=++w),s[o]={old:r[o],new:T[r[o]]},O[o]=T[r[o]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(O),{charMap:s,subtable:z.data,maxGlyphID:w+1};case"unicode":for(A=[],x=[],H=0,T={},i={},k=h=null,re=0,y=a.length;re<y;re++)T[P=r[o=a[re]]]==null&&(T[P]=++H),i[o]={old:P,new:T[P]},c=T[P]-o,k!=null&&c===h||(k&&x.push(k),A.push(o),h=c),k=o;for(k&&x.push(k),x.push(65535),A.push(65535),L=2*(R=A.length),G=2*Math.pow(Math.log(R)/Math.LN2,2),b=Math.log(G/2)/Math.LN2,B=2*R-G,u=[],D=[],m=[],_=v=0,Y=A.length;v<Y;_=++v){if(j=A[_],p=x[_],j===65535){u.push(0),D.push(0);break}if(j-(E=i[j].new)>=32768)for(u.push(0),D.push(2*(m.length+R-_)),o=ne=j;j<=p?ne<=p:ne>=p;o=j<=p?++ne:--ne)m.push(i[o].new);else u.push(E-j),D.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*R+2*m.length),z.writeUInt16(0),z.writeUInt16(L),z.writeUInt16(G),z.writeUInt16(b),z.writeUInt16(B),ie=0,C=x.length;ie<C;ie++)o=x[ie],z.writeUInt16(o);for(z.writeUInt16(0),ue=0,q=A.length;ue<q;ue++)o=A[ue],z.writeUInt16(o);for(ge=0,N=u.length;ge<N;ge++)c=u[ge],z.writeUInt16(c);for(xe=0,$=D.length;xe<$;xe++)Z=D[xe],z.writeUInt16(Z);for(ze=0,Q=m.length;ze<Q;ze++)w=m[ze],z.writeUInt16(w);return{charMap:i,subtable:z.data,maxGlyphID:H+1}}},t}(),X0=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Gi(r,Ei),r.prototype.tag="cmap",r.prototype.parse=function(n){var i,o,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)i=new sp(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},r.encode=function(n,i){var o,s;return i==null&&(i="macroman"),o=sp.encode(n,i),(s=new Rs).writeUInt16(0),s.writeUInt16(1),o.table=s.data.concat(o.subtable),o},r}(),pv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Gi(r,Ei),r.prototype.tag="hhea",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},r}(),mv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Gi(r,Ei),r.prototype.tag="OS/2",r.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(n.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},r}(),gv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Gi(r,Ei),r.prototype.tag="post",r.prototype.parse=function(n){var i,o,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(o=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)i=n.readByte(),s.push(this.names.push(n.readString(i)));return s;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=function(){var c,u,h;for(h=[],a=c=0,u=this.file.maxp.numGlyphs;0<=u?c<u:c>u;a=0<=u?++c:--c)h.push(n.readUInt32());return h}.call(this)}},r}(),xv=function(t,r){this.raw=t,this.length=t.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},bv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Gi(r,Ei),r.prototype.tag="name",r.prototype.parse=function(n){var i,o,s,a,c,u,h,p,x,b,m;for(n.pos=this.offset,n.readShort(),i=n.readShort(),u=n.readShort(),o=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+u+n.readShort()});for(h={},a=x=0,b=o.length;x<b;a=++x)s=o[a],n.pos=s.offset,p=n.readString(s.length),c=new xv(p,s),h[m=s.nameID]==null&&(h[m]=[]),h[s.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r}(),yv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Gi(r,Ei),r.prototype.tag="maxp",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},r}(),vv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Gi(r,Ei),r.prototype.tag="hmtx",r.prototype.parse=function(n){var i,o,s,a,c,u,h;for(n.pos=this.offset,this.metrics=[],i=0,u=this.file.hhea.numberOfMetrics;0<=u?i<u:i>u;i=0<=u?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,x;for(x=[],i=p=0;0<=s?p<s:p>s;i=0<=s?++p:--p)x.push(n.readInt16());return x}(),this.widths=function(){var p,x,b,m;for(m=[],p=0,x=(b=this.metrics).length;p<x;p++)a=b[p],m.push(a.advance);return m}.call(this),o=this.widths[this.widths.length-1],h=[],i=c=0;0<=s?c<s:c>s;i=0<=s?++c:--c)h.push(this.widths.push(o));return h},r.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},r}(),K0=[].slice,wv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Gi(r,Ei),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(n){var i,o,s,a,c,u,h,p,x,b;return n in this.cache?this.cache[n]:(a=this.file.loca,i=this.file.contents,o=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+o,c=(u=new Rs(i.read(s))).readShort(),p=u.readShort(),b=u.readShort(),h=u.readShort(),x=u.readShort(),this.cache[n]=c===-1?new Sv(u,p,b,h,x):new jv(u,c,p,b,h,x),this.cache[n]))},r.prototype.encode=function(n,i,o){var s,a,c,u,h;for(c=[],a=[],u=0,h=i.length;u<h;u++)s=n[i[u]],a.push(c.length),s&&(c=c.concat(s.encode(o)));return a.push(c.length),{table:c,offsets:a}},r}(),jv=function(){function t(r,n,i,o,s,a){this.raw=r,this.numberOfContours=n,this.xMin=i,this.yMin=o,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Sv=function(){function t(r,n,i,o,s){var a,c;for(this.raw=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;c=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&c;)a.pos+=1&c?4:2,128&c?a.pos+=8:64&c?a.pos+=4:8&c&&(a.pos+=2)}return t.prototype.encode=function(){var r,n,i;for(n=new Rs(K0.call(this.raw.data)),r=0,i=this.glyphIDs.length;r<i;++r)n.pos=this.glyphOffsets[r];return n.data},t}(),Cv=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return Gi(r,Ei),r.prototype.tag="loca",r.prototype.parse=function(n){var i,o;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?function(){var s,a;for(a=[],o=0,s=this.length;o<s;o+=2)a.push(2*n.readUInt16());return a}.call(this):function(){var s,a;for(a=[],o=0,s=this.length;o<s;o+=4)a.push(n.readUInt32());return a}.call(this)},r.prototype.indexOf=function(n){return this.offsets[n]},r.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},r.prototype.encode=function(n,i){for(var o=new Uint32Array(this.offsets.length),s=0,a=0,c=0;c<o.length;++c)if(o[c]=s,a<i.length&&i[a]==c){++a,o[c]=s;var u=this.offsets[c],h=this.offsets[c+1]-u;h>0&&(s+=h)}for(var p=new Array(4*o.length),x=0;x<o.length;++x)p[4*x+3]=255&o[x],p[4*x+2]=(65280&o[x])>>8,p[4*x+1]=(16711680&o[x])>>16,p[4*x]=(4278190080&o[x])>>24;return p},r}(),_v=function(){function t(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var r,n,i,o,s;for(n in o=this.font.cmap.tables[0].codeMap,r={},s=this.subset)i=s[n],r[n]=o[i];return r},t.prototype.glyphsFor=function(r){var n,i,o,s,a,c,u;for(o={},a=0,c=r.length;a<c;a++)o[s=r[a]]=this.font.glyf.glyphFor(s);for(s in n=[],o)(i=o[s])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(s in u=this.glyphsFor(n))i=u[s],o[s]=i;return o},t.prototype.encode=function(r,n){var i,o,s,a,c,u,h,p,x,b,m,_,w,O,k;for(o in i=X0.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(r),m={0:0},k=i.charMap)m[(u=k[o]).old]=u.new;for(_ in b=i.maxGlyphID,a)_ in m||(m[_]=b++);return p=function(T){var H,Z;for(H in Z={},T)Z[T[H]]=H;return Z}(m),x=Object.keys(p).sort(function(T,H){return T-H}),w=function(){var T,H,Z;for(Z=[],T=0,H=x.length;T<H;T++)c=x[T],Z.push(p[c]);return Z}(),s=this.font.glyf.encode(a,w,m),h=this.font.loca.encode(s.offsets,w),O={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(O["OS/2"]=this.font.os2.raw()),this.font.directory.encode(O)},t}();qt.API.PDFObject=function(){var t;function r(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},r.convert=function(n){var i,o,s,a;if(Array.isArray(n))return"["+function(){var c,u,h;for(h=[],c=0,u=n.length;c<u;c++)i=n[c],h.push(r.convert(i));return h}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in s=["<<"],n)a=n[o],s.push("/"+o+" "+r.convert(a));return s.push(">>"),s.join(`
`)}return""+n},r}();const kv=W.lazy(()=>oo(()=>import("./index-LdKjFKPb.js").then(t=>t.i),__vite__mapDeps([3,1,2]))),Av=hr(de),Lv=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(de,{className:r,style:{...n,left:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},Pv=t=>{const{className:r,style:n,onClick:i}=t;return e.jsx(de,{className:r,style:{...n,right:"10px",zIndex:1,background:"rgba(0,0,0,0.5)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i})},Nv=()=>{var Et,lt,je,Ot,Ht,sr,jn,cr,nn;const{isOpen:t,onOpen:r,onClose:n}=Er(),i=W.useRef(),[o,s]=W.useState(null),[a,c]=W.useState(null),[u,h]=W.useState(""),{id:p}=Dc(),{user:x}=ai();Vr();const b=Ir(),{isOpen:m,onToggle:_,onOpen:w}=Er({defaultIsOpen:!0}),O=W.useRef(null),k=W.useRef(null),{colorMode:T}=cp(),{isOpen:H,onOpen:Z,onClose:P}=Er(),[D,B]=W.useState(null),[G,R]=W.useState(!1),L=W.useRef(!1),[j,A]=W.useState(!1),E=W.useRef(!1),z=async(ye,vt,At)=>{try{console.log("Download request for:",{url:ye,fileName:vt,fileType:At});const Rt=ye.split("/"),Wt=Rt[Rt.length-1];let $t=At;$t||(ye.includes("/images/")||ye.includes("image")?$t="images":ye.includes("/videos/")||ye.includes("video")?$t="videos":$t="documents"),console.log("Using file type for download:",$t);const ir=`${Es}/resources/download/${$t}/${Wt}`,Gt=localStorage.getItem("authToken"),tr={};Gt&&(tr.Authorization=`Bearer ${Gt}`);const nr=await fetch(ir,{headers:tr});if(!nr.ok){const Dr=await nr.json().catch(()=>({message:"Download failed"}));throw new Error(Dr.message||`Download failed with status: ${nr.status}`)}const or=await nr.blob(),Bt=window.URL.createObjectURL(or),mr=document.createElement("a");mr.href=Bt,mr.download=vt||Wt||"download",mr.style.display="none",document.body.appendChild(mr),mr.click(),setTimeout(()=>{document.body.removeChild(mr),window.URL.revokeObjectURL(Bt)},100)}catch(Rt){console.error("Download failed:",Rt)}},oe=async(ye,vt="quiz")=>{if(!(!(ce!=null&&ce.id)||!ye)){st(At=>({...At,[ye]:{...At[ye]||{},loading:!0,url:null,name:vt,error:null}}));try{const At=await f0(ce.id,ye),Rt=At.result||At.quiz||At;if(!Rt||Rt.length===0){st(nr=>({...nr,[ye]:{...nr[ye]||{},loading:!1,error:"No quiz content generated. Please try again."}})),b({title:"No quiz content generated",description:"Please try again",status:"error",duration:5e3,isClosable:!0});return}const Wt=new qt;let $t=10;Rt.forEach((nr,or)=>{Wt.setFontSize(12);const Bt=Wt.splitTextToSize(`${or+1}. ${stripHtml(nr.question)}`,180);Wt.text(Bt,10,$t),$t+=Bt.length*6+4,(nr.options||[]).forEach((mr,Dr)=>{const Sn=Wt.splitTextToSize(`${String.fromCharCode(65+Dr)}. ${stripHtml(mr)}`,170);Wt.text(Sn,14,$t),$t+=Sn.length*6+2}),$t+=6,$t>280&&(Wt.addPage(),$t=10)}),Wt.addPage(),Wt.setFontSize(14),Wt.text("Answer Key",10,10);let ir=20;Rt.forEach((nr,or)=>{Wt.setFontSize(12);const Bt=`${or+1}. ${stripHtml(nr.correct_answer)}`,mr=Wt.splitTextToSize(Bt,180);if(Wt.text(mr,10,ir),ir+=mr.length*6+2,nr.explanation){Wt.setFontSize(10);const Dr=Wt.splitTextToSize(`Explanation: ${stripHtml(nr.explanation)}`,180);Wt.text(Dr,12,ir),ir+=Dr.length*5+4}ir>280&&(Wt.addPage(),ir=10)});const Gt=Wt.output("blob"),tr=URL.createObjectURL(Gt);st(nr=>({...nr,[ye]:{url:tr,loading:!1,name:vt,error:null}})),b({title:"Quiz generated successfully",status:"success",duration:3e3,isClosable:!0})}catch(At){st(Rt=>({...Rt,[ye]:{...Rt[ye]||{},loading:!1,error:At.message||"Failed to generate quiz"}})),b({title:"Failed to generate quiz",description:At.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}}},re=async(ye,vt="summary")=>{if(!(!(ce!=null&&ce.id)||!ye)){ot(At=>({...At,[ye]:{...At[ye]||{},loading:!0,url:null,name:vt,error:null}}));try{const At=await p0(ce.id,ye),Rt=At.result||At.summary||At,Wt=Rt.introduction||"",$t=Rt.concept_summaries||{},ir=Array.isArray(Rt.key_topics)&&Rt.key_topics.length?Rt.key_topics:Object.keys($t);if(!Rt||!Wt&&Object.keys($t).length===0){ot(Bt=>({...Bt,[ye]:{...Bt[ye]||{},loading:!1,error:"No summary content generated. Please try again."}})),b({title:"No summary content generated",description:"Please try again",status:"error",duration:5e3,isClosable:!0});return}const Gt=new qt;let tr=10;Wt&&(Gt.setFontSize(14),Gt.text("Introduction",10,tr),tr+=8,Gt.setFontSize(11),Gt.splitTextToSize(Wt,180).forEach(mr=>{Gt.text(mr,10,tr),tr+=6,tr>280&&(Gt.addPage(),tr=10)}),tr+=4),ir.forEach(Bt=>{const mr=$t[Bt]||"";if(!mr)return;Gt.setFontSize(13),Gt.text(Bt,10,tr),tr+=7,Gt.setFontSize(11),Gt.splitTextToSize(mr,180).forEach(Sn=>{Gt.text(Sn,10,tr),tr+=6,tr>280&&(Gt.addPage(),tr=10)}),tr+=6});const nr=Gt.output("blob"),or=URL.createObjectURL(nr);ot(Bt=>({...Bt,[ye]:{url:or,loading:!1,name:vt,error:null}})),b({title:"Summary generated successfully",status:"success",duration:3e3,isClosable:!0})}catch(At){ot(Rt=>({...Rt,[ye]:{...Rt[ye]||{},loading:!1,error:At.message||"Failed to generate summary"}})),b({title:"Failed to generate summary",description:At.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}}},v=se("white","gray.700");se("gray.800","white");const ne=se("gray.500","gray.400"),M=se("blue.500","blue.300"),y=se("gray.200","gray.600"),Y=se("gray.100","gray.600"),C=se("gray.50","gray.800");se("blue.50","blue.900");const[q,N]=W.useState(!1),[$,Q]=W.useState(!1),[ie,ue]=W.useState(0),[le,ge]=W.useState(""),[xe,ze]=W.useState([]),[Ie,We]=W.useState(47),[be,ee]=W.useState(!0),[Ae,Se]=W.useState(!1),[ce,Me]=W.useState(null),[Xe,Ze]=W.useState(16),[pt,Ue]=W.useState(0),[Ce,ve]=W.useState({}),[Pe,De]=W.useState({}),[_e,Fe]=W.useState([]),[Ne,st]=W.useState({}),[Ge,ot]=W.useState({}),[Nt,Ct]=W.useState({}),dt=W.useRef(new Set);(Et=ce==null?void 0:ce.documents)==null||Et.some(ye=>ye.original_name&&ye.original_name.toLowerCase().endsWith(".pdf")||ye.url&&ye.url.toLowerCase().endsWith(".pdf"));const mt=ye=>ye?ye.startsWith("http")?ye:`${os}${ye}`:"",zt=async()=>{try{Q(ye=>!ye),ce!=null&&ce.id&&(await Qc(ce.id),b({title:$?"Resource removed from saved items":"Resource saved successfully",status:"success",duration:2e3,isClosable:!0}))}catch(ye){Q(vt=>!vt),b({title:"Error",description:"Could not update saved status. Please try again.",status:"error",duration:3e3,isClosable:!0}),console.error("Error updating bookmark status:",ye)}};W.useEffect(()=>{p&&(async()=>{var vt,At,Rt,Wt,$t,ir,Gt,tr,nr,or,Bt,mr,Dr,Sn;ee(!0);try{const Kt=await gc(p);console.log("Resource data:",Kt);const hn={id:Kt.id,type:((Rt=(At=(vt=Kt.attachments)==null?void 0:vt[0])==null?void 0:At.file_type)==null?void 0:Rt.toUpperCase())||"Resource",title:Kt.title,difficulty:"",fileSize:"",dateAdded:Kt.created_at,lastUpdated:Kt.updated_at,readTime:"",author:{id:(Wt=Kt.user)==null?void 0:Wt.id,name:`${(($t=Kt.user)==null?void 0:$t.first_name)||""} ${((ir=Kt.user)==null?void 0:ir.last_name)||""}`.trim()||((Gt=Kt.user)==null?void 0:Gt.username)||"Unknown",avatar:(tr=Kt.user)==null?void 0:tr.avatar_url,verified:((nr=Kt.user)==null?void 0:nr.primary_role)==="admin"||((or=Kt.user)==null?void 0:or.primary_role)==="moderator",resources:null},likes:(Bt=Kt.upvote_count)!=null?Bt:0,shares:0,comments:Kt.comments||[],images:(Kt.attachments||[]).filter(Yr=>Yr.file_type==="image"),videos:(Kt.attachments||[]).filter(Yr=>Yr.file_type==="video"),documents:(Kt.attachments||[]).filter(Yr=>Yr.file_type==="document"),content:Kt.description,courseName:((mr=Kt.course)==null?void 0:mr.title)||Kt.course_name||"",courseCode:((Dr=Kt.course)==null?void 0:Dr.code)||Kt.course_code||"",related:[],polls:Kt.polls?(Array.isArray(Kt.polls)?Kt.polls:[Kt.polls]).map(Ti=>({id:Ti.id,question:Ti.question,options:(Ti.options||[]).map(li=>{var ho,Mr,Ts,zs;return{id:li.id,text:(Mr=(ho=li.option_text)!=null?ho:li.text)!=null?Mr:"",votes:(zs=(Ts=li.vote_count)!=null?Ts:li.votes)!=null?zs:0}})})):[]};Me(hn),console.log("Resource saved status:",Kt.is_saved),Q(Kt.is_saved===!0),N(!!Kt.is_upvoted),We((Sn=Kt.upvote_count)!=null?Sn:0);const pa=(Kt.comments||[]).map(Yr=>({id:Yr.id,text:Yr.body,date:Yr.created_at,user:Yr.user,likes:Yr.upvote_count||0,isUpvoted:Yr.is_upvoted||!1}));ze(pa),setTimeout(()=>{var Yr;console.log("Resource images:",hn.images),(Yr=hn.images)!=null&&Yr.length&&hn.images.forEach(Ti=>{console.log("Image URL:",Ti.url),console.log("Resolved URL:",mt(Ti.url))})},100)}catch(Kt){console.error("Failed to fetch resource",Kt),b({title:"Failed to load resource",description:Kt.message||"An unexpected error occurred",status:"error",duration:3e3,isClosable:!0})}finally{ee(!1)}})()},[p]),W.useEffect(()=>{const ye=()=>{if(k.current){const{scrollTop:At,scrollHeight:Rt,clientHeight:Wt}=k.current,$t=At/(Rt-Wt)*100;Ue(Math.min($t,100))}},vt=k.current;if(vt)return vt.addEventListener("scroll",ye),()=>vt.removeEventListener("scroll",ye)},[]);const Ft=async()=>{const ye=q,vt=Ie;N(!ye),We(ye?vt-1:vt+1);try{await th(p),b({title:ye?"Upvote removed":"Resource upvoted",status:"success",duration:2e3,isClosable:!0})}catch(At){N(ye),We(vt),b({title:"Unable to update upvote",description:At.message||"An unexpected error occurred",status:"error",duration:3e3,isClosable:!0})}},fr=async ye=>{try{const{message:vt,upvote_count:At,is_upvoted:Rt}=await c0(ye);ze(Wt=>Wt.map($t=>$t.id===ye?{...$t,isUpvoted:Rt,likes:At}:$t).sort(($t,ir)=>ir.likes-$t.likes)),b({title:vt||(Rt?"Comment upvoted":"Upvote removed"),status:"success",duration:2e3,isClosable:!0})}catch(vt){console.error("Error upvoting comment:",vt),b({title:"Error",description:"Could not update upvote. Please try again.",status:"error",duration:3e3,isClosable:!0})}},Te=async()=>{try{const ye=window.location.href;navigator.share?await navigator.share({title:(ce==null?void 0:ce.title)||"Resource",url:ye}):(await navigator.clipboard.writeText(ye),b({title:"Link copied",description:"Resource link copied to clipboard",status:"success",duration:2e3,isClosable:!0}))}catch(ye){console.error("Share failed",ye),b({title:"Unable to share",status:"error",duration:2e3,isClosable:!0})}},He=ye=>{c(ye.id),h(ye.text)},tt=()=>{c(null),setNewCommentText(""),h("")},rt=async()=>{if(!(!a||!u.trim()))try{await a0(a,u.trim()),b({title:"Comment updated",status:"success",duration:2e3,isClosable:!0});const vt=((await gc(p)).comments||[]).map(At=>({id:At.id,text:At.body,date:At.created_at,user:At.user,likes:At.upvote_count||0,isUpvoted:At.is_upvoted||!1}));ze(vt),h(""),tt()}catch(ye){console.error("Update comment error",ye)}},gt=ye=>{s(ye),r()},jt=async()=>{if(!(!o||E.current)){E.current=!0,A(!0);try{await l0(o),ze(ye=>ye.filter(vt=>vt.id!==o)),b({title:"Comment deleted",status:"success",duration:2e3,isClosable:!0})}catch(ye){console.error("Delete comment error",ye),b({title:"Failed to delete comment",status:"error",duration:3e3,isClosable:!0})}finally{s(null),A(!1),E.current=!1,n()}}},It=async()=>{const ye=(le||"").trim();if(!(L.current||!ye)){L.current=!0,R(!0);try{await o0(p,ye),ge(""),m||w(),b({title:"Comment added",status:"success",duration:2e3,isClosable:!0});const At=((await gc(p)).comments||[]).map(Rt=>({id:Rt.id,text:Rt.body,date:Rt.created_at,user:Rt.user,likes:Rt.upvote_count||0,isUpvoted:Rt.is_upvoted||!1}));ze(At)}catch(vt){console.error("Error adding comment:",vt),b({title:"Failed to add comment",description:vt.message||"Please try again later",status:"error",duration:3e3,isClosable:!0})}finally{R(!1),L.current=!1}}},Ve=ye=>new Date(ye).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),Ye=ye=>{const vt=new Date(ye),Rt=new Date-vt,Wt=Math.floor(Rt/1e3),$t=Math.floor(Wt/60),ir=Math.floor($t/60),Gt=Math.floor(ir/24);return Gt>30?Ve(ye):Gt>0?`${Gt}d ago`:ir>0?`${ir}h ago`:$t>0?`${$t}m ago`:"Just now"};return!be&&!ce?e.jsx(de,{bg:C,minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:e.jsx(V,{fontSize:"lg",children:"Resource not found."})}):e.jsx(de,{bg:C,minH:"100vh",children:e.jsxs(de,{maxW:"container.xl",mx:"auto",px:{base:4,md:6},py:6,children:[e.jsx(ke,{w:"full",align:"center",justify:"space-between",mb:4,p:3,bg:v,borderRadius:"md",boxShadow:"sm",position:"sticky",top:"2",zIndex:"sticky",children:e.jsx(Ee,{leftIcon:e.jsx(Bn,{}),as:Hi,to:"/resources",variant:"ghost",size:"md",children:"Back to Resources"})}),e.jsxs(pr,{templateColumns:{base:"1fr",lg:"2fr 1fr"},gap:6,children:[e.jsxs(_c,{children:[e.jsx(er,{overflow:"hidden",bg:v,boxShadow:"sm",mb:6,children:be?e.jsxs(ln,{children:[e.jsx(Yo,{mt:"4",noOfLines:1,spacing:"4",skeletonHeight:"10",mb:6}),e.jsx(Yo,{mt:"4",noOfLines:4,spacing:"4",mb:6}),e.jsx(Sr,{height:"300px",mb:6}),e.jsx(Yo,{mt:"4",noOfLines:8,spacing:"4"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ao,{pb:3,children:e.jsx(ke,{justify:"space-between",align:"center",mb:4,children:e.jsxs(at,{spacing:3,children:[e.jsx(Tr,{src:ce.author.avatar,name:ce.author.name,size:"md"}),e.jsxs(de,{children:[e.jsxs(at,{spacing:2,children:[e.jsx(V,{fontWeight:"medium",children:ce.author.id===(x==null?void 0:x.id)?"You":ce.author.name}),ce.author.verified&&e.jsx(ct,{as:Pi,color:"blue.500",boxSize:3.5})]}),e.jsx(V,{fontSize:"sm",color:ne,children:Ye(ce.dateAdded)})]})]})})}),e.jsxs(ln,{pt:2,children:[e.jsx(ut,{size:"md",mb:4,children:ce.title}),e.jsx(de,{mb:4,children:e.jsx(V,{fontSize:"xl",lineHeight:"1.6",whiteSpace:"pre-wrap",children:ce.content})})]})]})}),e.jsx(er,{overflow:"hidden",bg:v,boxShadow:"sm",mb:6,children:e.jsxs(sa,{variant:"enclosed",isLazy:!0,colorScheme:"blue",children:[e.jsxs(oa,{overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",px:{base:2,md:4},sx:{"&::-webkit-scrollbar":{display:"none"}},children:[(((lt=ce==null?void 0:ce.images)==null?void 0:lt.length)||((je=ce==null?void 0:ce.videos)==null?void 0:je.length))>0&&e.jsx(Yn,{fontSize:{base:"sm",md:"md"},px:{base:2,md:4},children:"Media"}),((Ot=ce==null?void 0:ce.documents)==null?void 0:Ot.length)>0&&e.jsx(Yn,{fontSize:{base:"sm",md:"md"},px:{base:2,md:4},children:"Documents"}),_e.length>0&&e.jsx(Yn,{fontSize:{base:"sm",md:"md"},px:{base:2,md:4},children:"Polls"})]}),e.jsxs(al,{children:[(((Ht=ce==null?void 0:ce.images)==null?void 0:Ht.length)||((sr=ce==null?void 0:ce.videos)==null?void 0:sr.length))>0&&e.jsxs(oi,{px:0,children:[((jn=ce==null?void 0:ce.images)==null?void 0:jn.length)>0&&e.jsx(er,{mb:4,width:"full",maxW:"container.md",mx:"auto",bg:v,borderColor:y,borderWidth:"1px",boxShadow:"sm",children:e.jsx(ln,{p:0,children:ce.images.length>1?e.jsx(de,{position:"relative",width:"full",children:e.jsx(_0,{dots:!0,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:ce.images.length>1,prevArrow:ce.images.length>1?e.jsx(Lv,{}):null,nextArrow:ce.images.length>1?e.jsx(Pv,{}):null,css:{".slick-slide":{padding:"0 4px"},".slick-list":{margin:"0 -4px"}},children:ce.images.map(ye=>e.jsxs(de,{width:"full",height:{base:"200px",md:"350px"},overflow:"hidden",borderRadius:"md",position:"relative",cursor:"pointer",_hover:{"& img":{transform:"scale(1.03)"}},onClick:()=>{B(mt(ye.url)),Z()},children:[e.jsx(Cr,{src:mt(ye.url),alt:ye.original_name||ce.title,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease",onError:vt=>{console.error(`Failed to load image: ${ye.url}`,vt),vt.target.src="https://via.placeholder.com/400x300?text=Image+Error"},fallback:e.jsx(de,{w:"100%",h:"100%",bg:"gray.200",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(V,{children:"Loading image..."})})}),e.jsx(Mt,{icon:e.jsx(Ai,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"blackAlpha.800"},onClick:vt=>{vt.stopPropagation();const At=ye.original_name||`Image-${ce.title}`;z(ye.url,At,"images")},"aria-label":"Download image"})]},ye.id||ye.url))})}):e.jsxs(de,{width:"full",height:{base:"200px",md:"350px"},overflow:"hidden",borderRadius:"md",position:"relative",cursor:"pointer",_hover:{"& img":{transform:"scale(1.03)"}},onClick:()=>{B(mt(ce.images[0].url)),Z()},children:[e.jsx(Cr,{src:mt(ce.images[0].url),alt:ce.images[0].original_name||ce.title,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease",onError:ye=>{console.error(`Failed to load image: ${ce.images[0].url}`,ye),ye.target.src="https://via.placeholder.com/400x300?text=Image+Error"},fallback:e.jsx(de,{w:"100%",h:"100%",bg:"gray.200",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(V,{children:"Loading image..."})})}),e.jsx(Mt,{icon:e.jsx(Ai,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"blackAlpha.800"},onClick:ye=>{ye.stopPropagation();const vt=ce.images[0].original_name||`Image-${ce.title}`;z(ce.images[0].url,vt,"images")},"aria-label":"Download image"})]},ce.images[0].id||ce.images[0].url)})}),((cr=ce==null?void 0:ce.videos)==null?void 0:cr.length)>0&&e.jsx(et,{spacing:4,mb:4,children:ce.videos.map(ye=>e.jsxs(de,{position:"relative",children:[e.jsx(kv,{url:mt(ye.url),width:"100%",height:"100%",controls:!0,playing:!1,onError:vt=>console.error(`Failed to load video: ${ye.url}`,vt)}),e.jsx(Mt,{icon:e.jsx(Ai,{}),size:"sm",position:"absolute",top:"4",right:"4",colorScheme:"blue",bg:"whiteAlpha.800",_hover:{bg:"blackAlpha.800"},onClick:vt=>{vt.stopPropagation();const At=ye.original_name||`Video-${ce.title}`;z(ye.url,At,"videos"),b({title:"Downloading video",description:`${At} is being downloaded`,status:"info",duration:2e3,isClosable:!0})},"aria-label":"Download video"})]},ye.id||ye.url))})]}),((nn=ce==null?void 0:ce.documents)==null?void 0:nn.length)>0&&e.jsx(oi,{px:0,children:e.jsx(de,{mb:4,children:e.jsx(si,{spacing:3,children:ce.documents.map((ye,vt)=>{var At,Rt,Wt,$t,ir,Gt,tr,nr,or;return e.jsxs(ke,{p:3,borderWidth:"1px",borderRadius:"md",alignItems:"center",justifyContent:"space-between",bg:v,_hover:{bg:Y},cursor:"pointer",children:[e.jsxs(at,{spacing:3,children:[e.jsx(ct,{as:Wg,boxSize:5,color:M}),e.jsxs(ke,{align:"center",children:[e.jsx(V,{fontWeight:"bold",fontSize:"lg",isTruncated:!0,children:ye.original_name||`Document-${vt+1}`}),((At=Ne[ye.id])==null?void 0:At.url)&&e.jsx(ct,{as:Pi,color:"green.500",ml:2})]})]}),e.jsxs(at,{spacing:2,children:[e.jsx(Mt,{icon:e.jsx(Mg,{}),size:"sm",colorScheme:"blue",variant:"ghost",onClick:Bt=>{Bt.stopPropagation(),window.open(mt(ye.url),"_blank")},"aria-label":"Preview document"}),(()=>{var Dr;const Bt=(Dr=ye.id)!=null?Dr:`idx-${vt}`,mr=!!Nt[Bt];return e.jsx(Ee,{leftIcon:e.jsx(Ai,{}),size:"sm",colorScheme:"blue",onClick:async Sn=>{if(Sn.stopPropagation(),dt.current.has(Bt))return;dt.current.add(Bt),Ct(hn=>({...hn,[Bt]:!0}));const Kt=ye.original_name||`Document-${vt+1}`;try{await z(ye.url,Kt,"documents"),b({title:"Downloading document",description:`${Kt} is being downloaded`,status:"info",duration:2e3,isClosable:!0})}catch(hn){b({title:"Download failed",description:(hn==null?void 0:hn.message)||"Please try again",status:"error",duration:3e3,isClosable:!0})}finally{Ct(hn=>({...hn,[Bt]:!1})),dt.current.delete(Bt)}},isLoading:mr,isDisabled:mr,"aria-label":"Download document",children:"Download"})})(),((ye.original_name||"").toLowerCase().endsWith(".pdf")||(ye.url||"").toLowerCase().endsWith(".pdf"))&&e.jsxs(yn,{strategy:"fixed",children:[e.jsx(vn,{as:Mt,icon:e.jsx(Wc,{}),size:"sm",variant:"ghost",onClick:Bt=>Bt.stopPropagation(),"aria-label":"AI options"}),e.jsxs(wn,{zIndex:9999,bg:v,children:[(Rt=Ne[ye.id])!=null&&Rt.url?e.jsx(rr,{as:"a",icon:e.jsx(Ai,{}),href:Ne[ye.id].url,download:`Quiz-${ye.original_name||"quiz"}.pdf`,children:"Download quiz"}):e.jsx(rr,{icon:e.jsx(mp,{}),isDisabled:(Wt=Ne[ye.id])==null?void 0:Wt.loading,onClick:Bt=>{Bt.stopPropagation(),oe(ye.id,ye.original_name||`Document-${vt+1}`)},children:($t=Ne[ye.id])!=null&&$t.loading?e.jsx(V,{children:"Generating quiz..."}):(ir=Ne[ye.id])!=null&&ir.error?e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(V,{color:"red.500",children:"Generation failed"}),e.jsx(V,{fontSize:"xs",color:"gray.500",children:Ne[ye.id].error}),e.jsx(Ee,{size:"xs",colorScheme:"red",variant:"link",onClick:Bt=>{Bt.stopPropagation(),oe(ye.id,ye.original_name||`Document-${vt+1}`)},children:"Retry"})]}):"Generate quiz"}),(Gt=Ge[ye.id])!=null&&Gt.url?e.jsx(rr,{as:"a",icon:e.jsx(Ai,{}),href:Ge[ye.id].url,download:`Summary-${ye.original_name||"summary"}.pdf`,children:"Download summary"}):e.jsx(rr,{icon:e.jsx(Dn,{}),isDisabled:(tr=Ge[ye.id])==null?void 0:tr.loading,onClick:Bt=>{Bt.stopPropagation(),re(ye.id,ye.original_name||`Document-${vt+1}`)},children:(nr=Ge[ye.id])!=null&&nr.loading?e.jsx(V,{children:"Generating summary..."}):(or=Ge[ye.id])!=null&&or.error?e.jsxs(et,{align:"start",spacing:1,children:[e.jsx(V,{color:"red.500",children:"Generation failed"}),e.jsx(V,{fontSize:"xs",color:"gray.500",children:Ge[ye.id].error}),e.jsx(Ee,{size:"xs",colorScheme:"red",variant:"link",onClick:Bt=>{Bt.stopPropagation(),re(ye.id,ye.original_name||`Document-${vt+1}`)},children:"Retry"})]}):"Generate summary"})]})]})]})]},ye.id||vt)})})})}),_e.length>0&&e.jsx(oi,{px:0,children:e.jsx(de,{mb:4,children:_e.slice(0,1).map((ye,vt)=>{const At=ye.id||`poll-${vt}`,Rt=ye.options.reduce((ir,Gt)=>ir+(Gt.votes||0),0);Pe[At];const Wt=Ce[At],$t=async ir=>{try{const{message:Gt,poll:tr}=await rh(ir),nr={id:tr.id,question:tr.question,options:(tr.options||[]).map(or=>{var Bt,mr,Dr,Sn;return{id:or.id,text:(mr=(Bt=or.option_text)!=null?Bt:or.text)!=null?mr:"",votes:(Sn=(Dr=or.vote_count)!=null?Dr:or.votes)!=null?Sn:0}})};Fe(or=>or.map(Bt=>Bt.id===nr.id?nr:Bt)),Gt.startsWith("Vote removed")?(ve(or=>({...or,[ye.id]:null})),De(or=>({...or,[ye.id]:!1}))):(ve(or=>({...or,[ye.id]:ir})),De(or=>({...or,[ye.id]:!0}))),b({title:Gt,status:"success",duration:2e3,isClosable:!0})}catch(Gt){console.error("Vote error",Gt),b({title:"Failed to record vote",description:Gt.message||"Try again later",status:"error",duration:3e3,isClosable:!0})}};return e.jsxs(de,{bg:se("gray.50","gray.700"),p:4,borderRadius:"xl",children:[e.jsx(V,{fontWeight:"semibold",mb:3,children:ye.question}),e.jsx(et,{spacing:2,align:"stretch",children:ye.options.map((ir,Gt)=>{const tr=ir.id||`option-${Gt}`,nr=Wt===tr,or=ir.votes||0,Bt=Rt>0?Math.round(or/Rt*100):0;return e.jsxs(de,{position:"relative",p:3,borderRadius:"lg",cursor:"pointer",onClick:()=>$t(tr),bg:se("white","gray.800"),border:"2px solid",borderColor:nr?"blue.400":"transparent",_hover:{borderColor:nr?"blue.500":se("gray.200","gray.600")},children:[e.jsx(de,{position:"absolute",left:0,top:0,bottom:0,width:`${Bt}%`,bg:nr?"blue.100":se("gray.100","gray.700"),opacity:.3,borderRadius:"lg"}),e.jsxs(ke,{justify:"space-between",align:"center",position:"relative",children:[e.jsx(V,{children:ir.text}),e.jsxs(V,{fontWeight:"bold",color:nr?"blue.500":ne,children:[Bt,"%"]})]})]},tr)})}),e.jsxs(V,{fontSize:"sm",color:ne,mt:2,textAlign:"center",children:[Rt," ",Rt===1?"vote":"votes"]})]},At)})})})]})]})}),e.jsx(er,{overflow:"hidden",bg:v,boxShadow:"sm",mb:6,children:e.jsxs(ln,{children:[e.jsxs(ke,{justify:"space-between",align:"center",mb:4,children:[e.jsxs(ut,{size:"md",children:["Discussion (",xe.length,")"]}),e.jsx(Ee,{rightIcon:m?e.jsx(Tg,{}):e.jsx(is,{}),variant:"ghost",size:"sm",onClick:_,children:m?"Hide":"Show"})]}),m&&e.jsxs(et,{align:"stretch",spacing:6,children:[e.jsx(de,{p:4,borderWidth:"1px",borderRadius:"lg",bg:v,children:e.jsxs(at,{align:"start",spacing:3,children:[e.jsx(Tr,{size:"sm",name:x?`${x.first_name} ${x.last_name}`:"User",src:(x==null?void 0:x.avatar_url)||(x!=null&&x.avatar?mt(x.avatar):void 0)}),e.jsx(Qn,{ref:O,value:le,onChange:ye=>ge(ye.target.value),placeholder:"Add to the discussion...",variant:"unstyled",rows:2,resize:"none",onKeyDown:ye=>{ye.key==="Enter"&&!ye.shiftKey&&(ye.preventDefault(),G||It())}}),e.jsx(Ee,{rightIcon:e.jsx(xp,{}),"aria-label":a?"Save edited comment":"Send comment",onClick:It,colorScheme:"blue",size:"sm",isLoading:G,isDisabled:!(le!=null&&le.trim())||G,children:"Send"})]})}),xe.map(ye=>{var vt,At;return e.jsx(Av,{p:4,borderWidth:"1px",borderRadius:"lg",bg:v,initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs(at,{align:"start",spacing:3,children:[e.jsx(Tr,{size:"sm",name:ye.user?`${ye.user.first_name} ${ye.user.last_name}`:"Anonymous",src:((vt=ye.user)==null?void 0:vt.avatar_url)||((At=ye.user)!=null&&At.avatar?mt(ye.user.avatar):void 0)}),e.jsxs(de,{flex:"1",children:[e.jsxs(at,{justify:"space-between",children:[e.jsxs(de,{children:[e.jsx(V,{fontWeight:"600",children:ye.user.id===(x==null?void 0:x.id)?"You":`${ye.user.first_name} ${ye.user.last_name}`}),e.jsx(V,{fontSize:"sm",color:ne,children:Ye(ye.date)})]}),e.jsxs(at,{spacing:2,children:[e.jsx(Ee,{variant:"ghost",size:"sm",leftIcon:e.jsx(ct,{as:Pc,color:ye.isUpvoted?"green.500":void 0}),color:ye.isUpvoted?"green.500":void 0,fontWeight:ye.isUpvoted?"bold":"normal",onClick:()=>fr(ye.id),children:ye.likes||0}),ye.user.id===(x==null?void 0:x.id)&&e.jsxs(at,{spacing:1,children:[e.jsx(Mt,{"aria-label":"Edit",variant:"ghost",size:"sm",icon:e.jsx(ro,{}),onClick:()=>He(ye)}),e.jsx(Mt,{"aria-label":"Delete",variant:"ghost",size:"sm",icon:e.jsx(dl,{}),onClick:()=>gt(ye.id)})]})]})]}),a===ye.id?e.jsxs(de,{mt:2,children:[e.jsx(Qn,{value:u,onChange:Rt=>h(Rt.target.value),rows:2,resize:"vertical"}),e.jsxs(at,{mt:2,spacing:2,children:[e.jsx(Ee,{size:"sm",colorScheme:"blue",onClick:rt,children:"Save"}),e.jsx(Ee,{size:"sm",variant:"ghost",onClick:tt,children:"Cancel"})]})]}):e.jsx(V,{mt:2,children:ye.text})]})]})},ye.id)})]})]})})]}),e.jsx(_c,{children:e.jsx(de,{position:"sticky",top:"24",children:e.jsx(Ly,{courseName:ce==null?void 0:ce.courseName,courseCode:ce==null?void 0:ce.courseCode,lastUpdated:ce==null?void 0:ce.lastUpdated,likes:Ie,commentsCount:xe==null?void 0:xe.length})})})]}),e.jsx(de,{position:"fixed",bottom:{base:4,md:8},right:{base:4,md:8},zIndex:"tooltip",children:e.jsxs(et,{spacing:3,children:[e.jsx(Mt,{icon:e.jsx(Pc,{}),variant:q?"solid":"outline",colorScheme:q?"blue":"gray",size:"lg","aria-label":"Upvote",onClick:Ft}),e.jsx(Mt,{icon:e.jsx($i,{}),variant:$?"solid":"outline",colorScheme:$?"blue":"gray",size:"lg","aria-label":"Save",onClick:zt}),e.jsx(Mt,{icon:e.jsx(da,{}),variant:"outline",colorScheme:"gray",size:"lg","aria-label":"Share",onClick:Te})]})}),e.jsx(la,{isOpen:t,leastDestructiveRef:i,onClose:j?()=>{}:n,closeOnOverlayClick:!j,closeOnEsc:!j,children:e.jsx(kr,{children:e.jsxs(ca,{children:[e.jsx(Fr,{fontSize:"lg",fontWeight:"bold",children:"Delete Comment"}),e.jsx(Ar,{children:"Are you sure you want to delete this comment? This action cannot be undone."}),e.jsxs(Ur,{children:[e.jsx(Ee,{ref:i,onClick:n,isDisabled:j,children:"Cancel"}),e.jsx(Ee,{colorScheme:"red",onClick:jt,ml:3,isLoading:j,isDisabled:j,children:"Delete"})]})]})})}),e.jsxs(cn,{isOpen:H,onClose:P,size:"full",isCentered:!0,children:[e.jsx(kr,{}),e.jsxs(dn,{bg:"transparent",boxShadow:"none",maxW:"90vw",maxH:"90vh",m:"auto",children:[e.jsx(rn,{color:"white"}),e.jsx(Ar,{p:0,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(Cr,{src:D,alt:"Preview",borderRadius:"md",maxW:"90vw",maxH:"90vh",objectFit:"contain"})})]})]})]})})},op=hr(de),ap=({event:t,onBookmark:r,onCardClick:n})=>{const i=se("white","gray.800"),o=se("gray.800","whiteAlpha.900"),s=se("gray.600","gray.400"),a=se("gray.200","gray.700");if(!t||!t.data)return e.jsx(op,{p:5,borderWidth:"1px",borderRadius:"lg",borderColor:a,bg:i,textAlign:"center",children:e.jsx(V,{color:s,children:"This saved item is no longer available."})});const{title:c,event_datetime:u,location:h,organizer:p,attendees_count:x,image_path:b,is_club_event:m,club:_}=t.data,w=new Date(u)<new Date,O=new Date(u).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),k=new Date(u).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsxs(op,{borderWidth:"1px",borderRadius:"lg",overflow:"hidden",bg:i,borderColor:a,whileHover:{y:-5,boxShadow:"lg"},transition:{type:"spring",stiffness:300},cursor:"pointer",onClick:()=>n(t.data.id),children:[e.jsxs(de,{position:"relative",children:[e.jsx(Cr,{src:`${os}/storage/${b}`,alt:c,objectFit:"cover",w:"100%",h:"200px"}),w&&e.jsx(Lr,{position:"absolute",top:2,left:2,colorScheme:"red",children:"Finished"}),e.jsx(at,{position:"absolute",top:2,right:2,spacing:2,children:e.jsx(gi,{label:t.isSaved?"Unsave":"Save",placement:"top",children:e.jsx(Mt,{icon:e.jsx($i,{fill:t.isSaved?"currentColor":"none"}),onClick:T=>{T.stopPropagation(),r(t.data.id,"Event")},size:"sm",borderRadius:"full",bg:"rgba(0,0,0,0.6)",color:"white",_hover:{bg:"rgba(0,0,0,0.8)"},"aria-label":"Bookmark Event"})})})]}),e.jsxs(et,{p:4,align:"start",spacing:3,children:[e.jsx(ut,{size:"md",color:o,noOfLines:2,children:c}),e.jsxs(et,{align:"start",spacing:2,color:s,children:[e.jsxs(at,{children:[e.jsx(ct,{as:kn}),e.jsx(V,{children:O})]}),e.jsxs(at,{children:[e.jsx(ct,{as:Ps}),e.jsx(V,{children:k})]}),e.jsxs(at,{children:[e.jsx(ct,{as:Go}),e.jsx(V,{children:h})]})]}),e.jsxs(ke,{justify:"space-between",align:"center",w:"100%",mt:3,children:[e.jsx(at,{children:m&&_?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{size:"xs",name:_.name,src:`${os}/storage/${_.logo_path}`}),e.jsx(V,{fontSize:"sm",fontWeight:"bold",children:_.name})]}):e.jsxs(V,{fontSize:"sm",children:["Organized by: ",p]})}),e.jsxs(at,{spacing:1,align:"center",children:[e.jsx(ct,{as:qn}),e.jsx(V,{fontSize:"sm",children:x})]})]})]})]})},Ov=[{id:"all",name:"All Items",icon:pp,color:"gray.500"},{id:"Resource",name:"Resources",icon:Dn,color:"blue.500"},{id:"Event",name:"Events",icon:kn,color:"purple.500"}],Rv=()=>{const t=Vr(),[r,n]=W.useState([]),[i,o]=W.useState(!0),[s,a]=W.useState(null),[c,u]=W.useState(""),[h,p]=W.useState("all"),[x,b]=W.useState("grid"),[m,_]=W.useState(1),w=9,[O,k]=W.useState(null),T=se("gray.50","gray.900"),H=se("gray.800","whiteAlpha.900"),Z=se("gray.600","gray.400"),P=se("gray.200","gray.700"),D=se("white","gray.800"),B=se("blue.50","blue.900"),G=se("gray.100","gray.700");W.useEffect(()=>{(async()=>{o(!0);try{const y=await Js();k(y);const C=(await u0()).data.map(q=>({...q,isSaved:!0,data:q.type==="Resource"?{...q.data,is_saved:!0}:q.data}));n(C)}catch(y){a("Failed to fetch saved items. Please try again later."),console.error(y)}finally{o(!1)}})()},[]);const R=async(M,y)=>{const Y=[...r],C=r.filter(q=>{var N;return((N=q.data)==null?void 0:N.id)!==M});n(C);try{y==="Resource"?await Qc(M):y==="Event"&&await Kp(M)}catch(q){console.error("Failed to update bookmark status:",q),n(Y)}},L=(M,y)=>{y==="Resource"?t(`/resources/${M}`):y==="Event"&&t("/events")},j=r.filter(M=>{var C,q;if(!M.data)return h==="all"&&c==="";const y=((C=M.data.title)==null?void 0:C.toLowerCase().includes(c.toLowerCase()))||((q=M.data.description)==null?void 0:q.toLowerCase().includes(c.toLowerCase())),Y=h==="all"||M.type===h;return y&&Y}).sort((M,y)=>new Date(y.saved_at||0)-new Date(M.saved_at||0)),A=(m-1)*w,E=j.slice(A,A+w),z=Math.ceil(j.length/w),oe=()=>{window.history.back()},re={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},v={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},ne=()=>{if(i)return e.jsx(bn,{w:"full",py:12,children:e.jsx(pr,{templateColumns:{base:"1fr",md:"repeat(2,1fr)",lg:"repeat(3,1fr)"},gap:6,w:"full",children:[...Array(6)].map((y,Y)=>e.jsxs(de,{borderWidth:"1px",borderRadius:"lg",p:4,bg:D,borderColor:P,children:[e.jsx(Sr,{height:"150px",mb:4}),e.jsx(Yo,{noOfLines:3,spacing:"4"})]},Y))})});if(s)return e.jsx(bn,{h:"300px",children:e.jsxs(eo,{status:"error",borderRadius:"md",children:[e.jsx(to,{}),e.jsx(sg,{children:"An Error Occurred!"}),e.jsx(og,{children:s})]})});if(j.length===0)return e.jsx(bn,{h:"300px",children:e.jsxs(et,{children:[e.jsx(ct,{as:$i,boxSize:"50px",color:Z}),e.jsx(ut,{size:"md",color:H,children:"No Saved Items Found"}),e.jsx(V,{color:Z,children:c||h!=="all"?"Try adjusting your search or filter.":"You haven't saved any items yet."})]})});const M={base:"1fr",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"};return e.jsx(ag,{mode:"wait",children:e.jsx(hr.div,{variants:re,initial:"hidden",animate:"show",children:x==="grid"?e.jsx(pr,{templateColumns:M,gap:6,children:E.map(y=>{var Y;return e.jsx(hr.div,{variants:v,children:y.type==="Resource"?e.jsx(zc,{resource:y.data,onBookmark:()=>R(y.data.id,"Resource"),onCardClick:()=>L(y.data.id,"Resource"),currentUser:O,cardBg:D,textColor:H,mutedText:Z,borderColor:P}):e.jsx(ap,{event:y,onBookmark:()=>R(y.data.id,"Event"),onCardClick:()=>L(y.data.id,"Event")})},`${y.type}-${((Y=y.data)==null?void 0:Y.id)||y.saved_at}`)})}):e.jsx(et,{spacing:4,align:"stretch",children:E.map(y=>{var Y;return e.jsx(hr.div,{variants:v,children:y.type==="Resource"?e.jsx(zc,{resource:y.data,onBookmark:()=>R(y.data.id,"Resource"),onCardClick:()=>L(y.data.id,"Resource"),currentUser:O,cardBg:D,textColor:H,mutedText:Z,borderColor:P}):e.jsx(ap,{event:y,onBookmark:()=>R(y.data.id,"Event"),onCardClick:()=>L(y.data.id,"Event")})},`${y.type}-${((Y=y.data)==null?void 0:Y.id)||y.saved_at}`)})})},x)})};return e.jsxs(de,{bg:T,minH:"100vh",p:{base:4,md:8},children:[e.jsxs(ke,{mb:4,align:"center",children:[e.jsx(Mt,{icon:e.jsx(Bn,{}),"aria-label":"Go back",variant:"ghost",onClick:oe}),e.jsx(V,{ml:2,fontWeight:"medium",color:Z,children:"Go Back"})]}),e.jsxs(et,{spacing:6,align:"stretch",children:[e.jsxs(ke,{direction:{base:"column",md:"row"},justify:"space-between",align:{base:"flex-start",md:"center"},gap:4,children:[e.jsxs(de,{children:[e.jsx(ut,{size:"lg",color:H,children:"My Saved Items"}),e.jsx(V,{color:Z,children:i?"Loading...":`${j.length} items found`})]}),e.jsxs(ke,{gap:2,direction:{base:"column",sm:"row"},w:{base:"100%",md:"auto"},children:[e.jsxs(Rr,{w:{base:"100%",sm:"250px"},children:[e.jsx(Wr,{pointerEvents:"none",children:e.jsx(ct,{as:no,color:Z})}),e.jsx(Pt,{placeholder:"Search saved items...",value:c,onChange:M=>u(M.target.value),bg:D})]}),e.jsxs(at,{spacing:1,bg:D,borderRadius:"md",p:1,borderWidth:"1px",borderColor:P,children:[e.jsx(Ee,{size:"sm",variant:x==="grid"?"solid":"ghost",onClick:()=>b("grid"),leftIcon:e.jsx(Ug,{}),children:"Grid"}),e.jsx(Ee,{size:"sm",variant:x==="list"?"solid":"ghost",onClick:()=>b("list"),leftIcon:e.jsx(mp,{}),children:"List"})]})]})]}),e.jsx(sa,{variant:"soft-rounded",colorScheme:"blue",children:e.jsx(oa,{overflowX:"auto",py:2,children:Ov.map(M=>e.jsxs(Yn,{onClick:()=>p(M.id),bg:h===M.id?B:"transparent",_hover:{bg:G},children:[e.jsx(ct,{as:M.icon,mr:2,color:M.color}),M.name]},M.id))})}),e.jsxs(e.Fragment,{children:[ne(),z>1&&e.jsxs(at,{justify:"center",spacing:4,mt:4,children:[e.jsx(Ee,{onClick:()=>_(M=>M-1),isDisabled:m===1,children:"Previous"}),e.jsxs(V,{children:["Page ",m," of ",z]}),e.jsx(Ee,{onClick:()=>_(M=>M+1),isDisabled:m===z,children:"Next"})]})]})]})]})},Ev=()=>{const t=Ir(),r=Vr(),{user:n}=ai(),i=se("rgba(255, 255, 255, 0.92)","rgba(45, 55, 72, 0.85)"),o=se("rgba(226, 232, 240, 0.8)","rgba(74, 85, 104, 0.6)"),s=se("gray.600","gray.400"),a=se("blue.50","rgba(49, 130, 206, 0.12)"),c=se("rgba(226, 232, 240, 0.9)","rgba(74, 85, 104, 0.7)"),u=se("rgba(237, 242, 247, 0.7)","rgba(45, 55, 72, 0.6)"),h=se("rgba(203, 213, 224, 0.9)","rgba(74, 85, 104, 0.6)"),[p,x]=W.useState([]),[b,m]=W.useState({current_page:1,last_page:1,total:0}),[_,w]=W.useState(!0),[O,k]=W.useState(null),[T,H]=W.useState(null),[Z,P]=W.useState(""),[D,B]=W.useState(""),{isOpen:G,onOpen:R,onClose:L}=Er(),j=()=>{L(),H(null),P(""),B("")},A=N=>N?Array.isArray(N)?N.map($=>$==null?void 0:$.toLowerCase()).filter(Boolean):[String(N).toLowerCase()]:[],E=W.useMemo(()=>{const N=(localStorage.getItem("role")||"").toLowerCase(),$=A(n==null?void 0:n.roles),Q=A(n==null?void 0:n.role_names),ie=A(n==null?void 0:n.role),ue=new Set([...$,...Q,...ie,N]);return ue.has("admin")||ue.has("moderator")},[n]),z=N=>{if(!N)return"Unknown";const $=new Date(String(N).replace(" ","T"));return Number.isNaN($.getTime())?N:$.toLocaleString()},oe=N=>{if(!N)return"#";if(/^https?:\/\//i.test(N))return N;const $=os||"";return $?N.startsWith("/")?`${$}${N}`:`${$}/${N}`:N},re=N=>{const $=((N==null?void 0:N.type)||"").toLowerCase(),Q=((N==null?void 0:N.mime_type)||"").toLowerCase();return $==="image"||Q.startsWith("image")?rl:$==="document"||Q.includes("pdf")||Q.includes("word")?Dn:Qg},v=N=>N?N.poll?N.poll:N.polls&&!Array.isArray(N.polls)?N.polls:null:null,ne=W.useCallback(async(N=1)=>{if(E){w(!0);try{const $=await m0({page:N});x(Array.isArray($==null?void 0:$.data)?$.data:[]),m({current_page:($==null?void 0:$.current_page)||N,last_page:($==null?void 0:$.last_page)||1,total:($==null?void 0:$.total)||0})}catch($){t({title:"Failed to load pending resources",description:($==null?void 0:$.message)||($==null?void 0:$.error)||"Please try again in a moment.",status:"error",duration:4e3,isClosable:!0})}finally{w(!1)}}},[E,t]);W.useEffect(()=>{n&&!E&&(t({title:"Access restricted",description:"You do not have permission to moderate resources.",status:"warning",duration:3e3,isClosable:!0}),r("/dashboard",{replace:!0}))},[n,E,r,t]),W.useEffect(()=>{ne(1)},[ne]);const M=N=>{N<1||N>b.last_page||N===b.current_page||ne(N)},y=N=>{x($=>$.filter(Q=>Q.id!==N)),m($=>({...$,total:Math.max(($.total||1)-1,0)}))},Y=async N=>{k(N);try{await g0(N),y(N),t({title:"Resource approved",status:"success",duration:2500,isClosable:!0}),p.length<=1&&b.current_page>1&&ne(b.current_page-1)}catch($){t({title:"Approval failed",description:($==null?void 0:$.message)||($==null?void 0:$.error)||"Please try again.",status:"error",duration:3500,isClosable:!0})}finally{k(null)}},C=N=>{H(N),P(""),B(""),R()},q=async()=>{const N=Z.trim();if(!N){B("Please provide a reason for rejection.");return}if(T){k(T.id);try{await x0(T.id,N),y(T.id),t({title:"Resource rejected",status:"info",duration:2500,isClosable:!0}),j(),p.length<=1&&b.current_page>1&&ne(b.current_page-1)}catch($){t({title:"Rejection failed",description:($==null?void 0:$.message)||($==null?void 0:$.error)||"Please try again.",status:"error",duration:3500,isClosable:!0})}finally{k(null)}}};return E?e.jsxs(de,{position:"relative",bg:se("gray.50","gray.900"),minH:"calc(100vh - 60px)",py:6,px:{base:4,md:6,lg:8},children:[e.jsxs(ke,{direction:"column",maxW:"1200px",mx:"auto",gap:6,children:[e.jsx(ut,{size:"lg",children:"Resource Moderation"}),e.jsx(V,{color:s,maxW:"720px",children:"Review new resources submitted by the community. Approve high-quality contributions or reject those that do not meet the guidelines."}),e.jsxs(de,{bg:i,borderRadius:"xl",border:"1px solid",borderColor:o,boxShadow:"sm",px:{base:4,md:6},py:6,children:[e.jsxs(at,{spacing:3,mb:4,color:s,children:[e.jsx(Ps,{size:20}),e.jsxs(V,{fontSize:"sm",children:[b.total," pending ",b.total===1?"resource":"resources"," in queue"]})]}),_?e.jsx(bn,{py:16,children:e.jsx(en,{size:"lg",color:"blue.400",thickness:"4px"})}):p.length===0?e.jsxs(bn,{py:20,flexDirection:"column",gap:3,children:[e.jsx(Pi,{size:36,color:"#48BB78"}),e.jsx(ut,{size:"md",children:"All caught up!"}),e.jsx(V,{color:s,children:"No resources are waiting for review right now."})]}):e.jsx(yr,{spacing:5,children:p.map(N=>{var $,Q,ie,ue,le,ge;return e.jsx(de,{borderRadius:"lg",border:"1px solid",borderColor:o,bg:se("white","gray.800"),p:{base:4,md:5},children:e.jsxs(ke,{direction:{base:"column",md:"row"},gap:5,children:[e.jsxs(de,{flex:"1",children:[e.jsxs(at,{spacing:3,align:"flex-start",mb:3,children:[e.jsx(Tr,{size:"md",name:(($=N==null?void 0:N.user)==null?void 0:$.full_name)||((Q=N==null?void 0:N.user)==null?void 0:Q.username)||"User",src:((ie=N==null?void 0:N.user)==null?void 0:ie.avatar_url)||void 0}),e.jsxs(de,{children:[e.jsxs(at,{spacing:3,align:"center",children:[e.jsx(ut,{size:"md",children:N.title||"Untitled"}),e.jsx(Lr,{colorScheme:"yellow",textTransform:"capitalize",children:N.approval_status||"pending"})]}),e.jsxs(V,{fontSize:"sm",color:s,mt:1,children:["Submitted by ",((ue=N==null?void 0:N.user)==null?void 0:ue.full_name)||((le=N==null?void 0:N.user)==null?void 0:le.username)||"Unknown"]}),e.jsx(V,{fontSize:"xs",color:s,children:z(N.created_at)})]})]}),e.jsx(V,{color:se("gray.700","gray.200"),whiteSpace:"pre-wrap",children:N.description||"No description provided."}),e.jsx(tn,{my:4,opacity:.4}),e.jsxs(yr,{direction:{base:"column",md:"row"},spacing:3,fontSize:"sm",color:s,children:[e.jsxs(de,{bg:a,borderRadius:"md",px:3,py:2,children:["Course: ",((ge=N==null?void 0:N.course)==null?void 0:ge.name)||"General"]}),e.jsxs(de,{bg:a,borderRadius:"md",px:3,py:2,children:["Attachments: ",Array.isArray(N.attachments)?N.attachments.length:0]})]}),Array.isArray(N.attachments)&&N.attachments.length>0&&e.jsxs(de,{mt:4,children:[e.jsx(V,{fontSize:"sm",fontWeight:"semibold",mb:2,children:"Attachments"}),e.jsx(yr,{spacing:2,children:N.attachments.map(xe=>{const ze=re(xe),Ie=oe(xe==null?void 0:xe.url);return e.jsxs(ke,{align:"center",border:"1px solid",borderColor:c,borderRadius:"md",px:3,py:2,gap:3,children:[e.jsx(ct,{as:ze,fontSize:"lg",color:"blue.400"}),e.jsxs(de,{flex:"1",minW:0,children:[e.jsx(V,{noOfLines:1,fontWeight:"medium",children:(xe==null?void 0:xe.original_name)||(xe==null?void 0:xe.name)||"Attachment"}),e.jsx(V,{fontSize:"xs",color:s,children:(xe==null?void 0:xe.mime_type)||(xe==null?void 0:xe.type)||"File"})]}),e.jsx(Ee,{as:jc,href:Ie,isExternal:!0,variant:"ghost",size:"sm",leftIcon:e.jsx(Ai,{}),children:"Open"})]},xe.id||xe.url)})})]}),(()=>{const xe=v(N);if(!xe)return null;const ze=Array.isArray(xe.options)?xe.options:[],Ie=ze.reduce((We,be)=>We+(be.vote_count||0),0);return e.jsxs(de,{mt:6,border:"1px solid",borderColor:h,borderRadius:"lg",bg:u,p:4,children:[e.jsxs(at,{spacing:2,mb:3,color:s,children:[e.jsx(ct,{as:Xo}),e.jsx(V,{fontWeight:"semibold",children:"Poll Question"})]}),e.jsx(V,{fontWeight:"bold",mb:3,children:xe.question||"Poll"}),e.jsx(yr,{spacing:3,children:ze.length===0?e.jsx(V,{fontSize:"sm",color:s,children:"No poll options provided."}):ze.map(We=>{const be=We.vote_count||0,ee=Ie>0?Math.round(be/Ie*100):0;return e.jsxs(de,{children:[e.jsxs(ke,{justify:"space-between",fontSize:"sm",mb:1,children:[e.jsx(V,{fontWeight:"medium",children:We.option_text}),e.jsxs(V,{color:s,children:[be," votes"]})]}),e.jsx(tl,{value:ee,colorScheme:"blue",borderRadius:"md"}),e.jsxs(V,{fontSize:"xs",color:s,mt:1,children:[ee,"%"]})]},We.id||We.option_text)})}),e.jsxs(V,{fontSize:"xs",color:s,mt:3,children:["Total votes: ",Ie]})]})})()]}),e.jsx(tn,{orientation:"vertical",display:{base:"none",md:"block"}}),e.jsxs(yr,{spacing:3,minW:{md:"220px"},children:[e.jsx(Ee,{colorScheme:"green",leftIcon:e.jsx(Pi,{}),isLoading:O===N.id,loadingText:"Approving",onClick:()=>Y(N.id),children:"Approve"}),e.jsx(Ee,{variant:"outline",colorScheme:"red",leftIcon:e.jsx(io,{}),isLoading:O===N.id&&(T==null?void 0:T.id)===N.id&&G,onClick:()=>C(N),children:"Reject"})]})]})},N.id)})}),!_&&p.length>0&&e.jsx(Fc,{currentPage:b.current_page,totalPages:b.last_page,onPageChange:M,isLoading:_})]})]}),e.jsxs(cn,{isOpen:G,onClose:j,isCentered:!0,size:"lg",children:[e.jsx(kr,{}),e.jsxs(dn,{children:[e.jsx(Fr,{children:"Reject resource"}),e.jsx(rn,{disabled:O===(T==null?void 0:T.id),onClick:j}),e.jsx(Ar,{children:e.jsxs(ht,{isInvalid:!!D,children:[e.jsx(ft,{children:"Reason for rejection"}),e.jsx(Qn,{placeholder:"Describe why this resource is being rejected",value:Z,onChange:N=>{P(N.target.value),D&&B("")},rows:5}),D&&e.jsx(V,{color:"red.500",fontSize:"sm",mt:2,children:D})]})}),e.jsxs(Ur,{gap:3,children:[e.jsx(Ee,{variant:"ghost",onClick:j,isDisabled:O===(T==null?void 0:T.id),children:"Cancel"}),e.jsx(Ee,{colorScheme:"red",leftIcon:e.jsx(io,{}),onClick:q,isLoading:O===(T==null?void 0:T.id),loadingText:"Rejecting",children:"Reject resource"})]})]})]})]}):e.jsx(bn,{minH:"70vh",children:e.jsxs(yr,{spacing:4,align:"center",children:[e.jsx($u,{size:48,color:"#DD6B20"}),e.jsx(V,{color:s,children:"Redirecting..."})]})})},Tv=()=>e.jsxs(fg,{children:[e.jsx(qr,{path:"/",element:e.jsxs(de,{bg:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",minH:"100vh",children:[e.jsx(l1,{}),e.jsx(d1,{}),e.jsx(u1,{}),e.jsx(h1,{}),e.jsx(a1,{})]})}),e.jsx(qr,{path:"/login",element:e.jsx(K2,{})}),e.jsx(qr,{path:"/register",element:e.jsx(ex,{})}),e.jsx(qr,{path:"/google-callback",element:e.jsx(tx,{})}),e.jsx(qr,{path:"/complete-google-registration",element:e.jsx(rx,{})}),e.jsx(qr,{element:e.jsx(Ay,{}),children:e.jsxs(qr,{element:e.jsx(jy,{}),children:[e.jsx(qr,{path:"/dashboard",element:e.jsx(nx,{})}),e.jsx(qr,{path:"/settings",element:e.jsx(C5,{})}),e.jsx(qr,{path:"/user/:userId",element:e.jsx(k5,{})}),e.jsx(qr,{path:"/resources",element:e.jsx(wb,{})}),e.jsx(qr,{path:"/resources/:id",element:e.jsx(Nv,{})}),e.jsx(qr,{path:"/clubs",element:e.jsx(Mb,{})}),e.jsx(qr,{path:"/courses/:id",element:e.jsx(Bb,{})}),e.jsx(qr,{path:"/study-groups",element:e.jsx(Kb,{})}),e.jsx(qr,{path:"/events",element:e.jsx(ux,{})}),e.jsx(qr,{path:"/requests",element:e.jsx(by,{})}),e.jsx(qr,{path:"/document/:docId",element:e.jsx(Qb,{})}),e.jsx(qr,{path:"/notifications",element:e.jsx(iy,{})}),e.jsx(qr,{path:"/grade-calculator",element:e.jsx(ky,{})}),e.jsx(qr,{path:"/saved-resources",element:e.jsx(Rv,{})}),e.jsx(qr,{path:"/resource-moderation",element:e.jsx(Ev,{})})]})}),e.jsx(qr,{path:"*",element:e.jsx(Sy,{})})]}),zv=()=>{const{pathname:t}=ll();return W.useEffect(()=>{window.scrollTo(0,0)},[t]),null},Fv=lg({config:{initialColorMode:"light",useSystemColorMode:!1},colors:{brand:{navy:"#1e3669",navyDark:"#132347",gold:"#f2d944",goldDark:"#d9c226",white:"#ffffff"}},styles:{global:t=>({body:{bg:t.colorMode==="dark"?"gray.800":"#f0f4f8"}})},components:{Button:{variants:{primary:t=>({bg:t.colorMode==="dark"?"brand.navyDark":"brand.navy",color:"white",_hover:{bg:t.colorMode==="dark"?"#0c1930":"#182d5a"}}),secondary:t=>({bg:t.colorMode==="dark"?"brand.goldDark":"brand.gold",color:t.colorMode==="dark"?"white":"brand.navy",_hover:{bg:t.colorMode==="dark"?"#c4af22":"#e9d033"}})}}}});function Iv(){return e.jsx(cg,{theme:Fv,children:e.jsxs(pg,{children:[e.jsx(zv,{}),e.jsx(X2,{children:e.jsx(ny,{children:e.jsx(Tv,{})})})]})})}_g.createRoot(document.getElementById("root")).render(e.jsx(W.StrictMode,{children:e.jsx(Iv,{})}));export{oo as _};
