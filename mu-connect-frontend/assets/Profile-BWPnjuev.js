import{U as Gt,h as $t,u as _,j as a,F as E,S as et,B as f,a7 as W,O as Qt,m as ce,A as tt,K as T,n as be,H as Vt,c as Y,V as te,b as Jt,W as N,X as I,R as $,a9 as Kt,Q as rt,aa as at,N as nt,d as h,a8 as xe,I as st,ab as Zt,ac as er,ad as ot,ae as Q,af as tr,ag as V,M as rr,e as ar,f as nr,g as it,ah as sr,ai as or,x as ir,aj as cr,ak as dr,z as lr,E as ur,a1 as mr,al as hr}from"./chakra-BFMGxYLr.js";import{z as je,A as fr,B as gr,f as ct,h as dt,C as br,q as xr,D as pr,E as wr,H as lt,I as yr,J as jr,K as vr,L as Sr,M as Cr,N as kr}from"./index-Dge-MEAl.js";import{u as Mr,a as M}from"./react-6s1XWRBU.js";import{M as Pr,g as _r,t as Wr,u as Or}from"./userService-BaPlotyr.js";import{D as Tr,B as de,C as Dr,a as Fr,L as zr,b as Er,p as Yr,c as Ur,d as Rr,A as Ar}from"./charts-BfmQi9d0.js";import{l as pe,c as we}from"./errorHandler-C4MeMDhB.js";const ve=fr,Br=async()=>{try{return(await je.get(`${ve}/my-profile`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}})).data}catch(t){throw console.error("Error fetching user profile:",t),t}},Nr=async(t,e)=>{try{const r=e.avatarFile instanceof File;let n;if(r){const o=new FormData;o.append("avatar",e.avatarFile),o.append("_method","PUT"),Object.keys(e).forEach(d=>{d!=="avatarFile"&&d!=="avatar"&&e[d]!==void 0&&o.append(d,e[d])}),n=await je.post(`${ve}/user/${t}`,o,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"multipart/form-data"}})}else n=await je.put(`${ve}/user/${t}`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});return n.data}catch(r){throw console.error("Error updating user profile:",r),r}},wt=6048e5,Ir=864e5,ut=Symbol.for("constructDateFrom");function A(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&ut in t?t[ut](e):t instanceof Date?new t.constructor(e):new Date(e)}function F(t,e){return A(e||t,t)}let Hr={};function ue(){return Hr}function ne(t,e){var l,b,w,c,y,v,O,S;const r=ue(),n=(S=(O=(c=(w=e==null?void 0:e.weekStartsOn)!=null?w:(b=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:b.weekStartsOn)!=null?c:r.weekStartsOn)!=null?O:(v=(y=r.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)!=null?S:0,o=F(t,e==null?void 0:e.in),d=o.getDay(),i=(d<n?7:0)+d-n;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function le(t,e){return ne(t,{...e,weekStartsOn:1})}function yt(t,e){const r=F(t,e==null?void 0:e.in),n=r.getFullYear(),o=A(r,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);const d=le(o),i=A(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=le(i);return r.getTime()>=d.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function mt(t){const e=F(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Lr(t,...e){const r=A.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function ht(t,e){const r=F(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function qr(t,e,r){const[n,o]=Lr(r==null?void 0:r.in,t,e),d=ht(n),i=ht(o),l=+d-mt(d),b=+i-mt(i);return Math.round((l-b)/Ir)}function Xr(t,e){const r=yt(t,e),n=A(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),le(n)}function Gr(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $r(t){return!(!Gr(t)&&typeof t!="number"||isNaN(+F(t)))}function Qr(t,e){const r=F(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Vr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Jr=(t,e,r)=>{let n;const o=Vr[t];return typeof o=="string"?n=o:e===1?n=o.one:n=o.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function ye(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Kr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Zr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ea={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ta={date:ye({formats:Kr,defaultWidth:"full"}),time:ye({formats:Zr,defaultWidth:"full"}),dateTime:ye({formats:ea,defaultWidth:"full"})},ra={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},aa=(t,e,r,n)=>ra[t];function re(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let o;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;o=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;o=t.values[l]||t.values[i]}const d=t.argumentCallback?t.argumentCallback(e):e;return o[d]}}const na={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sa={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},oa={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ia={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ca={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},da={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},la=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ua={ordinalNumber:la,era:re({values:na,defaultWidth:"wide"}),quarter:re({values:sa,defaultWidth:"wide",argumentCallback:t=>t-1}),month:re({values:oa,defaultWidth:"wide"}),day:re({values:ia,defaultWidth:"wide"}),dayPeriod:re({values:ca,defaultWidth:"wide",formattingValues:da,defaultFormattingWidth:"wide"})};function ae(t){return(e,r={})=>{const n=r.width,o=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],d=e.match(o);if(!d)return null;const i=d[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],b=Array.isArray(l)?ha(l,y=>y.test(i)):ma(l,y=>y.test(i));let w;w=t.valueCallback?t.valueCallback(b):b,w=r.valueCallback?r.valueCallback(w):w;const c=e.slice(i.length);return{value:w,rest:c}}}function ma(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function ha(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function fa(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const o=n[0],d=e.match(t.parsePattern);if(!d)return null;let i=t.valueCallback?t.valueCallback(d[0]):d[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(o.length);return{value:i,rest:l}}}const ga=/^(\d+)(th|st|nd|rd)?/i,ba=/\d+/i,xa={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pa={any:[/^b/i,/^(a|c)/i]},wa={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ya={any:[/1/i,/2/i,/3/i,/4/i]},ja={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},va={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Sa={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ca={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ka={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ma={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pa={ordinalNumber:fa({matchPattern:ga,parsePattern:ba,valueCallback:t=>parseInt(t,10)}),era:ae({matchPatterns:xa,defaultMatchWidth:"wide",parsePatterns:pa,defaultParseWidth:"any"}),quarter:ae({matchPatterns:wa,defaultMatchWidth:"wide",parsePatterns:ya,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ae({matchPatterns:ja,defaultMatchWidth:"wide",parsePatterns:va,defaultParseWidth:"any"}),day:ae({matchPatterns:Sa,defaultMatchWidth:"wide",parsePatterns:Ca,defaultParseWidth:"any"}),dayPeriod:ae({matchPatterns:ka,defaultMatchWidth:"any",parsePatterns:Ma,defaultParseWidth:"any"})},_a={code:"en-US",formatDistance:Jr,formatLong:ta,formatRelative:aa,localize:ua,match:Pa,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Wa(t,e){const r=F(t,e==null?void 0:e.in);return qr(r,Qr(r))+1}function Oa(t,e){const r=F(t,e==null?void 0:e.in),n=+le(r)-+Xr(r);return Math.round(n/wt)+1}function jt(t,e){var c,y,v,O,S,z,B,U;const r=F(t,e==null?void 0:e.in),n=r.getFullYear(),o=ue(),d=(U=(B=(O=(v=e==null?void 0:e.firstWeekContainsDate)!=null?v:(y=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:y.firstWeekContainsDate)!=null?O:o.firstWeekContainsDate)!=null?B:(z=(S=o.locale)==null?void 0:S.options)==null?void 0:z.firstWeekContainsDate)!=null?U:1,i=A((e==null?void 0:e.in)||t,0);i.setFullYear(n+1,0,d),i.setHours(0,0,0,0);const l=ne(i,e),b=A((e==null?void 0:e.in)||t,0);b.setFullYear(n,0,d),b.setHours(0,0,0,0);const w=ne(b,e);return+r>=+l?n+1:+r>=+w?n:n-1}function Ta(t,e){var l,b,w,c,y,v,O,S;const r=ue(),n=(S=(O=(c=(w=e==null?void 0:e.firstWeekContainsDate)!=null?w:(b=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:b.firstWeekContainsDate)!=null?c:r.firstWeekContainsDate)!=null?O:(v=(y=r.locale)==null?void 0:y.options)==null?void 0:v.firstWeekContainsDate)!=null?S:1,o=jt(t,e),d=A((e==null?void 0:e.in)||t,0);return d.setFullYear(o,0,n),d.setHours(0,0,0,0),ne(d,e)}function Da(t,e){const r=F(t,e==null?void 0:e.in),n=+ne(r,e)-+Ta(r,e);return Math.round(n/wt)+1}function m(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const R={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return m(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):m(r+1,2)},d(t,e){return m(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return m(t.getHours()%12||12,e.length)},H(t,e){return m(t.getHours(),e.length)},m(t,e){return m(t.getMinutes(),e.length)},s(t,e){return m(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),o=Math.trunc(n*Math.pow(10,r-3));return m(o,e.length)}},J={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ft={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return R.y(t,e)},Y:function(t,e,r,n){const o=jt(t,n),d=o>0?o:1-o;if(e==="YY"){const i=d%100;return m(i,2)}return e==="Yo"?r.ordinalNumber(d,{unit:"year"}):m(d,e.length)},R:function(t,e){const r=yt(t);return m(r,e.length)},u:function(t,e){const r=t.getFullYear();return m(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return m(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return m(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return R.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return m(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const o=Da(t,n);return e==="wo"?r.ordinalNumber(o,{unit:"week"}):m(o,e.length)},I:function(t,e,r){const n=Oa(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):m(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):R.d(t,e)},D:function(t,e,r){const n=Wa(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):m(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const o=t.getDay(),d=(o-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(d);case"ee":return m(d,2);case"eo":return r.ordinalNumber(d,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const o=t.getDay(),d=(o-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(d);case"cc":return m(d,e.length);case"co":return r.ordinalNumber(d,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),o=n===0?7:n;switch(e){case"i":return String(o);case"ii":return m(o,e.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let o;switch(n===12?o=J.noon:n===0?o=J.midnight:o=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let o;switch(n>=17?o=J.evening:n>=12?o=J.afternoon:n>=4?o=J.morning:o=J.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return R.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):R.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):m(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):m(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):R.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):R.s(t,e)},S:function(t,e){return R.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return bt(n);case"XXXX":case"XX":return H(n);case"XXXXX":case"XXX":default:return H(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return bt(n);case"xxxx":case"xx":return H(n);case"xxxxx":case"xxx":default:return H(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+gt(n,":");case"OOOO":default:return"GMT"+H(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+gt(n,":");case"zzzz":default:return"GMT"+H(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return m(n,e.length)},T:function(t,e,r){return m(+t,e.length)}};function gt(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),o=Math.trunc(n/60),d=n%60;return d===0?r+String(o):r+String(o)+e+m(d,2)}function bt(t,e){return t%60===0?(t>0?"-":"+")+m(Math.abs(t)/60,2):H(t,e)}function H(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),o=m(Math.trunc(n/60),2),d=m(n%60,2);return r+o+e+d}const xt=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},vt=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Fa=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return xt(t,e);let d;switch(n){case"P":d=e.dateTime({width:"short"});break;case"PP":d=e.dateTime({width:"medium"});break;case"PPP":d=e.dateTime({width:"long"});break;case"PPPP":default:d=e.dateTime({width:"full"});break}return d.replace("{{date}}",xt(n,e)).replace("{{time}}",vt(o,e))},za={p:vt,P:Fa},Ea=/^D+$/,Ya=/^Y+$/,Ua=["D","DD","YY","YYYY"];function Ra(t){return Ea.test(t)}function Aa(t){return Ya.test(t)}function Ba(t,e,r){const n=Na(t,e,r);if(console.warn(n),Ua.includes(t))throw new RangeError(n)}function Na(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ia=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ha=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,La=/^'([^]*?)'?$/,qa=/''/g,Xa=/[a-zA-Z]/;function pt(t,e,r){var c,y,v,O,S,z,B,U,se;const n=ue(),o=(c=n.locale)!=null?c:_a,d=(S=(O=n.firstWeekContainsDate)!=null?O:(v=(y=n.locale)==null?void 0:y.options)==null?void 0:v.firstWeekContainsDate)!=null?S:1,i=(se=(U=n.weekStartsOn)!=null?U:(B=(z=n.locale)==null?void 0:z.options)==null?void 0:B.weekStartsOn)!=null?se:0,l=F(t,r==null?void 0:r.in);if(!$r(l))throw new RangeError("Invalid time value");let b=e.match(Ha).map(j=>{const p=j[0];if(p==="p"||p==="P"){const L=za[p];return L(j,o.formatLong)}return j}).join("").match(Ia).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const p=j[0];if(p==="'")return{isToken:!1,value:Ga(j)};if(ft[p])return{isToken:!0,value:j};if(p.match(Xa))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:j}});o.localize.preprocessor&&(b=o.localize.preprocessor(l,b));const w={firstWeekContainsDate:d,weekStartsOn:i,locale:o};return b.map(j=>{if(!j.isToken)return j.value;const p=j.value;(Aa(p)||Ra(p))&&Ba(p,e,String(t));const L=ft[p[0]];return L(l,p,o.localize,w)}).join("")}function Ga(t){const e=t.match(La);return e?e[1].replace(qa,"'"):t}Dr.register(Fr,zr,Er,Yr,Ur,Rr,Ar);const tn=()=>{var We,Oe,Te,De,Fe,ze,Ee,Ye,Ue,Re,Ae,Be,Ne,Ie,He,Le,qe,Xe,Ge,$e,Qe,Ve;const t=Mr(),e=Gt(),[r,n]=M.useState(!1),[o,d]=M.useState(!0),[i,l]=M.useState(null),[b,w]=M.useState(null),[c,y]=M.useState(null),[v,O]=M.useState(!1),[S,z]=M.useState(""),[B,U]=M.useState([]),[se,j]=M.useState(!1),[p,L]=M.useState(""),q=localStorage.getItem("role"),[C,St]=M.useState("overview"),{isOpen:Ct,onOpen:kt,onClose:me}=$t(),[X,Mt]=M.useState(null),[K,Se]=M.useState(""),[Pt,G]=M.useState(!1);M.useEffect(()=>{he()},[e]);const P=_("white","gray.700"),g=_("gray.800","white"),D=_("gray.500","gray.400"),Z=s=>{const{name:u,value:x}=s.target;l(k=>({...k,[u]:x})),G(!0)},_t=s=>{const u=s.target.files[0];if(u){const x=new FileReader;x.onloadend=()=>{l(k=>({...k,avatar:x.result,avatarFile:u})),G(!0)},x.readAsDataURL(u)}},Wt=async()=>{try{const s={username:i.username,first_name:i.first_name,last_name:i.last_name,email:i.email,bio:i.bio};S&&(s.password=S),i.avatarFile&&(s.avatarFile=i.avatarFile),await Nr(i.id,s),await he(),e({title:"Profile updated",description:"Your profile has been updated successfully.",status:"success",duration:5e3,isClosable:!0}),z(""),n(!1),G(!1)}catch(s){pe("handleSave",s),e(we(s,"There was an error updating your profile"))}},Ot=()=>{r&&!window.confirm("Are you sure you want to leave? Your changes will be lost.")||(r?(n(!1),z(""),he()):t(-1))},he=async()=>{try{d(!0);const s=await Br();l(s.user),y(s.analytics),d(!1)}catch(s){pe("fetchProfileData",s),e(we(s,"There was an error loading your profile data")),d(!1)}},oe=async(s="")=>{var u;try{j(!0);const x=await _r(s),k=x.data?x.data:((u=x.data)==null?void 0:u.data)||x.users||x;U(k),j(!1)}catch(x){pe("fetchUsers",x),e(we(x,"There was an error loading the users list")),j(!1)}},Tt=()=>{L(""),oe("")},Dt=async s=>{try{const u=await Wr(s);U(x=>x.map(k=>k.id===s?{...k,is_active:u.is_active}:k)),e({title:"Updated",description:`User is now ${u.is_active?"active":"inactive"}.`,status:"success",duration:4e3,isClosable:!0})}catch{e({title:"Error",description:"Failed to update user status.",status:"error",duration:4e3,isClosable:!0})}},Ft=s=>{Mt(s),Se(s.primary_role),kt()},zt=async()=>{if(!(!X||!K))try{await Or(X.id,K),U(s=>s.map(u=>u.id===X.id?{...u,primary_role:K}:u)),e({title:"Role Updated",description:`${X.username}'s role has been updated to ${K}.`,status:"success",duration:4e3,isClosable:!0}),me()}catch{e({title:"Error",description:"Failed to update user role.",status:"error",duration:4e3,isClosable:!0})}},Ce=s=>s?s.avatar&&s.avatar.startsWith("data:")?s.avatar:s.avatar_url||null:null,fe=s=>s?`${s.first_name||""} ${s.last_name||""}`.trim():"",Et=[{key:"resources_shared",label:"Resources Shared",icon:gr,value:((We=c==null?void 0:c.resources)==null?void 0:We.shared)||0},{key:"study_groups_total",label:"Study Groups",icon:ct,value:((Oe=c==null?void 0:c.study_groups)==null?void 0:Oe.total)||0},{key:"events_registered",label:"Events Registered",icon:dt,value:((Te=c==null?void 0:c.events)==null?void 0:Te.registered)||0},{key:"applications_total",label:"Applications",icon:br,value:((De=c==null?void 0:c.applications)==null?void 0:De.total)||0}],Yt={labels:["Comments Made","Upvotes Given","Upvotes Received"],datasets:[{label:"Contributions",data:[(c==null?void 0:c.contributions.comments_made)||0,(c==null?void 0:c.contributions.upvotes_given)||0,(c==null?void 0:c.contributions.upvotes_received)||0],backgroundColor:["#3498db","#2ecc71","#e74c3c"],borderWidth:1}]},Ut={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(s){return`${s.label}: ${s.raw}`}}}}},Rt={labels:((ze=(Fe=c==null?void 0:c.charts)==null?void 0:Fe.top_posting_users)==null?void 0:ze.map(s=>s.username))||[],datasets:[{label:"Resources Shared",data:((Ye=(Ee=c==null?void 0:c.charts)==null?void 0:Ee.top_posting_users)==null?void 0:Ye.map(s=>s.resources_count))||[],backgroundColor:"#3498db",borderColor:"#2980b9",borderWidth:1}]},At={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Resources Shared"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Posting Users",font:{size:18}}}},Bt={labels:((Re=(Ue=c==null?void 0:c.charts)==null?void 0:Ue.top_commenting_users)==null?void 0:Re.map(s=>s.username))||[],datasets:[{label:"Comments Made",data:((Be=(Ae=c==null?void 0:c.charts)==null?void 0:Ae.top_commenting_users)==null?void 0:Be.map(s=>s.comments_count))||[],backgroundColor:"#2ecc71",borderColor:"#27ae60",borderWidth:1}]},Nt={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Comments Made"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Commenting Users",font:{size:18}}}},It={labels:((Ie=(Ne=c==null?void 0:c.charts)==null?void 0:Ne.top_upvoting_users)==null?void 0:Ie.map(s=>s.username))||[],datasets:[{label:"Upvotes Given",data:((Le=(He=c==null?void 0:c.charts)==null?void 0:He.top_upvoting_users)==null?void 0:Le.map(s=>s.upvotes_given))||[],backgroundColor:"#e74c3c",borderColor:"#c0392b",borderWidth:1}]},Ht={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Upvotes Given"}},y:{title:{display:!0,text:"Username"}}},plugins:{title:{display:!0,text:"Top Upvoting Users",font:{size:18}}}},Lt={labels:((Xe=(qe=c==null?void 0:c.charts)==null?void 0:qe.top_courses)==null?void 0:Xe.map(s=>s.code))||[],datasets:[{label:"Resources Posted",data:(($e=(Ge=c==null?void 0:c.charts)==null?void 0:Ge.top_courses)==null?void 0:$e.map(s=>s.resources_count))||[],backgroundColor:"#f39c12",borderColor:"#d35400",borderWidth:1}]},qt={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Resources Posted"}},y:{title:{display:!0,text:"Course"}}},plugins:{title:{display:!0,text:"Top Courses",font:{size:18}}}},ge=(s=[],u,x)=>{var Ze;if(!i)return"";const k=((Ze=s[0])==null?void 0:Ze[u])||0,ee=s.find(Xt=>Xt.username===i.username),Je=ee?ee[u]:0,Ke=k-Je;return Ke>0?`You're ${Ke} ${x} away from the top spot!`:Je===k&&k!==0?`You're the top ${x.toLowerCase()}!`:""},ke=c!=null&&c.charts?ge(c==null?void 0:c.charts.top_posting_users,"resources_count","resources"):"",Me=c!=null&&c.charts?ge(c==null?void 0:c.charts.top_commenting_users,"comments_count","comments"):"",Pe=c!=null&&c.charts?ge(c==null?void 0:c.charts.top_upvoting_users,"upvotes_given","upvotes"):"",_e=(s=>{const u=[];return s>=5&&u.push({name:"Helpful",color:"bg-green-100 text-green-800"}),s>=10&&u.push({name:"Insightful",color:"bg-blue-100 text-blue-800"}),s>=20&&u.push({name:"Expert",color:"bg-purple-100 text-purple-800"}),u})((c==null?void 0:c.contributions.upvotes_received)||0),ie=s=>{St(s),s==="users"&&(oe(p),oe())};return o?a.jsx(E,{height:"100vh",width:"100%",align:"center",justify:"center",children:a.jsx(et,{size:"xl"})}):a.jsx(E,{minH:"100vh",p:4,bg:_("gray.50","gray.800"),justify:"center",children:a.jsx(f,{w:{base:"full",md:"90%",lg:"80%"},children:a.jsxs(W,{bg:P,p:0,overflow:"hidden",children:[a.jsxs(f,{position:"relative",h:"180px",mb:"60px",children:[a.jsx(Qt,{src:Pr,alt:"Cover Photo",objectFit:"cover",w:"full",h:"full"}),a.jsx(E,{position:"absolute",top:4,left:{base:2,md:4},right:{base:2,md:4},justify:"flex-start",zIndex:1,children:a.jsx(ce,{icon:a.jsx(xr,{}),"aria-label":"Go back",onClick:Ot,bg:_("white","gray.800"),color:g,_hover:{bg:_("gray.100","gray.700")},boxShadow:"md",title:"Go back",size:{base:"sm",md:"md"}})}),r?a.jsx(f,{position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},cursor:"pointer",children:a.jsxs("label",{htmlFor:"avatar-upload",style:{cursor:"pointer"},children:[a.jsx(tt,{size:"xl",src:Ce(i),name:fe(i),boxShadow:"lg",border:"4px solid",borderColor:_("white","gray.800"),_hover:{opacity:.8,boxShadow:"xl"}}),a.jsx(f,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"rgba(0,0,0,0.3)",color:"white",borderRadius:"full",p:2,display:"flex",alignItems:"center",justifyContent:"center",children:a.jsx(pr,{})}),a.jsx("input",{type:"file",id:"avatar-upload",name:"avatar",accept:"image/jpeg,image/png,image/gif",style:{display:"none"},onChange:_t})]})}):a.jsx(tt,{size:"xl",src:Ce(i),name:fe(i),position:"absolute",bottom:"-40px",left:{base:"50%",md:"40px"},transform:{base:"translateX(-50%)",md:"translateX(0)"},boxShadow:"lg",border:"4px solid",borderColor:_("white","gray.800")})]}),a.jsx(f,{px:{base:4,md:6},children:a.jsxs(E,{justify:{base:"center",md:"flex-start"},align:"center",mb:6,mt:{base:5,md:0},flexWrap:"wrap",gap:2,children:[a.jsx(T,{size:{base:"md",sm:"lg",md:"xl"},color:g,textAlign:{base:"center",md:"left"},children:!r&&fe(i)}),a.jsx(be,{ml:{base:0,sm:3},fontSize:{base:"0.7em",md:"0.8em"},colorScheme:(i==null?void 0:i.primary_role)==="moderator"?"purple":(i==null?void 0:i.primary_role)==="admin"?"red":"blue",textTransform:"capitalize",children:(i==null?void 0:i.primary_role)||"Student"})]})}),a.jsxs(f,{mx:{base:2,md:6},mt:{base:0,md:6},children:[a.jsxs(Vt,{spacing:0,mb:8,borderBottom:"1px solid",borderColor:"gray.200",justify:{base:"flex-start",md:"center"},overflowX:"auto",overflowY:"hidden",css:{"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:_("gray.300","gray.600"),borderRadius:"2px"}},children:[a.jsx(Y,{variant:C==="overview"?"solid":"ghost",borderRadius:0,borderBottom:C==="overview"?"2px solid":"none",borderColor:"blue.500",color:C==="overview"?"blue.500":"gray.500",onClick:()=>ie("overview"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Overview"}),a.jsx(Y,{variant:C==="activity"?"solid":"ghost",borderRadius:0,borderBottom:C==="activity"?"2px solid":"none",borderColor:"blue.500",color:C==="activity"?"blue.500":"gray.500",onClick:()=>ie("activity"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Activity"}),q==="admin"&&a.jsx(Y,{variant:C==="analytics"?"solid":"ghost",borderRadius:0,borderBottom:C==="analytics"?"2px solid":"none",borderColor:"blue.500",color:C==="analytics"?"blue.500":"gray.500",onClick:()=>ie("analytics"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Analytics"}),q==="admin"&&a.jsx(Y,{variant:C==="users"?"solid":"ghost",borderRadius:0,borderBottom:C==="users"?"2px solid":"none",borderColor:"blue.500",color:C==="users"?"blue.500":"gray.500",onClick:()=>ie("users"),px:{base:3,sm:4,md:6},py:4,fontWeight:"medium",textTransform:"capitalize",fontSize:{base:"xs",sm:"sm",md:"md"},whiteSpace:"nowrap",flexShrink:0,children:"Users"})]}),C==="overview"&&a.jsxs(te,{spacing:8,align:"stretch",children:[a.jsxs(W,{p:6,shadow:"md",bg:P,children:[a.jsxs(E,{justify:"space-between",align:"center",mb:4,flexWrap:"wrap",gap:2,children:[a.jsx(T,{size:"md",color:g,children:"Personal Information"}),a.jsx(E,{gap:2,children:r?a.jsxs(a.Fragment,{children:[a.jsx(Y,{leftIcon:a.jsx(wr,{}),colorScheme:"green",onClick:Wt,size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},isDisabled:!Pt&&!S,children:"Save"}),a.jsx(Y,{colorScheme:"red",leftIcon:a.jsx(lt,{}),onClick:()=>{b&&l(b),n(!1),z(""),G(!1)},size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Cancel"})]}):a.jsx(Y,{leftIcon:a.jsx(yr,{}),colorScheme:"blue",onClick:()=>{w(i),n(!0),G(!1)},size:{base:"sm",md:"md"},fontSize:{base:"xs",sm:"sm"},children:"Edit Profile"})})]}),r?a.jsxs(Jt,{spacing:4,children:[a.jsxs(N,{children:[a.jsx(I,{children:"First Name"}),a.jsx($,{name:"first_name",value:(i==null?void 0:i.first_name)||"",onChange:Z})]}),a.jsxs(N,{children:[a.jsx(I,{children:"Last Name"}),a.jsx($,{name:"last_name",value:(i==null?void 0:i.last_name)||"",onChange:Z})]}),a.jsxs(N,{children:[a.jsx(I,{children:"Email"}),a.jsx($,{name:"email",value:(i==null?void 0:i.email)||"",onChange:Z})]}),a.jsxs(N,{children:[a.jsx(I,{children:"Username"}),a.jsx($,{name:"username",value:(i==null?void 0:i.username)||"",onChange:Z})]}),a.jsxs(N,{children:[a.jsx(I,{children:"Bio"}),a.jsx(Kt,{name:"bio",value:(i==null?void 0:i.bio)||"",onChange:Z,rows:3})]}),a.jsxs(N,{children:[a.jsx(I,{children:"Password (leave blank to keep current)"}),a.jsxs(rt,{children:[a.jsx($,{type:v?"text":"password",value:S,onChange:s=>{z(s.target.value),s.target.value&&G(!0)},placeholder:"Enter new password"}),a.jsx(at,{children:a.jsx(ce,{h:"1.75rem",size:"sm",onClick:()=>O(!v),icon:v?a.jsx(jr,{}):a.jsx(vr,{}),"aria-label":v?"Hide password":"Show password"})})]})]})]}):a.jsxs(nt,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[a.jsxs(f,{children:[a.jsx(h,{fontWeight:"bold",color:D,children:"First Name"}),a.jsx(h,{color:g,children:(i==null?void 0:i.first_name)||"-"})]}),a.jsxs(f,{children:[a.jsx(h,{fontWeight:"bold",color:D,children:"Last Name"}),a.jsx(h,{color:g,children:(i==null?void 0:i.last_name)||"-"})]}),a.jsxs(f,{children:[a.jsx(h,{fontWeight:"bold",color:D,children:"Email"}),a.jsx(h,{color:g,children:(i==null?void 0:i.email)||"-"})]}),a.jsxs(f,{children:[a.jsx(h,{fontWeight:"bold",color:D,children:"Username"}),a.jsx(h,{color:g,children:(i==null?void 0:i.username)||"-"})]}),a.jsxs(f,{gridColumn:{md:"span 2"},children:[a.jsx(h,{fontWeight:"bold",color:D,children:"Bio"}),a.jsx(h,{color:g,children:(i==null?void 0:i.bio)||"No bio provided."})]})]})]}),a.jsxs(W,{p:6,shadow:"md",bg:P,children:[a.jsx(T,{size:"md",mb:4,color:g,children:"Academic Information"}),a.jsxs(nt,{templateColumns:{base:"1fr",md:"1fr 1fr"},gap:4,children:[a.jsxs(f,{children:[a.jsx(h,{fontWeight:"bold",color:D,children:"Faculty"}),a.jsx(h,{color:g,children:((Qe=i==null?void 0:i.faculty)==null?void 0:Qe.name)||"Not specified"})]}),a.jsxs(f,{children:[a.jsx(h,{fontWeight:"bold",color:D,children:"Major"}),a.jsx(h,{color:g,children:((Ve=i==null?void 0:i.major)==null?void 0:Ve.name)||"Not specified"})]})]})]}),a.jsx(xe,{columns:{base:1,sm:2,lg:4},spacing:4,children:Et.map(s=>a.jsx(W,{p:4,shadow:"sm",bg:P,borderLeft:"4px solid",borderColor:"blue.500",children:a.jsxs(E,{align:"center",children:[a.jsx(st,{as:s.icon,boxSize:6,color:"blue.500",mr:3}),a.jsxs(f,{children:[a.jsx(h,{fontSize:"sm",color:D,children:s.label}),a.jsx(h,{fontSize:"2xl",fontWeight:"bold",color:g,children:s.value})]})]})},s.key))}),a.jsxs(W,{p:6,shadow:"md",bg:P,children:[a.jsx(T,{size:"md",mb:4,color:g,children:"Contribution Mix"}),a.jsx(f,{h:"300px",w:"100%",maxW:"500px",mx:"auto",children:a.jsx(Tr,{data:Yt,options:Ut})})]}),_e.length>0&&a.jsxs(W,{p:6,shadow:"md",bg:P,children:[a.jsx(T,{size:"md",mb:4,color:g,children:"Achievements"}),a.jsx(E,{flexWrap:"wrap",gap:2,children:_e.map((s,u)=>a.jsx(be,{px:3,py:1,borderRadius:"full",fontSize:"sm",fontWeight:"medium",colorScheme:s.color.split("-")[1],children:s.name},u))})]}),a.jsxs(W,{p:6,shadow:"md",bgGradient:_("linear(to-r, blue.50, indigo.50)","linear(to-r, blue.900, indigo.900)"),children:[a.jsx(T,{size:"md",mb:4,color:g,children:"Community Standing"}),a.jsxs(te,{align:"start",spacing:2,children:[ke&&a.jsx(h,{color:_("blue.700","blue.200"),fontWeight:"medium",children:ke}),Me&&a.jsx(h,{color:_("blue.700","blue.200"),fontWeight:"medium",children:Me}),Pe&&a.jsx(h,{color:_("blue.700","blue.200"),fontWeight:"medium",children:Pe})]})]})]}),C==="users"&&q==="admin"&&a.jsx(te,{spacing:8,align:"stretch",children:a.jsxs(W,{p:6,shadow:"md",bg:P,children:[a.jsx(T,{size:"md",mb:4,color:g,children:"User Management"}),a.jsxs(rt,{mb:4,maxW:{base:"100%",md:"400px"},size:{base:"sm",md:"md"},children:[a.jsx($,{placeholder:"Search users...",value:p,onChange:s=>L(s.target.value),bg:_("white","gray.700"),fontSize:{base:"xs",md:"sm"}}),a.jsxs(at,{width:{base:"6rem",md:"7rem"},display:"flex",justifyContent:"flex-end",alignItems:"center",children:[p&&a.jsx(ce,{"aria-label":"Clear",icon:a.jsx(lt,{}),size:"xs",mr:1,onClick:Tt}),a.jsx(Y,{h:"100%",size:"xs",onClick:()=>oe(p),fontSize:{base:"xs",sm:"sm"},children:"Search"})]})]}),se?a.jsx(E,{justify:"center",children:a.jsx(et,{})}):a.jsx(f,{overflowX:"auto",overflowY:"hidden",w:"100%",children:a.jsxs(Zt,{variant:"simple",size:{base:"sm",md:"md"},children:[a.jsx(er,{children:a.jsxs(ot,{children:[a.jsx(Q,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Username"}),a.jsx(Q,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Name"}),a.jsx(Q,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Email"}),a.jsx(Q,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Role"}),a.jsx(Q,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Status"}),a.jsx(Q,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:"Action"})]})}),a.jsx(tr,{children:B.map(s=>a.jsxs(ot,{children:[a.jsx(V,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:s.username}),a.jsx(V,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:`${s.first_name} ${s.last_name}`}),a.jsx(V,{whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:s.email}),a.jsx(V,{textTransform:"capitalize",whiteSpace:"nowrap",fontSize:{base:"xs",md:"sm"},children:s.primary_role}),a.jsx(V,{whiteSpace:"nowrap",children:a.jsx(be,{colorScheme:s.is_active?"green":"red",variant:"solid",fontSize:{base:"xs",md:"sm"},px:2,py:1,borderRadius:"md",children:s.is_active?"Active":"Inactive"})}),a.jsx(V,{whiteSpace:"nowrap",children:a.jsxs(rr,{children:[a.jsx(ar,{as:ce,icon:a.jsx(Sr,{}),variant:"ghost",size:"sm","aria-label":"Options"}),a.jsxs(nr,{children:[a.jsx(it,{icon:a.jsx(Cr,{}),onClick:()=>Ft(s),fontSize:{base:"xs",md:"sm"},children:"Update Role"}),a.jsx(sr,{}),a.jsx(it,{color:s.is_active?"red.500":"green.500",onClick:()=>Dt(s.id),fontSize:{base:"xs",md:"sm"},children:s.is_active?"Deactivate User":"Activate User"})]})]})})]},s.id))})]})})]})}),C==="activity"&&a.jsx(te,{spacing:8,align:"stretch",children:a.jsxs(W,{p:6,shadow:"md",bg:P,children:[a.jsx(T,{size:"md",mb:4,color:g,children:"Recent Activity"}),a.jsxs(f,{position:"relative",children:[a.jsx(f,{position:"absolute",left:{base:"20px",md:"50%"},transform:{base:"none",md:"translateX(-50%)"},h:"100%",w:"2px",bg:"gray.200"}),c!=null&&c.activity&&c.activity.length>0?c.activity.map((s,u)=>{const x=u%2===0,k=s.type==="event_registration"?dt:s.type==="study_group_join"?ct:kr,ee=s.type==="event_registration"?"blue":s.type==="study_group_join"?"green":"purple";return a.jsxs(E,{mb:8,justify:{base:"flex-start",md:"space-between"},align:"center",w:"100%",direction:{base:"row",md:x?"row-reverse":"row"},position:"relative",pl:{base:"50px",md:0},children:[a.jsx(f,{w:{base:"100%",md:"45%"},textAlign:{base:"left",md:"center"},p:3,borderRadius:"lg",display:{base:"none",md:"block"},children:a.jsx(h,{fontWeight:"medium",color:g,fontSize:{base:"xs",md:"sm"},children:pt(new Date(s.date),"MMM d, yyyy HH:mm")})}),a.jsx(f,{position:"absolute",left:{base:"10px",md:"50%"},transform:{base:"none",md:"translateX(-50%)"},w:{base:8,md:10},h:{base:8,md:10},borderRadius:"full",zIndex:10,bg:`${ee}.100`,color:`${ee}.600`,display:"flex",alignItems:"center",justifyContent:"center",shadow:"lg",border:"4px solid white",children:a.jsx(st,{as:k,boxSize:{base:3,md:4}})}),a.jsxs(f,{w:{base:"100%",md:"45%"},bg:P,p:{base:2,md:3},borderRadius:"lg",shadow:"sm",border:"1px solid",borderColor:"gray.100",children:[a.jsx(h,{fontWeight:"medium",color:g,textTransform:"capitalize",fontSize:{base:"xs",md:"sm"},children:s.type==="event_registration"?"Event Registration":s.type==="study_group_join"?"Joined Study Group":"Task Completed"}),a.jsx(h,{fontSize:{base:"xs",md:"sm"},color:D,children:s.type==="event_registration"?"Registered for an event":s.type==="study_group_join"?`Joined: ${s.data.group_name}`:"Completed a task"}),a.jsx(h,{fontSize:"xs",color:D,mt:1,display:{base:"block",md:"none"},children:pt(new Date(s.date),"MMM d, yyyy HH:mm")})]})]},u)}):a.jsx(h,{color:D,textAlign:"center",py:4,fontSize:{base:"xs",md:"sm"},children:"No recent activity to display."})]})]})}),C==="analytics"&&q==="admin"&&(c==null?void 0:c.charts)&&a.jsx(te,{spacing:8,align:"stretch",children:a.jsx(xe,{columns:{base:1,md:2},spacing:6,children:a.jsxs(W,{p:6,shadow:"md",bg:P,gridColumn:{lg:q==="admin"?"span 4":"span 3"},children:[a.jsx(T,{size:"md",mb:4,color:g,children:"Community Leaderboards"}),a.jsx(h,{color:D,mb:4,children:"Track your standing in the community based on your contributions."}),a.jsxs(xe,{columns:{base:1,md:2},spacing:6,children:[a.jsxs(W,{p:4,shadow:"sm",bg:P,border:"1px solid",borderColor:"gray.100",children:[a.jsx(T,{size:"sm",mb:2,color:g,children:"Top Posters"}),a.jsx(f,{h:"400px",w:"100%",children:a.jsx(de,{data:Rt,options:At})})]}),a.jsxs(W,{p:4,shadow:"sm",bg:P,border:"1px solid",borderColor:"gray.100",children:[a.jsx(T,{size:"sm",mb:2,color:g,children:"Top Commenters"}),a.jsx(f,{h:"400px",w:"100%",children:a.jsx(de,{data:Bt,options:Nt})})]}),a.jsxs(W,{p:4,shadow:"sm",bg:P,border:"1px solid",borderColor:"gray.100",children:[a.jsx(T,{size:"sm",mb:2,color:g,children:"Top Upvoters"}),a.jsx(f,{h:"400px",w:"100%",children:a.jsx(de,{data:It,options:Ht})})]}),q==="admin"&&a.jsxs(W,{p:4,shadow:"sm",bg:P,border:"1px solid",borderColor:"gray.100",children:[a.jsx(T,{size:"sm",mb:2,color:g,children:"Top Courses"}),a.jsx(f,{h:"400px",w:"100%",children:a.jsx(de,{data:Lt,options:qt})})]})]})]})})}),a.jsxs(or,{isOpen:Ct,onClose:me,children:[a.jsx(ir,{}),a.jsxs(cr,{children:[a.jsx(dr,{children:"Update User Role"}),a.jsx(lr,{}),a.jsx(ur,{children:X&&a.jsxs(a.Fragment,{children:[a.jsxs(h,{mb:4,children:["Update role for ",a.jsx("strong",{children:X.username})]}),a.jsxs(N,{children:[a.jsx(I,{children:"Select Role"}),a.jsxs(mr,{value:K,onChange:s=>Se(s.target.value),children:[a.jsx("option",{value:"student",children:"Student"}),a.jsx("option",{value:"moderator",children:"Moderator"}),a.jsx("option",{value:"admin",children:"Admin"})]})]})]})}),a.jsxs(hr,{children:[a.jsx(Y,{variant:"ghost",mr:3,onClick:me,children:"Cancel"}),a.jsx(Y,{colorScheme:"blue",onClick:zt,children:"Update Role"})]})]})]})]})]})})})};export{tn as default};
